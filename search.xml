<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>TDSQL å•æœºéƒ¨ç½²</title>
      <link href="/posts/90574417a505.html"/>
      <url>/posts/90574417a505.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>â€‹åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆTencent Distributed SQLï¼ŒTDSQLï¼‰æ˜¯è…¾è®¯æ‰“é€ çš„ä¸€æ¬¾åˆ†å¸ƒå¼æ•°æ®åº“äº§å“ï¼Œå…·å¤‡å¼ºä¸€è‡´é«˜å¯ç”¨ã€å…¨çƒéƒ¨ç½²æ¶æ„ã€åˆ†å¸ƒå¼æ°´å¹³æ‰©å±•ã€é«˜æ€§èƒ½ã€ä¼ä¸šçº§å®‰å…¨ç­‰ç‰¹æ€§ï¼ŒåŒæ—¶æä¾›æ™ºèƒ½ DBAã€è‡ªåŠ¨åŒ–è¿è¥ã€ç›‘æ§å‘Šè­¦ç­‰é…å¥—è®¾æ–½ï¼Œä¸ºå®¢æˆ·æä¾›å®Œæ•´çš„åˆ†å¸ƒå¼æ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><ul><li><p>CentOS 7 ï¼ˆ CPU8æ ¸ã€å†…å­˜ 16G å’Œç¡¬ç›˜ 150Gï¼‰ï¼Œæœ€ä½é…ç½®ï¼šå†…å­˜5Gï¼ˆå¿…é¡»å¤§äº5Gï¼Œå¦åˆ™æ— æ³•å®‰è£…ï¼‰ï¼ŒCPU2æ ¸ï¼Œç¡¬ç›˜50G</p></li><li><p>IPï¼š192.168.13.218</p></li><li><p>ä¸‹è½½è…¾è®¯äº‘ç‹¬ç«‹è¾“å‡º TDSQLï¼ˆè½¯ä»¶ä»‹è´¨ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line">wget https://tdsql1031730-1300276124.cos.ap-beijing.myqcloud.com/tdsql_10.3.17.3.0.zip</span><br><span class="line">unzip tdsql_10.3.17.3.0.zip</span><br></pre></td></tr></table></figure></li></ul><h2 id="å®‰è£…éƒ¨ç½²">å®‰è£…éƒ¨ç½²</h2><h3 id="1ã€å…å¯†ç™»å½•">1ã€å…å¯†ç™»å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/tdsql_10.3.17.3.0/tdsql_install/scripts</span><br><span class="line">vim ip_passwd_list</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ IP å’Œå¯†ç æ˜ å°„å…³ç³»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.13.218    root</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå…å¯†ç™»å½•è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh nokey.sh </span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹-tdsql-hosts-æ–‡ä»¶">2ã€ä¿®æ”¹ tdsql_hosts æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/tdsql_10.3.17.3.0/tdsql_install</span><br><span class="line"><span class="built_in">mv</span> tdsql_hosts tdsql_hosts.bak</span><br><span class="line">vim tdsql_hosts</span><br></pre></td></tr></table></figure><p>å†…å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¡«å…¥æ‰€æœ‰æœºå™¨çš„åœ°å€ï¼ˆåŒ…æ‹¬ä¸»æ§æœºï¼‰</span></span><br><span class="line"><span class="comment"># ç”¨äºç¯å¢ƒæ£€æµ‹å’Œåˆå§‹åŒ–é…ç½®</span></span><br><span class="line"><span class="comment"># åŒä¸€ä¸ªæ ‡ç­¾ç»„å†…çš„ipåœ°å€ä¸è¦é‡å¤ï¼Œä¸€ä¸ªipä¸€è¡Œ</span></span><br><span class="line"><span class="comment"># åºå·ä»1é€’å¢ï¼Œæ¯”å¦‚åªæœ‰2å°æœºå™¨ï¼Œé‚£ä¹ˆåºå·ä¿ç•™tdsql_mac1 tdsql_mac2</span></span><br><span class="line"><span class="comment"># åç»­å¦‚æœæœ‰æ‰©å®¹ï¼Œæ–°æ‰©å®¹çš„æœºå™¨ä¹Ÿéœ€è¦åœ¨è¿™é‡Œè¡¥ä¸Š</span></span><br><span class="line">[tdsql_allmacforcheck]</span><br><span class="line">tdsql_mac1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># zookeeperæœºå™¨ipåœ°å€</span></span><br><span class="line"><span class="comment"># æ•°é‡åªèƒ½æ˜¯1ã€3ã€5ï¼Œ æ­£å¼ç¯å¢ƒå»ºè®®3å°æˆ–è€…5å°</span></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯ä½¿ç”¨è‡ªå·±å·²æœ‰çš„zké›†ç¾¤ï¼Œè¿™é‡ŒåŒæ ·è¦å¡«å†™æ­£ç¡®çš„zkåœ°å€</span></span><br><span class="line">[tdsql_zk]</span><br><span class="line">tdsql_zk1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># scheduleræœºå™¨çš„ipåœ°å€ï¼Œæ­£å¼ç¯å¢ƒå»ºè®®2ä¸ª</span></span><br><span class="line">[tdsql_scheduler]</span><br><span class="line">tdsql_scheduler1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ossæœºå™¨çš„ipåœ°å€ï¼Œ æ­£å¼ç¯å¢ƒå»ºè®®2ä¸ª</span></span><br><span class="line">[tdsql_oss]</span><br><span class="line">tdsql_oss1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># èµ¤å…”æœºå™¨çš„ipåœ°å€ï¼Œ æ­£å¼ç¯å¢ƒå»ºè®®2ä¸ª</span></span><br><span class="line">[tdsql_chitu]</span><br><span class="line">tdsql_chitu1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç›‘æ§é‡‡é›†æ¨¡å—çš„IPåœ°å€ï¼Œæ­£å¼ç¯å¢ƒå»ºè®®2ä¸ª</span></span><br><span class="line">[tdsql_monitor]</span><br><span class="line">tdsql_monitor1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># dbæœºå™¨åœ°å€</span></span><br><span class="line"><span class="comment"># æœ‰å¤šå°‘å°å°±å¡«å¤šå°‘ä¸ªipåœ°å€</span></span><br><span class="line"><span class="comment"># æ³¨æ„tdsql_dbåºå·é€ä¸ªé€’å¢ï¼Œä¸è¦è·³è·ƒ</span></span><br><span class="line">[tdsql_db]</span><br><span class="line">tdsql_db1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># proxyæœºå™¨åœ°å€</span></span><br><span class="line">[tdsql_proxy]</span><br><span class="line">tdsql_proxy1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># hdfsæœºå™¨åœ°å€</span></span><br><span class="line"><span class="comment"># æœºå™¨æ•°é‡åªèƒ½æ˜¯1å°æˆ–è€…3å°</span></span><br><span class="line"><span class="comment"># å¦‚æœå•èŠ‚ç‚¹éƒ¨ç½²ï¼Œåˆ™åªä¿ç•™tdsql_hdfs1ï¼Œå…¶ä»–åˆ é™¤</span></span><br><span class="line"><span class="comment"># æ­£å¼ç¯å¢ƒå»ºè®®é«˜å¯ç”¨éƒ¨ç½²ï¼Œåˆå§‹å®‰è£…æ•°é‡åªèƒ½3å°</span></span><br><span class="line">[tdsql_hdfs]</span><br><span class="line">tdsql_hdfs1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># lvsæœºå™¨åœ°å€ï¼Œæ•°é‡å›ºå®š2å°</span></span><br><span class="line">[tdsql_lvs]</span><br><span class="line">tdsql_lvs1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># kafkaæœºå™¨åœ°å€ï¼Œæ•°é‡å›ºå®š3å°</span></span><br><span class="line">[tdsql_kafka]</span><br><span class="line">tdsql_kafka1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¤šæºåŒæ­¥æ¶ˆè´¹è€…æœåŠ¡ipåœ°å€ï¼Œæ•°é‡å›ºå®š1å°</span></span><br><span class="line">[tdsql_consumer]</span><br><span class="line">tdsql_consumer1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"><span class="comment"># esæœºå™¨åœ°å€</span></span><br><span class="line">[tdsql_es]</span><br><span class="line">tdsql_es1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[tdsql_mc]</span><br><span class="line">tdsql_mc1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line">[tdsql_newdb]</span><br><span class="line">tdsql_newdb1 ansible_ssh_host=192.168.13.218</span><br><span class="line"> </span><br><span class="line">[tdsql_ansible_test]</span><br><span class="line">tdsql_ansible_test1 ansible_ssh_host=192.168.13.218</span><br></pre></td></tr></table></figure><h3 id="3ã€ä¿®æ”¹-ansible-å˜é‡-group-vars-all-æ–‡ä»¶">3ã€ä¿®æ”¹ ansible å˜é‡ group_vars/all æ–‡ä»¶</h3><p>é€šè¿‡ <code>ip a</code> å‘½ä»¤æŸ¥çœ‹è‡ªå·±çš„ç½‘å¡åç§°ï¼Œæˆ‘çš„ç½‘å¡åç§°ä¸º ens192</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:9f:14:5c brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.13.218/24 brd 192.168.13.255 scope global noprefixroute ens192</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::3a0e:6b28:122d:b8e/64 scope <span class="built_in">link</span> noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ ansible å˜é‡ï¼Œä¿®æ”¹IPå’Œç½‘å¡åç§°ï¼Œå…¶ä½™ä¿æŒé»˜è®¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ç½‘å¡</span></span><br><span class="line">sed -i <span class="string">&#x27;s/eth0/ens192/g&#x27;</span> /root/tdsql_10.3.17.3.0/tdsql_install/group_vars/all</span><br><span class="line"><span class="comment"># ä¿®æ”¹ IP</span></span><br><span class="line">sed -i <span class="string">&#x27;s/1.1.1.1/192.168.13.218/g&#x27;</span> /root/tdsql_10.3.17.3.0/tdsql_install/group_vars/all</span><br></pre></td></tr></table></figure><h3 id="4ã€å®‰è£…-ansible">4ã€å®‰è£… ansible</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/tdsql_10.3.17.3.0/tdsql_install</span><br><span class="line"><span class="built_in">source</span> scripts/environment_set</span><br><span class="line">sh scripts/install_ansible.sh</span><br></pre></td></tr></table></figure><p>éªŒè¯ansibleå®‰è£…æ˜¯å¦æˆåŠŸï¼Œè¾“å‡ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible --version</span><br></pre></td></tr></table></figure><h3 id="5ã€å®‰è£…-part1-site-yml">5ã€å®‰è£… part1_site.yml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook -i tdsql_hosts playbooks/tdsql_part1_site.yml</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.yyds.space/blog/image-20230531101014801.png" alt="image-20230531101014801"></p><h2 id="TDSQL-èµ¤å…”ç®¡ç†å°åˆå§‹åŒ–">TDSQL-èµ¤å…”ç®¡ç†å°åˆå§‹åŒ–</h2><p>ç½‘é¡µè®¿é—®åœ°å€ <code>http://192.168.13.218/tdsqlpcloud</code> ï¼Œè¿›å…¥TDSQL-èµ¤å…”ç®¡ç†å°é…ç½®å®‰è£…å‘å¯¼ã€‚</p><h3 id="1ã€è®¸å¯åè®®">1ã€è®¸å¯åè®®</h3><p>æ‰“å‹¾æˆ‘å·²å®Œæ•´é˜…è¯»ï¼Œå¹¶æ¥å—è®¸å¯åè®®ï¼Œå¹¶è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531184712950.png" alt="image-20230531184712950"></p><h3 id="2ã€ç¯å¢ƒæ£€æµ‹">2ã€ç¯å¢ƒæ£€æµ‹</h3><p>ğŸ¹è¿™ä¸€æ­¥æ²¡å•¥è¯´çš„ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531184943611.png" alt="image-20230531184943611"></p><h3 id="3ã€é›†ç¾¤æ¥å…¥">3ã€é›†ç¾¤æ¥å…¥</h3><p>å¡«å†™é›†ç¾¤åç§°å’Œ OSS æœåŠ¡åˆ—è¡¨ï¼ˆåœ°å€å¡«å†™æœ¬åœ°åœ°å€ï¼Œç«¯å£å¡«å†™8080ï¼‰ï¼Œç‚¹å‡»æµ‹è¯•æœåŠ¡å™¨è¿æ¥ï¼Œè¿æ¥æˆåŠŸåä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ã€‚æœ€åè¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531185410408.png" alt="image-20230531185410408"></p><h3 id="4ã€é›†ç¾¤åˆå§‹åŒ–">4ã€é›†ç¾¤åˆå§‹åŒ–</h3><h4 id="ï¼ˆ1ï¼‰IDC-é…ç½®">ï¼ˆ1ï¼‰IDC é…ç½®</h4><p>é…ç½® IDCï¼Œå¡«å†™ IDC åç§°ï¼Œæƒé‡ä¿æŒé»˜è®¤å³å¯ï¼Œç‚¹å‡»ç¡®å®šã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531193215865.png" alt="image-20230531193215865"></p><h4 id="ï¼ˆ2ï¼‰æœºå‹è§„æ ¼">ï¼ˆ2ï¼‰æœºå‹è§„æ ¼</h4><p>å¡«å†™æœºå‹åç§°ï¼ŒCPUã€å†…å­˜ã€æ•°æ®å’Œæ—¥å¿—ç£ç›˜æŒ‰ç…§ä½ çš„å®é™…ç¯å¢ƒåˆ†é…å°±è¡Œã€‚ç‚¹å‡»ç¡®å®šã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531193359001.png" alt="image-20230531193359001"></p><h4 id="ï¼ˆ3ï¼‰è®¾å¤‡èµ„æº">ï¼ˆ3ï¼‰è®¾å¤‡èµ„æº</h4><p>é…ç½®ä¸ŠæŠ¥ç½‘å…³èµ„æºï¼Œå¡«å†™ IP ï¼Œé€‰æ‹© IDC ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531193554267.png" alt="image-20230531193554267"></p><p>é…ç½®ä¸ŠæŠ¥ DB è®¾å¤‡èµ„æºï¼Œå¡«å†™ IPï¼Œé€‰æ‹©æœºå‹å’Œ IDCã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531193648579.png" alt="image-20230531193648579"></p><h4 id="ï¼ˆ4ï¼‰ç½‘å…³ç»„">ï¼ˆ4ï¼‰ç½‘å…³ç»„</h4><p>é…ç½®ç½‘å…³ç»„ï¼Œé€‰æ‹©æŒ‡å®š IP ï¼Œå¹¶é…ç½® IP åœ°å€ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531193803525.png" alt="image-20230531193803525"></p><h4 id="ï¼ˆ5ï¼‰éåˆ†å¸ƒå¼å®ä¾‹">ï¼ˆ5ï¼‰éåˆ†å¸ƒå¼å®ä¾‹</h4><p>é…ç½®éåˆ†å¸ƒå¼å®ä¾‹åŸºç¡€è®¾ç½®ï¼Œé»˜è®¤å°±è¡Œã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531185913044.png" alt="image-20230531185913044"></p><p>é…ç½®å®¹ç¾è®¾ç½®ï¼Œå®¹ç¾æ¨¡å¼å’±ä»¬é€‰æ‹©<code>ä¸€ä¸»é›¶å¤‡</code>ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531190032978.png" alt="image-20230531190032978"></p><h4 id="ï¼ˆ6ï¼‰åˆå§‹åŒ–">ï¼ˆ6ï¼‰åˆå§‹åŒ–</h4><p>æ‰¾åˆ°ä¸Šä¸€æ­¥åˆ›å»ºçš„éåˆ†å¸ƒå¼å®ä¾‹è¿›è¡Œåˆå§‹åŒ–ï¼Œç‚¹å‡»å³è¾¹<code>åˆå§‹åŒ–</code> ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531194102575.png" alt="image-20230531194102575"></p><p>å‚æ•°é»˜è®¤å³å¯ï¼Œç‚¹å‡»ç¡®å®šã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531194142446.png" alt="image-20230531194142446"></p><h3 id="5ã€ä¸ºç³»ç»Ÿé…ç½®æ•°æ®åº“">5ã€ä¸ºç³»ç»Ÿé…ç½®æ•°æ®åº“</h3><p>é…ç½®ç³»ç»Ÿæ•°æ®åº“ï¼Œç”¨æˆ·åä¸º <code>tdsqlpcloud</code> , å¯†ç ä¸º <code>123456</code> ã€‚å¡«å†™å®Œæˆåç‚¹å‡»æµ‹è¯•æ•°æ®åº“è¿æ¥ï¼Œå‡ºç°æ•°æ®åº“è¿æ¥æµ‹è¯•æˆåŠŸå­—æ ·ï¼Œè¯´æ˜æ•°æ®åº“é…ç½®æˆåŠŸã€‚ç‚¹å‡»å¼€å§‹å®‰è£…ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531194415478.png" alt="image-20230531194415478"></p><h3 id="6ã€è½¯ä»¶æˆæƒç®¡ç†">6ã€è½¯ä»¶æˆæƒç®¡ç†</h3><p>è·³è¿‡æ­¤æ­¥éª¤ï¼Œç‚¹å‡»å®Œæˆå®‰è£…</p><p><img src="https://cdn.yyds.space/blog/image-20230531194622390.png" alt="image-20230531194622390"></p><h2 id="TDSQL-èµ¤å…”ç®¡ç†å°ç®¡ç†">TDSQL-èµ¤å…”ç®¡ç†å°ç®¡ç†</h2><p>ä¸Šä¸€æ­¥é…ç½®å®Œæˆåï¼Œä¼šè‡ªåŠ¨è¿›å…¥ TDSQL-èµ¤å…”ç®¡ç†å°ç•Œé¢ï¼Œè¾“å…¥ç”¨æˆ·å <code>admin</code> ï¼Œå¯†ç  <code>123456</code> ï¼Œå¡«å†™éªŒè¯ç è¿›è¡Œç™»å½•ã€‚å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰è·³è½¬å¯ä»¥é€šè¿‡ <code>http://192.168.13.218/tdsqlpcloud/index.php</code> åœ°å€è¿›è¡Œç™»å½•ï¼Œæ³¨æ„IPæ›¿æ¢ä¸ºä½ çš„IPã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531195230423.png" alt="image-20230531195230423"></p><p>ç‚¹å‡»å®ä¾‹åç§°è¿›å…¥å®ä¾‹ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531195531684.png" alt="image-20230531195531684"></p><p>æ‰¾åˆ°å®ä¾‹è¯¦æƒ…ä¸­çš„ç½‘å…³åœ°å€å¯ä»¥è¿›è¡Œæ•°æ®åº“ç™»é™†éªŒè¯ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230531195715195.png" alt="image-20230531195715195"></p><h2 id="ç™»å½•æ•°æ®åº“">ç™»å½•æ•°æ®åº“</h2><p>ç”±ä¸Šå›¾å¯ä»¥æŸ¥çœ‹åˆ°æ•°æ®åº“åœ°å€ä¸º 192.168.13.218ï¼Œç«¯å£ä¸º 15001 ã€‚ å’±ä»¬çš„æ•°æ®åº“ç”¨æˆ·åä¸º tdsqlpcloud ï¼Œå¯†ç ä¸º 123456 ã€‚æ¥ä¸‹æ¥ç”¨ä»¥ä¸‹å‘½åè¿›è¡Œè¿æ¥æµ‹è¯•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -utdsqlpcloud -h192.168.13.218 -P15001 -p<span class="string">&#x27;123456&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šå›¾ï¼š</p><p><img src="https://cdn.yyds.space/blog/image-20230531195929628.png" alt="image-20230531195929628"></p><p>æœ¬æ–‡æ¡£åˆ°æ­¤TDSQLæ•°æ®åº“å•æœºéƒ¨ç½²å®Œæˆï¼Œæœ‰é—®é¢˜å¯ç•™è¨€ã€‚</p><h2 id="è‡´è°¢">è‡´è°¢</h2><p>æ„Ÿè°¢ä»¥ä¸‹ä½œè€…è¿›è¡Œæ–‡æ¡£æ”¯æŒï¼</p><p>ğŸŒ¼<a href="https://www.cnblogs.com/superlinux/p/14451346.html">è…¾è®¯æ•°æ®åº“tdsqléƒ¨ç½²ä¸éªŒè¯ - é™ˆé›·é›· - åšå®¢å›­ (cnblogs.com)</a></p><p>ğŸŒ»<a href="https://blog.csdn.net/qq_25234357/article/details/124621113">è…¾è®¯äº‘æ•°æ®åº“TDSQL-å•æœºå®‰è£…ä½“éªŒ&amp;å®‰è£…è„šæœ¬åˆ†æ_tdsqlå®‰è£…_qq_25234357çš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> æ‚é¡¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tdsql </tag>
            
            <tag> éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker éƒ¨ç½² Oracle å¹¶ä½¿ç”¨ Navicat è¿æ¥</title>
      <link href="/posts/04ec39afcb6e.html"/>
      <url>/posts/04ec39afcb6e.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Oracle-docker-éƒ¨ç½²">ä¸€ã€Oracle docker éƒ¨ç½²</h2><h3 id="1ã€ç¯å¢ƒ">1ã€ç¯å¢ƒ</h3><p>Oracle æ‰€éœ€ Docker ç¯å¢ƒç¡¬ä»¶è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>4G å†…å­˜</li><li>8G ç¡¬ç›˜</li></ul><h3 id="2ã€æ‹‰å–-oracle-docker-é•œåƒ">2ã€æ‹‰å– oracle docker é•œåƒ</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span><br></pre></td></tr></table></figure><h3 id="3ã€åˆ›å»º-oracle-å®¹å™¨">3ã€åˆ›å»º oracle å®¹å™¨</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> --name oracle -d -p 1521:1521 registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span></span><br></pre></td></tr></table></figure><h3 id="4ã€æŸ¥çœ‹-oracle-å®¹å™¨è¿è¡ŒçŠ¶æ€">4ã€æŸ¥çœ‹ oracle å®¹å™¨è¿è¡ŒçŠ¶æ€</h3><p>ä½¿ç”¨ <code>docker ps</code> å‘½ä»¤æŸ¥çœ‹ oracle å®¹å™¨æ˜¯å¦æˆåŠŸè¿è¡Œã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230526153648795.png" alt="image-20230526153648795"></p><h2 id="äºŒã€é…ç½®-Oracle">äºŒã€é…ç½® Oracle</h2><h3 id="1ã€è¿›å…¥å®¹å™¨">1ã€è¿›å…¥å®¹å™¨</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it oracle11g bash</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>su root</code> å‘½ä»¤åˆ‡æ¢è‡³ root ç”¨æˆ·ï¼Œå¯†ç æ˜¯ <code>helowin</code> ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[oracle@0c25921d2cc9 /]$ su root</span><br><span class="line">Password: helowin</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹å…¨å±€å˜é‡">2ã€ä¿®æ”¹å…¨å±€å˜é‡</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /etc/profile &lt;&lt; EOF</span><br><span class="line">export ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2</span><br><span class="line">export ORACLE_SID=helowin</span><br><span class="line">export PATH=$ORACLE_HOME/bin:$PATH</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>ä½¿ç¯å¢ƒå˜é‡ç«‹å³ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè½¯è¿æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s <span class="variable">$ORACLE_HOME</span>/bin/sqlplus /usr/bin</span><br></pre></td></tr></table></figure><h3 id="3ã€éªŒè¯æ•°æ®åº“è¿é€šæ€§">3ã€éªŒè¯æ•°æ®åº“è¿é€šæ€§</h3><p>åˆ‡æ¢ oracle ç”¨æˆ·ç™»å½•æ•°æ®åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>sqlplus /nolog</code> è¿æ¥æ•°æ®åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[oracle@0c25921d2cc9 ~]$ sqlplus /nolog</span><br><span class="line">SQL*Plus: Release 11.2.0.1.0 Production on Fri May 26 06:11:32 2023</span><br><span class="line">Copyright (c) 1982, 2009, Oracle.  All rights reserved.</span><br><span class="line">SQL&gt; </span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šè¾“å‡ºåˆ™è¯´æ˜è¿æ¥æˆåŠŸï¼Œä½¿ç”¨ <code>quit</code> é€€å‡ºè¿æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure><h3 id="4ã€åˆ›å»ºæ•°æ®åº“è¡¨ç©ºé—´">4ã€åˆ›å»ºæ•°æ®åº“è¡¨ç©ºé—´</h3><p>åœ¨ <code>/home/oracle</code> ä¸‹åˆ›å»º <code>tablespace</code> æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /home/oracle/tablespace</span><br></pre></td></tr></table></figure><p>ç™»å½•å¯ç”¨å‘½ä»¤è¡Œï¼š<code>sqlplus /nolog</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[oracle@0c25921d2cc9 ~]$ sqlplus /nolog</span><br><span class="line">SQL*Plus: Release 11.2.0.1.0 Production on Fri May 26 06:27:10 2023</span><br><span class="line">Copyright (c) 1982, 2009, Oracle.  All rights reserved.</span><br><span class="line">SQL&gt;</span><br></pre></td></tr></table></figure><p>è¿æ¥åˆ°æ•°æ®åº“ï¼š<code>conn /as sysdba</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; conn /as sysdba</span><br><span class="line">Connected.</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸´æ—¶è¡¨ç©ºé—´ TEST_TEMP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TEMPORARY TABLESPACE TEST_TEMP</span><br><span class="line">         TEMPFILE <span class="string">&#x27;/home/oracle/tablespace/TEST_TEMP.DBF&#x27;</span></span><br><span class="line">         SIZE 32M</span><br><span class="line">         AUTOEXTEND ON</span><br><span class="line">         NEXT 32M MAXSIZE UNLIMITED</span><br><span class="line">         EXTENT MANAGEMENT LOCAL;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¡¨ç©ºé—´ TEST</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLESPACE TEST</span><br><span class="line">         LOGGING</span><br><span class="line">         DATAFILE <span class="string">&#x27;/home/oracle/tablespace/TEST.DBF&#x27;</span></span><br><span class="line">         SIZE 32M</span><br><span class="line">         AUTOEXTEND ON</span><br><span class="line">         NEXT 32M MAXSIZE UNLIMITED</span><br><span class="line">         EXTENT MANAGEMENT LOCAL;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ· oracle_admin ï¼Œå¯†ç  123456</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER oracle_admin IDENTIFIED BY 123456</span><br><span class="line">         ACCOUNT UNLOCK</span><br><span class="line">         DEFAULT TABLESPACE TEST</span><br><span class="line">         TEMPORARY TABLESPACE TEST_TEMP;</span><br></pre></td></tr></table></figure><p>èµ‹äºˆç”¨æˆ·æƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT CONNECT,RESOURCE TO oracle_admin;</span><br><span class="line">GRANT DBA TO oracle_admin;ï¼ˆå¯é€‰ï¼ŒDBAä¸ºæ•°æ®åº“ç®¡ç†å‘˜æƒé™ï¼‰</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Navicat-è¿æ¥-oracle">ä¸‰ã€Navicat è¿æ¥ oracle</h2><p>æ‰“å¼€ navicat ï¼Œé€‰æ‹© Oracle è¿›è¡Œè¿æ¥ï¼Œè¾“å…¥ä¿¡æ¯åï¼Œç‚¹å‡»è¿æ¥æµ‹è¯•ï¼Œè¿æ¥æˆåŠŸåä¼šæç¤ºè¿æ¥æˆåŠŸã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230526170123668.png" alt="image-20230526170123668"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¿æ¥åï¼šéšä¾¿å‘½å</span><br><span class="line">è¿æ¥ç±»å‹ï¼šé€‰æ‹© Basic</span><br><span class="line">ä¸»æœºï¼šå¡«å†™å®¹å™¨çš„ IP åœ°å€</span><br><span class="line">ç«¯å£ï¼šå¡«å†™å®¹å™¨ä¸­ oracle æ˜ å°„çš„ç«¯å£</span><br><span class="line">æœåŠ¡åï¼šå¡«å†™ä¹‹å‰é…ç½®çš„ helowin</span><br><span class="line">ç”¨æˆ·åï¼šå¡«å†™ä¹‹å‰é…ç½®çš„ oracle_admin</span><br><span class="line">å¯†ç ï¼šå¡«å†™ 123456</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹æ‰€ç¤ºï¼ŒæˆåŠŸè¿æ¥åˆ°oracleæ•°æ®åº“ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230526170357585.png" alt="image-20230526170357585"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> navicat </tag>
            
            <tag> docker </tag>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Navicat ç ´è§£</title>
      <link href="/posts/de35138eb237.html"/>
      <url>/posts/de35138eb237.html</url>
      
        <content type="html"><![CDATA[<h2 id="Navicat-å®‰è£…">Navicat å®‰è£…</h2><p>è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆ <a href="https://www.navicat.com.cn/download/navicat-premium">Navicat</a> ï¼Œæ‰¾åˆ° <code>Navicat Premium</code> ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚ä¸‹è½½å®Œæˆåç›´æ¥å®‰è£…ã€‚</p><div class="btns rounded grid5">            <a class="button" href='https://www.navicat.com.cn/download/navicat-premium' title='è¿›å…¥å®˜ç½‘'><i class='fas fa-book-open'></i>è¿›å…¥å®˜ç½‘</a>          </div><p><img src="https://cdn.yyds.space/blog/image-20230526115942625.png" alt="image-20230526115942625"></p><h2 id="Navicat-ç ´è§£">Navicat ç ´è§£</h2><h3 id="1ã€æ¿€æ´»å·¥å…·ä¸‹è½½">1ã€æ¿€æ´»å·¥å…·ä¸‹è½½</h3><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/9TASvs4Q' title='ä¸‹è½½æ¿€æ´»å·¥å…·'><i class='fas fa-download'></i>ä¸‹è½½æ¿€æ´»å·¥å…·</a>          </div><h3 id="2ã€ç¦ç”¨ç”µè„‘ä¸Šç½‘ç½‘å¡">2ã€ç¦ç”¨ç”µè„‘ä¸Šç½‘ç½‘å¡</h3><h3 id="3ã€ç ´è§£">3ã€ç ´è§£</h3><h4 id="ï¼ˆ1ï¼‰Patcher">ï¼ˆ1ï¼‰Patcher</h4><p>é€‰æ‹© <code>Navicat</code> å®‰è£…è·¯å¾„ï¼Œç‚¹å‡» <code>Patch</code> ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230524160150711.png" alt="image-20230524160150711"></p><p>é€‰æ‹© <code>æ˜¯(Y)</code></p><p><img src="https://cdn.yyds.space/blog/image-20230524160118136.png" alt="image-20230524160118136"></p><h4 id="ï¼ˆ2ï¼‰Keygen">ï¼ˆ2ï¼‰Keygen</h4><p>ç‚¹å‡» <code>Generate</code> ç”Ÿæˆ <code>Keygen</code>ï¼Œå¹¶å¤åˆ¶è¯¥ <code>key</code> ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230524160344822.png" alt="image-20230524160344822"></p><p>æ‰“å¼€ <code>Navicat</code> ï¼Œç‚¹å‡»æ³¨å†Œ ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230524160423123.png" alt="image-20230524160423123"></p><p>æŠŠå¤åˆ¶çš„ key ç²˜è´´è¿›æ°¸ä¹…è®¸å¯è¯ä¸­ï¼Œç‚¹å‡»æ¿€æ´»ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230524160519407.png" alt="image-20230524160519407"></p><p>é€‰æ‹©æ‰‹åŠ¨æ¿€æ´»</p><p><img src="https://cdn.yyds.space/blog/image-20230524160615883.png" alt="image-20230524160615883"></p><h4 id="ï¼ˆ3ï¼‰ç¦»çº¿æ¿€æ´»ç æ¿€æ´»">ï¼ˆ3ï¼‰ç¦»çº¿æ¿€æ´»ç æ¿€æ´»</h4><p>å¤åˆ¶è¯·æ±‚ç åˆ°æ¿€æ´»å·¥å…·ä¸­ï¼Œç‚¹å‡»Generate Activation Code ç”Ÿæˆ Activation Code ã€‚å¹¶æŠŠActivation Codeçš„å€¼å¤åˆ¶åˆ°æ¿€æ´»ç ä¸­ã€‚</p><p><img src="https://cdn.yyds.space/blog/image-20230524161914741.png" alt="image-20230524161914741"></p><p>ç‚¹å‡»ç¡®å®šå®Œæˆæ¿€æ´»</p><p><img src="https://cdn.yyds.space/blog/image-20230524161955360.png" alt="image-20230524161955360"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚é¡¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç ´è§£ </tag>
            
            <tag> navicat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytest setup/teardown</title>
      <link href="/posts/c3576ca2e2f4.html"/>
      <url>/posts/c3576ca2e2f4.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦è¿›è¡Œåˆå§‹åŒ–å’ŒåæœŸå¤„ç†ç­‰å·¥ä½œï¼Œä¾‹å¦‚ç”¨ä¾‹æ‰§è¡Œå‰ç¯å¢ƒé…ç½®ï¼Œæˆ–è€…ç”¨ä¾‹æ‰§è¡Œå®Œæ¯•æ¸…é™¤é…ç½®ç­‰ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ° <code>setup/teardown</code> å‰åç½®ã€‚</p><ul><li><p>setupçš„ä½œç”¨ï¼šç”¨æ¥å®ç°æ‰§è¡Œå‰çš„ä¸€äº›åˆå§‹åŒ–æ“ä½œ(å¦‚ï¼šæ•°æ®å‡†å¤‡ã€è¿æ¥è®¾å¤‡ã€æ‰“å¼€APP/æµè§ˆå™¨ã€åˆ›å»ºæ—¥å¿—å¯¹è±¡ã€åˆ›å»ºæ•°æ®åº“è¿æ¥ã€åˆ›å»ºæ¥å£çš„è¯·æ±‚å¯¹è±¡ç­‰æ“ä½œ)ï¼›</p></li><li><p>teardownçš„ä½œç”¨ï¼šç”¨æ¥å®ç°æ‰§è¡Œç”¨ä¾‹åçš„ä¸€äº›æ“ä½œ(å¦‚ï¼šæ•°æ®æ¸…ç†ã€å…³é—­APP/æµè§ˆå™¨ã€é”€æ¯æ—¥å¿—å¯¹è±¡ã€å…³é—­æ•°æ®åº“è¿æ¥ç­‰æ“ä½œ)ã€‚</p></li></ul><p>Pytestæä¾›äº†5ç§ç±»å‹çš„setup å’Œ teardown çš„æ–¹æ³•ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li>æ¨¡å—çº§åˆ«ï¼š <code>setup_module</code>ï¼Œ <code>teardown_module</code></li><li>å‡½æ•°çº§åˆ«ï¼š <code>setup_function</code> ï¼Œ <code>teardown_function</code></li><li>ç±»çº§åˆ«ï¼š <code>setup_class</code> ï¼Œ <code>teardown_class</code></li><li>æ–¹æ³•çº§åˆ«ï¼š <code>setup_method</code> ï¼Œ <code>teardown_methond</code></li><li>é»˜è®¤çº§åˆ«ï¼š<code>setup</code> ï¼Œ <code>teardown</code></li></ul><h2 id="ä¸€ã€æ¨¡å—çº§åˆ«">ä¸€ã€æ¨¡å—çº§åˆ«</h2><p>æ¨¡å—çº§åˆ«æ˜¯å…¨å±€çš„ï¼Œåœ¨æ¨¡å—è¿è¡Œå‰æ‰§è¡Œä¸€æ¬¡ <code>setup_module()</code> æ–¹æ³•ï¼Œåœ¨æ¨¡å—è¿è¡Œåæ‰§è¡Œä¸€æ¬¡ <code>teardown_module()</code> æ–¹æ³•ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ›å»º <code>test_st.py</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">setup_module</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[æ¨¡å—å‰ç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown_module</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;[æ¨¡å—åç½®]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_b</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯å‡½æ•° test2&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">test_st.py::Test1::test1_a [æ¨¡å—å‰ç½®]</span><br><span class="line">è¿™æ˜¯ç±»æ–¹æ³• test1_a</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::Test1::test1_b è¿™æ˜¯ç±»æ–¹æ³• test1_b</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::test2 è¿™æ˜¯å‡½æ•° test2</span><br><span class="line">PASSED[æ¨¡å—åç½®]</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šè¾“å‡ºç»“æœå¯çŸ¥ï¼Œ<code>setup_module/teardown_module</code> ä½œç”¨äºæ¨¡å—çº§åˆ«çš„å‰åç½®ï¼Œæ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="äºŒã€å‡½æ•°çº§åˆ«">äºŒã€å‡½æ•°çº§åˆ«</h2><p>å‡½æ•°çº§åˆ«å‰åç½®ï¼Œåªå¯¹å‡½æ•°ç”¨ä¾‹ç”Ÿæ•ˆï¼Œåœ¨æ¯ä¸ªå‡½æ•°ç”¨ä¾‹å‰åæ‰§è¡Œï¼Œä¸åŒ…æ‹¬ç±»ä¸­æ–¹æ³•ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ›å»º <code>test_st.py</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">setup_function</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[å‡½æ•°å‰ç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown_function</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;[å‡½æ•°åç½®]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_b</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯å‡½æ•° test2&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">test_st.py::Test1::test1_a è¿™æ˜¯ç±»æ–¹æ³• test1_a</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::Test1::test1_b è¿™æ˜¯ç±»æ–¹æ³• test1_b</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::test2 [å‡½æ•°å‰ç½®]</span><br><span class="line">è¿™æ˜¯å‡½æ•° test2</span><br><span class="line">PASSED[å‡½æ•°åç½®]</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šè¾“å‡ºç»“æœå¯çŸ¥ï¼Œ<code>setup_function/teardown_function</code> ä½œç”¨äºå‡½æ•°çº§åˆ«çš„å‰åç½®ï¼Œæ¯ä¸ªå‡½æ•°æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="ä¸‰ã€ç±»çº§åˆ«">ä¸‰ã€ç±»çº§åˆ«</h2><p>ç±»çº§åˆ«å‰åç½®ï¼Œåªå¯¹ç±»ç”¨ä¾‹ç”Ÿæ•ˆï¼Œåœ¨ç±»çš„å…¨éƒ¨æ–¹æ³•å‰æ‰§è¡Œä¸€æ¬¡ <code>setup_class()</code> ï¼Œå…¨éƒ¨æ–¹æ³•åæ‰§è¡Œä¸€æ¬¡ <code>teardown_class()</code> ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ›å»º <code>test_st.py</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[ç±»å‰ç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">teardown_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[ç±»åç½®]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_b</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯å‡½æ•° test2&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">test_st.py::Test1::test1_a [ç±»å‰ç½®]</span><br><span class="line">è¿™æ˜¯ç±»æ–¹æ³• test1_a</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::Test1::test1_b è¿™æ˜¯ç±»æ–¹æ³• test1_b</span><br><span class="line">PASSED[ç±»åç½®]</span><br><span class="line"></span><br><span class="line">test_st.py::test2 è¿™æ˜¯å‡½æ•° test2</span><br><span class="line">PASSED</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šè¾“å‡ºç»“æœå¯çŸ¥ï¼Œ<code>setup_class/teardown_class</code> ä½œç”¨äºç±»çº§åˆ«çš„å‰åç½®ï¼Œæ¯ä¸ªç±»æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="å››ã€æ–¹æ³•çº§åˆ«">å››ã€æ–¹æ³•çº§åˆ«</h2><p>ç±»æ–¹æ³•çº§åˆ«å‰åç½®ï¼Œåªå¯¹ç±»æ–¹æ³•ç”¨ä¾‹ç”Ÿæ•ˆï¼Œåœ¨æ¯ä¸ªç±»æ–¹æ³•ç”¨ä¾‹å‰æ‰§è¡Œ <code>setup_method()</code> ï¼Œæ‰§è¡Œåå†æ‰§è¡Œä¸€æ¬¡ <code>teardown_method()</code> ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ›å»º <code>test_st.py</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[ç±»æ–¹æ³•å‰ç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">teardown_method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[ç±»æ–¹æ³•åç½®]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_b</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯å‡½æ•° test2&#x27;</span>) </span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">test_st.py::Test1::test1_a [ç±»æ–¹æ³•å‰ç½®]</span><br><span class="line">è¿™æ˜¯ç±»æ–¹æ³• test1_a</span><br><span class="line">PASSED[ç±»æ–¹æ³•åç½®]</span><br><span class="line"></span><br><span class="line">test_st.py::Test1::test1_b [ç±»æ–¹æ³•å‰ç½®]</span><br><span class="line">è¿™æ˜¯ç±»æ–¹æ³• test1_b</span><br><span class="line">PASSED[ç±»æ–¹æ³•åç½®]</span><br><span class="line"></span><br><span class="line">test_st.py::test2 è¿™æ˜¯å‡½æ•° test2</span><br><span class="line">PASSED</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šè¾“å‡ºç»“æœå¯çŸ¥ï¼Œ<code>setup_method/teardown_method</code> ä½œç”¨äºæ–¹æ³•çº§åˆ«çš„å‰åç½®ï¼Œæ¯ä¸ªç±»æ–¹æ³•æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="äº”ã€é»˜è®¤çº§åˆ«">äº”ã€é»˜è®¤çº§åˆ«</h2><p>ç¤ºä¾‹ï¼šåˆ›å»º <code>test_st.py</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">setup</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[å‰ç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[åç½®]&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test1_b</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯ç±»æ–¹æ³• test1_b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿™æ˜¯å‡½æ•° test2&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">test_st.py::Test1::test1_a [å‰ç½®]</span><br><span class="line">è¿™æ˜¯ç±»æ–¹æ³• test1_a</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::Test1::test1_b è¿™æ˜¯ç±»æ–¹æ³• test1_b</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::test2 è¿™æ˜¯å‡½æ•° test2</span><br><span class="line">PASSED</span><br><span class="line">test_st.py::test3 è¿™æ˜¯å‡½æ•° test3</span><br><span class="line">PASSED[åç½®]</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šè¾“å‡ºç»“æœå¯çŸ¥ï¼Œ<code>setup/teardown</code> ä½œç”¨äºå…¨å±€çº§åˆ«çš„å‰åç½®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è‡ªåŠ¨åŒ–æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
            <tag> setup </tag>
            
            <tag> teardown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pytest å¸¸è§è¿è¡Œå‚æ•°</title>
      <link href="/posts/4edb2a60fd05.html"/>
      <url>/posts/4edb2a60fd05.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‚æ•°æ±‡æ€»">å‚æ•°æ±‡æ€»</h2><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-v</td><td>å¯ä»¥è¾“å‡ºç”¨ä¾‹æ›´åŠ è¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯</td></tr><tr><td>-s</td><td>è¾“å‡ºæˆ‘ä»¬ç”¨ä¾‹ä¸­çš„è°ƒè¯•ä¿¡æ¯</td></tr><tr><td>-q</td><td>ç®€åŒ–æ§åˆ¶å°è¾“å‡º</td></tr><tr><td>-m</td><td>æ‰§è¡Œç‰¹å®šçš„æµ‹è¯•ç”¨ä¾‹</td></tr><tr><td>-k</td><td>æ‰§è¡Œç”¨ä¾‹åŒ…å« â€œå…³é”®è¯çš„ç”¨ä¾‹â€</td></tr><tr><td>-x æˆ– --exitfirst</td><td>é‡åˆ°å¤±è´¥åœæ­¢</td></tr><tr><td>--maxfail=num</td><td>é‡åˆ° num æ¬¡å¤±è´¥å°±åœæ­¢</td></tr><tr><td>-l æˆ– --showlocals</td><td>æ˜¾ç¤ºå˜é‡</td></tr><tr><td>--collect-only</td><td>åˆ—å‡ºæ‰§è¡Œç”¨ä¾‹</td></tr><tr><td>--html=path</td><td>è¾“å‡º html æŠ¥å‘Šåˆ° path è·¯å¾„</td></tr></tbody></table><p>æ³¨æ„ï¼šè¿™é‡Œåªåˆ—å‡ºå¸¸ç”¨å‚æ•°ï¼Œæ›´å¤šå®Œæ•´å‚æ•°ä½¿ç”¨ <code>pytest -h</code> æŸ¥çœ‹ã€‚</p><h2 id="ç¯å¢ƒä¸€">ç¯å¢ƒä¸€</h2><h3 id="ï¼ˆ1ï¼‰æµ‹è¯•ç”¨ä¾‹">ï¼ˆ1ï¼‰æµ‹è¯•ç”¨ä¾‹</h3><p>åœ¨æ ¹ç›®å½•åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œå‘½åä¸º <code>test_one.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestRule</span>:</span><br><span class="line"></span><br><span class="line"><span class="meta">    @pytest.mark.p0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">        <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @pytest.mark.test</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰é…ç½®æ–‡ä»¶">ï¼ˆ2ï¼‰é…ç½®æ–‡ä»¶</h3><p>åœ¨æ ¹ç›®å½•åˆ›å»º <code>pytest.ini</code> æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[pytest]</span><br><span class="line">testpaths = ./</span><br><span class="line">markers=</span><br><span class="line">    p0:é«˜ä¼˜å…ˆçº§</span><br><span class="line">    test:æµ‹è¯•ç¯å¢ƒ</span><br></pre></td></tr></table></figure><h2 id="1ã€é»˜è®¤æ— å‚æ•°">1ã€é»˜è®¤æ— å‚æ•°</h2><p>åœ¨ pytest åé¢æ²¡æœ‰è·Ÿä»»ä½•å‚æ•°çš„å­—ç¬¦ä¸²éƒ½ä¼šè®¤ä¸ºæ˜¯æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œä¼šå»è¿™äº›æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ä¸­æŸ¥æ‰¾ç”¨ä¾‹ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230501223204135.png" alt="image-20230501223204135"></p><h2 id="2ã€-v">2ã€-v</h2><p><code>-v</code> ï¼šæ‰“å°è¯¦ç»†è¿è¡Œæ—¥å¿—ä¿¡æ¯ï¼Œä¸€èˆ¬åœ¨è°ƒè¯•çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œç»ˆç«¯ä¼šæ‰“å°å‡ºæ¯æ¡ç”¨ä¾‹çš„è¯¦ç»†æ—¥å¿—ä¿¡æ¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230501223354878.png" alt="image-20230501223354878"></p><h2 id="3ã€-s">3ã€-s</h2><p><code>-s</code>ï¼šæ˜¾ç¤ºæ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤æƒ…å†µä¸‹ä½ åœ¨ç”¨ä¾‹ä¸­å†™çš„<code>print</code>æˆ–è€…<code>log</code>è¾“å‡ºï¼Œéƒ½ä¸ä¼šåœ¨æµ‹è¯•ç»“æœä¸­å±•ç¤ºã€‚å½“ä½ çš„ä»£ç é‡Œé¢æœ‰ <code>print</code> è¾“å‡ºè¯­å¥ï¼Œå¦‚æœæƒ³åœ¨è¿è¡Œç»“æœä¸­æ‰“å° <code>print</code> è¾“å‡ºçš„ä»£ç ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™å¯ä»¥æ·»åŠ  <code>-s</code> å‚æ•°ï¼Œä¸€èˆ¬åœ¨è°ƒè¯•çš„æ—¶å€™ä½¿ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230501223430125.png" alt="image-20230501223430125"></p><h2 id="4ã€-q">4ã€-q</h2><p>ä¸<code>-v</code>ç›¸åï¼Œ<code>-q</code>ä¼šè¾“å‡ºæ›´ç®€åŒ–çš„ä¿¡æ¯ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230501223557501.png" alt="image-20230501223557501"></p><h2 id="5ã€-m">5ã€-m</h2><p><code>-m</code> ï¼šæ ‡è®°<code>markers</code>ç”¨äºæ ‡è®°æµ‹è¯•å¹¶åˆ†ç»„ï¼Œä»¥ä¾¿å¿«é€Ÿé€‰ä¸­æŸäº›éœ€è¦çš„ç”¨ä¾‹å¹¶è¿è¡Œã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨å†’çƒŸæµ‹è¯•æ—¶è¿è¡Œå…¶ä¸­æŸä¸€éƒ¨åˆ†ç”¨ä¾‹ï¼Œå•å…ƒæµ‹è¯•æ—¶è¿è¡Œå¦ä¸€éƒ¨åˆ†ç”¨ä¾‹ã€‚å¯ä»¥é€šè¿‡<code>@pytest.mark.æ ‡è®°å</code>æ¥æ ‡è®°è¿™äº›éœ€è¦çš„ç”¨ä¾‹ï¼Œè¿è¡Œæ—¶ç”¨<code>-m æ ‡è®°</code>å°±èƒ½å¿«é€Ÿé€‰å‡ºè¿™éƒ¨åˆ†ç”¨ä¾‹è¿è¡Œã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼Œè¿è¡Œæ ‡è®°ä¸º <code>p0 </code> çš„ç”¨ä¾‹ï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230501224710097.png" alt="image-20230501224710097"></p><h2 id="6ã€-k">6ã€-k</h2><p><code>-k</code>å¯ä»¥è®©ä½ ä½¿ç”¨è¡¨è¾¾å¼æ¥æŒ‡å®šå¸Œæœ›è¿è¡Œçš„æµ‹è¯•ç”¨ä¾‹ã€‚å¯ä»¥ç”¨ <code>and</code>ï¼Œ<code>or</code>ï¼Œ<code>not</code> è¿æ¥ç¬¦ï¼Œæ¨¡ç³ŠåŒ¹é…æ–‡ä»¶åã€ç±»åå’Œå‡½æ•°åã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230501224755220.png" alt="image-20230501224755220"></p><p>æ³¨æ„ï¼š<code>-k</code> åŒ¹é…é¡ºåº ï¼ŒåŒ…åç§°(æ–‡ä»¶å¤¹) &gt; æ¨¡å—å(æ–‡ä»¶) &gt; ç±»å &gt; æ–¹æ³•åã€‚</p><p>æ‰©å±•ç¤ºä¾‹ï¼š<code>pytest -k &quot;str or Add and not list&quot; </code> ï¼ŒåŒ¹é…åç§°åŒ…å« str æˆ–è€… Add ä¸” ä¸åŒ…å« list çš„æ–‡ä»¶ã€ç±»ã€åŠå‡½æ•°ã€‚</p><h2 id="ç¯å¢ƒäºŒ">ç¯å¢ƒäºŒ</h2><h3 id="ï¼ˆ1ï¼‰åˆ›å»ºæµ‹è¯•ç”¨ä¾‹">ï¼ˆ1ï¼‰åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</h3><p>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œå‘½åä¸º <code>test_one.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_1</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_2</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_3</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸‹å‚æ•°å‡ä½¿ç”¨ç¯å¢ƒäºŒ</strong></p><h2 id="7ã€-x-æˆ–-exitfirst">7ã€-x æˆ– --exitfirst</h2><p><code>-x </code> æˆ– <code>--exitfirst</code>ï¼šé‡åˆ°ç”¨ä¾‹å¤±è´¥ç«‹å³åœæ­¢è¿è¡Œï¼Œä¸€æ—¦å‘ç°æœ‰å¤±è´¥çš„ç”¨ä¾‹å³ä¸­æ­¢è¿è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -x .\test_one.py</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼šç¬¬ä¸€æ¡ç”¨ä¾‹å¤±è´¥ååœæ­¢è¿è¡Œ</p><p><img src="https://cdn.whbblog.cn/img/image-20230504153930735.png" alt="image-20230504153930735"></p><h2 id="8ã€-maxfail">8ã€--maxfail</h2><p><code>--maxfail</code> ï¼šç”¨ä¾‹å¤±è´¥ä¸ªæ•°è¾¾åˆ°é˜€å€¼åœæ­¢è¿è¡Œï¼Œç”¨æ³• <code>--maxfail=[num]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest --maxfail=<span class="number">2</span> .\test_one.py</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼šå¤±è´¥2æ¡ç”¨ä¾‹ååœæ­¢è¿è¡Œ</p><p><img src="https://cdn.whbblog.cn/img/image-20230504154136275.png" alt="image-20230504154136275"></p><h2 id="9ã€-reruns">9ã€--reruns</h2><p>â€“rerunsï¼šå¤±è´¥é‡è·‘ï¼Œéœ€è¦å®‰è£… <code>pytest-rerunfailures</code> æ’ä»¶ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest-rerunfailures</span><br></pre></td></tr></table></figure><p>ç”¨æ³•ï¼š <code>--reruns=[num]</code> ï¼Œnum ä¸ºå¤±è´¥ç”¨ä¾‹é‡è·‘çš„æ¬¡æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest --reruns=<span class="number">3</span> .\test_one.py</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼šå¤±è´¥ç”¨ä¾‹é‡æ–°è¿è¡Œ3æ¬¡</p><p><img src="https://cdn.whbblog.cn/img/image-20230504154817754.png" alt="image-20230504154817754"></p><h2 id="10ã€-collect-only">10ã€--collect-only</h2><p><code>--collect-only</code>ï¼šæ­¤å‚æ•°å±•ç¤ºå½“å‰ pytest èƒ½æ‰¾åˆ°çš„ç”¨ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç›´æ¥æ ¹æ®å½“å‰å‚æ•°é…ç½®ï¼Œèƒ½æ‰¾åˆ°çš„ç”¨ä¾‹åˆ—è¡¨ã€‚ç”¨äºæ£€éªŒè¿è¡Œçš„ç”¨ä¾‹æ˜¯å¦ç¬¦åˆä½ çš„é¢„æœŸã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230504155748508.png" alt="image-20230504155748508"></p><p><strong>æ³¨æ„ï¼Œè¿™é‡Œåªæ˜¯åˆ—å‡ºä¼šè¿è¡Œçš„ç”¨ä¾‹ï¼Œä½†æ˜¯ä¸ä¼šå®é™…è¿è¡Œã€‚</strong></p><h2 id="11ã€-html">11ã€--html</h2><p><code>--html</code> ï¼šç”¨äºç”¨ä¾‹æ‰§è¡Œå®Œæ¯•åï¼Œç”Ÿæˆ html æµ‹è¯•æŠ¥å‘Šï¼Œéœ€è¦å®‰è£… <code>pytest-html</code> æ’ä»¶ã€‚å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest-html </span><br></pre></td></tr></table></figure><p>ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest --html=./report.html .\test_one.py</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„æµ‹è¯•æŠ¥å‘Šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230504164613987.png" alt="image-20230504164613987"></p>]]></content>
      
      
      <categories>
          
          <category> è‡ªåŠ¨åŒ–æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
            <tag> å‚æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytest æ–­è¨€</title>
      <link href="/posts/79cce80b937d.html"/>
      <url>/posts/79cce80b937d.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åˆ¤æ–­é¢„æœŸç»“æœå’Œå®é™…ç»“æœæ˜¯å¦ä¸€è‡´ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨åˆ°æ–­è¨€ã€‚</p><p>æ–­è¨€ï¼šç®€å•æ¥è¯´å°±æ˜¯å®é™…ç»“æœå’ŒæœŸæœ›ç»“æœå»å¯¹æ¯”ã€‚</p><h2 id="1ã€å¸¸ç”¨æ–­è¨€æ–¹å¼">1ã€å¸¸ç”¨æ–­è¨€æ–¹å¼</h2><ul><li><p>ç­‰äºï¼š<code>==</code></p></li><li><p>ä¸ç­‰äºï¼š<code>!=</code></p></li><li><p>å¤§äºï¼š<code>&gt;</code></p></li><li><p>å°äºï¼š<code>&lt;</code></p></li><li><p>å±äºï¼š<code>in</code></p></li><li><p>ä¸å±äºï¼š<code>not in</code></p></li><li><p>å¤§äºç­‰äºï¼š<code>&gt;=</code></p></li><li><p>å°äºç­‰äºï¼š<code>&lt;=</code></p></li><li><p>æ˜¯ï¼š<code>is</code></p></li><li><p>ä¸æ˜¯ï¼š<code>is not</code></p></li></ul><p><strong>æ–­è¨€ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_assert</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> != <span class="number">0</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">2</span> &gt; <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> &lt; <span class="number">2</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> &gt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> &lt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">&#x27;bc&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span> <span class="keyword">is</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="literal">True</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="2ã€æ–­è¨€æ³¨é‡Š">2ã€æ–­è¨€æ³¨é‡Š</h2><p>å‘ç”Ÿæ–­è¨€æ—¶ï¼Œä¼šè¿”å›æ³¨é‡Šå†…å®¹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_1</span>():</span><br><span class="line">    <span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span>, <span class="string">&quot;left is 1 , right is 2&quot;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸Šä»£ç ï¼Œä¼šè¿”å›æ³¨é‡Šç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20230504150357084.png" alt="image-20230504150357084"></p><h2 id="3ã€å¼‚å¸¸æ–­è¨€">3ã€å¼‚å¸¸æ–­è¨€</h2><p>å¯¹ç¨‹åºä½œå‡ºé¢„æœŸçš„å¼‚å¸¸åˆ¤æ–­ï¼Œå¯ä»¥åœ¨å¼‚å¸¸å‡ºç°æ—¶é‡‡å–é’ˆå¯¹æ€§çš„å¤„ç†æªæ–½ã€‚ä¸‹é¢çš„ç”¨ä¾‹æ‰§è¡Œåæ–­è¨€æ˜¯æˆåŠŸçš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_zero_division</span>():</span><br><span class="line">    <span class="keyword">with</span> pytest.raises(ZeroDivisionError):</span><br><span class="line">        <span class="number">1</span> / <span class="number">0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è‡ªåŠ¨åŒ–æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
            <tag> æ–­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytest å…¥é—¨</title>
      <link href="/posts/08e312ee101b.html"/>
      <url>/posts/08e312ee101b.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Pytest-ä»‹ç»">ä¸€ã€Pytest ä»‹ç»</h2><p>pytestæ˜¯pythonçš„ä¸€ç§ç¬¬ä¸‰æ–¹å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸pythonè‡ªå¸¦çš„unittestæµ‹è¯•æ¡†æ¶ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”unittestæ¡†æ¶ä½¿ç”¨èµ·æ¥æ›´ç®€æ´ï¼Œæ•ˆç‡æ›´é«˜ã€‚æ ¹æ®pytestçš„å®˜æ–¹ç½‘ç«™ä»‹ç»ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>éå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œå…¥é—¨ç®€å•ï¼Œæ–‡æ¡£ä¸°å¯Œï¼Œæ–‡æ¡£ä¸­æœ‰å¾ˆå¤šå®ä¾‹å¯ä»¥å‚è€ƒ</li><li>èƒ½å¤Ÿæ”¯æŒç®€å•çš„å•å…ƒæµ‹è¯•å’Œå¤æ‚çš„åŠŸèƒ½æµ‹è¯•</li><li>æ”¯æŒå‚æ•°åŒ–</li><li>æ‰§è¡Œæµ‹è¯•è¿‡ç¨‹ä¸­å¯ä»¥å°†æŸäº›æµ‹è¯•è·³è¿‡ï¼ˆskipï¼‰ï¼Œæˆ–è€…å¯¹æŸäº›é¢„æœŸå¤±è´¥çš„caseæ ‡è®°æˆå¤±è´¥</li><li>æ”¯æŒé‡å¤æ‰§è¡Œ(rerun)å¤±è´¥çš„case</li><li>æ”¯æŒè¿è¡Œç”±nose, unittestç¼–å†™çš„æµ‹è¯•case</li><li>å¯ç”ŸæˆhtmlæŠ¥å‘Š</li><li>æ–¹ä¾¿çš„å’ŒæŒç»­é›†æˆå·¥å…·jenkinsé›†æˆ</li><li>å¯æ”¯æŒæ‰§è¡Œéƒ¨åˆ†ç”¨ä¾‹</li><li>å…·æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰æ‰©å±•</li></ul><div class="tip info"><p><a href="https://docs.pytest.org/">pytestå®˜ç½‘</a></p></div><h2 id="äºŒã€Pytest-å®‰è£…">äºŒã€Pytest å®‰è£…</h2><h3 id="1ã€æ–°å»ºé¡¹ç›®">1ã€æ–°å»ºé¡¹ç›®</h3><p>Location é€‰æ‹©é¡¹ç›®è·¯å¾„ï¼Œå…¶ä½™ä¿æŒé»˜è®¤ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230429201743821.png" alt="image-20230429201743821"></p><h3 id="2ã€å®‰è£…">2ã€å®‰è£…</h3><p>è¿›å…¥é¡¹ç›®åï¼Œç‚¹å‡»ä¸‹æ–¹ <code>Terminal</code>  ï¼Œå®‰è£…pytestã€‚å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20230429222656930.png" alt="image-20230429222656930"></p><p>æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸä»¥åŠå®‰è£…çš„ç‰ˆæœ¬ï¼Œå‘½ä»¤è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest <span class="comment">--version</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œèƒ½å¤Ÿè¾“å‡ºç‰ˆæœ¬ä¿¡æ¯ï¼Œé‚£å°±è¯´æ˜å®‰è£…æˆåŠŸå•¦ã€‚</p><h3 id="3ã€é…ç½®é»˜è®¤è¿è¡Œæ–¹å¼">3ã€é…ç½®é»˜è®¤è¿è¡Œæ–¹å¼</h3><p>é…ç½®æµ‹è¯•ç”¨ä¾‹é»˜è®¤è¿è¡Œç¯å¢ƒä¸º pytest ï¼Œç‚¹å‡»å·¦ä¸Šè§’ File &gt;&gt; Settings ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230430230654498.png" alt="image-20230430230654498"></p><p>æ‰¾åˆ° <code>Python Integrated Tools &gt;&gt; Testing</code> ï¼Œé…ç½® <code>Default test runner</code> ä¸º <code>pytest</code> ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230430230605678.png" alt="image-20230430230605678"></p><h2 id="ä¸‰ã€Pytest-å‘½åè§„åˆ™">ä¸‰ã€Pytest å‘½åè§„åˆ™</h2><p>åœ¨äº†è§£pytestçš„æµ‹è¯•å‘½åè§„åˆ™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦çŸ¥é“ pytest æœç´¢ç”¨ä¾‹çš„è§„åˆ™ï¼Œå®ƒé»˜è®¤æœç´¢è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœpytestæ‰§è¡Œå‘½ä»¤ä¸­æŒ‡å®šäº†ç›®å½•ï¼Œåˆ™ä»è¯¥æŒ‡å®šç›®å½•ä¸­å¼€å§‹æŸ¥æ‰¾æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™ä»å½“å‰è¿è¡Œç›®å½•å¼€å§‹æŸ¥æ‰¾æ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯æ‰¾åˆ°æ•´ä¸ªé¡¹ç›®ä¸­ç¬¦åˆå‘½åè§„åˆ™çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li><li>ä¼šæŸ¥æ‰¾æ•´ä¸ªé¡¹ç›®ä¸­ç¬¦åˆå‘½ä»¤è§„åˆ™çš„æµ‹è¯•æ¨¡å—ï¼Œå†ç”± æµ‹è¯•æ¨¡å—â€“&gt;æµ‹è¯•ç±»/æµ‹è¯•å‡½æ•°â€“&gt;æµ‹è¯•æ–¹æ³• ä¸€å±‚ä¸€å±‚é€’å½’æŸ¥æ‰¾ã€‚</li></ul><h3 id="1ã€é»˜è®¤å‘½åè§„åˆ™">1ã€é»˜è®¤å‘½åè§„åˆ™</h3><p>pytest çš„æµ‹è¯•å‘½åè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>æµ‹è¯•æ¨¡å—ï¼šä»¥ <code>test_</code> å¼€å¤´å‘½åï¼Œå¦‚ï¼štest_login.pyï¼Œæˆ–ä»¥ _test ç»“å°¾ï¼Œå¦‚ï¼šlogin_test.py</li><li>æµ‹è¯•ç±»ï¼šå¿…é¡»ä»¥<code>Test</code>å¼€å¤´å‘½åï¼Œä¸”æµ‹è¯•ç±»ä¸­ä¸èƒ½æœ‰ init æ–¹æ³•</li><li>æµ‹è¯•æ–¹æ³•/æµ‹è¯•å‡½æ•°ï¼šå¿…é¡»ä»¥ <code>test</code> å¼€å¤´ï¼Œå¦‚ï¼štest_login() æˆ– testRegister()</li></ul><p>æœ€å¥½æ˜¯å°†æµ‹è¯•æ¨¡å—ã€æµ‹è¯•æ–¹æ³•/å‡½æ•°éƒ½ä»¥ test_ å¼€å¤´å‘½åï¼Œè¿™æ ·å¯è¯»æ€§æ›´å¼ºï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.whbblog.cn/img/e8dab6bada93402e9626a8fec9baa226.png" alt="å¾®ä¿¡å›¾ç‰‡_20220424221435.png"></p><h3 id="2ã€è‡ªå®šä¹‰å‘½åè§„åˆ™ï¼ˆäº†è§£ï¼‰">2ã€è‡ªå®šä¹‰å‘½åè§„åˆ™ï¼ˆäº†è§£ï¼‰</h3><p>pytest æ¡†æ¶å¯ä»¥é€šè¿‡<code>pytest.ini</code>é…ç½®æ–‡ä»¶è‡ªå®šä¹‰å‘½åè§„åˆ™ï¼Œåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹å¯èƒ½ä¼šç”¨åˆ°ã€‚</p><p>åœ¨æµ‹è¯•é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º<code>pytest.ini</code>æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[pytest]</span></span><br><span class="line"><span class="comment"># æ›´æ”¹æµ‹è¯•æ¨¡å—å‘½åè§„åˆ™</span></span><br><span class="line"><span class="attr">python_files</span> = CS*</span><br><span class="line"><span class="comment"># æ›´æ”¹æµ‹è¯•ç±»å‘½åè§„åˆ™</span></span><br><span class="line"><span class="attr">python_classes</span> = CS*</span><br><span class="line"><span class="comment"># æ›´æ”¹æµ‹è¯•æ–¹æ³•/æµ‹è¯•å‡½æ•°å‘½åè§„åˆ™</span></span><br><span class="line"><span class="attr">python_functions</span> = CS*</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨.iniæ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šæ‰§è¡Œçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œå®é™…ä½¿ç”¨å¦‚ä¸Šä»£ç æ—¶ï¼Œéœ€è¦å°†ä¸­æ–‡æ³¨é‡Šå»æ‰ã€‚</p><p>é™¤éæ˜¯ç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™ä¸å¤ªå»ºè®®è‡ªå®šä¹‰å‘½åè§„åˆ™ã€‚</p><h2 id="å››ã€Pytest-ä½“éªŒ">å››ã€Pytest ä½“éªŒ</h2><h3 id="1ã€åˆ›å»ºæµ‹è¯•ç”¨ä¾‹">1ã€åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</h3><p>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œå‘½åä¸º <code>test_one.py</code> ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inc</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_answer</span>():</span><br><span class="line">    assert inc(<span class="number">3</span>) == <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="2ã€è¿è¡Œæµ‹è¯•ç”¨ä¾‹">2ã€è¿è¡Œæµ‹è¯•ç”¨ä¾‹</h3><p>è¿è¡Œæ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œç®€ä»‹ä»‹ç»å³é”®è¿è¡Œå’Œå‘½ä»¤è¡Œè¿è¡Œï¼Œåé¢ä¼šä»‹ç» pytest.ini è¿è¡Œæ–¹å¼ã€‚</p><p><strong>ï¼ˆ1ï¼‰å³é”®è¿è¡Œ</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230430230025321.png" alt="image-20230430230025321"></p><p><strong>ï¼ˆ2ï¼‰ç»ˆç«¯è¿è¡Œ</strong></p><p>è¿›å…¥ç»ˆç«¯ï¼Œä½¿ç”¨å‘½ä»¤ <code>pytest + æ–‡ä»¶å</code> è¿è¡Œã€‚ç¤ºä¾‹ï¼š<code>pytest  .\test_one.py</code></p><p><img src="https://cdn.whbblog.cn/img/image-20230430230244134.png" alt="image-20230430230244134"></p><h3 id="3ã€ç”¨ä¾‹æ‰§è¡Œç»“æœ">3ã€ç”¨ä¾‹æ‰§è¡Œç»“æœ</h3><p><img src="https://cdn.whbblog.cn/img/image-20230504105849528.png" alt="image-20230504105849528"></p><h3 id="4ã€ç¼–è¾‘è¿è¡Œé…ç½®ï¼ˆå¯é€‰ï¼‰">4ã€ç¼–è¾‘è¿è¡Œé…ç½®ï¼ˆå¯é€‰ï¼‰</h3><p>å¦‚æœä»¥ <code>unitest</code> è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼Œæ›´æ”¹æµ‹è¯•ç”¨ä¾‹è¿è¡Œç¯å¢ƒä¸º <code>pytest</code> ã€‚ç‚¹å‡»å³ä¸Šè§’ Edit Configurations ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230504105627123.png" alt="image-20230504105627123"></p><p>æ‰¾åˆ° Python tests &gt;&gt; pytest ï¼Œç‚¹å‡»OKã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20230430225402228.png" alt="image-20230430225402228"></p>]]></content>
      
      
      <categories>
          
          <category> è‡ªåŠ¨åŒ–æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharm å®‰è£…ä¸ç ´è§£</title>
      <link href="/posts/8c802105e7e7.html"/>
      <url>/posts/8c802105e7e7.html</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡æ¡£ç”¨äºå¸®åŠ©ç”¨æˆ·ä¸‹è½½å¹¶ç ´è§£Pycharm</strong></p><hr><h2 id="1ã€ä¸‹è½½å®˜æ–¹-Pycharm">1ã€ä¸‹è½½å®˜æ–¹ Pycharm</h2><h3 id="ï¼ˆ1ï¼‰è¿›å…¥å®˜ç½‘">ï¼ˆ1ï¼‰è¿›å…¥å®˜ç½‘</h3><p><strong>ç‚¹å‡»ä¸‹æ–¹åœ°å€è¿›å…¥å®˜ç½‘ï¼š</strong></p><div class="btns rounded grid5">            <a class="button" href='https://www.jetbrains.com/pycharm/' title='æ‰“å¼€å®˜ç½‘'><i class='fas fa-book-open'></i>æ‰“å¼€å®˜ç½‘</a>          </div><h3 id="ï¼ˆ2ï¼‰ä¸“ä¸šç‰ˆä¸‹è½½">ï¼ˆ2ï¼‰ä¸“ä¸šç‰ˆä¸‹è½½</h3><p><strong>è¿›å…¥å®˜ç½‘åç‚¹å‡»å³ä¸Šè§’ <code>Download</code></strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230312200233514.png" alt="image-20230312200233514"></p><p><strong>é€‰æ‹©ä¸‹è½½ä¸“ä¸šç‰ˆ</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230312200403194.png" alt="image-20230312200403194"></p><h3 id="ï¼ˆ3ï¼‰å®‰è£…">ï¼ˆ3ï¼‰å®‰è£…</h3><p><strong>ä¸‹è½½å®Œæˆåç›´æ¥è¿›è¡Œå®‰è£…å¹¶è¿›å…¥ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œç‚¹å‡» <code>exit</code> é€€å‡ºå¼€å§‹æ¿€æ´»æ“ä½œã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230312200758897.png" alt="image-20230312200758897"></p><h2 id="2ã€æ¿€æ´»-Pycharm">2ã€æ¿€æ´» Pycharm</h2><h3 id="ï¼ˆ1ï¼‰æ¿€æ´»å·¥å…·ä¸‹è½½">ï¼ˆ1ï¼‰æ¿€æ´»å·¥å…·ä¸‹è½½</h3><p><strong>ä¸‹è½½ä¸‹æ–¹æ¿€æ´»å·¥å…·ï¼š</strong></p><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/9EWQaxIA' title='ä¸‹è½½æ¿€æ´»å·¥å…·'><i class='fas fa-download'></i>ä¸‹è½½æ¿€æ´»å·¥å…·</a>          </div><h3 id="ï¼ˆ2ï¼‰å½“å‰ç”¨æˆ·æ¿€æ´»">ï¼ˆ2ï¼‰å½“å‰ç”¨æˆ·æ¿€æ´»</h3><p><strong>æ¿€æ´»å·¥å…·ä¸‹è½½å®Œæˆåè§£å‹ï¼Œæ‰¾åˆ° <code>install-current-user.vbs</code> ï¼ŒåŒå‡»ä¸ºå½“å‰ç”¨æˆ·å®‰è£…æ¿€æ´»ï¼Œå‡ºç° <code>Done</code> åˆ™æ¿€æ´»å®Œæ¯•ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230312200904263.png" alt="image-20230312200904263"></p><h3 id="ï¼ˆ3ï¼‰è¾“å…¥æ¿€æ´»ç ">ï¼ˆ3ï¼‰è¾“å…¥æ¿€æ´»ç </h3><p><strong>è¿›å…¥ Pycharm è¾“å…¥æ¿€æ´»ç è¿›è¡Œæ¿€æ´»ï¼Œæ¿€æ´»å·¥å…·ä¸­é™„æ¿€æ´»ç ã€‚</strong></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EUWT4EE9X2-eyJsaWNlbnNlSWQiOiJFVVdUNEVFOVgyIiwibGljZW5zZWVOYW1lIjoic2lnbnVwIHNjb290ZXIiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDI1LTA4LTAxIiwicGFpZFVwVG8iOiIyMDI1LTA4LTAxIiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDV01QIiwiZmFsbGJhY2tEYXRlIjoiMjAyNS0wOC0wMSIsInBhaWRVcFRvIjoiMjAyNS0wOC0wMSIsImV4dGVuZGVkIjp0cnVlfV0sIm1ldGFkYXRhIjoiMDEyMDIyMDkwMlBTQU4wMDAwMDUiLCJoYXNoIjoiVFJJQUw6MzUzOTQ0NTE3IiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-FT9l1nyyF9EyNmlelrLP9rGtugZ6sEs3CkYIKqGgSi608LIamge623nLLjI8f6O4EdbCfjJcPXLxklUe1O/5ASO3JnbPFUBYUEebCWZPgPfIdjw7hfA1PsGUdw1SBvh4BEWCMVVJWVtc9ktE+gQ8ldugYjXs0s34xaWjjfolJn2V4f4lnnCv0pikF7Ig/Bsyd/8bsySBJ54Uy9dkEsBUFJzqYSfR7Z/xsrACGFgq96ZsifnAnnOvfGbRX8Q8IIu0zDbNh7smxOwrz2odmL72UaU51A5YaOcPSXRM9uyqCnSp/ENLzkQa/B9RNO+VA7kCsj3MlJWJp5Sotn5spyV+gA==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMrxRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBABqRoNGxAQct9dQUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20230312201014164.png" alt="image-20230312201014164"></p><p><strong>è¿›å…¥å¦‚ä¸‹ç•Œé¢åˆ™æ¿€æ´»å®Œæˆã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20230312201858546.png" alt="image-20230312201858546"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pycharm </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typecho è¿ç§»è‡³ hexo</title>
      <link href="/posts/e25c3e9af02a.html"/>
      <url>/posts/e25c3e9af02a.html</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»º-php-è¿ç§»æ–‡ä»¶">åˆ›å»º php è¿ç§»æ–‡ä»¶</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// è¿è¡Œ php converter.php</span></span><br><span class="line"><span class="variable">$db</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>();</span><br><span class="line"><span class="comment">// æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">connect</span>(<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;database&#x27;</span>);</span><br><span class="line"><span class="variable">$prefix</span> = <span class="string">&#x27;typecho_&#x27;</span>;</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&lt;&lt;&lt;TEXT</span></span><br><span class="line"><span class="string">select title,text,created,category,tags from <span class="subst">&#123;$prefix&#125;</span>contents c,</span></span><br><span class="line"><span class="string"> (select cid,group_concat(m.name) tags from <span class="subst">&#123;$prefix&#125;</span>metas m,<span class="subst">&#123;$prefix&#125;</span>relationships r where m.mid=r.mid and m.type=&#x27;tag&#x27; group by cid ) t1,</span></span><br><span class="line"><span class="string">(select cid,m.name category from <span class="subst">&#123;$prefix&#125;</span>metas m,<span class="subst">&#123;$prefix&#125;</span>relationships r where m.mid=r.mid and m.type=&#x27;category&#x27;) t2</span></span><br><span class="line"><span class="string">where t1.cid=t2.cid and c.cid=t1.cid</span></span><br><span class="line"><span class="string">TEXT</span>;</span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$res</span>-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$r</span> = <span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetch_object</span>()) &#123;</span><br><span class="line">            <span class="variable">$_c</span> = @<span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, <span class="variable">$r</span>-&gt;created);</span><br><span class="line">            <span class="variable">$_t</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;&lt;!--markdown--&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$r</span>-&gt;text);</span><br><span class="line">            <span class="variable">$_tmp</span> = <span class="string">&lt;&lt;&lt;TMP</span></span><br><span class="line"><span class="string">title: <span class="subst">&#123;$r-&gt;title&#125;</span></span></span><br><span class="line"><span class="string">categories: <span class="subst">&#123;$r-&gt;category&#125;</span></span></span><br><span class="line"><span class="string">tags: [<span class="subst">&#123;$r-&gt;tags&#125;</span>]</span></span><br><span class="line"><span class="string">date: <span class="subst">&#123;$_c&#125;</span></span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string"><span class="subst">&#123;$_t&#125;</span></span></span><br><span class="line"><span class="string">TMP</span>;</span><br><span class="line">            <span class="comment">// windowsä¸‹æŠŠæ–‡ä»¶åä»UTF-8ç¼–ç è½¬æ¢ä¸ºGBKç¼–ç ï¼Œé¿å…å‡ºç°ç”Ÿæˆçš„æ–‡ä»¶åä¸ºä¹±ç çš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">strpos</span>(PHP_OS, <span class="string">&quot;WIN&quot;</span>) !== <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="variable">$name</span> = <span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UTF-8&quot;</span>, <span class="string">&quot;GBK//IGNORE&quot;</span>, <span class="variable">$r</span>-&gt;title);</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$name</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$name</span> = <span class="variable">$r</span>-&gt;title;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$name</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ›¿æ¢ä¸åˆæ³•æ–‡ä»¶åå­—ç¬¦</span></span><br><span class="line">            <span class="title function_ invoke__">file_put_contents</span>(<span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&quot; &quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;\\&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;|&quot;</span>, <span class="string">&quot;*&quot;</span>), <span class="string">&#x27;-&#x27;</span>, <span class="variable">$name</span>) . <span class="string">&quot;.md&quot;</span>, <span class="variable">$_tmp</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$res</span>-&gt;<span class="title function_ invoke__">free</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¿ç§»æ–‡ä»¶">ä¿®æ”¹è¿ç§»æ–‡ä»¶</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">connect</span>(<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;database&#x27;</span>);</span><br><span class="line"><span class="variable">$prefix</span> = <span class="string">&#x27;tc_&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œè¿ç§»">è¿è¡Œè¿ç§»</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php converter.php</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/NewbMiao/typecho2Hexo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=NewbMiao&repo=typecho2Hexo&theme=algolia&show_owner=true"/></a>]]></content>
      
      
      <categories>
          
          <category> website </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç§» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azure æ¨¡æ¿éƒ¨ç½² F5åŒæœº</title>
      <link href="/posts/9eda7cf58997.html"/>
      <url>/posts/9eda7cf58997.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•!" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="59144d4f6199d5e8b17dde0495b93686fc97776ec68d6f5efaba998f5f51d8c8">09144076eb3523547a2a9e2035f1e123bdae542bc6823a78f142f66246f75e5e8a0e2de8eacd9c68636dadbab8241a029a3f20437ea20aba6d5ee3de5e597f09a00046e3b2ff0445ee300479cd0258f548601260fe07800390bc6a8ddcde1c654be8d278bbaec9ebc9e1c8aa0a859ff6adb53acebd04fb34950e1035437d512568854e225a5981b0f005026a781fe214257ef737babbc8ba37df3267437c87f80ddc3c0fbde94ff182fe89a4a44687c3d0cd4d0a6eda6e8e88c3f386036bf3573070bb9287541334e3312af7324d81e947bce21473000d5febf1740415f4d722d3b4842bdb2784948e4bcc26a9b52808d1d85e3c3f55496866ea9bab4f219158ffd0ebf3db136221e5ccc9ce25a2b8c4fe3ef66be990e496919665bd553aadfc48ca33e4454b68e436fc7134d3dfe2f7c4d4f9e981bfacea68e9a7d1518540b7b4ad3268ae2b3f04e8e874d64b6cc4729bc0a256f7a412c25ca33cf8a0b702a8863d119717ff01189a73f456b352b9b719d8d19fce54d93739ff83d4f0cb4e3a86cfebc2ad751edc6bb74c401229fb879931a736c965e24bd2565c1b8adc6b5feb37cc37f9c7e908a4dbcedc0f2e19de81c5324373fd238d6ee18205618331109e3f7c53ba33c2a6a3b770dfcabde7a3a9ae443647f70639567c08ad93531bbeb8df5ebcb05987b0b8441d5b242615d3e93ac90792eebbfbbe7238ee9c558df176d8c375896b74e1dff3f316204d075326a694a47a2d3071959b5c8d25a294c123421e3d7c4f1bac27f16c3842038c3833d7bd4f01905ea9c72f9a16162fc9a1de8706318c579e0fa93166093aa30ee41bbee32a415429c1cc949789fa9465cbb93ba5e8c284969dad77ca0d6173e30897d2a0c51702643f5c16537fc14d3981c35dde8f476ad19753771060edd37b922dae5aa825b1fb7287d55da144a0f8a1b7541a66587a487ae0c0a1f9543a80ae9a3e8e33641d7e0b08993a5159402d16d5fd148b7cc225b2a4f2e37fd5a85fbdeea522cfdeae5384a8d5eb82ff53dc9cee72e14c376f4d0e3a9a58559fc01652125052ca26e528a8bca29e2c460fbf45ceb79898489362b25f14fea2059cdb0c12a2aee11e1aa98b7212c7933905f984cfd2a732816b4b5622b7edcb66fb356d17c993242ef9e6535ae1b45ce3e4a9c041dfb2fe8a503f99dc161a4d1b2629a3c2477aa7d8c6f64d8bf2ebba0c04c399d7c37b993c3a5b73e1c58644cf3466a8e95f3db9f7d054041c5cecf7df58406cfb66188bd5251d1d3905b974e630b7bb839a8b6b01a14ecf95b1a18789362faba24d598c3573d5c2f4fab9794f73e96b4c8fc14caec99705589a62eea518f1c68b0a306b1fa0f0e673f8b2ed1be14811b3b85cb509c74b9a85c10f14f57ced09178d6dffd621a31f055459d9c94b81117bc8c718cb7e2e83b574967ce27ccc7a6e55c72c92923a1d8e74ecf843df2f8160d33f430e8fef6c1a9b780dd2fafcfc990626f35069efb93aa91d8f18d978fcd153d54fb63761f1b94161cc19b4f8211f2934a949930d2774e75dbbd916e1b857fa7120222d402499428a276130bffc755fe931a9f05cc6264ab4579a7e9715da9b6bb5d3d420702aa4e183186c5fe22cb7328ec0f49c8ed524e37eed5e740565b2f9f00fe23f2e6bc1bec05af1fa1c04968ad0028df044d639622cc2bb7b3c221ce4a62245b5d9b7bca5962ef5050a101a7176639cf564503ebd84e4aa2d7402ca4b84d369d3b2cf6efebe19c80e7cece22591062d6e7a84a9144ace71b947b0ec9ca532bd39a4985305dee005ef55d4a7689e50d57d00360e4f5127b6cc5740c97bbffa9708220c9ef00546a75da4fb918860670c3882d813bdbcb1856653a6684514b56e8dd8a728f217c251d5eddcffd790b56f43aaf5dc0556a5a10e2ae1c809ef02af478c4c5e65cee8d647d072e5d6711baefc440dd7210100bf35ecbee251d8ce1eee8a6bc08f1ab06c02d49e42726aada2c3b907f24a5c38ddb50a376a71bdc1977cd141460e9a2dcffbaff8f565711b51a571262a0c4ed293688d12580702a112992685d5657074f303c9d6bd1955fa1f3e7033e9c66e1c1f40f9df083f149192ebe6229be29784046d1fa21adfbfde2da7f960d5bc984c2ec1c30f1fef9359beedd3ae4eaace5b251bfd239e88b4d4f4cb61149599379bf84b17be74e0f53ea1e111ae9780ed60464b64f6d216a2bb3edef3fe3c842090732e75fd4ff127d8a8694b208882c344e0cbf5faaecf442c1f267c31879269ea17760692ef77624428a52b0723e0b72ce97e6387a362fdc49a3159d860aba2b810d0d908bec9e6a146015a960c98fc38c0a7ca0e13fa4dd0bcd70ae2f69b7e619a01edb67bfe2011c15eec8eeda3a22164e05e1bc3fc9aab110b338b662ed085cca0dab1d196cbe6df1de9f48d30b8d30dfae73f3990eca7073856d8a3cf2b6743728095b10baeb8cf53741172ac6ce7df713519566f66bdf45f17a762eef7e6ded47892ba998147f58a84a1d004569ea3bf91136f9d4b76fa3a5b2377c74588f78014be9f0a41e9110f347457e2726dc44acaa4574ec67b1b8a64272a785df8081f1e9b3ff70a87b0a8badd5c3574f1c08529adb9b82bea781aa564eaaadd1e9145d72d1ee952df1343011824920023fb064a01ec34281717a6742c5f82af0d8a7df47e6d56190eb1a4322a576cf77903629f93a1e0d1edf1375b8e5bdef26a6f876ebf5a802d66db01d94f1faa242ed1707c53c81d6a9f18496a4754fa31dbd1785dec20bc0b27f455102f1696b05fba75df23391635ef753dbeaa0bfd28c971a885c25b5c58b4dab096fb67c0ee10672337b2b4494390b8840725eb1c09c6f331f9c996d7e2e1b7b377ea9d273a6245dd3376b3ea4a705628ad4aeea01ff65a944e16a645c8c6a69b7349a3c731ddb6a09604210ceefcc4100f062fe85671841ca0b8f73be607a7476613b0e1076de477e7268a87dd212136eae3ab3013d4e4ac67f64651219e2f2ed44ffa79a4b69ee7e44b37a529c0fcd2a38e92f56f7a4040877bc54be356d2e26a1f7d2bfd15b37650c902fac8567597b8e98281b4c811bb1ae8a17fc076b9578bd49e121bd6be87866ffe0e3ae3aa18d2f2c4f786e9625b17265f7afa45bf1201fcaa3d0b59e3511a7736718eea46bcf2f5c5839aaf014dc93bd04324508011aa2a1ff93242cbede43ea3e8bd84c9b2475c96a34e5880a5222e892ba7e595aaa1967c376343d51c19df4c3feb80ca02857f1c2e2862e68b03bcf3a4b05edf9cec6391d854fc792490f21689994758b08133dd31a465c6010939dd402275c781dd9bec59672afc2a8912233b3705b711c60bdd58f3b790fe3fb837b5345fd3fc150306874f86482f7ef8eace8748a234e17079b9249e7e4f6e69d6767d66c281f476143893a7e79ecaabe50ebec83d5d2df9b9c04a6e2efb06590546e49e303fb28abaae9d227d7c68a0f9539a9d819184415dfe67c7189788c8fb90ae39cec6f041bd8e3febce7c927cbd4d43b8a534097304c54ad7607be0044d389fd73c6726e67ab96f982a5816aae4ba6b58b3d71db8779f890afcafb942410aa0a785c99ef9846770260c46208fec0f0d6bf0cce72bbfe34493bc5ac77a57ccccf8d33324c5fa90cd66d29e4b0d22d5c17d5a841c5d51b5ae0da9caf0546246031a53348dd7662599ab3bd8b1dadd141fa788b6cac4c77a0eb46406f43259b5b790e93a0ffccdf4b712e82d9dadbdbcd837f9f91180c7a7812f6724824a4cb3837b2b6daddd3cfcba1c1aa9803cd3542929bae3259dad9b79c23c53137e1262a30acf9b424cd40f8701d47014bff7827588a6bc833d23e9e310d04c2125768bafcceb34f7ecf8157afa2a240a2a1463da6cc120a392ee0f56594d08bd213425cc59d282cae1f71a9806bb219068207e9184bd79bca8f705651fe360ee5b68a4793ca64741d2a8c35c75b3256720cdd95ff804fb04607d44e456f80cf2a33b957a23d8c340e30d0cd97e915b0f7a9d72cfeebd4e43ab234d4d1504ba3bfce7897a1b4088f15442449f22a2d3de9163634dc5245791639c645eacd600299ae2ac65e3e7721269522828cd1ffba0437b3a0bc4decfb6232d9f280083ed00ce9d763bde7ede5f026a5449b7a7b5bdbe7d725af99cb875a7f11981c79fc1ee42f280f25b2ba89392d008ffa7c7ac6be0b939830c33769b3752ac9af93069124ce9658add3147acf28862bb5ebc8d4253529829c9a0aa51a55b63b1230391876831937504bd01fe5b1a55b4ba0076300e40ac7b84c88898a7ac73416c320b6bd874311dcda8290786daa6625fd7e44956d1da853a3f31bee51d7cdf75f91a152bbb490ecc884a0ff591e3b02d3eebc93fbcbbe0f284e9f08ce0769937773cf595801b9223a5e96f18d20e4bc14906f4c1ba64964b92af6fca009ae5436301af724be3f4ea99a90dc756b71defb24560fe14713ea310a77ebeee4c29ffcebb3cd7b65edc80bddd9aec9752809520f9e831e36cdadffde679961e336f79a35d6a8512ac58b02b1cf98c44d949921e56f872bcb0031831ff415622992afdfd8522d44cec754e451938afa7bc7671cbb44aba0bbf456890032e45eeae33cdc0698841f158cf68a3b85323e19af48622e8f432aa15e2c013eb09e5c4045a5ea334e59b76fb2be049dc900b9a54aac4ff195641f13346c1ded1edbafe67902fb5ebfd963ce52cbc47263215513a25d675f42c0c87c4d5cce07e414c6f7303e11f350d0b0cf0caadd54b7f0911d3cd710f57aec04b31e1c18b9c64c8be64da6c584f2a3494f250c21f8fdef8ad9d94448631e7af0ec047e44bb59c3bd1ed8d077044a93e889d1e189b7bb102280c997906ee0d004f45475ca76a94f9d8854f0e6b8c0a6adabef5677d51f488290c77375c5a8521f31e9e65db5af13e49add3b7e7c76819a278da4ad3208f4d1c8d194beb0a015112fac7eb29ad461b482ea7e3b5a6b579716a7e395641007e037b7b82979ca5c19deb0a41720e6318dd0396345fcf18a475eac8b8083359aacd83e19d550c7c8663d6eb92448cbd1f3e9af9cb03aaa488cb713a919369b9b5775a71d1e3138da166dbf9b6343a6c796d0035b64324e82a6e84978d94e7a58177a6063e248403ea62b0659df9abad3dfacb815669f3272574352763c5e679a9d0092f6b2725c3ba040e325021cfb993f110bdd568f78eda5c8e993d3487efd6e0c39002070be7da45a417c6ff7288c41464349e5ae2aeb990b0610d7d6af826b3de993f9f1e2845a415546874fc061ca410d8650d46760b9cb549a3d52c08878228fcd4ca81a1d812f16f8bbbba6e69228a1c6e1f0933f9da88a05e2ab6c16a4a6e5f40ad0c49aba45aeb9bcd69fe1f40c7b56e515e7e48cafdd6d45ec3a3773b6a4fc0540c29c435f4d933214dacddddd53e83a4f04ccaf800c240e50c1bf24f3b405e2c7a474ff7d51e891ffb4a7f201a0d3c55c43601f4d63546dd937ad9c3d0943048e5e72762e9b13100ffde5a3067b2e7272314f541fa26602c1846dbff77b4262b8d31b58ced929b67d63e9c0402f4cae0397ae78ac8088a911f38b1be69c89416e7facef8c882d5b87af05af7ceea4394329b807f9a86972a987b421fad9619625f099727b35b5bf915841eff7da6591df5c00af68fdea0762779d26b09b10444b1d1b3c991ac73afc0ff501d4ddb1949b1f732913f50e19f678b315a1fbfb06cec4d444c71b1af32c7f0b69c29ac43c67ea84fb1ade26e3559acf13b950456184510d18c8599d9c6b1ca223ae201fcfecd876ba250c9da0e9a56f4d2a842fdd6ced3f20e6c9bf4f6044a59d652e7f3d82cf4123b8fa92b1f9aceb8f14c4fd12e09ade7abd65f3bbf4addb1208d44d89c44ffe08b457678eb9b83ef827a7ce0ec0585140a96c4295e3347392cc7453b78e1e99a652ba887f21bbd3bed8f66954ba0718d0b6b2d273b9b05bad3bb5dc6f385dcb2851856ba2c88c7e866bd7afeceadcbbe1cbfcfcd4c8954e761e1a909a41edc6d104467fb34207ee5da4860fb959f5a97b431f7523f85bf26c25ab1942223e926ddbc159ad8461f39c78ca8e3eaa1f83b921340385f5fcd49a8f4ec59b035694536f0b79a41b0d8ede6e282c37af7d5fb2852b9bf916656701d9b22241e3af050069e8a7539c127d576dcb724aee9a8559b6087318353fae66c0ba43628945f9a0ede1c97fcbe47eec49f7571e610c05e4e7f712db4ae9236b312e5f55dc040e960b5149c264b7e495ac9768f5268cfb91dc8a50dc078540e0165856cd90f71e1e329e87f3c358a4e66211c2532430b160e8f8e579aa641c7ccb9e145b0890bb9e6acccdbae2d48d113c584b09a839750e8f09a0f338fc611c90d8261dfed9c4d0c55410bdd327f1e681a7d43361e7c6df753aaf445654532c1557654bd15f804a42c9cbc2fd5bf2ba905a8da689c9893745cab42d68a8930259cbb71302669175a79d6c2f1dfb6c5aa66ee2fbc8723c380b2d7d22911eb8c4b61cae5bd628428036bb8f656d1a0b25e1561c2b5d06a3004a44cf0e454f510b021c777ec6b58f2c8c6deb03c725ef74346f1b51882db54994eddc22bc947b802ca9635b24d7008a98254972851b56fab883a9c0abb73748ea32e6ce3d1dd65c3a8f57c6e8a1f4c38ef7b4552db523d3d6033a2e4d474463d567028541d5104302d41c3918fd2e7b04c8adf56941f74a8a3b259413ceb06ab5de6f458d1c07576d704901a5d537157e657b2535fcc232d8b55ca083b2789ba33849f75e37bb9561f834b901fc2110368f7eac4335635d0e393fafaf1a10ef6f78693288a13c03ce7d64b73b515715def3c6d496465ad91bb43df2df0275e0f36331868c2ba4d0e182ed924c57dfbd8489da75e4fddb9b444ec31ee80c0df562144009cd429f502ea9597dc086c8490c17959517618501679f73e7db9e395f03697e4fd5399f21ffb4e9b22ec507200cb930cbd82d78c3b965242fae6f05be30b44c36d15a7fbeb5bfea25e86f8be28163365294765b1c4f2214bd8bfe2d8eae30b69e12498787b55abafddd937d1e6abd055ec3ca42d44c1da0352d165d21d7b631c5f77c06dc8465a74afb4386db11cb1375d7118b604b513d4e04a9124b1947a0f0bb5161d4de3aaaa5ae2dc7081275e0147eb2cefc565a18a797d07ed99cc60c94b4a31249ef578285cf7bbfb7a6a384e980ab1d61820904a4666a0a1198cd9d2168a4d3c709170a9e1d1acd241afd7e8236bbe0432513cf989f5ff26d8ba8420b300a38dc0c730a68b8592e20d0edf227efbcece17738d1ab53289f715fe9175c03542d791d5215192f31fbcc4ce65b1d9bd734e78df8524e4c0b31625dce1af74ede1507e0dbe1bf8b9b87ca0597c87d5c019433d2a377ab49d05bc93004bfcd2c0c4d8d671b31e89e7e2034a316f89a71e46161eee3ddf095b796e5c024edf9d9c1ad1d7f65c9c7d6d00f291f1345ca866424105e1539472d770835207d6082c5af59bfe8bcbb6057d3a60d3d7d0a1bc1776ff282296a1537ff70c46d66e97f0818cc375b6ccb166ed97637aeeade67796940da19257908ed152038f2c087a1ea2d35f9e860c07889bb148e1b59622abd22115d209ff49dabddd1d7b9ac5a83bb3a91e604231374ccd88da3e10981cbb11e2fbb6dc9587fc4f0f1f8216f2ca31a3f458d275cbe3a42f23fccb23af0e388bb9b7ea2c30de380bca2fbbb1de4f806410332794fbadace96ae45c1837fc77445a1941a317d30a7cbd0c9e2523a4af756cbcc17e68bb33c48b65219bb88ac26c62db13274fa6833c21002ead961e5d3e8242c3371c9d59846b75a98fe221e8129dff06c423f1940277e1498de8d7aa00570e1bbc4a424d75ee39d89743f34d73a62c7c2699139224248bc980a8da3c747b694abb6e56a1e0e8625d8b8ef410314c82ce93a23a8e10efe90a8116b02e5666153d9034b01cebe42ab3ea0965a1df1c8c3201cbc79629095b92029d907fa6318121b90a5069ded9d6b27a0dcf8bb66fccdc5359212bfa3cbb4fee7d7887dff6269175295e8900908eebbbf19852e10fc0137e80c7feec38a36827b1eb7f07948c743bf7717ea53ad963f991186679249b218d8633618d77bbda2be2bab82b5e04b6e4dd992a1fed7534fe4bd5737329d0f6e0132e72d6a475b7f9c9dac89789f7024b33bf36cd90790124dbc9dc0cd389ba45ba0f2eb8d05e2db01d0b5f7290cab4d412458f6c8d9e680a4f0b506cd8fe45bf3de035cc74fcb07d2c5d0ed2801ad7fcb6c7f8b63dc800e27e801d959aaaee2e9715a329517bb87462c2a4e5d75628e358e46dfb5b190a48eee0ccd94806d20a15438a50dc7932ae1a2b5b2b37aaaa9507920de4bbbdea745960f541920b48aac1c2cd4aba6bc3668668921f5e3c604f0713e38bab026493410ba38895b3cb2915d4d52074d57d0827ad3cd8cf2fe30aee45da5a2f5608cd5cf6612984178b77e2e48322f750c7f3aa205a7cfe3a1d858cdc3def521d721037d45410976a5eebab73d67ddf9fdc38508daa0c5ff62b324b174565d1fed0caef1f3681de861df807879c7b94ab70eedc42b49849e561e2aeb83e13de71199ec891ad442dc5b027159a8e06ed0addfee83227ae439ec826732dfa2c9a9c4bf3159468dd27c99059529f095caca589bc9ae2f8e2d01c4425c8626344fe4bd95896ea88a4bcfae16341e722273ed5a0f4ec8747521e4a81d21fdedd172e55c56c7feb3e3f25565dd9ceb281c93745407af8e49262dfb03e25d148331955d81857daa47c17dbeb7936556fd8cfe2ed303817887ff7427097b8141048d86ac2622bb9ee0f3211b659f0bb595e7ecab7401bb64c60c1fdd5451e883c349d0123f1af161dc243f635aefcda24694b634ff6a49a9f13bd40a07031240e64415d10f7a4f6f89dee6dbf192a6b864ee44a55c9e892760493fe3943f2a9e3c0239a3d7d58300244ec2d1ce40d46696889f42dab1ae96b0c90ad8316eb3b19150910e38474d736f28bc7dc6af8299453400e47463b382d7f5cc3e448b1092ba139490af294e5ed4cfba617d6e39695e28ca4afef85bbf85119f8a2fb4eb7215e0848e91e8593941450a776f9007d54398fd5b63c536212910d4ba7ad86820885a618e8e61ea026c70a026b1cca69078bf18476b73d840b75a6632cb1158a1067a748a9f12be2caf7011111f3670289a5d64d26dfbd707b6a4a3b81921722625c64bd34c03a28f91d4b240edd42d57735c763866768e929690e87ac882540f9f61f64a3c40743a5d308fe4994a669e1c0d660050a17de97b6278d1fe7af4bb696aa61cc3c85af388f3982aa950714b7e05c1bd762db436bde5e52a89ab35b2fce5459a5bd22c0810a1d030bdf3bd209889f0e6d91180679598f5edd3ab342cce8a0a03e8ff37c78783453ca8a60693ec22f0932b4fcf2e5cbe9a23cf3bbf1854fce77722b2f41c5544e02236023923418c0e153e02a5fa95c387d2e3fa2831478c51290bfa2b2b74eef3c67a11dbacd8e2a49b213b67c84d589c211276a81c95832da0baaf2bff4a1da518f9d06982964cc213bdeb229db0b6ae79aa7660f410ad6bcfe6bab6cdcd45cec48163b6f25854bbbf54af822ac0ff05436ab83e4ae718211f9e659ec6f506e397d3ec8f13b3784b1b42dce1c21b10b3927bd0cc29fda585815cb5554ba0d034ff9dfe5186bee006b407ffbc90b1f04cb5e72dc3f056e91431db98fbabae06bba00e63733e5f736b52b777151a1818379a46d62ec0d8d2f0c914d81ac9e669229c3e8e83bd2b69ca39b7a69bed3dad17e7a20539e4b34ff405d37df96b48d2065eff39e7e409907c79d313f4c9790c87cdaab538f64dcdc20b65271c94bcae3d0527d685f9c70604a4e087c4ca43045288f2e7a62e1124b1101992c29640f2b7707afc229bea984697c8bdc1f44e2805c97c8c97be36f3323e959e888666a962453cde3be68b7f77f7c7c58688d4e8d2ed5df815f587936731628a88f505dff4415fc296d534b3aaaeb48d257793b8c4260b152d60f38c6a5be9a1348c3a8d3dee04ba395dba7221b1f5ac81d26e1f3cce0c1331bfbd6794e8b37abfd3fde26a39af8a12f90299cf048723a02e8d1007ceccf67afcea738410bd80316d97087b95e46b75ea6f3db2fa0aa16161ff04cbe34546ab2e9e7f08a72cccf1f15a576ed7b715579eaae8c9f64397c4a519277a1c979f95316cd8ff1035f2a4dc3edb5ce9f3065ed8a352f053628a98b0c09bc69f4629e037cf2a5576d357bcfe06cf50d0d39fe26f325083b92caae43e01a43a52aef5eaf3f42d133bd789cf2e606acb6bb2783974198e0ea3365d4e6d5707acd19a57471dc1a04a0ced0216a2bc373d5098de391b677572e58acc440f452eac8b809bcb60c9524fa90cee77ec1dc96747938efe78b2028660e3f9532e62a79379c0f83501cb0f80ddff7d8ecb54df0860d44445c102d2fbb4b95e972d5ede08d6400378fc5f6f249533d7af63335e3296bb85693a067ee0ae8e47381f216bc4428263af168f1a806b6698aa81e7bde027132fb574a3c551773680f0aeba37286269d29bfa804e9a80fca2d6669931d0e1233f87a401b471ab80fba592e0ce0847ab52e031ffe907bd36ec59a75e7b54be5386ae44d38f0dc363432f2d73fd238149b634b95827dbeab1bd4f5fd68a689e382d2e2ad09af4c9f09ae6f51e4d499e2b010705c2e42f661a1f751f075dca25332f6dc7a302e41a1acc578318f0e71ec0af1cb23cad3dd6431dcf8b5e0be6e11defb5753bb8cb26bd399241371025b87bd49200ebe6d3d284b123f4018a92043bb1afada14b7bd800a2cac8dd1d7ae2fe71bab581c182df6bdb64abd8be0d95d8dbe5b6018aad6ab256b520a501b0c951d73495ad5a4b0440a40fcf2f238c95207d1f7091425525c245601489d64cecd7db55f41d1b093247f73e908ce9272b0c8c0735eb7439ce6b2d30fd90447bbb1848511cc9bce0437d184839a59ca9356647df3b0fb9dd8457ed98bdeb0f591ae988b7e6687bea8d81957619c80f8395cf0e17c7a63d43ff70938b4c497c67ad819e9078ead9cef8c9389292e78a1bdf0c64a61e344da4fc1091fdd9693f7767aa3a0786a27db555dd8f54ca8801ebda4a5e5b8c91a1c3eea1dc24f6911131164e2b03b3995da2bd919f7dfd15d4c848f17cae385d29254f74a54052752d7d6b2556b4d810773a2f7265af367c2f227ad13da5f0d1ad9559bd25077157f8bb6273f6f1f4a890cd1e182878f572a7215e4f8a4e1a01053287f5adac911079ebc64de23a40ee17978742a779ab4b2545f460d345f7478d2fbf4d1148c1049aaf2741801f80a460496de4dafffa7f20b2ddf4116c76ca9ebf2abe6409a32f5da9efad2ce8ec1c040ba715f5373443dfa7397766f67b0c5a20996aa9af4ee74cc2913b04edb2874e0083222958623a9847f64317ee15de79bb506427b494ee1fdb09c9aec5e596d2ceecb4fc76d045ae613a5280eca13cfc4d917e68a438b5c1740183ac7f199f760623e2eeea961546cd31e829116ca680e5638f2857baf87e6d79b82c18f22c4913d69d6770d9e96a07e2f3d3bea12fdba32789d4a4601c0a4bf69b31abc832bc0aa49f68d5203485b17b5720c92068460629a2d33a306082c21da344cdebeac0c8cf8f0cf66c559c0f63267808bc5d586aaacdb1ef56513bd4d4360023537136fa2d6e9863cc21105d6273cdefe8d492280640ff88c3051a8795b26ffda6d95bb1c7d8b37597af4c1e1137cf4105dbf78a317eafe08de1ff7dd0b9a25cef77881a1a5046bb75d8ff67806aa43d1bbe5ac74db638718afeb8fdbfc8bebab51c67006dbaa6fc0d58d62c24e6ca882bde35317a15cd25ea4a2988cf4bd5fa9a4e1f466aec4f4502b5b3600483fff12557ee57334df5600e9cd8931d37a4d4bb877141063ec34d675f401978bd352d1369b51ec6105015ac66241f862b35a9d64d40b68e05dc2f80f4132425bc15cfec67d0eb7384c03f01209f375eff44aca18fbb001b2d3afcb3418ffe4a965f73aa8d92df951cb99fa624b22aa03d260d8abf119aa0b44a4d0bc5fc7c075354907240a807ac7c5fa874c686b9d7ea3ee4cabf63bdac003d6448e1e406b0f932b3b7c596822f03770d84a0bb7a0bb2dd976ce626a21be3cc949998581318f357141646f92c781559a5904db25b08541f98c7cd62eb51a459982e58eb9804ce3b272319c3681a5ffa65c68fe87c03ff82c51e324578af7cf2fc41c800404fd9918f3bf8931de71df5dd5d943f3b1a4318ddcf515fa912a5b4ac322ccc9162a1199d0892f5e87956ba8b3ea6e1a12f0ca1861dad7595e528daae6a0d637ab8c63f5301ec9d85407f9407c5ec8826f7237aa8beaebfc0111defb0ba1847a5e3be70b359eea4cff761eaf69400937707c06fc03d72f9dbb6a76fc005d8f7d59d9eda1572207fd9f652460bcdc1588f9efda0b1250aa8ad9faaffab35b4dfb2a86e6356cd829d35ddd59b33a7e6f5a5075327ddc267c07ece00d641d6bccdb462b3a0d878921a462ddffa04bebba415597c13a82fdfff8580fba3a4cf04fd663766b9fabcbd558d95099b5c65ee2fd6d621e95e47b8a412d4598eee53aa3a421b28c881020c0b472ed7d25c409c2f20aff42e1cb6baed2d301028933323fdb17aa71d41088877109f794807498fcb5605c14744fc4dc0e68cc24f61cd66799c1e9d475788e74c321a234079f27c2aa897fb44f7f65f613f7151bc7be9134b5f0cb54905fd09b327c721d08d49c8fcfe08bb5248893493711fd0d9a8d20401cf994619e335e8b8edc51619cfd5fc7d74c2114822b9212a65d1f4c9e029d7b0d557140afae64bc593b79de2c70f03a7e81ace253e7ccb2c86b3de98d6166ee9c68c8d5b49f9ae5a5cf291afa05d707bc4c606593b93540fabcf7aff95398cf86fc214bb8a3098675ad0a30cb0a1e2cd94e598faa8349f82925b8c6f754eaa90012b0efb9081a12926289f5e6f4ef3f4e13e6c827aaaad51605d6fda238607bae728ad1028ba6cecad2a08f8036a9a80911d24880a862c324c23885e7a04d43bd77c40c8f1f832b025332e054c6508359802489b3b62f6a75ed7229f9ec1e462b37cb52b04ace875cbbb582272937a56889ace22ba5bba625f1e91cd6055d388c5cfaa23693619cac231f44aa975e96da5bc0faa6b3a21d43292d7e38ae11d6924001fa0736cc03f04575a458cec9eba548ab61c8da8747b5c1fefa5debd6a09c2fc90f2af7953160291d650a44aeb51362268f297257371ad5b1ba157802e79906a4c0f48ba2606a735ce4410fc75d48f546b8cca6505ce5a8f90448781651bce49753fb157466f52f2a42f570e90aa3f52ecbb94bd9476263f571e2be382c53b6ede14da8fdd9b5ef8c39ed868bd7f8e19bf69dc72a16bd79c4100efeb6aa5bfb013db9bfe559ef36dcc30950f9ead3ef5aa6adf4259a4f55368f590a1490df31302c2f3134b4727ec2860c92d44c76e96b5604b0ba3f025816b135daf3bbc9e7e4d7ab57e46dcd63dd5d07dbfeff879740411abd51807c9ba3bb546839ff1886b7777385a202fece9d71a8beadc2934bededcddc33f9dc4d04ea0c1ae7a123afc9f1586cedecb94033ac054a084214125d9b3f68a4f4d400f6de4f172e9dbffdfcd88dbe8fc45af23900f404fd4531a5ad437503492bf4f743dea0d6ed8e0142e15f4961981fb2f87722ffd30eb97289514e0138e76a9369b980286f212907271e30f50db0816d014081ebb560a16aa1732e86d82c3adcdfb1c3262dfe04da00829cc020aa1deb8600e11bb881dbc29d66c8bbb5085779cdcda712f0665611854595404800500689ee0225112bec4ba5f2397653b1761cd12aa532831e8ed2fbaff6ab6b245b88e99dacd87f95a8103cf9da50604825ae47cbfd8f3b12fe2bec6748465addb6aaf850a75a27c6d2d864f24e26378f37418bac7f4c7cc30d76a29424058a641ae6948ccf3bc63dd146b50fc928daf9c0e05047cdd7905cfa424fad54a8a4be64662926d2150490bce9be3038bad019374490cc236d0b554648fbcc7f8eab8b6bc73028de4594c0251852cf98020b1e8e1c440beed3ee32815407062e58666bac5f70e902e8c235cc6c65b54e6edb4820458b5ffc047fe8420b6416c214422fb59515c23444c52829c3e44de3161bf950aba5b954dac1ce8416faf2b722af842e4d52224bd81ed2135a471c0339fa9279e2758cb6533479201c0c6c4133e89e021d5b04b9ff82c9295253dcfe164f67200ddf813e7a9e0f17d34d692d95c6e05c8e6e466f9fd1696fe13c968d682828e912022d3c24021216a4165f865239d3af98efb02b0245183af686c45c270aa02dd8ed149f3a6b8f29a45bf56d9a4e0a5e7f389511322cc78ea05c12f23b4391bb1bb88ca372b3fd69609aed22993091a09b5745e65df3e100a5d85c413b33bac8f0670a90298a1530b835715fe3bf83283eb2c5430418699e3e6ee41f116b9189d53555fe4e83e4e30708c698bcfcdf995b37d672c22fc146c2e49093a29c91c50ead312f53aaa2f95689695a5bcc7a1015e42d5353d8057c026cdeacd05b25341d0a861e15e6e93d05a4292ab895d03b0f339ed4e057474d2bf53428e19599340e21b25de08c2818fcf886dfc7ac19441aef2e35923a0c9ca8f486ce139c5f5c99ce4a3c86aeb28e3aedd8d2b2875653dd9904fa3c4e0dd7b4f64da69b346c5b644d5585c72eebf0731deb2cc9a58a120eeb4190b65ef593396bef61b9ca54b6cc467e70bc161ee7d77a43f2f4fcabfc46ae7350ab77bd0cf9c4232f476ccab2fd5aeef80da7037ca531b98789a8403ad952cd525cd36c2f0092c98e4a76b08d44687ce32f88f202318c693a5a1dfe37eb2d7eff9f129c96ff15a1686253421aaad9422c376642bb38a00fb203a3586b8edc586dc7a3a13cecaefab387fb2b689697c8b72e909913232bd9ad411afad37c7ef5de82873d218fe3dd06d1998bcad23c9268862d57103db3fd7094045eb2729bea677e35b16d6792595f86a0faf3f58b5683d2841eb34611675b80120a6093445d3f361962a8fcf1c0c7bd92752dcb56edd79c1f725adad486d149f3de13650b64ed5a00422ceb400766eb6b111360cffb8d4688393c3a2082b9a5971e5754751d90ef36f6e37ee299f3976994523a2524fc58f836e769764360fe674645b383ded3f1a0b4e097c194fbefed733f0030850dd35346d295d5b4f21387ac371275fb439746e42c9845e7228541dfafab682c83658d023fec8f60a45a9943d06844454ccc75ccccf5d317ad6858e8cb01dea25165a2da5e0ef12ddfa27d4ebe7f606859bd34fde51d99083310f6953a37c727ba8c6941b656d2e4ab23e6fd0451f62485401f788128b632493d3ef7059535a68135080862bb409e24fafd5afbc9f151009fe7a8f159a63c65ad8ddfc8c0d130883283c4b29e4131e07e7335289fc8f861be5e7dac008f2f927b563929fdad86c8cad8e76b67f3a13951dc4bc280cd005eac7a06216b626a3d907ce65a5c42c70d27f9b818d559ae7909710caaaac5ceafffca4b94bcfb750f3c14275ba24e1933a02f02ef99d117171f29f9aa1cd2119d9305f8b2fba608b7a818b01805a0bca483e39eec9ac8ffdd1d6e2d1531fd3ce40f238a553fb966f99605ce881e26202fdd2d75e67200375aa96f3a36b81f16482b7164b83856c10bfca6377f20881ff2911dae9d68da4d20aad39cf27f76c0b11456b412e6935b2fa034ad93d0d0b175518d39ec734d148c762d1a3f14098045aa9a45c4fc4a9dc43c4db086fb7e87bb14e698d4cfcb996565555071c73a655260d5c9d3a98087d0e2fb366a927b5fe842659322db4dee18889b2916a5664f248367e193ad82b928b92342d88d236f7814796ebae16f4fb0072c65a6b045af4dd8d6d4c4278269176e8974e27ba6db3f69a8e44a0a7ed75c6ccead6e68c3a4d50763cde6104d6bbf27f7aac6dbafbfe407cf10a2e2e739b737f48a084babc7f518540749a50e8190dd87b600b261e0fb16e80f9d54ac73fed9444e97787e687be4e96e27dd74e667a2ddd42ac0b0ba581f4659e448efa19c96cad76ea4116c53f7f36cd5b70edca05879b28139249982bce607d3e7dc04e09a7d76f92f0ac9bf388b04ffb92451964fc4e96ddb61ba83b486e721976eacf238b89ea285613c3722f594b5077cbf197570164d952f46222bc072b6059aa79177488676416514a95d87cc8618d9da7ca69e59062b79781ac3441b2f74529eff8c85533a325ce97b3cbf228c9de0b18f89434e756c2705c2d8d816aa33c24d46eaa5caf4427f72188ae8c586cdc5365d81354a0bdca7c9b69c781846b5816687659daf653fb342e32ca37ad8762883d11dfccea2e655754b51a24d944a3396c56c9782f51ffc294b928cb98697e0c7d8dafe121a83df2cb0d99a9dd5e24012d0ada96e812879f817c793b9917d0a8eb8b1f0a8b07bb1cdc77ae9222525a1113de8dfbe5ad0cf43b418b518ca83fd70c9624009b0c55da4fe1ea332cbf3e127d255f7a660a41541be8fbe004332d3f65f76840dd70db99249e2103edddcbd35b4e18c8007264fa4aced8a66fa41f0084bcc43141df1b1333b4545a42983aa3d4bc39c927b30840c4f3d3d9283b4bd23d6fdfe2f90d2695734eaa0481a8b3305e80466314d5d7dfce91ed3f38aecc6bddfc6a526d448841761748f979d2324b884f87dbafbe1e0b35b811acbad3d0a1fbc98de35c2a822246fb78035c93e805d1eba5c36781e9177ed41537af3a40f7a94c864f069324384d103eaa07bfa38e6dae9fb9f88d2b095126b254a787d2bb5281a7d75ae764169c6137a126054960247279379bff6d99d9935c6ad8fcafe78d6af7b5ab00d4baf9f847d01a5e037167a9ff32f4cee22605d3d3f35f06345269a54ec4f6cef1fcf23c09e50ae01e7fdd38989fc12345938a7c03edc426f1bbee3d93d30417a141c6e40caf2b1a206c18c005bcd0639697aabc3675b806b9f76d6eaf9d820df18d50618a93724da23088478ebf76a0a2c5c1cf5fd38193a369e609f318d22bf98f6f49c194f25debeaff6673436026e774a8a09bcf8a6dffd6893ead31ac14ecfa9b294545ff59742f4b49cfde7237d58813c7116d33da7216ee94a4524e7ba30442831ae31b09a36367e0b98fc7327023d4ce5e3b3715fcf66657fd97a39b9d83097ab0ee078fa396a2293c29a5cc0c67142aa0f87428d741910c4c2e123454a8745ea9f7bc5fda442be8c1c4bcb1e51b63749bf51eb61698a78b036b4e87f3eee6ed883c74c710eed65cdbe272e4e7a40a983a56447029f8dcb545710faf8ed89cc2ca63a2a25f83ca0d4c60aea43604edd5dd2e8452c31a7a14f5411d60f66fab0b9d960b5ac1e3b8e9e25cb1858189d20895458f2de5cdd2c848a347572785b3b483295c621d7c1103101bf473f7716c7148252e22d6fdca0914513231bc7e29983055ff71f61d3295f444edeca91374b6d7a7436f9178bf2e804a62c7e76281fce06e9a9be66a540ecb15af5ec92126306d430e7be78a15fb81cafb5645b3f5bef25a866535513a21a41a11e7acc03d124292946185fc0d00305d8009c51628cc60e47f44bf215e8df6fb69a2d81225c4628c37456607624d7b05db14a1a171814c9f9234a02e927d2482a4b334182d1da62b066222fc6af314a7d93443aeb26af1167e66f3cfc759dba12e126b405b22dff625f5d814b2b3c331d9f6b005e2ff9451eb75e53558126299634e567737fd2340d0b80531bf6da100cc19c8cd18eb9175852d95be2e0bc6489867b7bb37f04af5d71ba1efc31767ae692d9006f903fb8cfa4e6842541039b6770678a26ded12c881e7f81f6db5db9fd8600ef674d3ba955029e2b4fc1855c29e7aa56cb5eb6ae7e8e8707fae04e902da3ceddd0b0c9ebf235845aafd9f9c6478ce3aeb91a6c5ed6159f7cb926379b0d818b3d7da126037a7482e58c7af979cb21da44cb44a8f83f067e6b4fe5ea17705aa99fc57e93628dc13020aadb315c990cae638b20058d7be91da228ce51480061a7976fde04c56fc28b13806c0b278552bbe2d456033fcd204511644e34103e251d3d69ef0664e994f9e1d639c3332e170d5a145a4033f790cb6428a1b0babcf424531a5e98de4433ee53db6203eaf0b38a9a4e40ad26a0749b7f1fff7f4c342971bfd77b4bb01e95374f53cf7202e13d76b6fb4da212651150e1ff3b069576445fa2eb41a73539a68c228039179313e26bfdd3e6ba252e5c89067cae5937a1d6f4b258f054ddee659bf0799b4223c0fd4136207a84053c1bdac9e8f78473e8cb228fc3114ec95f62dd9ce3c98ed04d8b2b88374de2f17d232413d60275143f8b670d6a1fcf691c266b1ea66109126ec540629799b424391c07aeb535843318e7945521ebb0ec9923f824a4cf8cbfc01edfac5035943c33fa54184b46f12f42c89d94e72b848b86245252220e5c58356438f6eef4b35ce77f425b24e0d23af7c2bf07b99c8382e72fe0133239f5fdf54a42f83deea07e2613208f9a8f064f4f4a6f6bc0db4bcf24db7342eed50373f921ea78d7e96708798f2224e1601eff4858b68850ab5bb0b565937cf1a83bffd49c33f131146d4160ceb27ffe11aa23849b2bddb7fde853f2371a36c46f31942a6c15766ae3f31e4c2274c2a090959c3d67aca80ea7049d39d1ae070b992c8b28b79e3bb641204bd9b266e99dac8fed57030ba94b4c7704ac9f12f39bf71a8cd813b49e1484e0f15e2cb3d8478018c9d0741cbc0e92c91aa6a5294f2d33c0f5fb960c4865da32dc42ac4fed8aafcc857379dc5c95ca939d81ad8f6ac60daf0f30d9420e2a49c7a9969346903bf6bdd5fb4e75a714e454803f23545097c88e7037ebe83c24bd13f1529928a5b19698ec7c23c5b4293d53e0d1d83aa2a826d846769c4299a96aedafbde09688e267711974e9f7d377a2ac9dd30067f3810bdf9156a4183e2bc186fdacc6d1abcaa97dfecf561312bba75d9ba228208fc1c658ca5c36ce3307a0be56d0ad08e89b4ab4b9631a9a8e5dcb47b4e3ef06ed951ef004df5754dd08c179ad9c7318512f9ae48d95ebd723dee484d6db5ffbccafcfc9253f918e60c550077adf88fb615945af90058ab14b8430453d7f74d3af3d39421b3f77648a5b84ac405fc94d869e770d4008d182fc637a2ac3bc03c541372e5b3c6595bd015b648368e62f3e2b304e8b177d8760407155f5b14469897accf7234c50e41d15ea38a3b25d4bd3e98249defced0c50a19fb538ed3dbff323a6e5c574f8e07aff6ddf6a07336237216df9f47451539a7583119fdac145b858658d01e64f727d8f605d02a2709035a2b4ebd115fd9a2239aceff2d13705d68efd3e1bc8342f174cd4b23420cd833024a4ec78e5397e8ca4b97df5e6fae958c2013d357f5563eda4d242a1d0a85939343de76e45a38e5084090f256124630bc115d3930ba87f7cf7b97532ac94bebcdebd3d13cb668caeee8ddae3ebbe8cee556ebd07fa0b9123a05bcc864b3867cdc879ed89a86e5b8a4a6ee8423552fb8793ee93675efd0c62b48010a51939ef2b2e0f5b2a75074804d0b98476f577620c0aa3ce083d313e7202e35d6d82ec06d7303b2a3fe597c115f56a841f67403c46e1a545ea6584126d77d07b22a8a5e9f12cc5225355b5080b8140f018d747a1d42651196de59944516932a44c080e82fc82f08d407a0faf1ea5e384bedc57b3c779f0a3d92718e25ea641301357b07b7782cdf76dd77739d13a6403ea351ac0f70a95b1b5db0908f4de9e3335d4342f5a298758f68ca290b75890d943f94ce4ca758afd6108bbb5d9386e145460e15dc6f378373b94def1fbba63a571477af554db803f9cf65041f8a7543307ba510bf86ad5a52ca64fbc487320657b07236f63fb7d17ca41887a6791661019124d24b81c457743c50fe72d5e522cf5ee99793ba48a5f568be8e5a8e7939eed20fa54741f3543d6f167b1ae8a6ec74df7722dd01bb148dcaec7f589255ead3e4c114f3216acf657ee199b65f80456db999d08a2a15ec6152c0d896697d758459dfb5bc9bb33d9cd7d1ad2ebbdb57b6b91590cbf68a40ec1c4a75341603ef4dea0dcf80c17014c67d7b19429e9acdf78c8b0c6c1ecdcb091a35ab5734265b0123218242ea1670fec5fd4e66603361ec1d76848a08f7d3b07b3d7b4b25ffb5af23c92d2e1f232a9562037b6fd86c94641032734e58426fd7f3378ea39d0829d6d6ac96d1b06faa80f8f7ae0bfae9187a26beda341c7c9d04e98669e505cdc380f5539c751e2312d8c500d2f8f9d9e0d520f871b9b1379359ff50b65f56c1fdefdd5821fb0c16396b955f350009f4420a1740279a693014a0446e4d83473354845fece04b5d98d619cea234b63b438a094476441ff79d624d51bb6ccfeceebc365c93e0e71b2cd7c304b64d92a5e12462341fc5fa239a03d7284d7b59086faf73593cf2a3e8d7fc4108dace03b2305757736ef43401bce9d7a3868abf6e77e7d95483546fdf66e4d166f65885b759d3446f97910fcd1665a22e0affda7179e64967e3843f3ebb1f5a07b4ee0bbcb4dedd3dcbcc71e64e2a135f020f7a278233286f420ca7705c6233adf011367cc38d7b61f147088d64da4472465e7a2f8c5b809c45742ff99036a8dee114d3a43c86d3e39938d8c4e259ed17b5f1867a286841831605faa127d08dda9d857e3a5f2e6bf9665aafbc870105281e9b876459a87b9e3f2c42a9494448fa81e0bcd4c327dedbbf9a8de8730f79e43dc661133e7396494876f977ca0ebebde5e73039b555e6cbdeb61e1b4ad35af9b04c245a6e627ae2e491ed49e8f988512e875835e3feac847c698d679f26d55286081b5e2782e9d96effbeba5e027db2101caffe97bc208980e2fd16d3f6a47ce50d28ab88eab219742327e8a94bb6f4978e29f46111281fcf0d72685c8c9e6eff972d968bf65b24a9215daf8aa345c96e9dbc59b0ac58e62c85a4866b054a60c297cfd4cdb2146eb5bdf9d9718da74ca16ba4e381ee77b6cd8e9eb0c78181ab664d242d1a8c1893daff37e2a9fad77c62256103ab84219466d61a32a2abd2886abbdcfeb2ba8ff75b220e8f23eac4181de8d8853427987ac737eb5886bac5ad3fd87cf4ac25d92bceeac393aa2478c73549a350920bc964ab589e1eba7607183412d35a6e7a61d72a293ffaffb89db0dc8539e0fb2d1b5fc91a2e54a66a4327da51c7191b12a24647492c3fece18edee0211826f0aee4fa470aecc394cf702860e79ca80b70ecc82b0a87d8c081b4ced3688a582508141dc9dbb629509b6505ac0b7b1e3fa63416fa73c04171b2afcd62be32c1f270a26c721e2970b313449dd32b646dd993015fa9776e553023e89285bfc4f5caeb5bb925bd46151b30ba930eaa1fe5f0ac1e1d987883f46c180a6486ac81185b8d0b184360ab534af80f4d2663ce2e2327e72dbc258b68ae897ac3bd8f2065f419417091f76ac4c4825362efb7ab9e6b3afe041914c83aa157b0dcbb8fb0d1e64c9e6fa336e1e0c4fdfe73727d83a8f304e75db2329ddaf28e662fe053fa58c1bda78c9874a451040af0feabc96112c09a83e1a15c8c930a98a9663ab2fef53dbbc118aa3519b5be2ff17ee98d8d6777757e63fed05b3d5f17b72bdbdadd3414241650c4d358782be3da2b755160dff5b9250b1a4433e3991f7cf8e985f4a897b94d967803b077240a0d790b6e59f32c26dc527da05ee69e4b7f7917860151cbe51f135ed872f80cef021a45ffced63bf0c5389d331da2ed0361a46bf1c378f87ab7fe0c0a77828ee704a5adb8099f5546f52210236dbabc1aca2c567f9efe90016f3fddaaee33bcec080c50377358987262af5b178fff6d218799aebeedeb5bc887e1f8590a87bd05206f8986f617bc14d4ab4cc43e796cdcb5a286e875cc27b777bc30aea9e75aa8ea23f81a9f5857dcfeeeac3c339d33cc202168963f2c5be098b40ab94b655bac09c47a376cbeada5446b8fa127d0ee19544d8365df2fc688b073c3707d163666690fb654bc1a8d680a7aa2531b7e1ae2cd7dc5da2f3b6d101ea13f34f45c4b12e4b60fddc9a3d4497419acfab86d6282e2fe11887543524eb5906bece6236b4c96c79f08311089c4fa6f2fb599389983515d7cc878deafcdadcb0261046fa61404d2fd6246bbe63368e3e9d560fa61b16d2f091b3cc72cf37385dc6858bda1927d3ef9085f95a499a90b1e2e0ce03fda89ee7a3ea55809fe30edf17fbac927df128fedf6265196c04a82ec26bb620c99fe9cb5a6cfbd124d865c39f33e21c066c5db8207cf7d603db240b457db7e440185e681e7d437fe782cd66e52a63b7f630289439dd205a34b9c7f289affeca47d7e525c8a3ffd05cde12ad12878551af3df0260881d9ec751a180eea644610b2da3137a963467380358fc290c9cdb4e84c3cfc99eebc1ed0f64d997ef550fd59d66f042b9e6891945a182a0a1ec27723fa342e6e3e867aeb374ea75ae6163dbeb7e2ff07faa9714d40edbc5c8ec6e44731aa9d050e03fb14a715773e27bc40143561ebde72a705ba2e477f22fa974485968a9dde2997dff2a82e2da31c1bd9e97f5dd7031d3ef643c9df279433c9aeb8bc489313598655961f611040bb3a161c614f6ceed40237ba76d822a349dfd31ebae9183b1b08c77b7803d8f15461b15181abf9e7d4e828332f62e4a1ca14ec21a156b813c67eb117125f893f0b38d876de00dd124784c1874a3d6d14b7b481d9fa6ff52f5789ba8a6c6aa2a2f49728d0f3a95c2853eefcc95e9c3ddb516eadd8f05672a8ed3dc796c7d0232676d18d820da18d1e3424dea1afe1e17ade0ef573ada983d1166129936e13ed2875e23596ecea1fecfe546c3226778fbc00606d7c745ce0268c91b95156eae2e56a243db15e83e6c862b460ed92a64775677b71707ad62f5a0f6be884be82ebba77dd7a6cd320418664b3572cc20992383e584e04aa2687efc282ca5cbce66f2298c12419c924392425712545be9a837ad99c6afa2059a88d08e6c3dbe932935a11c3d7bbb73d380e99913c9e28bf4d6c08b08cbbfd415451771e6a03d06627febca4d9efa0a27e268f37e6480ef7534737434b6a8324e81eac256efc778ace086c0e99a1d064f21c23cca486439a1ca75e0349909fb618561c625346e96392922ab6b64bde210b2c00d0e6b95a8e038b5f9f1bc4e8620537efdc016e6c75a7bfeaa6da302b443798a3e68503bff935fec8329e01dd5125dccdb42e6c5027176913164ef328518d969b8c0443e62b2caf08eabe83aa38e173f62fe1b70ff6e27cd17c3e0cbb86f5177d57a8e6db25c4506396c1f189a013f968f2e95c9e30b8d53204c67208d39001d7fa4078f30b19d13d302ca8db7a40c837a3e578c7dc194ef1bcad4074659e2829263d81bb741f069bea1b216f6612b33b383920ec68713e8f85d3dae1d3357a7105e31bf115db689a3d5c419579ed3dfe018df615335e4f82fd78fbbafa606367e5a6d6d04ad5adcb13a1b77c1d37981bc93178a94a62855f180d66745177422aabdd0143f3b303efad9825661ef659180a5c555772bc5c133cf39425d6ff4d68262d42c68aac45b01eab739d34aad698091669187378b1457d2f87f7b1e67616e88b5b23b77633f93d8092f6f9d3780d8c432d7f1d8e96d450947c9ef76c5cd24e5d103f9397e0c49b728ee00dbe1715f2d7b7f0b3c1f8bd5052d7763f67ef9a03f5f55857201fcdb0a5be27c6616e6919fb8adf51af36fb462965d76ad3aef1ca0cc8268bcbe86d5f852f38ed5285b51eba5420dfab783ae3f33919ec1dfbec7660ba51ecc7fc73b7451710eb807616e77d5b8d64eeacaf58081b9db6c2c34e302f8841fdc0a16ad0845322e0795bb228cc6142f52175700f7a2535128f432bbffe55b7ef5b76b6d79b2e43e12bafe151d86506832b1f36488350bbff7cf7fca55b31ec05238befaa246e7cbd7d65c895b256711efa542e1c1f595e013eba53279b14c11c89cafdd74585eba88ed4dd03d2649e95fd9efe02f6591f8c99dd2e1673f9ad3d0cf61b15e5506f9d57f71e60f6111129960c6fa8cc1f4c2155591ff8f2c65f6fcd04eca8b19953128a2229f63a3b06c2337eeb9bc33bb198578b5426229ada7a31dcdd81dfdea041ea30dd36b4f1636e28cce7b64075451683e4900bd023e6a09f4c2765725f59105afe590e8f2584825b5ad7f89f5e51c64fd5cc5b154ab96f9afcf4b6c408f73b906fa2fe86f220ac18b03516a4e105fd4e5b924efca577ef6ecb431c27c4c3daae3c19e4b06aee475ff8f6cc6033784a52829bc9bbef4d4d03466edb55dfdf3474c8f86ada2c87bf15bd6d3f7ccded839b21d15cee002de5539dec7556997cf3227eeb2d8c2a3e61616212a0b8f53c91a5744b22ff3ce94f632834adb37ede22913c51729b9a3043fc5d03142fab8dd2e6c9a4d015684279df69c45fa0821e68fafa36987efb473ab88525a8f9d61b297a415661795f842f90d4a9acc3cd1aa6b2736631defb802738226b221eac9f70b8c3a432ff80be4e2757a1f8e5c83dd27644a181cb4fd77d5f84c31b0da7b397e86ea779441454626cc81d7f827377facc5334257f069c2541b1ecebe72fa3631648eb6d25a0a4be935cad973895d115894477595329a0d52250bf38f7492933dc8adfe1a061c3efdc8b92140841e7ee643ecd319dfac5de7d25d70f4bbec64ac33a95839fcb2ee1add1b3ff13a9b23ed175b3a0b1a5b4b173d6c3f5dca98b3cc7d76b95dbaf1c955daeccd14983093603c320c4a004c74a6c3dc2fba38a90ca9eef6429f794d74e8dab500b87626fb7e61495925d2dd881fce3f6db8dafde0db79f895816f5178c8bd92662faea97b38ecdfa0922c7496b42f4127c397004b333a1a0c3c842b6484203c870964d2cfd2b7606ef02701ce38864e2c0dcf66ebc971f63e1f0809b1316225c8a5da90845d9c889c91c8b23cd470396535da45e807d4c55f96b90bfba4bbba05faaa6f95c6ac70dae0c11fa4a4f4570a5379f7609e3df22b02b30781de463d483aa20b3da8ea097965f3463996e6cad4addd5a48f58f00aeefc9e503d6bb29089bf817025e46e4ec52822e76b536fb35b45cc61f502fadbd81547638f61e5910484d0aa694f7f427057f277aa36677cb81b194943a93a91a13849eb0ce8e1d3c584e37e44bc68b44876e92b5afc3b592bc97965addcf2b444f5873f53391aa5970310f46e13142825c8349eb221edc0e2517283b907061054a32fd640bf19ed83ea6d209851fad237e4dc4b3ff6c954368dac29c50d6a65761fc9112225315f406a579e303b47f3b394f42414ffd67ac36b66cc778096c2ebac59ee5872d6e2231c5f0d5c41f523e6160d376acbbe9e37c427805b5857b6481b472aa87c76d96b111dd53e5c2ae1bc5b99d72407d53da4f81b43d25d4fbff267396b16d999b9c099e863dddeb395b077275c1319cf49854ca243c5c10cc42c133611c2c13c4c3196c38a5f02558ee182dc6a833ec29656ddebf1f73036be55cc5df9b326325488f7bafe533932876a979a504670d9a35c21e700cb6ca8195848ec490869dbc385eacfa60862ed03f434a3861284140c795f256f48f5c403bbab3eecab04ba49cf1ae00fb3c9f10943d113578ac2ef507d82d95d1feaae7830390636a637ab4c8906e6fbfbb7777121db2f1302b01fa2d5748954f2b49980c75cc19335b5b57a2ecc713b1c2bad12d1a6273667b9d0065afd93cecce8847c10ba694c6978217701dc66e3c9211c7ea72772ee869c02c4aed14aa3b06529ebea9fe4ffb9ec928718c827af7402aa728a6862dc22f948363016ac4470b4ee8b3b4f6ea83e01e52c32921eb9c80c8245097444668a5f43966f5d55ffc9cf598d0203eb10dadc32248625f5f4f022490085cce7e76744cc6b81a9bd2da045e5f9521df9f404ec4a7064d3d5423207a98dd2867c00f430b770d40e9d6b24b0b2a594a398f2662fd2f6b72eb642c54553b394914322cb0c215aa7088f4cda3140d9930e3bbe6833abd0770295c9c4aae0eab7d37c85e8e7fc9fec9c0ccf42634c2268719d93d545a17bcbcf7eb3ff71e510c4ee60fbcb5bee33e4ed90773937da901bf33b726af0f1028b0f61eef3c224997a231acd1b4036df6a7c2b2bf326791b42486985fc8aa6cf4e0d8643d9c3c77a59b903db6c0fa1066a5bd88bd244ccfdbfd6589d49a53c49b3a7b96e07acf0048b8aac9c13960af1532e007926db142660a34ec0ce687ba821f13c765952874a76762510c2cb7df4556807a2844e7f825381ae3c091e427c9cb59a07c3d9b5298556845f1ae26ecd60dd4e68847773e2f361916ccb9851578ec2cb78b4b882c1c51800353afd6b09837392cf9f98d91e57d45cecc422e287b033cd398d6cc063da76b6ff368a9ea721b0d41cdf93e041ce691c7211ea4e1006603998cc94bfd9f229e3fa9ff6204ff8aed1a3fcccbf358f3bf93084e7d12a16ba0b3814830f8055d805b395ddff2f8ab46a75f081878e9472dce95757c72f32bb5fc4b5cce375bbfc65727c4c718fb612fa6df5c63596db656b8d4844cc9d85befa05b37478e2742fb11857baaebd7897e81e1cd7ab170f1d53a87b4fce93c0d596bc79b8ce87911d3c5f5a041c324ca13c3fc6c6292a9ba9eecc72e1cfcc12a48d37f1ed03c34646b76640c56f0edef0b32ae5b33984e1c51b0621d3d5c7c59579a43ea7980bcf7b07d12dae8e5fbda36557e8f3f33ae4576a3fd5c7beb10abb6d446a851baff41ac7513dc84cd50f2922a777645c00c1bd20d8aeeef1b5a6612c3a4b3276d1c633661584ea834b8f62d165d95ab3ea34fceb8b63c4a73bcf7c32eecf1b2c20f8e2cceccea2930ae37cfaab0cd02fa0702fe9bdb97ad6e3e9285a2db3d76d885db26e85e95256d7752b5040d5387fc3a3106c01703cd935bb448db8bd9058cad514739d0fab97566626d27d005cf04481743816afc0dd21f9509aa3c60e0a7858cd7ce576afe51269cb1d12886883f294639c8239412d161d8142f447aeb4c85aa93051156e4f163e2458b6af7ff301126ed9b06108d9cddad8fd1e29cd50777f06723d36f2630182a9ea0108a9db7b4ad455d38b31a0bd8c47b8c234aa857ddb0a4a8f251c522d5970cf783d4a1156aed441f1112f188bd561d927ee2fb6071663964286df1335bc7fc6029236ed123f619c05c4d1f8e86cf2815ba6841c408f794f4b5c56d9d9f11a9e1e08bafc1cd6aeac5e58f71b0ff5dc97ed7ce970055bb34969afe24ece01a96c4778c9d5909a68d191cd454c01409020830468237d36fb8b322b8e4ae1ce6e79096262b7276a15c4e0fba7a88e5f67581ed1acaa3b89fe7af062e64168ccd8a791a2338634666a3ae233ac7b124ed1a993ceec65b7eadb5f6630b7362085cb05381721a6e160072a5a79f3041b22d1634c14861682cc1b2f6f3ab0654ccadda8c86febdbf804a4070894b2bd7af35de99d6112ebd166236df04b8a2fd810e5c78a9d00d87b94182d76f3a3754406db254729de3bcf4658c9b40bcf2af8e86af695fdc6a0493a564b58638ae99cad207c29fff1cdb7191a19135fb0d3a491a2b9b1c7326a8ecd871aad6b6cce695d3c4e877268198aea7085ea1f304650957b128072ebf67494a187f5e0393d8bff19d5f90447fd296c53e18732ad33d4c8f8ab5188d9be43530f5daa7433ab075afd8e125172a8da380dc22128b17e7f55c26ec43c3e45539cda3ca4b581160f58442f3a0f642416b797b31e2ca4e67fcad2c6b93ba85f5f57b2e5073945ad0ebbfe4403c26ab3d3b2f5b8cf0fc24357387981da00ee1feefd44f6bc9cfbd6df9f670263d443cbc1c6280ed60e53921ebf370f99c0d775798a61c94548834a28c39d167a1cd777f61d52fbb4d3f14f7bd9e4185960f8a2429ebf8b4e78879f31af4101a662179ea29ad4b9f35191d65a849bd772daa9412d4b8a83502ce6ad43400bcc56ffbbb0d7d8fa92344128803f23cd5290b54e7f5eece892ef3ae1b9785265d5d97de4a678122c573a5836afe3179f84424842855d94e2254bca93f8aa19b1ce3beedb530ca7865da12a7e2df238b71b31916dc1eba8a879805adac6854ce2a7e8d937bb63085b9b1a2aee7b4f500d432f364ffdd8f2a715aab3d5d11c6cd904addb1e09b4faa48a2238dc16dba2f6658bce32ae21af1e3fcf7e3aa4a3a60f1377af2f4fdbe7dd6026d7ac613a52ac2af6de93d854e6c2d952f1fb2323a635c1d92f4702bbfdce110fa33ed795cf61a74131371fa169905e70d6476182ac213b3b5c35f237795edfb05fdcb4e7f2440a54eaf0a029eacc4c3d048dadff5d5fc98eac3fd9470e25f634468437fe39206f72047cd3eb828ae380b704fa11721d98d9ba8b23c7e89d3c0c8815b44bd2634030e68b32d0b4f690b699a5a6bdddfec240ad3c7e1d75fadeb9e60ffd637b232f0e3f5e562e1a511e1189eb1f3458381b7fceee55daf2053b815ac3f167ec1738db8b526f440896b6be56f54c2f5b35bc3d2a5560c643f8c35b6c374711714726de217b710a21eec1ae1d575a591408e891c6409b575b23c392051d8c1b0f67f0ef980496508eb92195528e4d70bdd792010664b4260c85fc5753885995267f32382129fb427bb06ab32fb34637d3a16e9eabd1565da2ca71c967998c64e78f1ba19012715094ae4e8e62358c0aa2f85cdee16031e1e6ca295d52d6cefc8e291d64f60f5ae1363627161d101368a12dcabe55462d41411122ca35d170e5fd02b4b9e50bb32ef198a969a274796d853ee3878f7a531ee0e6775e8f5457690d36832fba85d45089d386c9e0e5e9988bc51423b2e927c85518789d9281b57d4110a698c253c36a0f3c6ee32a3fda0bbd60459133af30786eaeddb7f50c56a0f0b04c1b5471c01e48f773e1f255562d3901a7786c839027f22bb6c9b14978fa5447efdf425c6388e6480774072c94327b571244820f88b71e49bcb1a63c4f87ce6822d16d6bc971007b4b913231bee695e13cef67567714fd83abc352b41762af5f8f362e3254945ee967cdda3929d85937916ed3673a0828a6f7396a24fbac4e4e3a73ebcbe001627ee899cb5a4d40291f9c004c0736a4062b89e3f343abcef570da92802c98317b3aad12fa7e70e02e2f015d823d9efb7368586a3444c314d5cdbc0dc701a2130ccc6d794a10e32254a3347ce150187e5cedcf60c6fc83668d34052417427404810aa19976df1c4acd71f55d75e385cbd64cfc26f46a9e3e8522bcb9afc8c130f9ed7cdb9572b2fae9fe02a1fd33cd292ff8fab298eaf0eb0d96bd176df94d8eceaee3ca751fcd96cce3c6d39abee79195237089f31437451ba1430a2070268fbf91eae510fcec297e5380559b92e2d1c8c9883cc8ba40991c85f9561e3187913e86441ff826b49bc944c5f22aa4fef10df1b110d3490d45de068294b7ba8591da56e9d0b85c7456c05a96aa89f51ad104019ea2984a942f29d981a1e3da511bf3a14d7f055a8cac4be341e73c63dd2b9c7024e018511c22f823be21507fc5d4759134ddde6ded5298efbd574b800743c14190d4023cd9b937aa407138cfb5e570d1406ad10c9c0719761c1da8cbb7cda7f1e94004088b6d19ccc10a72339391e9c700c2771dc494dd1f4ec1e716b2523920098cc5b86cac84695c3014473a92e669e97b28bf599c091a8f7e0689ea443021f51b5b377638fa9636c548d4806e73ba0258c126dec7589e53ed506664d01742629af4b45c5769158bc5d7c6010267bc1e01e0a099de754894d48d2ff1fca524464fd274e20c57c43c0f4942e8ffb3b004c9835c953eda79a7b7905fdfbcc8dc0378e8959f814ad05c805a9cdbbb733dbc723f5cf56adfcdc69b9849a5a64e5bde3eeda21fc51a5f66b03bc8221420257ab9650fa1c1c981754783b7175fead5f072a3c2628a3df808bcc0770003051196e1f9a457f38797fd210189c680f95b142c1e28f744df29490065f3ba7f83f9aa0126f8be921d62791d7161951372a7879eaf0e45ff19f49623d702d5b432d4ece8854f1feb3232e21b62c9ce44898d0032402856b6eadd6fa84db0de01455fc2ceaf34e2e7e3ca432573813d3c470b35b7ff442eccb574161951090ac551f2dcbe45548bdf68c0f5764b31ca5adf31495ef6188cad2837be889f17047e5b7bf1c11d21a9d2d8eede47f6321964592dbc6ee791afc0b9b98b28b0ebb6874edd3715e43fadc403f2588b49e4e2ef9fe7d145635fe1317c9d2e5f2ba193f255a4885b8d004950a8c876c92df364159a1db1293a889986ce651fcd2a6b2b821532cb141e01fc0c6198bbe5ce95ff418806ce2954343d62f694813c931d2df3590859d170cf47951d108e7dc9d954ada6fca54d046e08a676bc0c7efd240c9b294a803808a12300969ec1f4a7d57b49c3dd6645a056e33f8635f673d6530d318e322b17705f637b77c9221cc869d6b2bdf5c2e2f39d595ce2c391684a3258c3303c9d6ee70ca2f004159bca5b2b0d08862552f9d80cdbd9508221f7cc4e0cbe86e976e94349dc8d28ebee43f247e5e0f5246d16ae7222ec053b8d2d29152e08f4599650d3c4e77649225950349a3bda549f699b146ad0cd716113939df6c28b6c933c95bd46cc7872d1716198a00d64a7f4b475b1d2eedff4d62fa1cd5d26c6052acc3845e654969e4ad51fc4bfb5c10b7001a31285f7254577fddcd479af90d6db3f8d2f373b694c7d982c5158c94a8f6dd292fe66a7bfdb36f776327354c79915ab231ad747c0561493914b6e34548d0a5fcfe64f3424ee8919da3569e20a36cde45628cc196fe85e733f0b941f9ef8a487307b1ec8cae9223be20f82b84862a38bf516ea529014a148e3c8bb8096e9e52c01f32c33314e876bfdce92dbf6ee065c64d6ff92d607785a83984fd51260a7e0e753d6e1bf2517b59edfcac58bd7abc2309c0ff27c50742e3a40f81450d9416020f014246f954360020f852369e8dc1debefb7fc04611256d97f278f3ce33fe32f394fe71883d05f73892441a24d65854b459ea918bf9aec5f65415a3bed73db6ca9c556016bd6378156129d3a3732c0f954175018c9790f81f02fc5d3d261e1b418e9f37c8b51f22edc5460db6d23857db66bc434168449cd0c3d181bf7924793ed6b4abd41a367d665a6aef2e88023b0dd573a66ba7dd811f4afa795b86f444edc8e5c67e397cc8db9f07c1ded397cf8f76e3cb7197b2145a67a3c4562003157d8828e259706a40ddbc465b181ae7f5eed65d75e643085dbc97ba3e00c5b1d665b7b68f22523985dc7a6c9bf115865e153820512f47a15b63dfe7d5dcbb33e865d11e3e01de206eabb6b80c183aa18431782137b21f94fdd37c5e4246bfed221e0ac680815ff8796797da4adbb257bc84248dc3290151d1fbc122d3a82f2a8a4ccf6440ed9be0f22475a4ccda155d916217d09c1a6781158e5ee7a0b4ae57b04554bcdb2252dbaed49db14056a7e364d6f06476410c6aa360f77ca79726844ba57059066936410cc17e427966c89615d81ecb1cace5eb77c6a76032b926d714ff7d2137d4a51bf42a6753e83fa226b3192698914f163137a5ec7de83aa25d9557bc9618c6e71ed237299f91e8f0e721582b5aca5b24de920b30699f545bccf835b115b9b2d3630fec9adc1fc855ddff02f4eb41186be803ddf5bc65f12c6073d20466c285bf5caec89a67f52d96251a63eda8c65910537afcf711b1d11dd27d5610a4b92cd877ad9fdde7ede37c51f961b7361740af604bdd5aa087c3f2895bef8aa09216d972212e5d8e33ce89a54dcb3bf4ae58a59fa907650dc9a20518b900a1e107c4679faed45c1c684867b6f2774f4998fd02cb7acf5b67fdb323170082cdc71e5f8f735e160d5fa842279f51f3cf8de3424104d687bed0990c1ee03a1f5ec3e5d7dbabd74fdcfa9d32e8745e3110b4a35bd5ec2805650760841fde9005c6428ac0afc252ee5510849389716baf7dc8fd1e51c72f379a28ff45af537ff29beff4daaee30be56abe47e4ea6f645b449315cdea40baba7c7b63d80ed3adb39b4610a207b6c7ee8ddce396907c17a51ad1b38ebb0d6e83dbe452edb03199871567d7222339def227a6284bb7811a4adb0cc4054613589b1b23a75d525ab047214dba05ec7e53516b2ebc8a191439b57ac814492d908fc3fcf214fd00141a5424f90d6a82cdaf5e7077daa889f0d6130ef2f872dee62ea2318c18349684298f24b29390400bf9aedfd3666ff4bf3727600d30ad0978c3acd7c7d501478c429ddd674846f59012bbbfe56a833fb0b17c649f438cf41935c7874b4b5f50549c8b9498f7a9a6d8160fa505ff0a4080bb9ad7d277abca6be1a7c93653763cf224f7558878b90713e6b6054b5bd90e16806910ece8aa22235d35e8040ae681646347f63850f3ab6faae2dc617639b38d1277dba1b3a06ced38204ac21975901539fb8ae64cda6d42420d4190facec1665c36dc99a892b580719702ac918c2fd9cc1d827f8dac84a4a71a8c7219d36f8654eee5230fc33137c73a59893ec0f0fc225372387c3b128436cb5da532022e0b55b874eebd6ebade3e7bd382eb759aa2ff78d1f7d9045e34f0362d5a1d0fd8641b3233b2f331121b428444b930048e5ea19d4b0306e2651ba2f072983560fed5ca48d95ece0f1b34c6b17898532092ae89378775036cace4c92dbb53351e784d3e29acc6eeb6eaba5e7a5c31331bb99d7f3d01a852b85523a248da4d16bfbeaa9d982bca11a1ca4841d34a5fe78229dceecb3d62dbfcff5fab8a0e8738beacb77bd9e2255cb11aa7284f6e9354ce79ac772db2a74c7181935261144233046c488b342c3e83a3d4c3cb79c19667f403d0e4738e82302bab536dcc44039076899799dc1cd68c14ab5cc086b28e406c97c379c991904128c19a8eba415bff7a715e8921e03536ba8ea7534f1fc84d62f0afafbfcc6865bc5950a08b69e2e0ab8e32541fdb25dd9ba96ae6e5adc34e2cc5974182afe7f6cb7fcf80cb43056a3e8c93d96aff9042d11070951691bef9632a65af35fc7280745451e7d9be00d8759e86ff74a961068a1e51ccd8825c038bc9da53a30179b4dd2cfb66129a0b6acd0787ad3aed8c8e5016f7d2161139a64ccc63b084c70564be65c0888d675920a3ae887761608ab772a6ef674d3e70484d904391ff71b0653563dae6cd479ffa5309c83115e2f5f2b7d01f5b6dddbaa5edee3ae385485dd554b5ea3e2b975e8aa607a228239da3d8348c1006776c9e5dcbe6a3251fac0acbdd6107c53ebd7a978fc6c4ff84e5177bef0aa3b56416977b5c3cbfbe8edff658511ef61fc9540972c174883924bf1587f2fc6d6213ba4ab84cbed04afd59dd7699816539e97c68402725788d327e860a8985c7501caa750b16aa5b43bb5fe61be6e5ae7332c3eb6b98a1c0eaa1e80fcccfb58c489499c9ad2da42d0a2cb16c06a46f0b46cf9604b9e1ef3ff5788174cec3015fe2dcfee0b7750f80d00087fa5d95b688e6d30af766abdbbac92500194558d6e6b90b47df7f86656fe51a0ac6269342a01db45cb2f8d6b335bdde0f92b3773573043a92a2819f3781d58ede52eb1c357b07c679ef2cefa777239a55047d9fb121ea3ef74fd38d26a9077dcc1471bb8f1e55b88c26ee17c4d458f5c3540edc1ae87efa50e6fa34e1f0c0b4010e5ee5c2c808a8bbd9371fea3fa9a5a2505b8a3f61a84c860adea40ab5126540aac591cd61246c7c0e4b9849a321cf196cfe3de3dcc3db43812f53a93e488ed0c7deda2fb8c5e0b2372c6582b865ccea2c4c4dcac5b16ddd498082d453f5f44d09898f17521ca984e9e17d6ecdd7b0661f1e0c5a88a8c5cb94f1b51a18eeb5e17ec9f56d76339f4532e334389db1babebaa1ac43c90186a1b3743980f344ca0317794ebd4c3d5b2306e743152379a8105b72c998a40bd2f9ba6c961ad69f61bf3dbf673a74f5fea72663c818cd9d7df89fe7829dae20995c621af8e2e192de9735f3e9c4ae7fa72bff31f4e5c7a3eb50c7f4f3818862ae4a5b9d87e625d5a6243a070b07c759479bf7c41996b35601549f9c971b4982aab8584a366db4f835f662605babf2a55e6f7c6e46eab6deb22065f36e266ed74f444e5c24790ce202c724ae449b971588280799fbccd52f25af4c372b1695aa6f6cd0889badb5c3e7cad05cd934e250cf52ea9a3e8b3b67555842bb691e591ee8b8d6613458fd564bc5f0f83d8aaeeebbfc225211d25648d65cd26d44b412fae6e7767e2f3e00f2fd2db84fe5ee12e6b44a531432f9b746232a224cfae03a5a29983611d537dc26e986a38c4db676f12014acebee5feec33be236864ee2b502ad3a33b2902c1b95bca2e1930dae1d0821288025b64c7d891dde039917dfab7c0b04bdaee39823bcda3116e24420d350d0bfb4bcc378b55a733691e7f3ecd68cef7c81f99a9ccc805886e7e605b8ff1fbf85d1841334c08be1f16623e15989c558ba3ae45360016c2dd4bf528d80566ce84080d40d64260f77ed131c1bc4abacdf02ec6035292d1eecf4412310a5535561d0e1d4c420ec5974c61a25c642302ecd568b493291324f2d3960f8f8c05c72b2ef558619ad12ec63e4db7a814339da2f4317c520649fa9d44e83407c814c1b49e87d8546cb78f4acf0561136be9bbe0304b4cf973a99cd1f968f43fa302a13f4c4116baa6e219df1ae5c5c7a1f366d338230dab559d6b4669ef923b0b4307dcdbaafe2b319ac21bc258bf358a7cce69fcd0920fa937592bb0ab771c8a54e09c4277956e3d66e6f244dc7a62c43e5f3d96f4783957780d7a29bada719856ce36ce486eee7b14e3c4527e348fbaa805e40667d806ddec84450f1575033e0a6550ed1fdcec1f29e110bed4d2843cf76bb65082088a38723cbf95692a9bb7097e66f1087724f3845b9ae8882caf422bc86d3511791772f1211d1f9b398fc7efd4efbe572f1ccfed297221cb27d4fbd77f89d975954fa7296de7c60322bd34f57d8d262da6e9429ffad45621996957f27254e1b159e5c496018c80a99f7f49864d06ac7e9568675a787a7ae55e04217298ad8eb4d912ad6d3d6aa9bfdef5f4fba1779a5be7ce28d3a4bd748f18abae9744481ab0691903020a0aff016af78c61947e9b49dc64fba3ddb5b1408613bf7ebb7f95ae67b86f51cb2b1d5782aab625d2e661971af10254e6b1bc495f4c8713818df824f7a030706a7363a03ec03577c13de6cb05ed14a47a0e81b09976291fa9509b9e5560e056640a3c0e1d4dc14de5e18c7486869cf32769b117a0f4f6abfc9ec44a7951479227b994146fb8732ac21d93191cc0754fef5388fa12a30e040c71eccce9706f9e052218fbb2bfd6f36b675fca6bf9d89b8c8214146d5edcff3c798a59e3e070a14f5ad0d0c6e21e12c1d883398e601be79fd5772f7172902a8d139f634830186f60e1d7a6644041d41037c86d51386b145f9c4a97defc804fb91e56fbae93e80a81ceceed6a27315dce4c357617cba658ce6cacea601c8da0ed9b1fe8390b2ab745967519f7566a467ca01cd4cbd1f601e061a125e8eb9b6cb407ee8a668234f2ecd8360ff4190157dc5df4fa54e380a36d3a272888d90a253bf4d7253b3d88b9af0411985e16ed6bca6fc37b99419fcc75605a33f92e18f389eb11eb82da7f0d6b490a4aa3c48e2da3de8caf75115ccf721acb5f0b0a12b6e61c69fa603981c19bb5a0735061a8d35434fe33acdea08fe3a5f25aa4adae833eee0d3b13c689a23c349803331d9acccc8c263f2f543e7d3c67a369d343a45c9e37b6b554b2d043f6640e9487da3ca463db4647dbb74e64fed44f348d93d49ba4b53f586d88baeccc4f28396302b23516266bc0c4b4c71169e69e2555a22f946f480ad1b62dff3b6972a2656927294abd259fd05d0ff218179659791d1e4bd710ba1c4e05187a90e18bdfe3db318e63199c26a08f0d037d43035d7449502ce64d900304d9b01ce007d1c97ed0561cfca433583e650efbe8179761d6416a454c43bb17948dadae0a3ea121b486211c25497f4cd3570273e0b99cafa260d6b206c7a4ded6bb56cc0ed20f78027c506b9d33ad46e0eb4c208201f04468601bc04a8b4d122f0c40ade260930f09e2aa03f186769ec8e69e80b55812d755c0fa40f23b2897d1743e45ea2e08553ff0b572208d66e0ae0b6e7373f9c3beec6be958dc07d32d1be33fbe655b688d68c4ab739d2d45c7be79109d916086290603aafd6f4dd4992c0dcc84d8f35023c9d8d5658ec1f9a445599419be71b2a707c7cfc13e675bb224fc17a0107407e0c409e5a7c84f0253998dc498229464d9fd6256a793e32a4f0a55ca6747c760e54d4c0c0b59751477680413941bbdc610dea840ad4ffc52baf9b1c1edf5501b9ec8eec145c283cf4731321fa0b0e426fdc143f6a9a6a89bd8d7a392709770bd4bfc36a0022aaf08798ff0d238ce66eca8c29cbec179d5e118886698b0168f0daab18840c4c13c91c338ccc9cf7496fea30d6166da46d9acd1ce052f628fa60e47e547d6f6f8f87894b13a4b93b98e9a73a7d47370a1caadb699520d0ac5fd4beb09ad6dd38dcfca6e9296be1d9bb175366ea6ecaecf30af7876198a7a37bafe605a81670cb81a32bdae16c3612df7b6fb72e2d969ed80d6f60f7985f44aa5a07610509a75293296140ecfb15f3198a6914d3f6821308bfc60ed5bf9aa5d7d28a402c449cc0e5b04f139bebceca8a7f5075efbeea157a4850ff1aefa8e252e9c35f511c2a1c81a1657aeacca39708fcd10fe4f4407bafce9f9ca7462624bcb1d07208d8651ea1f053428c7cdfedca9f86e9bb1ae88b6788ef4bf88905340b9b1268965007be4be4bb91f7cd657459c56b1ece51d95bf94f17cfdf40ed1414508ca8b5e4bff4703077c3c68a982e20458ed0f8de01f56cb1701df830662be65c84b549590c228ee6cb9028e551430f6ff4a9f82e95b40ccbfe87b914590c9aea13f165e3c02b37234af5905860f1c9a1aca395e6ae86c70dddfd69c093bd7b9513a6dddbf4c4bbec6723412530f82f3ce5b6c39d2cac08c2bc04df1073e63cd3fb959fac929e857c1966bd472cd51e553a840a68ce75b2d095c0b1578318b29e97e2daa6405451fc010d24524b887c3bd94c441e48abf4eea70f312f49e2b2bc077ea28935c1d25c0b8a5278300627695fca1d382b7c5088eb4db76dd154a9ee1cc7aaffc96cb6515974f0c8d027485568147ac70aa69bc2ab05ac8e34c3ab651985efdaa59d215d841127f703b6c61cbf355faf6be893e879233cf0db4c92404efa6634423a9682ab9027f96436ad13fc6119c3ab7e075ffa24219590f28fd895d77be5c6af1912862c42b703cd8cc486c76f5a0854d520562f1e782b195a970cb66278165e758e33ee6ab9c4e9b5478e570768de48b2422a1dcef299738d124ff7318556f687c30bba558c6b38177c2d8dd782c28007243eb48169bb9560cb9a01326b05d034eb69882705b85ce9cf0ecb8e8d109ff9ab5189fb036fe730c2332e8cbf5626299db7ab175484b1671bd60ff912d46daf249a2f4e71fa58da925d1db4923acea9e5bd5d4a1cd546e42781f8809c79619130d7d948ee382b80334be432ac28d5defbc16e4ea7f3156db883fc957b4d0965b7f2e6ff98c402be8d712cf9d9d4fd9102ca405e6dd0a904c5a0c33f8c54783db5a7cd2de9b3b6c0f23f4fa66677c7fd1879e3e523d85e244f92af56895513bc400f768ffed5780d0477d024cd8f32015e4dc3291ac758f469c4a3ff98a0858a5407d7581e45c49d200a936e0435b4a90c034226426489c885a5646ce1aa3f64874cbe0ee1266027c5ccf92c0ec4d08ea21c2d4f35d4855e00b49ffd7261660fe1b1f1af1c0ee8518befbdf6b0bdec784353244db87d200e6f6982eca2769c711417211cb7af05b57ddb188481c1c97fb238290586494c0c765cc5619a4ebfa2f6b0d8f64a2e7af816993e5ee148712c782a68ff384cb7804faa37f83b12f7ed9d8fcf928989e693aece2b2ea31ffbde84523807a56072e872e42ee1a59461dfc5bd89e7262422648848707dc0fbd7bf35da8c0c6498345a0102c9a93b0908f3410cb38605c8c6bb47baab6c453f195a1fe27bc8dff2135c447012a09cd3e817e9904a4271eab97158bf81651e52d9a74deaf5c24e4008c0b3c479bfb4bd33235d65ccaf4115b2fcd1039bef5b3ef2217f2626da1853aee5473cd6d26e0efd5c85f05fddc1787e8a4fe9d943fdad4b48d254f963aa9bdcb2f4d6c571dee211e3f406cafa93f795bb737a8876971d2a4e585bdef38ef2056e8efd88632a0ebe2f75b38706b918bf15e6d37dd386ae5fe18df86aa84c1fe0d69e909df982b2be07bcd9cfde2ef2fb1273b286f824c54bb395dcb8ca2ed4e41ce4740ba2992b7ffa09de12488c19fd8818d2b0da0aa0d3029d07c22efb6ce09ead74481d8bc6c4d3f370f84b61441a348a32027a9d8fa4dcbafa425870aad8864299a2dce1e35e2c0accc3088610c30dcf3cd79ece4d861894e2806099e93a5ac6dffa961c2451f135f0adb32605910112c2bac4f0511245203fc635d89464309cc49bab5199243b4ac1c2cffd994b2698f0dd589c5c8c78f4fa3fb5d28c5c3fc055f87af55ef03927f8c3ff19a4f1e2f59d6e0a196fa53137b733403ef3a58c828057b18f4248fc1406024dc0870dc6cf6dd4770d12372940c31d7849c683b70a3098fa43874c22416ba7774616375ebaec2694e719561e6e65b0c4724e3c3876cd46a17243c368f1a37ef4584ce88de975f0cb4b04918228be4e636b04510d5eaaa2da0ac6cd9d60bb03b548c9cbf4609e5c6b7ab4da755b08ffbeeaf484c58b2294a02eeb4a6211204e0bb74ff6b3af55dffd2ee0cf6f42caef40584ff3fbe8a4d4f4d5fff3a65f0652cbdb7db0e1a0b3f5555c705bc7524ace8c0ff816ef469fc78e1e5289f61dbffece76b90b8d902f0bd592013503593c7eb7c0682ca8ffae320dd8e84045798a40c4a3ce89f2d67f0843b715e4f2f79e4f87b01f46016bbdc90304ff134ecfa501bbe9fefc92ddc45c75944e54ba3f273a2e3ecd210e2fb924141d371be42f69793edb3dd33679f5004ea90e54f993e70f2555e0742f572b7835e5b5fd707fced0488ee8114fddc05d0de01a291060492886fc72f70b110fed6026484c6ff6a48b89afc8cf08e97a63d63be98759adf1098ae74581e92c14636b557d69f22e1afc8c0b3de5fd29c7f39ae40acdf5e40730bc49164c588aaea3626a87352e3fa1b4f3a5c1785a11fa6468c1e402198b091ccd961f807277b9c2c1a6ba606c20db2ff8e50c5e372e14bd50471356b08eff77d6aa534d79de206def5ae4b6b486a380541dad0893f2c642965b632a8cb87e6a808f53038e3121cc0ad04ab514930d97e503f077874025ac186a7304b43f2c6679700fb024cacab0a1f85383b4252f03dda06875796b475585061cb1c8a419359722e6429c1b811875c07d8cf60b47052524ed0c7b70cc6cfd43ccf8456d11dff59eccd856b61186c414cb86173669546f8f7d9b2f8e840e4f60e75437b696eb6c0b2119c9a4b0ddc6762d7e1fe76ad16d01d0f35cd9c199b71be128be549b7b0e4dc9c166d1fd0e1a75a551db39aad9584e529f07999dc0cd87a2bd81028b39772b52e3bbaf3129c59f75c95493996e3aeab9062cbf2132ced22c2a00b21ae3d7ec6d7aeac84158255e4afd4ed6818e29e3d28980960fba439df8e24f91b2707f188956636f1d1c8d9822442af0b8c7b5a25b25b8c2c01a7589bab802e86468cb7650bf10cc9ecc7d1395ba063d70528bb0987c3d96e2d48689122c442954368fc880ebf12fa5895d3e43571260b116dee6fc47e6cc0f87e207f7d2c6818e952c1d33057fdffb3258ba44f5210c9edabbf5068b19daa346cf8bfc30152451671ad17294afc35314505f89ccffc05e999d38c283d605ae9db95486e4d4795c3b4e67e8180f32db74e7a892d91f7056fc3bfb05f2f0efb3a632e405b29c70fef6619d836f158f2f1c5a4ec6f1e32cc913946fbdbc12027b705f6ad77b8fa68bc16b5e3dc049408f834b9ee6524e8b13b5e849b03a2e86f2a8f9e56142cd6ea9b26084db11a19cbc98960cbe83a6ac00da0ca39b10fc7122688f4a1d9762a354eff8c4dbf2ffe332bfb9786711871305e45c58864641459e4605429720efed4568586f0cb7946696d0fe42e3a75d7c56fa7dafee7a8dc1454afa18592fd316feb6d7c7da218d96097693554311b8e7e332ca80e6d4b8c9448d874c126095941357a1a3e854e59b0b3574716719ac9c0bb19d256e03d8aee32cae7d67ba1ed5bdb96322bf8ec75bd02dffd8daef55ed38d8bab2d7147be4b3268e7dac5c11ef4063340f3d1d0d5ae250d6ae5bed3f6eb310c7a0b2b8e56e4fef544c5c8076695c193270b8d1ab0add5a0ca1e00bf2230d0aea4cac900496c7f3787bd0b1fbd449927a9ce71ac9ff4e2ad84b1725c57f4b3ae8f718cb4753ee5d345d98b3626a804e242d913c2eaedaa3c125ec4c8aac84f924a498bbf1aaaf602bce165bf7bc3250af8c349d8b7a0eae730ffd0390aca666937ebeb6a38ee729bb2e03781351ebae3c87109af6f2f6bfcfd5baa1cee6429649fd26a84ff4ac8da82ea6c6adce54f852d6e4ff201ad9190fa8df603e93dbcc26b206a6047249c50ace007be6254dfd508d2b7a205eecfde1f7481004429ae3263f36796</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">è¿™é‡Œè®°å½•æ¯”è¾ƒæœºå¯†çš„ä¸€äº›äº‹æƒ…å“¦ï¼Œéœ€è¦å¯†ç æ‰èƒ½è¿›å…¥!</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> Azure </tag>
            
            <tag> VE éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 SSLO ç®€ä»‹</title>
      <link href="/posts/c775c802b461.html"/>
      <url>/posts/c775c802b461.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.whbblog.cn/img/image-20221206154021424.png" alt="image-20221206154021424"></p><h2 id="ä¸€ã€F5-SSLO-äº§ç”ŸèƒŒæ™¯">ä¸€ã€F5 SSLO äº§ç”ŸèƒŒæ™¯</h2><p>ä¸æ–­å¢åŠ çš„åŠ å¯†æµé‡é˜»ç¢äº† IT å’Œå®‰å…¨è¿è¥ (SecOps) å›¢é˜Ÿä¿æŠ¤å…¶åº”ç”¨ç¨‹åºã€å®¢æˆ·æ•°æ®å’ŒçŸ¥è¯†äº§æƒçš„èƒ½åŠ›ã€‚ä¼ ç»Ÿçš„å®‰å…¨ç½‘å…³ã€ç½‘ç»œé˜²ç«å¢™(ç”šè‡³ä¸‹ä¸€ä»£é˜²ç«å¢™ (NGFW)) å’Œå…¥ä¾µé˜²å¾¡ç³»ç»Ÿ (IPS) å¯¹ SSL/TLS æµé‡è¶Šæ¥è¶Šè§†è€Œä¸è§ã€‚åœ¨ç½‘ç»œé’“é±¼å’Œé±¼å‰å¼ç½‘ç»œé’“é±¼æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…é€šå¸¸å°†å¨èƒéšè—åœ¨åŠ å¯†ç½‘ç«™é“¾æ¥æˆ–åŠ å¯†æœ‰æ•ˆè½½è·é™„ä»¶ä¸­ï¼Œå¹¶åœ¨æ•°æ®æ³„éœ²å’Œé€šä¿¡è¿‡ç¨‹ä¸­ä½¿ç”¨åŠ å¯†é€šé“é€ƒé¿æ£€æµ‹ã€‚</p><p>ä»–ä»¬å°†æ ¹æ®å·²çŸ¥çš„å®‰å…¨äº§å“å·®è·é€‰æ‹©ç‰¹å®šçš„å¯†ç åŸè¯­ï¼Œä»¥å¼ºåˆ¶ç»•è¿‡åŠ å¯†çš„æ¶æ„æµé‡ã€‚SSL/TLS åŠ å¯†çš„å¢é•¿å¯¹ä¼ä¸šæ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰èƒ½å¤Ÿå¤§è§„æ¨¡é«˜æ•ˆæ£€æŸ¥å…¥ç«™å’Œå‡ºç«™ SSL/TLS æµé‡çš„å®‰å…¨å·¥å…·ï¼ŒåŠ å¯†æ”»å‡»å°±æ— æ³•è¢«æ£€æµ‹åˆ°ï¼Œä»è€Œä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå’Œæ•°æ®æš´éœ²äºæ¼æ´ä¸­ã€‚</p><p>ä¸è¿‡ï¼Œå¯¹ SSL/TLS æµé‡çš„å¯è§æ€§å’Œæ£€æŸ¥åªæ˜¯è§¦åŠäº†å®‰å…¨çš„è¡¨é¢ã€‚å¤§å¤šæ•°ç»„ç»‡ç¼ºä¹è·¨ç»„ç»‡å®‰å…¨å †æ ˆä¸­å¸¸è§çš„å¤šä¸ªç°æœ‰å’Œéƒ¨ç½²çš„å®‰å…¨æ£€æŸ¥è®¾å¤‡é›†ä¸­æ§åˆ¶å’Œå®ç°è§£å¯†ç­–ç•¥çš„èƒ½åŠ›ã€‚è®¸å¤šç»„ç»‡æ±‚åŠ©äºèŠèŠ±é“¾è®¾å¤‡æˆ–ç¹ççš„æ‰‹åŠ¨é…ç½®æ¥æ”¯æŒè·¨å®‰å…¨å †æ ˆçš„æ£€æŸ¥â€”å¢åŠ äº†å»¶è¿Ÿã€å¤æ‚æ€§å’Œé£é™©ã€‚</p><p><strong>åŠ å¯†å¨èƒä¿æŠ¤çš„å…³é”®:åŠ å¯†æµé‡çš„å¯è§æ€§å’Œç¼–æ’</strong></p><h2 id="äºŒã€F5-SSLO-ä»‹ç»">äºŒã€F5 SSLO ä»‹ç»</h2><p>F5 SSL Orchestratorï¼ˆSSLOï¼‰æ˜¯ä¸€ç§è®¾è®¡ä¼˜åŒ– SSL æ¶æ„çš„ä¸€ä½“å¼åº”ç”¨è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨å¢å¼º SSL/TLS åŸºç¡€è®¾æ–½ï¼Œæä¾›å¯è§ SSL/TLS åŠ å¯†æµé‡çš„å®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¼˜åŒ–å’Œæœ€å¤§åŒ–æ‚¨ç°æœ‰çš„å®‰å…¨æŠ•èµ„ã€‚SSL Orchestrator æä¾›åŠ¨æ€æœåŠ¡é“¾å’ŒåŸºäºç­–ç•¥çš„æµé‡è½¬å‘ï¼Œå°†åŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½åº”ç”¨äºåŠ å¯†æµé‡å¤„ç†ï¼Œä»¥å…è®¸æ‚¨æ™ºèƒ½åœ°ç®¡ç†æ•´ä¸ªå®‰å…¨æ ˆçš„åŠ å¯†æµé‡ï¼Œç¡®ä¿æœ€ä½³å¯ç”¨æ€§ã€‚</p><p>F5 SSL Orchestrator å¯ä»¥è½»æ¾åœ°ä¸ç°æœ‰æ¶æ„é›†æˆï¼Œå¹¶é›†ä¸­ç®¡ç† SSL/TLS è§£å¯†/é‡åŠ å¯†åŠŸèƒ½ï¼Œåœ¨æ•´ä¸ªå®‰å…¨åŸºç¡€è®¾æ–½ä¸­æä¾›æœ€æ–°çš„SSLåŠ å¯†æŠ€æœ¯ã€‚å€ŸåŠ©SSL Orchestratorçš„é«˜æ€§èƒ½åŠ å¯†å’Œè§£å¯†åŠŸèƒ½ï¼Œæ‚¨çš„ç»„ç»‡å¯ä»¥åˆ©ç”¨ç°æœ‰çš„å®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œåœ¨å¤šä¸ªé˜¶æ®µå¿«é€Ÿå‘ç°éšè—çš„å¨èƒå¹¶é˜»æ­¢æ”»å‡»ã€‚</p><p>F5 SSL Orchestrator ç¡®ä¿åŠ å¯†çš„æµé‡å¯ä»¥è¢«è§£å¯†ï¼Œç”±å®‰å…¨æ§åˆ¶éƒ¨é—¨æ£€æŸ¥ï¼Œç„¶åé‡æ–°åŠ å¯†â€”â€”æä¾›å¢å¼ºçš„å¯è§æ€§ï¼Œä»¥å‡è½»ç©¿è¶Šç½‘ç»œçš„å¨èƒã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥æœ€å¤§é™åº¦åœ°å¢åŠ å¯¹æ¶æ„è½¯ä»¶ã€DLP (data loss prevention)ã€å‹’ç´¢è½¯ä»¶å’Œä¸‹ä¸€ä»£é˜²ç«å¢™(NGFW)çš„å®‰å…¨æœåŠ¡æŠ•èµ„ï¼Œä»è€Œé˜²æ­¢æµå…¥å’Œæµå‡ºçš„å¨èƒï¼ŒåŒ…æ‹¬åˆ©ç”¨ã€å›è°ƒå’Œæ•°æ®æ³„æ¼ã€‚</p><p>F5 SSL Orchestrator æœ€å¤§é™åº¦åœ°æé«˜äº†å„ç§æ£€æŸ¥è®¾å¤‡çš„æ•ˆç‡å’Œæ€§èƒ½ï¼ŒåŒæ—¶ä¿æŒäº†æœ€ä½³çš„å®‰å…¨æ€§ã€‚åŠ¨æ€æµé‡å¯¼å‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.whbblog.cn/img/f5-dynamic-traffic-steering.svg" alt="sslo_traffic"></p><h2 id="ä¸‰ã€F5-SSLO-ä¸»è¦ä¼˜åŠ¿">ä¸‰ã€F5 SSLO ä¸»è¦ä¼˜åŠ¿</h2><h3 id="1ã€ğŸ†-æµé‡å¯è§†åŒ–">1ã€ğŸ† æµé‡å¯è§†åŒ–</h3><p>F5 SSL Orchestrator é€šè¿‡é›†ä¸­è§£å¯†/åŠ å¯†åŠŸèƒ½ï¼Œæ”¯æŒå¯¹SSL/TLSæµé‡çš„å¯è§æ€§ï¼Œä½¿å®‰å…¨æ£€æŸ¥èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°æš´éœ²å¨èƒï¼Œå¹¶é˜»æ­¢ç½‘ç»œé’“é±¼ã€é±¼å‰å¼ç½‘ç»œé’“é±¼ã€å‹’ç´¢è½¯ä»¶ç­‰æ”»å‡»ã€‚æ”¯æŒå¯¹é˜²ç«å¢™ã€IPSsã€anti-malwareã€DLPsã€å®‰å…¨webç½‘å…³(HTTPä»£ç†æœåŠ¡)å’Œå–è¯å·¥å…·ç­‰ç¬¬ä¸‰æ–¹å®‰å…¨è®¾å¤‡çš„æµé‡è¿›è¡Œç­–ç•¥ç®¡ç†å’Œå¯¼å‘ï¼Œä½¿æ‚¨èƒ½å¤Ÿå®ç°å®‰å…¨æŠ•èµ„çš„å…¨éƒ¨ä»·å€¼ã€‚</p><h3 id="2ã€ğŸ…-æé«˜ç°æœ‰å®‰å…¨å·¥å…·çš„å¯ä¼¸ç¼©æ€§å’Œå¯ç”¨æ€§">2ã€ğŸ… æé«˜ç°æœ‰å®‰å…¨å·¥å…·çš„å¯ä¼¸ç¼©æ€§å’Œå¯ç”¨æ€§</h3><p>å…·æœ‰å¤§é‡æµé‡è´Ÿè½½çš„ä¼ä¸šå°†é€šè¿‡åˆ©ç”¨F5 SSL Orchestratorçš„å¥åº·ç›‘è§†ã€è´Ÿè½½å¹³è¡¡å’ŒSSLå¸è½½åŠŸèƒ½æ¥ä¼˜åŒ–å®‰å…¨éƒ¨ç½²ã€‚è¿™äº›åŠŸèƒ½ä½¿æ‚¨çš„å®‰å…¨æŠ•èµ„èƒ½å¤Ÿæ›´å¥½åœ°æ‰©å±•å¹¶åŠ¨æ€åœ°å°†å¤šå±‚å®‰å…¨è®¾å¤‡è¿æ¥èµ·æ¥ï¼Œç‹¬ç«‹åœ°ç›‘æ§å’Œæ‰©å±•å®ƒä»¬ã€‚ä½¿ç”¨æ•…éšœè½¬ç§»ä¿æŠ¤æ‰©å±•ç°æœ‰çš„å·²éƒ¨ç½²å®‰å…¨è®¾å¤‡ï¼Œå¯ä»¥å®ç°æ›´å¥½çš„åˆ©ç”¨ç‡å’ŒæœåŠ¡å¯ç”¨æ€§ã€‚</p><h3 id="3ã€ğŸ¥‡-åŸºäºä¸Šä¸‹æ–‡çš„åŠ¨æ€æœåŠ¡é“¾">3ã€ğŸ¥‡ åŸºäºä¸Šä¸‹æ–‡çš„åŠ¨æ€æœåŠ¡é“¾</h3><p>F5 SSL Orchestrator åŠ¨æ€é“¾å®‰å…¨æœåŠ¡ï¼ŒåŒ…æ‹¬åç—…æ¯’/åæ¶æ„è½¯ä»¶äº§å“ã€å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ(IDS)ã€IPSsã€ngfwã€å®‰å…¨webç½‘å…³(HTTPä»£ç†æœåŠ¡)å’Œdlpç­‰ã€‚å®ƒåˆ©ç”¨åˆ†ç±»æŒ‡æ ‡(å¦‚åŸŸåã€å†…å®¹ç±»åˆ«ã€åœ°ç†ä½ç½®ã€IPä¿¡èª‰)å’Œå…¶ä»–ç­–ç•¥æ¥ç¡®å®šæ˜¯å¦è§£å¯†æµé‡ä»¥åŠåº”è¯¥å°†æµé‡å‘é€ç»™å“ªäº›æœåŠ¡ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20221206163924819.png" alt="image-20221206163924819"></p><p>F5 SSL Orchestrator åˆ©ç”¨å…¶ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ç­–ç•¥å¼•æ“ï¼Œå°†è§£å¯†çš„æµé‡å¼•å¯¼åˆ°é€‚å½“çš„å®‰å…¨æœåŠ¡é“¾ï¼Œå¹¶å¯ä»¥å¯¹æ•æ„Ÿçš„ç”¨æˆ·æµé‡(å¦‚ä¸é‡‘èæˆ–åŒ»ç–—ä¿å¥ç›¸å…³çš„æµé‡)æ‰§è¡Œæ™ºèƒ½ç»•è¿‡ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20221206164454894.png" alt="image-20221206164454894"></p><h3 id="4ã€ğŸ¥ˆ-ä½¿ç”¨æ˜“äºé›†æˆçš„çµæ´»é€‰é¡¹è¿›è¡Œéƒ¨ç½²">4ã€ğŸ¥ˆ ä½¿ç”¨æ˜“äºé›†æˆçš„çµæ´»é€‰é¡¹è¿›è¡Œéƒ¨ç½²</h3><p>F5 SSL Orchestrator æ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°å³ä½¿æ˜¯æœ€å¤æ‚çš„ä½“ç³»ç»“æ„ä¸­ã€‚è¿™é›†ä¸­äº†SSL/TLSè§£å¯†/é‡åŠ å¯†æœåŠ¡ï¼Œå¹¶åœ¨æ•´ä¸ªå®‰å…¨åŸºç¡€è®¾æ–½ä¸­æä¾›æœ€æ–°çš„åŠ å¯†æŠ€æœ¯ã€‚å®ƒæ¶ˆé™¤äº†æ‚¨çš„ç»„ç»‡é‡æ–°æ„å»ºç½‘ç»œä»¥æ”¯æŒåŠ å¯†æµé‡çš„å¯è§æ€§ã€ç¼–æ’å’Œæœ‰æ•ˆåœ°å°†æµé‡è·¯ç”±åˆ°é€‚å½“çš„å®‰å…¨æœåŠ¡çš„éœ€è¦ï¼Œæ­¤å¤–è¿˜å¯ä»¥åŠ¨æ€åœ°é“¾æ¥é€‚å½“çš„å®‰å…¨æœåŠ¡ã€‚è¿™æœ‰åŠ©äºæ›´å¥½åœ°åˆ©ç”¨ã€ä¿å­˜å’Œé˜²èŒƒæ‚¨çš„å®‰å…¨è§£å†³æ–¹æ¡ˆæŠ•èµ„ã€‚æ­¤å¤–ï¼ŒSSL Orchestrator è¿˜åŒ…æ‹¬ä¸€ä¸ªå¾ªåºæ¸è¿›çš„ Guided Configurationï¼Œä»¥å¸®åŠ©æ‚¨çš„ IT æˆ– SecOps å›¢é˜Ÿåœ¨ç°æœ‰ä½“ç³»ç»“æ„å’Œç°æœ‰å®‰å…¨è§£å†³æ–¹æ¡ˆä¸­é€»è¾‘åœ°å®Œæˆéƒ¨ç½²ã€‚Guided Configuration ç®€åŒ–äº† SSL Orchestrator çš„éƒ¨ç½²ï¼Œå¹¶ä½¿æ‚¨å’Œæ‚¨çš„ç»„ç»‡èƒ½å¤Ÿæ›´å¥½ã€æ›´å¿«åœ°å—åˆ°ä¿æŠ¤ï¼Œå…å—åŠ å¯†å¨èƒçš„å†²å‡»ã€‚</p><h3 id="5ã€ğŸ¥‰-å®¡è§†ä¸‹ä¸€ä»£åŠ å¯†åè®®">5ã€ğŸ¥‰ å®¡è§†ä¸‹ä¸€ä»£åŠ å¯†åè®®</h3><p>ä¸‹ä¸€ä»£åŠ å¯†åè®®æ­£åœ¨éšç€ä¸šç•Œæœ€ä½³å®è·µçš„å‘å±•è€Œå‘å±•ï¼Œä»¥å¢å¼ºå®‰å…¨æ€§å’Œéšç§æ€§ã€‚æ–°å‡ºç°çš„æ ‡å‡†é¼“åŠ±å¿«é€Ÿé‡‡ç”¨ SSL å‰å‘ä¿å¯†ä»¥æé«˜ç½‘ç»œå®‰å…¨æ€§ã€‚å‘ä¸‹ä¸€ä»£åŠ å¯†çš„è¿‡æ¸¡ä¼šæ‰“ç ´è¢«åŠ¨çš„SSLè®¾å¤‡ï¼Œç»•è¿‡ä½ çš„å®‰å…¨æ§åˆ¶ï¼Œå¹¶å°†ä½ ã€ä½ çš„ç½‘ç»œã€ä½ çš„åº”ç”¨ç¨‹åºå’Œä½ çš„æ•°æ®ç½®äºé£é™©ä¹‹ä¸­ã€‚F5 SSL Orchestratorçš„å¤šæ ·åŒ–å¯†ç æ”¯æŒå¯ä»¥åœ¨ä¸æ”¹å˜æ¶æ„çš„æƒ…å†µä¸‹å®ç°æ›´å¤§çš„çµæ´»æ€§ï¼Œä»è€Œé˜²æ­¢å‡ºç°æ–°çš„ç›²ç‚¹ã€‚</p><h2 id="å››ã€F5-SSLO-ä¸»è¦æ¶æ„">å››ã€F5 SSLO ä¸»è¦æ¶æ„</h2><p>ä¸åŒçš„ç¯å¢ƒéœ€è¦ä¸åŒçš„ç½‘ç»œå®ç°ã€‚è€Œæ¶æ„æœ‰äº›å¯ä»¥è½»æ¾æ”¯æŒç¬¬ 3 å±‚ï¼ˆè·¯ç”±ï¼‰çš„ SSL å¯è§æ€§ï¼Œæœ‰äº›åˆ™å¯èƒ½è¦æ±‚å°†è¿™äº›è®¾å¤‡æ’å…¥ç¬¬ 2 å±‚ã€‚SSL ç¼–æ’å™¨å¯ ä½¿ç”¨ä»¥ä¸‹æ‹“æ‰‘æ”¯æŒæ‰€æœ‰è¿™äº›ç½‘ç»œè¦æ±‚ é€‰é¡¹ï¼š</p><ul><li>Inbound reverse proxy</li><li>Outbound transparent proxy</li><li>Existing application</li><li>Outbound explicit proxy</li><li>Inbound layer 2</li><li>Outbound layer 2</li></ul>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> SSLO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</title>
      <link href="/posts/4280e887a011.html"/>
      <url>/posts/4280e887a011.html</url>
      
        <content type="html"><![CDATA[<h1>1.Markdownè¯­æ³•è‡ªå¸¦æ ¼å¼</h1><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdownè¯­æ³•å›¾æ–‡å…¨é¢è¯¦è§£(10åˆ†é’Ÿå­¦ä¼š)</a></p></div><div class="note warning flat"><p>æ³¨æ„ï¼šæ­¤é¡µé¢å¶å°”ä¼šå­˜åœ¨CSSå†²çªé—®é¢˜!</p></div><h2 id="1-1-ä»£ç å—">1.1 ä»£ç å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-2-å¤šçº§æ ‡é¢˜">1.2 å¤šçº§æ ‡é¢˜</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>è§æœ¬æ–‡ç« æ ‡é¢˜!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-3-æ–‡å­—æ ·å¼">1.3 æ–‡å­—æ ·å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>ä¸‹åˆ’çº¿æ¼”ç¤º<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="strong">**åŠ ç²—**</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="emphasis">*æ–œä½“*</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬<span class="code">`é«˜äº®`</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬~~åˆ é™¤~~çº¿æ¼”ç¤º</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5å·å­—<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;é»‘ä½“&quot;</span>&gt;</span></span>é»‘ä½“<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>è“è‰²<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p><u>ä¸‹åˆ’çº¿æ¼”ç¤º</u></p><p>æ–‡å­—<strong>åŠ ç²—</strong>æ¼”ç¤º</p><p>æ–‡å­—<em>æ–œä½“</em>æ¼”ç¤º</p><p>æ–‡æœ¬<code>é«˜äº®</code>æ¼”ç¤º</p><p>æ–‡æœ¬<s>åˆ é™¤</s>çº¿æ¼”ç¤º</p><p><font size = 5>5å·å­—</font><br><font face="é»‘ä½“">é»‘ä½“</font><br><font color=blue>è“è‰²</font></p><table><tr><td bgcolor=MistyRose>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>ä¸Šè¿°è¦ç‚¹å¯å‚è€ƒ:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">ã€Markdownè¯­æ³•ã€‘å­—ä½“é¢œè‰²å¤§å°åŠæ–‡å­—åº•è‰²è®¾ç½®</a></p></div><h2 id="1-4-å¼•ç”¨">1.4 å¼•ç”¨</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; äºŒçº§å¼•ç”¨æ¼”ç¤º</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;å¤–é”®</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;äº‹åŠ¡</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**è¡Œçº§é”**</span>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><blockquote><p>Java<br>äºŒçº§å¼•ç”¨æ¼”ç¤º<br>MySQL</p><blockquote><p>å¤–é”®</p><p>äº‹åŠ¡</p><p><strong>è¡Œçº§é”</strong>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</p></blockquote><p>â€¦</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-5-åˆ†å‰²çº¿">1.5 åˆ†å‰²çº¿</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><hr><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-6-åˆ—è¡¨-è·Ÿç©ºæ ¼éƒ½å¯ä»¥">1.6 åˆ—è¡¨(*,+,-è·Ÿç©ºæ ¼éƒ½å¯ä»¥)</h2><h3 id="1-6-1-æ— åºåˆ—è¡¨">1.6.1 æ— åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-6-2-æœ‰åºåˆ—è¡¨">1.6.2 æœ‰åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æ³¨æ„åé¢æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-7-å›¾ç‰‡">1.7 å›¾ç‰‡</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æœ¬åœ°å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç¤ºä¾‹å›¾ç‰‡&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># åœ¨çº¿å›¾ç‰‡</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>æœ¬åœ°å›¾ç‰‡:<br><img src="/assets/pusheencode.webp" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;" /><br>åœ¨çº¿å›¾ç‰‡:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-8-è¡¨æ ¼">1.8 è¡¨æ ¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| é¡¹ç›®æ ‡å· | èµ„é‡‘     | å¤‡æ³¨ |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100ï¼Œ000 | æ—    |</span><br><span class="line">| 2        | 200ï¼Œ000 | æ—    |</span><br><span class="line">| 3        | 300,600  | é‡è¦ |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th>é¡¹ç›®æ ‡å·</th><th>èµ„é‡‘</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>1</td><td>100ï¼Œ000</td><td>æ— </td></tr><tr><td>2</td><td>200ï¼Œ000</td><td>æ— </td></tr><tr><td>3</td><td>300,600</td><td>é‡è¦</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-9-å…¬å¼">1.9 å…¬å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>$$<br>\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.<br>$$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1>2.Butterflyå¤–æŒ‚æ ‡ç­¾</h1><div class="note info flat"><p>è¿™éƒ¨åˆ†å‚è€ƒå®‰çŸ¥é±¼:<a href="https://anzhiy.cn/posts/7d58.html">åŸºäºButterflyçš„å¤–æŒ‚æ ‡ç­¾å¼•å…¥</a></p></div><h2 id="2-1-è¡Œå†…æ–‡æœ¬æ ·å¼-text">2.1 è¡Œå†…æ–‡æœ¬æ ·å¼ text</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% emp æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% wavy æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% del æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% kbd æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% psw æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-2-è¡Œå†…æ–‡æœ¬-span">2.2 è¡Œå†…æ–‡æœ¬ span</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-3-æ®µè½æ–‡æœ¬-p">2.3 æ®µè½æ–‡æœ¬ p</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<p class='p red'>çº¢è‰²</p>ã€<p class='p yellow'>é»„è‰²</p>ã€<p class='p green'>ç»¿è‰²</p>ã€<p class='p cyan'>é’è‰²</p>ã€<p class='p blue'>è“è‰²</p>ã€<p class='p gray'>ç°è‰²</p>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-4-å¼•ç”¨note">2.4 å¼•ç”¨note</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">é€šç”¨é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">è¯­æ³•æ ¼å¼</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -5">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># è‡ªå¸¦icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># å¤–éƒ¨icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.è‡ªå¸¦icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / primary / success / info / warning / danger ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘ä¸æ˜¾ç¤º icon</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><p>2.å¤–éƒ¨icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / blue / pink / red / purple / orange / green ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯é…ç½®è‡ªå®šä¹‰ icon (åªæ”¯æŒ fontawesome å›¾æ ‡, ä¹Ÿå¯ä»¥é…ç½® no-icon )</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -5"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note simple"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default simple"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary simple"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success simple"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info simple"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning simple"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger simple"><p>danger æç¤ºå—æ ‡ç­¾</p></div>2.`modern`æ ·å¼<div class="note modern"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default modern"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary modern"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success modern"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning modern"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger modern"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note disabled"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default disabled"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary disabled"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success disabled"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info disabled"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning disabled"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger disabled"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default no-icon flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary no-icon flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success no-icon flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info no-icon flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning no-icon flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger no-icon flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-5-ä¸Šæ ‡æ ‡ç­¾-tip">2.5 ä¸Šæ ‡æ ‡ç­¾ tip</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>è‡ªå®šä¹‰å›¾æ ‡</code>: æ”¯æŒfontawesomeã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-6-åŠ¨æ€æ ‡ç­¾-anima">2.6 åŠ¨æ€æ ‡ç­¾ anima</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><div class="note info flat"><ol><li>å°†æ‰€éœ€çš„CSSç±»æ·»åŠ åˆ°å›¾æ ‡ï¼ˆæˆ–DOMä¸­çš„ä»»ä½•å…ƒç´ ï¼‰ã€‚</li><li>å¯¹äºçˆ¶çº§æ‚¬åœæ ·å¼ï¼Œéœ€è¦ç»™ç›®æ ‡å…ƒç´ æ·»åŠ æŒ‡å®šCSSç±»ï¼ŒåŒæ—¶è¿˜è¦ç»™ç›®æ ‡å…ƒç´ çš„çˆ¶çº§å…ƒç´ æ·»åŠ CSSç±»<code>faa-parent animated-hover</code>ã€‚ï¼ˆè¯¦æƒ…è§ç¤ºä¾‹åŠç¤ºä¾‹æºç ï¼‰<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>å¯ä»¥é€šè¿‡ç»™ç›®æ ‡å…ƒç´ æ·»åŠ CSSç±»<code>faa-fast</code>æˆ–<code>faa-slow</code>æ¥æ§åˆ¶åŠ¨ç”»å¿«æ…¢ã€‚</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-7-å¤é€‰åˆ—è¡¨-checkbox">2.7 å¤é€‰åˆ—è¡¨ checkbox</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: plus, minus, times</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-8-å•é€‰åˆ—è¡¨-radio">2.8 å•é€‰åˆ—è¡¨ radio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-9-æ—¶é—´è½´-timeline">2.9 æ—¶é—´è½´ timeline</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´çº¿æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰[,color] %&#125;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>title</code>:æ ‡é¢˜/æ—¶é—´çº¿</li><li><code>color</code>:<code>timeline</code>é¢œè‰²:default(ç•™ç©º) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-10-é“¾æ¥å¡ç‰‡-link">2.10 é“¾æ¥å¡ç‰‡ link</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link ç³–æœå±‹æ•™ç¨‹è´´, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="tag link"><a class="link-card" title="ç³–æœå±‹æ•™ç¨‹è´´" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">ç³–æœå±‹æ•™ç¨‹è´´</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-11-æŒ‰é’®-btns">2.11 æŒ‰é’® btns</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns æ ·å¼å‚æ•° %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>åœ†è§’æ ·å¼ï¼šrounded, circle</li><li>å¢åŠ æ–‡å­—æ ·å¼ï¼šå¯ä»¥åœ¨å®¹å™¨å†…å¢åŠ  <code>&lt;b&gt;</code>æ ‡é¢˜<code>&lt;/b&gt;</code>å’Œ<code>&lt;p&gt;</code>æè¿°æ–‡å­—<code>&lt;/p&gt;</code></li><li>å¸ƒå±€æ–¹å¼ï¼š<br>é»˜è®¤ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé€‚åˆè§†é‡å†…åªæœ‰ä¸€ä¸¤ä¸ªçš„æƒ…å†µã€‚</li></ol><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>wide</td><td>å®½ä¸€ç‚¹çš„æŒ‰é’®</td></tr><tr><td>fill</td><td>å¡«å……å¸ƒå±€ï¼Œè‡ªåŠ¨é“ºæ»¡è‡³å°‘ä¸€è¡Œï¼Œå¤šäº†ä¼šæ¢è¡Œ</td></tr><tr><td>center</td><td>å±…ä¸­ï¼ŒæŒ‰é’®ä¹‹é—´æ˜¯å›ºå®šé—´è·</td></tr><tr><td>around</td><td>å±…ä¸­åˆ†æ•£</td></tr><tr><td>grid2</td><td>ç­‰å®½æœ€å¤š2åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid3</td><td>ç­‰å®½æœ€å¤š3åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid4</td><td>ç­‰å®½æœ€å¤š4åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid5</td><td>ç­‰å®½æœ€å¤š5åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell ä¸‹è½½æºç , /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, ä¸“ä¸šç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, å…è´¹ç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®<div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fas fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fas fa-book-open'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p red'>ä¸“ä¸šç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p green'>å…è´¹ç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-12-githubå¡ç‰‡-ghcard">2.12 githubå¡ç‰‡ ghcard</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard ç”¨æˆ·å, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% ghcard ç”¨æˆ·å/ä»“åº“, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>ä½¿ç”¨<code>,</code>åˆ†å‰²å„ä¸ªå‚æ•°ã€‚å†™æ³•ä¸ºï¼š<code>å‚æ•°å=å‚æ•°å€¼</code><br>ä»¥ä¸‹åªå†™å‡ ä¸ªå¸¸ç”¨å‚æ•°å€¼ã€‚</p><table><thead><tr><th><strong>å‚æ•°å</strong></th><th>å–å€¼</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>éšè—æŒ‡å®šç»Ÿè®¡</td></tr><tr><td>count_private</td><td>true</td><td>å°†ç§äººé¡¹ç›®è´¡çŒ®æ·»åŠ åˆ°æ€»æäº¤è®¡æ•°ä¸­</td></tr><tr><td>show_icons</td><td>true</td><td>æ˜¾ç¤ºå›¾æ ‡</td></tr><tr><td>theme</td><td>æŸ¥é˜…:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>ä¸»é¢˜</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-13-githubå¾½æ ‡-ghbdage">2.13 githubå¾½æ ‡ ghbdage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>left</code>ï¼šå¾½æ ‡å·¦è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ã€‚</li><li><code>right</code>: å¾½æ ‡å³è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ï¼Œ</li><li><code>logo</code>ï¼šå¾½æ ‡å›¾æ ‡ï¼Œå›¾æ ‡åç§°è¯¦è§<a href="https://simpleicons.org/">simpleicons</a>ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>color</code>ï¼šå¾½æ ‡å³è¾¹çš„é¢œè‰²ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>link</code>ï¼šæŒ‡å‘çš„é“¾æ¥ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>title</code>ï¼šå¾½æ ‡çš„é¢å¤–ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–SEOï¼Œä½†<code>object</code>æ ‡ç­¾ä¸ä¼šåƒ<code>a</code>æ ‡ç­¾ä¸€æ ·åœ¨é¼ æ ‡æ‚¬åœæ˜¾ç¤º<code>title</code>ä¿¡æ¯ã€‚</li><li><code>option</code>ï¼šè‡ªå®šä¹‰å‚æ•°ï¼Œæ”¯æŒ<a href="https://shields.io/">shields.io</a>çš„å…¨éƒ¨APIå‚æ•°æ”¯æŒï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚çœ‹ä¸Šæ–‡ä¸­çš„æ‹“å±•å†™æ³•ç¤ºä¾‹ã€‚å½¢å¼ä¸º<code>name1=value2&amp;name2=value2</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-14-ç½‘ç«™å¡ç‰‡-sites">2.14 ç½‘ç«™å¡ç‰‡ sites</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=ç®€çº¦é£æ ¼ %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">ç®€çº¦é£æ ¼</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-15-è¡Œå†…å›¾ç‰‡-inlineimage">2.15 è¡Œå†…å›¾ç‰‡ inlineimage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage å›¾ç‰‡é“¾æ¥, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é«˜åº¦</code>ï¼šheight=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-16-å•å¼ å›¾ç‰‡-image">2.16 å•å¼ å›¾ç‰‡ image</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image é“¾æ¥, width=å®½åº¦ï¼ˆå¯é€‰ï¼‰, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰, alt=æè¿°ï¼ˆå¯é€‰ï¼‰, bg=å ä½é¢œè‰²ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>å›¾ç‰‡å®½åº¦é«˜åº¦ï¼šwidth=300px, height=32px</li><li>å›¾ç‰‡æè¿°ï¼šalt=å›¾ç‰‡æè¿°ï¼ˆbutterflyéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯å›¾ç‰‡æè¿°ï¼‰</li><li>å ä½èƒŒæ™¯è‰²ï¼šbg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>2.æŒ‡å®šå®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.æ·»åŠ æè¿°ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>2..æŒ‡å®šå®½åº¦<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚" style="width:400px;"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ" style="width:400px;"/></div><span class="image-caption">ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-17-éŸ³é¢‘-audio">2.17 éŸ³é¢‘ audio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio éŸ³é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-18-è§†é¢‘-video">2.18 è§†é¢‘ video</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video è§†é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å¯¹é½æ–¹å‘</code>ï¼šleft, center, right</li><li><code>åˆ—æ•°</code>ï¼šé€—å·åé¢ç›´æ¥å†™åˆ—æ•°ï¼Œæ”¯æŒ 1 ï½ 4 åˆ—ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.100%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.100%å®½åº¦</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%å®½åº¦<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%å®½åº¦<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-19-ç›¸å†Œ-gallery">2.19 ç›¸å†Œ gallery</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown åœ–ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>gallerygroup ç›¸å†Œå›¾åº“</li></ul><table><thead><tr><th>å‚æ•°å</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>name</td><td>å›¾åº“åå­—</td></tr><tr><td>description</td><td>å›¾åº“æè¿°</td></tr><tr><td>link</td><td>é“¾æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</td></tr><tr><td>img-url</td><td>å›¾åº“å°é¢</td></tr></tbody></table><ul><li><p>gallery ç›¸å†Œ</p><p>åŒºåˆ«äºæ—§ç‰ˆçš„Galleryç›¸å†Œ,æ–°çš„Galleryç›¸å†Œä¼šè‡ªåŠ¨æ ¹æ®å›¾ç‰‡é•¿åº¦è¿›è¡Œæ’ç‰ˆï¼Œä¹¦å†™ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œä¸markdownæ ¼å¼ä¸€æ ·ã€‚å¯æ ¹æ®éœ€è¦æ’å…¥åˆ°ç›¸åº”çš„mdã€‚æ— éœ€å†è‡ªå·±é…ç½®é•¿å®½ã€‚<strong>å»ºè®®åœ¨ç²˜è´´æ—¶æ•…æ„ä½¿ç”¨é•¿çŸ­ã€å¤§å°ã€æ¨ªç«–ä¸ä¸€çš„å›¾ç‰‡</strong>ï¼Œä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚ï¼ˆå°ºå¯¸å®Œå…¨ç›¸åŒçš„å›¾ç‰‡åªä¼šå¹³é“ºè¾“å‡ºï¼Œæ•ˆæœå¾ˆç³Ÿç³•ï¼‰</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹ &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam å“¦å’§å“‡gundamå“’ï¼ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§ &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>å“¦å’§å“‡gundamå“’ï¼</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery ç›¸å†Œ<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-20-æŠ˜å æ¡†-folding">2.20 æŠ˜å æ¡† folding</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ ‡é¢˜ %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab å‚æ•°é…ç½® --><ol><li><p><code>é¢œè‰²</code>ï¼šblue, cyan, green, yellow, red</p></li><li><p><code>çŠ¶æ€</code>ï¼šçŠ¶æ€å¡«å†™ open ä»£è¡¨é»˜è®¤æ‰“å¼€ã€‚</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-21-åˆ†æ -tab">2.21 åˆ†æ  tab</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>Unique name :</p><ul><li><p>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</p></li><li><p>å°†åœ¨#idä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</p></li><li><p>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</p></li><li><p>ä»…å½“å‰å¸–å­/é¡µé¢çš„URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</p></li></ul></li><li><p>[index]:</p><ul><li><p>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</p></li><li><p>å¦‚æœindexä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesomeå›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰</p></li><li><p>å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼›</p></li><li><p>ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™.</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-22-è¯—è¯æ ‡ç­¾-poem">2.22 è¯—è¯æ ‡ç­¾ poem</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><ol><li><code>title</code>ï¼šè¯—è¯æ ‡é¢˜</li><li><code>author</code>ï¼šä½œè€…ï¼Œå¯ä»¥ä¸å†™</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br>æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br>ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br>æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br>èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br>ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br>äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br>ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-23-é˜¿é‡Œå›¾æ ‡-icon">2.23 é˜¿é‡Œå›¾æ ‡ icon</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>icon-xxxx</code>ï¼šè¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</li><li><code>font-size</code>ï¼šè¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-24-ç‰¹æ•ˆæ ‡ç­¾wow">2.24 ç‰¹æ•ˆæ ‡ç­¾wow</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>animate</code>: åŠ¨ç”»æ ·å¼ï¼Œæ•ˆæœè¯¦è§<a href="https://animate.style/">animate.csså‚è€ƒæ–‡æ¡£</a></li><li><code>duration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>delay</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>offset</code>: é€‰å¡«é¡¹ï¼Œå¼€å§‹åŠ¨ç”»çš„è·ç¦»ï¼ˆç›¸å¯¹æµè§ˆå™¨åº•éƒ¨ï¼‰</li><li><code>iteration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»é‡å¤çš„æ¬¡æ•°</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶`5s`ï¼Œé‡å¤`10`æ¬¡ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ã€‚</p></div></div><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶<code>5s</code>ï¼Œé‡å¤<code>10</code>æ¬¡ã€‚</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-25-è¿›åº¦æ¡-progress">2.25  è¿›åº¦æ¡ progress</h2><div class="note info flat"><p>è¿›åº¦æ¡æ ‡ç­¾å‚è€ƒ<a href="https://rongbuqiu.com/jdt.html">æ²‚ä½°å­œçŒ«-ç»™HEXOæ–‡ç« æ·»åŠ å½©è‰²è¿›åº¦æ¡</a>ã€‚<br>æºæ ·å¼æå–è‡ª<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>ä¸»é¢˜ã€‚</p></div><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>width</code>: 0åˆ°100çš„é˜¿æ‹‰ä¼¯æ•°å­—</li><li><code>color</code>: é¢œè‰²ï¼Œå–å€¼æœ‰red,yellow,green,cyan,blue,gray</li><li><code>text</code>:è¿›åº¦æ¡ä¸Šçš„æ–‡å­—å†…å®¹</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-26-æ³¨é‡Š-notation">2.26 æ³¨é‡Š notation</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p><code>label</code>: æ³¨é‡Šè¯æ±‡</p></li><li><p><code>text</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯• ,å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><span class='nota' data-nota='å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ '>æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯•</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-27-æ°”æ³¡æ³¨é‡Š-bubble">2.27 æ°”æ³¡æ³¨é‡Š bubble</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>content</code>: æ³¨é‡Šè¯æ±‡</li><li><code>notation</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</li><li><code>background-color</code>: å¯é€‰ï¼Œæ°”æ³¡èƒŒæ™¯è‰²ã€‚é»˜è®¤ä¸ºâ€œ#71a4e3â€</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„&#123;% bubble å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨,&quot;ä¾‹å¦‚ h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;ï¼Œ&#123;% bubble flexå¸ƒå±€,&quot;Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;,&quot;#ec5830&quot; %&#125;ï¼Œ&#123;% bubble transformå˜æ¢,&quot;transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚&quot;,&quot;#1db675&quot; %&#125;ï¼Œanimationçš„&#123;% bubble è´å¡å°”é€Ÿåº¦æ›²çº¿,&quot;è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹&quot;,&quot;#de4489&quot; %&#125;å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„&#123;% bubble clip-path,&quot;clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚&quot;,&quot;#868fd7&quot; %&#125;å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„<span class="bubble-content">å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">ä¾‹å¦‚ h1 + p {margin-top:50px;}</span></span>ï¼Œ<span class="bubble-content">flexå¸ƒå±€</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;</span></span>ï¼Œ<span class="bubble-content">transformå˜æ¢</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚</span></span>ï¼Œanimationçš„<span class="bubble-content">è´å¡å°”é€Ÿåº¦æ›²çº¿</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹</span></span>å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚</span></span>å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-28-å¼•ç”¨æ–‡çŒ®-reference">2.28 å¼•ç”¨æ–‡çŒ® reference</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>referto å¼•ç”¨ä¸Šæ ‡</p><ul><li><p><code>id</code>: ä¸Šæ ‡åºå·å†…å®¹ï¼Œéœ€ä¸referfromæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç°è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li></ul></li><li><p>referfrom å¼•ç”¨å‡ºå¤„</p><ul><li><p><code>id</code>: åºå·å†…å®¹ï¼Œéœ€ä¸refertoæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç° è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li><li><p><code>url</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®é“¾æ¥ï¼Œå¯çœç•¥</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27; %&#125;ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶&#123;% referto &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27; %&#125;ï¼ŒButterflyä¸»é¢˜&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">æœ¬é¡¹ç›®å‚è€ƒäº†Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27; %&#125;çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<span class="code">`[tag].js`</span>ï¼Œå¹¶é’ˆå¯¹<span class="code">`butterfly`</span>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<span class="code">`[tag].styl`</span>ã€‚åœ¨æ­¤é¸£è°¢<span class="code">`Volantis`</span>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚</span><br><span class="line">ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£&#123;% referto &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27; %&#125;</span><br><span class="line">Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexoä¸­æ–‡æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼ŒButterflyä¸»é¢˜<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><p>æœ¬é¡¹ç›®å‚è€ƒäº†Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<code>[tag].js</code>ï¼Œå¹¶é’ˆå¯¹<code>butterfly</code>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<code>[tag].styl</code>ã€‚åœ¨æ­¤é¸£è°¢<code>Volantis</code>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚<br>ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><br>Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-29-PDFå±•ç¤º">2.29 PDFå±•ç¤º</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf æ–‡ä»¶è·¯å¾„ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ–‡ä»¶è·¯å¾„</code>: å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–è€…æ˜¯åœ¨çº¿é“¾æ¥</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.åœ¨çº¿é“¾æ¥</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>2.åœ¨çº¿é“¾æ¥(è¦æ”¾åˆ°æœ€å¤–å±‚æ‰èƒ½èµ·ä½œç”¨)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-30-Hexo-tag-map-æ’ä»¶">2.30 Hexo-tag-map æ’ä»¶</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + æ ‡ç­¾å€¼ + ç»åº¦ + çº¬åº¦ + æ–‡æœ¬ + ç¼©æ”¾ç­‰çº§ + å®½ + é«˜ + é»˜è®¤å›¾å±‚ + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th style="text-align:center">åœ°å›¾å</th><th style="text-align:center">æ ‡ç­¾å€¼ &lt;å¿…å¡«&gt;</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">ç¼©æ”¾ç­‰çº§ (é»˜è®¤ 14)</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">é»˜è®¤å›¾å±‚ (é»˜è®¤ 1)</th></tr></thead><tbody><tr><td style="text-align:center">æ··åˆåœ°å›¾</td><td style="text-align:center">map</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~7</td></tr><tr><td style="text-align:center">è°·æ­Œåœ°å›¾</td><td style="text-align:center">googleMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~20</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">é«˜å¾·åœ°å›¾</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">ç™¾åº¦åœ°å›¾</td><td style="text-align:center">baiduMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 4~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~2</td></tr><tr><td style="text-align:center">Geoq åœ°å›¾</td><td style="text-align:center">geoqMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~5</td></tr><tr><td style="text-align:center">openstreet åœ°å›¾</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">ä¸æ”¯æŒæ­¤å‚æ•°</td></tr></tbody></table><ol><li>å‚æ•°ä¹‹é—´ï¼Œç”¨è‹±æ–‡é€—å·ç›¸éš”</li><li>å‚æ•°å¿…é¡»æŒ‰ä¸Šè¿°äº‹ä¾‹é¡ºåºè¾“å…¥ï¼Œä¸å¾—ä¸ºç©º</li><li>åŒä¸€ä¸ªé¡µé¢ï¼ŒåŒä¸€ç»„ç»çº¬åº¦å€¼ï¼Œåªèƒ½æ’å…¥ä¸€ä¸ªç›¸åŒæ ‡ç­¾å€¼çš„åœ°å›¾ (è‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†ç¬¬äºŒä¸ªåœ°å›¾ä¸Šï¼Œç»åº¦æˆ–çº¬åº¦æœ«å°¾åˆ é™¤ä¸€ä¸¤ä¸ªæ•°)</li><li>å‚æ•°å–å€¼å¿…é¡»åœ¨ä¸Šè¿°èŒƒå›´å†…</li><li>é»˜è®¤å›¾å±‚ï¼šå³åœ°å›¾å åŠ å±‚çš„å€¼ï¼Œé»˜è®¤å¸¸è§„åœ°å›¾è¿˜æ˜¯å«æ˜Ÿåœ°å›¾ï¼Œå¯æŒ‰åœ°å›¾æ˜¾ç¤ºé¡ºåºå–å€¼</li><li>ç¼©æ”¾ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œåœ°å›¾æ¯”ä¾‹å°ºè¶Šå°ï¼Œæ˜¾ç¤ºçš„è¶Šç²¾ç»†</li><li>é™¤æ ‡ç­¾å€¼å¤–ï¼Œå…¶ä»–å‚æ•°é€‰å¡«ï¼Œä½† æ¯ä¸ªå‚æ•°çš„å·¦è¾¹çš„å‚æ•°å¿…å¡«</li><li>è°·æ­Œåœ°å›¾éœ€è¦å¤–ç½‘æ‰èƒ½åŠ è½½æŸ¥çœ‹</li></ol><p>åæ ‡è·å–ï¼š<a href="https://lbs.amap.com/tools/picker">é«˜å¾·åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a> ã€<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">ç™¾åº¦åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Amap'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'Amap'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'Amap'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"é«˜å¾·åœ°å›¾":normal,"æ™ºå›¾åœ°å›¾":normalm1,"è°·æ­Œåœ°å›¾":normalMap,"é«˜å¾·å«æ˜Ÿåœ°å›¾":imgm,"è°·æ­Œå«æ˜Ÿåœ°å›¾":satelliteMap,"é«˜å¾·å«æ˜Ÿæ ‡æ³¨":image,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);</script><br><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"è°·æ­Œåœ°å›¾":normalMap,"è°·æ­Œå«æ˜Ÿå›¾":satelliteMap,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"æ™ºå›¾åœ°å›¾":normalm1,"åˆå¤œè“":normalm2,"ç°è‰²":normalm3,"æš–è‰²":normalm4,"æ°´ç³»":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-31-éšè—å—">2.31 éšè—å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>contentï¼šè¦éšè—çš„å†…å®¹</li><li>displayï¼šå±•ç¤ºå‰æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯é€‰ï¼‰</li><li>bgï¼šæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li><li>colorï¼šæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—çš„é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock ç‚¹æˆ‘é¢„è§ˆ, blue %&#125;</span><br><span class="line">è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">ç‚¹æˆ‘é¢„è§ˆ    </button><div class="hide-content"><p>è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> å¤–æŒ‚æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å¯è§†åŒ–å·¥å…· Portainerï¼ˆåä¸‰ï¼‰</title>
      <link href="/posts/76a91b23c0cf.html"/>
      <url>/posts/76a91b23c0cf.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Portainer-ç®€ä»‹">ä¸€ã€Portainer ç®€ä»‹</h2><p>Portaineræ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„Dockeræ“ä½œç•Œé¢ï¼Œæä¾›çŠ¶æ€æ˜¾ç¤ºé¢æ¿ã€åº”ç”¨æ¨¡æ¿å¿«é€Ÿéƒ¨ç½²ã€å®¹å™¨é•œåƒç½‘ç»œæ•°æ®å·çš„åŸºæœ¬æ“ä½œï¼ˆåŒ…æ‹¬ä¸Šä¼ ä¸‹è½½é•œåƒï¼Œåˆ›å»ºå®¹å™¨ç­‰æ“ä½œï¼‰ã€äº‹ä»¶æ—¥å¿—æ˜¾ç¤ºã€å®¹å™¨æ§åˆ¶å°æ“ä½œã€Swarmé›†ç¾¤å’ŒæœåŠ¡ç­‰é›†ä¸­ç®¡ç†å’Œæ“ä½œã€ç™»å½•ç”¨æˆ·ç®¡ç†å’Œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚åŠŸèƒ½ååˆ†å…¨é¢ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³ä¸­å°å‹å•ä½å¯¹å®¹å™¨ç®¡ç†çš„å…¨éƒ¨éœ€æ±‚ã€‚</p><h2 id="äºŒã€portainer-å®‰è£…">äºŒã€portainer å®‰è£…</h2><p>å¦‚æœä½ éƒ¨ç½²äº†åŒ…å« Portainer çš„ Docker ç¯å¢ƒï¼Œè¯·ç›´æ¥ç™»å½•ä½¿ç”¨ã€‚å¦åˆ™ï¼Œè¯·å…ˆå®‰è£… Portainerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é€šè¿‡å‘½ä»¤å®‰è£… Portainer</span></span><br><span class="line"></span><br><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€portainer-ä½¿ç”¨">ä¸‰ã€portainer ä½¿ç”¨</h2><p>æœ¬æ¬¡æµ‹è¯•ä»¥éƒ¨ç½²nginxä¸ºä¾‹ï¼Œç®€è¿° portainer çš„ä½¿ç”¨ã€‚</p><h3 id="1ã€åˆå§‹åŒ–">1ã€åˆå§‹åŒ–</h3><h4 id="ï¼ˆ1ï¼‰è®¾ç½®ç®¡ç†å‘˜è´¦å·å¯†ç ">ï¼ˆ1ï¼‰è®¾ç½®ç®¡ç†å‘˜è´¦å·å¯†ç </h4><p>è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·å¯†ç ï¼Œç‚¹å‡»ã€Create userã€‘ï¼Œå®Œæˆç”¨æˆ·åˆ›å»ºã€‚</p><p><img src="https://cdn.whbblog.cn/img/b46f2fe8dd9b27295a0b0dcf9818671a.png" alt="img"></p><h4 id="ï¼ˆ2ï¼‰è¿æ¥é•œåƒ">ï¼ˆ2ï¼‰è¿æ¥é•œåƒ</h4><p>æ ¹æ®æƒ…å†µé€‰æ‹©é•œåƒè¿æ¥ï¼Œè¿™æ¬¡ä»¥æœ¬åœ°ä½œä¸ºè¿æ¥å¯¹è±¡è¿›è¡Œè¿æ¥ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20221004230501350.png" alt="image-20221004230501350"></p><h3 id="2ã€éƒ¨ç½²å®¹å™¨-nginx">2ã€éƒ¨ç½²å®¹å™¨ nginx</h3><h4 id="ï¼ˆ1ï¼‰å®¹å™¨ç®¡ç†">ï¼ˆ1ï¼‰å®¹å™¨ç®¡ç†</h4><p>è¿›å…¥Portaineråå°ç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»Localé¡¹ç›®å°±å¯ä»¥å¼€å§‹ä½¿ç”¨Portainer</p><p><img src="https://cdn.whbblog.cn/img/image-20221004230659905.png" alt="image-20221004230659905"></p><h4 id="ï¼ˆ2ï¼‰æ·»åŠ å®¹å™¨">ï¼ˆ2ï¼‰æ·»åŠ å®¹å™¨</h4><p><img src="https://cdn.whbblog.cn/img/image-20221004231032121.png" alt="image-20221004231032121"></p><h4 id="ï¼ˆ3ï¼‰åˆ›å»ºå®¹å™¨">ï¼ˆ3ï¼‰åˆ›å»ºå®¹å™¨</h4><p><code>Name</code>ï¼šå®¹å™¨åç§°ï¼Œæ ¹æ®éœ€æ±‚å¡«å†™ã€‚</p><p><code>Image</code>ï¼šé€‰æ‹©ä½¿ç”¨çš„é•œåƒï¼Œè¿™é‡Œé€‰æ‹© <code>nginx:latest</code> é•œåƒã€‚</p><p><code>Manual network port publishing</code>ï¼šæ‰‹åŠ¨ç«¯å£æ˜ å°„ï¼Œåœ¨æ­¤å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸»æœºçš„ 8888 ç«¯å£ï¼Œæ˜ å°„å®¹å™¨çš„ 80 ç«¯å£ã€‚</p><p>ç‚¹å‡» <code>Deploy the container</code> éƒ¨ç½²å®¹å™¨ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20221006215703570.png" alt="image-20221006215703570"></p><h3 id="3ã€éªŒè¯æµ‹è¯•">3ã€éªŒè¯æµ‹è¯•</h3><p>è®¿é—®ä¸»æœºIP:8888 ç«¯å£æŸ¥çœ‹å®¹å™¨æ˜¯å¦éƒ¨ç½²è¿è¡ŒæˆåŠŸã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20221006220315950.png" alt="image-20221006220315950"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> portainer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker Compose å®¹å™¨ç¼–æ’ï¼ˆåäºŒï¼‰</title>
      <link href="/posts/54732a164a59.html"/>
      <url>/posts/54732a164a59.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2><p><code>Docker Compose</code> é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚</p><p>é€šè¿‡ç¬¬ä¸€éƒ¨åˆ†ä¸­çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ä½¿ç”¨ä¸€ä¸ª <code>Dockerfile</code> æ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚</p><p><code>Docker Compose</code> æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ <code>docker-compose.yml</code> æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</p><p><code>Docker Compose</code> ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p><ul><li>ğŸš æœåŠ¡ (<code>service</code>)ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li><li>ğŸŒ é¡¹ç›® (<code>project</code>)ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li></ul><p>å¯è§ï¼Œä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”±å¤šä¸ªæœåŠ¡ï¼ˆå®¹å™¨ï¼‰å…³è”è€Œæˆï¼Œ<code>Docker Compose</code> é¢å‘é¡¹ç›®è¿›è¡Œç®¡ç†ï¼Œå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼š</p><img src="https://cdn.whbblog.cn/img/1626909129001-0ff808df-8eb6-4a7d-9bfb-0ac217460fb6.png" alt="image.png" style="zoom: 50%;" /><h2 id="äºŒã€å®‰è£…ä¸å¸è½½">äºŒã€å®‰è£…ä¸å¸è½½</h2><p>æŸ¥çœ‹æ˜¯å¦å®‰è£… <code>docker compose</code> å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose version</span><br></pre></td></tr></table></figure><h3 id="1ã€é€šè¿‡-yum-å®‰è£…ä¸å¸è½½-docker-compose">1ã€é€šè¿‡ yum å®‰è£…ä¸å¸è½½ docker compose</h3><p><strong>âœˆï¸ å®‰è£…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æ›´æ–°</span></span><br><span class="line">yum update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… docker compose åŒ…</span></span><br><span class="line">yum install -y docker-compose-plugin</span><br></pre></td></tr></table></figure><p><strong>ğŸª‚ å¸è½½</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove -y docker-compose-plugin</span><br></pre></td></tr></table></figure><h3 id="2ã€æ‰‹åŠ¨å®‰è£…ä¸å¸è½½-docker-compose">2ã€æ‰‹åŠ¨å®‰è£…ä¸å¸è½½ docker compose</h3><p><strong>âœˆï¸ å®‰è£…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line">mkdir -p /usr/local/lib/docker/cli-plugins</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">curl -SL https://github.com/docker/compose/releases/download/v2.10.2/docker-compose-linux-x86_64 -o /usr/local/lib/docker/cli-plugins/docker-compose</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èµ‹äºˆæ‰§è¡Œæƒé™</span></span><br><span class="line">chmod +x /usr/local/lib/docker/cli-plugins/docker-compose</span><br></pre></td></tr></table></figure><p><strong>ğŸª‚ å¸è½½</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /usr/local/lib/docker/cli-plugins/docker-compose</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€compose-å¸¸ç”¨æ¨¡æ¿å‘½ä»¤">ä¸‰ã€compose å¸¸ç”¨æ¨¡æ¿å‘½ä»¤</h2><p>æ¨¡æ¿æ–‡ä»¶æ˜¯ä½¿ç”¨ <code>Compose</code> çš„æ ¸å¿ƒï¼Œæ¶‰åŠåˆ°çš„æŒ‡ä»¤å…³é”®å­—ä¹Ÿæ¯”è¾ƒå¤šã€‚ä½†å¤§å®¶ä¸ç”¨æ‹…å¿ƒï¼Œè¿™é‡Œé¢å¤§éƒ¨åˆ†æŒ‡ä»¤è·Ÿ <code>docker run</code> ç›¸å…³å‚æ•°çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p><p>é»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶åç§°ä¸º <code>compose.yaml</code>ï¼ˆé¦–é€‰ï¼‰æˆ– <code>compose.yml</code>ï¼Œæ ¼å¼ä¸º YAML æ ¼å¼ã€‚<code>Compose</code> å®ç°è¿˜åº”è¯¥æ”¯æŒ <code>docker-compose.yaml</code> å’Œ <code>docker-compose.yml</code> ä»¥å®ç°å‘åå…¼å®¹æ€§ã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ï¼Œåˆ™ <code>Compose</code> å®ç°å¿…é¡»æ›´å–œæ¬¢è§„èŒƒçš„ <code>compose.yaml</code> ä¹‹ä¸€ã€‚</p><p>æ³¨æ„ï¼šæ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ <code>image</code> æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ– <code>build</code> æŒ‡ä»¤ï¼ˆéœ€è¦ Dockerfileï¼‰ç­‰æ¥è‡ªåŠ¨æ„å»ºç”Ÿæˆé•œåƒã€‚å¦‚æœä½¿ç”¨ <code>build</code> æŒ‡ä»¤ï¼Œåœ¨ <code>Dockerfile</code> ä¸­è®¾ç½®çš„é€‰é¡¹(ä¾‹å¦‚ï¼š<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> ç­‰) å°†ä¼šè‡ªåŠ¨è¢«è·å–ï¼Œæ— éœ€åœ¨ <code>compose.yml</code> ä¸­é‡å¤è®¾ç½®ã€‚</p><p>Docker Compose çš„ YAML æ–‡ä»¶åŒ…å« 4 ä¸ªä¸€çº§ key : versionã€servicesã€networksã€volumesã€‚</p><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»å¸¸ç”¨å„ä¸ªæŒ‡ä»¤çš„ç”¨æ³•ã€‚å®Œæ•´çš„ <code>docker compose</code> æ¨¡æ¿å‘½ä»¤å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/compose-file/">https://docs.docker.com/compose/compose-file/</a></p><h3 id="1ã€é¡¶çº§å…ƒç´ -Version">1ã€é¡¶çº§å…ƒç´  Version</h3><p>Versionï¼š å®šä¹‰äº† Compose æ–‡ä»¶æ ¼å¼(ä¸»è¦æ˜¯ API)çš„ç‰ˆæœ¬ï¼Œæ€»æ˜¯ä½äºç¬¬ä¸€è¡Œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€é¡¶çº§å…ƒç´ -Services">2ã€é¡¶çº§å…ƒç´  Services</h3><p>Servicesï¼šå®šä¹‰å®¹å™¨æˆ–æœåŠ¡çš„é…ç½®æ–‡ä»¶ã€‚</p><h4 id="ï¼ˆ1ï¼‰build">ï¼ˆ1ï¼‰build</h4><p>buildï¼šæŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…ç›¸å¯¹ docker-compose.yml æ–‡ä»¶çš„è·¯å¾„ï¼‰ã€‚ <code>Compose</code> å°†ä¼šåˆ©ç”¨å®ƒè‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨è¿™ä¸ªé•œåƒã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><p><code>context</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</p></li><li><p><code>dockerfile</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ–‡ä»¶åã€‚</p></li><li><p><code>arg</code> æŒ‡ä»¤æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„å˜é‡ã€‚</p></li></ul><h4 id="ï¼ˆ2ï¼‰command">ï¼ˆ2ï¼‰command</h4><p>commandï¼šè¦†ç›–å®¹å™¨é•œåƒï¼ˆå³ Dockerfile çš„ï¼‰å£°æ˜çš„é»˜è®¤å‘½ä»¤ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">bundle</span> <span class="string">exec</span> <span class="string">thin</span> <span class="string">-p</span> <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">command:</span> [<span class="string">&quot;bundle&quot;</span>, <span class="string">&quot;exec&quot;</span>, <span class="string">&quot;thin&quot;</span>, <span class="string">&quot;-p&quot;</span>, <span class="string">&quot;3000&quot;</span>]</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰container-name">ï¼ˆ3ï¼‰container_name</h4><p>container_nameï¼šæŒ‡å®šè‡ªå®šä¹‰å®¹å™¨åç§°ï¼ˆè€Œä¸æ˜¯ç”Ÿæˆçš„é»˜è®¤åç§°ï¼‰çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">my-web-container</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰depends-on">ï¼ˆ4ï¼‰depends_on</h4><p>depends_onï¼šè¡¨ç¤ºæœåŠ¡ä¹‹é—´çš„å¯åŠ¨å’Œå…³é—­ä¾èµ–å…³ç³»ã€‚</p><ul><li>ğŸ¸ Compose åˆ›å»ºæœåŠ¡å¿…é¡»æŒ‰ä¾èµ–é¡ºåº <code>db</code> <code>redis</code> <code>web</code> è¿›è¡Œåˆ›å»ºã€‚</li><li>ğŸº Compose åˆ é™¤æœåŠ¡å¿…é¡»æŒ‰ä¾èµ–é¡ºåº <code>web</code> <code>db</code> <code>redis</code> è¿›è¡Œåˆ é™¤ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰dns">ï¼ˆ5ï¼‰dns</h4><p>dnsï¼šå®šä¹‰äº†è¦åœ¨å®¹å™¨ç½‘ç»œæ¥å£é…ç½®ä¸Šè®¾ç½®çš„è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ã€‚ å¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–åˆ—è¡¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dns:</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">9.9</span><span class="number">.9</span><span class="number">.9</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ6ï¼‰environment">ï¼ˆ6ï¼‰environment</h4><p>environmentï¼šç”¨æ¥ç»™å®¹å™¨å¯åŠ¨æŒ‡å®šçš„ç¯å¢ƒå˜é‡ï¼Œç›¸å½“äº <code>docker run -e</code> é€‰é¡¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜ å°„è¯­æ³•</span></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">RACK_ENV:</span> <span class="string">development</span></span><br><span class="line">  <span class="attr">SHOW:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">  <span class="attr">USER_INPUT:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°ç»„è¯­æ³•</span></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RACK_ENV=development</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SHOW=true</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">USER_INPUT</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰env-file">ï¼ˆ7ï¼‰env_file</h4><p>env_fileï¼šæ ¹æ®æ–‡ä»¶å†…å®¹å‘å®¹å™¨æ·»åŠ ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env_file:</span> <span class="string">.env</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ8ï¼‰expose">ï¼ˆ8ï¼‰expose</h4><p>exposeï¼šå®šä¹‰ compose ä»å®¹å™¨ä¸­å…¬å¼€çš„ç«¯å£ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">expose:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;3000&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;8000&quot;</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä»¥ä¸ŠæŒ‡ä»¤å°†å½“å‰å®¹å™¨çš„ç«¯å£3000å’Œ8000æš´éœ²ç»™å…¶ä»–å®¹å™¨ï¼Œå’Œ <strong>ports</strong> çš„åŒºåˆ«æ˜¯ï¼Œ<strong>expose</strong> ä¸ä¼šå°†ç«¯å£æš´éœ²ç»™ä¸»æœºï¼Œä¸»æœºæ— æ³•è®¿é—® <strong>expose</strong> çš„ç«¯å£ã€‚</p><h4 id="ï¼ˆ9ï¼‰extra-hosts">ï¼ˆ9ï¼‰extra_hosts</h4><p>extra_hostsï¼šå°†æ·»åŠ ä¸»æœºåæ˜ å°„æ·»åŠ åˆ°åˆ°å®¹å™¨ç½‘ç»œæ¥å£é…ç½®ï¼ˆ<code>/etc/hosts</code> for Linuxï¼‰ã€‚å€¼å¿…é¡»ä»¥ HOSTNAME:IP çš„å½¢å¼ä¸ºå…¶ä»–ä¸»æœºè®¾ç½®ä¸»æœºåå’Œ IP åœ°å€ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extra_hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;somehost:162.242.195.82&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;otherhost:50.31.209.229&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ10ï¼‰image">ï¼ˆ10ï¼‰image</h4><p>imageï¼šæŒ‡å®šå®¹å™¨å¯åŠ¨çš„é•œåƒã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">redis:5</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">redis@sha256:0ed5d5928d4737458944eb604cc8509e245c3e19d02ad83935398bc4b991aac7</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">library/redis</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">docker.io/library/redis</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">my_private.registry:5000/redis</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ11ï¼‰network-mode">ï¼ˆ11ï¼‰network_mode</h4><p>network_modeï¼šè®¾ç½®å®¹å™¨ç½‘ç»œæ¨¡å¼ï¼Œå¯ç”¨å‚æ•°å¦‚ä¸‹ï¼š</p><ul><li>noneï¼šç¦ç”¨æ‰€æœ‰å®¹å™¨ç½‘ç»œ</li><li>hostï¼šå®ƒä¸ºå®¹å™¨æä¾›å¯¹ä¸»æœºç½‘ç»œæ¥å£çš„åŸå§‹è®¿é—®æƒé™</li><li>service:{name}ï¼šåªå…è®¸å®¹å™¨è®¿é—®æŒ‡å®šçš„æœåŠ¡</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;host&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;service:[service name]&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ12ï¼‰networks">ï¼ˆ12ï¼‰networks</h4><p>networksï¼šå®šä¹‰å®¹å™¨ä½¿ç”¨çš„ç½‘ç»œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">some-network</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">other-network</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ13ï¼‰ports">ï¼ˆ13ï¼‰ports</h4><p>portsï¼šæš´éœ²å®¹å™¨ç«¯å£åˆ°ä¸»æœºçš„ä»»æ„ç«¯å£æˆ–æŒ‡å®šç«¯å£ï¼Œç”¨æ³•ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span>         <span class="comment"># ç»‘å®šå®¹å™¨çš„80ç«¯å£åˆ°ä¸»æœºçš„80ç«¯å£</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;9000:80&quot;</span>       <span class="comment"># ç»‘å®šå®¹å™¨çš„80ç«¯å£åˆ°ä¸»æœºçš„9000ç«¯å£</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;443&quot;</span>           <span class="comment"># ç»‘å®šå®¹å™¨çš„443ç«¯å£åˆ°ä¸»æœºçš„ä»»æ„ç«¯å£ï¼Œå®¹å™¨å¯åŠ¨æ—¶éšæœºåˆ†é…ç»‘å®šçš„ä¸»æœºç«¯å£å·</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¸ç®¡æ˜¯å¦æŒ‡å®šä¸»æœºç«¯å£ï¼Œä½¿ç”¨portséƒ½ä¼šå°†ç«¯å£æš´éœ²ç»™<strong>ä¸»æœºå’Œå…¶ä»–å®¹å™¨</strong></p><h4 id="ï¼ˆ14ï¼‰restart">ï¼ˆ14ï¼‰restart</h4><p>restartï¼šå®šä¹‰äº†å¹³å°å°†åœ¨å®¹å™¨ç»ˆæ­¢æ—¶åº”ç”¨çš„ç­–ç•¥</p><ul><li>noï¼šé»˜è®¤é‡å¯ç­–ç•¥ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šé‡æ–°å¯åŠ¨å®¹å™¨ã€‚</li><li>alwaysï¼šè¯¥ç­–ç•¥ä¼šå§‹ç»ˆé‡å¯å®¹å™¨ï¼Œç›´åˆ°å®¹å™¨åˆ é™¤ã€‚</li><li>no-failureï¼šå¦‚æœé€€å‡ºä»£ç æŒ‡ç¤ºé”™è¯¯ï¼Œç­–ç•¥å°†é‡æ–°å¯åŠ¨å®¹å™¨ã€‚</li><li>unless-stoppedï¼šè¯¥ç­–ç•¥ä¼šé‡æ–°å¯åŠ¨å®¹å™¨ï¼Œè€Œä¸è€ƒè™‘é€€å‡ºä»£ç ï¼Œä½†ä¼šåœ¨æœåŠ¡åœæ­¢æˆ–åˆ é™¤æ—¶åœæ­¢é‡æ–°å¯åŠ¨ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">restart:</span> <span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">on-failure</span></span><br><span class="line"><span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ15ï¼‰volumes">ï¼ˆ15ï¼‰volumes</h4><p>volumesï¼šå®šä¹‰å®¹å™¨æ•°æ®å·æŒ‚è½½</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">backend:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">awesome/backend</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">volume</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">db-data</span></span><br><span class="line">        <span class="attr">target:</span> <span class="string">/data</span></span><br><span class="line">        <span class="attr">volume:</span></span><br><span class="line">          <span class="attr">nocopy:</span> <span class="literal">true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">bind</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">/var/run/postgres/postgres.sock</span></span><br><span class="line">        <span class="attr">target:</span> <span class="string">/var/run/postgres/postgres.sock</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db-data:</span></span><br></pre></td></tr></table></figure><p>çŸ­è¯­æ³•æ¨¡å¼ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line"><span class="string">volume:CONTAINER_PATH</span></span><br><span class="line"><span class="string">volume:CONTAINER_PATH:access_mode</span></span><br></pre></td></tr></table></figure><ul><li><p>volumeï¼šå¯ä»¥æ˜¯å¹³å°æ‰˜ç®¡å®¹å™¨ï¼ˆbind mountï¼‰ä¸Šçš„ä¸»æœºè·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯å·å</p></li><li><p>CONTAINER_PATHï¼šæŒ‚è½½å·çš„å®¹å™¨ä¸­çš„è·¯å¾„</p></li><li><p>ACCESS_MODEï¼šæ˜¯ä»¥é€—å·åˆ†éš”çš„é€‰é¡¹åˆ—è¡¨ï¼Œå¯ä»¥è®¾ç½®ä¸ºï¼š</p><ul><li>rwï¼šè¯»å†™è®¿é—®æƒé™ï¼ˆé»˜è®¤ï¼‰</li><li>roï¼šåªè¯»è®¿é—®</li></ul></li></ul><h4 id="ï¼ˆ16ï¼‰volumes-from">ï¼ˆ16ï¼‰volumes_from</h4><p>volumes_fromï¼šä»å¦ä¸€ä¸ªæœåŠ¡æˆ–å®¹å™¨æŒ‚è½½æ‰€æœ‰å®¹å™¨å·ï¼Œå¯ä»¥é€‰æ‹©æŒ‡å®šåªè¯»è®¿é—®ï¼ˆroï¼‰æˆ–è¯»å†™ï¼ˆrwï¼‰ã€‚å¦‚æœæœªæŒ‡å®šè®¿é—®çº§åˆ«ï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¯»å†™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes_from:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">service_name</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">service_name:ro</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">container:container_name</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">container:container_name:rw</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ17ï¼‰working-dir">ï¼ˆ17ï¼‰working_dir</h4><p>working_dirï¼š ä» <code>image</code> æŒ‡å®šçš„ç›®å½•è¦†ç›–å®¹å™¨çš„å·¥ä½œç›®å½•ï¼ˆå³Dockerfile <code>WORKDIR</code>ï¼‰ã€‚</p><h3 id="3ã€é¡¶çº§å…ƒç´ -Networks">3ã€é¡¶çº§å…ƒç´  Networks</h3><p>networksï¼šç”¨äºæŒ‡å¼• Docker åˆ›å»ºæ–°çš„ç½‘ç»œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker Compose ä¼šåˆ›å»º bridge ç½‘ç»œã€‚ è¿™æ˜¯ä¸€ç§å•ä¸»æœºç½‘ç»œï¼Œåªèƒ½å¤Ÿå®ç°åŒä¸€ä¸»æœºä¸Šå®¹å™¨çš„è¿æ¥ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ driver å±æ€§æ¥æŒ‡å®šä¸åŒçš„ç½‘ç»œç±»å‹ã€‚</p><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œå°†åˆ›å»ºç½‘ç»œå‰ç«¯å’Œåç«¯ï¼Œå¹¶å°†å‰ç«¯æœåŠ¡è¿æ¥åˆ°å‰ç«¯ç½‘ç»œå’Œåç«¯ç½‘ç»œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">frontend:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">awesome/webapp</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">front-tier</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">back-tier</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">front-tier:</span></span><br><span class="line">  <span class="attr">back-tier:</span></span><br></pre></td></tr></table></figure><h3 id="4ã€é¡¶çº§å…ƒç´ -Volumes">4ã€é¡¶çº§å…ƒç´  Volumes</h3><p>volumesï¼šç”¨äºæŒ‡å¼• Docker æ¥åˆ›å»ºæ–°çš„å·ã€‚</p><p>å·éƒ¨åˆ†å…è®¸é…ç½®å¯è·¨å¤šä¸ªæœåŠ¡é‡ç”¨çš„å‘½åå·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŒæœåŠ¡è®¾ç½®çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ•°æ®åº“çš„æ•°æ®ç›®å½•ä½œä¸ºåä¸º db-data çš„å·ä¸å¦ä¸€ä¸ªæœåŠ¡å…±äº«ï¼Œä»¥ä¾¿å¯ä»¥å®šæœŸå¤‡ä»½ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">backend:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">awesome/database</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db-data:/etc/data</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">backup:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">backup-service</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db-data:/var/lib/backup/data</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db-data:</span></span><br></pre></td></tr></table></figure><h2 id="å››ã€compose-å¸¸ç”¨å‘½ä»¤">å››ã€compose å¸¸ç”¨å‘½ä»¤</h2><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>up</td><td>åˆ›å»ºå’Œå¯åŠ¨å®¹å™¨</td></tr><tr><td>down</td><td>åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€æ•°æ®å·å’Œé•œåƒ</td></tr><tr><td>build</td><td>é‡æ–°æ„å»ºæœåŠ¡</td></tr><tr><td>ps</td><td>åˆ—å‡ºå®¹å™¨</td></tr><tr><td>exec</td><td>è¿›å…¥å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡Œé¢æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>top</td><td>æ˜¾ç¤ºå®¹å™¨è¿›ç¨‹</td></tr><tr><td>logs</td><td>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</td></tr><tr><td>pauseã€unpause</td><td>æš‚åœã€æ¢å¤æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æœåŠ¡æˆ–æŒ‡å®šæœåŠ¡</td></tr><tr><td>rm</td><td>åˆ é™¤æ•´ä¸ªé¡¹ç›®æˆ–è€…æŒ‡å®šæœåŠ¡</td></tr><tr><td>startã€stopã€restart</td><td>å¼€å§‹ã€åœæ­¢ã€é‡å¯æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æœåŠ¡æˆ–æŒ‡å®šæœåŠ¡</td></tr><tr><td>ls</td><td>åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ compose é¡¹ç›®</td></tr><tr><td>version</td><td>åˆ—å‡º compose ç‰ˆæœ¬</td></tr></tbody></table><h3 id="1ã€up">1ã€up</h3><p>â€‹ä¸ºæœåŠ¡æ„å»ºã€(é‡æ–°)åˆ›å»ºã€å¯åŠ¨å’Œé™„åŠ åˆ°å®¹å™¨ã€‚è¯¥å‘½ä»¤èšåˆæ¯ä¸ªå®¹å™¨çš„è¾“å‡º(åƒ does ä¸€æ ·)ã€‚å½“å‘½ä»¤é€€å‡ºæ—¶ï¼Œæ‰€æœ‰å®¹å™¨éƒ½å°†åœæ­¢ã€‚<code>-d</code> å‚æ•°å°†åœ¨åå°å¯åŠ¨å¹¶è¿è¡Œå®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose up [OPTIONS] [SERVICE...]</span><br></pre></td></tr></table></figure><h4 id="Options">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“abort-on-container-exit</td><td>å¦‚æœä»»ä½•å®¹å™¨è¢«åœæ­¢ï¼Œåˆ™åœæ­¢æ‰€æœ‰å®¹å™¨ã€‚æ³¨æ„ï¼šä¸å…¼å®¹ <code>-d</code></td></tr><tr><td>â€“always-recreate-deps</td><td>é‡æ–°åˆ›å»ºå®¹å™¨ä¾èµ–ã€‚æ³¨æ„ä¸å…¼å®¹ <code>--no-recreate</code></td></tr><tr><td>â€“attach</td><td>é™„åŠ åˆ°æœåŠ¡è¾“å‡ºã€‚</td></tr><tr><td>â€“attach-dependencies</td><td>é™„åŠ åˆ°ç›¸å…³å®¹å™¨ã€‚</td></tr><tr><td>â€“build</td><td>åœ¨å¯åŠ¨å®¹å™¨ä¹‹å‰æ„å»ºé•œåƒã€‚</td></tr><tr><td>â€“detach<code>,</code>-d</td><td>åˆ†ç¦»æ¨¡å¼:åœ¨åå°è¿è¡Œå®¹å™¨</td></tr><tr><td>â€“exit-code-from</td><td>è¿”å›æ‰€é€‰æœåŠ¡å®¹å™¨çš„é€€å‡ºä»£ç ã€‚æ„å‘³ç€ <code>--abort-on-container-exit</code></td></tr><tr><td>â€“force-recreate</td><td>é‡æ–°åˆ›å»ºå®¹å™¨ï¼Œå³ä½¿å®ƒä»¬çš„é…ç½®å’Œé•œåƒæ²¡æœ‰æ›´æ”¹ã€‚</td></tr><tr><td>â€“no-build</td><td>å³ä½¿é•œåƒç¼ºå¤±ï¼Œä¹Ÿä¸æ„å»ºè¿™ä¸ªå®¹å™¨</td></tr><tr><td>â€“no-color</td><td>ä½¿ç”¨å•è‰²è¾“å‡º</td></tr><tr><td>â€“no-deps</td><td>ä¸è¦å¯åŠ¨é“¾æ¥æœåŠ¡</td></tr><tr><td>â€“no-log-prefix</td><td>ä¸è¦æ‰“å°æ—¥å¿—å‰ç¼€</td></tr><tr><td>â€“no-recreate</td><td>å¦‚æœå®¹å™¨å·²ç»å­˜åœ¨ï¼Œå°±ä¸è¦é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚ä¸å…¼å®¹ <code>--force-recreate</code>ã€‚</td></tr><tr><td>â€“no-start</td><td>åˆ›å»ºå®¹å™¨åä¸è¦å¯åŠ¨æœåŠ¡</td></tr><tr><td>â€“pull</td><td>è¿è¡Œå‰æå–é•œåƒ (â€œalwaysâ€ã€â€œmissingâ€ã€â€œneverâ€) ï¼Œé»˜è®¤å€¼ä¸º <code>missing</code>ã€‚</td></tr><tr><td>â€“quiet-pull</td><td>æ‹‰å–é•œåƒæ—¶ï¼Œä¸è¦æ‰“å°é•œåƒä¿¡æ¯ã€‚</td></tr><tr><td>â€“remove-orphans</td><td>ä¸ºæ²¡æœ‰åœ¨ Compose æ–‡ä»¶ä¸­å®šä¹‰çš„æœåŠ¡åˆ é™¤å®¹å™¨ã€‚</td></tr><tr><td>â€“renew-anon-volumes<code>,</code>-V</td><td>é‡æ–°åˆ›å»ºåŒ¿åå·ï¼Œè€Œä¸æ˜¯ä»ä»¥å‰çš„å®¹å™¨æ£€ç´¢æ•°æ®ã€‚</td></tr><tr><td>â€“timeout<code>,</code>-t</td><td>åœ¨é™„åŠ å®¹å™¨æˆ–å®¹å™¨å·²ç»åœ¨è¿è¡Œæ—¶ï¼Œä½¿ç”¨æ­¤è¶…æ—¶æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)æ¥å…³é—­å®¹å™¨ï¼Œé»˜è®¤ä¸º10ç§’ã€‚</td></tr></tbody></table><h3 id="2ã€down">2ã€down</h3><p>â€‹åœæ­¢å®¹å™¨å¹¶åˆ é™¤ up åˆ›å»ºçš„å®¹å™¨ã€ç½‘ç»œå’Œé•œåƒã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ é™¤çš„ä¸œè¥¿åªæœ‰:</p><ul><li>ç”¨äºåœ¨ Compose æ–‡ä»¶ä¸­å®šä¹‰çš„æœåŠ¡çš„å®¹å™¨ã€‚</li><li>åœ¨ Compose æ–‡ä»¶çš„ Networks éƒ¨åˆ†ä¸­å®šä¹‰çš„ç½‘ç»œã€‚</li><li>é»˜è®¤ç½‘ç»œ(å¦‚æœä½¿ç”¨äº†ä¸€ä¸ªç½‘ç»œ)</li></ul><p>â€‹æ³¨æ„ï¼šå®šä¹‰ä¸ºå¤–éƒ¨çš„ç½‘ç»œå’Œå·æ°¸è¿œä¸ä¼šè¢«åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åˆ é™¤åŒ¿åå·ã€‚ç„¶è€Œï¼Œç”±äºå®ƒä»¬æ²¡æœ‰ä¸€ä¸ªç¨³å®šçš„åç§°ï¼Œå®ƒä»¬ä¸ä¼šè¢«åç»­çš„upè‡ªåŠ¨æŒ‚è½½ã€‚å¯¹äºéœ€è¦åœ¨æ›´æ–°ä¹‹é—´æŒä¹…ä¿å­˜çš„æ•°æ®ï¼Œä½¿ç”¨æ˜¾å¼è·¯å¾„ä½œä¸ºç»‘å®šæŒ‚è½½æˆ–å‘½åå·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose down [OPTIONS]</span><br></pre></td></tr></table></figure><h4 id="Options-2">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“remove-orphans</td><td>åˆ é™¤æœªåœ¨ Compose  æ–‡ä»¶ä¸­å®šä¹‰çš„æœåŠ¡çš„å®¹å™¨ã€‚</td></tr><tr><td>â€“rmi</td><td>åˆ é™¤æœåŠ¡ä½¿ç”¨çš„é•œåƒã€‚&quot;local&quot;åªåˆ é™¤æ²¡æœ‰è‡ªå®šä¹‰æ ‡ç­¾çš„å›¾ç‰‡(â€œlocalâ€ã€â€œallâ€)</td></tr><tr><td>â€“timeout<code>,</code>-t</td><td>æŒ‡å®šä»¥ç§’ä¸ºå•ä½çš„å…³æœºè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º 10 ç§’ã€‚</td></tr><tr><td>â€“volumes<code>,</code>-v</td><td>åˆ é™¤åœ¨ Compose æ–‡ä»¶çš„ volumes éƒ¨åˆ†å£°æ˜çš„å‘½åå·å’Œé™„åŠ åˆ°å®¹å™¨çš„åŒ¿åå·ã€‚</td></tr></tbody></table><h3 id="3ã€build">3ã€build</h3><p>ç”¨äºæ„å»ºæˆ–é‡æ–°æ„å»ºæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose build [OPTIONS] [SERVICE...]</span><br></pre></td></tr></table></figure><h4 id="Options-3">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“build-arg</td><td>ä¸ºæœåŠ¡è®¾ç½®æ„å»ºæ—¶å˜é‡ã€‚</td></tr><tr><td>â€“memory<code>,</code>-m</td><td>ä¸ºæ„å»ºå®¹å™¨è®¾ç½®å†…å­˜é™åˆ¶ã€‚</td></tr><tr><td>â€“no-cache</td><td>åœ¨æ„å»ºé•œåƒæ—¶ä¸ä½¿ç”¨ç¼“å­˜ã€‚</td></tr><tr><td>â€“progress</td><td>è®¾ç½®è¿›åº¦è¾“å‡ºç±»å‹(auto,tty, plain, quiet)ï¼Œé»˜è®¤ä¸º autoã€‚</td></tr><tr><td>â€“pull</td><td>æ€»æ˜¯å°è¯•æ‹‰å‡ºé•œåƒçš„æ–°ç‰ˆæœ¬ã€‚</td></tr><tr><td>â€“quiet<code>,</code>-q</td><td>ä¸è¦å‘STDOUTæ‰“å°ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td>â€“ssh</td><td>è®¾ç½®æ„å»ºæœåŠ¡é•œåƒæ—¶ä½¿ç”¨çš„SSHèº«ä»½éªŒè¯ã€‚(ä½¿ç”¨é»˜è®¤çš„SSHä»£ç†æ—¶ä½¿ç”¨â€™defaultâ€™)</td></tr></tbody></table><h3 id="4ã€ps">4ã€ps</h3><p>åˆ—å‡ºComposeé¡¹ç›®çš„å®¹å™¨ï¼Œä»¥åŠå½“å‰çŠ¶æ€å’Œå…¬å¼€çš„ç«¯å£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œå’Œåœæ­¢çš„å®¹å™¨éƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose ps [OPTIONS] [SERVICE...]</span><br></pre></td></tr></table></figure><h4 id="Options-4">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“all<code>,</code>-a</td><td>æ˜¾ç¤ºæ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨(åŒ…æ‹¬ç”±runå‘½ä»¤åˆ›å»ºçš„å®¹å™¨)</td></tr><tr><td>â€“filter</td><td>é€šè¿‡å±æ€§è¿‡æ»¤æœåŠ¡ï¼Œä¾‹å¦‚ status</td></tr><tr><td>â€“format</td><td>æ ¼å¼åŒ–è¾“å‡ºï¼Œå¯é€‰æ ¼å¼ï¼špretty ã€  json</td></tr><tr><td>â€“quiet<code>,</code>-q</td><td>åªæ˜¾ç¤º id</td></tr><tr><td>â€“services</td><td>æ˜¾ç¤ºæœåŠ¡</td></tr><tr><td>â€“status</td><td>æŒ‰çŠ¶æ€è¿‡æ»¤æœåŠ¡ï¼Œå¯é€‰çŠ¶æ€ï¼špausedã€restartingã€removingã€runningã€deadã€createdã€exited</td></tr></tbody></table><h3 id="5ã€exec">5ã€exec</h3><p>åœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ã€‚è¿™ç›¸å½“äºé’ˆå¯¹ Compose æœåŠ¡çš„ <code>docker exec</code>ã€‚é€šè¿‡è¿™ä¸ªå­å‘½ä»¤ï¼Œæ‚¨å¯ä»¥åœ¨æœåŠ¡ä¸­è¿è¡Œä»»æ„å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤ä¼šåˆ†é…TTYï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ <code>docker compose exec web sh</code> ç­‰å‘½ä»¤æ¥è·å¾—äº¤äº’å¼æç¤ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose exec [OPTIONS] SERVICE COMMAND [ARGS...]</span><br></pre></td></tr></table></figure><h4 id="Options-5">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“detach<code>,</code>-d</td><td>åˆ†ç¦»æ¨¡å¼ï¼Œè¿è¡Œå‘½ä»¤åœ¨åç«¯ã€‚</td></tr><tr><td>â€“env<code>,</code>-e</td><td>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</td></tr><tr><td>â€“index</td><td>å¦‚æœä¸€ä¸ªæœåŠ¡æœ‰å¤šä¸ªå®ä¾‹ï¼Œåˆ™ä½¿ç”¨å®¹å™¨çš„ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º <code>1</code> ã€‚</td></tr><tr><td>â€“interactive<code>,</code>-i</td><td>ä¿æŒSTDINæ‰“å¼€ï¼Œå³ä½¿æ²¡æœ‰è¿æ¥ï¼Œé»˜è®¤å€¼ä¸º <code>true</code> ã€‚</td></tr><tr><td>â€“user<code>,</code>-u</td><td>ä»¥è¯¥ç”¨æˆ·è¿è¡Œè¯¥å‘½ä»¤ã€‚</td></tr><tr><td>â€“workdir<code>,</code>-w</td><td>æ­¤å‘½ä»¤çš„ workdir ç›®å½•è·¯å¾„ã€‚</td></tr></tbody></table><h3 id="6ã€top">6ã€top</h3><p>æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose top [SERVICES...]</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# docker compose top</span><br><span class="line">test-kong-1</span><br><span class="line">UID   PID    PPID   C    STIME   TTY   TIME       CMD</span><br><span class="line">100   2326   2251   2    05:51   ?     00:00:04   nginx: master process </span><br><span class="line">100   3721   2326   0    05:52   ?     00:00:00   nginx: worker process</span><br><span class="line">100   3722   2326   0    05:52   ?     00:00:00   nginx: worker process</span><br><span class="line">100   3723   2326   0    05:52   ?     00:00:00   nginx: worker process</span><br><span class="line">100   3724   2326   0    05:52   ?     00:00:00   nginx: worker process</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7ã€logs">7ã€logs</h3><p>æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose logs [OPTIONS] [SERVICE...]</span><br></pre></td></tr></table></figure><h4 id="Options-6">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“follow<code>,</code>-f</td><td>è·Ÿè¸ªæ—¥å¿—è¾“å‡ºã€‚</td></tr><tr><td>â€“no-color</td><td>ä½¿ç”¨å•è‰²è¾“å‡ºã€‚</td></tr><tr><td>â€“no-log-prefix</td><td>ä¸æ‰“å°æ—¥å¿—å‰ç¼€ã€‚</td></tr><tr><td>â€“since</td><td>æ˜¾ç¤ºè‡ªæ—¶é—´æˆ³ä»¥æ¥çš„æ—¥å¿—ï¼Œç¤ºä¾‹ï¼š (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)</td></tr><tr><td>â€“tail</td><td>ä»æ¯ä¸ªå®¹å™¨çš„æ—¥å¿—æœ«å°¾å¼€å§‹æ˜¾ç¤ºçš„è¡Œæ•°ã€‚é»˜è®¤éœ€è¦è·Ÿå‚æ•° all ã€‚</td></tr><tr><td>â€“timestamps<code>,</code>-t</td><td>æ˜¾ç¤ºæ—¶é—´æˆ³ã€‚</td></tr><tr><td>â€“until</td><td>æ˜¾ç¤ºè‡ªæ—¶é—´æˆ³ä¹‹å‰çš„æ—¥å¿—ï¼Œç¤ºä¾‹ï¼š (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)</td></tr></tbody></table><h3 id="8ã€pauseã€unpause">8ã€pauseã€unpause</h3><p>æš‚åœ/å–æ¶ˆæš‚åœæ­£åœ¨è¿è¡Œçš„æœåŠ¡å®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚åœè¯­æ³•</span></span><br><span class="line">docker compose pause [SERVICE...]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆæš‚åœè¯­æ³•</span></span><br><span class="line">docker compose unpause [SERVICE...]</span><br></pre></td></tr></table></figure><h3 id="9ã€rm">9ã€rm</h3><p>ç§»é™¤åœæ­¢çš„æœåŠ¡å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose rm [OPTIONS] [SERVICE...]</span><br></pre></td></tr></table></figure><h4 id="Options-7">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“force<code>,</code>-f</td><td>ä¸è¦è¯¢é—®æ˜¯å¦è¦ç§»é™¤ã€‚</td></tr><tr><td>â€“stop<code>,</code>-s</td><td>åˆ é™¤å®¹å™¨ä¹‹å‰åœæ­¢å®¹å™¨ã€‚</td></tr><tr><td>â€“volumes<code>,</code>-v</td><td>åˆ é™¤è¿æ¥åˆ°å®¹å™¨çš„æ‰€æœ‰åŒ¿åå·ã€‚</td></tr></tbody></table><h3 id="10ã€startã€stopã€restart">10ã€startã€stopã€restart</h3><p>å¼€å§‹ã€åœæ­¢ã€é‡å¯æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å§‹æœåŠ¡</span></span><br><span class="line">docker compose start [SERVICE...]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢æœåŠ¡</span></span><br><span class="line">docker compose stop [SERVICE...]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡</span></span><br><span class="line">docker compose restart [SERVICE...]</span><br></pre></td></tr></table></figure><h3 id="11ã€ls">11ã€ls</h3><p>åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨é¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">docker compose ls [OPTIONS]</span><br></pre></td></tr></table></figure><h4 id="Options-8">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“all<code>,</code>-a</td><td>æ˜¾ç¤ºå…¨éƒ¨çš„ compose é¡¹ç›®ã€‚</td></tr><tr><td>â€“filter</td><td>æ ¹æ®æä¾›çš„æ¡ä»¶ç­›é€‰è¾“å‡ºã€‚</td></tr><tr><td>â€“format</td><td>æ ¼å¼åŒ–è¾“å‡ºï¼Œå¯é€‰æ ¼å¼ï¼šprettyã€jsonï¼Œé»˜è®¤ä¸ºprettyã€‚</td></tr><tr><td>â€“quiet<code>,</code>-q</td><td>åªæ˜¾ç¤º idã€‚</td></tr></tbody></table><h3 id="12ã€version">12ã€version</h3><p>æ˜¾ç¤ºDocker Composeç‰ˆæœ¬ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose version [OPTIONS]</span><br></pre></td></tr></table></figure><h4 id="Options-9">Options</h4><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“format<code>,</code>-f</td><td>æ ¼å¼åŒ–è¾“å‡ºï¼Œå¯é€‰æ ¼å¼ï¼šprettyã€jsonï¼Œé»˜è®¤ä¸ºprettyã€‚</td></tr><tr><td>â€“short</td><td>åªæ˜¾ç¤ºComposeçš„ç‰ˆæœ¬å·ã€‚</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker compose version</span><br><span class="line">Docker Compose version v2.10.2</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><p>1ï¸âƒ£<a href="https://docs.docker.com/compose/">Overview | Docker Documentation</a></p><p>2ï¸âƒ£<a href="https://yeasy.gitbook.io/docker_practice/compose">Docker Compose - Docker â€” ä»å…¥é—¨åˆ°å®è·µ (gitbook.io)</a></p><p>3ï¸âƒ£<a href="https://docs.docker.com/compose/reference/">Overview of docker compose CLI | Docker Documentation</a></p><p>4ï¸âƒ£<a href="https://docs.docker.com/compose/install/linux/">Install on Linux | Docker Documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> compose </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker ç½‘ç»œè¯¦è§£ï¼ˆåä¸€ï¼‰</title>
      <link href="/posts/33d6d81d6365.html"/>
      <url>/posts/33d6d81d6365.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Docker-ç½‘ç»œç®€ä»‹">ä¸€ã€Docker ç½‘ç»œç®€ä»‹</h2><h3 id="1ã€ç½‘ç»œæ¨¡å¼">1ã€ç½‘ç»œæ¨¡å¼</h3><p>Docker åŸºç¡€ç½‘ç»œç±»å‹ä¸€å…±æœ‰ä¸‰ç§ï¼ˆbridgeã€host å’Œ noneï¼‰ï¼Œè¿˜æœ‰ä¸¤ç§ç”±åŸºç¡€ç½‘ç»œç±»å‹æ´¾ç”Ÿçš„ç½‘ç»œç±»å‹ï¼ˆcontainer å’Œ customï¼‰ã€‚æœ¬æ–‡è¯¦ç»†è®²è§£è¿™äº”ç§ç½‘ç»œç±»å‹ã€‚</p><p><strong>æŸ¥çœ‹ docker  ç½‘ç»œï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">994c4bd64f70   bridge    bridge    local</span><br><span class="line">9eeb43076ad2   host      host      local</span><br><span class="line">ad2da4225045   none      null      local</span><br></pre></td></tr></table></figure><p><strong>ç½‘ç»œæ¨¡å¼è¯´æ˜ï¼š</strong></p><table><thead><tr><th>ç½‘ç»œæ¨¡å¼</th><th>é…ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>host</code></td><td><code>--network=host</code></td><td>å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½® IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£</td></tr><tr><td><code>none</code></td><td><code>--network=none</code></td><td>å®¹å™¨å…³é—­ç½‘ç»œåŠŸèƒ½ï¼Œä¸è¿›è¡Œä»»ä½•ç½‘è·¯è®¾ç½®</td></tr><tr><td><code>bridge</code></td><td><code>--network=bridge</code></td><td>ä¸ºæ¯ä¸ªå®¹å™¨åˆ†é… IP ã€‚å¹¶å°†å®¹å™¨è¿æ¥åˆ° <code>docker0</code> è™šæ‹Ÿç½‘æ¡¥ä¸Šï¼Œè¿™ç§æ¨¡å¼æ˜¯é»˜è®¤æ¨¡å¼</td></tr><tr><td><code>container</code></td><td><code>--network=container:NAME_or_ID</code></td><td>å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡å’ŒIPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IP å’Œç«¯å£</td></tr><tr><td><code>custom</code></td><td><code>--network=new_bridge</code></td><td>ä¸ºæ¯ä¸ªå®¹å™¨åˆ†é… IP ã€‚å¹¶å°†å®¹å™¨è¿æ¥åˆ°è‡ªå®šä¹‰çš„è™šæ‹Ÿç½‘æ¡¥ä¸Š</td></tr></tbody></table><h3 id="2ã€ç»„ä»¶åŸç†">2ã€ç»„ä»¶åŸç†</h3><h4 id="ï¼ˆ1ï¼‰ç½‘ç»œå‘½åç©ºé—´ï¼ˆnetwork-namespaceï¼‰">ï¼ˆ1ï¼‰ç½‘ç»œå‘½åç©ºé—´ï¼ˆnetwork namespaceï¼‰</h4><p>Network Namespace æ˜¯ linux å†…æ ¸æä¾›çš„ç”¨äºå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œæ˜¯ Linux å†…æ ¸ç”¨æ¥éš”ç¦»ä¸åŒå®¹å™¨é—´çš„ç½‘ç»œèµ„æºï¼ˆæ¯ä¸ª Docker å®¹å™¨éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œå‘½åç©ºé—´ï¼‰ï¼Œç½‘ç»œå‘½åç©ºé—´ä¸»è¦éš”ç¦»çš„èµ„æºåŒ…æ‹¬ï¼š</p><ul><li><p>iptablesè§„åˆ™è¡¨</p></li><li><p>è·¯ç”±è§„åˆ™è¡¨</p></li><li><p>ç½‘ç»œè®¾å¤‡åˆ—è¡¨</p></li></ul><p>ç½‘ç»œç©ºé—´ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“ç³»ç»Ÿä¸­æ‹¥æœ‰ 2 ä¸ªç½‘ç»œå‘½åç©ºé—´ï¼š</p><img src="https://cdn.whbblog.cn/img/image-20220905132737725.png" alt="image-20220905132737725" style="zoom:80%;" /><p>ç”±äºä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ‰€ä»¥ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´ä¹‹é—´å¹¶ä¸èƒ½ç›´æ¥é€šä¿¡ã€‚ å°±å¥½æ¯”ä¸¤å°ç”µè„‘ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•ç½‘çº¿è¿æ¥ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ä¸èƒ½é€šä¿¡çš„ã€‚æ‰€ä»¥ï¼ŒLinux å†…æ ¸æä¾›äº† è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ï¼ˆvethï¼‰ è¿™ä¸ªåŠŸèƒ½ï¼Œç”¨äºè§£å†³ä¸åŒç½‘ç»œå‘½åç©ºé—´ä¹‹é—´çš„é€šä¿¡ã€‚</p><h4 id="ï¼ˆ2ï¼‰è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ï¼ˆveth-pairï¼‰">ï¼ˆ2ï¼‰è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ï¼ˆveth-pairï¼‰</h4><p>è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ï¼ˆveth-pairï¼‰ç”¨äºè§£å†³ä¸åŒç½‘ç»œå‘½åç©ºé—´ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥å°†å…¶çœ‹æˆæ˜¯ä¸¤å—æœ‰ç½‘çº¿è¿æ¥çš„ç½‘å¡ã€‚åªè¦å°†å…¶ä¸­ä¸€å—ç½‘å¡æ”¾ç½®åˆ°ç½‘ç»œå‘½åç©ºé—´Aï¼Œå¦å¤–ä¸€å—ç½‘å¡æ”¾ç½®åˆ°ç½‘ç»œå‘½åç©ºé—´Bï¼Œé‚£ä¹ˆä¸¤ä¸ªä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´å°±èƒ½å¤Ÿé€šä¿¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://cdn.whbblog.cn/img/image-20220905133354142.png" alt="image-20220905133354142" style="zoom:80%;" /><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œveth0 ä¸ veth1 ç»„æˆä¸€ä¸ªè™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ã€‚è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹å°±åƒç®¡é“ä¸€æ ·ï¼Œåªè¦å‘å…¶ä¸­ä¸€ç«¯å‘é€æ•°æ®ï¼Œå°±å¯ä»¥ä»å¦å¤–ä¸€ç«¯æ¥æ”¶åˆ°æ•°æ®ã€‚</p><p>Docker å°±æ˜¯ä½¿ç”¨ è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ æ¥å®ç°ä¸åŒå®¹å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œå…¶åŸç†å¦‚ä¸‹å›¾ï¼š</p><img src="https://cdn.whbblog.cn/img/image-20220905134216059.png" alt="image-20220905134216059" style="zoom:80%;" /><h4 id="ï¼ˆ3ï¼‰docker0-ç½‘æ¡¥">ï¼ˆ3ï¼‰docker0 ç½‘æ¡¥</h4><p>Docker æœåŠ¡é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ª docker0 ç½‘æ¡¥ï¼ˆå…¶ä¸Šæœ‰ä¸€ä¸ª docker0 å†…éƒ¨æ¥å£ï¼‰ï¼Œå®ƒåœ¨å†…æ ¸å±‚è¿é€šäº†å…¶ä»–çš„ç‰©ç†æˆ–è™šæ‹Ÿç½‘å¡ï¼Œè¿™å°±å°†æ‰€æœ‰å®¹å™¨å’Œæœ¬åœ°ä¸»æœºéƒ½æ”¾åˆ°åŒä¸€ä¸ªç‰©ç†ç½‘ç»œã€‚</p><p>Docker é»˜è®¤æŒ‡å®šäº† docker0 æ¥å£ çš„ IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œè®©ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ç½‘æ¡¥ç›¸äº’é€šä¿¡ã€‚</p><p><strong>æŸ¥çœ‹ docker0 ç½‘æ¡¥:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ip a</span><br><span class="line">...</span><br><span class="line">3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default</span><br><span class="line">    link/ether 02:42:60:fc:72:3b brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:60ff:fefc:723b/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹ docker0 è¯¦ç»†:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker network inspect bridge</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;b2f23dec622af41e1976542bc1633f6c785f7a6ff4eeaaf2a779c761dba03941&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-09-04T22:15:41.831270638-04:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: null,</span><br><span class="line">            &quot;Config&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;Subnet&quot;: &quot;172.17.0.0/16&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;</span><br><span class="line">            &quot;com.docker.network.bridge.default_bridge&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.enable_icc&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.enable_ip_masquerade&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.host_binding_ipv4&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.name&quot;: &quot;docker0&quot;,</span><br><span class="line">            &quot;com.docker.network.driver.mtu&quot;: &quot;1500&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹è¿æ¥åˆ° docker0 çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡å¯¹ï¼ˆveth-pairï¼‰:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# brctl show</span><br><span class="line">bridge name     bridge id               STP enabled     interfaces</span><br><span class="line">docker0         8000.024260fc723b       no              veth1870812</span><br><span class="line">                                                        veth1de92fe</span><br><span class="line">                                                        veth5b85033</span><br><span class="line">                                                        vethbfd4b66</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ª veth-pair ã€‚</p><p>å¦‚æœæ²¡æœ‰ brctl è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bridge-utils</span><br></pre></td></tr></table></figure><h2 id="äºŒã€ç½‘ç»œæ¨¡å¼è¯¦ç»†è¯´æ˜">äºŒã€ç½‘ç»œæ¨¡å¼è¯¦ç»†è¯´æ˜</h2><h3 id="1ã€Host-æ¨¡å¼">1ã€Host æ¨¡å¼</h3><p>åœ¨ host æ¨¡å¼ä¸‹ï¼Œå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„ Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ª Network Namespaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IP å’Œç«¯å£ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p><p>ä½¿ç”¨hostæ¨¡å¼çš„å®¹å™¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„IPåœ°å€ä¸å¤–ç•Œé€šä¿¡ï¼Œå®¹å™¨å†…éƒ¨çš„æœåŠ¡ç«¯å£ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œhostæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ç½‘ç»œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯docker hostä¸Šå·²ç»ä½¿ç”¨çš„ç«¯å£å°±ä¸èƒ½å†ç”¨äº†ï¼Œç½‘ç»œçš„éš”ç¦»æ€§ä¸å¥½ã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><img src="https://cdn.whbblog.cn/img/image-20220902105014515.png" alt="image-20220902105014515" style="zoom:80%;" /><p><strong>æŸ¥çœ‹è¯¥ç½‘ç»œæ¨¡å¼é…ç½®ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker network inspect host</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;host&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;9eeb43076ad21e4891954ab2f6682213adaa52c64f3c3668ad8fa8d4493785e4&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-06-19T23:25:06.060598453-04:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;host&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: null,</span><br><span class="line">            &quot;Config&quot;: []</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="2ã€None-æ¨¡å¼">2ã€None æ¨¡å¼</h2><p>ä½¿ç”¨noneæ¨¡å¼ï¼ŒDockerå®¹å™¨æ‹¥æœ‰è‡ªå·±çš„Network Namespaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªDockerå®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚è¿™ç§ç½‘ç»œæ¨¡å¼ä¸‹å®¹å™¨åªæœ‰loå›ç¯ç½‘ç»œï¼Œæ²¡æœ‰å…¶ä»–ç½‘å¡ã€‚noneæ¨¡å¼å¯ä»¥åœ¨å®¹å™¨åˆ›å»ºæ—¶é€šè¿‡â€“network=noneæ¥æŒ‡å®šã€‚è¿™ç§ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŠæ³•è”ç½‘ï¼Œå°é—­çš„ç½‘ç»œèƒ½å¾ˆå¥½çš„ä¿è¯å®¹å™¨çš„å®‰å…¨æ€§ã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><img src="https://cdn.whbblog.cn/img/image-20220902153414430.png" alt="image-20220902153414430" style="zoom:80%;" /><p><strong>æŸ¥çœ‹è¯¥ç½‘ç»œæ¨¡å¼é…ç½®ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker network inspect none</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;none&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;ad2da4225045337a2192fc016ca7d7fc984a82a1452221e19e07d9a5dce0cb71&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-06-19T23:25:05.946788343-04:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;null&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: null,</span><br><span class="line">            &quot;Config&quot;: []</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="3ã€Bridge-æ¨¡å¼">3ã€Bridge æ¨¡å¼</h2><p>Bridge æ¨¡å¼æ˜¯ docker çš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¸å†™ <code>--network</code> å‚æ•°ï¼Œå°±æ˜¯ bridge ç½‘æ¡¥æ¨¡å¼ã€‚</p><p>å½“ Docker è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º <code>docker0</code> çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„Dockerå®¹å™¨é»˜è®¤éƒ½ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚</p><p>ä»ã€€docker0å­ç½‘ä¸­åˆ†é…ä¸€ä¸ªIPç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½® <code>docker0</code> çš„IPåœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡ <code>veth pair</code> è®¾å¤‡ï¼ŒDocker å°† <code>veth pair</code> è®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸ºeth0ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥ <code>vethxxx</code> è¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ°docker0ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡ <code>brctl show</code> å‘½ä»¤æŸ¥çœ‹ã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><img src="https://cdn.whbblog.cn/img/docker_bridge.png" alt="docker_bridge" style="zoom:80%;" /><p><strong>æŸ¥çœ‹è¯¥ç½‘ç»œæ¨¡å¼é…ç½®ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker network inspect bridge</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;44529eeb55f59f1af6d75c7d54fab3a5283b0e021ee91b7a1163c710d5dbc573&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-09-05T04:34:26.929819942-04:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: null,</span><br><span class="line">            &quot;Config&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;Subnet&quot;: &quot;172.17.0.0/16&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;</span><br><span class="line">            &quot;com.docker.network.bridge.default_bridge&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.enable_icc&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.enable_ip_masquerade&quot;: &quot;true&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.host_binding_ipv4&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">            &quot;com.docker.network.bridge.name&quot;: &quot;docker0&quot;,</span><br><span class="line">            &quot;com.docker.network.driver.mtu&quot;: &quot;1500&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="4ã€Container-æ¨¡å¼">4ã€Container æ¨¡å¼</h2><p>Container æ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network Namespaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡ lo ç½‘å¡è®¾å¤‡é€šä¿¡ã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><img src="https://cdn.whbblog.cn/img/image-20220902152236371.png" alt="image-20220902152236371" style="zoom:80%;" /><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œ<code>Docker 2</code> å®¹å™¨å¯ä»¥é€šè¿‡<code>--network=container:Docker 1</code>  å‚æ•°ï¼ŒæŒ‡å®šè‡ªå·±çš„ç½‘ç»œå’Œä¸€ä¸ªå®¹å™¨ <code>Docker 1</code> å…±äº« IP å’Œç«¯å£ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name docker2 --network=container:docker1  nginx:latest /bin/bash</span><br></pre></td></tr></table></figure><h2 id="5ã€Custom-æ¨¡å¼">5ã€Custom æ¨¡å¼</h2><p>Custom æ¨¡å¼ç”¨äºè‡ªå®šä¹‰ docker ç½‘ç»œã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><img src="https://cdn.whbblog.cn/img/image-20220902153137551.png" alt="image-20220902153137551" style="zoom:80%;" /><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ–°å»ºè‡ªå®šä¹‰ç½‘æ¡¥ custom ï¼ŒæŒ‡å®šç½‘ç»œï¼ˆ192.168.10.0/24ï¼‰å’Œç½‘å…³ï¼ˆ192.168.10.1ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºè‡ªå®šä¹‰ç½‘ç»œ</span></span><br><span class="line">docker network create --driver bridge --subnet 192.168.10.0/24 --gateway 192.168.10.1 Custom</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œï¼ŒæŸ¥çœ‹å®šä¹‰ç½‘ç»œ</span></span><br><span class="line">docker network ls</span><br><span class="line"></span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">994c4bd64f70   bridge    bridge    local</span><br><span class="line">9eeb43076ad2   host      host      local</span><br><span class="line">24cd1b0769bd   Custom    bridge    local</span><br><span class="line">ad2da4225045   none      null      local</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è‡ªå®šä¹‰ç½‘æ¡¥ IP åœ°å€</span></span><br><span class="line">[root@localhost ~]# ip addr</span><br><span class="line"></span><br><span class="line">316: br-24cd1b0769bd: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default</span><br><span class="line">    link/ether 02:42:cb:b3:6c:a3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.10.1/24 brd 192.168.10.255 scope global br-24cd1b0769bd</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€è‡ªå®šä¹‰ç½‘ç»œå®æˆ˜-ç½‘ç»œè”é€š">ä¸‰ã€è‡ªå®šä¹‰ç½‘ç»œå®æˆ˜ - ç½‘ç»œè”é€š</h2><p>åœ¨æ²¡æœ‰ä½¿ç”¨ <strong>connect</strong> å‘½ä»¤çš„æƒ…å†µä¸‹ï¼Œä¸åŒç½‘ç»œé—´çš„å®¹å™¨æ˜¯æ— æ³•è¿›è¡Œç½‘ç»œè¿æ¥çš„ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šcontainer1 å’Œ container2ï¼Œä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œæ‰€ä»¥æ— æ³•è”é€šã€‚</p><img src="https://cdn.whbblog.cn/img/image-20220906110732392.png" alt="image-20220906110732392" style="zoom:80%;" /><h3 id="1ã€éªŒè¯ä¸åŒç½‘ç»œæ— æ³•è”é€šæ€§">1ã€éªŒè¯ä¸åŒç½‘ç»œæ— æ³•è”é€šæ€§</h3><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºå®¹å™¨-container1">ï¼ˆ1ï¼‰åˆ›å»ºå®¹å™¨ container1</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå®¹å™¨</span></span><br><span class="line">docker run -it --name container1 centosjava:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å®¹å™¨ IP</span></span><br><span class="line">[root@41eea42d9980 /]# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.8  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:ac:11:00:08  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 8  bytes 656 (656.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰åˆ›å»ºå®¹å™¨-container2">ï¼ˆ2ï¼‰åˆ›å»ºå®¹å™¨ container2</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå®¹å™¨</span></span><br><span class="line">docker run -it --name container2 --network Custom centosjava:latest /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å®¹å™¨ IP</span></span><br><span class="line">[root@7279af38152a /]# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.10.2  netmask 255.255.255.0  broadcast 192.168.10.255</span><br><span class="line">        ether 02:42:c0:a8:0a:02  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 12  bytes 1032 (1.0 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ä¸¤å°å®¹å™¨ä¹‹é—´äº’ç›¸-ping-æµ‹è¯•">ï¼ˆ3ï¼‰ä¸¤å°å®¹å™¨ä¹‹é—´äº’ç›¸ <code>ping</code> æµ‹è¯•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨ container1 ping container2 ï¼Œä¸é€š</span></span><br><span class="line">[root@41eea42d9980 /]# ping 192.168.10.2</span><br><span class="line">PING 192.168.10.2 (192.168.10.2) 56(84) bytes of data.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨ container2 ping container1 ï¼Œä¸é€š</span></span><br><span class="line">[root@7279af38152a /]# ping 172.17.0.8</span><br><span class="line">PING 172.17.0.8 (172.17.0.8) 56(84) bytes of data.</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸åŒç½‘ç»œä¹‹é—´ç½‘ç»œè”é€š">2ã€ä¸åŒç½‘ç»œä¹‹é—´ç½‘ç»œè”é€š</h3><h4 id="ï¼ˆ1ï¼‰å°†å®¹å™¨-container1-å’Œå®¹å™¨-container2-åˆ†åˆ«æ·»åŠ åˆ°å¯¹æ–¹æ‰€åœ¨çš„ç½‘ç»œä¸­">ï¼ˆ1ï¼‰å°†å®¹å™¨ container1 å’Œå®¹å™¨ container2 åˆ†åˆ«æ·»åŠ åˆ°å¯¹æ–¹æ‰€åœ¨çš„ç½‘ç»œä¸­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network connect Custom container1</span><br><span class="line">docker network connect bridge container2</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰å†æ¬¡æ£€æŸ¥ä¸¤å°å®¹å™¨ä¹‹é—´ç½‘ç»œè”é€šæ€§">ï¼ˆ2ï¼‰å†æ¬¡æ£€æŸ¥ä¸¤å°å®¹å™¨ä¹‹é—´ç½‘ç»œè”é€šæ€§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨ container1 ping container2 ï¼Œé€š</span></span><br><span class="line">[root@41eea42d9980 /]# ping 192.168.10.2</span><br><span class="line">PING 192.168.10.2 (192.168.10.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.10.2: icmp_seq=123 ttl=64 time=0.087 ms</span><br><span class="line">64 bytes from 192.168.10.2: icmp_seq=124 ttl=64 time=0.085 ms</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨ container2 ping container1 ï¼Œé€š</span></span><br><span class="line">[root@7279af38152a /]# ping 172.17.0.8</span><br><span class="line">PING 172.17.0.8 (172.17.0.8) 56(84) bytes of data.</span><br><span class="line">64 bytes from 172.17.0.8: icmp_seq=229 ttl=64 time=0.090 ms</span><br><span class="line">64 bytes from 172.17.0.8: icmp_seq=230 ttl=64 time=0.077 ms</span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡ä»¥ä¸Šå®æˆ˜è¯´æ˜ï¼Œdocker ä¸åŒç½‘ç»œä¹‹é—´äº’è”éœ€è¦ä½¿ç”¨ connect å‘½ä»¤è¿›è¡Œç½‘ç»œå‘å¸ƒï¼ï¼ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> network </tag>
            
            <tag> docker ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerfile æ„å»ºé•œåƒï¼ˆåï¼‰</title>
      <link href="/posts/8b42ff8ce116.html"/>
      <url>/posts/8b42ff8ce116.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Dockerfileç®€ä»‹">ä¸€ã€Dockerfileç®€ä»‹</h2><p>Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚</p><h3 id="1ã€é•œåƒæ„å»ºæ­¥éª¤">1ã€é•œåƒæ„å»ºæ­¥éª¤</h3><ul><li><p>ç¼–å†™ä¸€ä¸ª dockerfile æ–‡ä»¶</p></li><li><p>docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ</p></li><li><p>docker run è¿è¡Œé•œåƒ</p></li><li><p>docker push å‘å¸ƒé•œåƒï¼ˆå’±ä»¬å¯ä»¥å‘å¸ƒåˆ° DockerHubï¼Œä¹Ÿå¯ä»¥å‘å¸ƒåˆ°é˜¿é‡Œäº‘ä¸Šé¢ï¼‰</p></li></ul><h3 id="2ã€é•œåƒç»“æ„å›¾">2ã€é•œåƒç»“æ„å›¾</h3><p>é€šè¿‡å¦‚ä¸‹æ¶æ„å›¾å¯ä»¥çœ‹å‡ºé€šè¿‡ DockerFile å¯ä»¥ç›´æ¥æ„å»ºé•œåƒï¼š</p><img src="https://cdn.whbblog.cn/img/dockerfileæ¶æ„å›¾.webp" alt="dockerfileæ¶æ„å›¾" style="zoom:80%;" /><h3 id="3ã€-Dockerfile-è§£æè¿‡ç¨‹ï¼š">3ã€ Dockerfile è§£æè¿‡ç¨‹ï¼š</h3><img src="https://cdn.whbblog.cn/img/dockerfileæ„å»º.png" alt="dockerfileæ„å»º" style="zoom: 67%;" /><h3 id="3ã€Dockerfile-åŸºæœ¬ç»“æ„">3ã€Dockerfile åŸºæœ¬ç»“æ„</h3><img src="https://cdn.whbblog.cn/img/image-20220811170454773.png" alt="image-20220811170454773" style="zoom:67%;" /><h2 id="äºŒã€Dockerfile-æŒ‡ä»¤">äºŒã€Dockerfile æŒ‡ä»¤</h2><h3 id="1ã€Dockerfile-æŒ‡ä»¤ç»“æ„å›¾">1ã€Dockerfile æŒ‡ä»¤ç»“æ„å›¾</h3><img src="https://cdn.whbblog.cn/img/image-20220817150613423.png" alt="image-20220817150613423" style="zoom:80%;" /><h3 id="2ã€Dockerfile-æŒ‡ä»¤è¡¨">2ã€Dockerfile æŒ‡ä»¤è¡¨</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¿è¡Œé˜¶æ®µ</th><th>æè¿°</th></tr></thead><tbody><tr><td>FROM</td><td>BUILD</td><td>æŒ‡å®šåŸºç¡€é•œåƒï¼Œå¿…é¡»ä¸ºç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚</td></tr><tr><td>MAINTAINER</td><td>BUILD</td><td>æ„å»ºæŒ‡ä»¤ï¼Œç”¨äºå°†é•œåƒåˆ¶ä½œè€…ç›¸å…³çš„ä¿¡æ¯å†™å…¥åˆ°é•œåƒä¸­ã€‚</td></tr><tr><td>RUN</td><td>BUILD</td><td>ç”¨äºåœ¨é•œåƒå®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ã€‚</td></tr><tr><td>COPY</td><td>BUILD</td><td>æ‹·è´æ–‡ä»¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è®¿é—®ç½‘ç»œèµ„æºã€‚</td></tr><tr><td>ADD</td><td>BUILD</td><td>å°†æœ¬åœ°æ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œtarç±»å‹æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹(ç½‘ç»œå‹ç¼©èµ„æºä¸ä¼šè¢«è§£å‹)ï¼Œå¯ä»¥è®¿é—®ç½‘ç»œèµ„æºï¼Œç±»ä¼¼wgetã€‚</td></tr><tr><td>LABEL</td><td>BUILD</td><td>ç”¨äºä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®</td></tr><tr><td>ARG</td><td>BUILD</td><td>ç”¨äºæŒ‡å®šä¼ é€’ç»™æ„å»ºè¿è¡Œæ—¶çš„å˜é‡(ç»™dockerfileä¼ å‚)ï¼Œç›¸å½“äºæ„å»ºé•œåƒæ—¶å¯ä»¥åœ¨å¤–éƒ¨ä¸ºé‡Œé¢ä¼ å‚</td></tr><tr><td>ONBUILD</td><td>BUILD</td><td>ç”¨äºè®¾ç½®é•œåƒè§¦å‘å™¨</td></tr><tr><td>CMD</td><td>RUN</td><td>æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ CMD å‘½ä»¤ã€‚</td></tr><tr><td>EXPOSE</td><td>RUN</td><td>å°†å®¹å™¨ä¸­çš„ç«¯å£æ˜ å°„æˆå®¿ä¸»æœºå™¨ä¸­çš„æŸä¸ªç«¯å£ã€‚</td></tr><tr><td>ENTRYPOINT</td><td>RUN</td><td>ç±»ä¼¼äºCMDæŒ‡ä»¤ï¼Œé…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼ˆå®¹å™¨çš„åˆå§‹åŒ–å‘½ä»¤ï¼‰ã€‚</td></tr><tr><td>ENV</td><td>RUN</td><td>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</td></tr><tr><td>WORKDIR</td><td>BOTH</td><td>bulidä»¥åŠruné˜¶æ®µå¤§å®¶å·¥ä½œçš„åœºæ‰€ï¼ˆCMDä»¥åŠRUNæ‰§è¡Œçš„å·¥ä½œç›®å½•ï¼‰ã€‚</td></tr><tr><td>USER</td><td>BOTH</td><td>æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ–UIDï¼Œé»˜è®¤æ˜¯rootï¼Œåç»­çš„RUNä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚</td></tr><tr><td>VOLUME</td><td>RUN</td><td>è¿è¡Œé˜¶æ®µå®¹å™¨ä¸ºäº†æŒä¹…åŒ–å­˜å‚¨ä»¥æ­£å¸¸çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„å½¢å¼æŒ‚è½½äºå®¿ä¸»æœºä¸Šï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼Œå®¹å™¨æŒ‚äº†æ•°æ®è¿˜åœ¨ï¼Œç”¨æˆ·å­˜å‚¨æœ‰çŠ¶æ€çš„æ•°æ®ï¼‰ã€‚</td></tr></tbody></table><h3 id="3ã€DockerFile-æ³¨æ„äº‹é¡¹">3ã€DockerFile æ³¨æ„äº‹é¡¹</h3><ul><li>æ¯ä¸ª Dockerfile çš„ä¿ç•™å­—ï¼ˆæŒ‡ä»¤ï¼‰ï¼Œéƒ½å¿…é¡»æ˜¯å¤§å†™çš„</li><li>DockerFile è„šæœ¬æ‰§è¡Œæ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„</li><li><code># </code>è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œå¹¶æäº¤</li></ul><h3 id="4ã€Dockerfile-å‘½ä»¤ä»‹ç»">4ã€Dockerfile å‘½ä»¤ä»‹ç»</h3><h4 id="ï¼ˆ1ï¼‰FROM">ï¼ˆ1ï¼‰FROM</h4><p>FROMï¼šæŒ‡å®šåŸºç¡€é•œåƒï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚å¦‚æœä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼Œé‚£ä¹ˆå†™æ³•ä¸ºï¼š<code>FROM scratch</code> ã€‚åŒæ—¶æ„å‘³ç€æ¥ä¸‹æ¥æ‰€å†™çš„æŒ‡ä»¤å°†ä½œä¸ºé•œåƒçš„ç¬¬ä¸€å±‚å¼€å§‹ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">ã€€ã€€<span class="keyword">FROM</span> &lt;image&gt;</span><br><span class="line">ã€€ã€€<span class="keyword">FROM</span> &lt;image&gt;:&lt;tag&gt;</span><br><span class="line">ã€€ã€€<span class="keyword">FROM</span> &lt;image&gt;@&lt;digest&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">ã€€ã€€<span class="keyword">FROM</span> mysql:<span class="number">5.6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼štagæˆ–digestæ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™ä¸¤ä¸ªå€¼æ—¶ï¼Œä¼šä½¿ç”¨ latest ç‰ˆæœ¬çš„åŸºç¡€é•œåƒ</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰MAINTAINER">ï¼ˆ2ï¼‰MAINTAINER</h4><p>MAINTAINERï¼šç»´æŠ¤è€…ä¿¡æ¯</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ ¼å¼ï¼š</span><br><span class="line">    <span class="keyword">MAINTAINER</span> &lt;name&gt;</span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">    <span class="keyword">MAINTAINER</span> bertwu</span><br><span class="line">    <span class="keyword">MAINTAINER</span> xxx@<span class="number">163</span>.com</span><br><span class="line">    <span class="keyword">MAINTAINER</span> bertwu &lt;xxx@<span class="number">163</span>.com&gt;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰RUN">ï¼ˆ3ï¼‰RUN</h4><p>RUNï¼šæ„å»ºé•œåƒæ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><p>RUNå‘½ä»¤æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯ shell æ ¼å¼ï¼Œè¿˜æœ‰ä¸€ç§ä¸º exec æ ¼å¼ï¼š</p><p><strong>shell è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> &lt;<span class="built_in">command</span>&gt;</span></span><br><span class="line"><span class="comment"># æ³¨ï¼š&lt;command&gt; ç›¸å½“äºç»ˆç«¯æ“ä½œçš„ shell å‘½ä»¤ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install vim</span></span><br></pre></td></tr></table></figure><p><strong>exec è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> [<span class="string">&quot;executable&quot;</span>, <span class="string">&quot;param1&quot;</span>, <span class="string">&quot;param2&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> [<span class="string">&quot;/etc/execfile&quot;</span>, <span class="string">&quot;arg1&quot;</span>, <span class="string">&quot;arg1&quot;</span>] ç­‰ä»·äº RUN /etc/execfile arg1 arg2</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šRUNæŒ‡ä»¤åˆ›å»ºçš„ä¸­é—´é•œåƒä¼šè¢«ç¼“å­˜ï¼Œå¹¶ä¼šåœ¨ä¸‹æ¬¡æ„å»ºä¸­ä½¿ç”¨ã€‚å¦‚æœä¸æƒ³ä½¿ç”¨è¿™äº›ç¼“å­˜é•œåƒï¼Œå¯ä»¥åœ¨æ„å»ºæ—¶æŒ‡å®šâ€“no-cacheå‚æ•°ï¼Œå¦‚ï¼šdocker build --no-cacheã€‚</p><h4 id="ï¼ˆ4ï¼‰ADD">ï¼ˆ4ï¼‰ADD</h4><p>ADDï¼šå°†æœ¬åœ°æ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚<code>ADD</code> æŒ‡ä»¤å’Œ <code>COPY</code> çš„æ ¼å¼å’Œæ€§è´¨åŸºæœ¬ä¸€è‡´ã€‚ä½†æ˜¯åœ¨ <code>COPY</code> åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> [--<span class="built_in">chown</span>=&lt;user&gt;:&lt;group&gt;] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> [--<span class="built_in">chown</span>=&lt;user&gt;:&lt;group&gt;] [<span class="string">&quot;&lt;æºè·¯å¾„1&gt;&quot;</span>,... <span class="string">&quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;</span>]</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">    <span class="keyword">ADD</span><span class="language-bash"> hom* /mydir/          <span class="comment"># æ·»åŠ æ‰€æœ‰ä»¥&quot;hom&quot;å¼€å¤´çš„æ–‡ä»¶</span></span></span><br><span class="line">    <span class="keyword">ADD</span><span class="language-bash"> hom?.txt /mydir/      <span class="comment"># ? æ›¿ä»£ä¸€ä¸ªå•å­—ç¬¦,ä¾‹å¦‚ï¼š&quot;home.txt&quot;</span></span></span><br><span class="line">    <span class="keyword">ADD</span><span class="language-bash"> <span class="built_in">test</span> relativeDir/     <span class="comment"># æ·»åŠ  &quot;test&quot; åˆ° `WORKDIR`/relativeDir/</span></span></span><br><span class="line">    <span class="keyword">ADD</span><span class="language-bash"> <span class="built_in">test</span> /absoluteDir/    <span class="comment"># æ·»åŠ  &quot;test&quot; åˆ° /absoluteDir/</span></span></span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>&lt;æºè·¯å¾„&gt;</code> ä¸ºä¸€ä¸ª <code>tar</code> å‹ç¼©æ–‡ä»¶çš„è¯ï¼Œå‹ç¼©æ ¼å¼ä¸º <code>gzip</code>, <code>bzip2</code> ä»¥åŠ <code>xz</code> çš„æƒ…å†µä¸‹ï¼Œ<code>ADD</code> æŒ‡ä»¤å°†ä¼šè‡ªåŠ¨è§£å‹ç¼©è¿™ä¸ªå‹ç¼©æ–‡ä»¶åˆ° <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> å»ã€‚</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè‡ªåŠ¨è§£å‹ç¼©çš„åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu</code> ä¸­ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æ˜¯å¸Œæœ›å¤åˆ¶ä¸ªå‹ç¼©æ–‡ä»¶è¿›å»ï¼Œè€Œä¸è§£å‹ç¼©ï¼Œè¿™æ—¶å°±ä¸å¯ä»¥ä½¿ç”¨ <code>ADD</code> å‘½ä»¤äº†ã€‚</p><p>å› æ­¤åœ¨ <code>COPY</code> å’Œ <code>ADD</code> æŒ‡ä»¤ä¸­é€‰æ‹©çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªè¿™æ ·çš„åŸåˆ™ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å¤åˆ¶å‡ä½¿ç”¨ <code>COPY</code> æŒ‡ä»¤ï¼Œä»…åœ¨éœ€è¦è‡ªåŠ¨è§£å‹ç¼©çš„åœºåˆä½¿ç”¨ <code>ADD</code>ã€‚</p><p>åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤çš„æ—¶å€™è¿˜å¯ä»¥åŠ ä¸Š <code>--chown=&lt;user&gt;:&lt;group&gt;</code> é€‰é¡¹æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> --<span class="built_in">chown</span>=55:mygroup files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> --<span class="built_in">chown</span>=bin files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> --<span class="built_in">chown</span>=1 files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> --<span class="built_in">chown</span>=10:11 files* /mydir/</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰COPY">ï¼ˆ5ï¼‰COPY</h4><p>COPYï¼šæŒ‡ä»¤å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ <code>&lt;æºè·¯å¾„&gt;</code> çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„ <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> ä½ç½®ã€‚åŠŸèƒ½ç±»ä¼¼ ADDï¼Œä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§ç±»ä¼¼äºå‘½ä»¤è¡Œï¼Œä¸€ç§ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ã€‚ä¸ä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è®¿é—®ç½‘ç»œèµ„æºã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> [--<span class="built_in">chown</span>=&lt;user&gt;:&lt;group&gt;] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> [--<span class="built_in">chown</span>=&lt;user&gt;:&lt;group&gt;] [<span class="string">&quot;&lt;æºè·¯å¾„1&gt;&quot;</span>,... <span class="string">&quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;</span>]</span></span><br></pre></td></tr></table></figure><p><code>&lt;æºè·¯å¾„&gt;</code> å¯ä»¥æ˜¯å¤šä¸ªï¼Œç”šè‡³å¯ä»¥æ˜¯é€šé…ç¬¦ï¼Œå…¶é€šé…ç¬¦è§„åˆ™è¦æ»¡è¶³ Go çš„ <a href="https://golang.org/pkg/path/filepath/#Match"><code>filepath.Match</code> (opens new window)</a>è§„åˆ™ï¼Œå¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> hom* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> hom?.txt /mydir/</span></span><br></pre></td></tr></table></figure><p><code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> å¯ä»¥æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼ˆå·¥ä½œç›®å½•å¯ä»¥ç”¨ <code>WORKDIR</code> æŒ‡ä»¤æ¥æŒ‡å®šï¼‰ã€‚ç›®æ ‡è·¯å¾„ä¸éœ€è¦äº‹å…ˆåˆ›å»ºï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ä¼šåœ¨å¤åˆ¶æ–‡ä»¶å‰å…ˆè¡Œåˆ›å»ºç¼ºå¤±ç›®å½•ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä½¿ç”¨ <code>COPY</code> æŒ‡ä»¤ï¼Œæºæ–‡ä»¶çš„å„ç§å…ƒæ•°æ®éƒ½ä¼šä¿ç•™ã€‚æ¯”å¦‚è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€æ–‡ä»¶å˜æ›´æ—¶é—´ç­‰ã€‚è¿™ä¸ªç‰¹æ€§å¯¹äºé•œåƒå®šåˆ¶å¾ˆæœ‰ç”¨ã€‚ç‰¹åˆ«æ˜¯æ„å»ºç›¸å…³æ–‡ä»¶éƒ½åœ¨ä½¿ç”¨ Git è¿›è¡Œç®¡ç†çš„æ—¶å€™ã€‚</p><p>åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤çš„æ—¶å€™è¿˜å¯ä»¥åŠ ä¸Š <code>--chown=&lt;user&gt;:&lt;group&gt;</code> é€‰é¡¹æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --<span class="built_in">chown</span>=55:mygroup files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --<span class="built_in">chown</span>=bin files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --<span class="built_in">chown</span>=1 files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --<span class="built_in">chown</span>=10:11 files* /mydir/</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>COPY ä¸ä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è®¿é—®ç½‘ç»œèµ„æºã€‚</li><li>å¦‚æœæºè·¯å¾„ä¸ºæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶çš„æ—¶å€™ä¸æ˜¯ç›´æ¥å¤åˆ¶è¯¥æ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯å°†æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹å¤åˆ¶åˆ°ç›®æ ‡è·¯å¾„ã€‚</li></ul><h4 id="ï¼ˆ6ï¼‰LABEL">ï¼ˆ6ï¼‰LABEL</h4><p>LABELï¼šç”¨äºä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®ï¼Œ<code>LABEL</code> æ˜¯é”®å€¼å¯¹ã€‚è¦åœ¨ <code>LABEL</code> å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼Œè¯·åƒåœ¨å‘½ä»¤è¡Œä¸­ä¸€æ ·ä½¿ç”¨å¼•å·å’Œåæ–œæ ã€‚ä¸€äº›ç”¨æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">LABEL</span><span class="language-bash"> &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">ã€€ã€€<span class="keyword">LABEL</span><span class="language-bash"> version=<span class="string">&quot;1.0&quot;</span> description=<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨&quot;</span> by=<span class="string">&quot;ITç¬”å½•&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼š</span></span><br><span class="line">ã€€ã€€ä½¿ç”¨<span class="keyword">LABEL</span><span class="language-bash">æŒ‡å®šå…ƒæ•°æ®æ—¶ï¼Œä¸€æ¡LABELæŒ‡å®šå¯ä»¥æŒ‡å®šä¸€æˆ–å¤šæ¡å…ƒæ•°æ®ï¼ŒæŒ‡å®šå¤šæ¡å…ƒæ•°æ®æ—¶ä¸åŒå…ƒæ•°æ®</span></span><br><span class="line">ã€€ã€€ä¹‹é—´é€šè¿‡ç©ºæ ¼åˆ†éš”ã€‚æ¨èå°†æ‰€æœ‰çš„å…ƒæ•°æ®é€šè¿‡ä¸€æ¡<span class="keyword">LABEL</span><span class="language-bash">æŒ‡ä»¤æŒ‡å®šï¼Œä»¥å…ç”Ÿæˆè¿‡å¤šçš„ä¸­é—´é•œåƒã€‚</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰ARG">ï¼ˆ7ï¼‰ARG</h4><p>ARGï¼šç”¨äºæŒ‡å®šä¼ é€’ç»™æ„å»ºè¿è¡Œæ—¶çš„å˜é‡ï¼ˆç»™dockerfileä¼ å‚ï¼‰ï¼Œç›¸å½“äºæ„å»ºé•œåƒæ—¶å¯ä»¥åœ¨å¤–éƒ¨ä¸ºé‡Œé¢ä¼ å‚ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">ARG</span> &lt;name&gt;[=&lt;default value&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">    <span class="keyword">ARG</span> site</span><br><span class="line">    <span class="keyword">ARG</span> build_user=www</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ8ï¼‰ONBUILD">ï¼ˆ8ï¼‰ONBUILD</h4><p>OUTBUILDï¼šç”¨äºè®¾ç½®é•œåƒè§¦å‘å™¨ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡ä»¤ï¼Œå®ƒåé¢è·Ÿçš„æ˜¯å…¶å®ƒæŒ‡ä»¤ï¼Œæ¯”å¦‚ <code>RUN</code>, <code>COPY</code> ç­‰ï¼Œè€Œè¿™äº›æŒ‡ä»¤ï¼Œåœ¨å½“å‰é•œåƒæ„å»ºæ—¶å¹¶ä¸ä¼šè¢«æ‰§è¡Œã€‚åªæœ‰å½“ä»¥å½“å‰é•œåƒä¸ºåŸºç¡€é•œåƒï¼Œå»æ„å»ºä¸‹ä¸€çº§é•œåƒçš„æ—¶å€™æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼šã€€</span></span><br><span class="line"><span class="keyword">ONBUILD</span> [INSTRUCTION]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">ã€€ã€€<span class="keyword">ONBUILD</span> <span class="keyword">ADD</span><span class="language-bash"> . /app/src</span></span><br><span class="line">ã€€ã€€<span class="keyword">ONBUILD</span> <span class="keyword">RUN</span><span class="language-bash"> /usr/local/bin/python-build --<span class="built_in">dir</span> /app/src</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ9ï¼‰CMD">ï¼ˆ9ï¼‰CMD</h4><p>CMDï¼šä¸ºå¯åŠ¨çš„å®¹å™¨æŒ‡å®šé»˜è®¤è¦è¿è¡Œçš„ç¨‹åºï¼Œç¨‹åºè¿è¡Œç»“æŸï¼Œå®¹å™¨ä¹Ÿå°±ç»“æŸã€‚CMD æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºå¯è¢« docker run å‘½ä»¤è¡Œå‚æ•°ä¸­æŒ‡å®šè¦è¿è¡Œçš„ç¨‹åºæ‰€è¦†ç›–ã€‚</p><p>ç±»ä¼¼äº RUN æŒ‡ä»¤ï¼Œç”¨äºè¿è¡Œç¨‹åºï¼Œä½†äºŒè€…è¿è¡Œçš„æ—¶é—´ç‚¹ä¸åŒ:</p><ul><li>CMD åœ¨docker run æ—¶è¿è¡Œã€‚</li><li>RUN æ˜¯åœ¨ docker buildã€‚</li></ul><p><strong>æ³¨æ„ï¼šå¦‚æœ Dockerfile ä¸­å¦‚æœå­˜åœ¨å¤šä¸ª CMD æŒ‡ä»¤ï¼Œä»…æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;executable&quot;</span>,<span class="string">&quot;param1&quot;</span>,<span class="string">&quot;param2&quot;</span>] (æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼˜å…ˆ)</span></span><br><span class="line">    <span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;param1&quot;</span>,<span class="string">&quot;param2&quot;</span>] (è®¾ç½®äº†ENTRYPOINTï¼Œåˆ™ç›´æ¥è°ƒç”¨ENTRYPOINTæ·»åŠ å‚æ•°)</span></span><br><span class="line">    <span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">command</span> param1 param2 (æ‰§è¡Œshellå†…éƒ¨å‘½ä»¤)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">    <span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;This is a test.&quot;</span> | <span class="built_in">wc</span> -l</span></span><br><span class="line">    <span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/usr/bin/wc&quot;</span>,<span class="string">&quot;--help&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œæ—¶å¯ä»¥æŒ‡å®šæ–°çš„å‘½ä»¤æ¥æ›¿ä»£é•œåƒè®¾ç½®ä¸­çš„è¿™ä¸ªé»˜è®¤å‘½ä»¤ï¼Œæ¯”å¦‚ï¼Œ<code>ubuntu</code> é•œåƒé»˜è®¤çš„ <code>CMD</code> æ˜¯ <code>/bin/bash</code>ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ <code>docker run -it ubuntu</code> çš„è¯ï¼Œä¼šç›´æ¥è¿›å…¥ <code>bash</code>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶æŒ‡å®šè¿è¡Œåˆ«çš„å‘½ä»¤ï¼Œå¦‚ <code>docker run -it ubuntu cat /etc/os-release</code>ã€‚è¿™å°±æ˜¯ç”¨ <code>cat /etc/os-release</code> å‘½ä»¤æ›¿æ¢äº†é»˜è®¤çš„ <code>/bin/bash</code> å‘½ä»¤äº†ï¼Œè¾“å‡ºäº†ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚</p><p>æåˆ° <code>CMD</code> å°±ä¸å¾—ä¸æå®¹å™¨ä¸­åº”ç”¨åœ¨å‰å°æ‰§è¡Œå’Œåå°æ‰§è¡Œçš„é—®é¢˜ã€‚è¿™æ˜¯åˆå­¦è€…å¸¸å‡ºç°çš„ä¸€ä¸ªæ··æ·†ã€‚</p><p>Docker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­çš„åº”ç”¨éƒ½åº”è¯¥ä»¥å‰å°æ‰§è¡Œï¼Œè€Œä¸æ˜¯åƒè™šæ‹Ÿæœºã€ç‰©ç†æœºé‡Œé¢é‚£æ ·ï¼Œç”¨ <code>systemd</code> å»å¯åŠ¨åå°æœåŠ¡ï¼Œå®¹å™¨å†…æ²¡æœ‰åå°æœåŠ¡çš„æ¦‚å¿µã€‚</p><p>ä¸€äº›åˆå­¦è€…å°† <code>CMD</code> å†™ä¸ºï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="language-bash"> service nginx start</span></span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°å®¹å™¨æ‰§è¡Œåå°±ç«‹å³é€€å‡ºäº†ã€‚ç”šè‡³åœ¨å®¹å™¨å†…å»ä½¿ç”¨ <code>systemctl</code> å‘½ä»¤ç»“æœå´å‘ç°æ ¹æœ¬æ‰§è¡Œä¸äº†ã€‚è¿™å°±æ˜¯å› ä¸ºæ²¡æœ‰ææ˜ç™½å‰å°ã€åå°çš„æ¦‚å¿µï¼Œæ²¡æœ‰åŒºåˆ†å®¹å™¨å’Œè™šæ‹Ÿæœºçš„å·®å¼‚ï¼Œä¾æ—§åœ¨ä»¥ä¼ ç»Ÿè™šæ‹Ÿæœºçš„è§’åº¦å»ç†è§£å®¹å™¨ã€‚</p><p>å¯¹äºå®¹å™¨è€Œè¨€ï¼Œå…¶å¯åŠ¨ç¨‹åºå°±æ˜¯å®¹å™¨åº”ç”¨è¿›ç¨‹ï¼Œå®¹å™¨å°±æ˜¯ä¸ºäº†ä¸»è¿›ç¨‹è€Œå­˜åœ¨çš„ï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œå®¹å™¨å°±å¤±å»äº†å­˜åœ¨çš„æ„ä¹‰ï¼Œä»è€Œé€€å‡ºï¼Œå…¶å®ƒè¾…åŠ©è¿›ç¨‹ä¸æ˜¯å®ƒéœ€è¦å…³å¿ƒçš„ä¸œè¥¿ã€‚</p><p>è€Œä½¿ç”¨ <code>service nginx start</code> å‘½ä»¤ï¼Œåˆ™æ˜¯å¸Œæœ› upstart æ¥ä»¥åå°å®ˆæŠ¤è¿›ç¨‹å½¢å¼å¯åŠ¨ <code>nginx</code> æœåŠ¡ã€‚è€Œåˆšæ‰è¯´äº† <code>CMD service nginx start</code> ä¼šè¢«ç†è§£ä¸º <code>CMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;service nginx start&quot;]</code>ï¼Œå› æ­¤ä¸»è¿›ç¨‹å®é™…ä¸Šæ˜¯ <code>sh</code>ã€‚é‚£ä¹ˆå½“ <code>service nginx start</code> å‘½ä»¤ç»“æŸåï¼Œ<code>sh</code> ä¹Ÿå°±ç»“æŸäº†ï¼Œ<code>sh</code> ä½œä¸ºä¸»è¿›ç¨‹é€€å‡ºäº†ï¼Œè‡ªç„¶å°±ä¼šä»¤å®¹å™¨é€€å‡ºã€‚</p><p>æ­£ç¡®çš„åšæ³•æ˜¯ç›´æ¥æ‰§è¡Œ <code>nginx</code> å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”è¦æ±‚ä»¥å‰å°å½¢å¼è¿è¡Œã€‚æ¯”å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;nginx&quot;</span>, <span class="string">&quot;-g&quot;</span>, <span class="string">&quot;daemon off;&quot;</span>]</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ10ï¼‰EXPOSE">ï¼ˆ10ï¼‰EXPOSE</h4><p>EXPOSEï¼šç”¨äºä¸ºå®¹å™¨æš´éœ²ç«¯å£åˆ°å¤–éƒ¨ï¼Œç”¨äºå®ç°é€šè®¯ï¼Œç±»ä¼¼äº<code>docker run</code> çš„ -p é€‰é¡¹ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">EXPOSE</span> &lt;port&gt; [&lt;port&gt;...]</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">    <span class="keyword">EXPOSE</span> <span class="number">80</span> <span class="number">443</span></span><br><span class="line">    <span class="keyword">EXPOSE</span> <span class="number">8080</span>    </span><br><span class="line">    <span class="keyword">EXPOSE</span> <span class="number">11211</span>/tcp <span class="number">11211</span>/udp</span><br></pre></td></tr></table></figure><p>ä¸ç®¡ EXPOSE è®¾ç½®æ˜¯ä»€ä¹ˆï¼Œéƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ -p æ ‡å¿—åœ¨è¿è¡Œæ—¶è¦†ç›–å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">docker run -p 80:80/tcp -p 80:80/udp ...</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ11ï¼‰ENTRYPOINT">ï¼ˆ11ï¼‰ENTRYPOINT</h4><p>ENTRYPOINT æŒ‡å®šé•œåƒçš„é»˜è®¤å…¥å£å‘½ä»¤ï¼Œè¯¥å…¥å£å‘½ä»¤ä¼šåœ¨å¯åŠ¨å®¹å™¨æ—¶ä½œä¸ºæ ¹å‘½ä»¤æ‰§è¡Œï¼Œæ‰€æœ‰å…¶ä»–ä¼ å…¥å€¼ä½œä¸ºè¯¥å‘½ä»¤çš„å‚æ•°ã€‚</p><p>ENTRYPOINT çš„å€¼å¯ä»¥é€šè¿‡ docker run --entrypoint æ¥è¦†ç›–æ‰ã€‚</p><p>ENTRYPOINT æœ‰ä¸¤ç§è¯­æ³•æ ¼å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># exec æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;executable&quot;</span>, <span class="string">&quot;param1&quot;</span>, <span class="string">&quot;param2&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shell æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> <span class="built_in">command</span> param1 param2</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># exec æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;echo&quot;</span>, <span class="string">&quot;hello docker&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shell æ ¼å¼</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;hello docker&quot;</span></span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>ENTRYPOINT ä¸ CMD éå¸¸ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯é€šè¿‡ docker run æ‰§è¡Œçš„å‘½ä»¤ä¸ä¼šè¦†ç›– ENTRYPOINTã€‚</li><li>Dockerfile ä¸­åªå…è®¸æœ‰ä¸€ä¸ª ENTRYPOINT å‘½ä»¤ï¼Œå¤šæŒ‡å®šæ—¶ä¼šè¦†ç›–å‰é¢çš„è®¾ç½®ï¼Œè€Œåªæ‰§è¡Œæœ€åçš„ ENTRYPOINT æŒ‡ä»¤ã€‚<br>é€šå¸¸æƒ…å†µä¸‹ï¼ŒENTRYPOINT ä¸ CMD ä¸€èµ·ä½¿ç”¨ï¼ŒENTRYPOINT å†™é»˜è®¤å‘½ä»¤ï¼Œå½“éœ€è¦å‚æ•°æ—¶å€™ä½¿ç”¨ CMD ä¼ å‚ã€‚</li></ul><h4 id="ï¼ˆ12ï¼‰ENV">ï¼ˆ12ï¼‰ENV</h4><p>ENVï¼šç”¨æ¥åœ¨é•œåƒæ„å»ºè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåç»­çš„ RUN å¯ä»¥ä½¿ç”¨å®ƒæ‰€åˆ›å»ºçš„ç¯å¢ƒå˜é‡ã€‚å½“åˆ›å»ºåŸºäºè¯¥é•œåƒçš„ container çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ‹¥æœ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">ENV</span> &lt;key&gt; &lt;value&gt;  <span class="comment">#&lt;key&gt;ä¹‹åçš„æ‰€æœ‰å†…å®¹å‡ä¼šè¢«è§†ä¸ºå…¶&lt;value&gt;çš„ç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤ï¼Œä¸€æ¬¡åªèƒ½è®¾ç½®ä¸€ä¸ªå˜é‡</span></span><br><span class="line">    <span class="keyword">ENV</span> &lt;key&gt;=&lt;value&gt; ...  <span class="comment">#å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ï¼Œæ¯ä¸ªå˜é‡ä¸ºä¸€ä¸ª&quot;&lt;key&gt;=&lt;value&gt;&quot;çš„é”®å€¼å¯¹ï¼Œå¦‚æœ&lt;key&gt;ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨\æ¥è¿›è¡Œè½¬ä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡&quot;&quot;æ¥è¿›è¡Œæ ‡ç¤ºï¼›å¦å¤–ï¼Œåæ–œçº¿ä¹Ÿå¯ä»¥ç”¨äºç»­è¡Œ</span></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">    <span class="keyword">ENV</span> myName John Doe</span><br><span class="line">    <span class="keyword">ENV</span> myDog Rex The Dog</span><br><span class="line">    <span class="keyword">ENV</span> myCat=fluffy</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ13ï¼‰WORKDIR">ï¼ˆ13ï¼‰WORKDIR</h4><p>WORKDIRï¼šç”¨äºæŒ‡å®šå®¹å™¨çš„ä¸€ä¸ªç›®å½•ï¼Œ ç›¸å½“äºè®¾ç½®å®¹å™¨çš„å·¥ä½œç›®å½•ã€‚ä»¥åå„å±‚çš„å½“å‰ç›®å½•å°±è¢«æ”¹ä¸ºæŒ‡å®šçš„ç›®å½•ï¼Œå¦‚è¯¥ç›®å½•ä¸å­˜åœ¨ï¼Œ<code>WORKDIR</code> ä¼šå¸®ä½ å»ºç«‹ç›®å½•ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line">    <span class="keyword">WORKDIR</span><span class="language-bash"> /path/to/workdir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line">    <span class="keyword">WORKDIR</span><span class="language-bash"> /a  (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a)</span></span><br><span class="line">    <span class="keyword">WORKDIR</span><span class="language-bash"> b  (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a/b)</span></span><br><span class="line">    <span class="keyword">WORKDIR</span><span class="language-bash"> c  (è¿™æ—¶å·¥ä½œç›®å½•ä¸º/a/b/c)</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šé€šè¿‡ WORKDIR è®¾ç½®å·¥ä½œç›®å½•åï¼ŒDockerfile ä¸­å…¶åçš„å‘½ä»¤ <code>RUNã€CMDã€ENTRYPOINTã€ADDã€COPY</code> ç­‰å‘½ä»¤éƒ½ä¼šåœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œã€‚åœ¨ä½¿ç”¨ <code>docker run</code> è¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ -w å‚æ•°è¦†ç›–æ„å»ºæ—¶æ‰€è®¾ç½®çš„å·¥ä½œç›®å½•ã€‚</p><h4 id="ï¼ˆ14ï¼‰USER">ï¼ˆ14ï¼‰USER</h4><p>USERï¼šæŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„ RUN ä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚è¿™ä¸ªç”¨æˆ·å¿…é¡»æ˜¯äº‹å…ˆå»ºç«‹å¥½çš„ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢ã€‚ä½¿ç”¨ USER æŒ‡å®šç”¨æˆ·æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç”¨æˆ·åã€UID æˆ– GIDï¼Œæˆ–æ˜¯ä¸¤è€…çš„ç»„åˆã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼:ã€€ã€€</span></span><br><span class="line"><span class="keyword">USER</span> <span class="keyword">user</span>ã€€ã€€</span><br><span class="line"><span class="keyword">USER</span> <span class="keyword">user</span>:groupã€€ã€€</span><br><span class="line"><span class="keyword">USER</span> uidã€€ã€€</span><br><span class="line"><span class="keyword">USER</span> uid:gidã€€ã€€</span><br><span class="line"><span class="keyword">USER</span> <span class="keyword">user</span>:gidã€€ã€€</span><br><span class="line"><span class="keyword">USER</span> uid:group</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š    ã€€ã€€</span></span><br><span class="line">     <span class="keyword">USER</span> www</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä½¿ç”¨ USER æŒ‡å®šç”¨æˆ·åï¼ŒDockerfile ä¸­å…¶åçš„å‘½ä»¤ <code>RUNã€CMDã€ENTRYPOINT</code> éƒ½å°†ä½¿ç”¨è¯¥ç”¨æˆ·ã€‚é•œåƒæ„å»ºå®Œæˆåï¼Œé€šè¿‡ <code>docker run</code> è¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>-u</code> å‚æ•°æ¥è¦†ç›–æ‰€æŒ‡å®šçš„ç”¨æˆ·ã€‚</p><h4 id="ï¼ˆ15ï¼‰VOLUME">ï¼ˆ15ï¼‰VOLUME</h4><p>VOLUMEï¼šç”¨äºæŒ‡å®šæŒä¹…åŒ–ç›®å½•ï¼ˆæŒ‡å®šæ­¤ç›®å½•å¯ä»¥è¢«æŒ‚è½½å‡ºå»ï¼‰ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> [<span class="string">&quot;&lt;è·¯å¾„1&gt;&quot;</span>, <span class="string">&quot;&lt;è·¯å¾„2&gt;&quot;</span>...]</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> &lt;è·¯å¾„&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /data</span></span><br></pre></td></tr></table></figure><p>å®¹å™¨è¿è¡Œæ—¶åº”è¯¥å°½é‡ä¿æŒå®¹å™¨å­˜å‚¨å±‚ä¸å‘ç”Ÿå†™æ“ä½œï¼Œå¯¹äºæ•°æ®åº“ç±»éœ€è¦ä¿å­˜åŠ¨æ€æ•°æ®çš„åº”ç”¨ï¼Œå…¶æ•°æ®åº“æ–‡ä»¶åº”è¯¥ä¿å­˜äºå·(volume)ä¸­ã€‚ä¸ºäº†é˜²æ­¢è¿è¡Œæ—¶ç”¨æˆ·å¿˜è®°å°†åŠ¨æ€æ–‡ä»¶æ‰€ä¿å­˜ç›®å½•æŒ‚è½½ä¸ºå·ï¼Œåœ¨ <code>Dockerfile</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆæŒ‡å®šæŸäº›ç›®å½•æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¦‚æœç”¨æˆ·ä¸æŒ‡å®šæŒ‚è½½ï¼Œå…¶åº”ç”¨ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå‘å®¹å™¨å­˜å‚¨å±‚å†™å…¥å¤§é‡æ•°æ®ã€‚</p><p>ä¸Šé¢ç¤ºä¾‹çš„ <code>/data</code> ç›®å½•å°±ä¼šåœ¨å®¹å™¨è¿è¡Œæ—¶è‡ªåŠ¨æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œä»»ä½•å‘ <code>/data</code> ä¸­å†™å…¥çš„ä¿¡æ¯éƒ½ä¸ä¼šè®°å½•è¿›å®¹å™¨å­˜å‚¨å±‚ï¼Œä»è€Œä¿è¯äº†å®¹å™¨å­˜å‚¨å±‚çš„æ— çŠ¶æ€åŒ–ã€‚å½“ç„¶ï¼Œè¿è¡Œå®¹å™¨æ—¶å¯ä»¥è¦†ç›–è¿™ä¸ªæŒ‚è½½è®¾ç½®ã€‚æ¯”å¦‚ï¼š`</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v mydata:/data xxxx</span><br></pre></td></tr></table></figure><p>åœ¨è¿™è¡Œå‘½ä»¤ä¸­ï¼Œå°±ä½¿ç”¨äº† <code>mydata</code> è¿™ä¸ªå‘½åå·æŒ‚è½½åˆ°äº† <code>/data</code> è¿™ä¸ªä½ç½®ï¼Œæ›¿ä»£äº† <code>Dockerfile</code> ä¸­å®šä¹‰çš„åŒ¿åå·çš„æŒ‚è½½é…ç½®ã€‚</p><h2 id="ä¸‰ã€å®æˆ˜-Dockerfile">ä¸‰ã€å®æˆ˜ Dockerfile</h2><h3 id="1ã€å®æˆ˜ä»‹ç»">1ã€å®æˆ˜ä»‹ç»</h3><p>åŸºç¡€é•œåƒä¸º <code>CentOS 7</code> ï¼Œæœ¬æ¬¡å®æˆ˜æ¨¡æ‹Ÿåœ¨ <code>CentOS 7</code> çš„åŸºç¡€ä¸Šå®‰è£… <code>vim</code>ã€<code>ifconfig</code> å’Œ <code>java</code> ç¯å¢ƒã€‚</p><p>javaç¯å¢ƒä¸‹è½½åœ°å€ï¼š<a href="https://mirrors.yangxingzhen.com/jdk/">Index of /jdk/ (yangxingzhen.com)</a></p><h3 id="2ã€Dockerfile-æ–‡ä»¶é…ç½®">2ã€Dockerfile æ–‡ä»¶é…ç½®</h3><p>åœ¨æŒ‡å®šè·¯å¾„ä¸‹ <code>vim DockerFile</code> ï¼Œå¡«å†™å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šåŸºç¡€é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> centos:centos7</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»´æŠ¤è€…ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> whbblog&lt;whbblog.cn&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… VIM ç¼–è¾‘å™¨</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install vim</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… ifconfig å‘½ä»¤</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install net-tools</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… java8 åŠ lib åº“</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install glibc.i686</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> /usr/local/java</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ADD æ˜¯æŠŠ jdk-8u192-linux-x64.tar.gz æ·»åŠ åˆ°å®¹å™¨ä¸­,å®‰è£…åŒ…å¿…é¡»è¦å’Œ Dockerfile æ–‡ä»¶åœ¨åŒä¸€ä½ç½®</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> jdk-8u192-linux-x64.tar.gz /usr/local/java/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®javaç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME /usr/local/java/jdk1.<span class="number">8.0</span>_192</span><br><span class="line"><span class="keyword">ENV</span> JRE_HOME $JAVA_HOME/jre</span><br><span class="line"><span class="keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line"><span class="keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="comment"># æš´æ¼ç«¯å£ </span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å®¹å™¨å¯åŠ¨æ‰§è¡Œå‘½ä»¤ </span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;success--------------ok&quot;</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> /bin/bash </span></span><br></pre></td></tr></table></figure><h3 id="3ã€é•œåƒæ„å»º">3ã€é•œåƒæ„å»º</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œé•œåƒæ„å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker build -t centosjava .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é•œåƒæ„å»ºæˆåŠŸè¾“å…¥å¦‚ä¸‹ï¼š</span></span><br><span class="line">Successfully built cd6fa33c8f3e</span><br><span class="line">Successfully tagged centosjava:latest</span><br></pre></td></tr></table></figure><h3 id="4ã€é•œåƒæµ‹è¯•">4ã€é•œåƒæµ‹è¯•</h3><p>å¯åŠ¨å®¹å™¨ï¼ŒéªŒè¯æ„å»ºçš„é•œåƒï¼Œæ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker run -it centosjava /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ java ç‰ˆæœ¬</span></span><br><span class="line">[root@5fe7e4724010 /]# java -version</span><br><span class="line">java version &quot;1.8.0_192&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_192-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.192-b12, mixed mode)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ vim å‘½ä»¤</span></span><br><span class="line">[root@5fe7e4724010 /]# vim a.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ ifconfig å‘½ä»¤</span></span><br><span class="line">[root@5fe7e4724010 /]# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:ac:11:00:02  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 8  bytes 656 (656.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure><h2 id="å››ã€å‚è€ƒæ–‡çŒ®">å››ã€å‚è€ƒæ–‡çŒ®</h2><p>1ï¸âƒ£<a href="https://blog.csdn.net/cristianoxm/article/details/125646230">Dockerfileçš„ä½¿ç”¨åŠä½¿ç”¨</a></p><p>2ï¸âƒ£<a href="https://juejin.cn/post/7111883667709886478">åˆè¯†Docker&amp;&amp;Dockerfileå¿«é€Ÿå…¥é—¨çŸ¥è¯†ç‚¹æ•´ç†</a></p><p>3ï¸âƒ£<a href="https://blog.csdn.net/m0_46090675/article/details/121846718">Dockerfile è¯¦è§£</a></p><p>4ï¸âƒ£<a href="https://vuepress.mirror.docker-practice.com/image/dockerfile/">Dockerfile æŒ‡ä»¤è¯¦è§£ | Docker ä»å…¥é—¨åˆ°å®è·µ (docker-practice.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Dockerfile </tag>
            
            <tag> é•œåƒæ„å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å¸¸ç”¨è½¯ä»¶å®‰è£…ï¼ˆä¹ï¼‰</title>
      <link href="/posts/371704330a55.html"/>
      <url>/posts/371704330a55.html</url>
      
        <content type="html"><![CDATA[<p><strong>æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»é€šè¿‡ Docker å®‰è£…éƒ¨ç½²å¸¸ç”¨è½¯ä»¶ Tomcatã€mysql å’Œ nginx ã€‚</strong></p><h2 id="ä¸€ã€Tomcat-å®‰è£…">ä¸€ã€Tomcat å®‰è£…</h2><h3 id="1ã€æŸ¥æ‰¾é•œåƒ">1ã€æŸ¥æ‰¾é•œåƒ</h3><p>Tomcat é•œåƒå¯ä»¥é€šè¿‡è®¿é—® <a href="https://hub.docker.com/search">docker hub</a> æˆ–è€…é€šè¿‡å‘½ä»¤ <code>docker search</code> æ¥æŸ¥æ‰¾ã€‚</p><p>ç¤ºä¾‹ï¼šé€šè¿‡ <a href="https://hub.docker.com/search">docker hub</a> æŸ¥æ‰¾ Tomcat é•œåƒã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220805111619122.png" alt="image-20220805111619122"></p><p>ä½¿ç”¨å‘½ä»¤ <code>docker search tomcat</code> è¿›è¡Œé•œåƒæœç´¢ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220805120946569.png" alt="image-20220805120946569"></p><h3 id="2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹">2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹</h3><p><strong>é•œåƒæ‹‰å–ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tomcat</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹é•œåƒï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                          TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">tomcat                                              latest    fb5657adc892   7 months ago    680MB</span><br></pre></td></tr></table></figure><h3 id="3ã€è¿è¡Œ-tomcat-å®¹å™¨">3ã€è¿è¡Œ tomcat å®¹å™¨</h3><p><strong>è¿è¡Œ tomcat å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mytomcat -p 8080:8080 tomcat:latest</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹ tomcat å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20220805121915872.png" alt="image-20220805121915872"></p><h3 id="4ã€è®¿é—®-tomcat-é¦–é¡µ">4ã€è®¿é—® tomcat é¦–é¡µ</h3><p><strong>è®¿é—® <a href="http://ip:8080">http://ip:8080</a> éªŒè¯å®¹å™¨è¿è¡Œæ˜¯å¦æ­£å¸¸ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220805122308098.png" alt="image-20220805122308098"></p><p><strong>ç”±äº Tomcat 10 ç‰ˆæœ¬çŒ«ä¸»é¡µä½ç½®å†…å®¹å˜æ›´ï¼Œæ‰€ä»¥è¿›å…¥å®¹å™¨éœ€è¦ä¿®æ”¹ä¸»é¡µç›®å½•å†…å®¹ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥ tomcat å®¹å™¨</span></span><br><span class="line">docker exec -it mytomcat /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸»é¡µå†…å®¹åœ¨ webapps.list ä¸­ï¼Œè€Œæˆ‘ä»¬è®¿é—®çš„è·¯å¾„åœ¨ webapps ç›®å½•ï¼Œæ‰€ä»¥éœ€è¦å¤åˆ¶ webapps.list ç›®å½•ä¸‹çš„æ–‡ä»¶å†…å®¹åˆ° webapps ç›®å½•ä¸‹ã€‚</span></span><br><span class="line">root@f96e06103310:/usr/local/tomcat# ls</span><br><span class="line">BUILDING.txt  CONTRIBUTING.md  LICENSENOTICEREADME.md  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  native-jni-lib  temp  webapps  webapps.dist  work</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤åˆ¶</span></span><br><span class="line">root@f96e06103310:/usr/local/tomcat# cp -r webapps.dist/* webapps/</span><br></pre></td></tr></table></figure><p><strong>å†æ¬¡è®¿é—® <a href="http://ip:8080">http://ip:8080</a> éªŒè¯å®¹å™¨è¿è¡Œæ˜¯å¦æ­£å¸¸ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220805123314694.png" alt="image-20220805123314694"></p><h3 id="5ã€é™„åŠ å†…å®¹ï¼štomcat-8-ç‰ˆæœ¬å®‰è£…">5ã€é™„åŠ å†…å®¹ï¼štomcat 8 ç‰ˆæœ¬å®‰è£…</h3><p>tomcat 8 ç‰ˆæœ¬æ— éœ€ä¿®æ”¹ä¸»é¡µï¼Œè¿è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:8080 --name mytomcat8 billygoo/tomcat8-jdk8</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæ­¤é•œåƒæ— éœ€é¢å¤–<code>pull</code>ï¼Œæœ¬åœ°æ— æ­¤é•œåƒï¼Œä¼šè‡ªåŠ¨<code>pull</code> è¯¥é•œåƒã€‚</p><h2 id="äºŒã€mysql-å®‰è£…">äºŒã€mysql å®‰è£…</h2><h3 id="1ã€æŸ¥æ‰¾é•œåƒ-2">1ã€æŸ¥æ‰¾é•œåƒ</h3><p>mysql é•œåƒå¯ä»¥é€šè¿‡è®¿é—® <a href="https://hub.docker.com/search">docker hub</a>  æ¥æŸ¥æ‰¾ã€‚</p><p>ç¤ºä¾‹ï¼šé€šè¿‡ <a href="https://hub.docker.com/search">docker hub</a> æŸ¥æ‰¾ <code>mysql:5.7</code> é•œåƒã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220805124459318.png" alt="image-20220805124459318"></p><p><img src="https://cdn.whbblog.cn/img/image-20220805124357827.png" alt="image-20220805124357827"></p><h3 id="2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹-2">2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹</h3><p><strong>é•œåƒæ‹‰å–ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹é•œåƒï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                          TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">mysql                                               5.7       c20987f18b13   7 months ago    448MB</span><br></pre></td></tr></table></figure><h3 id="3ã€è¿è¡Œ-mysql-å®¹å™¨">3ã€è¿è¡Œ mysql å®¹å™¨</h3><p><strong>(1) è¿è¡Œ mysql å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3306:3306 \</span><br><span class="line">--privileged=true \</span><br><span class="line">-v /whb/mysql/log:/var/log/mysql \</span><br><span class="line">-v /whb/mysql/data:/var/lib/mysql \</span><br><span class="line">-v /whb/mysql/conf:/etc/mysql/conf.d \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=123456  \</span><br><span class="line">--name mysql mysql:5.7</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>--privileged=true </code>ï¼šæˆäºˆæƒé™</li><li><code>-v /whb/mysql/log:/var/log/mysql</code> ï¼šæ—¥å¿—æ•°æ®å·æŒ‚è½½ã€‚</li><li><code>-v /whb/mysql/data:/var/lib/mysql</code> ï¼šæ•°æ®æ•°æ®å·æŒ‚è½½ã€‚</li><li><code>-v /whb/mysql/conf:/etc/mysql/conf.d</code> ï¼šé…ç½®æ•°æ®å·æŒ‚è½½ã€‚</li><li><code>-e MYSQL_ROOT_PASSWORD=123456</code> ï¼šé€šè¿‡ç¯å¢ƒå˜é‡é…ç½® mysql root å¯†ç ã€‚</li></ul><p><strong>(2) æŸ¥çœ‹ mysql å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20220805125551945.png" alt="image-20220805125551945"></p><h3 id="4ã€mysql-é…ç½®æ–‡ä»¶ä¿®æ”¹">4ã€mysql é…ç½®æ–‡ä»¶ä¿®æ”¹</h3><p><strong>(1) my.cnf æ–‡ä»¶ä¿®æ”¹ï¼Œè§£å†³ä¸­æ–‡å­—ç¬¦ä¹±ç æ–‡ä»¶ã€‚</strong></p><p>åœ¨æœ¬åœ° <code>/whb/mysql/conf</code> è·¯å¾„ä¸‹æ–°å»ºæ–‡ä»¶<code>my.cnf</code> ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /whb/mysql/conf/my.cnf</span><br><span class="line">[client]</span><br><span class="line">default_character_set=utf8</span><br><span class="line">[mysqld]</span><br><span class="line">collation_server = utf8_general_ci</span><br><span class="line">character_set_server = utf8</span><br></pre></td></tr></table></figure><p><strong>(2) é‡å¯ mysql å®¹å™¨ï¼Œå¹¶æŸ¥çœ‹å­—ç¬¦ç¼–ç </strong></p><p>é‡å¯å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart mysql</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å­—ç¬¦ç¼–ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥ mysql å®¹å™¨</span></span><br><span class="line">docker exec -it mysql /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç™»å½• mysql ï¼Œå¯†ç  123456</span></span><br><span class="line">root@12d852a52332:/# mysql -u root -p </span><br><span class="line">Enter password: </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ MySQL å­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">SHOW VARIABLES LIKE <span class="string">&#x27;character%&#x27;</span>;</span></span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client     | utf8                       |</span><br><span class="line">| character_set_connection | utf8                       |</span><br><span class="line">| character_set_database   | utf8                       |</span><br><span class="line">| character_set_filesystem | binary                     |</span><br><span class="line">| character_set_results    | utf8                       |</span><br><span class="line">| character_set_server     | utf8                       |</span><br><span class="line">| character_set_system     | utf8                       |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="5ã€åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶æ’å…¥æ•°æ®">5ã€åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶æ’å…¥æ•°æ®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ•°æ®åº“ whbblog</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">create database whbblog;</span></span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨æ•°æ®åº“ whbblog</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">use whbblog;</span></span><br><span class="line">Database changed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ•°æ®è¡¨ user</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">create table user(<span class="built_in">id</span> int,name varchar(20));</span></span><br><span class="line">Query OK, 0 rows affected (0.40 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨æ•°æ®è¡¨ user ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">insert into user values(1,<span class="string">&#x27;whb&#x27;</span>);</span></span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢ æ•°æ®è¡¨ user ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="keyword">select</span> * from user;</span></span><br><span class="line">+------+------+</span><br><span class="line">| id   | name |</span><br><span class="line">+------+------+</span><br><span class="line">|    1 | whb  |</span><br><span class="line">+------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="6ã€é™„åŠ æµ‹è¯•">6ã€é™„åŠ æµ‹è¯•</h3><p>é—®ï¼šåˆ é™¤å®¹å™¨ï¼Œå†æ¬¡åˆ›å»ºå®¹å™¨æŒ‚è½½æ•°æ®å·ï¼ŒæŸ¥çœ‹æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Ÿ</p><p>ç­”ï¼šæ­¤å¤„å®éªŒå†…å®¹çœç•¥ï¼Œæ•°æ®è¿˜åœ¨ã€‚</p><h2 id="ä¸‰ã€nginx-å®‰è£…">ä¸‰ã€nginx å®‰è£…</h2><h3 id="1ã€æŸ¥æ‰¾é•œåƒ-3">1ã€æŸ¥æ‰¾é•œåƒ</h3><p>nginx é•œåƒå¯ä»¥é€šè¿‡è®¿é—® <a href="https://hub.docker.com/search">docker hub</a>  æ¥æŸ¥æ‰¾ã€‚</p><p>ç¤ºä¾‹ï¼šé€šè¿‡ <a href="https://hub.docker.com/search">docker hub</a> æŸ¥æ‰¾ <code>nginx</code> é•œåƒã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220805170952551.png" alt="image-20220805170952551"></p><p><img src="https://cdn.whbblog.cn/img/image-20220805171230488.png" alt="image-20220805171230488"></p><h3 id="2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹-3">2ã€é•œåƒæ‹‰å–å’ŒæŸ¥çœ‹</h3><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">docker pull nginx</td><td style="text-align:left">ä¸‹è½½æœ€æ–°ç‰ˆNginxé•œåƒ (å…¶å®æ­¤å‘½ä»¤å°±ç­‰åŒäº : docker pull nginx:latest )</td></tr><tr><td style="text-align:left">docker pull nginx:xxx</td><td style="text-align:left">ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„Nginxé•œåƒ (xxxæŒ‡å…·ä½“ç‰ˆæœ¬å·)</td></tr></tbody></table><p><strong>é•œåƒæ‹‰å–ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹é•œåƒï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                          TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">nginx                                               latest    605c77e624dd   7 months ago    141MB</span><br></pre></td></tr></table></figure><h3 id="3ã€åˆ›å»º-nginx-é…ç½®æ–‡ä»¶">3ã€åˆ›å»º nginx é…ç½®æ–‡ä»¶</h3><p>å¯åŠ¨å‰éœ€è¦å…ˆåˆ›å»º nginx å¤–éƒ¨æŒ‚è½½çš„é…ç½®æ–‡ä»¶ <code>/home/nginx/conf/nginx.conf</code>ï¼Œä¹‹æ‰€ä»¥è¦å…ˆåˆ›å»º , æ˜¯å› ä¸º nginx æœ¬èº«å®¹å™¨åªå­˜åœ¨ <code>/etc/nginx</code> ç›®å½• , æœ¬èº«å°±ä¸åˆ›å»º <code>nginx.conf </code>æ–‡ä»¶ï¼Œå½“æœåŠ¡å™¨å’Œå®¹å™¨éƒ½ä¸å­˜åœ¨ <code>nginx.conf </code>æ–‡ä»¶æ—¶, æ‰§è¡Œå¯åŠ¨å‘½ä»¤çš„æ—¶å€™ docker ä¼šå°† <code>nginx.conf</code> ä½œä¸ºç›®å½•åˆ›å»º , è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæŒ‚è½½ç›®å½•</span></span><br><span class="line">mkdir -p /home/nginx/conf</span><br><span class="line">mkdir -p /home/nginx/log</span><br><span class="line">mkdir -p /home/nginx/html</span><br></pre></td></tr></table></figure><p><strong>å®¹å™¨ä¸­çš„ <code>nginx.conf</code> æ–‡ä»¶å’Œ <code>conf.d</code> æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®¿ä¸»æœºã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆå®¹å™¨</span></span><br><span class="line">docker run --name nginx -d nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å®¹å™¨ nginx.conf æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœº</span></span><br><span class="line">docker cp nginx:/etc/nginx/nginx.conf /home/nginx/conf/nginx.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å®¹å™¨ conf.d æ–‡ä»¶å¤¹ä¸‹å†…å®¹å¤åˆ¶åˆ°å®¿ä¸»æœº</span></span><br><span class="line">docker cp nginx:/etc/nginx/conf.d /home/nginx/conf/conf.d</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å®¹å™¨ä¸­çš„ html æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®¿ä¸»æœº</span></span><br><span class="line">docker cp nginx:/usr/share/nginx/html /home/nginx</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å¤åˆ¶åˆ°æœ¬åœ°çš„é…ç½®æ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# tree /home/nginx</span><br><span class="line">/home/nginx</span><br><span class="line">â”œâ”€â”€ conf</span><br><span class="line">â”‚   â”œâ”€â”€ conf.d</span><br><span class="line">â”‚   â”‚   â””â”€â”€ default.conf</span><br><span class="line">â”‚   â””â”€â”€ nginx.conf</span><br><span class="line">â”œâ”€â”€ html</span><br><span class="line">â”‚   â”œâ”€â”€ 50x.html</span><br><span class="line">â”‚   â””â”€â”€ index.html</span><br><span class="line">â””â”€â”€ log</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤è¿è¡Œçš„å®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f nginx</span><br></pre></td></tr></table></figure><h3 id="4ã€åˆ›å»ºnginxå®¹å™¨å¹¶è¿è¡Œ">4ã€åˆ›å»ºnginxå®¹å™¨å¹¶è¿è¡Œ</h3><p><strong>nginxå®¹å™¨è¿è¡Œå‘½ä»¤ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--name nginx \</span><br><span class="line">-v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /home/nginx/conf/conf.d:/etc/nginx/conf.d \</span><br><span class="line">-v /home/nginx/log:/var/log/nginx \</span><br><span class="line">-v /home/nginx/html:/usr/share/nginx/html \</span><br><span class="line">--privileged=true \</span><br><span class="line">-d nginx:latest</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-p 80:80</td><td>å°†å®¹å™¨çš„ 80(åé¢é‚£ä¸ª) ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80(å‰é¢é‚£ä¸ª) ç«¯å£</td></tr><tr><td>â€“name nginx</td><td>å¯åŠ¨å®¹å™¨çš„åå­—</td></tr><tr><td>-v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf</td><td>æŒ‚è½½nginx.confé…ç½®æ–‡ä»¶</td></tr><tr><td>-v /home/nginx/conf/conf.d:/etc/nginx/conf.d</td><td>æŒ‚è½½nginxé…ç½®æ–‡ä»¶</td></tr><tr><td>-v /home/nginx/log:/var/log/nginx</td><td>æŒ‚è½½nginxæ—¥å¿—æ–‡ä»¶</td></tr><tr><td>-v /home/nginx/html:/usr/share/nginx/html</td><td>æŒ‚è½½nginxå†…å®¹</td></tr><tr><td>nginx:latest</td><td>æœ¬åœ°è¿è¡Œçš„ç‰ˆæœ¬</td></tr><tr><td>-d</td><td>åå°è¿è¡Œ</td></tr></tbody></table><p><strong>æŸ¥çœ‹å®¹å™¨è¿è¡Œæƒ…å†µï¼š</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220806211642650.png" alt="image-20220806211642650"></p><h3 id="5ã€è®¿é—®æµ‹è¯•">5ã€è®¿é—®æµ‹è¯•</h3><p><strong>è®¿é—® <a href="http://ip">http://ip</a>:port ï¼ŒæŸ¥çœ‹é¡µé¢æ˜¯å¦æ­£å¸¸ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220806213935641.png" alt="image-20220806213935641"></p><p><strong>ä¿®æ”¹æœ¬åœ°æ•°æ®å· <code>/home/nginx/html/index.html </code></strong></p><img src="https://cdn.whbblog.cn/img/image-20220806214429746.png" alt="image-20220806214429746" style="zoom:67%;" /><p><strong>é‡å¯ nginx å®¹å™¨ï¼Œå†æ¬¡è®¿é—®nginxå®¹å™¨ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart nginx</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20220806214547253.png" alt="image-20220806214547253"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å®‰è£…éƒ¨ç½² </tag>
            
            <tag> nginx </tag>
            
            <tag> tomcat </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å®¹å™¨æ•°æ®å·ï¼ˆå…«ï¼‰</title>
      <link href="/posts/0133a67cd2d9.html"/>
      <url>/posts/0133a67cd2d9.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å®¹å™¨æ•°æ®å·ç®€è¿°">ä¸€ã€å®¹å™¨æ•°æ®å·ç®€è¿°</h2><p>æ•°æ®å·(Data Volumes)æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒå°†ä¸»æœºæ“ä½œç³»ç»Ÿç›®å½•ç›´æ¥æ˜ å°„è¿›å®¹å™¨ã€‚</p><p>ä½¿ç”¨dockerå®¹å™¨çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„æ•°æ®æ–‡ä»¶ï¼Œè¿™äº›æ•°æ®æ–‡ä»¶åœ¨åˆ é™¤dockerå®¹å™¨æ—¶æ˜¯ä¼šæ¶ˆå¤±çš„ï¼Œä½†æ˜¯å…¶ä¸­äº§ç”Ÿçš„éƒ¨åˆ†å†…å®¹æ˜¯å¸Œæœ›èƒ½å¤ŸæŠŠå®ƒç»™ä¿å­˜èµ·æ¥å¦ä½œç”¨é€”çš„ï¼ŒDockerå°†åº”ç”¨ä¸è¿è¡Œç¯å¢ƒæ‰“åŒ…æˆå®¹å™¨å‘å¸ƒï¼Œç¨‹åºå‘˜å¸Œæœ›åœ¨è¿è¡Œè¿‡ç¨‹é’Ÿäº§ç”Ÿçš„éƒ¨åˆ†æ•°æ®æ˜¯å¯ä»¥æŒä¹…åŒ–çš„çš„ï¼Œè€Œä¸”å®¹å™¨ä¹‹é—´æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå®ç°æ•°æ®å…±äº«ã€‚</p><p>ä¸€èˆ¬åœ°æ¥è¯´ï¼Œdocker å®¹å™¨æ•°æ®å·å¯ä»¥çœ‹æˆå¸¸ç”¨çš„uç›˜ï¼Œå®ƒå­˜åœ¨äºä¸€ä¸ªæˆ–å¤šä¸ªçš„å®¹å™¨ä¸­ï¼Œç”± docker æŒ‚è½½åˆ°å®¹å™¨ï¼Œä½†ä¸å±äºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼ŒDocker ä¸ä¼šåœ¨å®¹å™¨åˆ é™¤æ—¶åˆ é™¤å…¶æŒ‚è½½çš„æ•°æ®å·ã€‚</p><h2 id="äºŒã€æ•°æ®å·ç‰¹ç‚¹">äºŒã€æ•°æ®å·ç‰¹ç‚¹</h2><ul><li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</li><li>æ•°æ®å·ä¸­çš„æ›´æ”¹å¯ä»¥ç«‹å³ç”Ÿæ•ˆ</li><li>æ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­</li><li>æ•°æ®å·é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤</li><li>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢</li></ul><h2 id="ä¸‰ã€æ•°æ®å·æ³¨æ„äº‹é¡¹">ä¸‰ã€æ•°æ®å·æ³¨æ„äº‹é¡¹</h2><ul><li>æŒ‚è½½æ•°æ®å·ï¼Œæœ€å¥½æ˜¯é€šè¿‡runè€Œé create/start åˆ›å»ºå¯åŠ¨å®¹å™¨ï¼Œcreate/startå‘½ä»¤åˆ›å»ºå¯åŠ¨å®¹å™¨ åï¼Œå†æŒ‚è½½æ•°æ®å·ç›¸å½“éº»çƒ¦ï¼Œè¦ä¿®æ”¹å¾ˆå¤šé…ç½®æ–‡ä»¶ï¼Œä½†å¹¶éä¸å¯ä»¥ã€‚</li><li>dockerå®˜ç½‘æ¨èå°½é‡è¿›è¡Œç›®å½•æŒ‚è½½ï¼Œä¸è¦è¿›è¡Œæ–‡ä»¶æŒ‚è½½ã€‚</li></ul><h2 id="å››ã€æ•°æ®å·ç±»å‹">å››ã€æ•°æ®å·ç±»å‹</h2><p><img src="https://cdn.whbblog.cn/img/docker_volume.png" alt="docker_volume"></p><h3 id="1ã€bind-mountï¼ˆç»‘å®šæŒ‚è½½ï¼‰">1ã€bind mountï¼ˆç»‘å®šæŒ‚è½½ï¼‰</h3><p>bind mounts : å®¹å™¨å†…çš„æ•°æ®è¢«å­˜æ”¾åˆ°å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿçš„ä»»æ„ä½ç½®ï¼Œç”šè‡³å­˜æ”¾åˆ°ä¸€äº›é‡è¦çš„ç³»ç»Ÿç›®å½•æˆ– æ–‡ä»¶ä¸­ã€‚é™¤äº†dockerä¹‹å¤–çš„è¿›ç¨‹ä¹Ÿå¯ä»¥ä»»æ„å¯¹ä»–ä»¬è¿›è¡Œä¿®æ”¹ã€‚</p><p>å½“ä½¿ç”¨bind mountsæ—¶ï¼Œå®¿ä¸»æœºçš„ç›®å½•æˆ–æ–‡ä»¶è¢«æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚å®¹å™¨å°†æŒ‰ç…§æŒ‚è½½ç›®å½•æˆ–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ æ¥ä½¿ç”¨æˆ–ä¿®æ”¹å®¿ä¸»æœºçš„æ•°æ®ã€‚å®¿ä¸»æœºä¸­çš„ç›®å½•æˆ–æ–‡ä»¶ä¸éœ€è¦é¢„å…ˆå­˜åœ¨ï¼Œåœ¨éœ€è¦çš„ä½¿ç”¨ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p><p>ä½¿ç”¨bind mountsåœ¨æ€§èƒ½ä¸Šæ˜¯éå¸¸å¥½çš„ï¼Œä½†è¿™ä¾èµ–äºå®¿ä¸»æœºæœ‰ä¸€ä¸ªç›®å½•å¦¥å–„ç»“æ„åŒ–çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ä½¿ç”¨bind mountsçš„å®¹å™¨å¯ä»¥åœ¨é€šè¿‡å®¹å™¨å†…éƒ¨çš„è¿›ç¨‹å¯¹ä¸»æœºæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œä¿®æ”¹ï¼ŒåŒ…æ‹¬åˆ›å»ºï¼Œä¿®æ”¹å’Œåˆ é™¤ é‡è¦çš„ç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•ï¼Œè¿™ä¸ªåŠŸèƒ½è™½ç„¶å¾ˆå¼ºå¤§ï¼Œä½†æ˜¾ç„¶ä¹Ÿä¼šé€ æˆå®‰å…¨æ–¹é¢çš„å½±å“ï¼ŒåŒ…æ‹¬å½±å“åˆ°å®¿ä¸»æœºä¸Š Dockerä»¥å¤–çš„è¿›ç¨‹ã€‚</p><h4 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h4><ul><li>å¦‚æœæŒ‚è½½ä¸€ä¸ªç©ºçš„æ•°æ®å·åˆ°å®¹å™¨ä¸­çš„ä¸€ä¸ªéç©ºç›®å½•ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«å¤åˆ¶åˆ°æ•°æ®å·ä¸­ã€‚</li><li>å¦‚æœæŒ‚è½½ä¸€ä¸ªéç©ºçš„æ•°æ®å·åˆ°å®¹å™¨ä¸­çš„ä¸€ä¸ªç›®å½•ä¸­ï¼Œé‚£ä¹ˆå®¹å™¨ä¸­çš„ç›®å½•ä¼šæ˜¾ç¤ºæ•°æ®å·ä¸­çš„æ•°æ®ã€‚å¦‚æœåŸæ¥å®¹å™¨ä¸­çš„ç›®å½•æœ‰æ•°æ®ï¼Œé‚£ä¹ˆåŸå§‹æ•°æ®ä¼šè¢«éšè—æ‰ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼šåˆ›å»º nginx å®¹å™¨ï¼Œå¹¶è¿›è¡Œ bind mount æŒ‚è½½ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --mount type=bind,source=/usr/local/data,destination=/data --name nginx01 nginx /bin/bash</span><br><span class="line">docker run -it -v /usr/local/data:/data --name nginx01 nginx /bin/bash</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨æŒ‚è½½ç»†èŠ‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx01</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/usr/local/data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/data&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><h3 id="2ã€volume-mountï¼ˆæ•°æ®å·æŒ‚è½½ï¼‰">2ã€volume mountï¼ˆæ•°æ®å·æŒ‚è½½ï¼‰</h3><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®å·æ—¶ï¼Œå®ƒå­˜å‚¨åœ¨ Docker ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•ä¸­ã€‚æ•°æ®å·ç”± Docker ç®¡ç†ï¼Œå¹¶ä¸ä¸»æœºçš„æ ¸å¿ƒåŠŸèƒ½éš”ç¦»ã€‚</p><p>ç»™å®šçš„æ•°æ®å·å¯ä»¥åŒæ—¶å®‰è£…åˆ°å¤šä¸ªå®¹å™¨ä¸­ã€‚å½“æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä½¿ç”¨æ•°æ®å·æ—¶ï¼Œæ•°æ®å·ä»ç„¶å¯ä¾› Docker ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚</p><p>å½“æˆ‘ä»¬æŒ‚è½½ä¸€ä¸ªæ•°æ®å·æ—¶ï¼Œå®ƒå¯èƒ½æ˜¯å‘½åçš„æˆ–åŒ¿åçš„ã€‚åŒ¿åæ•°æ®å·åœ¨é¦–æ¬¡æŒ‚è½½åˆ°å®¹å™¨æ—¶æ²¡æœ‰æ˜ç¡®çš„åç§°ï¼Œå› æ­¤ Docker ç»™å®ƒä»¬ä¸€ä¸ªéšæœºåç§°ï¼Œä¿è¯åœ¨ç»™å®šçš„ Docker ä¸»æœºä¸­æ˜¯å”¯ä¸€çš„ã€‚é™¤äº†åç§°ä¹‹å¤–ï¼Œå‘½åå·å’ŒåŒ¿åå·çš„è¡Œä¸ºæ–¹å¼ç›¸åŒã€‚</p><p><strong>ç¤ºä¾‹ï¼šåˆ›å»º nginx å®¹å™¨ï¼Œå¹¶è¿›è¡Œ volume æŒ‚è½½ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --mount type=volume,source=my-data2,destination=/data --name nginx02 nginx /bin/bash</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æŒ‚è½½ç»†èŠ‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx02</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;my-data1&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/my-data1/_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/data&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;z&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><h3 id="3ã€tmpfs-mountï¼ˆä¸´æ—¶æŒ‚è½½ï¼‰">3ã€tmpfs mountï¼ˆä¸´æ—¶æŒ‚è½½ï¼‰</h3><p><code>tmpfs</code> æŒ‚è½½åªå­˜å‚¨åœ¨å®¿ä¸»æœºç³»ç»Ÿçš„å†…å­˜ä¸­ï¼Œä»ä¸å†™å…¥å®¿ä¸»æœºç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒä¸ä¼šä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œæ— è®ºæ˜¯åœ¨ Docker ä¸»æœºä¸Šè¿˜æ˜¯åœ¨å®¹å™¨å†…ã€‚</p><p><code>tmpfs mount</code> å¯ä»¥åœ¨å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå†…ç”¨äºå­˜å‚¨éæŒä¹…çŠ¶æ€æˆ–æ•æ„Ÿä¿¡æ¯ã€‚</p><p><strong>ç¤ºä¾‹ï¼šåˆ›å»º nginx å®¹å™¨ï¼Œå¹¶è¿›è¡Œtmpfs æŒ‚è½½ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --mount type=tmpfs,destination=/data --name nginx03 nginx /bin/bash</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æŒ‚è½½ç»†èŠ‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx03</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;tmpfs&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/data&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><h2 id="äº”ã€æ•°æ®å·æŒ‚è½½å‘½ä»¤">äº”ã€æ•°æ®å·æŒ‚è½½å‘½ä»¤</h2><p><code>--volume (ç®€å†™ -v)</code> å’Œ <code>--mount</code> å‚æ•°ç”¨äºæ•°æ®å·æŒ‚è½½ã€‚</p><h3 id="1ã€åˆ›å»º-bind-mount-å’ŒæŒ‚è½½-volume-çš„æ¯”è¾ƒ">1ã€åˆ›å»º bind mount å’ŒæŒ‚è½½ volume çš„æ¯”è¾ƒ</h3><table><thead><tr><th style="text-align:left">å¯¹æ¯”é¡¹</th><th style="text-align:left">bind mount</th><th style="text-align:left">volume</th></tr></thead><tbody><tr><td style="text-align:left">Sourceä½ç½®</td><td style="text-align:left">ç”¨æˆ·æŒ‡å®š</td><td style="text-align:left">/var/lib/docker/volumes/</td></tr><tr><td style="text-align:left">Sourceä¸ºç©º</td><td style="text-align:left">è¦†ç›–destä¸ºç©º</td><td style="text-align:left">ä¿ç•™destå†…å®¹</td></tr><tr><td style="text-align:left">Sourceéç©º</td><td style="text-align:left">è¦†ç›–destå†…å®¹</td><td style="text-align:left">è¦†ç›–destå†…å®¹</td></tr><tr><td style="text-align:left">Sourceç§ç±»</td><td style="text-align:left">æ–‡ä»¶æˆ–ç›®å½•</td><td style="text-align:left">åªèƒ½æ˜¯ç›®å½•</td></tr><tr><td style="text-align:left">å¯ç§»æ¤æ€§</td><td style="text-align:left">ä¸€èˆ¬ï¼ˆè‡ªè¡Œç»´æŠ¤ï¼‰</td><td style="text-align:left">å¼ºï¼ˆdockeræ‰˜ç®¡ï¼‰</td></tr><tr><td style="text-align:left">å®¿ä¸»ç›´æ¥è®¿é—®</td><td style="text-align:left">å®¹æ˜“ï¼ˆä»…éœ€chownï¼‰</td><td style="text-align:left">å—é™ï¼ˆéœ€ç™»é™†rootç”¨æˆ·ï¼‰*</td></tr></tbody></table><h3 id="2ã€åˆ›å»º-bind-mount-æ—¶ä½¿ç”¨-volumeå’Œ-mountçš„æ¯”è¾ƒ">2ã€åˆ›å»º bind mount æ—¶ä½¿ç”¨<code>--volume</code>å’Œ<code>--mount</code>çš„æ¯”è¾ƒ</h3><table><thead><tr><th style="text-align:left">å¯¹æ¯”é¡¹</th><th style="text-align:left"><code>--volume</code> æˆ– <code>-v</code></th><th style="text-align:left"><code>--mount type=bind</code></th></tr></thead><tbody><tr><td style="text-align:left">å¦‚æœä¸»æœºè·¯å¾„ä¸å­˜åœ¨</td><td style="text-align:left">è‡ªåŠ¨åˆ›å»º</td><td style="text-align:left">å‘½ä»¤æŠ¥é”™</td></tr></tbody></table><h2 id="å…­ã€åŒ¿åæ•°æ®å·">å…­ã€åŒ¿åæ•°æ®å·</h2><p>åŒ¿åæ•°æ®å·ï¼šä¸æŒ‡å®šæœ¬åœ°æŒ‚è½½è·¯å¾„ï¼ŒåªæŒ‡å®šå®¹å™¨å†…æŒ‚è½½è·¯å¾„ï¼Œæœ¬åœ°æŒ‚è½½è·¯å¾„åœ¨ <code>/var/lib/docker</code> è‡ªåŠ¨ç”Ÿæˆã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v /data --name nginx05 nginx /bin/bash</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚ï¼š</strong></p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;818aa9dff871110fc02096eec9234595ef3758004c92b0de617444ac85a4df08&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/818aa9dff871110fc02096eec9234595ef3758004c92b0de617444ac85a4df08/_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/data&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€åªè¯»å’Œè¯»å†™">ä¸ƒã€åªè¯»å’Œè¯»å†™</h2><p>å®¹å™¨æ•°æ®å·çš„åªè¯»å’Œè¯»å†™éœ€è¦é€šè¿‡å‚æ•° <code>ro</code> å’Œ <code>rw</code> æ¥è¿›è¡Œæ§åˆ¶ã€‚</p><ul><li><p>ro ï¼šread only</p></li><li><p>rw ï¼šread write</p></li></ul><p><strong>è¯­æ³•æ ¼å¼ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:/å®¹å™¨å†…ç›®å½•:ro é•œåƒå</span><br><span class="line">docker run -it -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:/å®¹å™¨å†…ç›®å½•:rw é•œåƒå</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name nginx05 -v nginx1:/etc/nginx:ro nginx</span><br><span class="line">docker run -d -P --name nginx05 -v nginx2:/etc/nginx:rw nginx</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šåªè¦çœ‹åˆ° <code>ro</code> å°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ˜¯æ— æ³•æ“ä½œ!</strong></p><h2 id="å…«ã€æ•°æ®å·ç»§æ‰¿ä¸å…±äº«">å…«ã€æ•°æ®å·ç»§æ‰¿ä¸å…±äº«</h2><p>å‘½åçš„å®¹å™¨æŒ‚è½½æ•°æ®å·ï¼Œå…¶å®ƒå®¹å™¨é€šè¿‡æŒ‚è½½è¿™ä¸ª(çˆ¶å®¹å™¨)å®ç°æ•°æ®å…±äº«ï¼ŒæŒ‚è½½æ•°æ®å·çš„å®¹å™¨ï¼Œç§°ä¹‹ä¸ºæ•°æ®å·å®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´çš„æ•°æ®å·å¯ä»¥é€šè¿‡ <code>--volumes-form</code> å‚æ•°å…±äº«æ•°æ®ã€‚</p><p><img src="https://cdn.whbblog.cn/img/l" alt="img"></p><h3 id="1ã€ç¯å¢ƒå‡†å¤‡">1ã€ç¯å¢ƒå‡†å¤‡</h3><p>ï¼ˆ1ï¼‰åˆ›å»ºå¯åŠ¨ c3 æ•°æ®å·å®¹å™¨ï¼Œä½¿ç”¨ â€“v å‚æ•° è®¾ç½®æ•°æ®å·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=c3 -v /test:/data centos:7 /bin/bash</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ›å»ºå¯åŠ¨ c1 å®¹å™¨ï¼Œä½¿ç”¨ <code>--volumes-from</code> å‚æ•°è®¾ç½®æ•°æ®å·ç»§æ‰¿ c3 æ•°æ®å·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=c1 --volumes-from c3 centos:7 /bin/bash</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åˆ›å»ºå¯åŠ¨ c2 å®¹å™¨ï¼Œä½¿ç”¨ <code>--volumes-from</code> å‚æ•°è®¾ç½®æ•°æ®å·ç»§æ‰¿ c3 æ•°æ®å·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=c2 --volumes-from c3 centos:7 /bin/bash</span><br></pre></td></tr></table></figure><h3 id="2ã€åˆ†åˆ«è¿æ¥ä¸‰ä¸ªå®¹å™¨å’Œä¸»æœº">2ã€åˆ†åˆ«è¿æ¥ä¸‰ä¸ªå®¹å™¨å’Œä¸»æœº</h3><p>é€šè¿‡ä¸‹å›¾æŸ¥çœ‹æ•°æ®å·ï¼Œå¯ä»¥å‘ç°ä¸‰ä¸ªå®¹å™¨çš„æŒ‚è½½ç‚¹ <code>/data</code> å’Œä¸»æœº <code>/test</code> ç›®å½•å‡ä¸ºç©ºã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220804143151879.png" alt="image-20220804143151879"></p><h3 id="3ã€åœ¨æœ¬æœºåˆ›å»ºæ–‡ä»¶ï¼Œå…¶ä»–ä¸‰å°å®¹å™¨æ˜¯å¦å¯ä»¥æŸ¥çœ‹åˆ°æ­¤æ–‡ä»¶ï¼Ÿ">3ã€åœ¨æœ¬æœºåˆ›å»ºæ–‡ä»¶ï¼Œå…¶ä»–ä¸‰å°å®¹å™¨æ˜¯å¦å¯ä»¥æŸ¥çœ‹åˆ°æ­¤æ–‡ä»¶ï¼Ÿ</h3><p><img src="https://cdn.whbblog.cn/img/image-20220804143006744.png" alt="image-20220804143006744"></p><p><strong>ç»“è®ºï¼šåœ¨ä¸»æœºåˆ›å»ºæ–‡ä»¶ï¼Œå®¹å™¨ä¸­å¯ä»¥æŸ¥çœ‹åˆ°ã€‚</strong></p><h3 id="4ã€åœ¨å®¹å™¨æ•°æ®å·ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨ä¸»æœºæ˜¯å¦å¯ä»¥æŸ¥çœ‹å‘¢ï¼Ÿ">4ã€åœ¨å®¹å™¨æ•°æ®å·ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨ä¸»æœºæ˜¯å¦å¯ä»¥æŸ¥çœ‹å‘¢ï¼Ÿ</h3><p><img src="https://cdn.whbblog.cn/img/image-20220804143415467.png" alt="image-20220804143415467"></p><p><strong>ç»“è®ºï¼šåœ¨å®¹å™¨å†…åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨ä¸»æœºä¹Ÿå¯æŸ¥çœ‹ã€‚</strong></p><h3 id="5ã€åœæ­¢å®¹å™¨-c3-ï¼Œç»§æ‰¿å®¹å™¨-c3-çš„å®¹å™¨-c1-ã€-c2-å’Œä¸»æœºä¹‹é—´æ•°æ®è¿˜å¯ä»¥å…±äº«å—ï¼Ÿ">5ã€åœæ­¢å®¹å™¨ c3 ï¼Œç»§æ‰¿å®¹å™¨ c3 çš„å®¹å™¨ c1 ã€ c2 å’Œä¸»æœºä¹‹é—´æ•°æ®è¿˜å¯ä»¥å…±äº«å—ï¼Ÿ</h3><p><img src="https://cdn.whbblog.cn/img/image-20220804143856452.png" alt="image-20220804143856452"></p><p><strong>ç»“è®ºï¼š</strong></p><ul><li>å®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œå­˜å‚¨åœ¨æœ¬æœºçš„æ–‡ä»¶åˆ™ä¼šä¸€ç›´ä¿ç•™ï¼</li><li>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢ã€‚</li><li>ä¸€æ—¦æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼</li></ul><h2 id="ä¹ã€å‚è€ƒæ–‡æ¡£">ä¹ã€å‚è€ƒæ–‡æ¡£</h2><p><a href="https://juejin.cn/post/7042600867731603486">å…¨ç½‘æœ€è¯¦ç»†çš„dockeræ•°æ®å·æ•™ç¨‹ - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://blog.csdn.net/inrgihc/article/details/109001886">Dockeræ•°æ®å·æŒ‚è½½å‘½ä»¤volume(-v)ä¸mountçš„åŒºåˆ«</a></p><p><a href="https://blog.csdn.net/qq_41779565/article/details/126042156">Dockeræ•°æ®å·åŠç½‘ç»œè¯¦ç»†è®²è§£</a></p><p><a href="https://www.icode9.com/content-4-688135.html">Docker æ•°æ®å·å’ŒDockerfile (icode9.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å®¹å™¨æ•°æ®å· </tag>
            
            <tag> volume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker é•œåƒå‘å¸ƒï¼ˆä¸ƒï¼‰</title>
      <link href="/posts/edd17e6f62b4.html"/>
      <url>/posts/edd17e6f62b4.html</url>
      
        <content type="html"><![CDATA[<p><strong>æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»å¦‚ä½•å°†é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“å’Œæœ¬åœ°ç§æœ‰ä»“åº“ï¼Œä»¥åŠæœ¬åœ°ç§æœ‰ä»“åº“éƒ¨ç½²ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220728165737928.png" alt="image-20220728165737928"></p><h2 id="ä¸€ã€å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“-ğŸ’">ä¸€ã€å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“  ğŸ’</h2><h3 id="1ã€é…ç½®é˜¿é‡Œäº‘é•œåƒä»“åº“">1ã€é…ç½®é˜¿é‡Œäº‘é•œåƒä»“åº“</h3><h4 id="ï¼ˆ1ï¼‰é…ç½®å®¹å™¨é•œåƒæœåŠ¡">ï¼ˆ1ï¼‰é…ç½®å®¹å™¨é•œåƒæœåŠ¡</h4><p>[button color=â€œprimaryâ€ url=â€œ<a href="https://cr.console.aliyun.com/cn-hangzhou/instances">https://cr.console.aliyun.com/cn-hangzhou/instances</a>â€ outline=â€œoutlineâ€ target=â€œ_blankâ€]å®¹å™¨é•œåƒæœåŠ¡[/button]</p><p>ç™»å½•é˜¿é‡Œäº‘å®˜ç½‘ï¼Œæ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20220726141408836.png" alt="image-20220726141408836"></p><h4 id="ï¼ˆ2ï¼‰åˆ›å»ºå‘½åç©ºé—´">ï¼ˆ2ï¼‰åˆ›å»ºå‘½åç©ºé—´</h4><p><img src="https://cdn.whbblog.cn/img/image-20220726141511255.png" alt=""></p><p><img src="https://cdn.whbblog.cn/img/image-20220726142356841.png" alt="image-20220726142356841"></p><h4 id="ï¼ˆ3ï¼‰åˆ›å»ºé•œåƒä»“åº“å’Œä»“åº“ä»£ç æº">ï¼ˆ3ï¼‰åˆ›å»ºé•œåƒä»“åº“å’Œä»“åº“ä»£ç æº</h4><p><img src="https://cdn.whbblog.cn/img/image-20220726141936519.png" alt="image-20220726141936519"></p><p><img src="https://cdn.whbblog.cn/img/image-20220726142023303.png" alt="image-20220726142023303"></p><h3 id="2ã€ä¸Šä¼ æœ¬åœ°é•œåƒè‡³é˜¿é‡Œäº‘é•œåƒä»“åº“">2ã€ä¸Šä¼ æœ¬åœ°é•œåƒè‡³é˜¿é‡Œäº‘é•œåƒä»“åº“</h3><p><strong>ç¤ºä¾‹ï¼šå°†æœ¬åœ°é•œåƒ <code>myubuntu:v1</code> æ¨é€åˆ°é˜¿é‡Œäº‘ä»“åº“</strong></p><h4 id="ï¼ˆ1ï¼‰ç™»å½•é˜¿é‡Œäº‘Docker-Regist">ï¼ˆ1ï¼‰ç™»å½•é˜¿é‡Œäº‘Docker Regist</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker login --username=whbblog registry.cn-hangzhou.aliyuncs.com</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰åˆ¶ä½œé•œåƒ-tag">ï¼ˆ2ï¼‰åˆ¶ä½œé•œåƒ tag</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹é•œåƒ</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">myubuntu        v1        a7a511fae0fb   4 hours ago     178MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é•œåƒ Tag</span></span><br><span class="line">[root@localhost ~]# docker tag a7a511fae0fb registry.cn-hangzhou.aliyuncs.com/whb_ns/myubuntu:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                          TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/whb_ns/myubuntu   latest    a7a511fae0fb   4 hours ago     178MB</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰å°†é•œåƒæ¨é€åˆ°-é˜¿é‡Œäº‘é•œåƒä»“åº“">ï¼ˆ3ï¼‰å°†é•œåƒæ¨é€åˆ° é˜¿é‡Œäº‘é•œåƒä»“åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push registry.cn-hangzhou.aliyuncs.com/whb_ns/myubuntu:latest</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä»é˜¿é‡Œäº‘é•œåƒä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°">ï¼ˆ4ï¼‰ä»é˜¿é‡Œäº‘é•œåƒä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/whb_ns/myubuntu:latest</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å‘å¸ƒé•œåƒåˆ°æœ¬åœ°ç§æœ‰é•œåƒä»“åº“-ğŸ‰">äºŒã€å‘å¸ƒé•œåƒåˆ°æœ¬åœ°ç§æœ‰é•œåƒä»“åº“ ğŸ‰</h2><h3 id="1ã€ç§æœ‰ä»“åº“æ­å»º">1ã€ç§æœ‰ä»“åº“æ­å»º</h3><h4 id="ï¼ˆ1ï¼‰ç§æœ‰ä»“åº“é•œåƒä¸‹è½½">ï¼ˆ1ï¼‰ç§æœ‰ä»“åº“é•œåƒä¸‹è½½</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰è¿è¡Œç§æœ‰ä»“åº“é•œåƒ">ï¼ˆ2ï¼‰è¿è¡Œç§æœ‰ä»“åº“é•œåƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5000:5000 -v /data/myregistry:/tmp/registry --privileged=true registry</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶">ï¼ˆ3ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://6l7dxkas.mirror.aliyuncs.com&quot;],</span><br><span class="line">  &quot;insecure-registries&quot;: [&quot;192.168.6.80:5000&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šé…ç½®æ–‡ä»¶æ ¼å¼ä¸ºjsonæ ¼å¼ï¼Œæ¡ç›®ä¹‹é—´è¦æœ‰ç©ºæ ¼åˆ†éš”ã€‚</strong></p><h4 id="ï¼ˆ4ï¼‰é‡å¯-docker">ï¼ˆ4ï¼‰é‡å¯ docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸Šä¼ æœ¬åœ°é•œåƒè‡³æœ¬åœ°ä»“åº“">2ã€ä¸Šä¼ æœ¬åœ°é•œåƒè‡³æœ¬åœ°ä»“åº“</h3><p>ç¤ºä¾‹ï¼šå°†æœ¬åœ°é•œåƒ <code>nginx:latest</code> æ¨é€åˆ°é˜¿é‡Œäº‘ä»“åº“</p><h4 id="ï¼ˆ1ï¼‰åˆ¶ä½œé•œåƒtag">ï¼ˆ1ï¼‰åˆ¶ä½œé•œåƒtag</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx:latest 192.168.6.80:5000/mynginx:1.2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                          TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">192.168.6.80:5000/mynginx                           1.2       605c77e624dd   7 months ago    141MB</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æ¨é€é•œåƒè‡³æœ¬åœ°ç§æœ‰é•œåƒä»“åº“">ï¼ˆ2ï¼‰æ¨é€é•œåƒè‡³æœ¬åœ°ç§æœ‰é•œåƒä»“åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 192.168.6.80:5000/mynginx:1.2</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰æŸ¥çœ‹æœ¬åœ°ç§æœ‰é•œåƒä»“åº“é•œåƒ">ï¼ˆ3ï¼‰æŸ¥çœ‹æœ¬åœ°ç§æœ‰é•œåƒä»“åº“é•œåƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# curl 192.168.6.80:5000/v2/_catalog</span><br><span class="line">&#123;&quot;repositories&quot;:[&quot;mynginx&quot;]&#125;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰æŸ¥çœ‹ç§æœ‰ä»“åº“é•œåƒ-tag">ï¼ˆ4ï¼‰æŸ¥çœ‹ç§æœ‰ä»“åº“é•œåƒ tag</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# curl -X GET http://192.168.6.80:5000/v2/mynginx/tags/list</span><br><span class="line">&#123;&quot;name&quot;:&quot;mynginx&quot;,&quot;tags&quot;:[&quot;1.2&quot;]&#125;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰-ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°">ï¼ˆ5ï¼‰ ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 192.168.6.80:5000/mynginx:1.2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> é˜¿é‡Œäº‘ </tag>
            
            <tag> docker é•œåƒå‘å¸ƒ </tag>
            
            <tag> ç§æœ‰ä»“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å‘½ä»¤æ‰‹å†Œï¼ˆå…­ï¼‰</title>
      <link href="/posts/b69b3392ad47.html"/>
      <url>/posts/b69b3392ad47.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤">ä¸€ã€å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤</h2><ul><li>å¯åŠ¨dockerï¼š<code>systemctl start docker</code></li><li>åœæ­¢dockerï¼š<code>systemctl stop docker</code></li><li>æŸ¥çœ‹dockerçŠ¶æ€ï¼š<code>systemctl status docker</code></li><li>å¼€æœºå¯åŠ¨dockerï¼š<code>systemctl enable docker</code></li><li>ç¦æ­¢å¼€æœºè‡ªå¯dockerï¼š<code>systemctl disable docker</code></li><li>é‡æ–°å¯åŠ¨dockerï¼š<code>systemctl restart docker</code></li><li>æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯ï¼š<code>docker info</code></li><li>æŸ¥çœ‹dockerç‰ˆæœ¬ä¿¡æ¯ï¼š<code>docker version</code></li><li>æŸ¥çœ‹dockerå¸®åŠ©æ–‡æ¡£ï¼š<code>docker --help</code></li><li>æŸ¥çœ‹dockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼š<code>docker å…·ä½“å‘½ä»¤ --help</code></li></ul><h2 id="äºŒã€æœ¬åœ°é•œåƒç®¡ç†å‘½ä»¤">äºŒã€æœ¬åœ°é•œåƒç®¡ç†å‘½ä»¤</h2><h3 id="1ã€images">1ã€images</h3><p><code>docker images</code> : åˆ—å‡ºæœ¬åœ°é•œåƒ</p><h4 id="è¯­æ³•">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images [option] [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-a :**åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æ‰ä¸­é—´æ˜ åƒå±‚ï¼‰ï¼›</li><li>**â€“digests :**æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼›</li><li>**-f :**æ˜¾ç¤ºæ»¡è¶³æ¡ä»¶çš„é•œåƒï¼›</li><li>**â€“format :**æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ï¼›</li><li>**â€“no-trunc :**æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯ï¼›</li><li>**-q :**åªæ˜¾ç¤ºé•œåƒIDã€‚</li></ul><h4 id="å®ä¾‹">å®ä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   9 months ago   13.3kB</span><br></pre></td></tr></table></figure><p>è¡¨å¤´å†…å®¹è¯´æ˜ï¼š</p><ul><li>REPOSITORY ï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº</li><li>TAGï¼šé•œåƒæ ‡ç­¾çš„ç‰ˆæœ¬å·ï¼Œlatest è¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬</li><li>IMAGE ID ï¼šé•œåƒ ID</li><li>CREATED ï¼šé•œåƒåˆ›å»ºæ—¶é—´</li><li>SIZE ï¼šé•œåƒå¤§å°</li></ul><p>æ³¨æ„ï¼šåŒä¸€ä»“åº“æºå¯ä»¥æœ‰å¤šä¸ª TAG ç‰ˆæœ¬ï¼Œä»£è¡¨è¿™ä¸ªä»“åº“æºçš„ä¸åŒä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>REPOSITORY:TAG</code> æ¥å®šä¹‰ä¸ç”¨çš„é•œåƒã€‚å¦‚æœä¸æŒ‡å®šä¸€ä¸ªé•œåƒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œä¾‹å¦‚ä½ åªä½¿ç”¨ ubuntuï¼Œdocker å°†é»˜è®¤ä½¿ç”¨ <code>ubuntu:latest</code> é•œåƒ.</p><h3 id="2ã€rmi">2ã€rmi</h3><p><code>docker rmi :</code> åˆ é™¤æœ¬åœ°ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒã€‚</p><h4 id="è¯­æ³•-2">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-f :**å¼ºåˆ¶åˆ é™¤ï¼›</li><li>**â€“no-prune :**ä¸ç§»é™¤è¯¥é•œåƒçš„è¿‡ç¨‹é•œåƒï¼Œé»˜è®¤ç§»é™¤ï¼›</li></ul><h4 id="å®ä¾‹-2">å®ä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker rmi -f feb5d9fea6a5</span><br></pre></td></tr></table></figure><h3 id="3ã€tag">3ã€tag</h3><p><strong>docker tag :</strong> æ ‡è®°æœ¬åœ°é•œåƒï¼Œå°†å…¶å½’å…¥æŸä¸€ä»“åº“ã€‚</p><h4 id="è¯­æ³•-3">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-3">å®ä¾‹</h4><p>å°†é•œåƒ <code>redis:latest</code> æ ‡è®°ä¸º <code>redis:8.1</code> é•œåƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker tag redis:latest redis:8.1</span><br><span class="line">[root@localhost ~]# docker images redis</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">redis        8.1       7614ae9453d1   7 months ago   113MB</span><br><span class="line">redis        latest    7614ae9453d1   7 months ago   113MB</span><br></pre></td></tr></table></figure><h3 id="4ã€build">4ã€build</h3><p><strong>docker build</strong> å‘½ä»¤ç”¨äºä½¿ç”¨ Dockerfile åˆ›å»ºé•œåƒã€‚</p><h4 id="è¯­æ³•-4">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build [OPTIONS] PATH | URL | -</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**â€“build-arg=[] :**è®¾ç½®é•œåƒåˆ›å»ºæ—¶çš„å˜é‡ï¼›</li><li>**â€“cpu-shares :**è®¾ç½® cpu ä½¿ç”¨æƒé‡ï¼›</li><li>**â€“cpu-period :**é™åˆ¶ CPU CFSå‘¨æœŸï¼›</li><li>**â€“cpu-quota :**é™åˆ¶ CPU CFSé…é¢ï¼›</li><li>**â€“cpuset-cpus :**æŒ‡å®šä½¿ç”¨çš„CPU idï¼›</li><li>**â€“cpuset-mems :**æŒ‡å®šä½¿ç”¨çš„å†…å­˜ idï¼›</li><li>**â€“disable-content-trust :**å¿½ç•¥æ ¡éªŒï¼Œé»˜è®¤å¼€å¯ï¼›</li><li>**-f :**æŒ‡å®šè¦ä½¿ç”¨çš„Dockerfileè·¯å¾„ï¼›</li><li>**â€“force-rm :**è®¾ç½®é•œåƒè¿‡ç¨‹ä¸­åˆ é™¤ä¸­é—´å®¹å™¨ï¼›</li><li>**â€“isolation :**ä½¿ç”¨å®¹å™¨éš”ç¦»æŠ€æœ¯ï¼›</li><li>**â€“label=[] :**è®¾ç½®é•œåƒä½¿ç”¨çš„å…ƒæ•°æ®ï¼›</li><li>**-m :**è®¾ç½®å†…å­˜æœ€å¤§å€¼ï¼›</li><li>**â€“memory-swap :**è®¾ç½®Swapçš„æœ€å¤§å€¼ä¸ºå†…å­˜+swapï¼Œ&quot;-1&quot;è¡¨ç¤ºä¸é™swapï¼›</li><li>**â€“no-cache :**åˆ›å»ºé•œåƒçš„è¿‡ç¨‹ä¸ä½¿ç”¨ç¼“å­˜ï¼›</li><li>**â€“pull :**å°è¯•å»æ›´æ–°é•œåƒçš„æ–°ç‰ˆæœ¬ï¼›</li><li>**â€“quiet, -q :**å®‰é™æ¨¡å¼ï¼ŒæˆåŠŸååªè¾“å‡ºé•œåƒ IDï¼›</li><li>**â€“rm :**è®¾ç½®é•œåƒæˆåŠŸååˆ é™¤ä¸­é—´å®¹å™¨ï¼›</li><li>**â€“shm-size :**è®¾ç½®/dev/shmçš„å¤§å°ï¼Œé»˜è®¤å€¼æ˜¯64Mï¼›</li><li>**â€“ulimit :**Ulimité…ç½®ã€‚</li><li>**â€“squash :**å°† Dockerfile ä¸­æ‰€æœ‰çš„æ“ä½œå‹ç¼©ä¸ºä¸€å±‚ã€‚</li><li><strong>â€“tag, -t:</strong> é•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œé€šå¸¸ name:tag æˆ–è€… name æ ¼å¼ï¼›å¯ä»¥åœ¨ä¸€æ¬¡æ„å»ºä¸­ä¸ºä¸€ä¸ªé•œåƒè®¾ç½®å¤šä¸ªæ ‡ç­¾ã€‚</li><li><strong>â€“network:</strong> é»˜è®¤ defaultã€‚åœ¨æ„å»ºæœŸé—´è®¾ç½®RUNæŒ‡ä»¤çš„ç½‘ç»œæ¨¡å¼</li></ul><h4 id="å®ä¾‹-4">å®ä¾‹</h4><p>ä½¿ç”¨å½“å‰ç›®å½•çš„ <code>Dockerfile</code> åˆ›å»ºé•œåƒï¼Œæ ‡ç­¾ä¸º <code>ubuntu:v1</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t ubuntu:v1</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ URL <code>github.com/creack/docker-firefox</code> çš„ <code>Dockerfile</code> åˆ›å»ºé•œåƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build github.com/creack/docker-firefox</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>-f Dockerfile </code>æ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -f /path/to/a/Dockerfile</span></span><br></pre></td></tr></table></figure><p>åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤å‰ï¼Œé¦–å…ˆä¼šå¯¹ Dockerfile è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œæœ‰è¯­æ³•é”™è¯¯æ—¶ä¼šè¿”å›ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t <span class="built_in">test</span>/myapp</span></span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">Error response from daemon: Unknown instruction: RUNCMD</span><br></pre></td></tr></table></figure><h3 id="5ã€history">5ã€history</h3><p><strong>docker history :</strong> æŸ¥çœ‹æŒ‡å®šé•œåƒçš„åˆ›å»ºå†å²ã€‚</p><h4 id="è¯­æ³•-5">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history [OPTIONS] IMAGE</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><p>**-H :**ä»¥å¯è¯»çš„æ ¼å¼æ‰“å°é•œåƒå¤§å°å’Œæ—¥æœŸï¼Œé»˜è®¤ä¸ºtrueï¼›</p></li><li><p>**â€“no-trunc :**æ˜¾ç¤ºå®Œæ•´çš„æäº¤è®°å½•ï¼›</p></li><li><p>**-q :**ä»…åˆ—å‡ºæäº¤è®°å½•IDã€‚</p></li></ul><h4 id="å®ä¾‹-5">å®ä¾‹</h4><p>æŸ¥çœ‹æœ¬åœ°é•œåƒ <code>hello-world</code> çš„åˆ›å»ºå†å²ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker history hello-world</span><br><span class="line">IMAGE          CREATED         CREATED BY                                      SIZE      COMMENT</span><br><span class="line">feb5d9fea6a5   10 months ago   /bin/sh -c #(nop)  CMD [&quot;/hello&quot;]               0B        </span><br><span class="line">&lt;missing&gt;      10 months ago   /bin/sh -c #(nop) COPY file:50563a97010fd7ceâ€¦   13.3kB   </span><br></pre></td></tr></table></figure><h3 id="6ã€save">6ã€save</h3><p><strong>docker save :</strong> å°†æŒ‡å®šé•œåƒä¿å­˜æˆ tar å½’æ¡£æ–‡ä»¶ã€‚</p><h4 id="è¯­æ³•-6">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure><p>OPTIONS è¯´æ˜ï¼š</p><ul><li>**-o :**è¾“å‡ºåˆ°çš„æ–‡ä»¶ã€‚</li></ul><h4 id="å®ä¾‹-6">å®ä¾‹</h4><p>å°†é•œåƒ runoob/ubuntu:v3 ç”Ÿæˆ my_ubuntu_v3.tar æ–‡æ¡£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker save -o myhello-world.tar  hello-world </span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">myhello-world.tar</span><br></pre></td></tr></table></figure><h3 id="7ã€load">7ã€load</h3><p><strong>docker load :</strong> å¯¼å…¥ä½¿ç”¨  <code>docker save</code> å‘½ä»¤å¯¼å‡ºçš„é•œåƒã€‚</p><h4 id="è¯­æ³•-7">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load [OPTIONS]</span><br></pre></td></tr></table></figure><p>OPTIONS è¯´æ˜ï¼š</p><ul><li><strong>â€“input , -i :</strong> æŒ‡å®šå¯¼å…¥çš„æ–‡ä»¶ï¼Œä»£æ›¿ STDINã€‚</li><li><strong>â€“quiet , -q :</strong> ç²¾ç®€è¾“å‡ºä¿¡æ¯ã€‚</li></ul><h4 id="å®ä¾‹-7">å®ä¾‹</h4><p>å¯¼å…¥é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">[root@localhost ~]# docker load &lt; myhello-world.tar </span><br><span class="line">e07ee1baac5f: Loading layer [==================================================&gt;]  14.85kB/14.85kB</span><br><span class="line">Loaded image: hello-world:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼äºŒï¼š</span></span><br><span class="line">[root@localhost ~]# docker load -i myhello-world.tar </span><br><span class="line">e07ee1baac5f: Loading layer [==================================================&gt;]  14.85kB/14.85kB</span><br><span class="line">Loaded image: hello-world:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼ä¸‰ï¼š</span></span><br><span class="line">[root@localhost ~]# docker load --input myhello-world.tar </span><br><span class="line">e07ee1baac5f: Loading layer [==================================================&gt;]  14.85kB/14.85kB</span><br><span class="line">Loaded image: hello-world:latest</span><br></pre></td></tr></table></figure><h3 id="8ã€import">8ã€import</h3><p><strong>docker import :</strong> æŠŠå®¹å™¨å½’æ¡£æ–‡ä»¶æ¢å¤ä¸ºé•œåƒã€‚</p><h4 id="è¯­æ³•-8">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-c :**åº”ç”¨docker æŒ‡ä»¤åˆ›å»ºé•œåƒï¼›</li><li>**-m :**æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼›</li></ul><h4 id="å®ä¾‹-8">å®ä¾‹</h4><p>ä»å®¹å™¨å½’æ¡£æ–‡ä»¶ <code>mynginx.tar</code> åˆ›å»ºé•œåƒï¼Œå‘½åä¸º <code>mynginx/nginx:1.1</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker import mynginx.tar  mynginx/nginx:1.1</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker images mynginx/nginx</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">mynginx/nginx   1.1       bf6b3b49cad4   39 seconds ago   140MB</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€é•œåƒä»“åº“å‘½ä»¤">ä¸‰ã€é•œåƒä»“åº“å‘½ä»¤</h2><h3 id="1ã€login-logout">1ã€login/logout</h3><p><strong>docker login :</strong> ç™»é™†åˆ°ä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¦‚æœæœªæŒ‡å®šé•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ä»“åº“ Docker Hub</p><p><strong>docker logout :</strong> ç™»å‡ºä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¦‚æœæœªæŒ‡å®šé•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ä»“åº“ Docker Hub</p><h4 id="è¯­æ³•-9">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker login [OPTIONS] [SERVER]</span><br><span class="line">docker logout [OPTIONS] [SERVER]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-u :**ç™»é™†çš„ç”¨æˆ·å</li><li>**-p :**ç™»é™†çš„å¯†ç </li></ul><h4 id="å®ä¾‹-9">å®ä¾‹</h4><p>ç™»é™†åˆ°Docker Hub</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u ç”¨æˆ·å -p å¯†ç </span><br></pre></td></tr></table></figure><p>ç™»å‡ºDocker Hub</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout</span><br></pre></td></tr></table></figure><h3 id="2ã€search">2ã€search</h3><p><code>docker search</code> ï¼šåœ¨<a href="https://hub.docker.com">å®˜æ–¹ä»“åº“</a>ä¸­æœç´¢é•œåƒã€‚</p><h4 id="è¯­æ³•-10">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search [option] é•œåƒåç§°</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**â€“automated :**åªåˆ—å‡º automated buildç±»å‹çš„é•œåƒï¼›</li><li>**â€“no-trunc :**æ˜¾ç¤ºå®Œæ•´çš„é•œåƒæè¿°ï¼›</li><li>**-f &lt;è¿‡æ»¤æ¡ä»¶&gt;:**åˆ—å‡ºæ”¶è—æ•°ä¸å°äºæŒ‡å®šå€¼çš„é•œåƒã€‚</li><li><strong>â€“limt</strong> ï¼šé™åˆ¶è¾“å‡ºå‰Nä¸ªé•œåƒï¼Œç¤ºä¾‹ï¼š<code>docker search --limit 5 redis</code></li></ul><h4 id="å®ä¾‹-10">å®ä¾‹</h4><p><img src="https://cdn.whbblog.cn/img/image-20220629103100461.png" alt="image-20220629103100461"></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li>NAMEï¼šé•œåƒåç§°</li><li>DESCRIPTIONï¼šé•œåƒè¯´æ˜</li><li>STARSï¼šç‚¹èµæ•°é‡</li><li>OFFICIALï¼šæ˜¯å¦ä¸ºå®˜æ–¹é•œåƒ</li><li>AUTOMATEDï¼šæ˜¯å¦ä¸ºè‡ªåŠ¨æ„å»º</li></ul><h3 id="3ã€pull">3ã€pull</h3><p><code>docker pull</code> : æ‹‰å–é•œåƒåˆ°æœ¬åœ°</p><h4 id="è¯­æ³•-11">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull é•œåƒåç§°[TAG]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚ä¸æŒ‡å®šTAGï¼Œåˆ™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆlatestï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker pull ubuntu</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/ubuntu</span><br><span class="line">7b1a6ab2e44d: Pull complete </span><br><span class="line">Digest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322</span><br><span class="line">Status: Downloaded newer image for ubuntu:latest</span><br><span class="line">docker.io/library/ubuntu:latest  </span><br></pre></td></tr></table></figure><h3 id="4ã€push">4ã€push</h3><p><strong>docker push :</strong> å°†æœ¬åœ°çš„é•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“,è¦å…ˆç™»é™†åˆ°é•œåƒä»“åº“</p><p>####è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push [OPTIONS] NAME[:TAG]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**â€“disable-content-trust :**å¿½ç•¥é•œåƒçš„æ ¡éªŒ,é»˜è®¤å¼€å¯</li></ul><h4 id="å®ä¾‹-11">å®ä¾‹</h4><p>ä¸Šä¼ æœ¬åœ°é•œåƒ <code>myapache:v1</code>åˆ°é•œåƒä»“åº“ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push myapache:v1</span><br></pre></td></tr></table></figure><h2 id="å››ã€å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å‘½ä»¤">å››ã€å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å‘½ä»¤</h2><p><img src="https://cdn.whbblog.cn/img/1601821-20190714171018508-1470915751.png" alt="img"></p><h3 id="1ã€run">1ã€run</h3><p>**docker run ï¼š**åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</p><h4 id="è¯­æ³•-12">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>â€“nameï¼š æŒ‡å®šå®¹å™¨åç§°ï¼Œå¦‚ä¸æŒ‡å®šï¼Œç³»ç»Ÿä¼šéšæœºåˆ†é…åå­—ã€‚</li><li>-dï¼šåå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨ IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ï¼ˆåå°è¿è¡Œï¼‰ã€‚</li><li>-iï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t è¿ç”¨ã€‚</li><li>-tï¼šä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i è¿ç”¨ã€‚</li><li>-Pï¼šéšæœºç«¯å£æ˜ å°„ï¼Œå¤§å†™ P</li><li>-pï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œå°å†™ p</li><li>â€“dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li><li>â€“dns-search <a href="http://example.com">example.com</a>: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li><li>-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</li><li>â€“volume , -v: ç»‘å®šä¸€ä¸ªå·</li><li>-h â€œmarsâ€: æŒ‡å®šå®¹å™¨çš„hostnameï¼›</li><li>-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</li><li>-e username=â€œritchieâ€: è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</li><li>â€“env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</li><li>â€“cpuset=â€œ0-2â€ or --cpuset=â€œ0,1,2â€: ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›</li><li>â€“net=â€œbridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</li><li>â€“link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</li><li>â€“expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</li></ul><h4 id="å®ä¾‹-12">å®ä¾‹</h4><p>ä½¿ç”¨ docker é•œåƒ nginx:latest ä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‘½åä¸º test_nginxï¼Œå°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 8080 ç«¯å£,ä¸»æœºçš„ç›®å½• /test/data æ˜ å°„åˆ°å®¹å™¨çš„ /dataã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name test_nginx -p 8080:80 -v /test/data:/data nginx </span><br></pre></td></tr></table></figure><h4 id="é€€å‡ºå®¹å™¨">é€€å‡ºå®¹å™¨</h4><p>runè¿è¡Œå®¹å™¨æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œé€€å‡º</p><p>æ–¹å¼ä¸€ï¼š<code>exit</code> é€€å‡ºï¼Œé€€å‡ºåå®¹å™¨è¿è¡Œåœæ­¢</p><p>æ–¹å¼äºŒï¼š<code>Ctrl+p+q</code> é€€å‡ºï¼Œé€€å‡ºåå®¹å™¨ä¸åœæ­¢</p><h3 id="2ã€start-stop-restart">2ã€start/stop/restart</h3><p><strong>docker start</strong> :å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨</p><p><strong>docker stop</strong> :åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨</p><p><strong>docker restart</strong> :é‡å¯å®¹å™¨</p><h4 id="è¯­æ³•-13">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-13">å®ä¾‹</h4><p>å¯åŠ¨å·²è¢«åœæ­¢çš„å®¹å™¨nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start nginx</span><br></pre></td></tr></table></figure><p>åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop nginx</span><br></pre></td></tr></table></figure><p>é‡å¯å®¹å™¨nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart nginx</span><br></pre></td></tr></table></figure><h3 id="3ã€kill">3ã€kill</h3><p><strong>docker kill</strong> :æ€æ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><h4 id="è¯­æ³•-14">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-s :**å‘å®¹å™¨å‘é€ä¸€ä¸ªä¿¡å·</li></ul><h4 id="å®ä¾‹-14">å®ä¾‹</h4><p>æ€æ‰è¿è¡Œä¸­çš„å®¹å™¨ <code>mynginx</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker kill -s KILL mynginx</span><br><span class="line">mynginx</span><br></pre></td></tr></table></figure><h3 id="4ã€rm">4ã€rm</h3><p>**docker rm ï¼š**åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚</p><h4 id="è¯­æ³•-15">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-f :**é€šè¿‡ SIGKILL ä¿¡å·å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</li><li>**-l :**ç§»é™¤å®¹å™¨é—´çš„ç½‘ç»œè¿æ¥ï¼Œè€Œéå®¹å™¨æœ¬èº«ã€‚</li><li>**-v :**åˆ é™¤ä¸å®¹å™¨å…³è”çš„å·ã€‚</li></ul><h4 id="å®ä¾‹-15">å®ä¾‹</h4><p>å¼ºåˆ¶åˆ é™¤å®¹å™¨ <code>mynginx</code> ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f mynginx</span><br></pre></td></tr></table></figure><p>åˆ é™¤å®¹å™¨ <code>mynginx</code> , å¹¶åˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -v mynginx</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰å·²ç»åœæ­¢çš„å®¹å™¨ï¼ˆå±é™©ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure><h3 id="5ã€exec">5ã€exec</h3><p>**docker exec ï¼š**åœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</p><h4 id="è¯­æ³•-16">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-d :**åˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ</li><li>**-i :**å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€</li><li>**-t :**åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</li></ul><h4 id="å®ä¾‹-16">å®ä¾‹</h4><p>åœ¨å®¹å™¨ <code>mynginx</code> ä¸­å¼€å¯ä¸€ä¸ªäº¤äº’æ¨¡å¼çš„ç»ˆç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mynginx /bin/bash</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ <strong>docker ps -a</strong> å‘½ä»¤æŸ¥çœ‹å·²ç»åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œç„¶åä½¿ç”¨å®¹å™¨ ID è¿›å…¥å®¹å™¨ã€‚</p><p>æŸ¥çœ‹å·²ç»åœ¨è¿è¡Œçš„å®¹å™¨ IDï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED             STATUS             PORTS      NAMES</span><br><span class="line">af47bfb2a522   nginx     &quot;/docker-entrypoint.â€¦&quot;   18 minutes ago      Up 18 minutes      80/tcp     mynginx</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€åˆ—çš„ af47bfb2a522 å°±æ˜¯å®¹å™¨ IDã€‚</p><p>é€šè¿‡ exec å‘½ä»¤å¯¹æŒ‡å®šçš„å®¹å™¨æ‰§è¡Œ bash:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it af47bfb2a522 /bin/bash</span><br></pre></td></tr></table></figure><h3 id="6ã€create">6ã€create</h3><p>**docker create ï¼š**åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ä½†ä¸å¯åŠ¨å®ƒï¼Œç”¨æ³•å’Œè¯­æ³•åŒ <code>docker run</code></p><h4 id="è¯­æ³•-17">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure><p>å®ä¾‹</p><p>ä½¿ç”¨ docker é•œåƒ <code>nginx:latest </code>åˆ›å»ºä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸º <code>mynginx</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create --name mynginx nginx</span><br></pre></td></tr></table></figure><h3 id="7ã€pause-unpause">7ã€pause/unpause</h3><p><strong>docker pause</strong> :æš‚åœå®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><p><strong>docker unpause</strong> :æ¢å¤å®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><h4 id="è¯­æ³•-18">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pause CONTAINER [CONTAINER...]</span><br><span class="line">docker unpause CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-17">å®ä¾‹</h4><p>æš‚åœå®¹å™¨ <code>mynginx</code> æä¾›æœåŠ¡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pause mynginx</span><br></pre></td></tr></table></figure><p>æ¢å¤å®¹å™¨ <code>mynginx</code> æä¾›æœåŠ¡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker unpause mynginx</span><br></pre></td></tr></table></figure><h2 id="äº”ã€å®¹å™¨æ“ä½œå‘½ä»¤">äº”ã€å®¹å™¨æ“ä½œå‘½ä»¤</h2><h3 id="1ã€ps">1ã€ps</h3><p><code>docker ps</code> ï¼šåˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯ã€‚</p><h4 id="è¯­æ³•-19">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps [OPTIONS]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-a :**æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚</li><li>**-f :**æ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºçš„å†…å®¹ã€‚</li><li>**â€“format :**æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚</li><li>**-l :**æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚</li><li>**-n :**åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ã€‚</li><li>**â€“no-trunc :**ä¸æˆªæ–­è¾“å‡ºã€‚</li><li>**-q :**é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚</li><li>**-s :**æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚</li></ul><h4 id="å®ä¾‹-18">å®ä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES</span><br><span class="line">2aba77d1a205   ubuntu    &quot;bash&quot;    4 seconds ago   Up 2 seconds             quirky_ptolemy</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><p><strong>CONTAINER ID:</strong> å®¹å™¨ IDã€‚</p><p><strong>IMAGE:</strong> ä½¿ç”¨çš„é•œåƒã€‚</p><p><strong>COMMAND:</strong> å¯åŠ¨å®¹å™¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚</p><p><strong>CREATED:</strong> å®¹å™¨çš„åˆ›å»ºæ—¶é—´ã€‚</p><p><strong>STATUS:</strong> å®¹å™¨çŠ¶æ€ã€‚</p><p>çŠ¶æ€æœ‰7ç§ï¼š</p><ul><li>createdï¼ˆå·²åˆ›å»ºï¼‰</li><li>restartingï¼ˆé‡å¯ä¸­ï¼‰</li><li>runningï¼ˆè¿è¡Œä¸­ï¼‰</li><li>removingï¼ˆè¿ç§»ä¸­ï¼‰</li><li>pausedï¼ˆæš‚åœï¼‰</li><li>exitedï¼ˆåœæ­¢ï¼‰</li><li>deadï¼ˆæ­»äº¡ï¼‰</li></ul><p><strong>PORTS:</strong> å®¹å™¨çš„ç«¯å£ä¿¡æ¯å’Œä½¿ç”¨çš„è¿æ¥ç±»å‹ï¼ˆtcp\udpï¼‰ã€‚</p><p><strong>NAMES:</strong> è‡ªåŠ¨åˆ†é…çš„å®¹å™¨åç§°ã€‚</p><h3 id="2ã€top">2ã€top</h3><hr><p>**docker top :**æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼Œæ”¯æŒ ps å‘½ä»¤å‚æ•°ã€‚</p><h4 id="è¯­æ³•-20">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top [OPTIONS] CONTAINER [ps OPTIONS]</span><br></pre></td></tr></table></figure><p>å®¹å™¨è¿è¡Œæ—¶ä¸ä¸€å®šæœ‰ <code>/bin/bash</code> ç»ˆç«¯æ¥äº¤äº’æ‰§è¡Œ top å‘½ä»¤ï¼Œè€Œä¸”å®¹å™¨è¿˜ä¸ä¸€å®šæœ‰ top å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker top</code> æ¥å®ç°æŸ¥çœ‹ container ä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚</p><h4 id="å®ä¾‹-19">å®ä¾‹</h4><p>æŸ¥çœ‹å®¹å™¨ <code>mymysql</code> çš„è¿›ç¨‹ä¿¡æ¯ã€‚</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker top 44dcc2bed26b</span></span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root               <span class="number"> 8061 </span>              <span class="number"> 8042 </span>              <span class="number"> 0 </span>                  02:08               pts/0               00:00:00            bash</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰è¿è¡Œå®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span>  `docker ps |grep Up|awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`;<span class="keyword">do</span> <span class="built_in">echo</span> \ &amp;&amp;docker top <span class="variable">$i</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="3ã€logs">3ã€logs</h3><p><strong>docker logs :</strong> è·å–å®¹å™¨çš„æ—¥å¿—</p><h4 id="è¯­æ³•-21">è¯­æ³•</h4><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs <span class="comment">[OPTIONS]</span> <span class="keyword">CONTAINER</span></span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-f :</strong> è·Ÿè¸ªæ—¥å¿—è¾“å‡º</li><li>**â€“since :**æ˜¾ç¤ºæŸä¸ªå¼€å§‹æ—¶é—´çš„æ‰€æœ‰æ—¥å¿—</li><li><strong>-t :</strong> æ˜¾ç¤ºæ—¶é—´æˆ³</li><li>**â€“tail :**ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿—</li></ul><h4 id="å®ä¾‹-20">å®ä¾‹</h4><p>è·Ÿè¸ªæŸ¥çœ‹å®¹å™¨mynginxçš„æ—¥å¿—è¾“å‡ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker logs -f mynginx</span><br><span class="line">192.168.239.1 - - [10/Jul/2016:16:53:33 +0000] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;</span><br><span class="line">2016/07/10 16:53:33 [error] 5#5: *1 open() &quot;/usr/share/nginx/html/favicon.ico&quot; failed (2: No such file or directory), client: 192.168.239.1, server: localhost, request: &quot;GET /favicon.ico HTTP/1.1&quot;, host: &quot;192.168.239.130&quot;, referrer: &quot;http://192.168.239.130/&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å®¹å™¨mynginxä»2016å¹´7æœˆ1æ—¥åçš„æœ€æ–°10æ¡æ—¥å¿—ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since=&quot;2016-07-01&quot; --tail=10 mynginx</span><br></pre></td></tr></table></figure><h3 id="4ã€inspect">4ã€inspect</h3><p><strong>docker inspect :</strong> è·å–å®¹å™¨/é•œåƒçš„å…ƒæ•°æ®ã€‚</p><h4 id="è¯­æ³•-22">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-f :**æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚</li><li>**-s :**æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚</li><li>**â€“type :**ä¸ºæŒ‡å®šç±»å‹è¿”å›JSONã€‚</li></ul><h4 id="å®ä¾‹-21">å®ä¾‹</h4><p>è·å–å®¹å™¨ mynginx ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect mynginx</span><br></pre></td></tr></table></figure><p>è·å–æ­£åœ¨è¿è¡Œçš„å®¹å™¨ mynginx çš„ IPã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; mynginx</span><br></pre></td></tr></table></figure><h3 id="5ã€attach">5ã€attach</h3><p>**docker attach :**è¿æ¥åˆ°æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><h4 id="è¯­æ³•-23">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><p>è¦ attachä¸Šå»çš„å®¹å™¨å¿…é¡»æ­£åœ¨è¿è¡Œï¼Œå¯ä»¥åŒæ—¶è¿æ¥ä¸ŠåŒä¸€ä¸ªcontaineræ¥å…±äº«å±å¹•ï¼ˆä¸screenå‘½ä»¤çš„attachç±»ä¼¼ï¼‰ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ä¸­è¯´ attach åå¯ä»¥é€šè¿‡CTRL-C æ¥ detachï¼Œä½†å®é™…ä¸Šç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œå¦‚æœcontainerå½“å‰åœ¨è¿è¡Œbashï¼ŒCTRL-Cè‡ªç„¶æ˜¯å½“å‰è¡Œçš„è¾“å…¥ï¼Œæ²¡æœ‰é€€å‡ºï¼›å¦‚æœcontainerå½“å‰æ­£åœ¨å‰å°è¿è¡Œè¿›ç¨‹ï¼Œå¦‚è¾“å‡ºnginxçš„access.logæ—¥å¿—ï¼ŒCTRL-Cä¸ä»…ä¼šå¯¼è‡´é€€å‡ºå®¹å™¨ï¼Œè€Œä¸”è¿˜stopäº†ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œdetachçš„æ„æ€æŒ‰ç†åº”è¯¥æ˜¯è„±ç¦»å®¹å™¨ç»ˆç«¯ï¼Œä½†å®¹å™¨ä¾ç„¶è¿è¡Œã€‚å¥½åœ¨attachæ˜¯å¯ä»¥å¸¦ä¸Šâ€“sig-proxy=falseæ¥ç¡®ä¿CTRL-Dæˆ–CTRL-Cä¸ä¼šå…³é—­å®¹å™¨ã€‚</p><h4 id="å®ä¾‹-22">å®ä¾‹</h4><p>å®¹å™¨mynginxå°†è®¿é—®æ—¥å¿—æŒ‡åˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿æ¥åˆ°å®¹å™¨æŸ¥çœ‹è®¿é—®ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# runoob@runoob:~$ docker attach --sig-proxy=false mynginx</span><br><span class="line">192.168.239.1 - - [10/Jul/2016:16:54:26 +0000] &quot;GET / HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;</span><br></pre></td></tr></table></figure><h3 id="6ã€events">6ã€events</h3><p><strong>docker events :</strong> ä»æœåŠ¡å™¨è·å–å®æ—¶äº‹ä»¶</p><h4 id="è¯­æ³•-24">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker events [OPTIONS]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-f ï¼š**æ ¹æ®æ¡ä»¶è¿‡æ»¤äº‹ä»¶ï¼›</li><li>**â€“since ï¼š**ä»æŒ‡å®šçš„æ—¶é—´æˆ³åæ˜¾ç¤ºæ‰€æœ‰äº‹ä»¶;</li><li>**â€“until ï¼š**æµæ°´æ—¶é—´æ˜¾ç¤ºåˆ°æŒ‡å®šçš„æ—¶é—´ä¸ºæ­¢ï¼›</li></ul><h4 id="å®ä¾‹-23">å®ä¾‹</h4><p>æ˜¾ç¤ºdocker 2016å¹´7æœˆ1æ—¥åçš„æ‰€æœ‰äº‹ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runoob@runoob:~/mysql$ docker events  --since=&quot;1467302400&quot;</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºdocker é•œåƒä¸ºmysql:5.6 2016å¹´7æœˆ1æ—¥åçš„ç›¸å…³äº‹ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runoob@runoob:~/mysql$ docker events -f &quot;image&quot;=&quot;mysql:5.6&quot; --since=&quot;1467302400&quot; </span><br></pre></td></tr></table></figure><h3 id="7ã€wait">7ã€wait</h3><p><strong>docker wait :</strong> é˜»å¡è¿è¡Œç›´åˆ°å®¹å™¨åœæ­¢ï¼Œç„¶åæ‰“å°å‡ºå®ƒçš„é€€å‡ºä»£ç ã€‚</p><h4 id="è¯­æ³•-25">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker wait [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-24">å®ä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker wait CONTAINER</span><br></pre></td></tr></table></figure><h3 id="8ã€export">8ã€export</h3><p>**docker export :**å°†æ–‡ä»¶ç³»ç»Ÿä½œä¸ºä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶å¯¼å‡ºåˆ°STDOUTã€‚</p><h4 id="è¯­æ³•-26">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-o :**å°†è¾“å…¥å†…å®¹å†™åˆ°æ–‡ä»¶ã€‚</li></ul><h4 id="å®ä¾‹-25">å®ä¾‹</h4><p>å°†idä¸º <code>d86335a0a18a</code> çš„å®¹å™¨ä¿å­˜ä¸ºtaræ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker export -o mynginx.tar d86335a0a18a</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">mynginx.tar</span><br></pre></td></tr></table></figure><h3 id="9ã€port">9ã€port</h3><p>**docker port :**åˆ—å‡ºæŒ‡å®šçš„å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæˆ–è€…æŸ¥æ‰¾å°† PRIVATE_PORT NAT åˆ°é¢å‘å…¬ä¼—çš„ç«¯å£ã€‚</p><h4 id="è¯­æ³•-27">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port [OPTIONS] CONTAINER [PRIVATE_PORT[/PROTO]]</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-26">å®ä¾‹</h4><p>æŸ¥çœ‹å®¹å™¨mynginxçš„ç«¯å£æ˜ å°„æƒ…å†µã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker port mymysql</span><br><span class="line">3306/tcp -&gt; 0.0.0.0:3306</span><br></pre></td></tr></table></figure><h2 id="å…­ã€å®¹å™¨-rootfs-å‘½ä»¤">å…­ã€å®¹å™¨ rootfs å‘½ä»¤</h2><h3 id="1ã€commit">1ã€commit</h3><p>**docker commit :**ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><h4 id="è¯­æ³•-28">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-a :**æäº¤çš„é•œåƒä½œè€…ï¼›</li><li>**-c :**ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒï¼›</li><li>**-m :**æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼›</li><li>**-p :**åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœã€‚</li></ul><h4 id="å®ä¾‹-27">å®ä¾‹</h4><p>å°†å®¹å™¨ a404c6c174a2 ä¿å­˜ä¸ºæ–°çš„é•œåƒ,å¹¶æ·»åŠ æäº¤äººä¿¡æ¯å’Œè¯´æ˜ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker commit -a &quot;whbblog&quot; -m &quot;my apache&quot; a404c6c174a2  mymysql:v1 </span><br><span class="line">sha256:37af1236adef1544e8886be23010b66577647a40bc02c0885a6600b33ee28057</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker images mymysql:v1</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mymysql             v1                  37af1236adef        15 seconds ago      329 MB</span><br></pre></td></tr></table></figure><h3 id="2ã€cp">2ã€cp</h3><p>**docker cp :**ç”¨äºå®¹å™¨ä¸ä¸»æœºä¹‹é—´çš„æ•°æ®æ‹·è´ã€‚</p><h4 id="è¯­æ³•-29">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span><br><span class="line">docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span><br></pre></td></tr></table></figure><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-L :**ä¿æŒæºç›®æ ‡ä¸­çš„é“¾æ¥</li></ul><h4 id="å®ä¾‹-28">å®ä¾‹</h4><p>å°†ä¸»æœº/www/runoobç›®å½•æ‹·è´åˆ°å®¹å™¨96f7f14e99abçš„/wwwç›®å½•ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp /www/runoob 96f7f14e99ab:/www/</span><br></pre></td></tr></table></figure><p>å°†ä¸»æœº/www/runoobç›®å½•æ‹·è´åˆ°å®¹å™¨96f7f14e99abä¸­ï¼Œç›®å½•é‡å‘½åä¸ºwwwã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp /www/runoob 96f7f14e99ab:/www</span><br></pre></td></tr></table></figure><p>å°†å®¹å™¨96f7f14e99abçš„/wwwç›®å½•æ‹·è´åˆ°ä¸»æœºçš„/tmpç›®å½•ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp  96f7f14e99ab:/www /tmp/</span><br></pre></td></tr></table></figure><h3 id="3ã€diff">3ã€diff</h3><p><strong>docker diff :</strong> æ£€æŸ¥å®¹å™¨é‡Œæ–‡ä»¶ç»“æ„çš„æ›´æ”¹ã€‚</p><h4 id="è¯­æ³•-30">è¯­æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker diff [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure><h4 id="å®ä¾‹-29">å®ä¾‹</h4><p>æŸ¥çœ‹å®¹å™¨mymysqlçš„æ–‡ä»¶ç»“æ„æ›´æ”¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">runoob@runoob:~$ docker diff mymysql</span><br><span class="line">A /logs</span><br><span class="line">A /mysql_data</span><br><span class="line">C /run</span><br><span class="line">C /run/mysqld</span><br><span class="line">A /run/mysqld/mysqld.pid</span><br><span class="line">A /run/mysqld/mysqld.sock</span><br><span class="line">C /tmp</span><br></pre></td></tr></table></figure><h3 id="4ã€system">4ã€system</h3><p><strong>docker system</strong>ï¼šæŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å çš„ç©ºé—´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker system df</span><br><span class="line">TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE</span><br><span class="line">Images          1         1         13.26kB   0B (0%)</span><br><span class="line">Containers      2         0         0B        0B</span><br><span class="line">Local Volumes   0         0         0B        0B</span><br><span class="line">Build Cache     0         0         0B        0B</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å‘½ä»¤ </tag>
            
            <tag> Docker å‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker é•œåƒåŸç†ï¼ˆäº”ï¼‰</title>
      <link href="/posts/cc9830aba042.html"/>
      <url>/posts/cc9830aba042.html</url>
      
        <content type="html"><![CDATA[<h1>ä¸€ã€Docker é•œåƒåŸç†</h1><h2 id="1ã€é•œåƒ">1ã€é•œåƒ</h2><p>Docker é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒ(åŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶éœ€è¦çš„åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç­‰)ï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯imageé•œåƒæ–‡ä»¶ã€‚</p><p>ä»¥æˆ‘ä»¬çš„ <code>docker pull tomcat</code> ä¸ºä¾‹ï¼Œåœ¨ä¸‹è½½çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° docker çš„é•œåƒå¥½åƒæ˜¯åœ¨ä¸€å±‚ä¸€å±‚çš„åœ¨ä¸‹è½½ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker pull tomcat</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/tomcat</span><br><span class="line">0e29546d541c: Pull complete </span><br><span class="line">9b829c73b52b: Pull complete </span><br><span class="line">cb5b7ae36172: Pull complete </span><br><span class="line">6494e4811622: Pull complete </span><br><span class="line">668f6fcc5fa5: Pull complete </span><br><span class="line">dc120c3e0290: Pull complete </span><br><span class="line">8f7c0eebb7b1: Pull complete </span><br><span class="line">77b694f83996: Pull complete </span><br><span class="line">0f611256ec3a: Pull complete </span><br><span class="line">4f25def12f23: Pull complete </span><br><span class="line">Digest: sha256:9dee185c3b161cdfede1f5e35e8b56ebc9de88ed3a79526939701f3537a52324</span><br><span class="line">Status: Downloaded newer image for tomcat:latest</span><br><span class="line">docker.io/library/tomcat:latest</span><br></pre></td></tr></table></figure><p>é•œåƒåŒ…å«ç€å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€è¦çš„ä»£ç ä»¥åŠå…¶å®ƒç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ç§åˆ†å±‚ç»“æ„ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯åªè¯»çš„ï¼ˆread-only layersï¼‰ã€‚æ„å»ºé•œåƒæ—¶ï¼Œä¼šä¸€å±‚ä¸€å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚é•œåƒçš„è¿™ç§åˆ†å±‚å­˜å‚¨ç»“æ„å¾ˆé€‚åˆé•œåƒçš„å¤ç”¨ä»¥åŠå®šåˆ¶ã€‚</p><p>æ„å»ºå®¹å™¨æ—¶ï¼Œé€šè¿‡åœ¨é•œåƒçš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªå¯å†™å±‚ï¼ˆwritable layerï¼‰ï¼Œç”¨æ¥ä¿å­˜ç€å®¹å™¨è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¿®æ”¹ã€‚</p><img src="https://cdn.whbblog.cn/img/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f646f636b65722d66696c6573797374656d732d62757379626f7872772e706e67" alt="img" style="zoom:50%;" /><h2 id="2ã€è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰">2ã€è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰</h2><p>Docker çš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿ UnionFSã€‚Unionæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual   filesystem)ã€‚Union æ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p><p>â€‹ã€€ã€€<strong>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</strong></p><h2 id="3ã€Dockeré•œåƒåŠ è½½åŸç†">3ã€Dockeré•œåƒåŠ è½½åŸç†</h2><p>bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernel, bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernel, Linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯bootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p><p>rootfs (root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹ Linux ç³»ç»Ÿä¸­çš„ /dev, /proc, /bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚</p><p><img src="https://cdn.whbblog.cn/img/19827908-823b1f9e4726c37b.png" alt="19827908-823b1f9e4726c37b"></p><p>[quote color=â€œinfoâ€]ã€€ã€€å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSï¼Œrootfså¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…æ‹¬æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ç”¨Hostçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾› rootfs å°±è¡Œäº†ã€‚ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆ, bootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„, rootfsä¼šæœ‰å·®åˆ«, å› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨bootfsã€‚ [/quote]</p><h2 id="4ã€åˆ†å±‚é•œåƒ">4ã€åˆ†å±‚é•œåƒ</h2><p>ç‰¹ç‚¹ï¼š<strong>å…±äº«èµ„æº</strong>ã€‚æ¯”å¦‚ï¼Œæœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„ base é•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆå®¿ä¸»æœºåªéœ€åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½baseé•œåƒï¼ŒåŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€åŠ è½½ä¸€ä»½ base é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æœåŠ¡äº†ã€‚è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ã€‚</p><p>Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™ä¸€å±‚ç§°ä¸º&quot;å®¹å™¨å±‚&quot;ï¼Œâ€œå®¹å™¨å±‚&quot;ä¹‹ä¸‹ä¸º&quot;é•œåƒå±‚â€ã€‚</p><h2 id="5ã€æŸ¥çœ‹é•œåƒ">5ã€æŸ¥çœ‹é•œåƒ</h2><p>æˆ‘ä»¬æœ‰2ç§æ–¹æ³•æŸ¥çœ‹é•œåƒï¼š</p><ol><li>ä½¿ç”¨<code>docker inspect</code>ï¼šè·å–é•œåƒçš„å…ƒæ•°æ®</li><li>ä½¿ç”¨<code>docker history</code>ï¼šæŸ¥çœ‹é•œåƒçš„æ„å»ºå†å²</li></ol><p>ç†è®ºä¸Šï¼Œä¸€ä¸ªå®¹å™¨çš„é•œåƒï¼Œæœ€å¤šå¯ä»¥æœ‰127å±‚ï¼Œæ€ä¹ˆæŸ¥çœ‹é•œåƒçš„å±‚æ•°ï¼Ÿ</p><p>é€šè¿‡ <code>docker Inspect</code> å‘½ä»¤ï¼Œå¯»æ‰¾ <code>RootFS</code> ä»£ç ç‰‡æ®µï¼Œåœ¨ <code>Layers</code> ä¸­ï¼Œæœ‰å¤šå°‘è¡Œ <code>(sha256)</code> å°±ä»£è¡¨é•œåƒæœ‰å¤šå°‘å±‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx #æ ¹æ®é•œåƒnginx,æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f&quot;,</span><br><span class="line">                &quot;sha256:e379e8aedd4d72bb4c529a4ca07a4e4d230b5a1d3f7a61bc80179e8f02421ad8&quot;,</span><br><span class="line">                &quot;sha256:b8d6e692a25e11b0d32c5c3dd544b71b1085ddc1fddad08e68cbd7fda7f70221&quot;,</span><br><span class="line">                &quot;sha256:f1db227348d0a5e0b99b15a096d930d1a69db7474a1847acbc31f05e4ef8df8c&quot;,</span><br><span class="line">                &quot;sha256:32ce5f6a5106cc637d09a98289782edf47c32cb082dc475dd47cbf19a4f866da&quot;,</span><br><span class="line">                &quot;sha256:d874fd2bc83bb3322b566df739681fbd2248c58d3369cb25908d68e7ed6040a6&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker history</code>å¯ä»¥çœ‹åˆ°é•œåƒçš„æ„å»ºå†å²ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history nginx </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT</span><br><span class="line">605c77e624dd   6 months ago   /bin/sh -c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemonâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  STOPSIGNAL SIGQUIT           0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  EXPOSE 80                    0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;/docker-entrâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop) COPY file:09a214a3e07c919aâ€¦   4.61kB    </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7â€¦   1.04kB    </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop) COPY file:0b866ff3fc1ef5b0â€¦   1.96kB    </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop) COPY file:65504f71f5855ca0â€¦   1.2kB     </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -â€¦   61.1MB    </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~bullseye   0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.7.1        0B        </span><br><span class="line">&lt;missing&gt;      6 months ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.21.5     0B        </span><br><span class="line">&lt;missing&gt;      7 months ago   /bin/sh -c #(nop)  LABEL maintainer=NGINX Doâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      7 months ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        </span><br><span class="line">&lt;missing&gt;      7 months ago   /bin/sh -c #(nop) ADD file:09675d11695f65c55â€¦   80.4MB </span><br></pre></td></tr></table></figure><p>åœ¨Dockerfileä¸­ä¸€èˆ¬ï¼Œæ¯ä¸€è¡Œçš„æ·»åŠ ADDã€COPYã€RUNï¼Œæˆ–è€…åˆ›å»ºæ–°(é…ç½®)æ–‡ä»¶çš„å‘½ä»¤ï¼Œéƒ½ä¼šè§¦å‘æ–°å»ºä¸€å±‚é•œåƒï¼Œè¿™å±‚é•œåƒä¸€èˆ¬ä¼šè¢«ç§°ä¸ºä¸­é—´å±‚é•œåƒï¼Œä¸­é—´å±‚é•œåƒå­˜åœ¨çš„æ„ä¹‰ï¼šåŠ é€Ÿé•œåƒæ„å»ºã€é‡å¤åˆ©ç”¨èµ„æºã€‚</p><h1>äºŒã€Docker é•œåƒæ“ä½œæ¡ˆä¾‹</h1><p>ä½¿ç”¨ <code>docker commit</code>  æäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ ubuntu é•œåƒä¸ºä¾‹ï¼ŒåŸå§‹çš„é»˜è®¤ubuntué•œåƒä¸å¸¦vimå‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨å¤–ç½‘è¿é€šçš„æƒ…å†µä¸‹ï¼Œå®‰è£… vim è½¯ä»¶ï¼Œå®‰è£…å®Œæˆåcommitä¸ºæ–°çš„ubuntué•œåƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œ unbntu é•œåƒ</span></span><br><span class="line">[root@localhost ~]# docker run -it ubuntu bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®æ›´æ–°</span></span><br><span class="line">root@393af6f0b855:/# apt-get update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… vim</span></span><br><span class="line">root@393af6f0b855:/# apt-get install -y vim</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯</span></span><br><span class="line">root@393af6f0b855:/# vim a.txt</span><br><span class="line">root@393af6f0b855:/# cat a.txt </span><br><span class="line">aaa</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°Ubuntué•œåƒ</span></span><br><span class="line">[root@localhost ~]# docker commit -m=&quot;vim cmd add ok&quot; -a=&quot;whb&quot; 393af6f0b855 myubuntu:v1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">myubuntu        v1        a7a511fae0fb   9 seconds ago   178MB</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">commit è¯­æ³•</span></span><br><span class="line"> docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„é•œåƒåç§°:[tag]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> é•œåƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 BGP é…ç½®</title>
      <link href="/posts/c25da7e500f9.html"/>
      <url>/posts/c25da7e500f9.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šæ‚¨å¸Œæœ›ä½¿ç”¨åŠ¨æ€è·¯ç”±åè®®BGPé…ç½®F5çš„ç½‘ç»œï¼Œæœ¬æ–‡å°†è®²è§£F5 BGPé…ç½®ã€‚</strong></p><h2 id="ä¸€ã€å‰æœŸå‡†å¤‡">ä¸€ã€å‰æœŸå‡†å¤‡</h2><h3 id="1ã€ç¯å¢ƒ">1ã€ç¯å¢ƒ</h3><p>(1) BIG-IP ç³»ç»Ÿå·²è·å¾— BIG-IP é«˜çº§è·¯ç”±æ¨¡å— ï¼ˆBIG-IP ARMï¼‰ çš„è®¸å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼Œæ˜¯å¦å«æœ‰ ARM Licenseï¼Œæœ‰è¾“å‡ºåˆ™å«æœ‰ ARM Licenseã€‚</span></span><br><span class="line">cat bigip.license| grep &quot;Routing Bundle&quot;</span><br></pre></td></tr></table></figure><p>(2) æ‚¨å…·æœ‰å¯¹ BIG-IP å‘½ä»¤è¡Œçš„ç®¡ç†è®¿é—®æƒé™ã€‚</p><h3 id="2ã€å®éªŒæ‹“æ‰‘">2ã€å®éªŒæ‹“æ‰‘</h3><p><img src="https://cdn.whbblog.cn/img/image-20220721100159094.png" alt="image-20220721100159094"></p><h2 id="äºŒã€F5-é…ç½®">äºŒã€F5 é…ç½®</h2><h3 id="1ã€F5-é…ç½®-Selfip">1ã€F5 é…ç½® Selfip</h3><p><img src="https://cdn.whbblog.cn/img/image-20220720151109523.png" alt="image-20220720151109523"></p><h3 id="2ã€F5-Selfip-è‡ªå®šä¹‰ç«¯å£æ”¾è¡Œ-BGP-179-ç«¯å£ç”¨äºå»ºç«‹BGPé‚»å±…ï¼›">2ã€F5 Selfip è‡ªå®šä¹‰ç«¯å£æ”¾è¡Œ BGP 179 ç«¯å£ç”¨äºå»ºç«‹BGPé‚»å±…ï¼›</h3><p><img src="https://cdn.whbblog.cn/img/image-20220720151220818.png" alt="image-20220720151220818"></p><h3 id="3ã€F5-è·¯ç”±åŸŸå¼€å¯-BGPã€BFD-åŠŸèƒ½ç‰¹æ€§">3ã€F5 è·¯ç”±åŸŸå¼€å¯ BGPã€BFD åŠŸèƒ½ç‰¹æ€§</h3><p><img src="https://cdn.whbblog.cn/img/image-20220720151613248.png" alt="image-20220720151613248"></p><h3 id="4ã€F5-å–æ¶ˆ-VLAN-Keyed-Connections-åŠŸèƒ½">4ã€F5 å–æ¶ˆ VLAN-Keyed Connections åŠŸèƒ½</h3><p><img src="https://cdn.whbblog.cn/img/image-20220720151704296.png" alt="image-20220720151704296"></p><h3 id="5ã€ç™»å½•F5-å‘½ä»¤è¡Œé…ç½®BGP">5ã€ç™»å½•F5 å‘½ä»¤è¡Œé…ç½®BGP</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥é«˜çº§è·¯ç”±æ¨¡å—</span></span><br><span class="line">[root@bigip2:Active:Standalone] config # imish</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥ç‰¹æƒæ¨¡å¼</span></span><br><span class="line">bigip2.com[0]&gt;enable</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥é…ç½®æ¨¡å¼</span></span><br><span class="line">bigip2.com[0]#config terminal</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥vlanæ¥å£</span></span><br><span class="line">bigip2.com[0](config)#interface vlan_external</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ç”¨ BFD ç‰¹æ€§</span></span><br><span class="line">bigip2.com[0](config-if)#bfd interval 300 minrx 300 multiplier 3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€€å‡ºvlanæ¥å£</span></span><br><span class="line">bigip2.com[0](config-if)#quit</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½® bfd slow-timer</span></span><br><span class="line">bigip2.com[0](config)#bfd slow-timer 2000</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥ BGP AS 100</span></span><br><span class="line">bigip2.com[0](config)#router bgp 100 </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½® BGP é‚»å±…</span></span><br><span class="line">bigip2.com[0](config-router)#neighbor 192.168.10.83 remote-as 200</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¿€æ´»é…ç½®</span></span><br><span class="line">bigip2.com[0](config-router)#neighbor 192.168.10.83 activate </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ç”¨ BFD</span></span><br><span class="line">bigip2.com[0](config-router)#neighbor 192.168.10.83 fall-over bfd multihop </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®£å‘Š vip ç½‘æ®µï¼Œå¦‚æœé…ç½® snat ç½‘æ®µï¼Œä¹Ÿéœ€è¦å®£å‘Šã€‚</span></span><br><span class="line">bigip2.com[0](config-router)#network 192.168.7.0/24</span><br><span class="line">bigip2.com[0](config-router)#quit</span><br><span class="line">bigip2.com[0](config)#quit</span><br><span class="line">bigip2.com[0]#exit</span><br></pre></td></tr></table></figure><h3 id="6ã€æ£€æŸ¥è·¯ç”±è¡¨">6ã€æ£€æŸ¥è·¯ç”±è¡¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bigip2.com[0]&gt;show ip route </span><br><span class="line">Codes: K - kernel, C - connected, S - static, R - RIP, B - BGP</span><br><span class="line">       O - OSPF, IA - OSPF inter area</span><br><span class="line">       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br><span class="line">       E1 - OSPF external type 1, E2 - OSPF external type 2</span><br><span class="line">       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area</span><br><span class="line">       * - candidate default</span><br><span class="line"></span><br><span class="line">C       127.0.0.1/32 is directly connected, lo</span><br><span class="line">C       127.1.1.254/32 is directly connected, tmm</span><br><span class="line">B       192.168.2.0/24 [20/0] via 192.168.10.83, vlan_external, 00:01:48</span><br><span class="line">C       192.168.7.0/24 is directly connected, vlan_internal</span><br><span class="line">C       192.168.10.0/24 is directly connected, vlan_external</span><br><span class="line"></span><br><span class="line">Gateway of last resort is not set</span><br></pre></td></tr></table></figure><p>é€šè¿‡è·¯ç”±è¡¨å·²ç»å‘ç°é€šè¿‡ BGP å­¦åˆ°äº† 192.168.2.0/24 çš„ç½‘ç»œã€‚</p><h2 id="ä¸‰ã€å‚è€ƒæ–‡æ¡£">ä¸‰ã€å‚è€ƒæ–‡æ¡£</h2><h3 id="äººå‘˜è‡´è°¢">äººå‘˜è‡´è°¢</h3><p>ğŸ‘¦ XinYu Zhang</p><h3 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h3><p>ğŸ¯ <a href="https://support.f5.com/csp/article/K17721433">https://support.f5.com/csp/article/K17721433</a></p><p>ğŸ¯ <a href="https://support.f5.com/csp/article/K54334475">https://support.f5.com/csp/article/K54334475</a></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> BGP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 Telemetry Stream to AWS CloudWatch</title>
      <link href="/posts/778c81ceed70.html"/>
      <url>/posts/778c81ceed70.html</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>ç”¨æˆ·æƒ³é€šè¿‡ AWS CloudWatch æ¥ç›‘æ§ f5 ä¸šåŠ¡æ—¥å¿—æƒ…å†µï¼Œè¦æ±‚ f5 éœ€è¦å°†æ—¥å¿—å‘é€åˆ° CloudWatch æ¥å®Œæˆå¯¹æ¥ã€‚</p><h2 id="ä¸€ã€F5-é…ç½®éƒ¨åˆ†">ä¸€ã€F5 é…ç½®éƒ¨åˆ†</h2><h3 id="1ã€ä¸‹è½½-F5-Telemetry-RPM-åŒ…">1ã€ä¸‹è½½ F5 Telemetry RPM åŒ…</h3><div class="btns rounded grid5">            <a class="button" href='https://github.com/F5Networks/f5-telemetry-streaming/releases' title='å®˜æ–¹ä¸‹è½½'><i class='fas fa-download'></i>å®˜æ–¹ä¸‹è½½</a><a class="button" href='https://cloud.niux.plus/#s/8R0GZBBQ' title='å›½å†…ä¸‹è½½'><i class='fas fa-download'></i>å›½å†…ä¸‹è½½</a>          </div><h3 id="2ã€å®‰è£…-F5-Telemetry-RPM-åŒ…">2ã€å®‰è£… F5 Telemetry RPM åŒ…</h3><p>å¯¼èˆªè‡³è·¯å¾„ <code>iApps &gt;&gt; Package Management LX</code> ç‚¹å‡» <code>Import</code> å¯¼å…¥ RMP åŒ…ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220704152945246.png" alt="image-20220704152945246"></p><p>é€‰æ‹©æ–‡ä»¶ï¼Œç‚¹å‡» Upload è¿›è¡Œä¸Šä¼ ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220704153253621.png" alt="image-20220704153253621"></p><p>[quote color=â€œprimaryâ€]æ³¨æ„ï¼šå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ 14.0 ä¹‹å‰çš„ BIG-IP ç‰ˆæœ¬ï¼Œåˆ™å¿…é¡»å…ˆä½¿ç”¨ BIG-IP å‘½ä»¤è¡Œå¯ç”¨æ¡†æ¶ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨é…ç½®å®ç”¨ç¨‹åºã€‚åœ¨ CLI ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<br><code>touch /var/config/rest/iapps/enable</code>[/quote]</p><h3 id="3ã€é…ç½®-AWS-å®‰å…¨å¯†é’¥ç»„">3ã€é…ç½® AWS å®‰å…¨å¯†é’¥ç»„</h3><p>å¯¼èˆªè‡³è·¯å¾„ <code>System &gt;&gt; Configuration : AWS : Global Settings </code> ï¼Œè¾“å…¥ <code>Access Key</code> å’Œ <code>Secret Key</code> ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220704153926307.png" alt="image-20220704153926307"></p><h2 id="äºŒã€AWS-CloudWatch-é…ç½®éƒ¨åˆ†">äºŒã€AWS CloudWatch é…ç½®éƒ¨åˆ†</h2><h3 id="1ã€æ—¥å¿—ç»„åˆ›å»º">1ã€æ—¥å¿—ç»„åˆ›å»º</h3><p>å¯¼èˆªè‡³è·¯å¾„ <code>CloudWatch &gt; Log Groups</code> ï¼Œç‚¹å‡» <code>Create log group </code> è¿›è¡Œæ—¥å¿—ç»„åˆ›å»ºã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220704155038738.png" alt="image-20220704155038738"></p><h3 id="2ã€æ—¥å¿—æµåˆ›å»º">2ã€æ—¥å¿—æµåˆ›å»º</h3><p>åœ¨æ—¥å¿—ç»„ï¼ˆmy_log_groupï¼‰é‡Œé¢åˆ›å»ºä¸€ä¸ªæ—¥å¿—æµï¼ˆmy_log_streamï¼‰</p><p><img src="https://cdn.whbblog.cn/img/image-20220704155125721.png" alt="image-20220704155125721"></p><h2 id="ä¸‰ã€é…ç½®-Telemetry-Streaming">ä¸‰ã€é…ç½® Telemetry Streaming</h2><p>è¿™é‡Œä½¿ç”¨ <code>Posteman</code> å®¢æˆ·ç«¯è¿›è¡Œæ¼”ç¤ºï¼Œå…¶ä»– <code>RESTful API</code> å®¢æˆ·ç«¯ä¹Ÿå¯ã€‚</p><h3 id="1ã€è·å–-F5-Telemetry-ä¿¡æ¯">1ã€è·å– F5 Telemetry ä¿¡æ¯</h3><p>æ­¤æ­¥éª¤ç”¨äºè·å– F5 <code>Telemetry Streaming</code> ä¿¡æ¯ï¼Œç¡®ä¿æ­£å¸¸è¿è¡Œã€‚</p><p>å‘ F5 å‘é€ <code>Get</code> è¯·æ±‚ï¼Œæ”¶åˆ°ç‰ˆæœ¬ä¿¡æ¯ç­‰è¿”å›å€¼ï¼Œè¯´æ˜ <code>Telemetry  Streaming</code> æ­£å¸¸è¿è¡Œã€‚URLæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://&#123;&#123;host&#125;&#125;/mgmt/shared/telemetry/info</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20220704161733856.png" alt="image-20220704161733856"></p><h3 id="2ã€é…ç½®-F5-Telemetry-Streaming">2ã€é…ç½® F5 Telemetry Streaming</h3><p>å‘ F5 å‘é€ <code>POST</code> æäº¤ <code>Telemetry Streaming</code> é…ç½®ã€‚URLæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:///mgmt/shared/telemetry/declare</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/image-20220704161652237.png" alt="image-20220704161652237"></p><p><strong>æäº¤å†…å®¹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;class&quot;: &quot;Telemetry&quot;,</span><br><span class="line"> &quot;My_System&quot;: &#123;</span><br><span class="line"> &quot;class&quot;: &quot;Telemetry_System&quot;,</span><br><span class="line"> &quot;systemPoller&quot;: &#123;</span><br><span class="line"> &quot;interval&quot;: 60</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;My_Listener&quot;: &#123;</span><br><span class="line"> &quot;class&quot;: &quot;Telemetry_Listener&quot;,</span><br><span class="line"> &quot;port&quot;: 6514</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;My_Consumer&quot;: &#123;</span><br><span class="line"> &quot;class&quot;: &quot;Telemetry_Consumer&quot;,</span><br><span class="line"> &quot;type&quot;: &quot;AWS_CloudWatch&quot;,</span><br><span class="line"> &quot;region&quot;: &quot;cn-northwest-1&quot;,</span><br><span class="line"> &quot;logGroup&quot;: &quot;my_log_group&quot;,</span><br><span class="line"> &quot;logStream&quot;: &quot;my_log_stream&quot;,</span><br><span class="line"> &quot;username&quot;: &quot;AKIAQMD22WCK&quot;,</span><br><span class="line"> &quot;passphrase&quot;: &#123;</span><br><span class="line"> &quot;cipherText&quot;: &quot;8YYgkI6r5jhxpmDgNXqwJsj+UgPrH0&quot;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éœ€è¦å‚æ•°ä¿®æ”¹éƒ¨åˆ†å¦‚ä¸‹ï¼š</strong></p><ul><li><p>Typeï¼šå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ aws æ‰€ä»¥ä¸º aws cloudwatch</p></li><li><p>Regionï¼š cn-northwest ä¸ºå®å¤åŒºåŸŸ</p></li><li><p>Loggroupï¼šä¸ºæ—¥å¿—ç»„åå­—</p></li><li><p>Logstreamï¼šä¸ºæ—¥å¿—ç»„ä¸‹é‡Œé¢çš„æ—¥å¿—æµçš„åå­—</p></li><li><p>Usernameï¼šä¸º iam å®‰å…¨è®¿é—®å¯†é’¥ï¼ˆaccess keyï¼‰</p></li><li><p>CipherTextï¼šä¸º ima å®‰å…¨è®¿é—®å¯†é’¥ key (secret key)</p></li></ul><p><strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé…ç½®æäº¤åå¦‚æœè¿”å› <code>message success</code> ï¼Œåˆ™ä»£è¡¨ <code>Telemetry Streaming</code> é…ç½®æäº¤æˆåŠŸã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220704162307861.png" alt="image-20220704162307861"></p><p><strong>æŸ¥çœ‹é…ç½®æ—¥å¿—ï¼Œè·¯å¾„ä¸º <code>/var/log/restnoded/restnoded.log</code>ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220704162347098.png" alt="image-20220704162347098"></p><h2 id="å››ã€é…ç½®éªŒè¯">å››ã€é…ç½®éªŒè¯</h2><p>ç™»å½•AWSï¼Œåœ¨ AWS Cloudwatch æŸ¥çœ‹æ˜¯å¦å¯ä»¥çœ‹åˆ° F5 å‘é€æ¥çš„æ—¥å¿—ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220704163724393.png" alt="image-20220704163724393"></p><p><strong>ç”±ä¸Šå›¾æ‰€ç¤ºï¼šF5 æ—¥å¿—å·²ç»å‘é€åˆ° AWS CloudWatch ï¼Œå®éªŒé…ç½®æˆåŠŸï¼</strong></p><h2 id="äº”ã€è‡´è°¢">äº”ã€è‡´è°¢</h2><h3 id="äººå‘˜è‡´è°¢">äººå‘˜è‡´è°¢</h3><p>ğŸ‘¦ <strong>Xinyu Zhang</strong></p><h3 id="æ–‡æ¡£è‡´è°¢">æ–‡æ¡£è‡´è°¢</h3><p>1ï¸âƒ£<a href="https://clouddocs.f5.com/training/community/public-cloud/html/class13/module09/lab1.html">F5 Telemetry Streaming (TS) to AWS CloudWatch</a></p><p>2ï¸âƒ£<a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest/installation.html">Downloading and installing Telemetry Streaming (f5.com)</a></p><p>3ï¸âƒ£<a href="https://github.com/F5Networks/f5-telemetry-streaming/releases">Releases Â· F5Networks/f5-telemetry-streaming (github.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> aws </tag>
            
            <tag> CloudWatch </tag>
            
            <tag> Telemetry Streaming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 è¾“å‡ºé…ç½®åˆ°è¡¨æ ¼</title>
      <link href="/posts/c47e982ec95b.html"/>
      <url>/posts/c47e982ec95b.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>ç®€ä»‹ï¼šä¸€æ¬¾åŸºäº Go è¯­è¨€å®ç°çš„ F5 LTM é…ç½®è‡ªåŠ¨åŒ–è¾“å‡ºå·¥å…·ï¼Œç›®å‰æ”¯æŒ Windowsã€Linux ä»¥åŠ MacOSã€‚</p><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/lefeck/f5-bigipct"><img src="https://github-readme-stats.vercel.app/api/pin/?username=lefeck&repo=f5-bigipct&theme=algolia&show_owner=true"/></a><h2 id="è¡¨æ ¼è¾“å‡ºæ•ˆæœ">è¡¨æ ¼è¾“å‡ºæ•ˆæœ</h2><p><img src="https://cdn.whbblog.cn/img/image-20220622151706375.png" alt="image-20220622151706375"></p><h3 id="å‚æ•°è¯´æ˜">å‚æ•°è¯´æ˜</h3><ul><li>partition ï¼š åˆ†åŒº</li><li>virtualservername ï¼šè™šæ‹ŸæœåŠ¡åç§°</li><li>destination ï¼šè™šæ‹ŸæœåŠ¡åœ°å€</li><li>description  ï¼š æè¿°</li><li>source ï¼š æºåœ°å€</li><li>vs_ip_protocol ï¼šåè®®</li><li>profiles ï¼šè°ƒç”¨çš„é…ç½®æ–‡ä»¶</li><li>pool_name ï¼špool åç§°</li><li>pool_membersï¼šPool æˆå‘˜</li><li>snat_typeï¼šæºåœ°å€è½¬æ¢ç±»å‹</li><li>snat_pool ï¼šæºåœ°å€è½¬æ¢ pool</li><li>irules ï¼š è°ƒç”¨çš„ iRule</li></ul><h2 id="å®æˆ˜æ¼”ç¤º">å®æˆ˜æ¼”ç¤º</h2><h3 id="1ã€ä¸‹è½½-Windows-åº”ç”¨ç¨‹åº">1ã€ä¸‹è½½ Windows åº”ç”¨ç¨‹åº</h3><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/8PZo_r5A' title='ä¸‹è½½åº”ç”¨'><i class='fas fa-download'></i>ä¸‹è½½åº”ç”¨</a>          </div><h3 id="2ã€è¿è¡Œç¨‹åº">2ã€è¿è¡Œç¨‹åº</h3><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\wangh&gt;C:\Users\wangh\Desktop\ltmx.exe -h</span><br><span class="line">Usage of C:\Users\wangh\Desktop\ltmx.exe:</span><br><span class="line">  -a string</span><br><span class="line">        Host ip address. (default &quot;192.168.5.134&quot;)</span><br><span class="line">  -f string</span><br><span class="line">        Specifies an alternative configuration file. (default &quot;/tmp/ltm.xlsx&quot;)</span><br><span class="line">  -p string</span><br><span class="line">        Password to login to the host. (default &quot;admin&quot;)</span><br><span class="line">  -u string</span><br><span class="line">        username to login to the host. (default &quot;admin&quot;)</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç¤ºä¾‹ï¼š</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220622170333142.png" alt="image-20220622170333142"></p><blockquote><p>MacOS å’Œ Linux ç‰ˆæœ¬å†æ¬¡ä¸åšæ¼”ç¤ºäº†ï¼Œç”¨æ³•ä¸ Windows å‡ ä¹ä¸€è‡´ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> è‡ªåŠ¨åŒ–é…ç½® </tag>
            
            <tag> é…ç½®å¯¼å‡º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker é…ç½®é•œåƒåŠ é€Ÿï¼ˆå››ï¼‰</title>
      <link href="/posts/ee756ff1f63f.html"/>
      <url>/posts/ee756ff1f63f.html</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ä»¥é˜¿é‡Œäº‘é•œåƒåŠ é€ŸæœåŠ¡ä¸ºä¾‹ï¼Œé…ç½®å®¹å™¨é•œåƒåŠ é€Ÿã€‚</strong></p><h2 id="1ã€ç™»å½•é˜¿é‡Œäº‘">1ã€ç™»å½•é˜¿é‡Œäº‘</h2><div class="btns rounded grid5">            <a class="button" href='https://cn.aliyun.com/' title='ç‚¹å‡»è¿›å…¥'><i class='fas fa-book-open'></i>ç‚¹å‡»è¿›å…¥</a>          </div><h2 id="2ã€æœç´¢å®¹å™¨é•œåƒæœåŠ¡">2ã€æœç´¢å®¹å™¨é•œåƒæœåŠ¡</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»å®¹å™¨é•œåƒæœåŠ¡ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220621113840496.png" alt="image-20220621113840496"></p><h2 id="3ã€è¿›å…¥ç®¡ç†æ§åˆ¶å°">3ã€è¿›å…¥ç®¡ç†æ§åˆ¶å°</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»ç®¡ç†æ§åˆ¶å°é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220621120252434.png" alt="image-20220621120252434"></p><h2 id="4ã€åˆ›å»ºå®ä¾‹">4ã€åˆ›å»ºå®ä¾‹</h2><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ›å»ºä¸ªäººå®ä¾‹ï¼ˆå…è´¹ï¼‰ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220621120502961.png" alt="image-20220621120502961"></p><h2 id="5ã€é…ç½®é•œåƒåŠ é€Ÿå™¨">5ã€é…ç½®é•œåƒåŠ é€Ÿå™¨</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»é•œåƒå·¥å…·ä¸‹çš„é•œåƒåŠ é€Ÿå™¨ï¼Œå¯ä»¥çœ‹åˆ°è‡ªå·±çš„åŠ é€Ÿå™¨åœ°å€ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ“ä½œæ–‡æ¡£ï¼Œé…ç½® Docker å®¹å™¨é•œåƒåŠ é€Ÿå™¨ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220621120655126.png" alt="image-20220621120655126"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> é•œåƒåŠ é€Ÿ </tag>
            
            <tag> é˜¿é‡Œäº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å®‰è£…éƒ¨ç½²ï¼ˆä¸‰ï¼‰</title>
      <link href="/posts/30e8dafc7e04.html"/>
      <url>/posts/30e8dafc7e04.html</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ¬¡éƒ¨ç½²ç¤ºä¾‹ä¸º <code>CentOS 7</code> ï¼Œå…¶ä»–ç³»ç»Ÿéƒ¨ç½²å‚è€ƒ[è¿™é‡Œ](<a href="https://docs.docker.com/engine/install/">Install Docker Engine | Docker Documentation</a>)ã€‚</strong></p><h2 id="ä¸€ã€åŸºç¡€ç¯å¢ƒ">ä¸€ã€åŸºç¡€ç¯å¢ƒ</h2><ul><li>å¯ä»¥è¿æ¥ç½‘ç»œçš„ CentOS 7</li><li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/engine/install/centos/">Install Docker Engine on CentOS | Docker Documentation</a></li></ul><h2 id="äºŒã€Docker-éƒ¨ç½²">äºŒã€Docker éƒ¨ç½²</h2><h3 id="1ã€è®¾ç½®ä»“åº“">1ã€è®¾ç½®ä»“åº“</h3><h4 id="ï¼ˆ1ï¼‰yum-utils-åŒ…å®‰è£…">ï¼ˆ1ï¼‰yum-utils åŒ…å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰è®¾ç½®-stable-é•œåƒä»“åº“">ï¼ˆ2ï¼‰è®¾ç½® stable é•œåƒä»“åº“</h4><p>å¯ä»¥ä½¿ç”¨å›½å†…ä»“åº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Docker å›½å¤–å®˜æ–¹ä»“åº“ï¼Œè¿™é‡Œæ¨èä½¿ç”¨å›½å†…é•œåƒä»“åº“ï¼Œå›½å¤–çš„å¯èƒ½ç”±äºç½‘ç»œç­‰åŸå› å¯¼è‡´æŠ¥é”™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›½å†…é•œåƒä»“åº“è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›½å¤–é•œåƒä»“åº“è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="2ã€æ›´æ–°-yum-è½¯ä»¶åŒ…ç´¢å¼•">2ã€æ›´æ–° yum è½¯ä»¶åŒ…ç´¢å¼•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><h3 id="3ã€å®‰è£…-docker-Engine">3ã€å®‰è£… docker Engine</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure><h3 id="4ã€å¯åŠ¨-docker">4ã€å¯åŠ¨ docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€éªŒè¯">ä¸‰ã€éªŒè¯</h2><h3 id="1ã€ç‰ˆæœ¬æŸ¥çœ‹">1ã€ç‰ˆæœ¬æŸ¥çœ‹</h3><p>ä½¿ç”¨ docker version å‘½ä»¤ï¼Œæœ‰ä»¥ä¸‹è¾“å‡ºåˆ™å®‰è£…æˆåŠŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           20.10.17</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.17.11</span><br><span class="line"> Git commit:        100c701</span><br><span class="line"> Built:             Mon Jun  6 23:05:12 2022</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.17</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.17.11</span><br><span class="line">  Git commit:       a89b842</span><br><span class="line">  Built:            Mon Jun  6 23:03:33 2022</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.6.6</span><br><span class="line">  GitCommit:        10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.1.2</span><br><span class="line">  GitCommit:        v1.1.2-0-ga916309</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure><h3 id="2ã€å®¹å™¨è¿è¡Œæµ‹è¯•">2ã€å®¹å™¨è¿è¡Œæµ‹è¯•</h3><p>è¿è¡Œå®¹å™¨ <code>hello-world</code> ï¼Œå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜ Docker ç¯å¢ƒå®‰è£…æˆåŠŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run hello-world</span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">2db29710123e: Pull complete </span><br><span class="line">Digest: sha256:13e367d31ae85359f42d637adf6da428f76d75dc9afeb3c21faea0d976f5c651</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">docker run -it ubuntu bash</span></span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure><h2 id="å››ã€å¸è½½-Docker">å››ã€å¸è½½ Docker</h2><h3 id="1ã€å¸è½½è½¯ä»¶åŒ…">1ã€å¸è½½è½¯ä»¶åŒ…</h3><p>å¸è½½Docker å¼•æ“ ï¼ŒCLI ï¼ŒContainerd å’Œ Docker Compose</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure><h2 id="2ã€æœ¬åœ°æ–‡ä»¶åˆ é™¤">2ã€æœ¬åœ°æ–‡ä»¶åˆ é™¤</h2><p>å¸è½½ Docker ä¸ä¼šè‡ªåŠ¨åˆ é™¤ä¸»æœºä¸Šçš„æ˜ åƒã€å®¹å™¨ã€å·æˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ã€‚è¦åˆ é™¤æ‰€æœ‰å›¾åƒã€å®¹å™¨å’Œå·ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/lib/containerd</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2><p><a href="https://docs.docker.com/engine/install/centos/">Install Docker Engine on CentOS | Docker Documentation</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS 7 </tag>
            
            <tag> Docker </tag>
            
            <tag> å®‰è£…éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 æ—¥å¿—è§¦å‘æŒ‡å®šå‘½ä»¤</title>
      <link href="/posts/649f6f8ae0b9.html"/>
      <url>/posts/649f6f8ae0b9.html</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯ğŸŒ¼">èƒŒæ™¯ğŸŒ¼</h2><h3 id="1ã€æ¡ˆä¾‹">1ã€æ¡ˆä¾‹</h3><p>â€‹æè¿°ï¼šF5 ä½¿ç”¨ä¼˜å…ˆçº§ç»„åœ¨ 2 å°æœåŠ¡å™¨ä¹‹é—´å®ç°è´Ÿè½½ï¼Œå¹³æ—¶æµé‡éƒ½è´Ÿè½½åˆ°æœåŠ¡å™¨Aï¼Œå½“æœåŠ¡å™¨A Downæ—¶ï¼Œæµé‡éƒ½åˆ‡æ¢åˆ°æœåŠ¡å™¨Bä¸Šã€‚</p><p>â€‹é—®é¢˜ï¼šå½“æœåŠ¡å™¨A å†æ¬¡å˜ä¸º UP æ—¶ï¼Œæœªè¶…æ—¶æ—§è¿æ¥ä¼šç»§ç»­è´Ÿè½½åˆ°æœåŠ¡å™¨B ä¸Šï¼Œå¯¼è‡´éƒ¨åˆ†ä¸šåŠ¡å¼‚å¸¸ã€‚</p><p>â€‹éœ€æ±‚ï¼šå½“æœåŠ¡å™¨A å˜ä¸º UP æ—¶ï¼Œéœ€è¦è‡ªåŠ¨å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨B çš„è¿æ¥ã€‚ä»¥å°†æµé‡ç§»åŠ¨åˆ°æœåŠ¡å™¨Aã€‚</p><h3 id="2ã€è§£å†³æ–¹æ³•">2ã€è§£å†³æ–¹æ³•</h3><p>â€‹å½“ F5 æ£€æŸ¥åˆ° <code>Server A</code> çŠ¶æ€å˜ä¸º <code>UP</code>  çš„æ—¥å¿—æ—¶ï¼Œè‡ªåŠ¨è§¦å‘åˆ é™¤æ‰€æœ‰å®¢æˆ·ç«¯åˆ° <code>Server B</code> æµé‡çš„å‘½ä»¤ã€‚</p><h2 id="ä¸€ã€åŸºç¡€ç¯å¢ƒğŸŒ»">ä¸€ã€åŸºç¡€ç¯å¢ƒğŸŒ»</h2><h3 id="1ã€ç¯å¢ƒæ‹“æ‰‘">1ã€ç¯å¢ƒæ‹“æ‰‘</h3><img src="https://cdn.whbblog.cn/img/image-20220617163333131.png" alt="image-20220617163333131" style="zoom:80%;" /><p><strong>è¯´æ˜ï¼šåœ°å€å’Œä¼˜å…ˆçº§ç­‰ä¿¡æ¯å·²ç»åœ¨ä¸Šå›¾è¿›è¡Œæè¿°ï¼Œpool ä¸­å°‘äºä¸€ä¸ªæˆå‘˜å­˜æ´»æ—¶è§¦å‘ä¼˜å…ˆçº§ç»„åˆ‡æ¢ã€‚ç°åœ¨å½“å®¢æˆ·ç«¯è®¿é—® F5 è™šæ‹ŸæœåŠ¡ <code>192.168.6.234:80</code> ï¼Œå°†ä¼šæŠŠæµé‡è´Ÿè½½åˆ°<code>Server A</code> ã€‚</strong></p><h2 id="äºŒã€å®éªŒé…ç½®ğŸŒ¹">äºŒã€å®éªŒé…ç½®ğŸŒ¹</h2><h3 id="1ã€æ¨¡æ‹Ÿ-Server-A-Down">1ã€æ¨¡æ‹Ÿ Server A  Down</h3><p>å…³é—­ <code>Server A</code> æœåŠ¡å™¨ï¼Œæ£€æŸ¥å½“å‰è¿æ¥çŠ¶æ€ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220617170024379.png" alt="image-20220617170024379"></p><p>é€šè¿‡ä»¥ä¸Šæˆªå›¾æ˜¾ç¤ºï¼Œå½“å‰æµé‡å·²ç»è´Ÿè½½åˆ° <code>Server B</code> ã€‚</p><h3 id="2ã€é…ç½®è§¦å‘å‘½ä»¤">2ã€é…ç½®è§¦å‘å‘½ä»¤</h3><p>åœ¨ <code>/config/user_alert.conf</code> ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert BIGIP_MCPD_MCPDERR_POOL_MEMBER_MON_UP  &quot;Pool /Common/pool_test member /Common/192.168.6.80:80 monitor status up&quot; &#123;</span><br><span class="line">exec command=&quot;tmsh delete sys connection ss-server-addr 192.168.10.223 ss-server-port 80&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>å‘½ä»¤å«ä¹‰ï¼šå½“ Server A æˆå‘˜çŠ¶æ€ up æ—¶ï¼Œåˆ é™¤ Server B å…¨éƒ¨è¿æ¥ã€‚</strong></p></blockquote><h3 id="3ã€é‡å¯è¿›ç¨‹">3ã€é‡å¯è¿›ç¨‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmsh restart sys service alertd</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®éªŒæµ‹è¯•ğŸŒ·">ä¸‰ã€å®éªŒæµ‹è¯•ğŸŒ·</h2><p><strong>ï¼ˆ1ï¼‰å¼€å¯ Server A æœåŠ¡å™¨ï¼Œå¹¶æ£€æŸ¥å½“å‰æµé‡è¿æ¥çŠ¶æ€ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220617172413409.png" alt="image-20220617172413409"></p><p>é€šè¿‡ä»¥ä¸Šæˆªå›¾æ˜¾ç¤ºï¼Œå½“å‰æµé‡å·²ç»è´Ÿè½½åˆ° <code>Server A</code> ã€‚</p><p><strong>ï¼ˆ2ï¼‰åœ¨ F5 <code>ltm</code> æ—¥å¿—ä¸ŠæŸ¥çœ‹ <code>Server A</code> çŠ¶æ€å˜ä¸º <code>UP</code>  çš„æ—¥å¿—ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220617173050793.png" alt="image-20220617173050793"></p><p><strong>ï¼ˆ3ï¼‰åœ¨ F5 <code>Audit</code> æ—¥å¿—ä¸ŠæŸ¥çœ‹è§¦å‘åˆ é™¤ <code>Server B</code> è¿æ¥çš„å‘½ä»¤æ—¥å¿—ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220617173026470.png" alt="image-20220617173026470"></p><blockquote><p><strong>æ€»ç»“ï¼šé€šè¿‡ä»¥ä¸ŠçŸ¥è¯†å¯ä¸¾ä¸€åä¸‰ï¼Œå½“è§¦å‘å…¶ä»–æ—¥å¿—å‘Šè­¦æ—¶ï¼Œä¹Ÿå¯æ‰§è¡Œå“åº”çš„å‘½ä»¤ã€‚</strong></p><p><strong>ç¤ºä¾‹ï¼šå½“VS Downï¼Œå¯æ‰§è¡ŒæŠ“å–è¯¥VS 10000 ä¸ªæ•°æ®åŒ…ç­‰ç­‰ã€‚</strong></p><p><strong>æ³¨æ„ï¼šè§¦å‘å¤šæ¡å‘½ä»¤æ—¶ï¼Œå‘½ä»¤ä¹‹é—´ä½¿ç”¨åˆ†å·è¿›è¡Œåˆ†éš”ã€‚</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> æ•…éšœå¤„ç† </tag>
            
            <tag> æ•…éšœè§¦å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡excelè¡¨æ ¼é…ç½®F5 LTM</title>
      <link href="/posts/da2c8da50595.html"/>
      <url>/posts/da2c8da50595.html</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>ç”¨æˆ·æ–°å¢æˆ–è€…è¿ç§»F5éœ€è¦æ›´æ–°å¤§é‡é…ç½®åˆ°å¦ä¸€å°F5ä¸Šï¼Œæ™®é€šäººå·¥é…ç½®è´¹äº‹è´¹åŠ›ä¸”å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥ä¸€ä½ä¼˜ç§€çš„ç¨‹åºå‘˜å‡­ç©ºè¯ç”Ÿï¼Œåˆ›å»ºäº†åŸºäºGOè¯­è¨€å®ç°çš„é€šè¿‡è¡¨æ ¼é…ç½®F5çš„å®ç”¨ç¨‹åºã€‚ç›®å‰æ­¤ç¨‹åºæ”¯æŒ <code>Linux</code>ã€<code>Windows</code> ä»¥åŠ <code>Mac</code> æ“ä½œç³»ç»Ÿï¼Œæœ¬æ–‡ä¸»è¦æ¼”ç¤ºå‰ä¸¤ç§ï¼Œç›®å‰æ­¤é¡¹ç›®å·²ç»åœ¨ Github å¼€æºï¼Œå¹¶ä¸”å·²ç»å±•è·äº†å¤šä¸ªstar ğŸŒŸ ï¼Œå¦‚æœæ­¤åº”è¯¥ç¨‹åºå¸®åŠ©äº†æ‚¨ï¼Œæ‚¨çš„ star æ˜¯ä½œè€…æœ€å¤§çš„åŠ¨åŠ›ï¼</p><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/lefeck/f5-bigipct"><img src="https://github-readme-stats.vercel.app/api/pin/?username=lefeck&repo=f5-bigipct&theme=algolia&show_owner=true"/></a><h2 id="ä¸€ã€è¡¨æ ¼æ•°æ®ã€å‚æ•°è¯´æ˜å’Œä¸‹è½½">ä¸€ã€è¡¨æ ¼æ•°æ®ã€å‚æ•°è¯´æ˜å’Œä¸‹è½½</h2><h3 id="1ã€è¡¨æ ¼ç¤ºä¾‹">1ã€è¡¨æ ¼ç¤ºä¾‹</h3><p><img src="https://cdn.whbblog.cn/img/image-20220616213316614.png" alt="image-20220616213316614"></p><h3 id="2ã€è¡¨æ ¼å‚æ•°è¯´æ˜">2ã€è¡¨æ ¼å‚æ•°è¯´æ˜</h3><ul><li>virtual_name : è™šæ‹ŸæœåŠ¡åç§°</li><li>vs_destination ï¼š ç›®çš„åœ°å€</li><li>vs_ip_protocol ï¼š åè®®ï¼Œå¯é€‰å‚æ•° <code>tcp</code> <code>udp</code></li><li>profiles : æŒ‡å®šé…ç½® profiles ï¼Œå¯é€‰å‚æ•° <code>http</code> <code>tcp</code> <code>fastL4</code></li><li>translate_address : åœ°å€è½¬æ¢ ï¼Œ å¯é€‰å‚æ•° <code>enabled</code> <code>disabled</code></li><li>translate_port : ç«¯å£è½¬æ¢ï¼Œ å¯é€‰å‚æ•° <code>enabled</code> <code>disabled</code></li><li>snat_type ï¼š æºåœ°å€è½¬æ¢ç±»å‹ ï¼Œ å¯é€‰å‚æ•° <code>automap</code> <code>none</code></li><li>persistence ï¼šä¼šè¯ä¿æŒï¼Œå¯é€‰å‚æ•° <code>source_addr</code> <code>dest_addr</code> <code>hash</code> <code>none</code> <code>cookie</code></li><li>pool_name : pool åç§°</li><li>pool_member : pool æˆå‘˜ï¼Œå¤šä¸ªæˆå‘˜å¯ä»¥ä½¿ç”¨å›è½¦æˆ–è€…ç©ºæ ¼è¿›è¡Œåˆ†éš”ã€‚</li><li>pool_monitor ï¼š pool å¥åº·æ£€æŸ¥ï¼Œå¯é€‰å‚æ•° <code>tcp</code> <code>gateway_icmp</code> <code>http</code></li><li>pool_lbmode : pool æˆå‘˜è´Ÿè½½å‡è¡¡æ–¹å¼ ï¼Œå¯é€‰å‚æ•° <code>round-robin</code> <code>least-connections-member</code> ç­‰</li></ul><h3 id="3ã€è¡¨æ ¼ä¸‹è½½">3ã€è¡¨æ ¼ä¸‹è½½</h3><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/8OQ-YP1A' title='ä¸‹è½½è¡¨æ ¼'><i class='fas fa-download'></i>ä¸‹è½½è¡¨æ ¼</a>          </div><h2 id="äºŒã€å®æˆ˜æ¼”ç¤º">äºŒã€å®æˆ˜æ¼”ç¤º</h2><h3 id="1ã€Windows-æ“ä½œç³»ç»Ÿé€šè¿‡è¡¨æ ¼é…ç½®-F5-LTM">1ã€Windows æ“ä½œç³»ç»Ÿé€šè¿‡è¡¨æ ¼é…ç½® F5 LTM</h3><h4 id="ï¼ˆ1ï¼‰ä¸‹è½½-Windows-åº”ç”¨ç¨‹åº">ï¼ˆ1ï¼‰ä¸‹è½½ Windows åº”ç”¨ç¨‹åº</h4><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/8OQ-lDOA' title='ä¸‹è½½åº”ç”¨'><i class='fas fa-download'></i>ä¸‹è½½åº”ç”¨</a>          </div><h4 id="ï¼ˆ2ï¼‰è¿è¡Œç¨‹åº">ï¼ˆ2ï¼‰è¿è¡Œç¨‹åº</h4><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\wangh&gt;C:\Users\wangh\Desktop\ltm.exe -h</span><br><span class="line">Usage of C:\Users\wangh\Desktop\ltm.exe:</span><br><span class="line">  -a string</span><br><span class="line">        the host ip address. (default &quot;192.168.1.1&quot;)</span><br><span class="line">  -f string</span><br><span class="line">        specifies an alternative configuration file. (default &quot;/tmp/test.xlsx&quot;)</span><br><span class="line">  -p string</span><br><span class="line">        specifies the password of login host. (default &quot;admin&quot;)</span><br><span class="line">  -s string</span><br><span class="line">        specifies the table name of the workbook. (default &quot;Sheet1&quot;)</span><br><span class="line">  -u string</span><br><span class="line">        specifies the username of login host. (default &quot;admin&quot;)</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\wangh&gt; C:\Users\wangh\Desktop\ltm.exe -f C:\Users\wangh\Desktop\create.xlsx -a 192.168.6.70 -u admin -p admin</span><br><span class="line">virtualserver name VS_Test_1 create success.</span><br><span class="line">virtualserver name VS_Test_2 create success.</span><br><span class="line">virtualserver name VS_Test_3 create success.</span><br><span class="line">virtualserver name VS_Test_4 create success.</span><br><span class="line">virtualserver name VS_Test_5 create success.</span><br><span class="line">virtualserver name VS_Test_6 create success.</span><br><span class="line">virtualserver name VS_Test_7 create success.</span><br><span class="line">virtualserver name VS_Test_8 create success.</span><br><span class="line">virtualserver name VS_Test_9 create success.</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œæˆªå›¾ï¼š</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220616205938025.png" alt="image-20220616205938025"></p><h3 id="ï¼ˆ3ï¼‰ç»“æœéªŒè¯">ï¼ˆ3ï¼‰ç»“æœéªŒè¯</h3><p><img src="https://cdn.whbblog.cn/img/image-20220616210337715.png" alt="image-20220616210337715"></p><h3 id="2ã€Linux-æ“ä½œç³»ç»Ÿé€šè¿‡è¡¨æ ¼é…ç½®F5-LTM">2ã€Linux æ“ä½œç³»ç»Ÿé€šè¿‡è¡¨æ ¼é…ç½®F5 LTM</h3><h4 id="ï¼ˆ1ï¼‰é…ç½®è¡¨æ ¼">ï¼ˆ1ï¼‰é…ç½®è¡¨æ ¼</h4><p><strong>ç”¨æˆ·å¯æ ¹æ®éœ€æ±‚å¡«å†™è¡¨æ ¼å†…å®¹ã€‚</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220616235515832.png" alt="image-20220616235515832"></p><h4 id="ï¼ˆ2ï¼‰ä¸‹è½½-linux-åº”ç”¨ç¨‹åº">ï¼ˆ2ï¼‰ä¸‹è½½ linux åº”ç”¨ç¨‹åº</h4><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/8OQ9MtWg' title='ä¸‹è½½åº”ç”¨'><i class='fas fa-download'></i>ä¸‹è½½åº”ç”¨</a>          </div><h4 id="ï¼ˆ3ï¼‰è¿è¡Œç¨‹åº">ï¼ˆ3ï¼‰è¿è¡Œç¨‹åº</h4><p><strong>ä¸Šä¼ è¡¨æ ¼å’Œåº”ç”¨ç¨‹åºè‡³Linuxç³»ç»ŸæŒ‡å®šè·¯å¾„ï¼Œèµ‹äºˆç¨‹åºæ‰§è¡Œæƒé™</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ltm</span><br></pre></td></tr></table></figure><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# ./ltm -h</span><br><span class="line">Usage of ./ltm:</span><br><span class="line">  -a string</span><br><span class="line">    the host ip address. (default &quot;192.168.1.1&quot;)</span><br><span class="line">  -f string</span><br><span class="line">    specifies an alternative configuration file. (default &quot;/tmp/test.xlsx&quot;)</span><br><span class="line">  -p string</span><br><span class="line">    specifies the password of login host. (default &quot;admin&quot;)</span><br><span class="line">  -s string</span><br><span class="line">    specifies the table name of the workbook. (default &quot;Sheet1&quot;)</span><br><span class="line">  -u string</span><br><span class="line">    specifies the username of login host. (default &quot;admin&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# ./ltm -f create.xlsx -u admin -p admin -a 192.168.6.70</span><br><span class="line">virtualserver name VS_Test_1 create success.</span><br><span class="line">virtualserver name VS_Test_2 create success.</span><br><span class="line">virtualserver name VS_Test_3 create success.</span><br><span class="line">virtualserver name VS_Test_4 create success.</span><br><span class="line">virtualserver name VS_Test_5 create success.</span><br><span class="line">virtualserver name VS_Test_6 create success.</span><br><span class="line">virtualserver name VS_Test_7 create success.</span><br><span class="line">virtualserver name VS_Test_8 create success.</span><br><span class="line">virtualserver name VS_Test_9 create success.</span><br></pre></td></tr></table></figure><h3 id="4ã€ç»“æœéªŒè¯">4ã€ç»“æœéªŒè¯</h3><p><img src="https://cdn.whbblog.cn/img/image-20220616235639012.png" alt="image-20220616235639012"></p><h2 id="ä¸‰ã€æ³¨æ„äº‹é¡¹">ä¸‰ã€æ³¨æ„äº‹é¡¹</h2><div class="tip warning faa-horizontal animated"><ol><li>è¡¨æ ¼æ ¼å¼å¿…é¡»ä¸º <strong>xlsx</strong> æ ¼å¼ï¼Œä¸”åˆ—çš„é¡ºåºä¸å¯å˜æ›´ã€‚</li><li>æ‰€æœ‰è¡¨æ ¼å†…å®¹å¿…é¡»å¡«å†™å®Œæ•´ã€‚ä¸è®¸æœ‰ç©ºçš„æ ¼å­ã€‚</li></ol></div>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> é…ç½® </tag>
            
            <tag> è‡ªåŠ¨åŒ–é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ ¸å¿ƒæ¶æ„ï¼ˆäºŒï¼‰</title>
      <link href="/posts/249039aeb095.html"/>
      <url>/posts/249039aeb095.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.whbblog.cn/img/docker.png" alt="docker"></p><h2 id="ä¸€ã€Docker-æ€»æ¶æ„">ä¸€ã€Docker æ€»æ¶æ„</h2><p><img src="https://cdn.whbblog.cn/img/docker-architecture.jpg" alt="img"></p><p><strong>Docker æ˜¯ä¸€ä¸ª C/S æ¨¡å¼çš„æ¶æ„ï¼Œåç«¯æ˜¯ä¸€ä¸ªæ¾è€¦åˆæ¶æ„ï¼Œæ¨¡å—å„å¸å…¶èŒã€‚</strong></p><ol><li>ç”¨æˆ·æ˜¯ä½¿ç”¨ Docker Client ä¸ Docker Daemon å»ºç«‹é€šä¿¡ï¼Œå¹¶å‘é€è¯·æ±‚ç»™åè€…ã€‚</li><li>Docker Daemon ä½œä¸º Dockeræ¶ æ„ä¸­çš„ä¸»ä½“éƒ¨åˆ†ï¼Œé¦–å…ˆæä¾› Server çš„åŠŸèƒ½ä½¿å…¶å¯ä»¥æ¥å— Docker Client çš„è¯·æ±‚ï¼›</li><li>Engine æ‰§è¡Œ Docker å†…éƒ¨çš„ä¸€ç³»åˆ—å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä»¥ä¸€ä¸ªJobçš„å½¢å¼çš„å­˜åœ¨ã€‚</li><li>Job çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦å®¹å™¨é•œåƒæ—¶ï¼Œåˆ™ä» Docker Registry ä¸­ä¸‹è½½é•œåƒï¼Œå¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨ graphdriver å°†ä¸‹è½½é•œåƒä»¥Graph çš„å½¢å¼å­˜å‚¨ï¼›</li><li>å½“éœ€è¦ä¸º Docker åˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶ï¼Œé€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨ networkdriver åˆ›å»ºå¹¶é…ç½® Docker å®¹å™¨ç½‘ç»œç¯å¢ƒï¼›</li><li>å½“éœ€è¦é™åˆ¶ Docker å®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶ï¼Œåˆ™é€šè¿‡ execdriver æ¥å®Œæˆã€‚</li><li>libcontainer æ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…ï¼Œnetworkdriver ä»¥åŠ execdriver éƒ½æ˜¯é€šè¿‡ libcontainer æ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œã€‚</li></ol><h2 id="äºŒã€Dockerå„æ¨¡å—ç»„ä»¶åˆ†æ">äºŒã€Dockerå„æ¨¡å—ç»„ä»¶åˆ†æ</h2><h3 id="2-1-Docker-Client-å‘èµ·è¯·æ±‚">2.1. Docker Client [å‘èµ·è¯·æ±‚]</h3><ol><li>Docker Client æ˜¯å’Œ Docker Daemon å»ºç«‹é€šä¿¡çš„å®¢æˆ·ç«¯ã€‚ç”¨æˆ·ä½¿ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸º dockerï¼ˆç±»ä¼¼å¯æ‰§è¡Œè„šæœ¬çš„å‘½ä»¤ï¼‰ï¼Œdocke rå‘½ä»¤åæ¥å‚æ•°çš„å½¢å¼æ¥å®ç°ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚å‘½ä»¤ï¼ˆä¾‹å¦‚ docker imagesï¼Œdockerä¸ºå‘½ä»¤ä¸å¯å˜ï¼Œimagesä¸ºå‚æ•°å¯å˜ï¼‰ã€‚</li><li>Docker Client å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼å’Œ Docker Daemon å»ºç«‹é€šä¿¡ï¼štcp://host:portï¼Œunix://path_to_socket å’Œ fd://socketfdã€‚</li><li>Docker Client å‘é€å®¹å™¨ç®¡ç†è¯·æ±‚åï¼Œç”± Docker Daemon æ¥å—å¹¶å¤„ç†è¯·æ±‚ï¼Œå½“ Docker Client æ¥æ”¶åˆ°è¿”å›çš„è¯·æ±‚ç›¸åº”å¹¶ç®€å•å¤„ç†åï¼ŒDocker Client ä¸€æ¬¡å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚[ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚ï¼šå‘é€è¯·æ±‚â†’å¤„ç†è¯·æ±‚â†’è¿”å›ç»“æœ]ï¼Œä¸ä¼ ç»Ÿçš„ C/S æ¶æ„è¯·æ±‚æµç¨‹å¹¶æ— ä¸åŒã€‚</li></ol><h3 id="2-2-Docker-Daemon-åå°å®ˆæŠ¤è¿›ç¨‹">2.2. Docker Daemon [åå°å®ˆæŠ¤è¿›ç¨‹]</h3><p><strong>Docker Daemonçš„æ¶æ„å›¾</strong></p><img src="https://cdn.whbblog.cn/img/docker-daemon.jpg" alt="img" style="zoom:67%;" /><h4 id="2-2-1-Docker-Server-è°ƒåº¦åˆ†å‘è¯·æ±‚">2.2.1. Docker Server [è°ƒåº¦åˆ†å‘è¯·æ±‚]</h4><p><strong>Docker Serverçš„æ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/docker-server.jpg" alt="img"></p><ol><li>Docker Server ç›¸å½“äº C/S æ¶æ„çš„æœåŠ¡ç«¯ã€‚åŠŸèƒ½ä¸ºæ¥å—å¹¶è°ƒåº¦åˆ†å‘ Docker Client å‘é€çš„è¯·æ±‚ã€‚æ¥å—è¯·æ±‚åï¼ŒServer é€šè¿‡è·¯ç”±ä¸åˆ†å‘è°ƒåº¦ï¼Œæ‰¾åˆ°ç›¸åº”çš„ Handler æ¥æ‰§è¡Œè¯·æ±‚ã€‚</li><li>åœ¨ Docker çš„å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡åŒ… gorilla/muxï¼Œåˆ›å»ºäº†ä¸€ä¸ª  mux.Routerï¼Œæä¾›è¯·æ±‚çš„è·¯ç”±åŠŸèƒ½ã€‚åœ¨ Golang ä¸­ï¼Œgorilla/mux æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ URL è·¯ç”±å™¨ä»¥åŠè°ƒåº¦åˆ†å‘å™¨ã€‚è¯¥ mux.Router ä¸­æ·»åŠ äº†ä¼—å¤šçš„è·¯ç”±é¡¹ï¼Œæ¯ä¸€ä¸ªè·¯ç”±é¡¹ç”± HTTP è¯·æ±‚æ–¹æ³•ï¼ˆPUTã€POSTã€GET æˆ– DELETE ç­‰ï¼‰ã€URLã€Handlerä¸‰éƒ¨åˆ†ç»„æˆã€‚</li><li>åˆ›å»ºå®Œ mux.Router ä¹‹åï¼ŒDocker å°† Server çš„ç›‘å¬åœ°å€ä»¥åŠ mux.Router ä½œä¸ºå‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ª httpSrv=http.Server{}ï¼Œæœ€ç»ˆæ‰§è¡ŒhttpSrv.Serve() ä¸ºè¯·æ±‚æœåŠ¡ã€‚</li><li>åœ¨ Server çš„æœåŠ¡è¿‡ç¨‹ä¸­ï¼ŒServer åœ¨ listener ä¸Šæ¥å— Docker Client çš„è®¿é—®è¯·æ±‚ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ goroutine æ¥æœåŠ¡è¯¥è¯·æ±‚ã€‚åœ¨goroutine ä¸­ï¼Œé¦–å…ˆè¯»å–è¯·æ±‚å†…å®¹ï¼Œç„¶ååšè§£æå·¥ä½œï¼Œæ¥ç€æ‰¾åˆ°ç›¸åº”çš„è·¯ç”±é¡¹ï¼Œéšåè°ƒç”¨ç›¸åº”çš„ Handler æ¥å¤„ç†è¯¥è¯·æ±‚ï¼Œæœ€åHandler å¤„ç†å®Œè¯·æ±‚ä¹‹åå›å¤è¯¥è¯·æ±‚ã€‚</li></ol><h4 id="2-2-2-Engine">2.2.2. Engine</h4><ol><li>Engine æ˜¯ Docker æ¶æ„ä¸­çš„è¿è¡Œå¼•æ“ï¼ŒåŒæ—¶ä¹Ÿ Docker è¿è¡Œçš„æ ¸å¿ƒæ¨¡å—ã€‚å®ƒæ‰®æ¼” Docker container å­˜å‚¨ä»“åº“çš„è§’è‰²ï¼Œå¹¶ä¸”é€šè¿‡æ‰§è¡Œ job çš„æ–¹å¼æ¥æ“çºµç®¡ç†è¿™äº›å®¹å™¨ã€‚</li><li>åœ¨ Engine æ•°æ®ç»“æ„çš„è®¾è®¡ä¸å®ç°è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ª handler å¯¹è±¡ã€‚è¯¥ handler å¯¹è±¡å­˜å‚¨çš„éƒ½æ˜¯å…³äºä¼—å¤šç‰¹å®š job çš„ handler å¤„ç†è®¿é—®ã€‚ä¸¾ä¾‹è¯´æ˜ï¼ŒEngine çš„ handler å¯¹è±¡ä¸­æœ‰ä¸€é¡¹ä¸ºï¼š{â€œcreateâ€: daemon.ContainerCreate,}ï¼Œåˆ™è¯´æ˜å½“åä¸ºâ€œcreateâ€çš„ job åœ¨è¿è¡Œæ—¶ï¼Œæ‰§è¡Œçš„æ˜¯ daemon.ContainerCreate çš„ handlerã€‚</li></ol><h4 id="2-2-3-Job">2.2.3. Job</h4><ol><li>ä¸€ä¸ª Job å¯ä»¥è®¤ä¸ºæ˜¯ Docker æ¶æ„ä¸­ Engine å†…éƒ¨æœ€åŸºæœ¬çš„å·¥ä½œæ‰§è¡Œå•å…ƒã€‚Docker å¯ä»¥åšçš„æ¯ä¸€é¡¹å·¥ä½œï¼Œéƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªjobã€‚ä¾‹å¦‚ï¼šåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ˜¯ä¸€ä¸ª jobï¼›åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œè¿™æ˜¯ä¸€ä¸ª jobã€‚Docker Server çš„è¿è¡Œè¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªjobï¼Œåä¸º serveapiã€‚</li><li>Job çš„è®¾è®¡è€…ï¼ŒæŠŠ Job è®¾è®¡å¾—ä¸Unixè¿›ç¨‹ç›¸ä»¿ã€‚æ¯”å¦‚è¯´ï¼šJob æœ‰ä¸€ä¸ªåç§°ï¼Œæœ‰å‚æ•°ï¼Œæœ‰ç¯å¢ƒå˜é‡ï¼Œæœ‰æ ‡å‡†çš„è¾“å…¥è¾“å‡ºï¼Œæœ‰é”™è¯¯å¤„ç†ï¼Œæœ‰è¿”å›çŠ¶æ€ç­‰ã€‚</li></ol><h3 id="2-3-Docker-Registry-é•œåƒæ³¨å†Œä¸­å¿ƒ">2.3. Docker Registry [é•œåƒæ³¨å†Œä¸­å¿ƒ]</h3><ol><li>Docker Registry æ˜¯ä¸€ä¸ªå­˜å‚¨å®¹å™¨é•œåƒçš„ä»“åº“ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œå¯ç†è§£ä¸ºäº‘ç«¯é•œåƒä»“åº“ï¼ŒæŒ‰ repository æ¥åˆ†ç±»ï¼Œdocker pull æŒ‰ç…§[repository]:[tag] æ¥ç²¾ç¡®å®šä¹‰ä¸€ä¸ª  imageã€‚</li><li>åœ¨ Docker çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒDocker Daemon ä¼šä¸ Docker Registry é€šä¿¡ï¼Œå¹¶å®ç°æœç´¢é•œåƒã€ä¸‹è½½é•œåƒã€ä¸Šä¼ é•œåƒä¸‰ä¸ªåŠŸèƒ½ï¼Œè¿™ä¸‰ä¸ªåŠŸèƒ½å¯¹åº”çš„jobåç§°åˆ†åˆ«ä¸ºâ€searchâ€ï¼Œâ€pullâ€ ä¸ â€œpushâ€ã€‚</li><li>å¯åˆ†ä¸ºå…¬æœ‰ä»“åº“ï¼ˆdocker hubï¼‰å’Œç§æœ‰ä»“åº“ã€‚</li></ol><h3 id="2-4-Graph-Dockerå†…éƒ¨æ•°æ®åº“">2.4. Graph [Dockerå†…éƒ¨æ•°æ®åº“]</h3><p><strong>Graphçš„æ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/graph-architecture.jpg" alt="img"></p><h4 id="2-4-1-Repository">2.4.1. Repository</h4><ol><li>å·²ä¸‹è½½é•œåƒçš„ä¿ç®¡è€…ï¼ˆåŒ…æ‹¬ä¸‹è½½é•œåƒå’Œ dockerfile æ„å»ºçš„é•œåƒï¼‰ã€‚</li><li>ä¸€ä¸ªrepositoryè¡¨ç¤ºæŸç±»é•œåƒçš„ä»“åº“ï¼ˆä¾‹å¦‚ Ubuntu ï¼‰ï¼ŒåŒä¸€ä¸ª repository å†…çš„é•œåƒç”¨tagæ¥åŒºåˆ†ï¼ˆè¡¨ç¤ºåŒä¸€ç±»é•œåƒçš„ä¸åŒæ ‡ç­¾æˆ–ç‰ˆæœ¬ï¼‰ã€‚ä¸€ä¸ª registry åŒ…å«å¤šä¸ª repository ï¼Œä¸€ä¸ª repository åŒ…å«åŒç±»å‹çš„å¤šä¸ª image ã€‚</li><li>é•œåƒçš„å­˜å‚¨ç±»å‹æœ‰ aufsï¼Œdevicemapper , Btrfsï¼ŒVfsç­‰ã€‚å…¶ä¸­ centos ç³»ç»Ÿä½¿ç”¨ devicemapper çš„å­˜å‚¨ç±»å‹ã€‚</li><li>åŒæ—¶åœ¨ Graph çš„æœ¬åœ°ç›®å½•ä¸­ï¼Œå…³äºæ¯ä¸€ä¸ªçš„å®¹å™¨é•œåƒï¼Œå…·ä½“å­˜å‚¨çš„ä¿¡æ¯æœ‰ï¼šè¯¥å®¹å™¨é•œåƒçš„å…ƒæ•°æ®ï¼Œå®¹å™¨é•œåƒçš„å¤§å°ä¿¡æ¯ï¼Œä»¥åŠè¯¥å®¹å™¨é•œåƒæ‰€ä»£è¡¨çš„å…·ä½“ rootfs ã€‚</li></ol><h4 id="2-4-2-GraphDB">2.4.2. GraphDB</h4><ol><li>å·²ä¸‹è½½å®¹å™¨é•œåƒä¹‹é—´å…³ç³»çš„è®°å½•è€…ã€‚</li><li>GraphDB æ˜¯ä¸€ä¸ªæ„å»ºåœ¨ SQLite ä¹‹ä¸Šçš„å°å‹å›¾æ•°æ®åº“ï¼Œå®ç°äº†èŠ‚ç‚¹çš„å‘½åä»¥åŠèŠ‚ç‚¹ä¹‹é—´å…³è”å…³ç³»çš„è®°å½•</li></ol><h3 id="2-5-Driver-æ‰§è¡Œéƒ¨åˆ†">2.5. Driver [æ‰§è¡Œéƒ¨åˆ†]</h3><p>Driver æ˜¯ Docker æ¶æ„ä¸­çš„é©±åŠ¨æ¨¡å—ã€‚é€šè¿‡ Driver é©±åŠ¨ï¼ŒDocker å¯ä»¥å®ç°å¯¹ Docker å®¹å™¨æ‰§è¡Œç¯å¢ƒçš„å®šåˆ¶ã€‚å³ Graph è´Ÿè´£é•œåƒçš„å­˜å‚¨ï¼ŒDriver è´Ÿè´£å®¹å™¨çš„æ‰§è¡Œã€‚</p><h4 id="2-5-1-graphdriver">2.5.1. graphdriver</h4><p><strong>graphdriveræ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/graphdriver.jpg" alt="img"></p><ol><li>graphdriver ä¸»è¦ç”¨äºå®Œæˆå®¹å™¨é•œåƒçš„ç®¡ç†ï¼ŒåŒ…æ‹¬å­˜å‚¨ä¸è·å–ã€‚</li><li>å­˜å‚¨ï¼šdocker pull ä¸‹è½½çš„é•œåƒç”± graphdriver å­˜å‚¨åˆ°æœ¬åœ°çš„æŒ‡å®šç›®å½•ï¼ˆ Graph ä¸­ï¼‰ã€‚</li><li>è·å–ï¼šdocker runï¼ˆcreateï¼‰ç”¨é•œåƒæ¥åˆ›å»ºå®¹å™¨çš„æ—¶å€™ç”± graphdriver åˆ°æœ¬åœ° Graph ä¸­è·å–é•œåƒã€‚</li></ol><h4 id="2-5-2-networkdriver">2.5.2. networkdriver</h4><p><strong>networkdriverçš„æ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/networkdriver.jpg" alt="img"></p><ol><li>networkdriver çš„ç”¨é€”æ˜¯å®Œæˆ Docker å®¹å™¨ç½‘ç»œç¯å¢ƒçš„é…ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬<ul><li>Docker å¯åŠ¨æ—¶ä¸º Docker ç¯å¢ƒåˆ›å»ºç½‘æ¡¥ï¼›</li><li>Docker å®¹å™¨åˆ›å»ºæ—¶ä¸ºå…¶åˆ›å»ºä¸“å±è™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼›</li><li>Docker å®¹å™¨åˆ†é… IPã€ç«¯å£å¹¶ä¸å®¿ä¸»æœºåšç«¯å£æ˜ å°„ï¼Œè®¾ç½®å®¹å™¨é˜²ç«å¢™ç­–ç•¥ç­‰ã€‚</li></ul></li></ol><h4 id="2-5-3-execdriver">2.5.3. execdriver</h4><p><strong>execdriverçš„æ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/execdriver.jpg" alt="img"></p><ol><li>execdriver ä½œä¸º Docker å®¹å™¨çš„æ‰§è¡Œé©±åŠ¨ï¼Œè´Ÿè´£åˆ›å»ºå®¹å™¨è¿è¡Œå‘½åç©ºé—´ï¼Œè´Ÿè´£å®¹å™¨èµ„æºä½¿ç”¨çš„ç»Ÿè®¡ä¸é™åˆ¶ï¼Œè´Ÿè´£å®¹å™¨å†…éƒ¨è¿›ç¨‹çš„çœŸæ­£è¿è¡Œç­‰ã€‚</li><li>ç°åœ¨ execdriver é»˜è®¤ä½¿ç”¨ native é©±åŠ¨ï¼Œä¸ä¾èµ–äºLXCã€‚</li></ol><h3 id="2-6-libcontainer-å‡½æ•°åº“">2.6. libcontainer[å‡½æ•°åº“]</h3><p><strong>libcontainerçš„æ¶æ„å›¾</strong></p><p><img src="https://cdn.whbblog.cn/img/libcontainer.jpg" alt="img"></p><ol><li>libcontainer æ˜¯ Docker æ¶æ„ä¸­ä¸€ä¸ªä½¿ç”¨ Go è¯­è¨€è®¾è®¡å®ç°çš„åº“ï¼Œè®¾è®¡åˆè¡·æ˜¯å¸Œæœ›è¯¥åº“å¯ä»¥ä¸ä¾é ä»»ä½•ä¾èµ–ï¼Œç›´æ¥è®¿é—®å†…æ ¸ä¸­ä¸å®¹å™¨ç›¸å…³çš„ APIã€‚</li><li>Docker å¯ä»¥ç›´æ¥è°ƒç”¨ libcontainer ï¼Œè€Œæœ€ç»ˆæ“çºµå®¹å™¨çš„ namespaceã€cgroupsã€apparmorã€ç½‘ç»œè®¾å¤‡ä»¥åŠé˜²ç«å¢™è§„åˆ™ç­‰ã€‚</li><li>libcontainer æä¾›äº†ä¸€æ•´å¥—æ ‡å‡†çš„æ¥å£æ¥æ»¡è¶³ä¸Šå±‚å¯¹å®¹å™¨ç®¡ç†çš„éœ€æ±‚ã€‚æˆ–è€…è¯´ï¼Œlibcontainer å±è”½äº† Docker ä¸Šå±‚å¯¹å®¹å™¨çš„ç›´æ¥ç®¡ç†ã€‚</li></ol><h3 id="2-7-docker-container-æœåŠ¡äº¤ä»˜çš„æœ€ç»ˆå½¢å¼">2.7. docker container [æœåŠ¡äº¤ä»˜çš„æœ€ç»ˆå½¢å¼]</h3><p><strong>containeræ¶æ„</strong></p><p><img src="https://cdn.whbblog.cn/img/container.jpg" alt="img"></p><ol><li>Docker containerï¼ˆ Docker å®¹å™¨ï¼‰æ˜¯ Docker æ¶æ„ä¸­æœåŠ¡äº¤ä»˜çš„æœ€ç»ˆä½“ç°å½¢å¼ã€‚</li><li>Docker æŒ‰ç…§ç”¨æˆ·çš„éœ€æ±‚ä¸æŒ‡ä»¤ï¼Œè®¢åˆ¶ç›¸åº”çš„ Docker å®¹å™¨ï¼š</li><li><ul><li>ç”¨æˆ·é€šè¿‡æŒ‡å®šå®¹å™¨é•œåƒï¼Œä½¿å¾— Docker å®¹å™¨å¯ä»¥è‡ªå®šä¹‰ rootfs ç­‰æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>ç”¨æˆ·é€šè¿‡æŒ‡å®šè®¡ç®—èµ„æºçš„é…é¢ï¼Œä½¿å¾— Docker å®¹å™¨ä½¿ç”¨æŒ‡å®šçš„è®¡ç®—èµ„æºï¼›</li><li>ç”¨æˆ·é€šè¿‡é…ç½®ç½‘ç»œåŠå…¶å®‰å…¨ç­–ç•¥ï¼Œä½¿å¾— Docker å®¹å™¨æ‹¥æœ‰ç‹¬ç«‹ä¸”å®‰å…¨çš„ç½‘ç»œç¯å¢ƒï¼›</li><li>ç”¨æˆ·é€šè¿‡æŒ‡å®šè¿è¡Œçš„å‘½ä»¤ï¼Œä½¿å¾— Docker å®¹å™¨æ‰§è¡ŒæŒ‡å®šçš„å·¥ä½œã€‚</li></ul></li></ol><h2 id="ä¸‰ã€å‚è€ƒæ–‡æ¡£">ä¸‰ã€å‚è€ƒæ–‡æ¡£</h2><p>1ï¸âƒ£<a href="https://www.huweihuang.com/kubernetes-notes/docker/docker-architecture.html">Dockerçš„æ€»æ¶æ„å›¾</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> æ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å…¥é—¨åŸºç¡€ï¼ˆä¸€ï¼‰</title>
      <link href="/posts/eb3794734efe.html"/>
      <url>/posts/eb3794734efe.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.whbblog.cn/img/docker.png" alt="docker"></p><h2 id="ä¸€ã€Docker-èƒŒæ™¯ä»‹ç»ğŸŒ¹">ä¸€ã€Docker èƒŒæ™¯ä»‹ç»ğŸŒ¹</h2><p><strong>Docker</strong> æœ€åˆæ˜¯ <code>dotCloud</code> å…¬å¸åˆ›å§‹äºº Solomon Hykes åœ¨æ³•å›½æœŸé—´å‘èµ·çš„ä¸€ä¸ªå…¬å¸å†…éƒ¨é¡¹ç›®ï¼Œå®ƒæ˜¯åŸºäº <code>dotCloud</code> å…¬å¸å¤šå¹´äº‘æœåŠ¡æŠ€æœ¯çš„ä¸€æ¬¡é©æ–°ï¼Œå¹¶äº 2013 å¹´ 3 æœˆä»¥ Apache 2.0 æˆæƒåè®®å¼€æºï¼Œä¸»è¦é¡¹ç›®ä»£ç åœ¨ GitHub ä¸Šè¿›è¡Œç»´æŠ¤ã€‚<code>Docker</code> é¡¹ç›®åæ¥è¿˜åŠ å…¥äº† Linux åŸºé‡‘ä¼šï¼Œå¹¶æˆç«‹æ¨åŠ¨å¼€æ”¾å®¹å™¨è”ç›Ÿï¼ˆOCIï¼‰ã€‚</p><p><strong>Docker</strong> ä½¿ç”¨ <code>Google</code> å…¬å¸æ¨å‡ºçš„ Go è¯­è¨€è¿›è¡Œå¼€å‘å®ç°ï¼ŒåŸºäº <code>Linux</code> å†…æ ¸çš„ cgroupï¼Œnamespaceï¼Œä»¥åŠ OverlayFS ç±»çš„ Union FS ç­‰æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äºæ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ç”±äºéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»å’Œå…¶å®ƒçš„éš”ç¦»çš„è¿›ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚æœ€åˆå®ç°æ˜¯åŸºäº LXCï¼Œä» <code>0.7</code> ç‰ˆæœ¬ä»¥åå¼€å§‹å»é™¤ <code>LXC</code>ï¼Œè½¬è€Œä½¿ç”¨è‡ªè¡Œå¼€å‘çš„ libcontainerï¼Œä» <code>1.11</code> ç‰ˆæœ¬å¼€å§‹ï¼Œåˆ™è¿›ä¸€æ­¥æ¼”è¿›ä¸ºä½¿ç”¨ <code>runC</code> å’Œ <code>containerd</code>ã€‚</p><p><img src="https://cdn.whbblog.cn/img/docker-on-linux.png" alt="img"></p><blockquote><p><code>runc</code> æ˜¯ä¸€ä¸ª Linux å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ ¹æ® <a href="https://github.com/opencontainers/runtime-spec">OCIå®¹å™¨è¿è¡Œæ—¶è§„èŒƒ</a> åˆ›å»ºå’Œè¿è¡Œå®¹å™¨ã€‚</p></blockquote><blockquote><p><code>containerd</code> æ˜¯ä¸€ä¸ªå®ˆæŠ¤ç¨‹åºï¼Œå®ƒç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼Œæä¾›äº†åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œå®¹å™¨å’Œç®¡ç†é•œåƒçš„æœ€å°åŠŸèƒ½é›†ã€‚</p></blockquote><p><strong>Docker</strong> åœ¨å®¹å™¨çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œä»æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œäº’è”åˆ°è¿›ç¨‹éš”ç¦»ç­‰ç­‰ï¼Œæå¤§çš„ç®€åŒ–äº†å®¹å™¨çš„åˆ›å»ºå’Œç»´æŠ¤ã€‚ä½¿å¾— <code>Docker</code> æŠ€æœ¯æ¯”è™šæ‹ŸæœºæŠ€æœ¯æ›´ä¸ºè½»ä¾¿ã€å¿«æ·ã€‚</p><img src="https://cdn.whbblog.cn/img/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f30313166336566362d643832342d346434332d386232632d3336646162386561616137322d312e706e67" alt="img" style="zoom: 67%;" /><h2 id="äºŒã€å®¹å™¨ä¸è™šæ‹Ÿæœº-ğŸ€">äºŒã€å®¹å™¨ä¸è™šæ‹Ÿæœº ğŸ€</h2><p>æœ¯è¯­â€œå®¹å™¨â€å’Œâ€œè™šæ‹Ÿæœºâ€ç»å¸¸äº’æ¢ä½¿ç”¨ï¼Œç„¶è€Œï¼Œè¿™å¾€å¾€æ˜¯ä¸€ç§è¯¯è§£ã€‚ä½†æ˜¯ï¼Œä¸¤è€…åªæ˜¯æä¾›æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–çš„ä¸åŒæ–¹æ³•ã€‚</p><p><strong>è™šæ‹Ÿæœº</strong> é€šå¸¸åŒ…æ‹¬å®Œæ•´çš„æ“ä½œç³»ç»Ÿã€æ“ä½œç³»ç»ŸåŒ…ï¼Œå¦‚æœéœ€è¦ï¼Œè¿˜åŒ…æ‹¬å°‘é‡åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯é€šè¿‡ä¸ºè™šæ‹Ÿæœºæä¾›ç¡¬ä»¶è™šæ‹ŸåŒ–çš„ç®¡ç†ç¨‹åºå®ç°çš„ã€‚è¿™å…è®¸å•ä¸ªæœåŠ¡å™¨ä½œä¸ºè™šæ‹Ÿæ¥å®¾è¿è¡Œè®¸å¤šç‹¬ç«‹çš„æ“ä½œç³»ç»Ÿã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªå®Œå…¨ç±»ä¼¼äºè®¡ç®—æœºçš„ç³»ç»Ÿã€‚</p><p><strong>å®¹å™¨</strong> ç±»ä¼¼äºè™šæ‹Ÿæœºï¼Œåªæ˜¯å®¹å™¨ä¸æ˜¯å®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å®¹å™¨é€šå¸¸åªåŒ…å«å¿…è¦çš„æ“ä½œç³»ç»ŸåŒ…å’Œåº”ç”¨ç¨‹åºã€‚å®ƒä»¬é€šå¸¸ä¸åŒ…å«å®Œæ•´çš„æ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œè¿™å°±æ˜¯å®ƒä»¬â€œè½»é‡çº§â€çš„åŸå› ã€‚å®¹å™¨é€šå¸¸ç”¨äºéš”ç¦»å•ä¸ªä¸»æœºå†…æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œä»¥ç¡®ä¿éš”ç¦»çš„è¿›ç¨‹æ— æ³•ä¸åŒä¸€ç³»ç»Ÿå†…çš„å…¶ä»–è¿›ç¨‹äº¤äº’ã€‚</p><h3 id="ç»“æ„å¯¹æ¯”">ç»“æ„å¯¹æ¯”</h3><p><img src="https://cdn.whbblog.cn/img/4979e778ccf71842a472172c0aa23383.png" alt="å¯¹æ¯”"></p><h3 id="æ€§èƒ½å¯¹æ¯”">æ€§èƒ½å¯¹æ¯”</h3><table><thead><tr><th style="text-align:center">ç‰¹æ€§</th><th style="text-align:center">è™šæ‹Ÿæœº</th><th style="text-align:center">å®¹å™¨</th></tr></thead><tbody><tr><td style="text-align:center">æ“ä½œç³»ç»Ÿ</td><td style="text-align:center">éå¸¸å¹¿æ³›</td><td style="text-align:center">Linux ä¸ºä¸»</td></tr><tr><td style="text-align:center">éš”ç¦»ç­–ç•¥</td><td style="text-align:center">Hypervisor</td><td style="text-align:center">Namespace</td></tr><tr><td style="text-align:center">å¯åŠ¨æ—¶é—´</td><td style="text-align:center">åˆ†é’Ÿçº§</td><td style="text-align:center">æ¯«ç§’çº§</td></tr><tr><td style="text-align:center">èµ„æºæŸè€—</td><td style="text-align:center">5-15%</td><td style="text-align:center">0-5%</td></tr><tr><td style="text-align:center">é•œåƒå­˜å‚¨</td><td style="text-align:center">é‡é‡çº§ GB-TB</td><td style="text-align:center">è½»é‡çº§ KB-MB</td></tr><tr><td style="text-align:center">é›†ç¾¤è§„æ¨¡</td><td style="text-align:center">æ•°ç™¾</td><td style="text-align:center">è¿‘ä¸‡</td></tr></tbody></table><h2 id="ä¸‰ã€Docker-æ ¸å¿ƒç»„ä»¶-ğŸŒ·">ä¸‰ã€Docker æ ¸å¿ƒç»„ä»¶ ğŸŒ·</h2><p>â€‹Docker ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ã€‚Dockerå®¢æˆ·ç«¯ä¸ Docker å®ˆæŠ¤ç¨‹åºé€šä¿¡ï¼ŒDocker å®ˆæŠ¤ç¨‹åºä¾¦å¬ Docker API è¯·æ±‚å¹¶ç®¡ç† Docker å¯¹è±¡ï¼ˆå¦‚é•œåƒã€å®¹å™¨ã€ç½‘ç»œå’Œå·ç­‰ï¼‰ï¼Œæ‰§è¡Œæ„å»ºã€è¿è¡Œå’Œåˆ†å‘ Docker å®¹å™¨çš„ç¹é‡å·¥ä½œã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤ç¨‹åºå¯ä»¥åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥å°† Docker å®¢æˆ·ç«¯è¿æ¥åˆ°è¿œç¨‹ Docker å®ˆæŠ¤ç¨‹åºã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤ç¨‹åºä½¿ç”¨ REST API é€šè¿‡ UNIX å¥—æ¥å­—æˆ–ç½‘ç»œæ¥å£è¿›è¡Œé€šä¿¡ã€‚å¦ä¸€ä¸ª Docker å®¢æˆ·ç«¯æ˜¯ Docker Composeï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨ç”±ä¸€ç»„å®¹å™¨ç»„æˆçš„åº”ç”¨ç¨‹åºã€‚</p><p><img src="https://cdn.whbblog.cn/img/architecture.svg" alt="Docker æ¶æ„å›¾"></p><h4 id="ï¼ˆ1ï¼‰é•œåƒï¼ˆImageï¼‰">ï¼ˆ1ï¼‰é•œåƒï¼ˆImageï¼‰</h4><p>â€‹Dockeré•œåƒï¼ˆImageï¼‰ç±»ä¼¼äºè™šæ‹Ÿæœºçš„é•œåƒï¼Œå¯ä»¥å°†ä»–ç†è§£ä¸ºä¸€ä¸ªé¢å‘Dockerå¼•æ“çš„åªè¯»æ¨¡æ¿ï¼ŒåŒ…å«äº†æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>â€‹æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿåˆ†ä¸º <strong>å†…æ ¸</strong> å’Œ <strong>ç”¨æˆ·ç©ºé—´</strong>ã€‚å¯¹äº <code>Linux</code> è€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½ <code>root</code> æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€Œ <strong>Docker é•œåƒ</strong>ï¼ˆ<code>Image</code>ï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu:18.04</code> å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu 18.04 æœ€å°ç³»ç»Ÿçš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>â€‹é•œåƒæ˜¯åˆ›å»ºDockerå®¹å™¨çš„åŸºç¡€ï¼Œé€šè¿‡ç‰ˆæœ¬ç®¡ç†å’Œå¢é‡çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒDockeræä¾›äº†ä¸€å¥—ååˆ†ç®€å•çš„æœºåˆ¶æ¥åˆ›å»ºå’Œæ›´æ–°ç°æœ‰çš„é•œåƒã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–äººåˆ›å»ºå¹¶åœ¨ Docker ä»“åº“å‘å¸ƒçš„é•œåƒã€‚è¦æ„å»ºè‡ªå·±çš„é•œåƒï¼Œè¯·ä½¿ç”¨ç®€å•çš„è¯­æ³•åˆ›å»º<em>ä¸€ä¸ª Dockerfile</em>ï¼Œç”¨äºå®šä¹‰åˆ›å»ºé•œåƒå¹¶è¿è¡Œé•œåƒæ‰€éœ€çš„æ­¥éª¤ã€‚</p><p>â€‹Dockerfile ä¸­çš„æ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šåœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªå±‚ã€‚å½“æ‚¨æ›´æ”¹ Dockerfile å¹¶é‡æ–°ç”Ÿæˆé•œåƒæ—¶ï¼Œåªä¼šé‡æ–°ç”Ÿæˆå·²æ›´æ”¹çš„é‚£äº›å±‚ã€‚ä¸å…¶ä»–è™šæ‹ŸåŒ–æŠ€æœ¯ç›¸æ¯”ï¼Œè¿™æ˜¯ä½¿é•œåƒå¦‚æ­¤è½»å·§ã€å°å·§å’Œå¿«é€Ÿçš„éƒ¨åˆ†åŸå› ã€‚</p><p><img src="https://cdn.whbblog.cn/img/48FBDBCC990E5B96CD274EDCFA5D3AE9.jpg" alt="img"></p><h4 id="ï¼ˆ2ï¼‰å®¹å™¨ï¼ˆContainerï¼‰">ï¼ˆ2ï¼‰å®¹å™¨ï¼ˆContainerï¼‰</h4><p>â€‹Dockerå®¹å™¨ï¼ˆContainerï¼‰ç±»ä¼¼äºä¸€ä¸ªè½»é‡çº§çš„æ²™ç®±å­ï¼ˆå› ä¸ºDockeræ˜¯åŸºäºLinuxå†…æ ¸çš„è™šæ‹ŸæŠ€æœ¯ï¼Œæ‰€ä»¥æ¶ˆè€—èµ„æºååˆ†å°‘ï¼‰ï¼ŒDockeråˆ©ç”¨å®¹å™¨æ¥è¿è¡Œå’Œéš”ç¦»åº”ç”¨ã€‚</p><p>â€‹å®¹å™¨æ˜¯é•œåƒçš„å¯è¿è¡Œå®ä¾‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Docker API æˆ– CLI åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚å¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œå°†å­˜å‚¨é™„åŠ åˆ°è¯¥å®¹å™¨ï¼Œç”šè‡³å¯ä»¥åŸºäºå…¶å½“å‰çŠ¶æ€åˆ›å»ºæ–°é•œåƒã€‚</p><p>â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä¸å…¶ä»–å®¹å™¨åŠå…¶ä¸»æœºç›¸å¯¹éš”ç¦»ã€‚æ‚¨å¯ä»¥æ§åˆ¶å®¹å™¨çš„ç½‘ç»œã€å­˜å‚¨æˆ–å…¶ä»–åº•å±‚å­ç³»ç»Ÿçš„éš”ç¦»ç¨‹åº¦ä¸å…¶ä»–å®¹å™¨æˆ–ä¸»æœºçš„éš”ç¦»ç¨‹åº¦ã€‚</p><p>â€‹å®¹å™¨ç”±å…¶é•œåƒä»¥åŠæ‚¨åœ¨åˆ›å»ºæˆ–å¯åŠ¨å®¹å™¨æ—¶æä¾›ç»™å®ƒçš„ä»»ä½•é…ç½®é€‰é¡¹å®šä¹‰ã€‚åˆ é™¤å®¹å™¨åï¼Œæœªå­˜å‚¨åœ¨æŒä¹…æ€§å­˜å‚¨ä¸­çš„å¯¹å…¶çŠ¶æ€æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½å°†æ¶ˆå¤±ã€‚</p><p>â€‹å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼Œå…·æœ‰éš”ç¦»æ€§ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ root æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ç­‰ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæœ¬åœ°å¤šä¸ªåº”ç”¨éœ€è¦ä¸åŒç‰ˆæœ¬çš„ä¾èµ–å¯¼è‡´çš„å†²çªé—®é¢˜äº†ã€‚</p><h4 id="ï¼ˆ3ï¼‰ä»“åº“ï¼ˆRepositoryï¼‰">ï¼ˆ3ï¼‰ä»“åº“ï¼ˆRepositoryï¼‰</h4><p>â€‹Docker ä»“åº“ï¼ˆRepositoryï¼‰é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚</p><p>â€‹æœ‰æ—¶å€™ä¼šçœ‹åˆ°æœ‰èµ„æ–™å°†Dockerä»“åº“å’Œæ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰æ··ä¸ºä¸€è°ˆï¼Œå¹¶ä¸ä¸¥æ ¼åŒºåˆ†ã€‚å®é™…ä¸Šï¼Œæ³¨å†ŒæœåŠ¡å™¨æ˜¯å­˜æ”¾ä»“åº“çš„åœ°æ–¹ï¼Œå…¶ä¸Šå¾€å¾€å­˜æ”¾ç€å¤šä¸ªä»“åº“ã€‚æ¯ä¸ªä»“åº“é›†ä¸­å­˜æ”¾æŸä¸€ç±»é•œåƒï¼Œå¾€å¾€åŒ…æ‹¬å¤šä¸ªé•œåƒæ–‡ä»¶ï¼Œé€šè¿‡ä¸åŒçš„æ ‡ç­¾ï¼ˆtagï¼‰æ¥è¿›è¡ŒåŒºåˆ†ã€‚ä¾‹å¦‚å­˜æ”¾Ubuntuæ“ä½œç³»ç»Ÿé•œåƒçš„ä»“åº“ï¼Œç§°ä¸ºUbuntuä»“åº“ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬14.04,12.04ç­‰ä¸åŒç‰ˆæœ¬çš„é•œåƒã€‚</p><p>â€‹æ ¹æ®å­˜å‚¨çš„é•œåƒå…¬å¼€åˆ†äº«ä¸å¦ï¼ŒDockerä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“ï¼ˆPublicï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰ä¸¤ç§å½¢å¼ã€‚æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ <a href="https://hub.docker.com/">Docker Hub</a>ï¼Œå­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒä¾›ç”¨æˆ·ä¸‹è½½ã€‚å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬é˜¿é‡Œäº‘ ã€ç½‘æ˜“äº‘ç­‰ã€‚å¦‚æœç”¨æˆ·ä¸å¸Œæœ›å…¬å¼€åˆ†äº«è‡ªå·±çš„é•œåƒæ–‡ä»¶ï¼ŒDockerä¹Ÿæ”¯æŒç”¨æˆ·åœ¨æœ¬åœ°ç½‘ç»œå†…åˆ›å»ºä¸€ä¸ªåªèƒ½è‡ªå·±è®¿é—®çš„ç§æœ‰ä»“åº“ã€‚</p><p>â€‹å½“ç”¨æˆ·åˆ›å»ºäº†è‡ªå·±çš„é•œåƒä¹‹åå°±å¯ä»¥ä½¿ç”¨pushå°†å®ƒä¸Šä¼ åˆ°æŒ‡å®šçš„å…¬æœ‰æˆ–åˆ™ç§æœ‰ä»“åº“ã€‚è¿™æ ·ç”¨æˆ·ä¸‹æ¬¡åœ¨å¦ä¸€å°æœºå™¨ä¸Šä½¿ç”¨è¯¥é•œåƒæ—¶ï¼Œåªéœ€å°†å…¶ä»ä»“åº“<code>pull</code>ä¸‹æ¥å°±å¯ä»¥äº†ã€‚</p><h2 id="å››ã€å‚è€ƒæ–‡çŒ®-ğŸŒ»">å››ã€å‚è€ƒæ–‡çŒ® ğŸŒ»</h2><p>1ï¸âƒ£<a href="https://yeasy.gitbook.io/docker_practice">Docker â€” ä»å…¥é—¨åˆ°å®è·µ (gitbook.io)</a></p><p>2ï¸âƒ£<a href="https://z.itpub.net/article/detail/C32DD6088A03E0EA00501CEAA5DCCCF7">ä¸€æ–‡çœ‹æ‡‚ä»€ä¹ˆæ˜¯ Docker å®¹å™¨</a></p><p>3ï¸âƒ£<a href="https://docs.docker.com/">Docker Documentation | Docker Documentation</a></p><p>4ï¸âƒ£<a href="https://www.html.cn/site/111219622050225.html">Docker é•œåƒã€å®¹å™¨ã€ä»“åº“çš„æ¦‚å¿µåŠåº”ç”¨è¯¦è§£ - htmlä¸­æ–‡ç½‘</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å®¹å™¨ </tag>
            
            <tag> é•œåƒ </tag>
            
            <tag> ä»“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 é…ç½®åˆå¹¶</title>
      <link href="/posts/2a5f40ec218c.html"/>
      <url>/posts/2a5f40ec218c.html</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>â€‹æ‚¨å¸Œæœ›é€šè¿‡ä»æ–‡æœ¬æ–‡ä»¶æˆ–ç»ˆç«¯å°†é…ç½®æ›´æ”¹åˆå¹¶åˆ°ç°æœ‰æ­£åœ¨è¿è¡Œçš„é…ç½®ä¸­ï¼Œæ¥åˆ›å»ºæˆ–ä¿®æ”¹BIG-IPé…ç½®å¯¹è±¡ã€‚å½“æ‚¨å¸Œæœ›åœ¨ä¸€æ¬¡æ“ä½œä¸­å¯¹ BIG-IP ç³»ç»Ÿè¿›è¡Œå¤§é‡é…ç½®æ›´æ”¹æ—¶ï¼Œè¿™å¯èƒ½éå¸¸æœ‰ç”¨ã€‚</p><h2 id="æ·»åŠ å†…å®¹ç¤ºä¾‹">æ·»åŠ å†…å®¹ç¤ºä¾‹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ltm pool /Common/Pool_Test_1 &#123;</span><br><span class="line">    members &#123;</span><br><span class="line">        /Common/10.95.64.60:8410 &#123;</span><br><span class="line">            address 10.95.64.60</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    monitor /Common/tcp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€ã€æ–‡ä»¶é…ç½®åˆå¹¶">ä¸€ã€æ–‡ä»¶é…ç½®åˆå¹¶</h2><p>è¦ä»æŒ‡å®šæ–‡ä»¶åŠ è½½é…ç½®å¹¶å°†å…¶å†…å®¹åˆå¹¶åˆ°æ­£åœ¨è¿è¡Œçš„é…ç½®ä¸­ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹è¿‡ç¨‹ï¼š</p><h3 id="1ã€åˆ›å»ºå¢æ·»é…ç½®æ–‡ä»¶">1ã€åˆ›å»ºå¢æ·»é…ç½®æ–‡ä»¶</h3><p>åœ¨<code>/var/tmp</code>è·¯å¾„ä¸‹åˆ›å»º<code>tmp.conf</code>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸Šã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat /var/tmp/tmp.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line">ltm pool /Common/Pool_Test_1 &#123;</span><br><span class="line">    members &#123;</span><br><span class="line">        /Common/10.95.64.60:8410 &#123;</span><br><span class="line">            address 10.95.64.60</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    monitor /Common/tcp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€éªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰">2ã€éªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">load /sys config merge file &lt;filename&gt; verify</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹</span></span><br><span class="line">load sys config merge file /var/tmp/tmp.conf verify </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹è¾“å‡º</span></span><br><span class="line">Validating configuration...</span><br><span class="line">  /var/tmp/tmp.conf</span><br></pre></td></tr></table></figure><p>å¦‚æœéªŒè¯å®Œæˆæ²¡æœ‰å¼¹å‡ºé”™è¯¯ä¿¡æ¯ï¼Œåˆ™é…ç½®æ²¡æœ‰é—®é¢˜ã€‚</p><h3 id="3ã€é…ç½®åˆå¹¶">3ã€é…ç½®åˆå¹¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">load sys config merge file &lt;filename&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹</span></span><br><span class="line">load sys config merge file /var/tmp/tmp.conf </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹è¾“å‡º</span></span><br><span class="line">Loading configuration...</span><br><span class="line">  /var/tmp/tmp.conf</span><br></pre></td></tr></table></figure><h3 id="4ã€ä¿å­˜é…ç½®">4ã€ä¿å­˜é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">save sys config</span><br></pre></td></tr></table></figure><h2 id="äºŒã€ç»ˆç«¯é…ç½®åˆå¹¶">äºŒã€ç»ˆç«¯é…ç½®åˆå¹¶</h2><p>è¦ä»ç»ˆç«¯ç›´æ¥åŠ è½½é…ç½®å¹¶å°†å…¶å†…å®¹åˆå¹¶åˆ°æ­£åœ¨è¿è¡Œçš„é…ç½®ä¸­ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹è¿‡ç¨‹ï¼š</p><h3 id="1ã€éªŒè¯ç»ˆç«¯é…ç½®">1ã€éªŒè¯ç»ˆç«¯é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">load sys config merge from-terminal verify</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å…¥é…ç½®ï¼ŒCtrl+D éªŒè¯é…ç½®ï¼ŒCtrl+C å–æ¶ˆ</span></span><br><span class="line">Enter configuration. Press CTRL-D to submit or CTRL-C to cancel.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ctrl+D åå‡ºç°ä¸‹åˆ—è¾“å‡ºï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™åˆ™é…ç½®éªŒè¯æˆåŠŸ</span></span><br><span class="line"></span><br><span class="line">Validating configuration...</span><br></pre></td></tr></table></figure><h3 id="2ã€-é…ç½®åˆå¹¶">2ã€ é…ç½®åˆå¹¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">load /sys config merge from-terminal</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å…¥é…ç½®ï¼ŒCtrl+D éªŒè¯é…ç½®ï¼ŒCtrl+C å–æ¶ˆ</span></span><br><span class="line">Enter configuration. Press CTRL-D to submit or CTRL-C to cancel.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ctrl+D åå‡ºç°ä¸‹åˆ—è¾“å‡ºï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™åˆ™é…ç½®éªŒè¯æˆåŠŸ</span></span><br><span class="line"></span><br><span class="line">Loading configuration...</span><br></pre></td></tr></table></figure><h3 id="3ã€ä¿å­˜é…ç½®">3ã€ä¿å­˜é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">save sys config</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2><p><a href="https://support.f5.com/csp/article/K81271448">Merging BIG-IP configuration objects into the running configuration using tmsh (f5.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> é…ç½®åˆå¹¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‰å‰‘å®¢ç³»åˆ—ä¹‹grep</title>
      <link href="/posts/714fa0549b18.html"/>
      <url>/posts/714fa0549b18.html</url>
      
        <content type="html"><![CDATA[<p><strong>grep</strong> ï¼ˆglobal search regular expression(RE) and print out the lineï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚ç”¨äºè¿‡æ»¤/æœç´¢çš„ç‰¹å®šå­—ç¬¦ã€‚å¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼èƒ½å¤šç§å‘½ä»¤é…åˆä½¿ç”¨ï¼Œä½¿ç”¨ä¸Šååˆ†çµæ´»ã€‚</p><h2 id="ä¸€ã€è¯­æ³•æ ¼å¼ğŸ¥‡">ä¸€ã€è¯­æ³•æ ¼å¼ğŸ¥‡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep OPTIONS PATTERN INPUT_FILE_NAMES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OPTION é€‰é¡¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PATTERN åŒ¹é…éƒ¨åˆ†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">INPUT_FILE_NAMES è¾“å…¥æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€é€‰é¡¹ğŸ¥ˆ">äºŒã€é€‰é¡¹ğŸ¥ˆ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-a --text  # ä¸è¦å¿½ç•¥äºŒè¿›åˆ¶æ•°æ®ã€‚</span><br><span class="line">-A &lt;æ˜¾ç¤ºè¡Œæ•°&gt;   --after-context=&lt;æ˜¾ç¤ºè¡Œæ•°&gt;   # é™¤äº†æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹åçš„å†…å®¹ã€‚</span><br><span class="line">-b --byte-offset                           # åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹å‰çš„å†…å®¹ã€‚</span><br><span class="line">-B&lt;æ˜¾ç¤ºè¡Œæ•°&gt;   --before-context=&lt;æ˜¾ç¤ºè¡Œæ•°&gt;   # é™¤äº†æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹å‰çš„å†…å®¹ã€‚</span><br><span class="line">-c --count    # è®¡ç®—ç¬¦åˆèŒƒæœ¬æ ·å¼çš„åˆ—æ•°ã€‚</span><br><span class="line">-C&lt;æ˜¾ç¤ºè¡Œæ•°&gt; --context=&lt;æ˜¾ç¤ºè¡Œæ•°&gt;æˆ–-&lt;æ˜¾ç¤ºè¡Œæ•°&gt; # é™¤äº†æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥åˆ—ä¹‹å‰åçš„å†…å®¹ã€‚</span><br><span class="line">-d&lt;è¿›è¡ŒåŠ¨ä½œ&gt; --directories=&lt;åŠ¨ä½œ&gt;  # å½“æŒ‡å®šè¦æŸ¥æ‰¾çš„æ˜¯ç›®å½•è€Œéæ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä½¿ç”¨è¿™é¡¹å‚æ•°ï¼Œå¦åˆ™grepå‘½ä»¤å°†å›æŠ¥ä¿¡æ¯å¹¶åœæ­¢åŠ¨ä½œã€‚</span><br><span class="line">-e&lt;èŒƒæœ¬æ ·å¼&gt; --regexp=&lt;èŒƒæœ¬æ ·å¼&gt;   # æŒ‡å®šå­—ç¬¦ä¸²ä½œä¸ºæŸ¥æ‰¾æ–‡ä»¶å†…å®¹çš„èŒƒæœ¬æ ·å¼ã€‚</span><br><span class="line">-E --extended-regexp             # å°†èŒƒæœ¬æ ·å¼ä¸ºå»¶ä¼¸çš„æ™®é€šè¡¨ç¤ºæ³•æ¥ä½¿ç”¨ï¼Œæ„å‘³ç€ä½¿ç”¨èƒ½ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ã€‚</span><br><span class="line">-f&lt;èŒƒæœ¬æ–‡ä»¶&gt; --file=&lt;è§„åˆ™æ–‡ä»¶&gt;     # æŒ‡å®šèŒƒæœ¬æ–‡ä»¶ï¼Œå…¶å†…å®¹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªèŒƒæœ¬æ ·å¼ï¼Œè®©grepæŸ¥æ‰¾ç¬¦åˆèŒƒæœ¬æ¡ä»¶çš„æ–‡ä»¶å†…å®¹ï¼Œæ ¼å¼ä¸ºæ¯ä¸€åˆ—çš„èŒƒæœ¬æ ·å¼ã€‚</span><br><span class="line">-F --fixed-regexp   # å°†èŒƒæœ¬æ ·å¼è§†ä¸ºå›ºå®šå­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚</span><br><span class="line">-G --basic-regexp   # å°†èŒƒæœ¬æ ·å¼è§†ä¸ºæ™®é€šçš„è¡¨ç¤ºæ³•æ¥ä½¿ç”¨ã€‚</span><br><span class="line">-h --no-filename    # åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œä¸æ ‡ç¤ºè¯¥åˆ—æ‰€å±çš„æ–‡ä»¶åç§°ã€‚</span><br><span class="line">-H --with-filename  # åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œæ ‡ç¤ºè¯¥åˆ—çš„æ–‡ä»¶åç§°ã€‚</span><br><span class="line">-i --ignore-case    # å¿½ç•¥å­—ç¬¦å¤§å°å†™çš„å·®åˆ«ã€‚</span><br><span class="line">-l --file-with-matches   # åˆ—å‡ºæ–‡ä»¶å†…å®¹ç¬¦åˆæŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶åç§°ã€‚</span><br><span class="line">-L --files-without-match # åˆ—å‡ºæ–‡ä»¶å†…å®¹ä¸ç¬¦åˆæŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶åç§°ã€‚</span><br><span class="line">-n --line-number         # åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥åˆ—çš„ç¼–å·ã€‚</span><br><span class="line">-q --quietæˆ–--silent     # ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚</span><br><span class="line">-R/-r  --recursive       # æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®šâ€œ-d recurseâ€å‚æ•°ç›¸åŒã€‚</span><br><span class="line">-s --no-messages  # ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚</span><br><span class="line">-v --revert-match # åè½¬æŸ¥æ‰¾ã€‚</span><br><span class="line">-V --version      # æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚   </span><br><span class="line">-w --word-regexp  # åªæ˜¾ç¤ºå…¨å­—ç¬¦åˆçš„åˆ—ã€‚</span><br><span class="line">-x --line-regexp  # åªæ˜¾ç¤ºå…¨åˆ—ç¬¦åˆçš„åˆ—ã€‚</span><br><span class="line">-y # æ­¤å‚æ•°æ•ˆæœè·Ÿâ€œ-iâ€ç›¸åŒã€‚</span><br><span class="line">-o # åªè¾“å‡ºæ–‡ä»¶ä¸­åŒ¹é…åˆ°çš„éƒ¨åˆ†ã€‚</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€è§„åˆ™è¡¨è¾¾å¼ğŸ¥‰">ä¸‰ã€è§„åˆ™è¡¨è¾¾å¼ğŸ¥‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">^    <span class="comment"># é”šå®šè¡Œçš„å¼€å§‹ å¦‚ï¼š&#x27;^grep&#x27;åŒ¹é…æ‰€æœ‰ä»¥grepå¼€å¤´çš„è¡Œã€‚    </span></span><br><span class="line">$    <span class="comment"># é”šå®šè¡Œçš„ç»“æŸ å¦‚ï¼š&#x27;grep$&#x27;åŒ¹é…æ‰€æœ‰ä»¥grepç»“å°¾çš„è¡Œã€‚    </span></span><br><span class="line">.    <span class="comment"># åŒ¹é…ä¸€ä¸ªéæ¢è¡Œç¬¦çš„å­—ç¬¦ å¦‚ï¼š&#x27;gr.p&#x27;åŒ¹é…gråæ¥ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚    </span></span><br><span class="line">*    <span class="comment"># åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰å­—ç¬¦ å¦‚ï¼š&#x27;*grep&#x27;åŒ¹é…æ‰€æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼åç´§è·Ÿgrepçš„è¡Œã€‚    </span></span><br><span class="line">.*   <span class="comment"># ä¸€èµ·ç”¨ä»£è¡¨ä»»æ„å­—ç¬¦ã€‚   </span></span><br><span class="line">[]   <span class="comment"># åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚&#x27;[Gg]rep&#x27;åŒ¹é…Grepå’Œgrepã€‚    </span></span><br><span class="line">[^]  <span class="comment"># åŒ¹é…ä¸€ä¸ªä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š&#x27;[^A-FH-Z]rep&#x27;åŒ¹é…ä¸åŒ…å«A-Rå’ŒT-Zçš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œç´§è·Ÿrepçš„è¡Œã€‚    </span></span><br><span class="line">\(..\)  <span class="comment"># æ ‡è®°åŒ¹é…å­—ç¬¦ï¼Œå¦‚&#x27;\(love\)&#x27;ï¼Œloveè¢«æ ‡è®°ä¸º1ã€‚    </span></span><br><span class="line">\&lt;      <span class="comment"># é”šå®šå•è¯çš„å¼€å§‹ï¼Œå¦‚:&#x27;\&lt;grep&#x27;åŒ¹é…åŒ…å«ä»¥grepå¼€å¤´çš„å•è¯çš„è¡Œã€‚    </span></span><br><span class="line">\&gt;      <span class="comment"># é”šå®šå•è¯çš„ç»“æŸï¼Œå¦‚&#x27;grep\&gt;&#x27;åŒ¹é…åŒ…å«ä»¥grepç»“å°¾çš„å•è¯çš„è¡Œã€‚    </span></span><br><span class="line">x\&#123;m\&#125;  <span class="comment"># é‡å¤å­—ç¬¦xï¼Œmæ¬¡ï¼Œå¦‚ï¼š&#x27;0\&#123;5\&#125;&#x27;åŒ¹é…åŒ…å«5ä¸ªoçš„è¡Œã€‚    </span></span><br><span class="line">x\&#123;m,\&#125;   <span class="comment"># é‡å¤å­—ç¬¦x,è‡³å°‘mæ¬¡ï¼Œå¦‚ï¼š&#x27;o\&#123;5,\&#125;&#x27;åŒ¹é…è‡³å°‘æœ‰5ä¸ªoçš„è¡Œã€‚    </span></span><br><span class="line">x\&#123;m,n\&#125;  <span class="comment"># é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œä¸å¤šäºnæ¬¡ï¼Œå¦‚ï¼š&#x27;o\&#123;5,10\&#125;&#x27;åŒ¹é…5--10ä¸ªoçš„è¡Œã€‚   </span></span><br><span class="line">\w    <span class="comment"># åŒ¹é…æ–‡å­—å’Œæ•°å­—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯[A-Za-z0-9]ï¼Œå¦‚ï¼š&#x27;G\w*p&#x27;åŒ¹é…ä»¥Gåè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªæ–‡å­—æˆ–æ•°å­—å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚   </span></span><br><span class="line">\W    <span class="comment"># \wçš„åç½®å½¢å¼ï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ï¼Œå¦‚ç‚¹å·å¥å·ç­‰ã€‚   </span></span><br><span class="line">\b    <span class="comment"># å•è¯é”å®šç¬¦ï¼Œå¦‚: &#x27;\bgrep\b&#x27;åªåŒ¹é…grepã€‚</span></span><br></pre></td></tr></table></figure><h2 id="å››ã€grepå‘½ä»¤å¸¸è§ç”¨æ³•ğŸ…">å››ã€grepå‘½ä»¤å¸¸è§ç”¨æ³•ğŸ…</h2><h3 id="1ã€ç¤ºä¾‹æ–‡æ¡£">1ã€ç¤ºä¾‹æ–‡æ¡£</h3><p>æœ¬ç³»åˆ—çš„grepæ•™ç¨‹ä¸­ï¼Œå°†å¤§é‡ä½¿ç”¨åˆ°å¦‚ä¸‹ç¤ºä¾‹æ–‡ä»¶<code>a.txt</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">2   Alice   female  24   def@gmail.com  18084925203</span><br><span class="line">3   Tony    male    21   aaa@163.com    17048792503</span><br><span class="line">4   Kevin   male    21   bbb@189.com    17023929033</span><br><span class="line">5   Alex    male    18   ccc@xyz.com    18185904230</span><br><span class="line">6   Andy    female  22   ddd@139.com    18923902352</span><br><span class="line">7   Jerry   female  25   exdsa@189.com  18785234906</span><br><span class="line">8   Peter   male    20   bax@qq.com     17729348758</span><br><span class="line">9   Steven  female  23   bc@sohu.com    15947893212</span><br><span class="line">10  Bruce   female  27   bcbd@139.com   13942943905</span><br></pre></td></tr></table></figure><h3 id="2ã€å¸¸ç”¨ç¤ºä¾‹">2ã€å¸¸ç”¨ç¤ºä¾‹</h3><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬è¿‡æ»¤">ï¼ˆ1ï¼‰åŸºæœ¬è¿‡æ»¤</h4><p>è¿‡æ»¤<code>a.txt</code>ä¸­Peteræ‰€åœ¨è¡Œçš„ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep Peter a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line">8   Peter   male    20   bax@qq.com     17729348758</span><br></pre></td></tr></table></figure><p>å¤šæ–‡ä»¶è¿‡æ»¤ï¼Œåœ¨å¤šä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾æ•°å­—<code>6</code>ç›¸å…³çš„è¡Œä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grep 6 a.txt  c.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">a.txt:3   Tony    male    21   aaa@163.com    17048792503</span><br><span class="line">a.txt:6   Andy    female  22   ddd@139.com    18923902352</span><br><span class="line">a.txt:7   Jerry   female  25   exdsa@189.com  18785234906</span><br><span class="line">c.txt:2019-01-16_15:00_index?uid=9710</span><br></pre></td></tr></table></figure><h4 id="2-åå‘è¿‡æ»¤-v-é€‰é¡¹">(2) åå‘è¿‡æ»¤ <code>-v</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¿‡æ»¤é™¤<code>@</code>ä¹‹å¤–çš„æ‰€æœ‰è¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -v &quot;@&quot; a.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">ID  name    gender  age  email          phone</span><br></pre></td></tr></table></figure><h4 id="3-æ ‡è®°åŒ¹é…é¢œè‰²-â€”color-auto-é€‰é¡¹">(3) æ ‡è®°åŒ¹é…é¢œè‰² <code>â€”color=auto</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¿‡æ»¤<code>aaa</code>å­—ç¬¦ä¸²ç›¸å…³çš„æ‰€æœ‰è¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep aaa a.txt --color=auto</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">3   Tony    male    21   aaa@163.com    17048792503</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼-E-é€‰é¡¹">ï¼ˆ4ï¼‰ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ <strong>-E</strong> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¿‡æ»¤æ­£åˆ™è¡¨è¾¾å¼<code>[0-9]</code>ç›¸å…³çš„æ‰€æœ‰è¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -E [0-9] a.txt --color=auto</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">2   Alice   female  24   def@gmail.com  18084925203</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h4 id="5-æŒ‡å®šè¾“å‡º-o-é€‰é¡¹">(5)æŒ‡å®šè¾“å‡º <code>-o</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…åˆ°çš„å†…å®¹ï¼Œè€Œä¸æ˜¯è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -o name a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">name</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ6ï¼‰åŒ¹é…å­—ç¬¦ä¸²çš„è¡Œæ•°-c-é€‰é¡¹">ï¼ˆ6ï¼‰åŒ¹é…å­—ç¬¦ä¸²çš„è¡Œæ•° <code>-c</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²<code>@</code>çš„è¡Œæ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -c &quot;@&quot; a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">10</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²çš„è¡Œæ•°-n-é€‰é¡¹">ï¼ˆ7ï¼‰è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²çš„è¡Œæ•° <code>-n</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²<code>@</code>çš„è¡Œï¼Œå¹¶è¾“å‡ºè¡Œå·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">grep -n &quot;@&quot; a.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">2:1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">3:2   Alice   female  24   def@gmail.com  18084925203</span><br><span class="line">4:3   Tony    male    21   aaa@163.com    17048792503</span><br><span class="line">5:4   Kevin   male    21   bbb@189.com    17023929033</span><br><span class="line">6:5   Alex    male    18   ccc@xyz.com    18185904230</span><br><span class="line">7:6   Andy    female  22   ddd@139.com    18923902352</span><br><span class="line">8:7   Jerry   female  25   exdsa@189.com  18785234906</span><br><span class="line">9:8   Peter   male    20   bax@qq.com     17729348758</span><br><span class="line">10:9   Steven  female  23   bc@sohu.com    15947893212</span><br><span class="line">11:10  Bruce   female  27   bcbd@139.com   13942943905</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ8ï¼‰æŸ¥æ‰¾å†…å®¹æ‰€åœ¨æ–‡ä»¶å-l-é€‰é¡¹">ï¼ˆ8ï¼‰æŸ¥æ‰¾å†…å®¹æ‰€åœ¨æ–‡ä»¶å <code>-l</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>å’Œ<code>c.txt</code>ä¸­è¿‡æ»¤å¸¦æœ‰å­—ç¬¦<code>@</code>çš„é—®ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -l &quot;@&quot; a.txt c.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">a.txt</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ9ï¼‰é€’å½’æœç´¢æ–‡ä»¶-r-é€‰é¡¹">ï¼ˆ9ï¼‰é€’å½’æœç´¢æ–‡ä»¶ <code>-r</code> é€‰é¡¹</h4><p>åœ¨å½“å‰ç›®å½•ä¸­å¯¹æ–‡æœ¬<code>@</code>è¿›è¡Œé€’å½’æœç´¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;@&quot; -r .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">./a.txt:1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">./a.txt:2   Alice   female  24   def@gmail.com  18084925203</span><br><span class="line">./a.txt:3   Tony    male    21   aaa@163.com    17048792503</span><br><span class="line">./a.txt:4   Kevin   male    21   bbb@189.com    17023929033</span><br><span class="line">./a.txt:5   Alex    male    18   ccc@xyz.com    18185904230</span><br><span class="line">./a.txt:6   Andy    female  22   ddd@139.com    18923902352</span><br><span class="line">./a.txt:7   Jerry   female  25   exdsa@189.com  18785234906</span><br><span class="line">./a.txt:8   Peter   male    20   bax@qq.com     17729348758</span><br><span class="line">./a.txt:9   Steven  female  23   bc@sohu.com    15947893212</span><br><span class="line">./a.txt:10  Bruce   female  27   bcbd@139.com   13942943905</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">.è¡¨ç¤ºå½“å‰ç›®å½•ã€‚</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ10ï¼‰å¿½ç•¥å­—ç¬¦å¤§å°å†™-i-é€‰é¡¹">ï¼ˆ10ï¼‰å¿½ç•¥å­—ç¬¦å¤§å°å†™ <code>-i</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¿‡æ»¤<code>bob</code>å­—ç¬¦ä¸²ç›¸å…³çš„è¡Œï¼Œå¿½ç•¥å¤§å°å†™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -i bob a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ11ï¼‰å¤šä¸ªåŒ¹é…æ ·å¼-e-é€‰é¡¹">ï¼ˆ11ï¼‰å¤šä¸ªåŒ¹é…æ ·å¼ <code>-e</code> é€‰é¡¹</h4><p>åœ¨<code>a.txt</code>ä¸­è¿‡æ»¤<code>bob</code>å’Œ<code>Tony</code>å­—ç¬¦ä¸²ç›¸å…³çš„è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -e &quot;Bob&quot; -e &quot;Tony&quot; a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">3   Tony    male    21   aaa@163.com    17048792503</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ12ï¼‰é™é»˜è¾“å‡º-q-é€‰é¡¹">ï¼ˆ12ï¼‰é™é»˜è¾“å‡º <code>-q</code> é€‰é¡¹</h4><p>ä¸ä¼šè¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œå¦‚æœå‘½ä»¤è¿è¡ŒæˆåŠŸè¿”å›0ï¼Œå¤±è´¥åˆ™è¿”å›é0å€¼ã€‚ä¸€èˆ¬ç”¨äºæ¡ä»¶æµ‹è¯•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹ä¸€ï¼šåŒ¹é…æˆåŠŸæ ·ä¾‹</span></span><br><span class="line">grep -q &quot;Bob&quot;  a.txt </span><br><span class="line">echo $?</span><br><span class="line">0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹äºŒï¼šåŒ¹é…å¤±è´¥æ ·ä¾‹</span></span><br><span class="line">grep -q &quot;Bobx&quot;  a.txt </span><br><span class="line">echo $?</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ13ï¼‰æ‰“å°å‡ºåŒ¹é…æ–‡æœ¬ä¹‹å‰æˆ–è€…ä¹‹åçš„è¡Œ">ï¼ˆ13ï¼‰æ‰“å°å‡ºåŒ¹é…æ–‡æœ¬ä¹‹å‰æˆ–è€…ä¹‹åçš„è¡Œ</h4><p><strong>a. æ˜¾ç¤ºåŒ¹é…æŸä¸ªç»“æœä¹‹åçš„è¡Œï¼Œä½¿ç”¨ -A é€‰é¡¹ï¼š</strong></p><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²<code>Bob</code>çš„è¡Œï¼Œå¹¶å‘åè¾“å‡º1è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -A 1 Bob a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">2   Alice   female  24   def@gmail.com  18084925203</span><br></pre></td></tr></table></figure><p><strong>b. æ˜¾ç¤ºåŒ¹é…æŸä¸ªç»“æœä¹‹å‰çš„è¡Œï¼Œä½¿ç”¨ -B é€‰é¡¹ï¼š</strong></p><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²<code>Bob</code>çš„è¡Œï¼Œå¹¶å‘å‰è¾“å‡º1è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep -B 1 Bob a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br></pre></td></tr></table></figure><p><strong>c. æ˜¾ç¤ºåŒ¹é…æŸä¸ªç»“æœå‰åå‰çš„è¡Œï¼Œä½¿ç”¨ -C é€‰é¡¹ï¼š</strong></p><p>åœ¨<code>a.txt</code>ä¸­è¾“å‡ºåŒ¹é…å­—ç¬¦ä¸²<code>Bob</code>çš„è¡Œï¼Œå¹¶å‘å‰å‘åè¾“å‡º1è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -C 1 Bob a.txt </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">2   Alice   female  24   def@gmail.com  18084925203</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ14ï¼‰åœ¨grepæœç´¢ç»“æœä¸­åŒ…æ‹¬æˆ–è€…æ’é™¤æŒ‡å®šæ–‡ä»¶ï¼š">ï¼ˆ14ï¼‰åœ¨grepæœç´¢ç»“æœä¸­åŒ…æ‹¬æˆ–è€…æ’é™¤æŒ‡å®šæ–‡ä»¶ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åªåœ¨ç›®å½•ä¸­æ‰€æœ‰çš„.phpå’Œ.htmlæ–‡ä»¶ä¸­é€’å½’æœç´¢å­—ç¬¦<span class="string">&quot;main()&quot;</span></span></span><br><span class="line">grep &quot;main()&quot; . -r --include *.&#123;php,html&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åœ¨æœç´¢ç»“æœä¸­æ’é™¤æ‰€æœ‰READMEæ–‡ä»¶</span></span><br><span class="line">grep &quot;main()&quot; . -r --exclude &quot;README&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åœ¨æœç´¢ç»“æœä¸­æ’é™¤filelistæ–‡ä»¶åˆ—è¡¨é‡Œçš„æ–‡ä»¶</span></span><br><span class="line">grep &quot;main()&quot; . -r --exclude-from filelist</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ä¸‰å‰‘å®¢ </tag>
            
            <tag> Linuxä¸‰å‰‘å®¢ </tag>
            
            <tag> grep </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‰å‰‘å®¢ç³»åˆ—ä¹‹awk</title>
      <link href="/posts/626e4dad2867.html"/>
      <url>/posts/626e4dad2867.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œğŸ‰">å‡†å¤‡å·¥ä½œğŸ‰</h2><p>æœ¬ç³»åˆ—çš„awkæ•™ç¨‹ä¸­ï¼Œå°†å¤§é‡ä½¿ç”¨åˆ°å¦‚ä¸‹ç¤ºä¾‹æ–‡ä»¶a.txtã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">1   Bob     male    28   abc@qq.com     18023394012</span><br><span class="line">2   Alice   female  24   def@gmail.com  18084925203</span><br><span class="line">3   Tony    male    21   aaa@163.com    17048792503</span><br><span class="line">4   Kevin   male    21   bbb@189.com    17023929033</span><br><span class="line">5   Alex    male    18   ccc@xyz.com    18185904230</span><br><span class="line">6   Andy    female  22   ddd@139.com    18923902352</span><br><span class="line">7   Jerry   female  25   exdsa@189.com  18785234906</span><br><span class="line">8   Peter   male    20   bax@qq.com     17729348758</span><br><span class="line">9   Steven  female  23   bc@sohu.com    15947893212</span><br><span class="line">10  Bruce   female  27   bcbd@139.com   13942943905</span><br></pre></td></tr></table></figure><h2 id="ä¸€ã€awkç”¨æ³•å…¥é—¨ğŸ…">ä¸€ã€awkç”¨æ³•å…¥é—¨ğŸ…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;awk_program&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><ul><li>a.txtæ˜¯awkè¦è¯»å–çš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯0ä¸ªæ–‡ä»¶æˆ–è€…1ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ã€‚å½“ç¬¬ä¸€ä¸ªæ–‡ä»¶æ‰§è¡Œå®Œå†æŒ‰ç…§å¾ªåºä¾æ¬¡æ‰§è¡Œã€‚å¦‚æœä¸ç»™å®šä»»ä½•æ–‡ä»¶ï¼Œä½†åˆéœ€è¦è¯»å–æ–‡ä»¶ï¼Œåˆ™è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ã€‚</li><li>å•å¼•å·åŒ…å›´çš„æ˜¯awkä»£ç ï¼Œä¹Ÿç§°ä¸ºawkç¨‹åºã€‚å°½é‡ä½¿ç”¨å•å¼•å·ï¼Œå› ä¸ºåœ¨awkä¸­ç»å¸¸ä½¿ç”¨<code>$</code>ç¬¦å·ï¼Œè€Œ<code>$</code>ç¬¦å·åœ¨Shellä¸­æ˜¯å˜é‡ç¬¦å·ï¼Œå¦‚æœä½¿ç”¨åŒå¼•å·åŒ…å›´awkä»£ç ï¼Œåˆ™<code>$</code>ç¬¦å·ä¼šè¢«Shellè§£æä¸ºå˜é‡ï¼Œç„¶åè¿›è¡ŒShellå˜é‡æ›¿æ¢ã€‚ä½¿ç”¨å•å¼•å·åŒ…å›´awkä»£ç ï¼Œåˆ™ä¼šä½¿<code>$</code>è„±ç¦»Shellçš„é­”æŒï¼Œä½¿å¾—<code>$</code>ç¬¦å·ç•™ç»™äº†awkå»è§£æã€‚</li><li>awkç¨‹åºä¸­ï¼Œå¤§é‡ä½¿ç”¨å¤§æ‹¬å·ï¼Œå¤§æ‹¬å·è¡¨ç¤ºä»£ç å—ï¼Œä»£ç å—ä¸­é—´å¯ä»¥ç›´æ¥è¿ç”¨ï¼Œä»£ç å—å†…éƒ¨å¤šä¸ªè¯­å¥éœ€ä½¿ç”¨åˆ†å·<code>;</code>åˆ†éš”ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">awkè¾“å‡ºç¬¬ä¸€åˆ—ï¼Œä¸æŒ‡å®šè¯»å–çš„æ–‡ä»¶ï¼Œåˆ™åœ¨æ ‡å‡†è¾“å…¥ä¸­è¿›è¡Œè¯»å–ã€‚</span></span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºa.txtä¸­çš„æ¯ä¸€è¡Œ</span></span><br><span class="line">awk &#x27;&#123;print $0&#125;&#x27; a.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤šä¸ªä»£ç å—ï¼Œä»£ç å—ä¸­å¤šä¸ªè¯­å¥ã€‚è¾“å‡ºæ¯è¡Œä¹‹åè¿˜è¾“å‡ºä¸¤è¡Œï¼šhelloè¡Œå’Œworldè¡Œ</span></span><br><span class="line">awk &#x27;&#123;print $0&#125;&#123;print &quot;hello&quot;;print &quot;world&quot;&#125;&#x27; a.txt </span><br></pre></td></tr></table></figure><p>å¯¹äº<code>awk '&#123;print $0&#125;' a.txt</code>ï¼Œå®ƒç±»ä¼¼äºshellçš„whileå¾ªç¯<code>while read line;do echo &quot;$line&quot;;done &lt;a.txt</code>ã€‚awkéšè—äº†è¯»å–æ¯ä¸€è¡Œçš„whileå¾ªç¯ï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–æ¯ä¸€è¡Œï¼Œå…¶ä¸­çš„<code>&#123;print $0&#125;</code>å¯¹åº”äºShellçš„whileå¾ªç¯ä½“<code>echo &quot;$line&quot;</code>éƒ¨åˆ†ã€‚</p><p>ä¸‹é¢å†åˆ†æè¯¥awkå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ol><li>è¯»å–æ–‡ä»¶ç¬¬ä¸€è¡Œ(awké»˜è®¤æŒ‰è¡Œè¯»å–æ–‡ä»¶)</li><li>å°†æ‰€è¯»å–çš„è¡Œèµ‹å€¼ç»™awkçš„å˜é‡<code>$0</code>ï¼Œäºæ˜¯<code>$0</code>ä¸­ä¿å­˜çš„å°±æ˜¯æœ¬æ¬¡æ‰€è¯»å–çš„è¡Œæ•°æ®</li><li>è¿›å…¥ä»£ç å—<code>&#123;print $0&#125;</code>å¹¶æ‰§è¡Œå…¶ä¸­ä»£ç <code>print $0</code>ï¼Œå³è¾“å‡º<code>$0</code>ï¼Œä¹Ÿå³è¾“å‡ºå½“å‰æ‰€è¯»å–çš„è¡Œ</li><li>æ‰§è¡Œå®Œæœ¬æ¬¡ä»£ç ä¹‹åï¼Œè¿›å…¥ä¸‹ä¸€è½®awkå¾ªç¯ï¼šç»§ç»­è¯»å–ä¸‹ä¸€è¡Œ(ç¬¬äºŒè¡Œ)<ul><li>å°†ç¬¬äºŒè¡Œèµ‹å€¼ç»™å˜é‡<code>$0</code></li><li>è¿›å…¥ä»£ç å—æ‰§è¡Œ<code>print $0</code></li><li>æ‰§è¡Œå®Œä»£ç å—åå†æ¬¡è¿›å…¥ä¸‹ä¸€è½®awkå¾ªç¯ï¼Œå³è¯»å–ç¬¬ä¸‰è¡Œï¼Œç„¶åèµ‹å€¼ç»™<code>$0</code>ï¼Œå†æ‰§è¡Œä»£ç å—</li><li>â€¦ä¸æ–­å¾ªç¯ï¼Œç›´åˆ°è¯»å®Œæ–‡ä»¶æ‰€æœ‰æ•°æ®â€¦</li></ul></li><li>é€€å‡ºawk</li></ol><h2 id="äºŒã€BEGIN-å’Œ-END-è¯­å¥å—ğŸ¥•">äºŒã€BEGIN å’Œ END è¯­å¥å—ğŸ¥•</h2><p>awkçš„æ‰€æœ‰ä»£ç (ç›®å‰è¿™ä¹ˆè®¤ä¸º)éƒ½æ˜¯å†™åœ¨è¯­å¥å—ä¸­çš„ã€‚</p><p>æ¯ä¸ªè¯­å¥å—å‰é¢å¯ä»¥æœ‰patternï¼Œæ‰€ä»¥æ ¼å¼ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern1&#123;statement1&#125;pattern2&#123;statement2;statement3;...&#125;</span><br></pre></td></tr></table></figure><p>è¯­å¥å—å¯åˆ†ä¸º3ç±»ï¼šBEGINè¯­å¥å—ã€ENDè¯­å¥å—å’Œmainè¯­å¥å—ã€‚å…¶ä¸­BEGINè¯­å¥å—å’ŒENDè¯­å¥å—éƒ½æ˜¯çš„æ ¼å¼åˆ†åˆ«ä¸º<code>BEGIN&#123;...&#125;</code>å’Œ<code>END&#123;...&#125;</code>ï¼Œè€Œmainè¯­å¥å—æ˜¯ä¸€ç§ç»Ÿç§°ï¼Œå®ƒçš„patternéƒ¨åˆ†æ²¡æœ‰å›ºå®šæ ¼å¼ï¼Œä¹Ÿå¯ä»¥çœç•¥ï¼Œmainä»£ç å—æ˜¯åœ¨è¯»å–æ–‡ä»¶çš„æ¯ä¸€è¡Œçš„æ—¶å€™éƒ½æ‰§è¡Œçš„ä»£ç å—ã€‚</p><p>åˆ†æä¸‹é¢ä¸‰ä¸ªawkå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ä¸€ï¼š</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print &quot;æˆ‘åœ¨å‰é¢&quot;&#125;&#123;print $0&#125;&#x27;</span> a.txt </span><br><span class="line">æˆ‘åœ¨å‰é¢</span><br><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹äºŒ</span></span><br><span class="line">awk <span class="string">&#x27;END&#123;print &quot;æˆ‘åœ¨åé¢&quot;&#125;&#123;print $0&#125;&#x27;</span> a.txt </span><br><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">......</span><br><span class="line">10  Bruce   female  27   bcbd@139.com   13942943905</span><br><span class="line">æˆ‘åœ¨åé¢</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ä¸‰</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print &quot;æˆ‘åœ¨å‰é¢&quot;&#125;&#123;print $0&#125;END&#123;print &quot;æˆ‘åœ¨åé¢&quot;&#125;&#x27;</span> a.txt</span><br><span class="line">æˆ‘åœ¨å‰é¢</span><br><span class="line">ID  name    gender  age  email          phone</span><br><span class="line">......</span><br><span class="line">10  Bruce   female  27   bcbd@139.com   13942943905</span><br><span class="line">æˆ‘åœ¨åé¢</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢3è¡Œå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œå¯æ€»ç»“å‡ºå¦‚ä¸‹æœ‰å…³äºBEGINã€ENDå’Œmainä»£ç å—çš„ç‰¹æ€§ï¼š</p><p><strong>BEGINä»£ç å—ï¼š</strong></p><ul><li>åœ¨è¯»å–æ–‡ä»¶ä¹‹å‰æ‰§è¡Œï¼Œä¸”æ‰§è¡Œä¸€æ¬¡</li><li>åœ¨BEGINä»£ç å—ä¸­ï¼Œæ— æ³•ä½¿ç”¨<code>$0</code>æˆ–å…¶å®ƒä¸€äº›ç‰¹æ®Šå˜é‡</li></ul><p><strong>mainä»£ç å—ï¼š</strong></p><ul><li>è¯»å–æ–‡ä»¶æ—¶å¾ªç¯æ‰§è¡Œï¼Œ(é»˜è®¤æƒ…å†µ)æ¯è¯»å–ä¸€è¡Œï¼Œå°±æ‰§è¡Œä¸€æ¬¡mainä»£ç å—</li><li>mainä»£ç å—å¯æœ‰å¤šä¸ª</li></ul><p><strong>ENDä»£ç å—ï¼š</strong></p><ul><li>åœ¨è¯»å–æ–‡ä»¶å®Œæˆä¹‹åæ‰§è¡Œï¼Œä¸”æ‰§è¡Œä¸€æ¬¡</li><li>æœ‰ENDä»£ç å—ï¼Œå¿…æœ‰è¦è¯»å–çš„æ•°æ®(å¯ä»¥æ˜¯æ ‡å‡†è¾“å…¥)</li><li>ENDä»£ç å—ä¸­å¯ä»¥ä½¿ç”¨<code>$0</code>ç­‰ä¸€äº›ç‰¹æ®Šå˜é‡ï¼Œåªä¸è¿‡è¿™äº›ç‰¹æ®Šå˜é‡ä¿å­˜çš„æ˜¯æœ€åä¸€è½®awkå¾ªç¯çš„æ•°æ®ã€‚</li></ul><h2 id="ä¸‰ã€awkå‘½ä»¤è¡Œç»“æ„å’Œawkè¯­æ³•ç»“æ„ğŸŒ½">ä¸‰ã€awkå‘½ä»¤è¡Œç»“æ„å’Œawkè¯­æ³•ç»“æ„ğŸŒ½</h2><h3 id="1ã€awkå‘½ä»¤è¡Œç»“æ„">1ã€awkå‘½ä»¤è¡Œç»“æ„</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk [ -- ] program-text file ...        (1)</span><br><span class="line">awk -f program-file [ -- ] file ...     (2)</span><br><span class="line">awk -e program-text [ -- ] file ...     (3)</span><br></pre></td></tr></table></figure><ul><li><code>program-text</code> å³ awk å‘½ä»¤è¡Œä¸­çš„ awk ä»£ç éƒ¨åˆ†ï¼Œä¸€èˆ¬ä½¿ç”¨å•å¼•å·åŒ…å›´ã€‚</li><li><code>-f program-file</code> è¡¨ç¤ºå°† awk ä»£ç éƒ¨åˆ†å†™åœ¨æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ <code>-f</code> é€‰é¡¹å»å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ã€‚</li><li><code>-e program-text</code> ä¹Ÿç”¨äºæŒ‡å®š awk ä»£ç ï¼Œæ‰€ä»¥è¯­æ³•(1)å’Œè¯­æ³•(3)æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯æ—¢è¦ä½¿ç”¨ -f åˆè¦åœ¨å‘½ä»¤è¡Œå†™ awk ä»£ç ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>-f</code> å’Œ <code>-e</code> ï¼Œå³ <code>awk -f file -e 'awk_code'</code>ï¼Œè€Œä¸èƒ½æ˜¯ <code>awk -f file 'awk_code'</code>ã€‚</li></ul><h3 id="2ã€awkè¯­æ³•ç»“æ„">2ã€awkè¯­æ³•ç»“æ„</h3><p>awkè¯­æ³•ç»“æ„å³awkä»£ç éƒ¨åˆ†çš„ç»“æ„ã€‚</p><p>awkçš„è¯­æ³•å……æ–¥ç€<code>pattern&#123;action&#125;</code>çš„æ¨¡å¼ï¼Œå®ƒä»¬ç§°ä¸ºawk ruleã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">  BEGIN&#123;n=3&#125; </span></span><br><span class="line"><span class="string">  /^[0-9]/$1&gt;5&#123;$1=333;print $1&#125;</span></span><br><span class="line"><span class="string">  /Alice/&#123;print &quot;Alice&quot;&#125;</span></span><br><span class="line"><span class="string">  END&#123;print &quot;hello&quot;&#125;</span></span><br><span class="line"><span class="string">&#x27;</span> a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·çš„å•è¡Œå¼:</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;n=3&#125; /^[0-9]/&#123;$1&gt;5&#123;$1=333;print $1&#125; /Alice/&#123;print &quot;Alice&quot;&#125; END&#123;print &quot;hello&quot;&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæœ‰BEGINè¯­å¥å—ï¼Œæœ‰ENDè¯­å¥å—ï¼Œè¿˜æœ‰2ä¸ªmainä»£ç å—ï¼Œä¸¤ä¸ªmainä»£ç å—éƒ½ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºpatternã€‚</p><p>å…³äºawkçš„è¯­æ³•ï¼š</p><ul><li>å¤šä¸ª<code>pattern&#123;action&#125;</code>å¯ä»¥ç›´æ¥è¿æ¥è¿ç”¨</li><li>actionä¸­å¤šä¸ªè¯­å¥å¦‚æœå†™åœ¨åŒä¸€è¡Œï¼Œåˆ™éœ€ä½¿ç”¨åˆ†å·åˆ†éš”</li><li>patternéƒ¨åˆ†ç”¨äºç­›é€‰è¡Œï¼Œactionè¡¨ç¤ºåœ¨ç­›é€‰é€šè¿‡åæ‰§è¡Œçš„æ“ä½œ</li><li>patternå’Œactionéƒ½å¯ä»¥çœç•¥<ul><li>çœç•¥ pattern ï¼Œç­‰ä»·äºå¯¹æ¯ä¸€è¡Œæ•°æ®éƒ½æ‰§è¡Œ action<ul><li>ä¾‹å¦‚ï¼š<code>awk '&#123;print $0&#125;' a.txt</code></li></ul></li><li>çœç•¥ä»£ç å— {action} ï¼Œç­‰ä»·äº {print} ï¼Œå³è¾“å‡ºæ‰€æœ‰è¡Œ<ul><li>ä¾‹å¦‚ï¼š<code>awk '/Alice/' a.txt</code> ç­‰ä»·äº <code>awk '/Alice/&#123;print $0&#125;' a.txt</code></li></ul></li><li>çœç•¥ä»£ç å—ä¸­çš„ action ï¼Œè¡¨ç¤ºå¯¹ç­›é€‰çš„è¡Œä»€ä¹ˆéƒ½ä¸åš<ul><li>ä¾‹å¦‚ï¼š<code>awk '/Alice/&#123;&#125;' a.txt</code></li></ul></li><li>pattern{action} ä»»ä½•ä¸€éƒ¨åˆ†éƒ½å¯ä»¥çœç•¥<ul><li>ä¾‹å¦‚:<code>awk '' a.txt</code></li></ul></li></ul></li></ul><h3 id="3ã€pattern-å’Œ-action">3ã€pattern å’Œ action</h3><p>å¯¹äº<code>pattern&#123;action&#125;</code>è¯­å¥ç»“æ„(éƒ½ç§°ä¹‹ä¸ºè¯­å¥å—)ï¼Œå…¶ä¸­çš„patternéƒ¨åˆ†å¯ä»¥ä½¿ç”¨ä¸‹é¢åˆ—å‡ºçš„æ¨¡å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‰¹æ®Špattern</span></span><br><span class="line">BEGIN</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸ƒå°”ä»£ç å—</span></span><br><span class="line">/regular expression/    <span class="comment"># æ­£åˆ™åŒ¹é…æˆåŠŸä¸å¦ /a.*ef/&#123;action&#125;</span></span><br><span class="line">relational expression   <span class="comment"># å³ç­‰å€¼æ¯”è¾ƒã€å¤§å°æ¯”è¾ƒ 3&gt;2&#123;action&#125;</span></span><br><span class="line">pattern &amp;&amp; pattern      <span class="comment"># é€»è¾‘ä¸ 3&gt;2 &amp;&amp; 3&gt;1 &#123;action&#125;</span></span><br><span class="line">pattern || pattern      <span class="comment"># é€»è¾‘æˆ– 3&gt;2 || 3&lt;1 &#123;action&#125;</span></span><br><span class="line">! pattern               <span class="comment"># é€»è¾‘å–å !/a.*ef/&#123;action&#125;</span></span><br><span class="line">(pattern)               <span class="comment"># æ”¹å˜ä¼˜å…ˆçº§</span></span><br><span class="line">pattern ? pattern : pattern  <span class="comment"># ä¸‰ç›®è¿ç®—ç¬¦å†³å®šçš„å¸ƒå°”å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># èŒƒå›´patternï¼Œéå¸ƒå°”ä»£ç å—</span></span><br><span class="line">pattern1, pattern2      <span class="comment"># èŒƒå›´ï¼Œpat1æ‰“å¼€ã€pat2å…³é—­ï¼Œå³flip,flopæ¨¡å¼</span></span><br></pre></td></tr></table></figure><p>actionéƒ¨åˆ†ï¼Œå¯ä»¥æ˜¯ä»»ä½•è¯­å¥ï¼Œä¾‹å¦‚printã€‚</p><h2 id="å››ã€awk-é€‰é¡¹ã€é¢„å®šä¹‰å˜é‡ğŸ¥¦">å››ã€awk é€‰é¡¹ã€é¢„å®šä¹‰å˜é‡ğŸ¥¦</h2><h3 id="1ã€é€‰é¡¹">1ã€é€‰é¡¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-e program-text</span><br><span class="line">--source program-text</span><br><span class="line">æŒ‡å®šawkç¨‹åºè¡¨è¾¾å¼ï¼Œå¯ç»“åˆ-fé€‰é¡¹åŒæ—¶ä½¿ç”¨</span><br><span class="line">åœ¨ä½¿ç”¨äº†-fé€‰é¡¹åï¼Œå¦‚æœä¸ä½¿ç”¨-eï¼Œawk programæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œå®ƒä¼šè¢«å½“ä½œARGVçš„ä¸€ä¸ªå‚æ•°</span><br><span class="line"></span><br><span class="line">-f program-file</span><br><span class="line">--file program-file</span><br><span class="line">ä»æ–‡ä»¶ä¸­è¯»å–awkæºä»£ç æ¥æ‰§è¡Œï¼Œå¯æŒ‡å®šå¤šä¸ª-fé€‰é¡¹</span><br><span class="line"></span><br><span class="line">-F fs</span><br><span class="line">--field-separator fs</span><br><span class="line">æŒ‡å®šè¾“å…¥å­—æ®µåˆ†éš”ç¬¦(FSé¢„å®šä¹‰å˜é‡ä¹Ÿå¯è®¾ç½®)</span><br><span class="line"></span><br><span class="line">-n</span><br><span class="line">--non-decimal-data</span><br><span class="line">è¯†åˆ«æ–‡ä»¶è¾“å…¥ä¸­çš„8è¿›åˆ¶æ•°(0å¼€å¤´)å’Œ16è¿›åˆ¶æ•°(0xå¼€å¤´)</span><br><span class="line">echo &#x27;030&#x27; | awk -n &#x27;&#123;print $1+0&#125;&#x27;</span><br><span class="line"></span><br><span class="line">-o [filename]</span><br><span class="line">æ ¼å¼åŒ–awkä»£ç ã€‚</span><br><span class="line">ä¸æŒ‡å®šfilenameæ—¶ï¼Œåˆ™é»˜è®¤ä¿å­˜åˆ°awkprof.out</span><br><span class="line">æŒ‡å®šä¸º`-`æ—¶ï¼Œè¡¨ç¤ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line"></span><br><span class="line">-v var=val</span><br><span class="line">--assign var=val</span><br><span class="line">åœ¨BEGINä¹‹å‰ï¼Œå£°æ˜å¹¶èµ‹å€¼å˜é‡varï¼Œå˜é‡å¯åœ¨BEGINä¸­ä½¿ç”¨</span><br></pre></td></tr></table></figure><h3 id="2ã€é¢„å®šä¹‰å˜é‡">2ã€é¢„å®šä¹‰å˜é‡</h3><p>é¢„å®šä¹‰å˜é‡åˆ†ä¸ºä¸¤ç±»ï¼šæ§åˆ¶awkå·¥ä½œçš„å˜é‡å’Œæºå¸¦ä¿¡æ¯çš„å˜é‡ã€‚</p><p><strong>ç¬¬ä¸€ç±»ï¼šæ§åˆ¶AWKå·¥ä½œçš„é¢„å®šä¹‰å˜é‡</strong></p><ul><li><code>RS</code>ï¼šè¾“å…¥è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦<code>\n</code></li><li><code>IGNORECASE</code>ï¼šé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„æ­£åˆ™åŒ¹é…ä¸å¿½ç•¥å¤§å°å†™ã€‚è®¾ç½®ä¸ºé0å€¼ï¼ˆä¾‹å¦‚1ï¼‰ï¼Œä¹‹åçš„åŒ¹é…å°†å¿½ç•¥å¤§å°å†™ã€‚ä¾‹å¦‚åœ¨BEGINå—ä¸­å°†å…¶è®¾ç½®ä¸º1ï¼Œå°†ä½¿FSã€RSéƒ½ä»¥å¿½ç•¥å¤§å°å†™çš„æ–¹å¼åˆ†éš”å­—æ®µæˆ–åˆ†éš”record</li><li><code>FS</code>ï¼šè¯»å–è®°å½•åï¼Œåˆ’åˆ†ä¸ºå­—æ®µçš„å­—æ®µåˆ†éš”ç¬¦ã€‚</li><li><code>FIELDWIDTHS</code>ï¼šä»¥æŒ‡å®šå®½åº¦åˆ‡å‰²å­—æ®µè€ŒéæŒ‰ç…§FSã€‚</li><li><code>FPAT</code>ï¼šä»¥æ­£åˆ™åŒ¹é…åŒ¹é…åˆ°çš„ç»“æœä½œä¸ºå­—æ®µï¼Œè€ŒéæŒ‰ç…§FSåˆ’åˆ†ã€‚</li><li><code>OFS</code>ï¼šprintå‘½ä»¤è¾“å‡ºå„å­—æ®µåˆ—è¡¨æ—¶çš„è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ã€‚</li><li><code>ORS</code>ï¼šprintå‘½ä»¤è¾“å‡ºæ•°æ®æ—¶åœ¨å°¾éƒ¨è‡ªåŠ¨æ·»åŠ çš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦<code>\nã€‚</code></li><li><code>CONVFMT</code>ï¼šåœ¨awkä¸­æ•°å€¼éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå°†æ ¹æ®CONVFMTçš„æ ¼å¼æŒ‰ç…§s<code>printf()</code>çš„æ–¹å¼è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚é»˜è®¤å€¼ä¸º<code>%.6gã€‚</code></li><li><code>OFMT</code>ï¼šåœ¨printä¸­ï¼Œæ•°å€¼ä¼šæ ¹æ®OFMTçš„æ ¼å¼æŒ‰ç…§sprintf()çš„æ–¹å¼è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚é»˜è®¤å€¼ä¸º<code>%.6g</code>ã€‚</li></ul><p><strong>ç¬¬äºŒç±»ï¼šæºå¸¦ä¿¡æ¯çš„é¢„å®šä¹‰å˜é‡</strong></p><ul><li><code>FILENAME</code>ï¼šawkå½“å‰æ­£åœ¨å¤„ç†çš„æ–‡ä»¶(å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶)ï¼Œæ‰€ä»¥åœ¨BEGINä¸­è¯¥å˜é‡å€¼ä¸ºç©ºã€‚</li><li><code>ENVIRON</code>ï¼šä¿å­˜äº†Shellçš„ç¯å¢ƒå˜é‡çš„æ•°ç»„ã€‚ä¾‹å¦‚<code>ENVIRON[&quot;HOME&quot;]</code>å°†è¿”å›å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ã€‚</li><li><code>NR</code>:å½“å‰å·²è¯»æ€»è®°å½•æ•°ï¼Œå¤šä¸ªæ–‡ä»¶ä»ä¸ä¼šé‡ç½®ä¸º0ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ç›´å åŠ çš„ã€‚<ul><li>å¯ä»¥ç›´æ¥ä¿®æ”¹NRï¼Œä¸‹æ¬¡è¯»å–è®°å½•æ—¶å°†åœ¨æ­¤ä¿®æ”¹å€¼ä¸Šè‡ªå¢ã€‚</li></ul></li><li><code>FNR</code>:å½“å‰æ­£åœ¨è¯»å–æ–‡ä»¶çš„ç¬¬å‡ æ¡è®°å½•ï¼Œæ¯æ¬¡æ‰“å¼€æ–°æ–‡ä»¶ä¼šé‡ç½®ä¸º0ã€‚<ul><li>å¯ä»¥ç›´æ¥ä¿®æ”¹FNRï¼Œä¸‹æ¬¡è¯»å–è®°å½•æ—¶å°†åœ¨æ­¤ä¿®æ”¹å€¼ä¸Šè‡ªå¢ã€‚</li></ul></li><li><code>NF</code>ï¼šå½“å‰è®°å½•çš„å­—æ®µæ•°ã€‚</li><li><code>RT</code>ï¼šåœ¨è¯»å–è®°å½•æ—¶çœŸæ­£çš„è®°å½•åˆ†éš”ç¬¦ã€‚</li></ul><h2 id="äº”ã€awk-è¯»å–è¡ŒğŸ„">äº”ã€awk è¯»å–è¡ŒğŸ„</h2><h3 id="1ã€è¯¦ç»†åˆ†æ-awk-å¦‚ä½•è¯»å–æ–‡ä»¶">1ã€è¯¦ç»†åˆ†æ awk å¦‚ä½•è¯»å–æ–‡ä»¶</h3><p>awkè¯»å–è¾“å…¥æ–‡ä»¶æ—¶ï¼Œæ¯æ¬¡è¯»å–ä¸€æ¡è®°å½•(record)(é»˜è®¤æƒ…å†µä¸‹æŒ‰è¡Œè¯»å–ï¼Œæ‰€ä»¥æ­¤æ—¶è®°å½•å°±æ˜¯è¡Œ)ã€‚æ¯è¯»å–ä¸€æ¡è®°å½•ï¼Œå°†å…¶ä¿å­˜åˆ°<code>$0</code>ä¸­ï¼Œç„¶åæ‰§è¡Œä¸€æ¬¡mainä»£ç æ®µã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $0&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ç©ºæ–‡ä»¶ï¼Œåˆ™å› ä¸ºæ— æ³•è¯»å–åˆ°ä»»ä½•ä¸€æ¡è®°å½•ï¼Œå°†å¯¼è‡´ç›´æ¥å…³é—­æ–‡ä»¶ï¼Œè€Œä¸ä¼šè¿›å…¥mainä»£ç æ®µã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> x.log  <span class="comment"># åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print &quot;hello world&quot;&#125;&#x27;</span> x.log</span><br></pre></td></tr></table></figure><p>å¯è®¾ç½®è¡¨ç¤ºè¾“å…¥è®°å½•åˆ†éš”ç¬¦çš„é¢„å®šä¹‰å˜é‡RS(Record Separator)æ¥æ”¹å˜æ¯æ¬¡è¯»å–çš„è®°å½•æ¨¡å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RS=&quot;\n&quot; ã€ RS=&quot;m&quot;</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;RS=&quot;\n&quot;&#125;&#123;print $0&#125;&#x27;</span> a.txt</span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;RS=&quot;m&quot;&#125;&#123;print $0&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><p>RSé€šå¸¸è®¾ç½®åœ¨BEGINä»£ç å—ä¸­ï¼Œå› ä¸ºè¦å…ˆäºè¯»å–æ–‡ä»¶å°±ç¡®å®šå¥½RSåˆ†éš”ç¬¦ã€‚</p><blockquote><p>RSæŒ‡å®šè¾“å…¥è®°å½•åˆ†éš”ç¬¦æ—¶ï¼Œæ‰€è¯»å–çš„è®°å½•ä¸­æ˜¯ä¸åŒ…å«åˆ†éš”ç¬¦å­—ç¬¦çš„ã€‚ä¾‹å¦‚<code>RS=&quot;a&quot;</code>ï¼Œåˆ™<code>$0</code>ä¸­ä¸€å®šä¸å¯èƒ½å‡ºç°å­—ç¬¦aã€‚</p></blockquote><p>RSæœ‰ä¸¤ç§å¯èƒ½æƒ…å†µï¼š</p><ul><li>RSä¸ºå•ä¸ªå­—ç¬¦ï¼šç›´æ¥ä½¿ç”¨è¯¥å­—ç¬¦åˆ†å‰²è®°å½•</li><li>RSä¸ºå¤šä¸ªå­—ç¬¦ï¼šå°†å…¶å½“ä½œæ­£åˆ™è¡¨è¾¾å¼ï¼Œåªè¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¦å·ï¼Œéƒ½ç”¨æ¥åˆ†å‰²è®°å½•</li></ul><p>ç‰¹æ®Šçš„RSå€¼ç”¨æ¥è§£å†³ç‰¹æ®Šè¯»å–éœ€æ±‚ï¼š</p><ul><li><code>RS=&quot;&quot;</code>ï¼šæŒ‰æ®µè½è¯»å–</li><li><code>RS=&quot;\0&quot;</code>ï¼šä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ï¼Œä½†æœ‰äº›ç‰¹æ®Šæ–‡ä»¶ä¸­åŒ…å«äº†ç©ºå­—ç¬¦<code>\0</code></li><li><code>RS=&quot;^$&quot;</code>ï¼šçœŸæ­£çš„ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ï¼Œå› ä¸ºéç©ºæ–‡ä»¶ä¸å¯èƒ½åŒ¹é…æˆåŠŸ</li><li><code>RS=&quot;\n+&quot;</code>ï¼šæŒ‰è¡Œè¯»å–ï¼Œä½†å¿½ç•¥æ‰€æœ‰ç©ºè¡Œ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‰æ®µè½è¯»å–ï¼šRS=&#x27;&#x27;</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;RS=&#x27;</span><span class="string">&#x27;&#125;&#123;print $0&quot;&quot;&#125;&#x27;</span> a.txt     </span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ï¼šRS=&#x27;\0&#x27; RS=&quot;^$&quot;</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;RS=&#x27;</span>\0<span class="string">&#x27;&#125;&#123;print $0&quot;&quot;&#125;&#x27;</span> a.txt     </span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;RS=&#x27;</span>^$<span class="string">&#x27;&#125;&#123;print $0&quot;&quot;&#125;&#x27;</span> a.txt  </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥ç©ºè¡Œï¼šRS=&#x27;\n+&#x27;</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;RS=&#x27;</span>\n+<span class="string">&#x27;&#125;&#123;print $0&quot;&quot;&#125;&#x27;</span> a.txt </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥å¤§å°å†™ï¼šé¢„å®šä¹‰å˜é‡IGNORECASEè®¾ç½®ä¸ºé0å€¼</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;IGNORECASE=1&#125;&#123;print $0&quot;&quot;&#125;&#x27;</span> RS=<span class="string">&#x27;[ab]&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><blockquote><p>é¢„å®šä¹‰å˜é‡RTï¼š</p><p>åœ¨awkæ¯æ¬¡è¯»å®Œä¸€æ¡è®°å½•æ—¶ï¼Œä¼šè®¾ç½®ä¸€ä¸ªç§°ä¸ºRTçš„é¢„å®šä¹‰å˜é‡ï¼Œè¡¨ç¤ºRecord Terminationã€‚</p><p>å½“RSä¸ºå•ä¸ªå­—ç¬¦æ—¶ï¼ŒRTçš„å€¼å’ŒRSçš„å€¼æ˜¯ç›¸åŒçš„ã€‚</p><p>å½“RSä¸ºå¤šä¸ªå­—ç¬¦(æ­£åˆ™è¡¨è¾¾å¼)æ—¶ï¼Œåˆ™RTè®¾ç½®ä¸ºæ­£åˆ™åŒ¹é…åˆ°è®°å½•åˆ†éš”ç¬¦ä¹‹åï¼ŒçœŸæ­£ç”¨äºåˆ’åˆ†è®°å½•æ—¶çš„å­—ç¬¦ã€‚</p><p>å½“æ— æ³•åŒ¹é…åˆ°è®°å½•åˆ†éš”ç¬¦æ—¶ï¼ŒRTè®¾ç½®ä¸ºæ§åˆ¶ç©ºå­—ç¬¦ä¸²(å³é»˜è®¤çš„åˆå§‹å€¼)ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ä¸€</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;RS=&quot;(fe)?male&quot;&#125;&#123;print RT&#125;&#x27;</span> a.txt</span><br><span class="line">male</span><br><span class="line">female</span><br><span class="line">......</span><br><span class="line"><span class="comment"># ç¤ºä¾‹äºŒ</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;RS=&quot;m&quot;&#125;&#123;print RT&#125;&#x27;</span> a.txt</span><br><span class="line">m</span><br><span class="line">m</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸¤ç§è¡Œå·ï¼šNRå’ŒFNR">2ã€ä¸¤ç§è¡Œå·ï¼šNRå’ŒFNR</h3><p>åœ¨è¯»å–æ¯æ¡è®°å½•ä¹‹åï¼Œå°†å…¶èµ‹å€¼ç»™$0ï¼ŒåŒæ—¶è¿˜ä¼šè®¾ç½®NRã€FNRã€RTã€‚</p><ul><li>NRï¼šæ‰€æœ‰æ–‡ä»¶çš„è¡Œå·è®¡æ•°å™¨</li><li>FNRï¼šæ˜¯å„ä¸ªæ–‡ä»¶çš„è¡Œå·è®¡æ•°å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print NR&#125;&#x27; a.txt a.txt</span><br><span class="line">awk &#x27;&#123;print FNR&#125;&#x27; a.txt a.txt</span><br></pre></td></tr></table></figure><h3 id="3ã€-0é‡æ„-1-1">3ã€$0é‡æ„ -&gt; <code>$1=$1</code></h3><p>æ³¨æ„ä¸‹é¢çš„åˆ†å‰²å’Œè®¡ç®—ä¸¤è¯ï¼šåˆ†å‰²è¡¨ç¤ºä½¿ç”¨FSï¼ˆfield Separatorï¼‰ï¼Œè®¡ç®—è¡¨ç¤ºä½¿ç”¨é¢„å®šä¹‰å˜é‡OFSï¼ˆOutput Field Separatorï¼‰ã€‚</p><ol><li>ä¿®æ”¹<code>$0</code>ï¼Œå°†ä½¿ç”¨<code>FS</code>é‡æ–°åˆ†å‰²å­—æ®µï¼Œæ‰€ä»¥ä¼šå½±å“<code>$1ã€$2...</code></li><li>ä¿®æ”¹<code>$1ã€$2</code>ï¼Œå°†æ ¹æ®<code>$1</code>åˆ°<code>$NF</code>ç­‰å„å­—æ®µæ¥é‡æ–°è®¡ç®—<code>$0</code>ï¼Œå³ä½¿æ˜¯<code>$1 = $1</code>è¿™æ ·çš„åŸå€¼ä¸å˜çš„ä¿®æ”¹ï¼Œä¹Ÿä¸€æ ·ä¼šé‡æ–°è®¡ç®—<code>$0</code></li><li>ä¸ºä¸å­˜åœ¨çš„å­—æ®µèµ‹å€¼ï¼Œå°†æ–°å¢å­—æ®µå¹¶æŒ‰éœ€ä½¿ç”¨ç©ºå­—ç¬¦ä¸²å¡«å……ä¸­é—´çš„å­—æ®µï¼Œå¹¶ä½¿ç”¨<code>OFS</code>é‡æ–°è®¡ç®—<code>$0</code>ã€‚<br><code>awk 'BEGIN&#123;OFS=&quot;-&quot;&#125;&#123;$(NF+2)=5;print $0&#125;' a.txt</code></li><li>å¢åŠ NFå€¼ï¼Œå°†ä½¿ç”¨ç©ºå­—ç¬¦ä¸²æ–°å¢å­—æ®µï¼Œå¹¶ä½¿ç”¨<code>OFS</code>é‡æ–°è®¡ç®—<code>$0</code><br><code>awk 'BEGIN&#123;OFS=&quot;-&quot;&#125;&#123;NF+=3;print $0&#125;' a.txt</code></li><li>å‡å°NFå€¼ï¼Œå°†ä¸¢å¼ƒä¸€å®šæ•°é‡çš„å°¾éƒ¨å­—æ®µï¼Œå¹¶ä½¿ç”¨<code>OFS</code>é‡æ–°è®¡ç®—<code>$0</code><br><code>awk 'BEGIN&#123;OFS=&quot;-&quot;&#125;&#123;NF-=3;print $0&#125;' a.txt</code></li></ol><p>å½“è¯»å–ä¸€æ¡recordä¹‹åï¼Œå°†åŸåŸæœ¬æœ¬åœ°è¢«ä¿å­˜åˆ°<code>$0</code>å½“ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $0&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œåªè¦å‡ºç°äº†ä¸Šé¢æ‰€è¯´çš„ä»»ä½•ä¸€ç§å¯¼è‡´<code>$0</code>é‡æ–°è®¡ç®—çš„æ“ä½œï¼Œéƒ½ä¼šä½¿ç”¨<code>OFS</code>å»é‡å»º<code>$0</code>ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæ²¡æœ‰å¯¼è‡´<code>$0</code>é‡å»ºï¼Œ<code>$0</code>å°±ä¸€ç›´æ˜¯åŸåŸæœ¬æœ¬çš„æ•°æ®ï¼Œæ‰€ä»¥æŒ‡å®šOFSä¹Ÿæ— æ•ˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;OFS=&quot;-&quot;&#125;&#123;print $0&#125;&#x27; a.txt  # OFSæ­¤å¤„æ— æ•ˆ</span><br></pre></td></tr></table></figure><p>å½“<code>$0</code>é‡å»ºåï¼Œå°†è‡ªåŠ¨ä½¿ç”¨OFSé‡å»ºï¼Œæ‰€ä»¥å³ä½¿æ²¡æœ‰æŒ‡å®šOFSï¼Œå®ƒä¹Ÿä¼šé‡‡ç”¨é»˜è®¤å€¼(ç©ºæ ¼)è¿›è¡Œé‡å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;$1=$1;print $0&#125;&#x27;  a.txt  # è¾“å‡ºæ—¶å°†ä»¥ç©ºæ ¼åˆ†éš”å„å­—æ®µ</span><br><span class="line">awk &#x27;&#123;print $0;$1=$1;print $0&#125;&#x27; OFS=&quot;-&quot; a.txt</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡å»º<code>$0</code>ä¹‹åï¼Œå†å»ä¿®æ”¹OFSï¼Œå°†å¯¹å½“å‰è¡Œæ— æ•ˆï¼Œä½†å¯¹ä¹‹åçš„è¡Œæœ‰æ•ˆã€‚æ‰€ä»¥å¦‚æœä¹Ÿè¦å¯¹å½“å‰è¡Œç”Ÿæ•ˆï¼Œéœ€è¦å†æ¬¡é‡å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OFSå¯¹ç¬¬ä¸€è¡Œæ— æ•ˆ</span></span><br><span class="line">awk &#x27;&#123;$4+=10;OFS=&quot;-&quot;;print $0&#125;&#x27; a.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹æ‰€æœ‰è¡Œæœ‰æ•ˆ</span></span><br><span class="line">awk &#x27;&#123;$4+=10;OFS=&quot;-&quot;;$1=$1;print $0&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ä¸ºå­—æ®µå˜é‡èµ‹å€¼æ—¶ï¼Œå³ã€‚å€¼ä¸º <code>$1</code> åˆ†é…ç»™å­—æ®µ <code>$1</code>ï¼Œawk å®é™…ä¸Šé€šè¿‡ç”¨é»˜è®¤å­—æ®µåˆ†éš”ç¬¦ï¼ˆæˆ– OFSï¼‰ ç©ºé—´è¿æ¥å®ƒä»¬æ¥é‡å»ºå…¶ <code>$0</code>ã€‚</p><p>æŠ€å·§1ï¼š<code>$0</code>é‡å»ºã€‚ä¾‹å¦‚ï¼Œä¸‹é¢é€šè¿‡é‡å»º<code>$0</code>çš„æŠ€å·§æ¥å®ç°å»é™¤è¡Œé¦–è¡Œå°¾ç©ºæ ¼å¹¶å‹ç¼©ä¸­é—´ç©ºæ ¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;   a  b  c   d   &quot;</span> | awk <span class="string">&#x27;&#123;$1=$1;print&#125;&#x27;</span></span></span><br><span class="line">a b c d</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;     a   b  c   d   &quot;</span> | awk <span class="string">&#x27;&#123;$1=$1;print&#125;&#x27;</span> OFS=<span class="string">&quot;-&quot;</span></span>            </span><br><span class="line">a-b-c-d</span><br></pre></td></tr></table></figure><p>æŠ€å·§2ï¼šæ·»åŠ <code>1</code>å¿«æ·æ–¹å¼ã€‚1æ˜¯æ‰“å°å½“å‰è®°å½•çš„å¸¸è§AWKæŠ€å·§ï¼Œç›¸å½“äº<code>&#123;print $0&#125;</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥ä¸‹ä¸‰æ¡å‘½ä»¤ç­‰ä»·ï¼Œè¾“å‡ºç›¸åŒç»“æœ</span></span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;abc&quot;&#125;1&#x27; a.txt</span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;abc&quot;&#125;&#123;print&#125;&#x27; a.txt </span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;abc&quot;&#125;&#123;print $0&#125;&#x27; a.txt </span><br></pre></td></tr></table></figure><h2 id="å…­ã€è¯¦ç»†åˆ†æawkå­—æ®µåˆ†å‰²ğŸ¼">å…­ã€è¯¦ç»†åˆ†æawkå­—æ®µåˆ†å‰²ğŸ¼</h2><p>awkè¯»å–æ¯ä¸€æ¡è®°å½•ä¹‹åï¼Œä¼šå°†å…¶èµ‹å€¼ç»™<code>$0</code>ï¼ŒåŒæ—¶è¿˜ä¼šå¯¹è¿™æ¡è®°å½•æŒ‰ç…§<strong>é¢„å®šä¹‰å˜é‡FS</strong>åˆ’åˆ†å­—æ®µï¼Œå°†åˆ’åˆ†å¥½çš„å„ä¸ªå­—æ®µåˆ†åˆ«èµ‹å€¼ç»™<code>$1 $2 $3 $4...$N</code>ï¼ŒåŒæ—¶å°†åˆ’åˆ†çš„å­—æ®µæ•°é‡èµ‹å€¼ç»™<strong>é¢„å®šä¹‰å˜é‡NF</strong>ã€‚</p><h3 id="1ã€å¼•ç”¨å­—æ®µçš„æ–¹å¼">1ã€å¼•ç”¨å­—æ®µçš„æ–¹å¼</h3><p><code>$N</code>å¼•ç”¨å­—æ®µï¼š</p><ul><li><code>N=0</code>ï¼šå³<code>$0</code>ï¼Œå¼•ç”¨è®°å½•æœ¬èº«</li><li><code>0&lt;N&lt;=NF</code>ï¼šå¼•ç”¨å¯¹åº”å­—æ®µ</li><li><code>N&gt;NF</code>ï¼šè¡¨ç¤ºå¼•ç”¨ä¸å­˜åœ¨çš„å­—æ®µï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²</li><li><code>N&lt;0</code>ï¼šæŠ¥é”™</li></ul><p>å¯ä½¿ç”¨å˜é‡æˆ–è®¡ç®—çš„æ–¹å¼æŒ‡å®šè¦è·å–çš„å­—æ®µåºå·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;n = 5;print $n&#125;&#x27; a.txt</span><br><span class="line">awk &#x27;&#123;print $(2+2)&#125;&#x27; a.txt   # æ‹¬å·å¿…ä¸å¯å°‘ï¼Œç”¨äºæ”¹å˜ä¼˜å…ˆçº§</span><br><span class="line">awk &#x27;&#123;print $(NF-3)&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="2ã€åˆ†å‰²å­—æ®µçš„æ–¹å¼">2ã€åˆ†å‰²å­—æ®µçš„æ–¹å¼</h3><p>è¯»å–recordä¹‹åï¼Œå°†ä½¿ç”¨é¢„å®šä¹‰å˜é‡FSã€FIELDWIDTHSæˆ–FPATä¸­çš„ä¸€ç§æ¥åˆ†å‰²å­—æ®µã€‚åˆ†å‰²å®Œæˆä¹‹åï¼Œå†è¿›å…¥mainä»£ç æ®µ(æ‰€ä»¥ï¼Œåœ¨mainä¸­è®¾ç½®FSå¯¹æœ¬æ¬¡å·²ç»è¯»å–çš„recordæ˜¯æ²¡æœ‰å½±å“çš„ï¼Œä½†ä¼šå½±å“ä¸‹æ¬¡è¯»å–)ã€‚</p><h4 id="ï¼ˆ1ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼-ä¸€-ï¼šFSæˆ–-F">ï¼ˆ1ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼(ä¸€)ï¼šFSæˆ–-F</h4><p><code>FS</code>æˆ–è€…<code>-F</code>ï¼šå­—æ®µåˆ†éš”ç¬¦</p><ul><li>FSä¸ºå•ä¸ªå­—ç¬¦æ—¶ï¼Œè¯¥å­—ç¬¦å³ä¸ºå­—æ®µåˆ†éš”ç¬¦</li><li>FSä¸ºå¤šä¸ªå­—ç¬¦æ—¶ï¼Œåˆ™é‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦</li><li>ç‰¹æ®Šçš„ï¼Œä¹Ÿæ˜¯FSé»˜è®¤çš„æƒ…å†µï¼Œ<strong>FSä¸ºå•ä¸ªç©ºæ ¼æ—¶ï¼Œå°†ä»¥è¿ç»­çš„ç©ºç™½ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ï¼‰ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦</strong></li><li>ç‰¹æ®Šçš„ï¼ŒFSä¸ºç©ºå­—ç¬¦ä¸²â€â€æ—¶ï¼Œå°†å¯¹æ¯ä¸ªå­—ç¬¦éƒ½è¿›è¡Œåˆ†éš”ï¼Œå³æ¯ä¸ªå­—ç¬¦éƒ½ä½œä¸ºä¸€ä¸ªå­—æ®µ</li><li>è®¾ç½®é¢„å®šä¹‰å˜é‡IGNORECASEä¸ºéé›¶å€¼ï¼Œæ­£åˆ™åŒ¹é…æ—¶è¡¨ç¤ºå¿½ç•¥å¤§å°å†™(åªå½±å“æ­£åˆ™ï¼Œæ‰€ä»¥FSä¸ºå•å­—æ—¶æ— å½±å“)</li><li>å¦‚æœrecordä¸­æ— æ³•æ‰¾åˆ°FSæŒ‡å®šçš„åˆ†éš”ç¬¦(ä¾‹å¦‚å°†FSè®¾ç½®ä¸ºâ€\nâ€)ï¼Œåˆ™æ•´ä¸ªè®°å½•ä½œä¸ºä¸€ä¸ªå­—æ®µï¼Œå³<code>$1</code>å’Œ<code>$0</code>ç›¸ç­‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­—æ®µåˆ†éš”ç¬¦æŒ‡å®šä¸ºå•ä¸ªå­—ç¬¦</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;&#123;print $1&#125;&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—æ®µåˆ†éš”ç¬¦æŒ‡å®šä¸ºæ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;FS=&quot; +|@&quot;&#125;&#123;print $1,$2,$3,$4,$5,$6&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼-äºŒ-ï¼šFIELDWIDTHSï¼ˆäº†è§£ï¼Œgawkæ”¯æŒï¼‰">ï¼ˆ2ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼(äºŒ)ï¼šFIELDWIDTHSï¼ˆäº†è§£ï¼Œgawkæ”¯æŒï¼‰</h4><p>æŒ‡å®šé¢„å®šä¹‰å˜é‡FIELDWIDTHSæŒ‰å­—ç¬¦å®½åº¦åˆ†å‰²å­—æ®µï¼Œè¿™æ˜¯gawkæä¾›çš„é«˜çº§åŠŸèƒ½ã€‚åœ¨å¤„ç†æŸå­—æ®µç¼ºå¤±æ—¶éå¸¸å¥½ç”¨ã€‚</p><p>ç”¨æ³•ï¼š</p><ul><li>FIELDWIDTHS=â€œ3 5 6 9â€ è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—æ®µ3å­—ç¬¦ï¼Œç¬¬äºŒä¸ªå­—æ®µ5å­—ç¬¦â€¦</li><li>FIELDWIDTHS=â€œ8 1:5 6 2:33â€ è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—æ®µè¯»8ä¸ªå­—ç¬¦ï¼Œè·³è¿‡ä¸€ä¸ªå­—ç¬¦å†è¯»5ä¸ªå­—ç¬¦ä½œä¸ºç¬¬äºŒä¸ªå­—æ®µï¼Œç„¶åè¯»6ä¸ªå­—ç¬¦ä½œä¸ºç¬¬ä¸‰ä¸ªå­—æ®µã€‚æœ€åè·³è¿‡2ä¸ªå­—ç¬¦å†è¯»33ä¸ªå­—ç¬¦ä½œä¸ºç¬¬å››ä¸ªå­—æ®µï¼ˆå¦‚æœä¸è¶³33ä¸ªå­—ç¬¦ï¼Œåˆ™è¯»åˆ°ç»“å°¾ï¼‰</li><li>FIELDWIDTHS=â€œ2 3 *â€ è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—æ®µ2ä¸ªå­—ç¬¦ï¼Œç¬¬äºŒä¸ªå­—æ®µ3ä¸ªå­—ç¬¦ï¼Œç¬¬ä¸‰ä¸ªå­—ç¬¦å‰©ä½™æ‰€æœ‰å­—ç¬¦ï¼Œæ˜Ÿå·åªèƒ½æ”¾åœ¨æœ€åï¼Œä¸”åªèƒ½å•ç‹¬ä½¿ç”¨ï¼Œè¡¨ç¤ºå‰©ä½™æ‰€æœ‰ã€‚</li></ul><p>ç¤ºä¾‹1ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ²¡å–å®Œçš„å­—ç¬¦ä¸²DDDè¢«ä¸¢å¼ƒï¼Œä¸”NF=3</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;FIELDWIDTHS=&quot;2 3 2&quot;&#125;&#123;print $1,$2,$3,$4&#125;&#x27;</span> &lt;&lt;&lt;<span class="string">&quot;AABBBCCDDDD&quot;</span></span><br><span class="line">AA BBB CC </span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²ä¸å¤Ÿé•¿åº¦æ—¶æ— è§†</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;FIELDWIDTHS=&quot;2 3 2 100&quot;&#125;&#123;print $1,$2,$3,$4&quot;-&quot;&#125;&#x27;</span> &lt;&lt;&lt;<span class="string">&quot;AABBBCCDDDD&quot;</span></span><br><span class="line">AA BBB CC DDDD-</span><br><span class="line"></span><br><span class="line"><span class="comment"># *å·å–å‰©ä½™æ‰€æœ‰ï¼ŒNF=3</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;FIELDWIDTHS=&quot;2 3 *&quot;&#125;&#123;print $1,$2,$3&#125;&#x27;</span> &lt;&lt;&lt;<span class="string">&quot;AABBBCCDDDD&quot;</span>      </span><br><span class="line">AA BBB CCDDDD</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—æ®µæ•°å¤šäº†ï¼Œåˆ™å–å®Œå­—ç¬¦ä¸²å³å¯ï¼ŒNF=2</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;FIELDWIDTHS=&quot;2 30 *&quot;&#125;&#123;print $1,$2,NF&#125;&#x27;</span> &lt;&lt;&lt;<span class="string">&quot;AABBBCCDDDD&quot;</span>  </span><br><span class="line">AA BBBCCDDDD 2</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹2ï¼šå¤„ç†æŸäº›å­—æ®µç¼ºå¤±çš„æ•°æ®ã€‚</p><p>å¦‚æœæŒ‰ç…§å¸¸è§„çš„FSè¿›è¡Œå­—æ®µåˆ†å‰²ï¼Œåˆ™å¯¹äºç¼ºå¤±å­—æ®µçš„è¡Œå’Œæ²¡æœ‰ç¼ºå¤±å­—æ®µçš„è¡Œå¾ˆéš¾ç»Ÿä¸€å¤„ç†ï¼Œä½†ä½¿ç”¨FIELDWIDTHSåˆ™éå¸¸æ–¹ä¾¿ã€‚</p><p>å› ä¸ºemailå­—æ®µæœ‰çš„æ˜¯ç©ºå­—æ®µï¼Œæ‰€ä»¥ç›´æ¥ç”¨FSåˆ’åˆ†å­—æ®µä¸ä¾¿å¤„ç†ã€‚å¯ä½¿ç”¨FIELDWIDTHSã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­—æ®µ1ï¼š4å­—ç¬¦</span></span><br><span class="line"><span class="comment"># å­—æ®µ2ï¼š8å­—ç¬¦</span></span><br><span class="line"><span class="comment"># å­—æ®µ3ï¼š8å­—ç¬¦</span></span><br><span class="line"><span class="comment"># å­—æ®µ4ï¼š2å­—ç¬¦</span></span><br><span class="line"><span class="comment"># å­—æ®µ5ï¼šå…ˆè·³è¿‡3å­—ç¬¦ï¼Œå†è¯»13å­—ç¬¦ï¼Œè¯¥å­—æ®µ13å­—ç¬¦</span></span><br><span class="line"><span class="comment"># å­—æ®µ6ï¼šå…ˆè·³è¿‡2å­—ç¬¦ï¼Œå†è¯»11å­—ç¬¦ï¼Œè¯¥å­—æ®µ11å­—ç¬¦</span></span><br><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">BEGIN&#123;FIELDWIDTHS=&quot;4 8 8 2 3:13 2:11&quot;&#125;</span></span><br><span class="line"><span class="string">NR&gt;1&#123;</span></span><br><span class="line"><span class="string">    print &quot;&lt;&quot;$1&quot;&gt;&quot;,&quot;&lt;&quot;$2&quot;&gt;&quot;,&quot;&lt;&quot;$3&quot;&gt;&quot;,&quot;&lt;&quot;$4&quot;&gt;&quot;,&quot;&lt;&quot;$5&quot;&gt;&quot;,&quot;&lt;&quot;$6&quot;&gt;&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœemailä¸ºç©ºï¼Œåˆ™è¾“å‡ºå®ƒ</span></span><br><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">BEGIN&#123;FIELDWIDTHS=&quot;4 8 8 2 3:13 2:11&quot;&#125;</span></span><br><span class="line"><span class="string">NR&gt;1&#123;</span></span><br><span class="line"><span class="string">    if($5 ~ /^ +$/)&#123;print $0&#125;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼-ä¸‰-ï¼šFPATï¼ˆäº†è§£ï¼Œgawkæ”¯æŒï¼‰">ï¼ˆ3ï¼‰åˆ’åˆ†å­—æ®µæ–¹å¼(ä¸‰)ï¼šFPATï¼ˆäº†è§£ï¼Œgawkæ”¯æŒï¼‰</h4><p>FSæ˜¯æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ï¼Œæ¥å–å¾—é™¤åˆ†éš”ç¬¦å¤–çš„éƒ¨åˆ†ä½œä¸ºå­—æ®µã€‚</p><p>FPATæ˜¯å–å¾—åŒ¹é…çš„å­—ç¬¦éƒ¨åˆ†ä½œä¸ºå­—æ®µã€‚å®ƒæ˜¯gawkæä¾›çš„ä¸€ä¸ªé«˜çº§åŠŸèƒ½ã€‚</p><p>FPATæ ¹æ®æŒ‡å®šçš„æ­£åˆ™æ¥å…¨å±€åŒ¹é…recordï¼Œç„¶åå°†æ‰€æœ‰åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ç»„æˆ<code>$1ã€$2...</code>ï¼Œä¸ä¼šä¿®æ”¹<code>$0</code>ã€‚</p><ul><li><code>awk 'BEGIN&#123;FPAT=&quot;[0-9]+&quot;&#125;&#123;print $3&quot;-&quot;&#125;' a.txt</code></li><li>ä¹‹åå†è®¾ç½®FSæˆ–FPATï¼Œè¯¥å˜é‡å°†å¤±æ•ˆ</li></ul><p>FPATå¸¸ç”¨äºå­—æ®µä¸­åŒ…å«äº†å­—æ®µåˆ†éš”ç¬¦çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼ŒCSVæ–‡ä»¶ä¸­çš„ä¸€è¡Œæ•°æ®å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Robbins,Arnold,<span class="string">&quot;1234 A Pretty Street, NE&quot;</span>,MyTown,MyState,12345-6789,USA</span><br></pre></td></tr></table></figure><p>å…¶ä¸­é€—å·åˆ†éš”æ¯ä¸ªå­—æ®µï¼Œä½†åŒå¼•å·åŒ…å›´çš„æ˜¯ä¸€ä¸ªå­—æ®µæ•´ä½“ï¼Œå³ä½¿å…¶ä¸­æœ‰é€—å·ã€‚</p><p>è¿™æ—¶ä½¿ç”¨FPATæ¥åˆ’åˆ†å„å­—æ®µæ¯”ä½¿ç”¨FSè¦æ–¹ä¾¿çš„å¤šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;Robbins,Arnold,&quot;1234 A Pretty Street, NE&quot;,MyTown,MyState,12345-6789,USA&#x27;</span> |\</span><br><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">    BEGIN&#123;FPAT=&quot;[^,]*|(\&quot;[^\&quot;]*\&quot;)&quot;&#125;</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        for (i=1;i&lt;NF;i++)&#123;</span></span><br><span class="line"><span class="string">            print &quot;&lt;&quot;$i&quot;&gt;&quot;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œpatsplit()å‡½æ•°å’ŒFPATçš„åŠŸèƒ½ä¸€æ ·ã€‚</p><h2 id="ä¸ƒã€awkç­›é€‰è¡Œå’Œå¤„ç†å­—æ®µğŸ¦‰">ä¸ƒã€awkç­›é€‰è¡Œå’Œå¤„ç†å­—æ®µğŸ¦‰</h2><h3 id="1ã€ç­›é€‰è¡Œ">1ã€ç­›é€‰è¡Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ ¹æ®è¡Œå·ç­›é€‰</span></span><br><span class="line">awk <span class="string">&#x27;NR==2&#x27;</span> a.txt   <span class="comment"># ç­›é€‰å‡ºç¬¬äºŒè¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;NR&gt;=2&#x27;</span> a.txt   <span class="comment"># è¾“å‡ºç¬¬2è¡Œå’Œä¹‹åçš„è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ç­›é€‰æ•´è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;/qq.com/&#x27;</span> a.txt       <span class="comment"># è¾“å‡ºå¸¦æœ‰qq.comçš„è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;$0 ~ /qq.com/&#x27;</span> a.txt  <span class="comment"># ç­‰ä»·äºä¸Šé¢å‘½ä»¤</span></span><br><span class="line">awk <span class="string">&#x27;/^[^@]+$/&#x27;</span> a.txt      <span class="comment"># è¾“å‡ºä¸åŒ…å«@ç¬¦å·çš„è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;!/@/&#x27;</span> a.txt           <span class="comment"># è¾“å‡ºä¸åŒ…å«@ç¬¦å·çš„è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ ¹æ®å­—æ®µæ¥ç­›é€‰è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;($4+0) &gt; 24&#123;print $0&#125;&#x27;</span> a.txt  <span class="comment"># è¾“å‡ºç¬¬4å­—æ®µå¤§äº24çš„è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;$5 ~ /qq.com/&#x27;</span> a.txt   <span class="comment"># è¾“å‡ºç¬¬5å­—æ®µåŒ…å«qq.comçš„è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å°†å¤šä¸ªç­›é€‰æ¡ä»¶ç»“åˆèµ·æ¥è¿›è¡Œç­›é€‰</span></span><br><span class="line">awk <span class="string">&#x27;NR&gt;=2 &amp;&amp; NR&lt;=7&#x27;</span> a.txt </span><br><span class="line">awk <span class="string">&#x27;$3==&quot;male&quot; &amp;&amp; $6 ~ /^170/&#x27;</span> a.txt       </span><br><span class="line">awk <span class="string">&#x27;$3==&quot;male&quot; || $6 ~ /^170/&#x27;</span> a.txt  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æŒ‰ç…§èŒƒå›´è¿›è¡Œç­›é€‰ flip flop</span></span><br><span class="line"><span class="comment"># pattern1,pattern2&#123;action&#125;</span></span><br><span class="line">awk <span class="string">&#x27;NR==2,NR==7&#x27;</span> a.txt        <span class="comment"># è¾“å‡ºç¬¬2åˆ°ç¬¬7è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;NR==2,$6 ~ /^170/&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><h3 id="2ã€å¤„ç†å­—æ®µ">2ã€å¤„ç†å­—æ®µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;NR&gt;1&#123;$4=$4+5;print $0&#125;&#x27;</span> a.txt</span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;-&quot;&#125;NR&gt;1&#123;$4=$4+5;print $0&#125;&#x27;</span> a.txt</span><br><span class="line">awk <span class="string">&#x27;NR&gt;1&#123;$6=$6&quot;*&quot;;print $0&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><h2 id="å°æµ‹è¯•ï¼šawkè¿ç»´é¢è¯•è¯•é¢˜">å°æµ‹è¯•ï¼šawkè¿ç»´é¢è¯•è¯•é¢˜</h2><p>ä»ifconfigå‘½ä»¤çš„ç»“æœä¸­ç­›é€‰å‡ºé™¤äº†loç½‘å¡å¤–çš„æ‰€æœ‰IPv4åœ°å€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ³•ä¸€ï¼šå¤šæ¡ä»¶ç­›é€‰</span></span><br><span class="line">ifconfig | awk <span class="string">&#x27;/inet / &amp;&amp; !($2 ~ /^127/)&#123;print $2&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ³•äºŒï¼šæŒ‰æ®µè½è¯»å–ï¼Œç„¶åå–IPv4å­—æ®µ</span></span><br><span class="line">ifconfig | awk <span class="string">&#x27;BEGIN&#123;RS=&quot;&quot;&#125;!/lo/&#123;print $6&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ³•ä¸‰ï¼šæŒ‰æ®µè½è¯»å–ï¼Œæ¯è¡Œ1å­—æ®µï¼Œç„¶åå–IPv4å­—æ®µ</span></span><br><span class="line">ifconfig | awk <span class="string">&#x27;BEGIN&#123;RS=&quot;&quot;;FS=&quot;\n&quot;&#125;!/lo/&#123;$0=$2;FS=&quot; &quot;;$0=$0;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å…«ã€awk-å·¥ä½œæµç¨‹ğŸ§">å…«ã€awk å·¥ä½œæµç¨‹ğŸ§</h2><blockquote><ol><li>è§£æ <code>-v var=val ...</code> é€‰é¡¹ä¸­çš„å˜é‡èµ‹å€¼</li><li>ç¼–è¯‘awkæºä»£ç ä¸ºå¯è§£é‡Šçš„å†…éƒ¨æ ¼å¼ï¼ŒåŒ…æ‹¬ <code>-v</code> çš„å˜é‡</li><li>æ‰§è¡ŒBEGINä»£ç æ®µ</li><li>æ ¹æ®è¾“å…¥è®°å½•åˆ†éš”ç¬¦RSè¯»å–æ–‡ä»¶ï¼ˆæ ¹æ®ARGVæ•°ç»„çš„å…ƒç´ å†³å®šè¦è¯»å–çš„æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶ï¼Œåˆ™ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ–‡ä»¶ï¼ŒåŒæ—¶æ‰§è¡Œmainä»£ç æ®µ<ul><li>å¦‚æœæ–‡ä»¶åéƒ¨åˆ†æŒ‡å®švar=valæ ¼å¼ï¼Œåˆ™å£°æ˜å¹¶åˆ›å»ºå˜é‡ï¼Œæ­¤é˜¶æ®µå†BEGINå£°æ˜ä¹‹åï¼Œæ‰€ä»¥BEGINä¸­ä¸å¯ç”¨ï¼Œmainä»£ç æ®µå¯ç”¨</li><li>æ¯è¯»å–ä¸€æ¡è®°å½•ï¼Œéƒ½å°†è®¾ç½®NRã€FNRã€RTã€$0ç­‰å˜é‡ã€‚ï¼ˆé»˜è®¤ï¼‰æ ¹æ®è¾“å…¥å­—æ®µåˆ†éš”ç¬¦FSåˆ‡å‰²å­—æ®µï¼Œå°†å„å­—æ®µä¿å­˜åˆ°<code>$1ã€$2...</code>ä¸­ã€‚æµ‹è¯•mainä»£ç æ®µçš„patternéƒ¨åˆ†ï¼Œå¦‚æœæµ‹è¯•æˆåŠŸï¼Œåˆ™æ‰§è¡Œactionéƒ¨åˆ†ã€‚</li></ul></li><li>æ‰§è¡ŒENDä»£ç æ®µã€‚</li></ol></blockquote><p><strong>æµç¨‹å›¾</strong></p><img src="https://cdn.whbblog.cn/img/AWK.png" alt="AWK" style="zoom: 50%;" /><h2 id="ä¹ã€getline-ç”¨æ³•è¯¦è§£ğŸ²">ä¹ã€getline ç”¨æ³•è¯¦è§£ğŸ²</h2><p>é™¤äº†å¯ä»¥ä»æ ‡å‡†è¾“å…¥æˆ–éé€‰é¡¹å‹å‚æ•°æ‰€æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨getlineä»å…¶å®ƒå„ç§æ¸ é“è·å–éœ€è¦å¤„ç†çš„æ•°æ®ï¼Œå®ƒçš„ç”¨æ³•æœ‰å¾ˆå¤šç§ã€‚</p><p>getlineçš„è¿”å›å€¼ï¼š</p><ul><li>å¦‚æœå¯ä»¥è¯»å–åˆ°æ•°æ®ï¼Œè¿”å›1</li><li>å¦‚æœé‡åˆ°äº†EOFï¼Œè¿”å›0</li><li>å¦‚æœé‡åˆ°äº†é”™è¯¯ï¼Œè¿”å›è´Ÿæ•°ã€‚å¦‚-1è¡¨ç¤ºæ–‡ä»¶æ— æ³•æ‰“å¼€ï¼Œ-2è¡¨ç¤ºIOæ“ä½œéœ€è¦é‡è¯•(retry)ã€‚åœ¨é‡åˆ°é”™è¯¯çš„åŒæ—¶ï¼Œè¿˜ä¼šè®¾ç½®<code>ERRNO</code>å˜é‡æ¥æè¿°é”™è¯¯</li></ul><p>ä¸ºäº†å¥å£®æ€§ï¼Œgetlineæ—¶å¼ºçƒˆå»ºè®®è¿›è¡Œåˆ¤æ–­ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ((getline) &lt;= 0 )&#123;...&#125;</span><br><span class="line">if ((getline) &lt; 0 )&#123;...&#125;</span><br><span class="line">if ((getline) &gt; 0 )&#123;...&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>getline</code>çš„æ‹¬å·å°½é‡åŠ ä¸Šï¼Œå› ä¸º<code>getline &lt; 0</code>è¡¨ç¤ºçš„æ˜¯è¾“å…¥é‡å®šå‘ï¼Œè€Œä¸æ˜¯å’Œæ•°å€¼0è¿›è¡Œå°äºå·çš„æ¯”è¾ƒã€‚</p><h3 id="1ã€æ— å‚æ•°çš„-getline">1ã€æ— å‚æ•°çš„ getline</h3><p>getlineæ— å‚æ•°æ—¶ï¼Œè¡¨ç¤ºä»å½“å‰æ­£åœ¨å¤„ç†çš„æ–‡ä»¶ä¸­ç«‹å³è¯»å–ä¸‹ä¸€æ¡è®°å½•ä¿å­˜åˆ°<code>$0</code>ä¸­ï¼Œå¹¶è¿›è¡Œå­—æ®µåˆ†å‰²ï¼Œç„¶å<strong>ç»§ç»­æ‰§è¡Œåç»­ä»£ç é€»è¾‘</strong>ã€‚</p><p>æ­¤æ—¶çš„getlineä¼šè®¾ç½®NFã€RTã€NRã€FNRã€$0å’Œ$Nã€‚</p><p>ä¾‹å¦‚ï¼ŒåŒ¹é…åˆ°æŸè¡Œä¹‹åï¼Œå†è¯»ä¸€è¡Œå°±é€€å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/^1/&#123;print;getline;print;exit&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ›´å¥å£®ï¼Œåº”å½“å¯¹getlineçš„è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/^1/&#123;print;if((getline)&lt;=0)&#123;exit&#125;;print&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸€ä¸ªå‚æ•°çš„getline">2ã€ä¸€ä¸ªå‚æ•°çš„getline</h3><p>æ²¡æœ‰å‚æ•°çš„getlineæ˜¯è¯»å–ä¸‹ä¸€æ¡è®°å½•ä¹‹åå°†è®°å½•ä¿å­˜åˆ°<code>$0</code>ä¸­ï¼Œå¹¶å¯¹è¯¥è®°å½•è¿›è¡Œå­—æ®µçš„åˆ†å‰²ã€‚</p><p>ä¸€ä¸ªå‚æ•°çš„getlineæ˜¯å°†è¯»å–çš„è®°å½•ä¿å­˜åˆ°æŒ‡å®šçš„å˜é‡å½“ä¸­ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹å…¶è¿›è¡Œåˆ†å‰²ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getline <span class="keyword">var</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶çš„getlineåªä¼šè®¾ç½®RTã€NRã€FNRå˜é‡å’ŒæŒ‡å®šçš„å˜é‡varã€‚å› æ­¤$0å’Œ$Nä»¥åŠNFä¿æŒä¸å˜ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">/^1/&#123;</span><br><span class="line">  if((getline var)&lt;=0)&#123;exit&#125;</span><br><span class="line">  print var</span><br><span class="line">  print $0&quot;--&quot;$2</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="3ã€ä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–æ•°æ®">3ã€ä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–æ•°æ®</h3><ul><li><code>getline &lt; filename</code> : ä»æŒ‡å®šæ–‡ä»¶filenameä¸­è¯»å–ä¸€æ¡è®°å½•ä¿å­˜åˆ°$0ä¸­ï¼Œä¼šè¿›è¡Œå­—æ®µçš„åˆ’åˆ†ï¼Œä¼šè®¾ç½®å˜é‡<code>$0 $N $NF</code>ï¼Œä¸ä¼šè®¾ç½®å˜é‡<code>NR FNR</code></li><li><code>getline var &lt; filename</code> : ä»æŒ‡å®šæ–‡ä»¶filename è¯»å–ä¸€æ¡è®°å½•å¹¶ä¿å­˜åˆ°æŒ‡å®šå˜é‡varä¸­ï¼Œä¸ä¼šåˆ’åˆ†å­—æ®µï¼Œä¸ä¼šè®¾ç½®å˜é‡ <code>NR FNR NF $0 $N </code></li></ul><p>filenameéœ€ä½¿ç”¨åŒå¼•å·åŒ…å›´è¡¨ç¤ºæ–‡ä»¶åå­—ç¬¦ä¸²ï¼Œå¦åˆ™ä¼šå½“ä½œå˜é‡è§£æ<code>getline &lt; &quot;c.txt&quot;</code>ã€‚æ­¤å¤–ï¼Œå¦‚æœè·¯å¾„æ˜¯ä½¿ç”¨å˜é‡æ„å»ºçš„ï¼Œåˆ™åº”è¯¥ä½¿ç”¨æ‹¬å·åŒ…å›´è·¯å¾„éƒ¨åˆ†ã€‚ä¾‹å¦‚<code>getline &lt; dir &quot;/&quot; filename</code>ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªå˜é‡æ„å»ºè·¯å¾„ï¼Œè¿™ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œåº”å½“å†™æˆ<code>getline &lt;(dir &quot;/&quot; filename)</code>ã€‚</p><p>æ³¨æ„ï¼Œæ¯æ¬¡ä»filenameè¯»å–ä¹‹åéƒ½ä¼šåšå¥½ä½ç½®åç§»æ ‡è®°ï¼Œä¸‹æ¬¡å†ä»è¯¥æ–‡ä»¶è¯»å–æ—¶å°†æ ¹æ®è¿™ä¸ªä½ç½®æ ‡è®°ç»§ç»­å‘åè¯»å–ã€‚</p><p>ä¾‹å¦‚ï¼Œæ¯æ¬¡è¡Œé¦–ä»¥1å¼€å¤´æ—¶å°±è¯»å–c.txtæ–‡ä»¶çš„æ‰€æœ‰è¡Œã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">/^1/&#123;</span></span><br><span class="line"><span class="string">  if((getline var)&lt;=0)&#123;exit&#125;</span></span><br><span class="line"><span class="string">  print var</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>close(&quot;c.txt&quot;)</code>è¡¨ç¤ºåœ¨<code>while(getline)</code>è¯»å–å®Œæ–‡ä»¶ä¹‹åå…³æ‰ï¼Œä»¥ä¾¿åé¢å†æ¬¡è¯»å–ï¼Œå¦‚æœä¸å…³æ‰ï¼Œåˆ™æ–‡ä»¶åç§»æŒ‡é’ˆå°†ä¸€ç›´åœ¨æ–‡ä»¶ç»“å°¾å¤„ï¼Œä½¿å¾—ä¸‹æ¬¡è¯»å–æ—¶ç›´æ¥é‡åˆ°EOFã€‚</p><h3 id="4ã€ä»Shellå‘½ä»¤è¾“å‡ºç»“æœä¸­è¯»å–æ•°æ®">4ã€ä»Shellå‘½ä»¤è¾“å‡ºç»“æœä¸­è¯»å–æ•°æ®</h3><ul><li><code>cmd | getline</code>ï¼šä»Shellå‘½ä»¤cmdçš„è¾“å‡ºç»“æœä¸­è¯»å–ä¸€æ¡è®°å½•ä¿å­˜åˆ°<code>$0</code>ä¸­<ul><li>ä¼šè¿›è¡Œå­—æ®µåˆ’åˆ†ï¼Œè®¾ç½®å˜é‡<code>$0 NF $N RT</code>ï¼Œä¸ä¼šä¿®æ”¹å˜é‡<code>NR FNR</code></li></ul></li><li><code>cmd | getline var</code>:ä»Shellå‘½ä»¤cmdçš„è¾“å‡ºç»“æœä¸­è¯»å–æ•°æ®ä¿å­˜åˆ°varä¸­<ul><li>é™¤äº†varå’ŒRTï¼Œå…¶å®ƒå˜é‡éƒ½ä¸ä¼šè®¾ç½®</li></ul></li></ul><p>å¦‚æœè¦å†æ¬¡æ‰§è¡Œcmdå¹¶è¯»å–å…¶è¾“å‡ºæ•°æ®ï¼Œåˆ™éœ€è¦closeå…³é—­è¯¥å‘½ä»¤ã€‚ä¾‹å¦‚<code>close(&quot;seq 1 5&quot;)</code>ï¼Œå‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚</p><p>ä¾‹å¦‚ï¼šæ¯æ¬¡é‡åˆ°ä»¥1å¼€å¤´çš„è¡Œéƒ½è¾“å‡ºseqå‘½ä»¤äº§ç”Ÿçš„<code>1 2 3 4 5</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/^1/&#123;print;while((&quot;seq 1 5&quot;|getline)&gt;0)&#123;print&#125;;close(&quot;seq 1 5&quot;)&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>å†ä¾‹å¦‚ï¼Œè°ƒç”¨Shellçš„dateå‘½ä»¤ç”Ÿæˆæ—¶é—´ï¼Œç„¶åä¿å­˜åˆ°awkå˜é‡cur_dateä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  /^1/&#123;</span><br><span class="line">    print</span><br><span class="line">    &quot;date +\&quot;%F %T\&quot;&quot;|getline cur_date</span><br><span class="line">    print cur_date</span><br><span class="line">    close(&quot;date +\&quot;%F %T\&quot;&quot;)</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>å¯ä»¥å°†cmdä¿å­˜æˆä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  BEGIN&#123;get_date=&quot;date +\&quot;%F %T\&quot;&quot;&#125;</span><br><span class="line">  /^1/&#123;</span><br><span class="line">    print</span><br><span class="line">    get_date | getline cur_date</span><br><span class="line">    print cur_date</span><br><span class="line">    close(get_date)</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>æ›´ä¸ºå¤æ‚ä¸€ç‚¹çš„ï¼Œcmdä¸­å¯ä»¥åŒ…å«Shellçš„å…¶å®ƒç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ç®¡é“ã€é‡å®šå‘ç¬¦å·ç­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  /^1/&#123;</span><br><span class="line">    print</span><br><span class="line">    if((&quot;seq 1 5 | xargs -i echo x&#123;&#125;y 2&gt;/dev/null&quot;|getline) &gt; 0)&#123;</span><br><span class="line">      print</span><br><span class="line">    &#125;</span><br><span class="line">    close(&quot;seq 1 5 | xargs -i echo x&#123;&#125;y 2&gt;/dev/null&quot;)</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="5ã€awkä¸­çš„coprocess">5ã€awkä¸­çš„coprocess</h3><p>awkè™½ç„¶å¼ºå¤§ï¼Œä½†æ˜¯æœ‰äº›æ•°æ®ä»ç„¶ä¸æ–¹ä¾¿å¤„ç†ï¼Œè¿™æ—¶å¯å°†æ•°æ®äº¤ç»™Shellå‘½ä»¤å»å¸®åŠ©å¤„ç†ï¼Œç„¶åå†ä»Shellå‘½ä»¤çš„æ‰§è¡Œç»“æœä¸­å–å›å¤„ç†åçš„æ•°æ®ç»§ç»­awkå¤„ç†ã€‚</p><p>awké€šè¿‡<code>|&amp;</code>ç¬¦å·æ¥æ”¯æŒcoprocã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk_print[f] &quot;something&quot; |&amp; Shell_Cmd</span><br><span class="line">Shell_Cmd |&amp; getline [var]</span><br></pre></td></tr></table></figure><p>è¿™è¡¨ç¤ºawké€šè¿‡printè¾“å‡ºçš„æ•°æ®å°†ä¼ é€’ç»™Shellçš„å‘½ä»¤Shell_Cmdå»æ‰§è¡Œï¼Œç„¶åawkå†ä»Shell_Cmdçš„æ‰§è¡Œç»“æœä¸­å–å›Shell_Cmdäº§ç”Ÿçš„æ•°æ®ã€‚</p><h2 id="åã€awk-è¾“å‡ºæ“ä½œğŸ¸">åã€awk è¾“å‡ºæ“ä½œğŸ¸</h2><h3 id="1ã€print">1ã€print</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print $1,$2,$3&#125;&#x27;</span> a.txt</span><br><span class="line">awk <span class="string">&#x27;&#123;print ($1,$2,$3)&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure><p>é€—å·åˆ†éš”è¦æ‰“å°çš„å­—æ®µåˆ—è¡¨ï¼Œå„å­—æ®µéƒ½<strong>ä¼šè‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸²æ ¼å¼</strong>ï¼Œç„¶åé€šè¿‡é¢„å®šä¹‰å˜é‡OFS(output field separator)çš„å€¼(å…¶é»˜è®¤å€¼ä¸ºç©ºæ ¼)è¿æ¥å„å­—æ®µè¿›è¡Œè¾“å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;&#123;print $1,$2,$3&#125;&#x27;</span> a.txt            </span><br><span class="line">ID name gender</span><br><span class="line">1 Bob male</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;---&quot;&#125;&#123;print $1,$2,$3&#125;&#x27;</span> a.txt </span><br><span class="line">ID---name---gender</span><br><span class="line">1---Bob---male</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>printè¦è¾“å‡ºçš„æ•°æ®ç§°ä¸ºè¾“å‡ºè®°å½•ï¼Œåœ¨printè¾“å‡ºæ—¶ä¼šè‡ªåŠ¨åœ¨å°¾éƒ¨åŠ ä¸Šè¾“å‡ºè®°å½•åˆ†éš”ç¬¦ï¼Œè¾“å‡ºè®°å½•åˆ†éš”ç¬¦çš„é¢„å®šä¹‰å˜é‡ä¸ºORSï¼Œå…¶é»˜è®¤å€¼ä¸º<code>\n</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;---&quot;;ORS=&quot;_\n&quot;&#125;&#123;print ($1,$2,$3)&#125;&#x27;</span> a.txt </span><br><span class="line">ID---name---gender_</span><br><span class="line">1---Bob---male_</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ‹¬å·å¯çœç•¥ï¼Œä½†å¦‚æœè¦æ‰“å°çš„å…ƒç´ ä¸­åŒ…å«äº†ç‰¹æ®Šç¬¦å·<code>&gt;</code>ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ‹¬å·åŒ…å›´(å¦‚<code>print(&quot;a&quot; &gt; &quot;A&quot;)</code>)ï¼Œå› ä¸ºå®ƒæ˜¯è¾“å‡ºé‡å®šå‘ç¬¦å·ã€‚</p><p>å¦‚æœçœç•¥å‚æ•°ï¼Œå³<code>print;</code>ç­‰ä»·äº<code>print $0;</code>ã€‚</p><h3 id="printè¾“å‡ºæ•°å€¼">printè¾“å‡ºæ•°å€¼</h3><p>printåœ¨è¾“å‡ºæ•°æ®æ—¶ï¼Œæ€»æ˜¯ä¼šå…ˆè½¬æ¢æˆå­—ç¬¦ä¸²å†è¾“å‡ºã€‚</p><p>å¯¹äºæ•°å€¼è€Œè¨€ï¼Œå¯ä»¥è‡ªå®šä¹‰è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ ¼å¼ï¼Œä¾‹å¦‚ä½¿ç”¨sprintf()è¿›è¡Œæ ¼å¼åŒ–ã€‚</p><p>printåœ¨è‡ªåŠ¨è½¬æ¢æ•°å€¼ï¼ˆä¸“æŒ‡å°æ•°ï¼‰ä¸ºå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œé‡‡ç”¨é¢„å®šä¹‰å˜é‡OFMTï¼ˆOutput formatï¼‰å®šä¹‰çš„æ ¼å¼æŒ‰ç…§sprintf()ç›¸åŒçš„æ–¹å¼è¿›è¡Œæ ¼å¼åŒ–ã€‚OFMTé»˜è®¤å€¼ä¸º<code>%.6g</code>ï¼Œè¡¨ç¤ºæœ‰æ•ˆä½(æ•´æ•°éƒ¨åˆ†åŠ å°æ•°éƒ¨åˆ†)æœ€å¤šä¸º6ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print 3.12432623&#125;&#x27;</span></span><br><span class="line">3.12433</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¿®æ”¹OFMTï¼Œæ¥è‡ªå®šä¹‰æ•°å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶çš„æ ¼å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼åŒ–åˆ°å°æ•°ç‚¹å2ä¸ºï¼Œå°æ•°ç‚¹ç¬¬3ä½æ•°å€¼å¤§äºç­‰äº5ï¼Œä¼šå››èˆäº”å…¥è¿›ä¸€ä½ã€‚</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;OFMT=&quot;%.2f&quot; ;print 3.1415926 &#125;&#x27;</span></span><br><span class="line">3.14</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–ä¸ºæ•´æ•°ï¼Œä¸ä¼šå››èˆäº”å…¥ã€‚</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;OFMT=&quot;%d&quot; ;print 3.1415926 &#125;&#x27;</span></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–ä¸ºæ•´æ•°ï¼Œä¼šå››èˆäº”å…¥ã€‚</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;OFMT=&quot;%.0f&quot;;print 3.99989&#125;&#x27;</span> </span><br><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="2ã€printf">2ã€printf</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf format, item1, item2, ...</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–å­—ç¬¦ï¼š</p><table><thead><tr><th>ç¬¦å·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>%c</td><td>å°†ASCIIç è½¬æ¢ä¸ºå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š<code>awk &quot;BEGIN&#123;printf \&quot;%c\&quot;,65&#125;&quot;</code> è¾“å‡º <code>A</code></td></tr><tr><td>%dï¼Œ%i</td><td>è½¬æ¢ä¸ºæ•´æ•°ï¼Œç›´æ¥æˆªæ–­è€Œä¸ä¼šå››èˆäº”å…¥ï¼Œç¤ºä¾‹ï¼š<code> awk &quot;BEGIN&#123;printf \&quot;%d\&quot;,3.1415&#125;&quot;</code> è¾“å‡º<code>3</code></td></tr><tr><td>%eï¼Œ%E</td><td>ç§‘å­¦è®¡æ•°æ³•æ–¹å¼è¾“å‡ºæ•°å€¼</td></tr><tr><td>%fï¼Œ%F</td><td>æµ®ç‚¹æ•°æ–¹å¼è¾“å‡ºï¼Œä¼šå››èˆäº”å…¥ï¼Œç¤ºä¾‹ï¼š<code>awk &quot;BEGIN&#123;printf \&quot;%.2f\&quot;,1.379&#125;&quot;</code>è¾“å‡º1.38</td></tr><tr><td>%gï¼Œ%G</td><td>è¾“å‡ºä¸ºæµ®ç‚¹æ•°ï¼Œæˆ–ç§‘å­¦è®¡æ•°æ³•æ ¼å¼</td></tr><tr><td>%o</td><td>å°†æ•°å­—è¯†åˆ«ä¸º8è¿›åˆ¶ï¼Œç„¶åè½¬æ¢ä¸º10è¿›åˆ¶ï¼Œå†ç¼“ç¼“ä¸ºå­—ç¬¦ä¸²è¾“å‡º</td></tr><tr><td>%s</td><td>è¾“å‡ºå­—ç¬¦ä¸²</td></tr><tr><td>%xï¼Œ%X</td><td>ç»æ•°å­—è¯†åˆ«ä¸º16è¿›åˆ¶ï¼Œç„¶åå†è½¬æ¢ä¸º10è¿›åˆ¶ï¼Œå†è½¬æ¢ä¸ºè‡ªè´ŸåºŠè¾“å‡º</td></tr><tr><td>%%</td><td>è¾“å‡ºç™¾åˆ†å·%</td></tr></tbody></table><h3 id="3ã€sprintf">3ã€sprintf()</h3><p>sprintf()é‡‡ç”¨å’Œprintfç›¸åŒçš„æ–¹å¼æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¾“å‡ºæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯è¿”å›æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å°†æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²èµ‹å€¼ç»™æŸä¸ªå˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        a = sprintf(&quot;%03d&quot;, 12.34)</span><br><span class="line">        print a  # 012</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><h3 id="4ã€stdinã€stdoutã€stderr">4ã€stdinã€stdoutã€stderr</h3><p>awké‡å®šå‘æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨<code>/dev/stdin</code>ã€<code>/dev/stdout</code>å’Œ<code>/dev/stderr</code>ã€‚è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨æŸä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦<code>/dev/fd/N</code>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print &quot;something OK&quot; &gt; &quot;/dev/stdout&quot;&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;something wrong&quot; &gt; &quot;/dev/stderr&quot;&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;something wrong&quot; | &quot;cat &gt;&amp;2&quot;&#125;&#x27;</span><br><span class="line"></span><br><span class="line">awk &#x27;BEGIN&#123;getline &lt; &quot;/dev/stdin&quot;;print $0&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">exec</span> 4&lt;&gt; a.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;while((getline &lt; &quot;/dev/fd/4&quot;)&gt;0)&#123;print $0&#125;&#125;&#x27;</span></span></span><br></pre></td></tr></table></figure><h2 id="åä¸€ã€close-å…³é—­å¥æŸ„ğŸ³">åä¸€ã€close å…³é—­å¥æŸ„ğŸ³</h2><p>â€‹æœ‰æ—¶æˆ‘ä»¬éœ€è¦ç”¨shellè„šæœ¬å¤„ç†ä¸€äº›æ–‡ä»¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨awkè¿™ä¸ªå¼ºå¤§çš„å¯ç¼–ç¨‹å‘½ä»¤æ¥å¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€æ¬¡awkè°ƒç”¨ä¸­å¤„ç†å¾ˆå¤šæ–‡ä»¶æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®çš„å…³é—­æ‰“å¼€çš„æ–‡ä»¶å’Œç®¡é“ï¼Œåˆ™ä¼šé€ æˆæ–‡ä»¶å¥æŸ„æ³„éœ²ï¼Œawkå‘½ä»¤ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æµ‹è¯•è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œå¹¶çœ‹çœ‹å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨closeå‘½ä»¤è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">close</span>(filename)</span><br><span class="line"><span class="built_in">close</span>(cmd,[<span class="built_in">from</span> | <span class="built_in">to</span>])  <span class="comment"># toå‚æ•°åªç”¨äºcoprocessçš„ç¬¬ä¸€ä¸ªé˜¶æ®µ</span></span><br></pre></td></tr></table></figure><p>å¦‚æœclose()å…³é—­çš„å¯¹è±¡ä¸å­˜åœ¨ï¼Œawkä¸ä¼šæŠ¥é”™ï¼Œä»…ä»…åªæ˜¯è®©å…¶è¿”å›ä¸€ä¸ªè´Ÿæ•°è¿”å›å€¼ã€‚</p><p>close()æœ‰ä¸¤ä¸ªåŸºæœ¬ä½œç”¨ï¼š</p><ul><li>å…³é—­æ–‡ä»¶ï¼Œä¸¢å¼ƒå·²æœ‰çš„æ–‡ä»¶åç§»æŒ‡é’ˆï¼Œä¸‹æ¬¡å†è¯»å–æ–‡ä»¶ï¼Œå°†åªèƒ½é‡æ–°æ‰“å¼€æ–‡ä»¶ï¼Œé‡å¼€æ–‡ä»¶ä¼šä»æ–‡ä»¶æœ€å¼€å¤´å¤„å¼€å§‹è¯»å–ã€‚</li><li>å‘é€EOFæ ‡è®°</li></ul><p>awkä¸­ä»»ä½•æ–‡ä»¶éƒ½åªä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰“å¼€ï¼Œä¹‹åéƒ½ä¸ä¼šå†é‡æ–°æ‰“å¼€ã€‚åªæœ‰å…³é—­ä¹‹åï¼Œå†ä½¿ç”¨æ‰ä¼šé‡æ–°æ‰“å¼€ã€‚</p><p>æˆ‘ä»¬å…ˆç”¨ulimitå‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªè¿›ç¨‹æœ€å¤šå¯ä»¥æ‰“å¼€å¤šå°‘ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œé€šå¸¸æ˜¯1024ã€‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆä¸€æ‰¹æµ‹è¯•æ–‡ä»¶ï¼Œæ•°é‡è¶…è¿‡1024ï¼Œè¿™é‡Œæˆ‘ä»¬ç”Ÿæˆäº†10000ä¸ªæ–‡ä»¶ç”¨äºæµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir test</span><br><span class="line">cd test</span><br><span class="line">for ((i=0; i &lt; 10000; ++i)); do </span><br><span class="line">    filename=$(printf &quot;file%04d&quot; $i); </span><br><span class="line">    echo $filename; </span><br><span class="line">    for ((j=0; j &lt; 10; ++j)); do  </span><br><span class="line">        echo line$j &gt;&gt; $&#123;filename&#125;; </span><br><span class="line">    done; </span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªawkå‘½ä»¤çš„æ‰§è¡Œæƒ…å†µï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ls file* | awk &#x27;BEGIN &#123;</span><br><span class="line">    count=0;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    file=$0;</span><br><span class="line">    if (getline line &lt;file)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">END &#123;</span><br><span class="line">    print count;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ç”¨äºç»Ÿè®¡éç©ºæ–‡ä»¶çš„ä¸ªæ•°ï¼Œå½“ç„¶è¿™ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œåªç”¨äºawkæ‰“å¼€æ–‡ä»¶çš„æµ‹è¯•ï¼Œå‘½ä»¤æ‰§è¡Œæ—¶ä¼šæç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk: cmd. line:6: (FILENAME=- FNR=1022) fatal: too many pipes or input files open</span><br></pre></td></tr></table></figure><p>å¯è§æ‰“å¼€äº†å¤ªå¤šçš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ifè¯­å¥åé¢åŠ ä¸Šcloseæ¥å…³é—­æ‰“å¼€çš„æ–‡ä»¶ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ls file* | awk &#x27;BEGIN &#123;</span><br><span class="line">    count=0;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    file=$0;</span><br><span class="line">    if (getline line &lt;file)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    close(file);</span><br><span class="line">&#125;</span><br><span class="line">END &#123;</span><br><span class="line">    print count;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><p>é™¤äº†æ‰“å¼€æ–‡ä»¶å ç”¨æ–‡ä»¶å¥æŸ„ä¹‹å¤–çš„å¦ä¸€ç§å ç”¨æ–‡ä»¶å¥æŸ„çš„æƒ…å†µå°±æ˜¯è°ƒç”¨shellå‘½ä»¤å¹¶ç”¨ç®¡é“å¤„ç†ï¼Œè¿™ç§æƒ…å†µä¹Ÿè¦ç”¨closeå…³é—­æ‰“å¼€ç®¡é“ï¼Œcloseçš„å‚æ•°å¿…é¡»ä¸æ‰“å¼€ç®¡é“çš„å‘½ä»¤å­—ç¬¦ä¸²å®Œå…¨ä¸€è‡´ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ls file* | awk &#x27;BEGIN &#123;</span><br><span class="line">    count=0;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    file=$0;</span><br><span class="line">    while (&quot;cat &quot;file | getline line)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    close(&quot;cat &quot;file);</span><br><span class="line">&#125;</span><br><span class="line">END &#123;</span><br><span class="line">    print count;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨getlineè¯»å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œé‡åˆ°æ–‡ä»¶ç»“æŸï¼ˆgetlineå¤±è´¥æ—¶ï¼‰awkä¼šè‡ªåŠ¨å…³é—­è¿™ä¸ªæ–‡ä»¶ï¼Œä¸éœ€è¦ä¸»åŠ¨closeï¼Œä¾‹å¦‚ä»¥ä¸‹ç»Ÿè®¡æ‰€æœ‰æ–‡ä»¶è¡Œæ•°çš„å‘½ä»¤æ˜¯å¯ä»¥æ­£ç¡®æ‰§è¡Œçš„ï¼Œè¿™ä¸ªä¾¿åˆ©å¹¶ä¸é€‚ç”¨äºç®¡é“ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œç®¡é“è¿˜æ˜¯éœ€è¦ä¸»åŠ¨å…³é—­çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ls file* | awk &#x27;BEGIN &#123;</span><br><span class="line">    count=0;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    file=$0;</span><br><span class="line">    while (getline line &lt;file)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">END &#123;</span><br><span class="line">    print count;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><h2 id="åäºŒã€awk-å˜é‡ğŸ‹">åäºŒã€awk å˜é‡ğŸ‹</h2><h3 id="1ã€å˜é‡èµ‹å€¼">1ã€å˜é‡èµ‹å€¼</h3><p>awkä¸­çš„å˜é‡èµ‹å€¼è¯­å¥ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª<strong>æœ‰è¿”å›å€¼</strong>çš„è¡¨è¾¾å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>a=3</code>èµ‹å€¼å®Œæˆåè¿”å›3ï¼ŒåŒæ—¶å˜é‡aä¹Ÿè¢«è®¾ç½®ä¸º3ã€‚</p><p>åŸºäºè¿™ä¸ªç‰¹ç‚¹ï¼Œæœ‰ä¸¤ç‚¹ç”¨æ³•ï¼š</p><ul><li>å¯ä»¥<code>x=y=z=5</code>ï¼Œç­‰ä»·äº<code>z=5 y=5 x=5</code></li><li>å¯ä»¥å°†èµ‹å€¼è¯­å¥æ”¾åœ¨ä»»æ„å…è®¸ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹<ul><li><code>x != (y = 1)</code></li><li><code>awk 'BEGIN&#123;print (a=4);print a&#125;'</code></li></ul></li></ul><p>é—®é¢˜ï¼š<code>a=1;arr[a+=2] = (a=a+6)</code>æ˜¯æ€ä¹ˆèµ‹å€¼çš„ï¼Œå¯¹åº”å…ƒç´ ç»“æœç­‰äºï¼Ÿ<code>arr[3]=7</code>ã€‚ä½†ä¸è¦è¿™ä¹ˆåšï¼Œå› ä¸ºä¸åŒawkçš„èµ‹å€¼è¯­å¥å·¦å³ä¸¤è¾¹çš„è¯„ä¼°é¡ºåºæœ‰å¯èƒ½ä¸åŒã€‚</p><h3 id="2ã€awkä¸­å£°æ˜å˜é‡çš„ä½ç½®">2ã€awkä¸­å£°æ˜å˜é‡çš„ä½ç½®</h3><ol><li>åœ¨BEGINæˆ–mainæˆ–ENDä»£ç æ®µä¸­ç›´æ¥å¼•ç”¨æˆ–èµ‹å€¼</li><li>ä½¿ç”¨<code>-v var=val</code>é€‰é¡¹ï¼Œå¯å®šä¹‰å¤šä¸ªï¼Œå¿…é¡»æ”¾åœ¨awkä»£ç çš„å‰é¢<ul><li>å®ƒçš„å˜é‡å£°æ˜æ—©äºBEGINå—</li><li>æ™®é€šå˜é‡ï¼š<code>awk -v age=123 'BEGIN&#123;print age&#125;'</code></li><li>ä½¿ç”¨shellå˜é‡èµ‹å€¼ï¼š<code>awk -v age=$age 'BEGIN&#123;print age&#125;'</code></li></ul></li><li>åœ¨awkä»£ç åé¢ä½¿ç”¨<code>var=val</code>å‚æ•°<ul><li>å®ƒçš„å˜é‡å£°æ˜åœ¨BEGINä¹‹å</li><li><code>awk '&#123;print n&#125;' n=3 a.txt n=4 b.txt</code></li><li><code>awk '&#123;print $1&#125;' FS=' ' a.txt FS=&quot;:&quot; /etc/passwd</code></li><li>ä½¿ç”¨Shellå˜é‡èµ‹å€¼ï¼š<code>awk '&#123;print age&#125;' age=$age a.txt</code></li></ul></li></ol><h2 id="åä¸‰ã€awk-æµç¨‹æ§åˆ¶ğŸ¬">åä¸‰ã€awk æµç¨‹æ§åˆ¶ğŸ¬</h2><h3 id="1ã€ifâ€¦else">1ã€ifâ€¦else</h3><p>è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•ç‹¬çš„<span class="keyword">if</span></span></span><br><span class="line">if(cond)&#123;</span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">if...else</span></span><br><span class="line">if(cond1)&#123;</span><br><span class="line">    statements1</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    statements2</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">if...else if...else</span></span><br><span class="line">if(cond1)&#123;</span><br><span class="line">    statements1</span><br><span class="line">&#125; else if(cond2)&#123;</span><br><span class="line">    statements2</span><br><span class="line">&#125; else if(cond3)&#123;</span><br><span class="line">    statements3</span><br><span class="line">&#125; else&#123;</span><br><span class="line">    statements4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;if($1&lt;5)&#123;print $1&#125;&#125;&#x27; a.txt</span><br><span class="line"></span><br><span class="line">awk &#x27;&#123;if($1&lt;5)&#123;print $1&#125; else &#123;print 666&#125;&#125;&#x27; a.txt</span><br><span class="line"></span><br><span class="line">awk &#x27;/^[0-9]/&#123;if($1&lt;5)&#123;print $1&#125;else if ($1&lt;8&amp;&amp;$1&gt;=5)&#123;print 333&#125;else &#123;print 666&#125;&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸‰ç›®è¿ç®—ç¬¦">2ã€ä¸‰ç›®è¿ç®—ç¬¦?:</h3><p>è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">expr1 ? expr2 : expr3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›¸å½“äº</span></span><br><span class="line">if(expr1)&#123;</span><br><span class="line">    expr2</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    expr3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµç¨‹ï¼šè¡¨è¾¾å¼1ä¸ºçœŸè¿”å›è¡¨è¾¾å¼2ï¼Œè¡¨è¾¾å¼1ä¸ºå‡è¿”å›è¡¨è¾¾å¼3ï¼Œç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;a=50;b=(a&gt;60) ? &quot;åŠæ ¼&quot; : &quot;ä¸åŠæ ¼&quot;;print(b)&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;a=50; a&gt;60 ? b=&quot;åŠæ ¼&quot; : b=&quot;ä¸åŠæ ¼&quot;;print(b)&#125;&#x27;</span><br><span class="line">awk &#x27;/^[0-9]/&#123;$4&gt;23 ? b=&quot;old&quot; : b=&quot;young&quot;;print(b)&#125;&#x27; a.txt </span><br></pre></td></tr></table></figure><h3 id="3ã€switchâ€¦case">3ã€switchâ€¦case</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">switch (expression) &#123;</span><br><span class="line">    case value1|regex1 : statements1</span><br><span class="line">    case value2|regex2 : statements2</span><br><span class="line">    case value3|regex3 : statements3</span><br><span class="line">    ...</span><br><span class="line">    [ default: statement ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>awk ä¸­çš„switchåˆ†æ”¯è¯­å¥åŠŸèƒ½è¾ƒå¼±ï¼Œåªèƒ½è¿›è¡Œç­‰å€¼æ¯”è¾ƒæˆ–æ­£åˆ™åŒ¹é…ã€‚</p><p>å„åˆ†æ”¯ç»“å°¾éœ€ä½¿ç”¨breakæ¥ç»ˆæ­¢ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">&#123;</span><br><span class="line">    switch($1)&#123;</span><br><span class="line">        case 1:</span><br><span class="line">            print(&quot;Monday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 2:</span><br><span class="line">            print(&quot;Tuesday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 3:</span><br><span class="line">            print(&quot;Wednesday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 4:</span><br><span class="line">            print(&quot;Thursday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 5:</span><br><span class="line">            print(&quot;Friday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 6:</span><br><span class="line">            print(&quot;Saturday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 7:</span><br><span class="line">            print(&quot;Sunday&quot;)</span><br><span class="line">            break</span><br><span class="line">        default:</span><br><span class="line">            print(&quot;What day?&quot;)</span><br><span class="line">            break</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>åˆ†æ”¯ç©¿é€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;    </span><br><span class="line">    switch($1)&#123;</span><br><span class="line">        case 1:</span><br><span class="line">        case 2:</span><br><span class="line">        case 3:</span><br><span class="line">        case 4:</span><br><span class="line">        case 5:</span><br><span class="line">            print(&quot;Weekday&quot;)</span><br><span class="line">            break</span><br><span class="line">        case 6:</span><br><span class="line">        case 7:</span><br><span class="line">            print(&quot;Weekend&quot;)</span><br><span class="line">            break</span><br><span class="line">        default:</span><br><span class="line">            print(&quot;What day?&quot;)</span><br><span class="line">            break</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><h3 id="4ã€whileå’Œdoâ€¦while">4ã€whileå’Œdoâ€¦while</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while(condition)&#123;</span><br><span class="line">    statements</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">do &#123;</span><br><span class="line">    statements</span><br><span class="line">&#125; while(condition)</span><br></pre></td></tr></table></figure><p>whileå…ˆåˆ¤æ–­æ¡ä»¶å†å†³å®šæ˜¯å¦æ‰§è¡Œstatementsï¼Œdoâ€¦whileå…ˆæ‰§è¡Œstatementså†åˆ¤æ–­æ¡ä»¶å†³å®šä¸‹æ¬¡æ˜¯å¦å†æ‰§è¡Œstatementsã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;i=0;while(i&lt;5)&#123;print i;i++&#125;&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;i=0;do &#123;print i;i++&#125; while(i&lt;5)&#125;&#x27;</span><br></pre></td></tr></table></figure><p>å¤šæ•°æ—¶å€™ï¼Œwhileå’Œdoâ€¦whileæ˜¯ç­‰ä»·çš„ï¼Œä½†å¦‚æœç¬¬ä¸€æ¬¡æ¡ä»¶åˆ¤æ–­å¤±è´¥ï¼Œåˆ™doâ€¦whileå’Œwhileä¸åŒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;i=0;while(i == 2)&#123;print i;i++&#125;&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;i=0;do &#123;print i;i++&#125; while(i ==2 )&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œwhileå¯èƒ½ä¸€æ¬¡ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œdoâ€¦whileè‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p><p>ä¸€èˆ¬ç”¨whileï¼Œdoâ€¦whileç›¸æ¯”whileæ¥è¯´ï¼Œç”¨çš„é¢‘ç‡éå¸¸ä½ã€‚</p><h3 id="5ã€forå¾ªç¯">5ã€forå¾ªç¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for (expr1; expr2; expr3) &#123;</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (idx in array) &#123;</span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;for(i=0;i&lt;10;i++)&#123;print i&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="6ã€breakå’Œcontinue">6ã€breakå’Œcontinue</h3><p>breakå¯é€€å‡ºforã€whileã€doâ€¦whileã€switchè¯­å¥ã€‚</p><p>continueå¯è®©forã€whileã€doâ€¦whileè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">BEGIN&#123;</span><br><span class="line">  for(i=0;i&lt;10;i++)&#123;</span><br><span class="line">    if(i==5)&#123;</span><br><span class="line">      break</span><br><span class="line">    &#125;</span><br><span class="line">    print(i)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">continue</span></span></span><br><span class="line">  for(i=0;i&lt;10;i++)&#123;</span><br><span class="line">    if(i==5)continue</span><br><span class="line">    print(i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="7ã€nextå’Œnextfile">7ã€nextå’Œnextfile</h3><p>nextä¼šåœ¨å½“å‰è¯­å¥å¤„ç«‹å³åœæ­¢åç»­æ“ä½œï¼Œå¹¶è¯»å–ä¸‹ä¸€è¡Œï¼Œè¿›å…¥å¾ªç¯é¡¶éƒ¨ã€‚</p><p>ä¾‹å¦‚ï¼Œè¾“å‡ºé™¤ç¬¬3è¡Œå¤–çš„æ‰€æœ‰è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;NR==3&#123;next&#125;&#123;print&#125;&#x27; a.txt</span><br><span class="line">awk &#x27;NR==3&#123;getline&#125;&#123;print&#125;&#x27; a.txt</span><br></pre></td></tr></table></figure><p>nextfileä¼šåœ¨å½“å‰è¯­å¥å¤„ç«‹å³åœæ­¢åç»­æ“ä½œï¼Œå¹¶ç›´æ¥è¯»å–ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶è¿›å…¥å¾ªç¯é¡¶éƒ¨ã€‚</p><p>ä¾‹å¦‚ï¼Œæ¯ä¸ªæ–‡ä»¶åªè¾“å‡ºå‰2è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;FNR==3&#123;nextfile&#125;&#123;print&#125;&#x27; a.txt a.txt</span><br></pre></td></tr></table></figure><h3 id="8ã€exit">8ã€exit</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit [exit_code]</span><br></pre></td></tr></table></figure><p>ç›´æ¥é€€å‡ºawkç¨‹åºã€‚</p><p>æ³¨æ„ï¼ŒENDè¯­å¥å—ä¹Ÿæ˜¯exitæ“ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨BEGINæˆ–mainæ®µä¸­æ‰§è¡Œexitæ“ä½œï¼Œä¹Ÿä¼šæ‰§è¡ŒENDè¯­å¥å—ã€‚</p><p>å¦‚æœexitåœ¨ENDè¯­å¥å—ä¸­æ‰§è¡Œï¼Œåˆ™ç«‹å³é€€å‡ºã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœçœŸçš„æƒ³ç›´æ¥é€€å‡ºæ•´ä¸ªawkï¼Œåˆ™å¯ä»¥å…ˆè®¾ç½®ä¸€ä¸ªflagå˜é‡ï¼Œç„¶ååœ¨ENDè¯­å¥å—çš„å¼€å¤´æ£€æŸ¥è¿™ä¸ªå˜é‡å†exitã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">BEGIN&#123;</span><br><span class="line">    ...code...</span><br><span class="line">    if(cond)&#123;</span><br><span class="line">        flag=1</span><br><span class="line">        exit</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;&#125;</span><br><span class="line">END&#123;</span><br><span class="line">    if(flag)&#123;</span><br><span class="line">        exit</span><br><span class="line">    &#125;</span><br><span class="line">    ...code...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;print &quot;begin&quot;;flag=1;exit&#125;</span><br><span class="line">    &#123;&#125;</span><br><span class="line">    END&#123;if(flag)&#123;exit&#125;;print &quot;end2&quot;&#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>exitå¯ä»¥æŒ‡å®šé€€å‡ºçŠ¶æ€ç ï¼Œå¦‚æœè§¦å‘äº†ä¸¤æ¬¡exitæ“ä½œï¼Œå³BEGINæˆ–mainä¸­çš„exitè§¦å‘äº†ENDä¸­çš„exitï¼Œä¸”ENDä¸­çš„exitæ²¡æœ‰æŒ‡å®šé€€å‡ºçŠ¶æ€ç æ—¶ï¼Œåˆ™é‡‡å–å‰ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;flag=1;exit 2&#125;&#123;&#125;END&#123;if(flag)&#123;exit 1&#125;&#125;&#x27;</span></span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $?</span></span><br><span class="line">1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;flag=1;exit 2&#125;&#123;&#125;END&#123;if(flag)&#123;exit&#125;&#125;&#x27;</span></span>   </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $?</span></span><br><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="åå››ã€æ•°ç»„ğŸŸ">åå››ã€æ•°ç»„ğŸŸ</h2><p>awkæ•°ç»„ç‰¹æ€§ï¼š</p><ul><li>awkçš„æ•°ç»„æ˜¯å…³è”æ•°ç»„(å³key/valueæ–¹å¼çš„hashæ•°æ®ç»“æ„)ï¼Œç´¢å¼•ä¸‹æ ‡å¯ä¸ºæ•°å€¼(ç”šè‡³æ˜¯è´Ÿæ•°ã€å°æ•°ç­‰)ï¼Œä¹Ÿå¯ä¸ºå­—ç¬¦ä¸²<ul><li>åœ¨å†…éƒ¨ï¼Œawkæ•°ç»„çš„ç´¢å¼•å…¨éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå³ä½¿æ˜¯æ•°å€¼ç´¢å¼•åœ¨ä½¿ç”¨æ—¶å†…éƒ¨ä¹Ÿä¼šè½¬æ¢æˆå­—ç¬¦ä¸²</li><li>awkçš„æ•°ç»„å…ƒç´ çš„é¡ºåºå’Œå…ƒç´ æ’å…¥æ—¶çš„é¡ºåºå¾ˆå¯èƒ½æ˜¯ä¸ç›¸åŒçš„</li></ul></li><li>awkæ•°ç»„æ”¯æŒæ•°ç»„çš„æ•°ç»„</li></ul><h3 id="1ã€awkè®¿é—®ã€èµ‹å€¼æ•°ç»„å…ƒç´ ">1ã€awkè®¿é—®ã€èµ‹å€¼æ•°ç»„å…ƒç´ </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr[idx]</span><br><span class="line">arr[idx] = value</span><br></pre></td></tr></table></figure><p>ç´¢å¼•å¯ä»¥æ˜¯æ•´æ•°ã€è´Ÿæ•°ã€0ã€å°æ•°ã€å­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯æ•°å€¼ç´¢å¼•ï¼Œä¼šæŒ‰ç…§CONVFMTå˜é‡æŒ‡å®šçš„æ ¼å¼å…ˆè½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    arr[1]   = 11</span><br><span class="line">    arr[&quot;1&quot;] = 111</span><br><span class="line">    arr[&quot;a&quot;] = &quot;aa&quot;</span><br><span class="line">    arr[-1]  = -11</span><br><span class="line">    arr[4.3] = 4.33</span><br><span class="line">    print arr[1]     # 111</span><br><span class="line">    print arr[&quot;1&quot;]   # 111</span><br><span class="line">    print arr[&quot;a&quot;]   # aa</span><br><span class="line">    print arr[-1]    # -11</span><br><span class="line">    print arr[4.3]   # 4.33</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®æ•°ç»„ä¸­ä¸å­˜åœ¨çš„å…ƒç´ æ—¶ï¼Œä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä¼šåˆ›å»ºè¿™ä¸ªå…ƒç´ å¹¶å°†å…¶å€¼è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²</strong>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    arr[-1]=3;</span><br><span class="line">    print length(arr);  # 1</span><br><span class="line">    print arr[1];</span><br><span class="line">    print length(arr)   # 2</span><br><span class="line">  &#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="2ã€awkæ•°ç»„é•¿åº¦">2ã€awkæ•°ç»„é•¿åº¦</h3><p>awkæä¾›äº†<code>length()</code>å‡½æ•°æ¥è·å–æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨äºè·å–å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚è¿˜å¯ä»¥è·å–æ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²åçš„å­—ç¬¦æ•°é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;arr[1]=1;arr[2]=2;print length(arr);print length(&quot;hello&quot;)&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="3ã€awkåˆ é™¤æ•°ç»„å…ƒç´ ">3ã€awkåˆ é™¤æ•°ç»„å…ƒç´ </h3><ul><li>delete arr[idx]ï¼šåˆ é™¤æ•°ç»„ arr[idx]å…ƒç´ ï¼Œåˆ é™¤ä¸å­˜åœ¨çš„å…ƒç´ ä¸ä¼šæŠ¥é”™</li><li><code>delete arr</code>ï¼šåˆ é™¤æ•°ç»„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;arr[1]=1;arr[2]=2;arr[3]=3;delete arr[2];print length(arr)&#125;&#x27;</span></span></span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="4ã€awkæ£€æµ‹æ˜¯å¦æ˜¯æ•°ç»„">4ã€awkæ£€æµ‹æ˜¯å¦æ˜¯æ•°ç»„</h3><p><code>isarray(arr)</code>å¯ç”¨äºæ£€æµ‹arræ˜¯å¦æ˜¯æ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„åˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;</span><br><span class="line">    arr[1]=1;</span><br><span class="line">    print isarray(arr);</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="5ã€awkæµ‹è¯•å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­">5ã€awkæµ‹è¯•å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­</h3><p>ä¸è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥æµ‹è¯•å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(arr[&quot;x&quot;] != &quot;&quot;)&#123;...&#125;</span><br></pre></td></tr></table></figure><p>è¿™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>å¦‚æœä¸å­˜åœ¨arr[â€œxâ€]ï¼Œåˆ™ä¼šç«‹å³åˆ›å»ºè¯¥å…ƒç´ ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²</li><li>æœ‰äº›å…ƒç´ çš„å€¼æœ¬èº«å°±æ˜¯ç©ºå­—ç¬¦ä¸²</li></ul><p>åº”å½“ä½¿ç”¨æ•°ç»„æˆå‘˜æµ‹è¯•æ“ä½œç¬¦inæ¥æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨æ„ï¼Œidxä¸è¦ä½¿ç”¨indexï¼Œå®ƒæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°</span></span><br><span class="line">if (idx in arr)&#123;...&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä¼šæµ‹è¯•ç´¢å¼•idxæ˜¯å¦åœ¨æ•°ç»„ä¸­ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›1ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        arr[1]=1;</span><br><span class="line">        arr[2]=2;</span><br><span class="line">        arr[3]=3;</span><br><span class="line">        arr[1]=&quot;&quot;;</span><br><span class="line">        delete arr[2];</span><br><span class="line">        print (1 in arr);  # 1</span><br><span class="line">        print (2 in arr);  # 0</span><br><span class="line">    &#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="6ã€awkéå†æ•°ç»„">6ã€awkéå†æ•°ç»„</h3><p>awkæä¾›äº†ä¸€ç§forå˜ä½“æ¥éå†æ•°ç»„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for(idx in arr)&#123;print arr[idx]&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºawkæ•°ç»„æ˜¯å…³è”æ•°ç»„ï¼Œå…ƒç´ æ˜¯ä¸è¿ç»­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰é¡ºåºã€‚éå†awkæ•°ç»„æ—¶ï¼Œé¡ºåºæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        arr[&quot;one&quot;] = 1</span><br><span class="line">        arr[&quot;two&quot;] = 2</span><br><span class="line">        arr[&quot;three&quot;] = 3</span><br><span class="line">        arr[&quot;four&quot;] = 4</span><br><span class="line">        arr[&quot;five&quot;] = 5</span><br><span class="line">        </span><br><span class="line">        for(i in arr)&#123;</span><br><span class="line">            print i &quot; -&gt; &quot; arr[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œä¸è¦éšæ„ä½¿ç”¨<code>for(i=0;i&lt;length(arr);i++)</code>æ¥éå†æ•°ç»„ï¼Œå› ä¸ºawkæ•°ç»„æ˜¯å…³è”æ•°ç»„ã€‚ä½†å¦‚æœå·²ç»æ˜ç¡®çŸ¥é“æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ç´¢å¼•éƒ½ä½äºæŸä¸ªæ•°å€¼èŒƒå›´å†…ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¯¥æ–¹å¼è¿›è¡Œéå†ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        arr[1] = &quot;one&quot;</span><br><span class="line">        arr[2] = &quot;two&quot;</span><br><span class="line">        arr[3] = &quot;three&quot;</span><br><span class="line">        arr[4] = &quot;four&quot;</span><br><span class="line">        arr[5] = &quot;five&quot;</span><br><span class="line">        arr[10]= &quot;ten&quot;</span><br><span class="line"></span><br><span class="line">        for(i=0;i&lt;=10;i++)&#123;</span><br><span class="line">            if(i in arr)&#123;</span><br><span class="line">                print arr[i]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><h3 id="7ã€awk-å­æ•°ç»„">7ã€awk å­æ•°ç»„</h3><p>å­æ•°ç»„æ˜¯æŒ‡æ•°ç»„ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå³Array of Arrayï¼Œå®ƒä¹Ÿç§°ä¸ºå­æ•°ç»„(subarray)ã€‚</p><p>awkä¹Ÿæ”¯æŒå­æ•°ç»„ï¼Œåœ¨æ•ˆæœä¸Šå³æ˜¯åµŒå¥—æ•°ç»„æˆ–å¤šç»´æ•°ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a[1][1] = 11</span><br><span class="line">a[1][2] = 12</span><br><span class="line">a[1][3] = 13</span><br><span class="line">a[2][1] = 21</span><br><span class="line">a[2][2] = 22</span><br><span class="line">a[2][3] = 23</span><br><span class="line">a[2][4][1] = 241</span><br><span class="line">a[2][4][2] = 242</span><br><span class="line">a[2][4][1] = 241</span><br><span class="line">a[2][4][3] = 243</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¦‚ä¸‹æ–¹å¼éå†äºŒç»´æ•°ç»„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(i in a)&#123;</span><br><span class="line">    for (j in a[i])&#123;</span><br><span class="line">        if(isarray(a[i][j]))&#123;</span><br><span class="line">            continue</span><br><span class="line">        &#125;</span><br><span class="line">        print a[i][j]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8ã€awkæŒ‡å®šæ•°ç»„éå†é¡ºåº">8ã€awkæŒ‡å®šæ•°ç»„éå†é¡ºåº</h3><p>ç”±äºawkæ•°ç»„æ˜¯å…³è”æ•°ç»„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>for(idx in arr)</code>éå†æ•°ç»„æ—¶é¡ºåºæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚</p><p>ä½†æ˜¯gawkæä¾›äº†<code>PROCINFO[&quot;sorted_in&quot;]</code>æ¥æŒ‡å®šéå†çš„å…ƒç´ é¡ºåºã€‚å®ƒå¯ä»¥è®¾ç½®ä¸ºä¸¤ç§ç±»å‹çš„å€¼ï¼š</p><ul><li>è®¾ç½®ä¸ºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</li><li>è®¾ç½®ä¸ºä¸‹é¢è¿™äº›awké¢„å®šä¹‰å¥½çš„å€¼ï¼š<ul><li><code>@unsorted</code>ï¼šé»˜è®¤å€¼ï¼Œéå†æ—¶æ— åº</li><li><code>@ind_str_asc</code>ï¼šç´¢å¼•æŒ‰å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹å¼å‡åºéå†</li><li><code>@ind_str_desc</code>ï¼šç´¢å¼•æŒ‰å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹å¼é™åºéå†</li><li><code>@ind_num_asc</code>ï¼šç´¢å¼•å¼ºåˆ¶æŒ‰ç…§æ•°å€¼æ¯”è¾ƒæ–¹å¼å‡åºéå†ã€‚æ‰€ä»¥æ— æ³•è½¬æ¢ä¸ºæ•°å€¼çš„å­—ç¬¦ä¸²ç´¢å¼•å°†å½“ä½œæ•°å€¼0è¿›è¡Œæ¯”è¾ƒ</li><li><code>@ind_num_desc</code>ï¼šç´¢å¼•å¼ºåˆ¶æŒ‰ç…§æ•°å€¼æ¯”è¾ƒæ–¹å¼é™åºéå†ã€‚æ‰€ä»¥æ— æ³•è½¬æ¢ä¸ºæ•°å€¼çš„å­—ç¬¦ä¸²ç´¢å¼•å°†å½“ä½œæ•°å€¼0è¿›è¡Œæ¯”è¾ƒ</li><li><code>@val_type_asc</code>ï¼šæŒ‰å€¼å‡åºæ¯”è¾ƒï¼Œæ­¤å¤–æ•°å€¼ç±»å‹å‡ºç°åœ¨å‰é¢ï¼Œæ¥ç€æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæœ€åæ˜¯æ•°ç»„ç±»(å³è®¤ä¸º<code>num&lt;str&lt;arr</code>)</li><li><code>@val_type_desc</code>ï¼šæŒ‰å€¼é™åºæ¯”è¾ƒï¼Œæ­¤å¤–æ•°ç»„ç±»å‹å‡ºç°åœ¨å‰é¢ï¼Œæ¥ç€æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæœ€åæ˜¯æ•°å€¼å‹(å³è®¤ä¸º<code>num&lt;str&lt;arr</code>)</li><li><code>@val_str_asc</code>ï¼šæŒ‰å€¼å‡åºæ¯”è¾ƒï¼Œæ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²å†æ¯”è¾ƒï¼Œè€Œæ•°ç»„å‡ºç°åœ¨å°¾éƒ¨(å³è®¤<code>str&lt;arr</code>)</li><li><code>@val_str_desc</code>ï¼šæŒ‰å€¼é™åºæ¯”è¾ƒï¼Œæ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²å†æ¯”è¾ƒï¼Œè€Œæ•°ç»„å‡ºç°åœ¨å¤´éƒ¨(å³è®¤<code>str&lt;arr</code>)</li><li><code>@val_num_asc</code>ï¼šæŒ‰å€¼å‡åºæ¯”è¾ƒï¼Œå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼å†æ¯”è¾ƒï¼Œè€Œæ•°ç»„å‡ºç°åœ¨å°¾éƒ¨(å³è®¤<code>num&lt;arr</code>)</li><li><code>@val_num_desc</code>ï¼šæŒ‰å€¼é™åºæ¯”è¾ƒï¼Œå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼å†æ¯”è¾ƒï¼Œè€Œæ•°ç»„å‡ºç°åœ¨å¤´éƒ¨(å³è®¤ä¸º<code>num&lt;arr</code>)</li></ul></li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    arr[1] = &quot;one&quot;</span><br><span class="line">    arr[2] = &quot;two&quot;</span><br><span class="line">    arr[3] = &quot;three&quot;</span><br><span class="line">    arr[&quot;a&quot;] =&quot;aa&quot;</span><br><span class="line">    arr[&quot;b&quot;] =&quot;bb&quot;</span><br><span class="line">    arr[10]= &quot;ten&quot;</span><br><span class="line"></span><br><span class="line">    #PROCINFO[&quot;sorted_in&quot;] = &quot;@ind_num_asc&quot;</span><br><span class="line">    #PROCINFO[&quot;sorted_in&quot;] = &quot;@ind_str_asc&quot;</span><br><span class="line">    PROCINFO[&quot;sorted_in&quot;] = &quot;@val_str_asc&quot;</span><br><span class="line">    for(idx in arr)&#123;</span><br><span class="line">      print idx &quot; -&gt; &quot; arr[idx]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">a -&gt; aa</span><br><span class="line">b -&gt; bb</span><br><span class="line">1 -&gt; one</span><br><span class="line">2 -&gt; two</span><br><span class="line">3 -&gt; three</span><br><span class="line">10 -&gt; ten</span><br></pre></td></tr></table></figure><h2 id="åäº”ã€awk-è‡ªå®šä¹‰å‡½æ•°ğŸ ">åäº”ã€awk è‡ªå®šä¹‰å‡½æ•°ğŸ </h2><p>å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°å°†å¤šä¸ªæ“ä½œæ•´åˆåœ¨ä¸€èµ·ã€‚å‡½æ•°å®šä¹‰ä¹‹åï¼Œå¯ä»¥åˆ°å¤„å¤šæ¬¡è°ƒç”¨ï¼Œä»è€Œæ–¹ä¾¿å¤ç”¨ã€‚</p><h3 id="1ã€å‡½æ•°å®šä¹‰">1ã€å‡½æ•°å®šä¹‰</h3><p>ä½¿ç”¨functionå…³é”®å­—æ¥å®šä¹‰å‡½æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function func_name([parameters])&#123;</span><br><span class="line">    function_body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºgawkæ¥è¯´ï¼Œä¹Ÿæ”¯æŒfuncå…³é”®å­—æ¥å®šä¹‰å‡½æ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func func_name()&#123;&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°å¯ä»¥å®šä¹‰åœ¨ä¸‹é¢ä½¿ç”¨ä¸‹åˆ’çº¿çš„åœ°æ–¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;_ BEGIN&#123;&#125; _ MAIN&#123;&#125; _ END&#123;&#125; _&#x27;</span><br></pre></td></tr></table></figure><p>æ— è®ºå‡½æ•°å®šä¹‰åœ¨å“ªé‡Œï¼Œéƒ½èƒ½åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼Œå› ä¸ºawkåœ¨BEGINä¹‹å‰ï¼Œä¼šå…ˆç¼–è¯‘awkä»£ç ä¸ºå†…éƒ¨æ ¼å¼ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¼šå°†æ‰€æœ‰å‡½æ•°éƒ½é¢„å®šä¹‰å¥½ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        f()</span><br><span class="line">        f()</span><br><span class="line">        f()</span><br><span class="line">    &#125;</span><br><span class="line">    function f()&#123;</span><br><span class="line">        print &quot;æ˜ŸæœŸä¸€&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸäºŒ&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸä¸‰&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸå››&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸäº”&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸå…­&quot;</span><br><span class="line">        print &quot;æ˜ŸæœŸæ—¥&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><h3 id="2ã€awkå‡½æ•°çš„returnè¯­å¥">2ã€awkå‡½æ•°çš„returnè¯­å¥</h3><p>å¦‚æœæƒ³è¦è®©å‡½æ•°æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‡½æ•°ä¸­ä½¿ç”¨returnè¯­å¥ã€‚</p><p>returnè¯­å¥ä¹Ÿå¯ä»¥ç”¨æ¥ç«‹å³ç»“æŸå‡½æ•°çš„æ‰§è¡Œã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    function add()&#123;</span><br><span class="line">        return 40</span><br><span class="line">    &#125;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        print add()</span><br><span class="line">        res = add() </span><br><span class="line">        print res</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡º</span></span><br><span class="line">40</span><br><span class="line">40</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ä½¿ç”¨returnæˆ–returnæ²¡æœ‰å‚æ•°ï¼Œåˆ™è¿”å›å€¼ä¸ºç©ºï¼Œå³ç©ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  function f1()&#123;        &#125;</span><br><span class="line">  function f2()&#123;return  &#125;</span><br><span class="line">  function f3()&#123;return 3&#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    print &quot;-&quot;f1()&quot;-&quot;</span><br><span class="line">    print &quot;-&quot;f2()&quot;-&quot;</span><br><span class="line">    print &quot;-&quot;f3()&quot;-&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡º</span></span><br><span class="line">--</span><br><span class="line">--</span><br><span class="line">-3-</span><br></pre></td></tr></table></figure><h3 id="3ã€awkå‡½æ•°å‚æ•°">3ã€awkå‡½æ•°å‚æ•°</h3><p>ä¸ºäº†è®©å‡½æ•°å’Œè°ƒç”¨è€…èƒ½å¤Ÿè¿›è¡Œæ•°æ®çš„äº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  function f(a,b)&#123;</span><br><span class="line">    print a</span><br><span class="line">    print b</span><br><span class="line">    return a+b</span><br><span class="line">  &#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    x=10</span><br><span class="line">    y=20</span><br><span class="line">    res = f(x,y)</span><br><span class="line">    print res</span><br><span class="line">    print f(x,y)</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå®ç°ä¸€ä¸ªé‡å¤æŸå­—ç¬¦ä¸²æŒ‡å®šæ¬¡æ•°çš„å‡½æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    function repeat(str,cnt,res_str)&#123;</span><br><span class="line">        for(i=0;i&lt;cnt;i++)&#123;</span><br><span class="line">            res_str = res_str&quot;&quot;str</span><br><span class="line">        &#125;</span><br><span class="line">        return res_str</span><br><span class="line">    &#125;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        print repeat(&quot;abc&quot;,3)</span><br><span class="line">        print repeat(&quot;-&quot;,30)</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">abcabcabc</span><br><span class="line">------------------------------</span><br></pre></td></tr></table></figure><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚æ•°é‡å¯ä»¥æ¯”å½¢å‚æ•°é‡å°‘ï¼Œä¹Ÿå¯ä»¥æ¯”å½¢å‚æ•°é‡å¤šã€‚ä½†æ˜¯ï¼Œåœ¨å¤šäºå½¢å‚æ•°é‡æ—¶ä¼šç»™å‡ºè­¦å‘Šä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    function repeat(str,cnt,res_str)&#123;</span><br><span class="line">        for(i=0;i&lt;cnt;i++)&#123;</span><br><span class="line">            res_str = res_str&quot;&quot;str</span><br><span class="line">        &#125;</span><br><span class="line">        return res_str</span><br><span class="line">    &#125;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        print repeat(&quot;abc&quot;,3)</span><br><span class="line">        print repeat(&quot;-&quot;,30,1,2,3,4)</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line">abcabcabc</span><br><span class="line">awk: cmd. line:10: warning: function `repeat&#x27; called with more arguments than declared</span><br><span class="line">1------------------------------</span><br></pre></td></tr></table></figure><h3 id="4ã€awkå‡½æ•°å‚æ•°æ•°æ®ç±»å‹å†²çªé—®é¢˜">4ã€awkå‡½æ•°å‚æ•°æ•°æ®ç±»å‹å†²çªé—®é¢˜</h3><p>å¦‚æœå‡½æ•°å†…éƒ¨ä½¿ç”¨å‚æ•°çš„ç±»å‹å’Œå‡½æ•°å¤–éƒ¨å˜é‡çš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¼šå‡ºç°æ•°æ®ç±»å‹ä¸åŒè€Œå¯¼è‡´æŠ¥é”™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    function f(a)&#123;</span><br><span class="line">        a[1]=30</span><br><span class="line">    &#125;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        a=&quot;hello world&quot;</span><br><span class="line">        f(a)   # æŠ¥é”™</span><br><span class="line"></span><br><span class="line">        f(x)</span><br><span class="line">        x=10   # æŠ¥é”™</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºæŠ¥é”™å¦‚ä¸‹ï¼š</span></span><br><span class="line">awk: cmd. line:3: fatal: attempt to use scalar parameter `a&#x27; as an array</span><br></pre></td></tr></table></figure><p>å‡½æ•°å†…éƒ¨å‚æ•°å¯¹åº”çš„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆå¤–é¢å¯¹åº”çš„ä¹Ÿå¿…é¡»æ˜¯æ•°ç»„ç±»å‹ã€‚</p><h3 id="5ã€awkå‚æ•°æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’">5ã€awkå‚æ•°æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’</h3><p>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†æ•°æ®ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæœ‰ä¸¤ç§ä¼ é€’æ–¹å¼ï¼š</p><ul><li>ä¼ é€’æ™®é€šå˜é‡æ—¶ï¼Œæ˜¯æŒ‰å€¼æ‹·è´ä¼ é€’<ul><li>ç›´æ¥æ‹·è´æ™®é€šå˜é‡çš„<strong>å€¼</strong>åˆ°å‡½æ•°ä¸­</li><li>å‡½æ•°å†…éƒ¨ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å¤–éƒ¨</li></ul></li><li>ä¼ é€’æ•°ç»„æ—¶ï¼Œæ˜¯æŒ‰å¼•ç”¨ä¼ é€’<ul><li>å‡½æ•°å†…éƒ¨ä¿®æ”¹ä¼šå½±å“åˆ°å¤–éƒ¨</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¼ é€’æ™®é€šå˜é‡ï¼šæŒ‰å€¼æ‹·è´</span></span><br><span class="line">awk &#x27;</span><br><span class="line">  function modify(a)&#123;</span><br><span class="line">    a=30</span><br><span class="line">    print a</span><br><span class="line">  &#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    a=40</span><br><span class="line">    modify(a)</span><br><span class="line">    print a</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">30</span><br><span class="line">40</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¼ é€’æ•°ç»„ï¼šæŒ‰å¼•ç”¨æ‹·è´</span></span><br><span class="line">awk &#x27;</span><br><span class="line">  function modify(a)&#123;</span><br><span class="line">    a[1]=20</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    a[1]=10</span><br><span class="line">    modify(a)</span><br><span class="line">    print a[1]</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line">20</span><br></pre></td></tr></table></figure><h3 id="6ã€awkä½œç”¨åŸŸé—®é¢˜">6ã€awkä½œç”¨åŸŸé—®é¢˜</h3><p>awkåªæœ‰åœ¨å‡½æ•°å‚æ•°ä¸­æ‰æ˜¯å±€éƒ¨å˜é‡ï¼Œå…¶å®ƒåœ°æ–¹å®šä¹‰çš„å˜é‡å‡ä¸ºå…¨å±€å˜é‡ã€‚</p><p><strong>å‡½æ•°å†…éƒ¨æ–°å¢çš„å˜é‡æ˜¯å…¨å±€å˜é‡</strong>ï¼Œä¼šå½±å“åˆ°å…¨å±€ï¼Œæ‰€ä»¥åœ¨å‡½æ•°é€€å‡ºåä»ç„¶èƒ½è®¿é—®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  function f()&#123;</span><br><span class="line">    a=30  # æ–°å¢çš„å˜é‡ï¼Œæ˜¯å…¨å±€å˜é‡</span><br><span class="line">    print &quot;in f: &quot; a</span><br><span class="line">  &#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    a=40</span><br><span class="line">    f()</span><br><span class="line">    print a  # 30</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>å‡½æ•°å‚æ•°ä¼šé®æ©å…¨å±€åŒåå˜é‡ï¼Œæ‰€ä»¥åœ¨å‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ— æ³•è®¿é—®åˆ°æˆ–æ“ä½œä¸å‚æ•°åŒåçš„å…¨å±€å˜é‡ï¼Œå‡½æ•°é€€å‡ºæ—¶ä¼šè‡ªåŠ¨æ’¤æ‰é®æ©ï¼Œè¿™æ—¶æ‰èƒ½è®¿é—®å…¨å±€å˜é‡ã€‚æ‰€ä»¥ï¼Œå‚æ•°å…·æœ‰å±€éƒ¨æ•ˆæœã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  function f(a)&#123;</span><br><span class="line">    print a    # 50ï¼ŒæŒ‰å€¼æ‹·è´ï¼Œå’Œå…¨å±€aå·²ç»æ²¡æœ‰å…³ç³»</span><br><span class="line">    a=40</span><br><span class="line">    print a    # 40</span><br><span class="line">  &#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    a=50</span><br><span class="line">    f(a)</span><br><span class="line">    print a     # 50ï¼Œå‡½æ•°é€€å‡ºï¼Œé‡æ–°è®¿é—®å…¨å±€å˜é‡</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>ç”±äºå‡½æ•°å†…éƒ¨æ–°å¢å˜é‡å‡ä¸ºå…¨å±€å˜é‡ï¼Œawkä¹Ÿæ²¡æœ‰æä¾›å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªå˜é‡ä½¿å…¶æˆä¸ºå±€éƒ¨å˜é‡ã€‚æ‰€ä»¥ï¼Œawkåªèƒ½å°†æœ¬è¯¥å‡ºç°åœ¨å‡½æ•°ä½“å†…çš„å±€éƒ¨å˜é‡æ”¾åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œåªè¦è°ƒç”¨å‡½æ•°æ—¶ä¸è¦ä¸ºè¿™äº›å‚æ•°ä¼ é€’æ•°æ®å³å¯ï¼Œä»è€Œå®ç°å±€éƒ¨å˜é‡çš„æ•ˆæœã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  function f(a,b       ,c,d)&#123;</span><br><span class="line">  </span><br><span class="line">    # a,bæ˜¯å‚æ•°ï¼Œè°ƒç”¨æ—¶éœ€ä¼ é€’ä¸¤ä¸ªå‚æ•°</span><br><span class="line">    # c,dæ˜¯å±€éƒ¨å˜é‡ï¼Œè°ƒç”¨æ—¶ä¸è¦ç»™cå’Œdä¼ é€’æ•°æ®</span><br><span class="line">    a=30</span><br><span class="line">    b=40</span><br><span class="line">    c=50</span><br><span class="line">    d=60</span><br><span class="line">    e=70  # å…¨å±€å˜é‡</span><br><span class="line"></span><br><span class="line">    print a,b,c,d,e  # 30 40 50 60 70</span><br><span class="line">  &#125;</span><br><span class="line">  BEGIN&#123;</span><br><span class="line">    a=31</span><br><span class="line">    b=41</span><br><span class="line">    c=51</span><br><span class="line">    d=61</span><br><span class="line">    f(a,b)  # è°ƒç”¨å‡½æ•°æ—¶å€¼ä¼ é€’ä¸¤ä¸ªå‚æ•°</span><br><span class="line">    print a,b,c,d,e  # 31 41 51 61 70</span><br><span class="line">  &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œawkå¯¹å‡½æ•°å‚æ•°åˆ—è¡¨åšäº†ä¸¤ç±»åŒºåˆ†ï¼š</p><ul><li>argumentsï¼šè°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°</li><li>local variablesï¼šè°ƒç”¨å‡½æ•°æ—¶çœç•¥çš„å‚æ•°</li></ul><p>ä¸ºäº†åŒºåˆ†argumentså’Œlocal variablesï¼Œçº¦å®šä¿—æˆçš„ï¼Œå°†local variablesæ”¾åœ¨ä¸€å¤§å †ç©ºæ ¼åé¢æ¥æç¤ºç”¨æˆ·ã€‚ä¾‹å¦‚<code>function name(a,b, c,d)</code>è¡¨ç¤ºè°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”å½“ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œcå’Œdæ˜¯æœ¬å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼Œä¸è¦ä¼ é€’å¯¹åº”çš„å‚æ•°ã€‚</p><p>åŒºåˆ†å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼š</p><ul><li>å‚æ•°æä¾›äº†å‡½æ•°å’Œå®ƒè°ƒç”¨è€…è¿›è¡Œæ•°æ®äº¤äº’çš„æ–¹å¼</li><li>å±€éƒ¨å˜é‡æ˜¯ä¸´æ—¶å­˜æ”¾æ•°æ®çš„åœ°æ–¹</li></ul><p>argumentséƒ¨åˆ†ä½“ç°çš„æ˜¯å‡½æ•°è°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°åœ¨å‡½æ•°å†…éƒ¨ä¼šé®æ©å…¨å±€åŒåå˜é‡ã€‚ä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‡½æ•°å†…éƒ¨è®¿é—®ä¸äº†å…¨å±€çš„aå’Œbï¼Œæ‰€æœ‰å¯¹aå’Œbçš„æ“ä½œéƒ½æ˜¯å‡½æ•°å†…éƒ¨çš„ï¼Œå‡½æ•°é€€å‡ºåæ‰èƒ½é‡æ–°è®¿é—®å…¨å±€aå’Œbã€‚å› æ­¤ï¼Œargumentsä¹Ÿæœ‰å±€éƒ¨ç‰¹æ€§ã€‚</p><p>local variablesæ˜¯awkå®ç°çœŸæ­£å±€éƒ¨å˜é‡çš„æŠ€å·§ï¼Œåªæ˜¯å› ä¸ºå‡½æ•°å†…éƒ¨æ–°å¢çš„å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œæ‰€ä»¥é€€è€Œæ±‚å…¶æ¬¡å°†å…¶æ”¾åœ¨å‚æ•°åˆ—è¡¨ä¸Šæ¥å®ç°å±€éƒ¨å˜é‡ã€‚</p><h2 id="åå…­ã€awkæ•°å€¼ç±»å†…ç½®å‡½æ•°ğŸŒ³">åå…­ã€awkæ•°å€¼ç±»å†…ç½®å‡½æ•°ğŸŒ³</h2><h3 id="1ã€awkæ•°å€¼ç±»å†…ç½®å‡½æ•°">1ã€awkæ•°å€¼ç±»å†…ç½®å‡½æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int(expr)     æˆªæ–­ä¸ºæ•´æ•°ï¼šint(123.45)å’Œint(&quot;123abc&quot;)éƒ½è¿”å›123ï¼Œint(&quot;a123&quot;)è¿”å›0</span><br><span class="line">sqrt(expr)    è¿”å›å¹³æ–¹æ ¹</span><br><span class="line">rand()        è¿”å›[0,1)ä¹‹é—´çš„éšæœºæ•°ï¼Œé»˜è®¤ä½¿ç”¨srand(1)ä½œä¸ºç§å­å€¼</span><br><span class="line">srand([expr]) è®¾ç½®rand()ç§å­å€¼ï¼Œçœç•¥å‚æ•°æ—¶å°†å–å½“å‰æ—¶é—´çš„epochå€¼(ç²¾ç¡®åˆ°ç§’çš„epoch)ä½œä¸ºç§å­å€¼</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;srand();print rand()&#125;&#x27;</span></span></span><br><span class="line">0.0379114</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;srand();print rand()&#125;&#x27;</span></span></span><br><span class="line">0.0779783</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;srand(2);print rand()&#125;&#x27;</span></span></span><br><span class="line">0.893104</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;srand(2);print rand()&#125;&#x27;</span></span></span><br><span class="line">0.893104</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆ<code>[10,100]</code>ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;srand();print 10+int(91*rand())&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="2ã€awkå­—ç¬¦ä¸²ç±»å†…ç½®å‡½æ•°">2ã€awkå­—ç¬¦ä¸²ç±»å†…ç½®å‡½æ•°</h3><p>æ³¨æ„ï¼Œawkä¸­æ¶‰åŠåˆ°<strong>å­—ç¬¦ç´¢å¼•çš„å‡½æ•°ï¼Œç´¢å¼•ä½éƒ½æ˜¯ä»1å¼€å§‹è®¡ç®—</strong>ï¼Œå’Œå…¶å®ƒè¯­è¨€ä»0å¼€å§‹ä¸ä¸€æ ·ã€‚</p><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬å‡½æ•°">ï¼ˆ1ï¼‰åŸºæœ¬å‡½æ•°</h4><ul><li><p><code>sprintf(format, expression1, ...)</code>ï¼šè¿”å›æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²</p><ul><li><code>a=sprintf(&quot;%s\n&quot;,&quot;abc&quot;)</code></li></ul></li><li><p><code>length()</code>ï¼šè¿”å›å­—ç¬¦ä¸²å­—ç¬¦æ•°é‡ã€æ•°ç»„å…ƒç´ æ•°é‡ã€æˆ–æ•°å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²åçš„å­—ç¬¦æ•°é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        print length(1.23)     # 4   # CONVFMT %.6g</span><br><span class="line"></span><br><span class="line">        print 1.234567         # 1.23457</span><br><span class="line">        print length(1.234567) # 7 </span><br><span class="line">        print length(122341223432.1213241234)  # 11</span><br><span class="line">    &#125;&#x27;</span><br></pre></td></tr></table></figure></li><li><p><code>strtonum(str)</code>ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåè¿›åˆ¶æ•°å€¼</p><ul><li>å¦‚æœsträ»¥0å¼€å¤´ï¼Œåˆ™å°†å…¶è¯†åˆ«ä¸º8è¿›åˆ¶</li><li>å¦‚æœsträ»¥0xæˆ–0Xå¼€å¤´ï¼Œåˆ™å°†å…¶è¯†åˆ«ä¸º16è¿›åˆ¶</li></ul></li><li><p><code>tolower(str)</code>ï¼šè½¬æ¢ä¸ºå°å†™</p></li><li><p><code>toupper(str)</code>ï¼šè½¬æ¢ä¸ºå¤§å†™</p></li><li><p><code>index(str,substr)</code>ï¼šä»strä¸­æœç´¢substr(å­ä¸²)ï¼Œè¿”å›æœç´¢åˆ°çš„ç´¢å¼•ä½ç½®(ç´¢å¼•ä»1å¼€å§‹)ï¼Œæœç´¢ä¸åˆ°åˆ™è¿”å›0</p></li></ul><h4 id="ï¼ˆ2ï¼‰awk-substr">ï¼ˆ2ï¼‰awk substr()</h4><ul><li><code>substr(string,start[,length])</code>ï¼šä»stringä¸­æˆªå–å­ä¸²</li></ul><p>startæ˜¯æˆªå–çš„èµ·å§‹ç´¢å¼•ä½(ç´¢å¼•ä½ä»1å¼€å§‹è€Œé0)ï¼Œlengthè¡¨ç¤ºæˆªå–çš„å­ä¸²é•¿åº¦ã€‚å¦‚æœçœç•¥lengthï¼Œåˆ™è¡¨ç¤ºä»startå¼€å§‹æˆªå–å‰©ä½™æ‰€æœ‰å­—ç¬¦ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        str=&quot;abcdefgh&quot;</span><br><span class="line">        print substr(str,3)   # cdefgh</span><br><span class="line">        print substr(str,3,3) # cde</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>å¦‚æœstartå€¼å°äº1ï¼Œåˆ™å°†å…¶çœ‹ä½œä¸º1å¯¹å¾…ï¼Œå¦‚æœstartå¤§äºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p><p>å¦‚æœlengthå°äºæˆ–ç­‰äº0ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p><h4 id="ï¼ˆ3ï¼‰awk-split-å’Œpatsplit">ï¼ˆ3ï¼‰awk split()å’Œpatsplit()</h4><ul><li><code>split(string, array [, fieldsep [, seps ] ])</code>ï¼šå°†å­—ç¬¦ä¸²åˆ†å‰²åä¿å­˜åˆ°æ•°ç»„arrayä¸­ï¼Œæ•°ç»„ç´¢å¼•ä»1å¼€å§‹å­˜å‚¨ã€‚å¹¶è¿”å›åˆ†å‰²å¾—åˆ°çš„å…ƒç´ ä¸ªæ•°</li></ul><p>å…¶ä¸­fieldsepæŒ‡å®šåˆ†éš”ç¬¦ï¼Œå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ–¹å¼çš„ã€‚å¦‚æœä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨FSä½œä¸ºåˆ†éš”ç¬¦ï¼Œè€ŒFSçš„é»˜è®¤å€¼åˆæ˜¯ç©ºæ ¼ã€‚</p><p>sepsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¿å­˜äº†æ¯æ¬¡åˆ†å‰²æ—¶çš„åˆ†éš”ç¬¦ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split(&quot;abc-def-gho-pq&quot;,arr,&quot;-&quot;,seps)</span><br></pre></td></tr></table></figure><p>å…¶è¿”å›å€¼ä¸º4ã€‚åŒæ—¶å¾—åˆ°çš„æ•°ç»„aå’Œsepsä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr[1] = &quot;abc&quot;</span><br><span class="line">arr[2] = &quot;def&quot;</span><br><span class="line">arr[3] = &quot;gho&quot;</span><br><span class="line">arr[4] = &quot;pq&quot;</span><br><span class="line"></span><br><span class="line">seps[1] = &quot;-&quot;</span><br><span class="line">seps[2] = &quot;-&quot;</span><br><span class="line">seps[3] = &quot;-&quot;</span><br></pre></td></tr></table></figure><p>splitåœ¨å¼€å§‹å·¥ä½œæ—¶ï¼Œä¼šå…ˆæ¸…ç©ºæ•°ç»„ï¼Œæ‰€ä»¥ï¼Œå°†splitçš„stringå‚æ•°è®¾ç½®ä¸ºç©ºï¼Œå¯ä»¥ç”¨äºæ¸…ç©ºæ•°ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;arr[1]=1;split(&quot;&quot;,arr);print length(arr)&#125;&#x27;  # 0</span><br></pre></td></tr></table></figure><p>å¦‚æœåˆ†éš”ç¬¦æ— æ³•åŒ¹é…å­—ç¬¦ä¸²ï¼Œåˆ™æ•´ä¸ªå­—ç¬¦ä¸²å½“ä½œä¸€ä¸ªæ•°ç»„å…ƒç´ ä¿å­˜åˆ°æ•°ç»„arrayä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;split(&quot;abcde&quot;,arr,&quot;-&quot;);print arr[1]&#125;&#x27; # abcde</span><br></pre></td></tr></table></figure><ul><li><code>patsplit(string, array [, fieldpat [, seps ] ])</code>ï¼šç”¨æ­£åˆ™è¡¨è¾¾å¼fieldpatåŒ¹é…å­—ç¬¦ä¸²stringï¼Œå°†æ‰€æœ‰åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ä¿å­˜åˆ°æ•°ç»„arrayä¸­ï¼Œæ•°ç»„ç´¢å¼•ä»1å¼€å§‹å­˜å‚¨ã€‚è¿”å›å€¼æ˜¯arrayçš„å…ƒç´ ä¸ªæ•°ï¼Œå³åŒ¹é…æˆåŠŸäº†å¤šå°‘æ¬¡</li></ul><p>å¦‚æœçœç•¥fieldpatï¼Œåˆ™é»˜è®¤é‡‡ç”¨é¢„å®šä¹‰å˜é‡FPATçš„å€¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        patsplit(&quot;abcde&quot;,arr,&quot;[a-z]&quot;)</span><br><span class="line">        print arr[1]   # a</span><br><span class="line">        print arr[2]   # b</span><br><span class="line">        print arr[3]   # c</span><br><span class="line">        print arr[4]   # d</span><br><span class="line">        print arr[5]   # e</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰awk-match">ï¼ˆ4ï¼‰awk match()</h4><ul><li><code>match(string,reg[,arr])</code>ï¼šä½¿ç”¨regåŒ¹é…stringï¼Œè¿”å›åŒ¹é…æˆåŠŸçš„ç´¢å¼•ä½(ä»1å¼€å§‹è®¡æ•°)ï¼ŒåŒ¹é…å¤±è´¥åˆ™è¿”å›0ã€‚å¦‚æœæŒ‡å®šäº†arrå‚æ•°ï¼Œåˆ™arr[0]ä¿å­˜çš„æ˜¯åŒ¹é…æˆåŠŸçš„å­—ç¬¦ä¸²ï¼Œarr[1]ã€arr[2]ã€â€¦ä¿å­˜çš„æ˜¯å„ä¸ªåˆ†ç»„æ•è·çš„å†…å®¹</li></ul><p>matchåŒ¹é…æ—¶ï¼ŒåŒæ—¶ä¼šè®¾ç½®ä¸¤ä¸ªé¢„å®šä¹‰å˜é‡ï¼šRSTARTå’ŒRLENGTH</p><ul><li>åŒ¹é…æˆåŠŸæ—¶ï¼š<ul><li>RSTARTèµ‹å€¼ä¸ºåŒ¹é…æˆåŠŸçš„ç´¢å¼•ä½ï¼Œä»1å¼€å§‹è®¡æ•°</li><li>RLENGTHèµ‹å€¼ä¸ºåŒ¹é…æˆåŠŸçš„å­—ç¬¦é•¿åº¦</li></ul></li><li>åŒ¹é…å¤±è´¥æ—¶ï¼š<ul><li>RSTARTèµ‹å€¼ä¸º0</li><li>RLENGTHèµ‹å€¼ä¸º-1</li></ul></li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        where = match(&quot;foooobazbarrrr&quot;,&quot;(fo+).*(bar*)&quot;,arr)</span><br><span class="line">        print where   # 1</span><br><span class="line">        print arr[0]  # foooobazbarrrr</span><br><span class="line">        print arr[1]  # foooo</span><br><span class="line">        print arr[2]  # barrrr</span><br><span class="line">        print RSTART  # 1</span><br><span class="line">        print RLENGTH # 14</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>å› ä¸ºmatch()åŒ¹é…æˆåŠŸæ—¶è¿”å›å€¼ä¸ºé0ï¼Œè€ŒåŒ¹é…å¤±è´¥æ—¶è¿”å›å€¼ä¸º0ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å½“ä½œæ¡ä»¶åˆ¤æ–­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">  &#123;</span><br><span class="line">    if(match($0,/A[a-z]+/,arr))&#123;</span><br><span class="line">      print NR &quot; : &quot; arr[0]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#x27; a.txt</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰awk-sub-å’Œgsub">ï¼ˆ5ï¼‰awk sub()å’Œgsub()</h4><ul><li><code>sub(regexp, replacement [, target])</code></li><li><code>gsub(regexp, replacement [, target])</code>ï¼šsub()çš„å…¨å±€æ¨¡å¼</li></ul><p>sub()ä»å­—ç¬¦ä¸²targetä¸­è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œå¹¶ä½¿ç”¨replacementå¯¹ç¬¬ä¸€æ¬¡åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†è¿›è¡Œæ›¿æ¢ï¼Œæ›¿æ¢åä¿å­˜å›targetä¸­ã€‚è¿”å›æ›¿æ¢æˆåŠŸçš„æ¬¡æ•°ï¼Œå³0æˆ–1ã€‚</p><p>targetå¿…é¡»æ˜¯ä¸€ä¸ªå¯ä»¥èµ‹å€¼çš„å˜é‡åã€$Næˆ–æ•°ç»„å…ƒç´ åï¼Œä»¥ä¾¿ç”¨å®ƒæ¥ä¿å­˜æ›¿æ¢æˆåŠŸåçš„ç»“æœã€‚ä¸èƒ½æ˜¯å­—ç¬¦ä¸²å­—é¢é‡ï¼Œå› ä¸ºå®ƒæ— æ³•ä¿å­˜æ•°æ®ã€‚</p><p>å¦‚æœçœç•¥targetï¼Œåˆ™é»˜è®¤ä½¿ç”¨<code>$0</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœçœç•¥targetï¼Œæˆ–è€…targetæ˜¯<code>$N</code>ï¼Œé‚£ä¹ˆæ›¿æ¢æˆåŠŸåå°†ä¼šä½¿ç”¨OFSé‡æ–°è®¡ç®—<code>$0</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        str=&quot;water water everywhere&quot;</span><br><span class="line">        #how_many = sub(/at/, &quot;ith&quot;, str)</span><br><span class="line">        how_many = gsub(/at/, &quot;ith&quot;, str)</span><br><span class="line">        print how_many   # 1</span><br><span class="line">        print str        # wither water everywhere</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>åœ¨replacementå‚æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ç¬¦å·<code>&amp;</code>æ¥å¼•ç”¨åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ã€‚æ³¨æ„sub()å’Œgsub()ä¸èƒ½åœ¨replacementä¸­ä½¿ç”¨åå‘å¼•ç”¨<code>\N</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;</span><br><span class="line">    BEGIN&#123;</span><br><span class="line">        str = &quot;daabaaa&quot;</span><br><span class="line">        gsub(/a+/,&quot;C&amp;C&quot;,str)</span><br><span class="line">        print str  # dCaaCbaaa</span><br><span class="line">    &#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦åœ¨replacementä¸­ä½¿ç”¨<code>&amp;</code>çº¯å­—ç¬¦ï¼Œåˆ™è½¬ä¹‰å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sub(/a+/,&quot;C\\&amp;C&quot;,str)</span><br></pre></td></tr></table></figure><blockquote><p>ä¸¤æ ¹åæ–œçº¿ï¼š<br>å› ä¸ºawkåœ¨æ­£åˆ™å¼€å§‹å·¥ä½œæ—¶ï¼Œé¦–å…ˆä¼šæ‰«ææ‰€æœ‰awkä»£ç ç„¶åç¼–è¯‘æˆawkçš„å†…éƒ¨æ ¼å¼ï¼Œæ‰«ææœŸé—´ä¼šè§£æåæ–œçº¿è½¬ä¹‰ï¼Œä½¿å¾—<code>\\</code>å˜æˆä¸€æ ¹åæ–œçº¿ã€‚å½“çœŸæ­£å¼€å§‹è¿è¡Œåï¼Œsub()åˆè¦è§£æï¼Œè¿™æ—¶<code>\&amp;</code>æ‰è¡¨ç¤ºçš„æ˜¯å¯¹&amp;åšè½¬ä¹‰ã€‚<br>æ‰«æä»£ç é˜¶æ®µç§°ä¸ºè¯æ³•è§£æé˜¶æ®µï¼Œè¿è¡Œè§£æé˜¶æ®µç§°ä¸ºè¿è¡Œæ—¶è§£æé˜¶æ®µã€‚</p></blockquote><h4 id="ï¼ˆ6ï¼‰awk-gensub">ï¼ˆ6ï¼‰awk gensub()</h4><p>gawkæ”¯æŒçš„gensub()ï¼Œå®Œå…¨å¯ä»¥å–ä»£sub()å’Œgsub()ã€‚</p><ul><li><code>gensub(regexp, replacement, how [, target])</code>ï¼š</li></ul><p>å¯ä»¥æ›¿ä»£sub()å’Œgsub()ã€‚</p><p>howæŒ‡å®šæ›¿æ¢ç¬¬å‡ ä¸ªåŒ¹é…ï¼Œä¾‹å¦‚æŒ‡å®šä¸º1è¡¨ç¤ºåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸º<code>g</code>æˆ–<code>G</code>å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå…¨å±€æ›¿æ¢ã€‚</p><p>gensub()è¿”å›æ›¿æ¢åå¾—åˆ°çš„ç»“æœï¼Œè€Œtargetä¸å˜ï¼Œå¦‚æœåŒ¹é…å¤±è´¥ï¼Œåˆ™è¿”å›targetã€‚è¿™å’Œsub()ã€gsub()ä¸ä¸€æ ·ï¼Œsub()ã€gsub()è¿”å›çš„æ˜¯æ›¿æ¢æˆåŠŸçš„æ¬¡æ•°ã€‚</p><p>gensub()çš„replacementéƒ¨åˆ†å¯ä»¥ä½¿ç”¨<code>\N</code>æ¥å¼•ç”¨åˆ†ç»„åŒ¹é…çš„ç»“æœï¼Œè€Œsub()ã€gsub()ä¸å…è®¸ä½¿ç”¨åå‘å¼•ç”¨ã€‚è€Œä¸”ï¼Œgensub()åœ¨replacementéƒ¨åˆ†ä¹Ÿè¿˜å¯ä»¥ä½¿ç”¨<code>&amp;</code>æˆ–<code>\0</code>æ¥è¡¨ç¤ºåŒ¹é…çš„æ•´ä¸ªç»“æœã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;</span><br><span class="line">    a = &quot;abc def&quot;</span><br><span class="line">    b = gensub(/(.+) (.*)/, &quot;\\2 \\1, \\0 , &amp;&quot;, &quot;g&quot;, a)</span><br><span class="line">    print b  # def abc, abc def , abc def</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰awk-asort-å’Œasorti">ï¼ˆ7ï¼‰awk asort()å’Œasorti()</h4><ul><li><code>asort(src,[dest [,how]])</code></li><li><code>asorti(src,[dest [,how]])</code></li></ul><p>asortå¯¹æ•°ç»„srcçš„å€¼è¿›è¡Œæ’åºï¼Œç„¶åå°†æ’åºåçš„å€¼çš„ç´¢å¼•æ”¹ä¸º1ã€2ã€3ã€4â€¦åºåˆ—ã€‚è¿”å›srcä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå®ƒå¯ä»¥å½“ä½œæ’åºåçš„ç´¢å¼•æœ€å¤§å€¼ã€‚</p><p>asortiå¯¹æ•°ç»„srcçš„ç´¢å¼•è¿›è¡Œæ’åºï¼Œç„¶åå°†æ’åºåçš„ç´¢å¼•å€¼çš„ç´¢å¼•æ”¹ä¸º1ã€2ã€3ã€4â€¦åºåˆ—ã€‚è¿”å›srcä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå®ƒå¯ä»¥å½“ä½œæ’åºåçš„ç´¢å¼•æœ€å¤§å€¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr[&quot;last&quot;] = &quot;de&quot;</span><br><span class="line">arr[&quot;first&quot;] = &quot;sac&quot;</span><br><span class="line">arr[&quot;middle&quot;] = &quot;cul&quot;</span><br></pre></td></tr></table></figure><p>asort(arr)å¾—åˆ°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr[1] = &quot;cul&quot;</span><br><span class="line">arr[2] = &quot;de&quot;</span><br><span class="line">arr[3] = &quot;sac&quot;</span><br></pre></td></tr></table></figure><p>asorti(arr)å¾—åˆ°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr[1] = &quot;first&quot;</span><br><span class="line">arr[2] = &quot;last&quot;</span><br><span class="line">arr[3] = &quot;middle&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœæŒ‡å®šdestï¼Œåˆ™å°†åŸå§‹æ•°ç»„srcå¤‡ä»½åˆ°destï¼Œç„¶åå¯¹destè¿›è¡Œæ’åºï¼Œè€Œsrcä¿æŒä¸å˜ã€‚</p><p>howå‚æ•°ç”¨äºæŒ‡å®šæ’åºæ—¶çš„æ–¹å¼ï¼Œå…¶å€¼æŒ‡å®šæ–¹å¼å’Œ<code>PROCINFO[&quot;sorted_in&quot;]</code>ä¸€è‡´ï¼šå¯ä»¥æ˜¯é¢„å®šä¹‰çš„æ’åºå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ’åºå‡½æ•°ã€‚</p><h2 id="å‚è€ƒé“¾æ¥ğŸŒ¹">å‚è€ƒé“¾æ¥ğŸŒ¹</h2><p><strong>æ„Ÿè°¢ä»¥ä¸‹å¤§ä½¬æ–‡ç« çš„æ”¯æŒã€‚</strong></p><p>1ï¸âƒ£ <a href="https://blog.csdn.net/doushi/article/details/74332099">åœ¨awkä¸­æ­£ç¡®ä½¿ç”¨closeé¿å…æ–‡ä»¶å¥æŸ„æ³„éœ²</a></p><p>2ï¸âƒ£<a href="https://www.junmajinlong.com/shell/awk/index/">ç²¾é€šawkç³»åˆ—æ–‡ç«  | éªé©¬é‡‘é¾™ (junmajinlong.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ä¸‰å‰‘å®¢ </tag>
            
            <tag> Linuxä¸‰å‰‘å®¢ </tag>
            
            <tag> awk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‰å‰‘å®¢ç³»åˆ—ä¹‹sed</title>
      <link href="/posts/71ac2d6e5ae8.html"/>
      <url>/posts/71ac2d6e5ae8.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€sedä»‹ç»-ğŸ³">ä¸€ã€sedä»‹ç» ğŸ³</h2><p>sed (Stream Editor)æ˜¯ä¸€ç§æµç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯æ–‡æœ¬å¤„ç†ä¸­éå¸¸ä¸­çš„å·¥å…·ï¼Œèƒ½å¤Ÿå®Œç¾çš„é…åˆæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ï¼ŒåŠŸèƒ½ä¸åŒå‡¡å“ã€‚å¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºâ€œæ¨¡å¼ç©ºé—´â€ï¼ˆpattern spaceï¼‰ï¼Œæ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰ æ”¹å˜ï¼Œé™¤éä½ ä½¿ç”¨é‡å®šå‘å­˜å‚¨è¾“å‡ºã€‚Sedä¸»è¦ç”¨æ¥è‡ªåŠ¨ç¼–è¾‘ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼›ç®€åŒ–å¯¹æ–‡ä»¶çš„åå¤æ“ä½œï¼›ç¼–å†™è½¬æ¢ç¨‹åºç­‰ã€‚</p><h2 id="äºŒã€sed-çš„é€‰é¡¹ã€å‘½ä»¤ã€æ›¿æ¢æ ‡è®°-ğŸŸ">äºŒã€sed çš„é€‰é¡¹ã€å‘½ä»¤ã€æ›¿æ¢æ ‡è®° ğŸŸ</h2><p><strong>å‘½ä»¤æ ¼å¼ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed [options] &#x27;command&#x27; file(s)</span><br><span class="line">sed [options] -f scriptfile file(s)</span><br></pre></td></tr></table></figure><h3 id="1ã€é€‰é¡¹">1ã€é€‰é¡¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-e&lt;script&gt; æˆ– --expression=&lt;script&gt;ï¼šä»¥é€‰é¡¹ä¸­çš„æŒ‡å®šçš„scriptæ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ï¼›</span><br><span class="line">-f&lt;scriptæ–‡ä»¶&gt; æˆ– --file=&lt;scriptæ–‡ä»¶&gt;ï¼šä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ–‡ä»¶æ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ï¼›</span><br><span class="line">-h æˆ– --<span class="built_in">help</span>ï¼šæ˜¾ç¤ºå¸®åŠ©ï¼›</span><br><span class="line">-n æˆ– --quietæˆ–â€”â€”silentï¼šæŠ‘åˆ¶è‡ªåŠ¨è¾“å‡ºï¼Œä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœï¼›</span><br><span class="line">-V æˆ– --versionï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br><span class="line">-i : ç¼–è¾‘æ–‡ä»¶å†…å®¹</span><br><span class="line">-i.bak : ä¿®æ”¹æ—¶åŒæ—¶åˆ›å»º.bakå¤‡ä»½æ–‡ä»¶ã€‚</span><br><span class="line">-r : ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure><h3 id="2ã€å‘½ä»¤">2ã€å‘½ä»¤</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">a\ : åœ¨å½“å‰è¡Œä¸‹é¢æ’å…¥æ–‡æœ¬ã€‚</span><br><span class="line">i\ : åœ¨å½“å‰è¡Œä¸Šé¢æ’å…¥æ–‡æœ¬ã€‚</span><br><span class="line">c\ : æŠŠé€‰å®šçš„è¡Œæ”¹ä¸ºæ–°çš„æ–‡æœ¬ã€‚</span><br><span class="line">d : åˆ é™¤ï¼Œåˆ é™¤é€‰æ‹©çš„è¡Œã€‚</span><br><span class="line">D : åˆ é™¤æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œã€‚</span><br><span class="line">s : æ›¿æ¢æŒ‡å®šå­—ç¬¦</span><br><span class="line">h : æ‹·è´æ¨¡æ¿å—çš„å†…å®¹åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºã€‚</span><br><span class="line">H : è¿½åŠ æ¨¡æ¿å—çš„å†…å®¹åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºã€‚</span><br><span class="line">g : è·å¾—å†…å­˜ç¼“å†²åŒºçš„å†…å®¹ï¼Œå¹¶æ›¿ä»£å½“å‰æ¨¡æ¿å—ä¸­çš„æ–‡æœ¬ã€‚</span><br><span class="line">G : è·å¾—å†…å­˜ç¼“å†²åŒºçš„å†…å®¹ï¼Œå¹¶è¿½åŠ åˆ°å½“å‰æ¨¡æ¿å—æ–‡æœ¬çš„åé¢ã€‚</span><br><span class="line">l : åˆ—è¡¨ä¸èƒ½æ‰“å°å­—ç¬¦çš„æ¸…å•ã€‚</span><br><span class="line">n : è¯»å–ä¸‹ä¸€ä¸ªè¾“å…¥è¡Œï¼Œç”¨ä¸‹ä¸€ä¸ªå‘½ä»¤å¤„ç†æ–°çš„è¡Œè€Œä¸æ˜¯ç”¨ç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚</span><br><span class="line">N : è¿½åŠ ä¸‹ä¸€ä¸ªè¾“å…¥è¡Œåˆ°æ¨¡æ¿å—åé¢å¹¶åœ¨äºŒè€…é—´åµŒå…¥ä¸€ä¸ªæ–°è¡Œï¼Œæ”¹å˜å½“å‰è¡Œå·ç ã€‚</span><br><span class="line">p : æ‰“å°æ¨¡æ¿å—çš„è¡Œã€‚</span><br><span class="line">P : (å¤§å†™) æ‰“å°æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œã€‚</span><br><span class="line">q :  é€€å‡ºSedã€‚</span><br><span class="line">b lable : åˆ†æ”¯åˆ°è„šæœ¬ä¸­å¸¦æœ‰æ ‡è®°çš„åœ°æ–¹ï¼Œå¦‚æœåˆ†æ”¯ä¸å­˜åœ¨åˆ™åˆ†æ”¯åˆ°è„šæœ¬çš„æœ«å°¾ã€‚</span><br><span class="line">r file : ä»fileä¸­è¯»è¡Œã€‚</span><br><span class="line">t label : ifåˆ†æ”¯ï¼Œä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œæ¡ä»¶ä¸€æ—¦æ»¡è¶³æˆ–è€…Tï¼Œtå‘½ä»¤ï¼Œå°†å¯¼è‡´åˆ†æ”¯åˆ°å¸¦æœ‰æ ‡å·çš„å‘½ä»¤å¤„ï¼Œæˆ–è€…åˆ°è„šæœ¬çš„æœ«å°¾ã€‚</span><br><span class="line">T label : é”™è¯¯åˆ†æ”¯ï¼Œä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œä¸€æ—¦å‘ç”Ÿé”™è¯¯æˆ–è€…Tï¼Œtå‘½ä»¤ï¼Œå°†å¯¼è‡´åˆ†æ”¯åˆ°å¸¦æœ‰æ ‡å·çš„å‘½ä»¤å¤„ï¼Œæˆ–è€…åˆ°è„šæœ¬çš„æœ«å°¾ã€‚</span><br><span class="line">w file : å†™å¹¶è¿½åŠ æ¨¡æ¿å—åˆ°fileæœ«å°¾ã€‚  </span><br><span class="line">W file : å†™å¹¶è¿½åŠ æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œåˆ°fileæœ«å°¾ã€‚  </span><br><span class="line">! : è¡¨ç¤ºåé¢çš„å‘½ä»¤å¯¹æ‰€æœ‰æ²¡æœ‰è¢«é€‰å®šçš„è¡Œå‘ç”Ÿä½œç”¨ã€‚  </span><br><span class="line">= : æ‰“å°å½“å‰è¡Œå·ç ã€‚  </span><br><span class="line">#: æŠŠæ³¨é‡Šæ‰©å±•åˆ°ä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ä»¥å‰ã€‚</span><br></pre></td></tr></table></figure><h3 id="3ã€æ›¿æ¢æ ‡è®°">3ã€æ›¿æ¢æ ‡è®°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">g : è¡¨ç¤ºè¡Œå†…å…¨é¢æ›¿æ¢ã€‚  </span><br><span class="line">p : è¡¨ç¤ºæ‰“å°è¡Œã€‚  </span><br><span class="line">w : è¡¨ç¤ºæŠŠè¡Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶ã€‚  </span><br><span class="line">x : è¡¨ç¤ºäº’æ¢æ¨¡æ¿å—ä¸­çš„æ–‡æœ¬å’Œç¼“å†²åŒºä¸­çš„æ–‡æœ¬ã€‚  </span><br><span class="line">y : è¡¨ç¤ºæŠŠä¸€ä¸ªå­—ç¬¦ç¿»è¯‘ä¸ºå¦å¤–çš„å­—ç¬¦ï¼ˆä½†æ˜¯ä¸ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ï¼‰</span><br><span class="line">\1 : å­ä¸²åŒ¹é…æ ‡è®°</span><br><span class="line">&amp; : å·²åŒ¹é…å­—ç¬¦ä¸²æ ‡è®°</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€sed-ç”¨æ³•å®ä¾‹-ğŸ ">ä¸‰ã€sed ç”¨æ³•å®ä¾‹ ğŸ </h2><h3 id="1ã€åŸºç¡€ç”¨æ³•">1ã€åŸºç¡€ç”¨æ³•</h3><p><strong>æ¼”ç¤ºå®ä¾‹æ–‡æ¡£</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat aaa</span><br><span class="line">I love php</span><br><span class="line">I love F5</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>1ã€å‚æ•°<code>p</code></strong></p><p>æ‰“å°åŒ¹é…çš„æ¯ä¸€è¡Œï¼Œä¸€èˆ¬ä¸é€‰é¡¹ <code>-n</code> è¿ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;p&#x27;</span> aaa</span><br><span class="line">I love php</span><br><span class="line">I love php</span><br><span class="line">I love F5</span><br><span class="line">I love F5</span><br><span class="line">I 666</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>2ã€é€‰é¡¹<code>-n</code></strong></p><p>æŠ‘åˆ¶è‡ªåŠ¨è¾“å‡ºï¼Œä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;p&#x27;</span> aaa</span><br><span class="line">I love php</span><br><span class="line">I love F5</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>3ã€é€‰é¡¹<code>-e</code></strong></p><p>å°†è„šæœ¬ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å¤„ç†è¾“å…¥æ—¶æ‰§è¡Œçš„å‘½ä»¤ä¸­</p><p>å¤šæ¡ä»¶ï¼Œä¸€è¡Œä¸­è¦æœ‰å¤šä¸ªæ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e <span class="string">&#x27;/666/p&#x27;</span> -e <span class="string">&#x27;/php/p&#x27;</span> aaa</span><br><span class="line">I love php</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>4ã€é€‰é¡¹<code>-f</code></strong></p><p>å°†æ–‡ä»¶ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å¤„ç†è¾“å…¥æ—¶æ‰§è¡Œçš„å‘½ä»¤ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat sed.txt</span><br><span class="line">/php/p</span><br><span class="line"></span><br><span class="line">sed -n -f sed.txt aaa</span><br><span class="line">I love php</span><br></pre></td></tr></table></figure><p><strong>5ã€é€‰é¡¹<code>-r</code></strong></p><p>ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n -r &#x27;/php|666/p&#x27; aaa</span><br><span class="line">I love php</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>6ã€å‚æ•° <code>s</code> <code>g</code></strong></p><p>s:  æŸ¥æ‰¾æ›¿æ¢å­—ç¬¦ä¸²ï¼Œé€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ <code>1,20s/old/new/g</code></p><p>gï¼š è¡¨ç¤ºç”¨æ–°æ–‡æœ¬æ›¿æ¢ç°æœ‰æ–‡æœ¬çš„å…¨éƒ¨å®ä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/php/PHP/g&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line">I love F5</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>7ã€é€‰é¡¹<code>-i</code></strong></p><p>ç¼–è¾‘æ–‡ä»¶å†…å®¹ï¼Œæ­¤é€‰é¡¹ä¼šç›´æ¥ä¿®æ”¹æºæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/php/PHP/g&#x27; aaa</span><br><span class="line"></span><br><span class="line">cat aaa</span><br><span class="line">I love PHP</span><br><span class="line">I love F5</span><br><span class="line">I 666</span><br></pre></td></tr></table></figure><p><strong>8ã€å‚æ•°<code>=</code></strong></p><p>æ˜¾ç¤ºåŒ¹é…å†…å®¹çš„è¡Œå·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/root/=&#x27; passwd</span><br><span class="line">1</span><br><span class="line">10</span><br></pre></td></tr></table></figure><h3 id="2ã€å‘½ä»¤åŒ¹é…æ¨¡å¼">2ã€å‘½ä»¤åŒ¹é…æ¨¡å¼</h3><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>10command</td><td>åŒ¹é…ç¬¬åè¡Œ</td></tr><tr><td>10,20command</td><td>åŒ¹é…ä»ç¬¬10è¡Œå¼€å§‹ï¼ŒåŒ¹é…è‡³20è¡Œç»“æŸ</td></tr><tr><td>10,+5command</td><td>åŒ¹é…ä»ç¬¬10è¡Œå¼€å§‹ï¼ŒåŒ¹é…è‡³15è¡Œç»“æŸ</td></tr><tr><td>/pattern1/command</td><td>åŒ¹é…pattern1çš„è¡Œ ï¼Œ æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼</td></tr><tr><td>/pattern1/,/pattern2/command</td><td>åŒ¹é…åˆ°ä»pattern1å¼€å§‹ï¼ŒåŒ¹é…åˆ°pattern2ç»“æŸ</td></tr><tr><td>10,/pattern/command</td><td>åŒ¹é…ä»ç¬¬10è¡Œå¼€å§‹ï¼ŒåŒ¹é…åˆ°pattern1çš„è¡Œç»“æŸ</td></tr><tr><td>/pattern1/,10command</td><td>åŒ¹é…åˆ°pattern1çš„è¡Œå¼€å§‹ï¼Œåˆ°ç¬¬10è¡Œç»“æŸåŒ¹é…</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…ç¬¬ä¸€è¡Œ</span></span><br><span class="line">sed -n &#x27;1p&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ</span></span><br><span class="line">sed -n &#x27;1,2p&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line">I love F5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…æŒ‡å®šè¡Œ</span></span><br><span class="line">sed -n &#x27;/PHP/p&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…æŒ‡å®šè¡Œåˆ°å1è¡Œ</span></span><br><span class="line">sed -n &#x27;/PHP/,1p&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…åˆ°ä»PHPå¼€å§‹ï¼ŒåŒ¹é…åˆ°F5ç»“æŸ</span></span><br><span class="line">sed -n &#x27;/PHP/,/F5/p&#x27; aaa</span><br><span class="line">I love PHP</span><br><span class="line">I love F5</span><br></pre></td></tr></table></figure><h3 id="3ã€ç¼–è¾‘é€‰é¡¹">3ã€ç¼–è¾‘é€‰é¡¹</h3><table><thead><tr><th>ç¼–è¾‘é€‰é¡¹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>a</td><td>è¡Œåè¿½åŠ </td></tr><tr><td>i</td><td>è¡Œå‰è¿½åŠ </td></tr><tr><td>r</td><td>å¤–éƒ¨æ–‡ä»¶è¯»å…¥ï¼Œè¡Œåè¿½åŠ </td></tr><tr><td>w</td><td>åŒ¹é…è¡Œå†™å…¥å¤–éƒ¨æ–‡ä»¶</td></tr><tr><td>d</td><td>åˆ é™¤</td></tr><tr><td>s/old/new</td><td>å°†è¡Œå†…çš„ç¬¬ä¸€ä¸ªoldæ›¿æ¢ä¸ºnew</td></tr><tr><td>s/old/new/g</td><td>å°†è¡Œå†…çš„å…¨éƒ¨çš„oldæ›¿æ¢ä¸ºnew</td></tr><tr><td>s/old/new/2g</td><td>å°†è¡Œå†…ä»ç¬¬ä¸¤ä¸ªå¼€å§‹ï¼Œoldæ›¿æ¢ä¸ºnew</td></tr><tr><td>s/old/new/ig</td><td>å°†è¡Œå†…çš„å…¨éƒ¨çš„oldæ›¿æ¢ä¸ºnewï¼Œå¿½ç•¥å¤§å°å†™</td></tr></tbody></table><h4 id="1-åˆ é™¤ï¼š">(1) åˆ é™¤ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç¬¬ä¸€è¡Œ</span></span><br><span class="line">sed -i &#x27;1d&#x27; passwd </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç¬¬1è‡³3è¡Œ</span></span><br><span class="line">sed -i &#x27;1,3d&#x27; passwd </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åŒ…å«/sbin/nologinçš„è¡Œ</span></span><br><span class="line">sed -i &#x27;/\/sbin\/nologin/d&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤mailåˆ°ftpä¹‹é—´çš„è¡Œ</span></span><br><span class="line">sed -i &#x27;/mail/,/ftp/d&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æ–‡ä»¶çš„ç¬¬2è¡Œåˆ°æœ«å°¾æ‰€æœ‰è¡Œï¼š</span></span><br><span class="line">sed &#x27;2,$d&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æ–‡ä»¶æœ€åä¸€è¡Œï¼š</span></span><br><span class="line">sed &#x27;$d&#x27;  passwd</span><br></pre></td></tr></table></figure><h4 id="2-å¢åŠ ï¼š">(2) å¢åŠ ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…å†…å®¹ /bin/bash ï¼Œåœ¨å…¶ä¸‹ä¸€è¡Œæ·»åŠ  good å­—æ®µ</span></span><br><span class="line">sed -i &#x27;/\/bin\/bash/a good&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…å†…å®¹ä»¥ chrony å¼€å¤´åˆ°ä»¥ nginx å¼€å¤´ä¹‹é—´çš„è¡Œï¼Œåœ¨å…¶ä¸Šä¸€è¡Œæ·»åŠ  good å­—æ®µ</span></span><br><span class="line">sed -i &#x27;/^chrony/,/^nginx/i good&#x27; passwd </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…å†…å®¹ root ï¼Œåœ¨å…¶ä¸‹ä¸€è¡Œæ·»åŠ  test.txt æ–‡æœ¬ä¸­çš„å†…å®¹</span></span><br><span class="line">sed -i &#x27;/root/r test.txt&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…å†…å®¹ /bin/bash ï¼Œå°†åŒ…å«å†…å®¹çš„è¡Œè¾“å‡ºè‡³ a.txt æ–‡ä»¶ä¸­</span></span><br><span class="line">sed -n &#x27;/\/bin\/bash/w a.txt&#x27; passwd</span><br></pre></td></tr></table></figure><h4 id="3-ä¿®æ”¹ï¼š">(3) ä¿®æ”¹ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† passwd æ–‡ä»¶æ¯ä¸€è¡Œä¸­ç¬¬ä¸€ä¸ª root æ›¿æ¢ä¸º ROOT</span></span><br><span class="line">sed -i &#x27;s/root/ROOT/&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† passwd æ–‡ä»¶ä¸­ root æ›¿æ¢ä¸º ROOT</span></span><br><span class="line">sed -i &#x27;s/root/ROOT/g&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† passwd æ–‡ä»¶æ¯ä¸€è¡Œä¸­ç¬¬äºŒä¸ªå¼€å§‹ root æ›¿æ¢ä¸º ROOT</span></span><br><span class="line">sed -i &#x27;s/root/ROOT/2g&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† passwd æ–‡ä»¶åŒ¹é… ROOT æ›¿æ¢ä¸º rootï¼Œå¿½ç•¥å¤§å°å†™</span></span><br><span class="line">sed -i &#x27;s/ROOT/root/ig&#x27; passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­£åˆ™è¡¨è¾¾å¼ \w\+ åŒ¹é…æ¯ä¸€ä¸ªå•è¯ï¼Œä½¿ç”¨ [&amp;] æ›¿æ¢å®ƒï¼Œ&amp; å¯¹åº”äºä¹‹å‰æ‰€åŒ¹é…åˆ°çš„å•è¯ï¼š</span></span><br><span class="line">echo this is a test line | sed &#x27;s/\w\+/[&amp;]/g&#x27;</span><br><span class="line">[this] [is] [a] [test] [line] </span><br></pre></td></tr></table></figure><h4 id="4-åå‘å¼•ç”¨">(4) åå‘å¼•ç”¨</h4><p>ä½œç”¨ï¼šé‡æ–°ä½¿ç”¨åŒ¹é…åˆ°çš„å†…å®¹ï¼Œå¹¶è¿›è¡Œè¿›ä¸€æ­¥çš„å˜æ›´æ“ä½œã€‚</p><p>æ–¹å¼ï¼šåå‘å¼•ç”¨æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<code>&amp;</code>åå‘å¼•ç”¨å’Œ<code>\1</code>åå‘å¼•ç”¨ï¼Œ</p><p><code>&amp;</code>åå‘å¼•ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†åŒ¹é…å†…å®¹ r..t (.è¡¨ç¤ºä»»æ„å­—ç¬¦) æ›¿æ¢ä¸º r..tWWW</span></span><br><span class="line">sed -i &#x27;s/r..t/&amp;WWW/g&#x27; passwd</span><br></pre></td></tr></table></figure><p><code>\1</code>åå‘å¼•ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†åŒ¹é…å†…å®¹ sbin  æ›¿æ¢ä¸º sbinOOO</span></span><br><span class="line">sed -i &#x27;s/\(sbin\)/\1OOO/g&#x27; passwd</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼šåŒ¹é…çš„å†…å®¹éœ€è¦ç”¨æ‹¬å·ï¼ˆï¼‰æ‹¬èµ·æ¥ï¼Œæ‹¬å·éœ€è¦è½¬ä¹‰</span></span><br></pre></td></tr></table></figure><p>ä¼˜åŠ¿ï¼š<code>\1</code>åå‘å¼•ç”¨ç›¸å¯¹äº<code>&amp;</code>ä¼˜åŠ¿æ˜¯å¯ä»¥å°†å¼•ç”¨å†…å®¹éƒ¨åˆ†æ›¿æ¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†åŒ¹é…å†…å®¹ ntA... (.è¡¨ç¤ºä»»æ„å­—ç¬¦) æ›¿æ¢ä¸º ntABBP</span></span><br><span class="line">sed -i &#x27;s/\(ntA\).../\1BBp/g&#x27; passwd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨æ„ï¼šåŒ¹é…åˆ°å†…å®¹åéœ€è¦å¼•ç”¨çš„éƒ¨åˆ†éœ€è¦ç”¨æ‹¬å·ï¼ˆï¼‰æ‹¬èµ·æ¥ï¼Œæ‹¬å·éœ€è¦è½¬ä¹‰</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰æ³¨æ„äº‹é¡¹ï¼š">ï¼ˆ5ï¼‰æ³¨æ„äº‹é¡¹ï¼š</h4><p><strong>a. ä½¿ç”¨sedè¿›è¡Œå˜é‡å†…å®¹æ›¿æ¢æ—¶ï¼Œéœ€è¦ç”¨åŒå¼•å·è¿›è¡Œæ“ä½œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s/$a/$b/g&quot; passwd</span><br></pre></td></tr></table></figure><p><strong>b. sedå¼•ç”¨è‡ªå®šä¹‰å˜é‡æ—¶ï¼Œå¦‚æœå¤–é¢ä½¿ç”¨å•å¼•å·ï¼Œåˆ™è‡ªå®šä¹‰å˜é‡ä¹Ÿéœ€è¦ä½¿ç”¨å•å¼•å·</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/&#x27;$a&#x27;/&#x27;$b&#x27;/g&#x27; passwd</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ä¸‰å‰‘å®¢ </tag>
            
            <tag> sed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell å·¡æ£€F5 v1.2.1</title>
      <link href="/posts/9cc70c92de0e.html"/>
      <url>/posts/9cc70c92de0e.html</url>
      
        <content type="html"><![CDATA[<div class="tip info"><p>ğŸ“ æè¿°ï¼šè¯¥è„šæœ¬ç”¨äºè‡ªåŠ¨åŒ–å·¡æ£€F5ï¼Œé€‚ç”¨äºBIG-IP 12ç‰ˆæœ¬ä»¥ä¸Šã€‚æœ‰é—®é¢˜å¯éšæ—¶ç•™è¨€ä¸æˆ‘è”ç³» :@(çŒ®èŠ±)</p></div><div class="tabs" id="å·¡æ£€"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å·¡æ£€-1">å•ç‹¬å‰å°è¾“å‡ºæ£€æµ‹</button></li><li class="tab"><button type="button" data-href="#å·¡æ£€-2">å¸¦æœ‰åç«¯è¾“å‡ºæ£€æµ‹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å·¡æ£€-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Author : Hongbao Wang</span></span><br><span class="line"><span class="comment"># Date : 2022/04/28</span></span><br><span class="line"><span class="comment"># Url : www.whbblog.cn</span></span><br><span class="line"><span class="comment"># Description : This script is used to detect F5 status information.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#define variable</span></span><br><span class="line">hostname=`<span class="built_in">uname</span> -a |<span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f2`</span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +<span class="string">&quot;%y%m%d&quot;</span>`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># begin_function</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">begin_execute</span></span>()&#123;</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\nBegin to execute shell script,Please Wait for a few minutes.\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;------------------------------------------------------------&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># output base_info</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">base_info</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m1. Basic equipment information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output hostname</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Hostname :\t\t\t\t <span class="variable">$hostname</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output model</span></span><br><span class="line">  model=`tmsh  show sys hardware|grep -A 1 <span class="string">&quot;Platform&quot;</span>|grep ^<span class="string">&quot;  Name&quot;</span>|awk -F <span class="string">&quot;Name  &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). BIG-IP Model : \t\t\t <span class="variable">$model</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Serial Number</span></span><br><span class="line">  sn=` tmsh show sys hardware | grep -E <span class="string">&quot;Chassis Serial|Appliance Serial&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Serial Number : \t\t\t <span class="variable">$sn</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output ManagementIP</span></span><br><span class="line">  ManagementIP=`tmsh list sys management-ip |awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Management_IP : \t\t\t <span class="variable">$ManagementIP</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Version</span></span><br><span class="line">  F5version=`tmsh show sys version|grep <span class="string">&#x27;Version &#x27;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). BIG-IP Version : \t\t\t <span class="variable">$F5version</span> \n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># output cluster_info</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">cluster_info</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m2. Cluster status information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Failover-status</span></span><br><span class="line">  failoverstatus=`tmsh  show cm failover-status  | grep ^<span class="string">&quot;Status&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Failover Status : \t\t\t <span class="variable">$failoverstatus</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Sync-status</span></span><br><span class="line">  syncstatus=`tmsh  show cm sync-status  | grep ^<span class="string">&quot;Status&quot;</span> | awk <span class="string">&#x27;&#123;print $2,$3&#125;&#x27;</span> `</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Sync Status : \t\t\t <span class="variable">$syncstatus</span> \n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">stastistic</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m3. Business status information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output CPU Utilization</span></span><br><span class="line">  cpu=`tmsh show sys cpu|grep <span class="string">&quot;Utilization&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). CPU Utilization :\t\t\t <span class="variable">$cpu</span>%&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Memory Utilization</span></span><br><span class="line">  mem=`tmsh show sys memory|grep <span class="string">&quot;TMM Memory Used&quot;</span>|awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> `</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Memory Utilization :\t\t <span class="variable">$mem</span>%&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of New Connnections</span></span><br><span class="line">  new_conn=`tmsh show sys performance connections| grep <span class="string">&quot;Client Connections&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). New Connections : \t\t\t <span class="variable">$new_conn</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of Total Connections</span></span><br><span class="line">  active_conn=`tmsh show sys performance connections| grep ^<span class="string">&quot;Connections&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Total Connections : \t\t <span class="variable">$active_conn</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Throughout</span></span><br><span class="line">  throughput=`tmsh show sys performance throughput | grep <span class="string">&quot;Service&quot;</span>|<span class="built_in">head</span> -1|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). Throughput : \t\t\t <span class="variable">$throughput</span> \n&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output virtual Status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m4. Virtual Server Health Information\033[0m&quot;</span></span><br><span class="line">  virtual_name=`tmsh list ltm virtual| grep <span class="string">&quot;ltm virtual &quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  available_=0</span><br><span class="line">  unknown_=0</span><br><span class="line">  offline_=0</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> virtual_ <span class="keyword">in</span> <span class="variable">$virtual_name</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    vs_status=`tmsh show ltm virtual <span class="variable">$virtual_</span> | grep Availability|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;available&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">        available_=$[<span class="variable">$available_</span>+1]</span><br><span class="line">    <span class="keyword">elif</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;unknown&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">      unknown_=$[<span class="variable">$unknown_</span>+1]</span><br><span class="line">    <span class="keyword">elif</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;offline&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">      offline_=$[<span class="variable">$offline_</span>+1]</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Virtial Available : \t\t <span class="variable">$available_</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Virtial unknown : \t\t\t <span class="variable">$unknown_</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Virtial offline : \t\t\t <span class="variable">$offline_</span> \n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">log_status</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Nummber of System Warning Log</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m5. Log Warning Information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  sys_log=`<span class="built_in">cat</span> /var/log/messages|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). System Warning Log : \t\t <span class="variable">$sys_log</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of Ltm Warning Log</span></span><br><span class="line">  ltm_log=`<span class="built_in">cat</span> /var/log/ltm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). LTM Warning Log : \t\t\t <span class="variable">$ltm_log</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of GTM Warning Log</span></span><br><span class="line">  gtm_log=`<span class="built_in">cat</span> /var/log/gtm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). GTM Warning Log : \t\t\t <span class="variable">$gtm_log</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#LCD log</span></span><br><span class="line">  lcd_log=`tmsh show sys alert|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). LCD Warning Log : \t\t\t <span class="variable">$lcd_log</span> \n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">device_hardware</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m6. Device Hardware Information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#fanstatus</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Device Fans Status :&quot;</span></span><br><span class="line">  fan_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-fan-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">for</span> fan_n <span class="keyword">in</span> <span class="variable">$fan_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    fan_sta=`tmsh show sys hardware field-fmt | sed -n <span class="string">&#x27;/chassis-fan-status-index $fan_n &#123;/,/&#125;/p&#x27;</span> | grep <span class="string">&quot;status &quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$fan_sta</span>==<span class="string">&quot;up&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tFans <span class="variable">$fan_n</span> Status : \t\t Success&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mFans <span class="variable">$fan_n</span> Status: \t\t Failed\033[0m&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Temperature status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Temperature <span class="variable">$temp_n</span> Status :&quot;</span></span><br><span class="line">  temp_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-temperature-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">for</span> temp_n <span class="keyword">in</span> <span class="variable">$temp_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    cur_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;temperature &quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    lo_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;lo-limit&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    high_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;hi-limit&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$cur_temp</span> -le <span class="variable">$high_temp</span> ] &amp;&amp; [ <span class="variable">$cur_temp</span> -ge <span class="variable">$lo_temp</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\tTemp <span class="variable">$temp_n</span> Status : \t\t Success&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mTemp <span class="variable">$temp_n</span> Status : \t\t Failed\033[0m&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#powerstatus</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Device Power status :&quot;</span></span><br><span class="line">  power_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-power-supply-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> power_name <span class="keyword">in</span> <span class="variable">$power_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    power_status=`tmsh show sys hardware field-fmt | grep -A4 <span class="string">&quot;chassis-power-supply-status-index 1&quot;</span>| grep <span class="string">&quot;status up&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$power_status</span> == <span class="string">&quot;up&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tPower <span class="variable">$power_name</span> status: \t\t Success&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment">#echo -e &quot;\t 3). Power Supply $power_name : \t\t\t Failed&quot;</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mPower <span class="variable">$power_name</span> status: \t\t Failed\033[0m&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#Trunk Used Interface Status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m\n7. Device Interface Information\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  trunk_name=`tmsh list net vlan one-line | grep <span class="string">&quot;interfaces&quot;</span>| awk -F <span class="string">&quot;interfaces &#123; &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|awk -F <span class="string">&quot; &#123;&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|<span class="built_in">sort</span> -u|grep -v ^<span class="string">&quot;[0-9]&quot;</span>`</span><br><span class="line">  <span class="keyword">for</span> trunk_ <span class="keyword">in</span> <span class="variable">$trunk_name</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  trunk_interface=`tmsh list net trunk <span class="variable">$trunk_</span> interfaces | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|grep ^[0-9]`</span><br><span class="line">  <span class="keyword">for</span> interface_ <span class="keyword">in</span> <span class="variable">$trunk_interface</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      isun=`tmsh show net interface <span class="variable">$interface_</span> field-fmt | grep <span class="string">&quot;status up&quot;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">      <span class="keyword">if</span> [[ <span class="variable">$isun</span> == <span class="string">&quot;1&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t Success&quot;</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t Failed\033[0m&quot;</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#Vlan Used Interface Status</span></span><br><span class="line">  interface_name=`tmsh list net vlan one-line | grep <span class="string">&quot;interfaces&quot;</span>| awk -F <span class="string">&quot;interfaces &#123; &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|awk -F <span class="string">&quot; &#123;&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|<span class="built_in">sort</span> -u|grep ^[0-9]</span><br><span class="line">`</span><br><span class="line">  <span class="keyword">for</span> inte_name <span class="keyword">in</span> <span class="variable">$interface_name</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    interface_sta=`tmsh show net interface <span class="variable">$inte_name</span> field-fmt | grep <span class="string">&quot;status up&quot;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$interface_sta</span> == <span class="string">&quot;1&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Interface <span class="variable">$inte_name</span> Status : \t\t Success&quot;</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m Interface <span class="variable">$inte_name</span> Status : \t\t Failed\033[0m&quot;</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">backup_config</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#backup config</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n\033[33m8. Backup configuration\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">dir</span>=<span class="string">&quot;/var/local/ucs/&quot;</span></span><br><span class="line"></span><br><span class="line">  tmsh save sys ucs $<span class="built_in">date</span><span class="variable">$hostname</span>.ucs  &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">  backup=`find <span class="variable">$dir</span> -name $<span class="built_in">date</span><span class="variable">$hostname</span>.ucs`</span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$backup</span> =~ <span class="string">&quot;.ucs&quot;</span> ]]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\tUCS Backup :  \t\t\t\t Success&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m UCS Backup :  \t\t\t\t Failed\033[0m&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># finish_execute</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">finish_execute</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n------------------------------------------------------------&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[32mDevice Check Finish .\n\033[0m&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">begin_execute</span><br><span class="line">base_info</span><br><span class="line">cluster_info</span><br><span class="line">stastistic</span><br><span class="line">log_status</span><br><span class="line">device_hardware</span><br><span class="line">backup_config</span><br><span class="line">finish_execute</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å·¡æ£€-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Author : Hongbao Wang</span></span><br><span class="line"><span class="comment"># Date : 2022/04/28</span></span><br><span class="line"><span class="comment"># Url : www.whbblog.cn</span></span><br><span class="line"><span class="comment"># Description : This script is used to detect F5 status information.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#define variable</span></span><br><span class="line">hostname=`<span class="built_in">uname</span> -a |<span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f2`</span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +<span class="string">&quot;%y%m%d&quot;</span>`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># begin_function</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">begin_execute</span></span>()&#123;</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[32m\nBegin to execute shell script,Please Wait for a few minutes.\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;------------------------------------------------------------&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$hostname</span> Check Information&quot;</span> &gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;------------------------------------------------------------&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># output base_info</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">base_info</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m1. Basic equipment information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;1. Basic equipment information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output hostname</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Hostname :\t\t\t\t <span class="variable">$hostname</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Hostname      :\t\t\t <span class="variable">$hostname</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output model</span></span><br><span class="line">  model=`tmsh  show sys hardware|grep -A 1 <span class="string">&quot;Platform&quot;</span>|grep ^<span class="string">&quot;  Name&quot;</span>|awk -F <span class="string">&quot;Name  &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). BIG-IP Model  : \t\t\t <span class="variable">$model</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). BIG-IP Model  : \t\t\t <span class="variable">$model</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Serial Number</span></span><br><span class="line">  sn=` tmsh show sys hardware | grep -E <span class="string">&quot;Chassis Serial|Appliance Serial&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Serial Number : \t\t\t <span class="variable">$sn</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Serial Number : \t\t\t <span class="variable">$sn</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output ManagementIP</span></span><br><span class="line">  ManagementIP=`tmsh list sys management-ip |awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Management_IP : \t\t\t <span class="variable">$ManagementIP</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Management_IP : \t\t\t <span class="variable">$ManagementIP</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Version</span></span><br><span class="line">  F5version=`tmsh show sys version|grep <span class="string">&#x27;Version &#x27;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). BIG-IP Version : \t\t\t <span class="variable">$F5version</span> \n&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). BIGIP Version : \t\t\t <span class="variable">$F5version</span> \n&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># output cluster_info</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">cluster_info</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m2. Cluster status information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;2. Cluster status information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Failover-status</span></span><br><span class="line">  failoverstatus=`tmsh  show cm failover-status  | grep ^<span class="string">&quot;Status&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Failover Status : \t\t\t <span class="variable">$failoverstatus</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Failover Status : \t\t\t <span class="variable">$failoverstatus</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Sync-status</span></span><br><span class="line">  syncstatus=`tmsh  show cm sync-status  | grep ^<span class="string">&quot;Status&quot;</span> | awk <span class="string">&#x27;&#123;print $2,$3&#125;&#x27;</span> `</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Sync Status : \t\t\t <span class="variable">$syncstatus</span> \n&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Sync Status     : \t\t\t <span class="variable">$syncstatus</span> \n&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">stastistic</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m3. Business status information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;3. Business status information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output CPU Utilization</span></span><br><span class="line">  cpu=`tmsh show sys cpu|grep <span class="string">&quot;Utilization&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). CPU Utilization :\t\t\t <span class="variable">$cpu</span>%&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). CPU Utilization    : \t\t <span class="variable">$cpu</span>%&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Memory Utilization</span></span><br><span class="line">  mem=`tmsh show sys memory|grep <span class="string">&quot;TMM Memory Used&quot;</span>|awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> `</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Memory Utilization :\t\t <span class="variable">$mem</span>%&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Memory Utilization : \t\t <span class="variable">$mem</span>%&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of New Connnections</span></span><br><span class="line">  new_conn=`tmsh show sys performance connections| grep <span class="string">&quot;Client Connections&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). New Connections : \t\t\t <span class="variable">$new_conn</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). New Connections    : \t\t <span class="variable">$new_conn</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of Total Connections</span></span><br><span class="line">  active_conn=`tmsh show sys performance connections| grep ^<span class="string">&quot;Connections&quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Total Connections  :\t\t <span class="variable">$active_conn</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). Total Connections  : \t\t <span class="variable">$active_conn</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Throughout</span></span><br><span class="line">  throughput=`tmsh show sys performance throughput | grep <span class="string">&quot;Service&quot;</span>|<span class="built_in">head</span> -1|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). Throughput : \t\t\t <span class="variable">$throughput</span> \n&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 5). Throughput         : \t\t <span class="variable">$throughput</span> \n&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output virtual Status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m4. Virtual Server Health Information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n4. Virtual Server Health Information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  virtual_name=`tmsh list ltm virtual| grep <span class="string">&quot;ltm virtual &quot;</span>|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">  available_=0</span><br><span class="line">  unknown_=0</span><br><span class="line">  offline_=0</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> virtual_ <span class="keyword">in</span> <span class="variable">$virtual_name</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    vs_status=`tmsh show ltm virtual <span class="variable">$virtual_</span> | grep Availability|awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;available&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">        available_=$[<span class="variable">$available_</span>+1]</span><br><span class="line">    <span class="keyword">elif</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;unknown&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">      unknown_=$[<span class="variable">$unknown_</span>+1]</span><br><span class="line">    <span class="keyword">elif</span> [[ <span class="variable">$vs_status</span> = <span class="string">&quot;offline&quot;</span> ]] ;<span class="keyword">then</span></span><br><span class="line">      offline_=$[<span class="variable">$offline_</span>+1]</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Virtial Available : \t\t <span class="variable">$available_</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Virtial unknown : \t\t\t <span class="variable">$unknown_</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Virtial offline : \t\t\t <span class="variable">$offline_</span> \n&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Virtial Available : \t\t <span class="variable">$available_</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Virtial unknown   : \t\t <span class="variable">$unknown_</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Virtial offline   : \t\t <span class="variable">$offline_</span> \n&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">log_status</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Nummber of System Warning Log</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m5. Log Warning Information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;5. Log Warning Information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  sys_log=`<span class="built_in">cat</span> /var/log/messages|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). System Warning Log : \t\t <span class="variable">$sys_log</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). System Warning Log : \t\t <span class="variable">$sys_log</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">cat</span> /var/log/messages|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">tail</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of Ltm Warning Log</span></span><br><span class="line">  ltm_log=`<span class="built_in">cat</span> /var/log/ltm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). LTM Warning Log : \t\t\t <span class="variable">$ltm_log</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). LTM Warning Log    : \t\t <span class="variable">$ltm_log</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">cat</span> /var/log/ltm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">tail</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Number of GTM Warning Log</span></span><br><span class="line">  gtm_log=`<span class="built_in">cat</span> /var/log/gtm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). GTM Warning Log : \t\t\t <span class="variable">$gtm_log</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). GTM Warning Log    : \t\t <span class="variable">$gtm_log</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">cat</span> /var/log/gtm|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">tail</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#LCD log</span></span><br><span class="line">  lcd_log=`tmsh show sys alert|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). LCD Warning Log    : \t\t <span class="variable">$lcd_log</span> \n&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 4). LCD Warning Log    : \t\t <span class="variable">$lcd_log</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  tmsh show sys alert|grep -E <span class="string">&#x27;warning|err|emerg|crit|alert&#x27;</span>|<span class="built_in">tail</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">device_hardware</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m6. Device Hardware Information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n6. Device Hardware Information&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="comment">#fanstatus</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 1). Device Fans Status :&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n\t1) Device Fan Status Information:&quot;</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  fan_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-fan-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">for</span> fan_n <span class="keyword">in</span> <span class="variable">$fan_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    fan_sta=`tmsh show sys hardware field-fmt | sed -n <span class="string">&#x27;/chassis-fan-status-index $fan_n &#123;/,/&#125;/p&#x27;</span> | grep <span class="string">&quot;status &quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$fan_sta</span>==<span class="string">&quot;up&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tFans <span class="variable">$fan_n</span> Status : \t\t Success&quot;</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tFan <span class="variable">$fan_n</span> : Up &quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mFans <span class="variable">$fan_n</span> Status: \t\t Failed\033[0m&quot;</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tFan <span class="variable">$fan_n</span> : Failed&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#output Temperature status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 2). Temperature <span class="variable">$temp_n</span> Status :&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n\t2) Device Temperature Information:&quot;</span>  &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t\tTemp_point\tlow\tcur\thi&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  temp_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-temperature-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">for</span> temp_n <span class="keyword">in</span> <span class="variable">$temp_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    cur_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;temperature &quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    lo_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;lo-limit&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    high_temp=`tmsh show sys hardware field-fmt | grep -A7 <span class="string">&quot;chassis-temperature-status-index <span class="variable">$temp_n</span>&quot;</span>| grep <span class="string">&quot;hi-limit&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$cur_temp</span> -le <span class="variable">$high_temp</span> ] &amp;&amp; [ <span class="variable">$cur_temp</span> -ge <span class="variable">$lo_temp</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\tTemp <span class="variable">$temp_n</span> Status : \t\t Success&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mTemp <span class="variable">$temp_n</span> Status : \t\t Failed\033[0m&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t\tTemp_<span class="variable">$temp_n</span>    \t<span class="variable">$lo_temp</span>\t<span class="variable">$cur_temp</span>\t<span class="variable">$high_temp</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#powerstatus</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\t 3). Device Power status :&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n\t3) Device Power Information :&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  power_number=`tmsh show sys hardware field-fmt | grep <span class="string">&quot;chassis-power-supply-status-index&quot;</span>|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> power_name <span class="keyword">in</span> <span class="variable">$power_number</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    power_status=`tmsh show sys hardware field-fmt | grep -A4 <span class="string">&quot;chassis-power-supply-status-index 1&quot;</span>| grep <span class="string">&quot;status up&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$power_status</span> == <span class="string">&quot;up&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\tPower <span class="variable">$power_name</span> status: \t\t Success&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="comment">#echo -e &quot;\t 3). Power Supply $power_name : \t\t\t Failed&quot;</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\033[31mPower <span class="variable">$power_name</span> status: \t\t Failed\033[0m&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\tPower <span class="variable">$power_name</span> status : <span class="variable">$power_status</span>&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">#Trunk Used Interface Status</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[33m\n7. Device Interface Information\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n7. Device Interface Information :&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  trunk_name=`tmsh list net vlan one-line | grep <span class="string">&quot;interfaces&quot;</span>| awk -F <span class="string">&quot;interfaces &#123; &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|awk -F <span class="string">&quot; &#123;&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|<span class="built_in">sort</span> -u|grep -v ^<span class="string">&quot;[0-9]&quot;</span>`</span><br><span class="line">  <span class="keyword">for</span> trunk_ <span class="keyword">in</span> <span class="variable">$trunk_name</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  trunk_interface=`tmsh list net trunk <span class="variable">$trunk_</span> interfaces | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|grep ^[0-9]`</span><br><span class="line">  <span class="keyword">for</span> interface_ <span class="keyword">in</span> <span class="variable">$trunk_interface</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      isun=`tmsh show net interface <span class="variable">$interface_</span> field-fmt | grep <span class="string">&quot;status up&quot;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">      <span class="keyword">if</span> [[ <span class="variable">$isun</span> == <span class="string">&quot;1&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t Success&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t Success&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t Failed\033[0m&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Trunk : <span class="variable">$trunk_</span> Interface <span class="variable">$interface_</span> Status : \t failed&quot;</span> &gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#Vlan Used Interface Status</span></span><br><span class="line">  interface_name=`tmsh list net vlan one-line | grep <span class="string">&quot;interfaces&quot;</span>| awk -F <span class="string">&quot;interfaces &#123; &quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|awk -F <span class="string">&quot; &#123;&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>|<span class="built_in">sort</span> -u|grep ^[0-9]</span><br><span class="line">`</span><br><span class="line">    <span class="keyword">for</span> inte_name <span class="keyword">in</span> <span class="variable">$interface_name</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      interface_sta=`tmsh show net interface <span class="variable">$inte_name</span> field-fmt | grep <span class="string">&quot;status up&quot;</span>|<span class="built_in">wc</span> -l`</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$interface_sta</span> == <span class="string">&quot;1&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Interface <span class="variable">$inte_name</span> Status : \t\t Success&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\t Interface <span class="variable">$inte_name</span> Status : \t\t Success&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m Interface <span class="variable">$inte_name</span> Status : \t\t Failed\033[0m&quot;</span></span><br><span class="line">          <span class="built_in">echo</span> -e <span class="string">&quot;\t Interface <span class="variable">$inte_name</span> Status : \t\t failed&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">backup_config</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#backup config</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n\033[33m8. Backup configuration\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n8. Backup configuration :&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">  <span class="built_in">dir</span>=<span class="string">&quot;/var/local/ucs/&quot;</span></span><br><span class="line"></span><br><span class="line">  tmsh save sys ucs $<span class="built_in">date</span><span class="variable">$hostname</span>.ucs  &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">  backup=`find <span class="variable">$dir</span> -name $<span class="built_in">date</span><span class="variable">$hostname</span>.ucs`</span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$backup</span> =~ <span class="string">&quot;.ucs&quot;</span> ]]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\tUCS Backup :  \t\t\t\t Success&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\tUCS Backup :  \t\t\t\t Success&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\033[31m UCS Backup :  \t\t\t\t Failed\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\tUCS Backup :  \t\t\t\t failed&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># finish_execute</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">finish_execute</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n------------------------------------------------------------&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\033[32mDevice Check Finish , Report in /var/tmp/$date<span class="variable">$hostname</span>.txt\n\033[0m&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;\n------------------------------------------------------------&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;Device Check Finish .\n&quot;</span>&gt;&gt; /var/tmp/$<span class="built_in">date</span><span class="variable">$hostname</span>.txt</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">begin_execute</span><br><span class="line">base_info</span><br><span class="line">cluster_info</span><br><span class="line">stastistic</span><br><span class="line">log_status</span><br><span class="line">device_hardware</span><br><span class="line">backup_config</span><br><span class="line">finish_execute</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tip success"><p>è¾“å‡ºç»“æœ</p></div><p><img src="https://cdn.whbblog.cn/img/image-20220428145924276.png" alt="image-20220428145924276"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> è‡ªåŠ¨åŒ–å·¡æ£€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/posts/bd9d9032de56.html"/>
      <url>/posts/bd9d9032de56.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ­£åˆ™è¡¨è¾¾å¼ç®€ä»‹">æ­£åˆ™è¡¨è¾¾å¼ç®€ä»‹</h2><ol><li>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç»„ç”±å­—æ¯å’Œç¬¦å·ç»„æˆçš„ç‰¹æ®Šæ–‡æœ¬ï¼Œå®ƒå¯ä»¥ç”¨æ¥ä»æ–‡æœ¬ä¸­æ‰¾å‡ºæ»¡è¶³ä½ æƒ³è¦çš„æ ¼å¼çš„å¥å­ã€‚</li><li>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§ä»å·¦åˆ°å³åŒ¹é…ä¸»ä½“å­—ç¬¦ä¸²çš„æ¨¡å¼ã€‚</li><li>æ­£åˆ™è¡¨è¾¾å¼è‹±è¯‘ä¸º â€œRegular expressionâ€ ï¼Œç¼©å†™çš„æœ¯è¯­ â€œregexâ€ æˆ– â€œregexpâ€ ã€‚</li><li>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä»ä¸€ä¸ªåŸºç¡€å­—ç¬¦ä¸²ä¸­æ ¹æ®ä¸€å®šçš„åŒ¹é…æ¨¡å¼æ›¿æ¢æ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸²ã€éªŒè¯è¡¨å•ã€æå–å­—ç¬¦ä¸²ç­‰ç­‰ã€‚</li></ol><h2 id="1-åŸºæœ¬åŒ¹é…">1. åŸºæœ¬åŒ¹é…</h2><p>æ­£åˆ™è¡¨è¾¾å¼å…¶å®å°±æ˜¯åœ¨æ‰§è¡Œæœç´¢æ—¶çš„æ ¼å¼ï¼Œå®ƒç”±ä¸€äº›å­—æ¯å’Œæ•°å­—ç»„åˆè€Œæˆã€‚<br>ä¾‹å¦‚ï¼šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ <code>the</code>ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªè§„åˆ™ï¼šç”±å­—æ¯ <code>t</code> å¼€å§‹ï¼Œæ¥ç€æ˜¯ <code>h</code> ï¼Œå†æ¥ç€æ˜¯ <code>e</code> ã€‚</p><p><code>â€œtheâ€ =&gt; The fat cat sat on <b><font color="blue">the</font></b> mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p>æ­£åˆ™è¡¨è¾¾å¼ <code>123</code> åŒ¹é…å­—ç¬¦ä¸² <code>123</code> ã€‚å®ƒé€ä¸ªå­—ç¬¦çš„ä¸è¾“å…¥çš„æ­£åˆ™è¡¨è¾¾å¼åšæ¯”è¾ƒã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ‰€ä»¥<code>The</code>ä¸ä¼šåŒ¹é…<code>the</code>ã€‚</p><p><code>â€œTheâ€ =&gt; <b><font color="blue">The</font></b> fat cat sat on the mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <h2 id="2-å…ƒå­—ç¬¦">2. å…ƒå­—ç¬¦</h2><p>æ­£åˆ™è¡¨è¾¾å¼ä¸»è¦ä¾èµ–äºå…ƒå­—ç¬¦ã€‚å…ƒå­—ç¬¦ä¸ä»£è¡¨ä»–ä»¬æœ¬èº«çš„å­—é¢æ„æ€ï¼Œä»–ä»¬éƒ½æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚ä¸€äº›å…ƒå­—ç¬¦å†™åœ¨æ–¹æ‹¬å·ä¸­çš„æ—¶å€™æœ‰ä¸€äº›ç‰¹æ®Šçš„æ„æ€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…ƒå­—ç¬¦çš„ä»‹ç»ï¼š</p><table><thead><tr><th style="text-align:center">å…ƒå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td>å¥å·åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦é™¤äº†æ¢è¡Œç¬¦ã€‚</td></tr><tr><td style="text-align:center">[ ]</td><td>å­—ç¬¦ç§ç±»ã€‚åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦ã€‚</td></tr><tr><td style="text-align:center">[^ ]</td><td>å¦å®šçš„å­—ç¬¦ç§ç±»ã€‚åŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œçš„ä»»æ„å­—ç¬¦</td></tr><tr><td style="text-align:center">*</td><td>åŒ¹é…&gt;=0ä¸ªé‡å¤çš„åœ¨*å·ä¹‹å‰çš„å­—ç¬¦ã€‚</td></tr><tr><td style="text-align:center">+</td><td>åŒ¹é…&gt;=1ä¸ªé‡å¤çš„+å·å‰çš„å­—ç¬¦ã€‚</td></tr><tr><td style="text-align:center">?</td><td>æ ‡è®°?ä¹‹å‰çš„å­—ç¬¦ä¸ºå¯é€‰.</td></tr><tr><td style="text-align:center">{n,m}</td><td>åŒ¹é…numä¸ªå¤§æ‹¬å·ä¹‹å‰çš„å­—ç¬¦æˆ–å­—ç¬¦é›† (n &lt;= num &lt;= m).</td></tr><tr><td style="text-align:center">(xyz)</td><td>å­—ç¬¦é›†ï¼ŒåŒ¹é…ä¸ xyz å®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸².</td></tr><tr><td style="text-align:center">|</td><td>æˆ–è¿ç®—ç¬¦ï¼ŒåŒ¹é…ç¬¦å·å‰æˆ–åçš„å­—ç¬¦.</td></tr><tr><td style="text-align:center">\</td><td>è½¬ä¹‰å­—ç¬¦,ç”¨äºåŒ¹é…ä¸€äº›ä¿ç•™çš„å­—ç¬¦ <code>[ ] ( ) &#123; &#125; . * + ? ^ $ \ |</code></td></tr><tr><td style="text-align:center">^</td><td>ä»å¼€å§‹è¡Œå¼€å§‹åŒ¹é….</td></tr><tr><td style="text-align:center">$</td><td>ä»æœ«ç«¯å¼€å§‹åŒ¹é….</td></tr></tbody></table><h3 id="2-1-ç‚¹è¿ç®—ç¬¦">2.1 ç‚¹è¿ç®—ç¬¦ <code>.</code></h3><p><code>.</code> æ˜¯å…ƒå­—ç¬¦ä¸­æœ€ç®€å•çš„ä¾‹å­ã€‚<br><code>.</code> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä½†ä¸åŒ¹é…æ¢è¡Œç¬¦ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>.ar</code> åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦åé¢è·Ÿç€æ˜¯ <code>a</code> å’Œ <code>r</code> çš„å­—ç¬¦ä¸²ã€‚</p><p><code>â€œ.arâ€ =&gt; The <b><font color="blue">car</font></b> <b><font color="blue">par</font></b>ked in the <b><font color="blue">gar</font></b>age.<br></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <h3 id="2-2-å­—ç¬¦é›†">2.2 å­—ç¬¦é›†</h3><ul><li>å­—ç¬¦é›†ä¹Ÿå«åšå­—ç¬¦ç±»ã€‚</li><li>æ–¹æ‹¬å·ç”¨æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†ã€‚</li><li>åœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨è¿å­—ç¬¦æ¥æŒ‡å®šå­—ç¬¦é›†çš„èŒƒå›´ã€‚</li><li>åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦é›†ä¸å…³å¿ƒé¡ºåºã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>[Tt]he</code> åŒ¹é… <code>the</code> å’Œ <code>The</code>ã€‚</p><p><code>â€œ[Tt]heâ€ =&gt; <b><font color="blue">The</font></b> car parked in <b><font color="blue">the</font></b> garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <p>æ‹¬å·çš„å¥å·å°±è¡¨ç¤ºå¥å·ã€‚è¡¨è¾¾å¼ <code>ar[.]</code> åŒ¹é… <code>ar.</code>å­—ç¬¦ä¸²</p><p><code>â€œar[.]â€ =&gt; A garage is a good place to park a c<b><font color="blue">ar.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <h4 id="2-2-1-å¦å®šå­—ç¬¦é›†">2.2.1 å¦å®šå­—ç¬¦é›†</h4><p>ä¸€èˆ¬æ¥è¯´ <code>^</code> è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œä½†å®ƒç”¨åœ¨ä¸€ä¸ªæ–¹æ‹¬å·çš„å¼€å¤´çš„æ—¶å€™ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªå­—ç¬¦é›†æ˜¯å¦å®šçš„ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼<code>[^c]ar</code> åŒ¹é…ä¸€ä¸ªåé¢è·Ÿç€<code>ar</code>çš„é™¤äº†<code>c</code>çš„ä»»æ„å­—ç¬¦ã€‚</p><p><code>â€œ[^c]arâ€ =&gt; The car <b><font color="blue">par</font></b>ked in the <b><font color="blue">gar</font></b>age.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <h3 id="2-3-é‡å¤æ¬¡æ•°">2.3 é‡å¤æ¬¡æ•°</h3><p>åé¢è·Ÿç€å…ƒå­—ç¬¦ <code>+</code> ã€ <code>*</code> or <code>?</code> çš„ï¼Œç”¨æ¥æŒ‡å®šåŒ¹é…å­æ¨¡å¼çš„æ¬¡æ•°ã€‚è¿™äº›å…ƒå­—ç¬¦åœ¨ä¸åŒçš„æƒ…å†µä¸‹æœ‰ç€ä¸åŒçš„æ„æ€ã€‚</p><h4 id="2-3-1-å·">2.3.1 <code>*</code> å·</h4><p><code>*</code>å·åŒ¹é… åœ¨<code>*</code>ä¹‹å‰çš„å­—ç¬¦å‡ºç°<code>å¤§äºç­‰äº0</code>æ¬¡ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>a*</code> åŒ¹é…0æˆ–æ›´å¤šä¸ªä»¥aå¼€å¤´çš„å­—ç¬¦ã€‚è¡¨è¾¾å¼<code>[a-z]*</code> åŒ¹é…ä¸€ä¸ªè¡Œä¸­æ‰€æœ‰ä»¥å°å†™å­—æ¯å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚</p><p><code>â€œ[a-z]*â€ =&gt; T<b><font color="blue">he</font></b> <b><font color="blue">car</font></b> <b><font color="blue">parked</font></b> <b><font color="blue">in</font></b> <b><font color="blue">the</font></b> <b><font color="blue">garage</font></b> #21.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div> <p><code>*</code>å­—ç¬¦å’Œ<code>.</code>å­—ç¬¦æ­é…å¯ä»¥åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦<code>.*</code>ã€‚<br><code>*</code>å’Œè¡¨ç¤ºåŒ¹é…ç©ºæ ¼çš„ç¬¦å·<code>\s</code>è¿èµ·æ¥ç”¨ï¼Œå¦‚è¡¨è¾¾å¼<code>\s*cat\s*</code>åŒ¹é…0æˆ–æ›´å¤šä¸ªç©ºæ ¼å¼€å¤´å’Œ0æˆ–æ›´å¤šä¸ªç©ºæ ¼ç»“å°¾çš„catå­—ç¬¦ä¸²ã€‚</p><p><code>â€œ\s*cat\s*â€ =&gt; The fat<b><font color="blue"> cat </font></b>sat on the con<b><font color="blue">cat</font></b>enation.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h4 id="2-3-2-å·">2.3.2 <code>+</code> å·</h4><p><code>+</code>å·åŒ¹é…<code>+</code>å·ä¹‹å‰çš„å­—ç¬¦å‡ºç° &gt;=1 æ¬¡ã€‚<br>ä¾‹å¦‚è¡¨è¾¾å¼<code>c.+t</code> åŒ¹é…ä»¥é¦–å­—æ¯<code>c</code>å¼€å¤´ä»¥<code>t</code>ç»“å°¾ï¼Œä¸­é—´è·Ÿç€è‡³å°‘ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚</p><p><code>â€œc.+tâ€ =&gt; The fat <b><font color="blue">cat sat on the mat</font></b>.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h4 id="2-3-3-å·">2.3.3 <code>?</code> å·</h4><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…ƒå­—ç¬¦ <code>?</code> æ ‡è®°åœ¨ç¬¦å·å‰é¢çš„å­—ç¬¦ä¸ºå¯é€‰ï¼Œå³å‡ºç° 0 æˆ– 1 æ¬¡ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>[T]?he</code> åŒ¹é…å­—ç¬¦ä¸² <code>he</code> å’Œ <code>The</code>ã€‚</p><p><code>â€œ[T]heâ€ =&gt; <b><font color="blue">The</font></b> car is parked in the garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ[T]?heâ€ =&gt; <b><font color="blue">The</font></b> car is parked in t<b><font color="blue">he</font></b> garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="2-4-å·">2.4 <code>&#123;&#125;</code> å·</h3><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ <code>&#123;&#125;</code> æ˜¯ä¸€ä¸ªé‡è¯ï¼Œå¸¸ç”¨æ¥é™å®šä¸€ä¸ªæˆ–ä¸€ç»„å­—ç¬¦å¯ä»¥é‡å¤å‡ºç°çš„æ¬¡æ•°ã€‚<br>ä¾‹å¦‚ï¼Œ è¡¨è¾¾å¼ <code>[0-9]&#123;2,3&#125;</code> åŒ¹é…æœ€å°‘ 2 ä½æœ€å¤š 3 ä½ 0~9 çš„æ•°å­—ã€‚</p><p><code>â€œ[0-9]&#123;2,3&#125;â€ =&gt; The number was 9.<b><font color="blue">999</font></b>7 but we rounded it off to <b><font color="blue">10</font></b>.0.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p>æˆ‘ä»¬å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>[0-9]&#123;2,&#125;</code> åŒ¹é…è‡³å°‘ä¸¤ä½ 0~9 çš„æ•°å­—ã€‚</p><p><code>â€œ[0-9]&#123;2,&#125;â€ =&gt; The number was 9.<b><font color="blue">9997</font></b> but we rounded it off to <b><font color="blue">10</font></b>.0.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p>å¦‚æœé€—å·ä¹Ÿçœç•¥æ‰åˆ™è¡¨ç¤ºé‡å¤å›ºå®šçš„æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>[0-9]&#123;3&#125;</code> åŒ¹é…3ä½æ•°å­—</p><p><code>â€œ[0-9]&#123;3&#125;â€ =&gt; The number was 9.<b><font color="blue">999</font></b>7 but we rounded it off to 10.0.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="2-5-ç‰¹å¾æ ‡ç¾¤">2.5 <code>(...)</code> ç‰¹å¾æ ‡ç¾¤</h3><p>ç‰¹å¾æ ‡ç¾¤æ˜¯ä¸€ç»„å†™åœ¨ <code>(...)</code> ä¸­çš„å­æ¨¡å¼ã€‚<code>(...)</code> ä¸­åŒ…å«çš„å†…å®¹å°†ä¼šè¢«çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼Œå’Œæ•°å­¦ä¸­å°æ‹¬å·ï¼ˆ ï¼‰çš„ä½œç”¨ç›¸åŒã€‚ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(ab)*</code> åŒ¹é…è¿ç»­å‡ºç° 0 æˆ–æ›´å¤šä¸ª <code>ab</code>ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ <code>(...)</code> ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ <code>ab*</code> å°†åŒ¹é…è¿ç»­å‡ºç° 0 æˆ–æ›´å¤šä¸ª <code>b</code> ã€‚å†æ¯”å¦‚ä¹‹å‰è¯´çš„ <code>&#123;&#125;</code> æ˜¯ç”¨æ¥è¡¨ç¤ºå‰é¢ä¸€ä¸ªå­—ç¬¦å‡ºç°æŒ‡å®šæ¬¡æ•°ã€‚ä½†å¦‚æœåœ¨ <code>&#123;&#125;</code> å‰åŠ ä¸Šç‰¹å¾æ ‡ç¾¤ <code>(...)</code> åˆ™è¡¨ç¤ºæ•´ä¸ªæ ‡ç¾¤å†…çš„å­—ç¬¦é‡å¤ N æ¬¡ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <code>()</code> ä¸­ç”¨æˆ–å­—ç¬¦ <code>|</code> è¡¨ç¤ºæˆ–ã€‚ä¾‹å¦‚ï¼Œ<code>(c|g|p)ar</code> åŒ¹é… <code>car</code> æˆ– <code>gar</code> æˆ– <code>par</code>.</p><p><code>â€œ(c|g|p)arâ€ =&gt; The <b><font color="blue">car</font></b> is <b><font color="blue">par</font></b>ked in the <b><font color="blue">gar</font></b>age.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="2-6-æˆ–è¿ç®—ç¬¦">2.6 <code>|</code> æˆ–è¿ç®—ç¬¦</h3><p>æˆ–è¿ç®—ç¬¦å°±è¡¨ç¤ºæˆ–ï¼Œç”¨ä½œåˆ¤æ–­æ¡ä»¶ã€‚ä¾‹å¦‚ <code>(T|t)he|car</code> åŒ¹é… <code>(T|t)he</code> æˆ– <code>car</code>ã€‚</p><p><code>â€œ(T|t)he|carâ€ =&gt; <b><font color="blue">The</font></b> <b><font color="blue">car</font></b> is parked in <b><font color="blue">the</font></b> garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="2-7-è½¬ç ç‰¹æ®Šå­—ç¬¦">2.7 è½¬ç ç‰¹æ®Šå­—ç¬¦</h3><p>åæ–œçº¿ <code>\</code> åœ¨è¡¨è¾¾å¼ä¸­ç”¨äºè½¬ç ç´§è·Ÿå…¶åçš„å­—ç¬¦ã€‚ç”¨äºæŒ‡å®š <code>&#123; &#125; [ ] / \ + * . $ ^ | ?</code> è¿™äº›ç‰¹æ®Šå­—ç¬¦ã€‚å¦‚æœæƒ³è¦åŒ¹é…è¿™äº›ç‰¹æ®Šå­—ç¬¦åˆ™è¦åœ¨å…¶å‰é¢åŠ ä¸Šåæ–œçº¿ <code>\</code>ã€‚</p><p>ä¾‹å¦‚ <code>.</code> æ˜¯ç”¨æ¥åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦çš„ã€‚å¦‚æœæƒ³è¦åŒ¹é…å¥å­ä¸­çš„ <code>.</code> åˆ™è¦å†™æˆ <code>\.</code> ä»¥ä¸‹è¿™ä¸ªä¾‹å­ <code>\.?</code>æ˜¯é€‰æ‹©æ€§åŒ¹é…<code>.</code></p><p><code>â€œ(f|c|m)at.?â€ =&gt; The <b><font color="blue">fat</font></b> <b><font color="blue">cat</font></b> sat on the <b><font color="blue">mat.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="2-8-é”šç‚¹">2.8 é”šç‚¹</h3><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæƒ³è¦åŒ¹é…æŒ‡å®šå¼€å¤´æˆ–ç»“å°¾çš„å­—ç¬¦ä¸²å°±è¦ä½¿ç”¨åˆ°é”šç‚¹ã€‚<code>^</code> æŒ‡å®šå¼€å¤´ï¼Œ<code>$</code> æŒ‡å®šç»“å°¾ã€‚</p><h4 id="2-8-1-å·">2.8.1 <code>^</code> å·</h4><p><code>^</code> ç”¨æ¥æ£€æŸ¥åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨æ‰€åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ <code>abc</code> ä¸­ä½¿ç”¨è¡¨è¾¾å¼ <code>^a</code> ä¼šå¾—åˆ°ç»“æœ <code>a</code>ã€‚ä½†å¦‚æœä½¿ç”¨ <code>^b</code> å°†åŒ¹é…ä¸åˆ°ä»»ä½•ç»“æœã€‚å› ä¸ºåœ¨å­—ç¬¦ä¸² <code>abc</code> ä¸­å¹¶ä¸æ˜¯ä»¥ <code>b</code> å¼€å¤´ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>^(T|t)he</code> åŒ¹é…ä»¥ <code>The</code> æˆ– <code>the</code> å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚</p><p><code>â€œ(T|t)heâ€ =&gt; <b><font color="blue">The</font></b> car is parked in <b><font color="blue">the</font></b> garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ^(T|t)heâ€ =&gt; <b><font color="blue">The</font></b> car is parked in the garage.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h4 id="2-8-2-å·">2.8.2 <code>$</code> å·</h4><p>åŒç†äº <code>^</code> å·ï¼Œ<code>$</code> å·ç”¨æ¥åŒ¹é…å­—ç¬¦æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>(at\.)$</code> åŒ¹é…ä»¥ <code>at.</code> ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚</p><p><code>â€œ(at.)â€ =&gt; The fat c<b><font color="blue">at.</font></b> s<b><font color="blue">at.</font></b> on the m<b><font color="blue">at.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ(at.)$â€ =&gt; The fat cat. sat. on the m<b><font color="blue">at.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h2 id="3-ç®€å†™å­—ç¬¦é›†">3. ç®€å†™å­—ç¬¦é›†</h2><p>æ­£åˆ™è¡¨è¾¾å¼æä¾›ä¸€äº›å¸¸ç”¨çš„å­—ç¬¦é›†ç®€å†™ã€‚å¦‚ä¸‹:</p><table><thead><tr><th style="text-align:center">ç®€å†™</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td>é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦</td></tr><tr><td style="text-align:center">\w</td><td>åŒ¹é…æ‰€æœ‰å­—æ¯æ•°å­—ï¼Œç­‰åŒäº <code>[a-zA-Z0-9_]</code></td></tr><tr><td style="text-align:center">\W</td><td>åŒ¹é…æ‰€æœ‰éå­—æ¯æ•°å­—ï¼Œå³ç¬¦å·ï¼Œç­‰åŒäºï¼š <code>[^\w]</code></td></tr><tr><td style="text-align:center">\d</td><td>åŒ¹é…æ•°å­—ï¼š <code>[0-9]</code></td></tr><tr><td style="text-align:center">\D</td><td>åŒ¹é…éæ•°å­—ï¼š <code>[^\d]</code></td></tr><tr><td style="text-align:center">\s</td><td>åŒ¹é…æ‰€æœ‰ç©ºæ ¼å­—ç¬¦ï¼Œç­‰åŒäºï¼š <code>[\t\n\f\r\p&#123;Z&#125;]</code></td></tr><tr><td style="text-align:center">\S</td><td>åŒ¹é…æ‰€æœ‰éç©ºæ ¼å­—ç¬¦ï¼š <code>[^\s]</code></td></tr><tr><td style="text-align:center">\f</td><td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦</td></tr><tr><td style="text-align:center">\n</td><td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦</td></tr><tr><td style="text-align:center">\r</td><td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦</td></tr><tr><td style="text-align:center">\t</td><td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td></tr><tr><td style="text-align:center">\v</td><td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦</td></tr><tr><td style="text-align:center">\p</td><td>åŒ¹é… CR/LFï¼ˆç­‰åŒäº <code>\r\n</code>ï¼‰ï¼Œç”¨æ¥åŒ¹é… DOS è¡Œç»ˆæ­¢ç¬¦</td></tr></tbody></table><h2 id="4-é›¶å®½åº¦æ–­è¨€ï¼ˆå‰åé¢„æŸ¥ï¼‰">4. é›¶å®½åº¦æ–­è¨€ï¼ˆå‰åé¢„æŸ¥ï¼‰</h2><p>å…ˆè¡Œæ–­è¨€å’Œåå‘æ–­è¨€ï¼ˆåˆç§° lookaroundï¼‰éƒ½å±äº<strong>éæ•è·ç»„</strong>ï¼ˆç”¨äºåŒ¹é…æ¨¡å¼ï¼Œä½†ä¸åŒ…æ‹¬åœ¨åŒ¹é…åˆ—è¡¨ä¸­ï¼‰ã€‚å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¨¡å¼çš„å‰é¢æˆ–åé¢æœ‰å¦ä¸€ä¸ªç‰¹å®šçš„æ¨¡å¼æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸‹é¢çš„è¾“å…¥å­—ç¬¦ä¸² <code>$4.44</code> å’Œ <code>$10.88</code> ä¸­è·å¾—æ‰€æœ‰ä»¥ <code>$</code> å­—ç¬¦å¼€å¤´çš„æ•°å­—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹çš„æ­£åˆ™è¡¨è¾¾å¼ <code>(?&lt;=\$)[0-9\.]*</code>ã€‚æ„æ€æ˜¯ï¼šè·å–æ‰€æœ‰åŒ…å« <code>.</code> å¹¶ä¸”å‰é¢æ˜¯ <code>$</code> çš„æ•°å­—ã€‚</p><p>é›¶å®½åº¦æ–­è¨€å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">?=</td><td>æ­£å…ˆè¡Œæ–­è¨€-å­˜åœ¨</td></tr><tr><td style="text-align:center">?!</td><td>è´Ÿå…ˆè¡Œæ–­è¨€-æ’é™¤</td></tr><tr><td style="text-align:center">?&lt;=</td><td>æ­£åå‘æ–­è¨€-å­˜åœ¨</td></tr><tr><td style="text-align:center">?&lt;!</td><td>è´Ÿåå‘æ–­è¨€-æ’é™¤</td></tr></tbody></table><h3 id="4-1-æ­£å…ˆè¡Œæ–­è¨€">4.1 <code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€</h3><p><code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€ï¼Œè¡¨ç¤ºç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼ä¹‹åå¿…é¡»è·Ÿç€ <code>?=...</code>å®šä¹‰çš„è¡¨è¾¾å¼ã€‚</p><p>è¿”å›ç»“æœåªåŒ…å«æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼ã€‚<br>å®šä¹‰ä¸€ä¸ªæ­£å…ˆè¡Œæ–­è¨€è¦ä½¿ç”¨ <code>()</code>ã€‚åœ¨æ‹¬å·å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé—®å·å’Œç­‰å·ï¼š <code>(?=...)</code>ã€‚</p><p>æ­£å…ˆè¡Œæ–­è¨€çš„å†…å®¹å†™åœ¨æ‹¬å·ä¸­çš„ç­‰å·åé¢ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>(T|t)he(?=\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>ï¼Œåœ¨æ‹¬å·ä¸­æˆ‘ä»¬åˆå®šä¹‰äº†æ­£å…ˆè¡Œæ–­è¨€ <code>(?=\sfat)</code> ï¼Œå³ <code>The</code> å’Œ <code>the</code> åé¢ç´§è·Ÿç€ <code>(ç©ºæ ¼)fat</code>ã€‚</p><p><code>â€œ(T|t)he(?=\sfat)â€ =&gt; <b><font color="blue">The</font></b> fat cat sat on the mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="4-2-è´Ÿå…ˆè¡Œæ–­è¨€">4.2 <code>?!...</code> è´Ÿå…ˆè¡Œæ–­è¨€</h3><p>è´Ÿå…ˆè¡Œæ–­è¨€ <code>?!</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœï¼Œç­›é€‰æ¡ä»¶ä¸ºå…¶åä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼ã€‚<br><code>æ­£å…ˆè¡Œæ–­è¨€</code>  å®šä¹‰å’Œ <code>è´Ÿå…ˆè¡Œæ–­è¨€</code> ä¸€æ ·ï¼ŒåŒºåˆ«å°±æ˜¯ <code>=</code> æ›¿æ¢æˆ <code>!</code> ä¹Ÿå°±æ˜¯ <code>(?!...)</code>ã€‚</p><p>è¡¨è¾¾å¼ <code>(T|t)he(?!\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>ï¼Œä¸”å…¶åä¸è·Ÿç€ <code>(ç©ºæ ¼)fat</code>ã€‚</p><p><code>â€œ(T|t)he(?!\sfat)â€ =&gt; The fat cat sat on <b><font color="blue">the</font></b> mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="4-3-æ­£åå‘æ–­è¨€">4.3 <code>?&lt;=...</code> æ­£åå‘æ–­è¨€</h3><p>æ­£åå‘æ–­è¨€ è®°ä½œ<code>(?&lt;=...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœï¼Œç­›é€‰æ¡ä»¶ä¸º å…¶å‰è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>(?&lt;=(T|t)he\s)(fat|mat)</code> åŒ¹é… <code>fat</code> å’Œ <code>mat</code>ï¼Œä¸”å…¶å‰è·Ÿç€ <code>The</code> æˆ– <code>the</code>ã€‚</p><p><code>â€œ(?&lt;=(T|t)he\s)(fat|mat)â€ =&gt; The <b><font color="blue">fat</font></b> cat sat on the <b><font color="blue">mat</font></b>.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="4-4-è´Ÿåå‘æ–­è¨€">4.4 <code>?&lt;!...</code> è´Ÿåå‘æ–­è¨€</h3><p>è´Ÿåå‘æ–­è¨€ è®°ä½œ <code>(?&lt;!...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœï¼Œç­›é€‰æ¡ä»¶ä¸º å…¶å‰ä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>(?&lt;!(T|t)he\s)(cat)</code> åŒ¹é… <code>cat</code>ï¼Œä¸”å…¶å‰ä¸è·Ÿç€ <code>The</code> æˆ– <code>the</code>ã€‚</p><p><code>â€œ(?&lt;!(T|t)he\s)(cat)â€ =&gt; The cat sat on <b><font color="blue">cat</font></b>.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h2 id="5-æ ‡å¿—">5. æ ‡å¿—</h2><p>æ ‡å¿—ä¹Ÿå«æ¨¡å¼ä¿®æ­£ç¬¦ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥ä¿®æ”¹è¡¨è¾¾å¼çš„æœç´¢ç»“æœã€‚<br>è¿™äº›æ ‡å¿—å¯ä»¥ä»»æ„çš„ç»„åˆä½¿ç”¨ï¼Œå®ƒä¹Ÿæ˜¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚</p><table><thead><tr><th style="text-align:center">æ ‡å¿—</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>å¿½ç•¥å¤§å°å†™ã€‚</td></tr><tr><td style="text-align:center">g</td><td>å…¨å±€æœç´¢ã€‚</td></tr><tr><td style="text-align:center">m</td><td>å¤šè¡Œä¿®é¥°ç¬¦ï¼šé”šç‚¹å…ƒå­—ç¬¦ <code>^</code> <code>$</code> å·¥ä½œèŒƒå›´åœ¨æ¯è¡Œçš„èµ·å§‹ã€‚</td></tr></tbody></table><h3 id="5-1-å¿½ç•¥å¤§å°å†™-Case-Insensitive">5.1 å¿½ç•¥å¤§å°å†™ (Case Insensitive)</h3><p>ä¿®é¥°è¯­ <code>i</code> ç”¨äºå¿½ç•¥å¤§å°å†™ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>/The/gi</code> è¡¨ç¤ºåœ¨å…¨å±€æœç´¢ <code>The</code>ï¼Œåœ¨åé¢çš„ <code>i</code> å°†å…¶æ¡ä»¶ä¿®æ”¹ä¸ºå¿½ç•¥å¤§å°å†™ï¼Œåˆ™å˜æˆæœç´¢ <code>the</code> å’Œ <code>The</code>ï¼Œ<code>g</code> è¡¨ç¤ºå…¨å±€æœç´¢ã€‚</p><p><code>â€œTheâ€ =&gt; <b><font color="blue">The</font></b> fat cat sat on the mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ/The/giâ€ =&gt; <b><font color="blue">The</font></b> fat cat sat on <b><font color="blue">the</font></b> mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="5-2-å…¨å±€æœç´¢-Global-search">5.2 å…¨å±€æœç´¢ (Global search)</h3><p>ä¿®é¥°ç¬¦ <code>g</code> å¸¸ç”¨äºæ‰§è¡Œä¸€ä¸ªå…¨å±€æœç´¢åŒ¹é…ï¼Œå³ï¼ˆä¸ä»…ä»…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ï¼Œè€Œæ˜¯è¿”å›å…¨éƒ¨ï¼‰ã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>/.(at)/g</code> è¡¨ç¤ºæœç´¢ ä»»æ„å­—ç¬¦ï¼ˆé™¤äº†æ¢è¡Œï¼‰+ <code>at</code>ï¼Œå¹¶è¿”å›å…¨éƒ¨ç»“æœã€‚</p><p><code>â€œ/.(at)/â€ =&gt; The <b><font color="blue">fat</font></b> cat sat on the mat.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ/.(at)/gâ€ =&gt; The <b><font color="blue">fat</font></b> <b><font color="blue">cat</font></b> <b><font color="blue">sat</font></b> on the <b><font color="blue">mat</font></b>.</code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="5-3-å¤šè¡Œä¿®é¥°ç¬¦-Multiline">5.3 å¤šè¡Œä¿®é¥°ç¬¦ (Multiline)</h3><p>å¤šè¡Œä¿®é¥°ç¬¦ <code>m</code> å¸¸ç”¨äºæ‰§è¡Œä¸€ä¸ªå¤šè¡ŒåŒ¹é…ã€‚</p><p>åƒä¹‹å‰ä»‹ç»çš„ <code>(^,$)</code> ç”¨äºæ£€æŸ¥æ ¼å¼æ˜¯å¦æ˜¯åœ¨å¾…æ£€æµ‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚ä½†æˆ‘ä»¬å¦‚æœæƒ³è¦å®ƒåœ¨æ¯è¡Œçš„å¼€å¤´å’Œç»“å°¾ç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¤šè¡Œä¿®é¥°ç¬¦ <code>m</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>/at(.)?$/gm</code> è¡¨ç¤ºå°å†™å­—ç¬¦ <code>a</code> åè·Ÿå°å†™å­—ç¬¦ <code>t</code> ï¼Œæœ«å°¾å¯é€‰é™¤æ¢è¡Œç¬¦å¤–ä»»æ„å­—ç¬¦ã€‚æ ¹æ® <code>m</code> ä¿®é¥°ç¬¦ï¼Œç°åœ¨è¡¨è¾¾å¼åŒ¹é…æ¯è¡Œçš„ç»“å°¾ã€‚</p><p><code>â€œ/.at(.)?$/â€ =&gt; The fat cat sat on the <b><font color="blue">mat.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ/.at(.)?$/gmâ€ =&gt; The <b><font color="blue">fat</font></b> cat <b><font color="blue">sat</font></b> on the <b><font color="blue">mat.</font></b></code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><h3 id="6-è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…-Greedy-vs-lazy-matching">6. è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é… (Greedy vs lazy matching)</h3><p>æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤é‡‡ç”¨è´ªå©ªåŒ¹é…æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ„å‘³ç€ä¼šåŒ¹é…å°½å¯èƒ½é•¿çš„å­ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>?</code> å°†è´ªå©ªåŒ¹é…æ¨¡å¼è½¬åŒ–ä¸ºæƒ°æ€§åŒ¹é…æ¨¡å¼ã€‚</p><p><code>â€œ/(.*at)/â€ =&gt; <b><font color="blue">The fat cat sat on the mat</font></b>. </code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]1' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div><p><code>â€œ/(.*?at)/â€ =&gt; <b><font color="blue">The fat</font></b> cat sat on the mat. </code></p><div class="btns rounded grid5">            <a class="button" href='https://regex101.com/[object Object]2' title='åœ¨çº¿ç»ƒä¹ '><i class='fas fa-pencil-alt'></i>åœ¨çº¿ç»ƒä¹ </a>          </div>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
            <tag> Regular expression </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>82å¼ æ€ç»´å¯¼å›¾å­¦ä¹ å°å­¦è‹±è¯­</title>
      <link href="/posts/02d5dc28d9e2.html"/>
      <url>/posts/02d5dc28d9e2.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://pic2.zhimg.com/80/v2-8eabfe3f18cb61d6021150c4fbd35641_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-edabdb85badad455f2fd4e7b6e17b733_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-9c39cea49191d250ca93eeb26bc620f0_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-4cdc5659cd308b93d0f5612499c0e009_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-60efd2b821be6e03b2edd6f59fbe2545_720w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-6916ca1c3c09a8885f48c5b37d4b902a_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-7914798101656f923f1dc46490a59f6a_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-631b6525434d65445cc9e22e7c819d48_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-7976e30bd88680d9026f132493b4eb52_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-08cf6c79bd37ba00792628f516381edf_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-d979b5d91c58dfdbcf311eb92571619d_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-d2ac3b3296286061c27bc2833f295029_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-beedbdb89f905e4820b228ad17a8ce56_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-0d249e722c32bca151645e3accddff1b_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-e180ecc299529c1172132a75a04624a3_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-7b4d387fd4ec31d67f3f7a0f8c30aff1_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-e4acbec44e996524c6cf3fa023a3ae12_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-0ccb519235fd5ca234a2f80a6d81555e_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-6a8a199390b6a6beaa9de7721fd6e5ee_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-b595bbfc6d8345b0da68db382645efa9_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-82206e2fcc0d72256d0a78f6a1280048_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-cf93e385a676d03d649275c1bd98eedd_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-0a04220a65468fde58c3c144e26dc668_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-8a1161174200366d207fb5fd217be269_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-61710e7cdace3e92e6a90c9809daf00d_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-48ed782003e6dab36fb4548971b9bb04_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-362e2d040e4dcfa2db692d0e40f74520_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-d8f040001133c3c742d33141114b7493_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-be6c148b0752fae43fb4bbd9ed82be53_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-ff8219f151c276c3b6e7fe8b3f2a0e36_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-cb4bf97c760e73348e62d8d706412699_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-e5bb2e0869641ae73fde20e74ca3dc72_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-1dde0acd69a8cda6371cd6d18edcc289_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-750395c9ffdbd451dfedcb53fd075040_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-6fb8dbafa90eb2927c3a10f93f5c720c_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-3da95f2b96873ef286d4bc0d282a4387_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-735d3198fb6056ca42476e30695bd839_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-cc1a24d4b0f82b3c7a9ce4fb7ebfe39d_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-430837053051a7a76a096d6cf3f1bbf5_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-9d4d198376755998b91ded816b9db542_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-e6f99ca8e037acf1538cad99d6f91616_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-d52b9801c3f6222a026e39237db8bea9_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-e3b361cf7385f50fb3380801a02dbaab_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-f60d4dc034eb7403f48062f9afc8a45f_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-c2302b3e5419bf7f91444bce377596e4_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-54c6b1e82976ab65fb154d5c77853d2a_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-67ed3f7879653dafa1d36bf89c34a37b_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-2aeb55aba089f7a08db4cefe6f59d8a3_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-568a2e38f04e7d2ca15ccb0fe40ba1da_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-51a039dbfa0e8b44fa1babea8d542714_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-53e593bfce78e1dca5115862d08c7253_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-0a0f02f685144784a1e48fad34ededdb_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-a8f712730ea6c1970ccc00a5117fe3b5_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-370cc31acd89d8d121a15a9b2fecef32_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-12600bb48202ef3ea0a81384df426339_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-216f8fc54075a1652641035d4abf1fc8_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-fc6038c78dd039f5b8c8ad8043580d94_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-af34e6e5969bf83146cddb8a3ffeabea_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-4ac8563be8e7f32e3ae7675f61ba6951_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-acafd31da7cbbcec5fba6cf28848a93b_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-a3fadf780376922369b578386c7b8f55_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-ca3b9c227f92446da1becd9f5d4edf48_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-1a99d5d2c9896f423d297cb2232b2927_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-4ab0098811a08730b6bf7e518156148f_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-49bad0ce9287af9f2aa3132164374ce6_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-2caa2ab153fa57e172432d7e33d74d15_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-80786f725e139591f1ab985e7221eb47_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-197c482e1ca44ff6ba3640de79457b6d_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-151c380df6c1c2be0b49903dfdb4d62c_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-e383d54687d5ecc8e5ffc8d6be9e1aa0_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-35fa0d81079cc8a49a196ffb6c3019ac_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-c39e9d4496f917164cffe8af3330a60a_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-25c8d73b53b2d7027bb7f4749f4747ca_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-c960e1895ceaeab9387a16bc98c057d5_1440w.jpg" alt="img"></p><p><img src="https://pic4.zhimg.com/80/v2-fca410ed1d0c2c425f3674ffc67dad3b_1440w.jpg" alt="img"></p><p><img src="https://pic3.zhimg.com/80/v2-5d5b426b59d3621a5271b0c3ca25305a_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-540f00ee3b9e929da4c1957bb22b57b8_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-7fd8a63129df1355c3b9792f9610824c_1440w.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-3e1ffc772588a92d029db74694c781dd_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-fe8ede50eb79e98922c7a1325f22b854_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-73809052adfbcffc25ac3e328becd9d8_1440w.jpg" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-9c4bd4cb6b91c08103eca591afb62918_1440w.jpg" alt="img"></p><blockquote><p>é«˜æ¸…å›¾ç‰‡ä¸‹è½½åœ°å€ï¼š<a href="https://cloud.niux.plus/#s/8EG8gaMQ">https://cloud.niux.plus/#s/8EG8gaMQ</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ‚é¡¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 AWS äº‘åˆ‡æ¢ä¸ä½¿ç”¨ Eip é…ç½®æ–‡æ¡£</title>
      <link href="/posts/84626d016bcb.html"/>
      <url>/posts/84626d016bcb.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•!" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="dfe68c5f85e87db3f4a5bfff7cd2f0fca437aeb72144390f62952f1033d1f690">09144076eb3523547a2a9e2035f1e123bdae542bc6823a78f142f66246f75e5eb86f07044331632ff7da9f405cc04b5e8389e2fcbe08ef14b29c6cb535673b88a5325edb2ef587c9408cc4b37d9501ef8c5c7aee31ff4027197c70d8824ccb3f34f2b1265c9abd5d68a40b87272da675e6a075b497d98aa91be679d5c8dec6fc53ac8e1e36d32d6d2517dc2ca58c3372eea66fecbee7f4f80b12985d76a90e0aa16b1612ffd620b199833c3dda9632fd333c26c60b4ebd033f9dfa5dad1017d7756e6126e7e812854e5e6c003d12c107dd70213c99015600445a6791970b932722aca5b99436b93eaa51aabb9f99f303e0d3e57855c4624129c6269d56a32fb8ae08f5ea2e09b9acc9fcf9b09db11e31318871df7a4924d71505eb78ca86f3716c1ef30b072442b73d6e3b8bb4e87da4d2226739651d1d58775dd73c7e61425b654e44b8fde35d71e5d492a2fda3abbcd78f5c3382cbfbe430e03badbfb31b4bf8d5677410d7a568ce8591917d94df373b0598452c6c767c7fda2174956a05f8553ee38c0512d7a2642b9f8b2737475f8c4b6cc954f1a0e811b53a37f6ac1fc1e8c0378c0a6430f4bf0afa3c321899c06653ace134b357c62e35c60a805455f9c677ffb9076d6f8c3cfda099169879acf3b9c73d6450af059bf25cd3e735be0450247732bdeb76506648baf1b7780213de227d2bd31aae6908593fc2e5f7844fa2cf7803b7085cee0b064d74d14e7775af00c5241f02808255415905410917bc7f43ed7e590c3a570f3a26f5432d9a0314845ce71400295c2da3318ed5a111f9aee1580f7c39cc887986378455ec05f7d7ca453bab7f684ae1a16c4c2c8e948adc0da4d24d13a77c4b15fc8eed3bcca895733446133df3a47b870c0a04e6e0f741a47bd176bcc57f62ae7efd9d2fb3f08f4670d38331e45b5cf24279c1e336794bcac21c665c02db6086f30efb1416f89c28852db906dbeda9166141ec6af2e46707502d74170c28deec07c927a5c08290c37e240ce60c088ef942e7cf72e8c54571efeed44501b87531dbdce32c0cd936ab5754e04c4aba115a541788dcdf0256df1b4470471e8c59dfb174576a9a17830c47585f516fdc5c644984c910980e4ff4fdb0c7e4e9006fb3abd00b6dacf61db80e39cad31f8bcc63f58922f3cab38fbe7bccd09cf20ab7c755947c75fdb9353add516776e7be7539677fd33c66fcb39676156318efca89145014ffa32c87e3a7e24d7d7751da5a459260dbf32c1970e566f53fa739bd9c574a1d7a0ced01a6fd34400847566e4e71996ad652bac4bfa3691e46d562ca03cb6440e056079c46a12654ec80ba99655cd3a17a8ff983f2ff106d7dcfa45b797847204bfeaa0472a2c5cf40a0e4b4709cf1eddfb5dc52edd529f486abbfebc21841fe21b10e5070bf2dfe9e1b416437e4d4d1e33b86b02d0f8e68797caf4e94d5e9ec58568666aaae05d1766d658df8082fb3b466d3a914574fe6378d9e2dd752bdf89232e240bb8a885f262a58eca09771811799035a1cd1d089b1341785b95e23da9586edaeb8e512cfe32a0e099300c08f586f32e40ac0ad3724d45e0be92865fd125f6584a0bbc2b3c6f8ff3f0a3c15ebb6232d93d4c1e546eb2adc34fc8d470509ccad911ecbd64d1b3b53b70610c6c36496aec8b8d95c484db990caddc75fe997a3a6880fe048499cdec8b8b4602f789e055a6158a68ba4dd42809b7f243685d3746da0cf0ca5716607a083d3bbf7c9128bb87ac397775cbf43ca0d1ffad2793cf5551b9075fa20670619e474d10163ccc1ab6055e65f400c4c8e5ce7adfc7b1944879f8fc117694f035733c99448fae31401f62a7234ad7146d3af276173d71c4ee05768c535e7a04ea8d8dcba8eaa9e0c93aea7d4830f00ac41fd32892ba91b7e78831d53f1ad390af2a37fbf79f0fff0b25433f7a616da0dc1c7d9e1f78ab26759a7e307f6ba5c9e9ab96e21d4d09236b98651d34abff00621f570ba43ed9dfead870bffb9fc66b90684000980f4a9cf4cf058c67e7db3fa64c6bb5c716461a83662caa4b9d3a5cfa25c15e506c718c5e52059cf96d0caf0544c8384f6babceb12a51b5b364dcb12ff8f6670247758a95d81ae666eabdb164f4fc1b7975e85e4d1fda9eedf982126ee36a3f89e0cec4f0ad713178c4546c29863863e78a75b8c3a49fc216e3ec773326a597d11e278ec69a2a92c2d896952ca6bddbab0d6616f1842fe5f956e28562372b24deb2477d10f766e810db1bdd5a1df82282b2cdc8fca4dee8b7212bd66e6822f8d6847d5edd926d24b8480409b5ecf137941395bf485196138124b9a4a18a6cbec332cd56ca2abff37903ba73b6d2e740314475012617cfefaf939e656bcf7d1fe9cbab488b6a09462f40088df51e55f92f8e696068910c8dda995f7cd8e30625f32648230cdf286e04e8399d14c06a6bd19005468c41ecc163fd445998d6687169f499d17ad6462d2df671d30deb3a9ddb83a0945c105ffc17568df074427e95db44931e5b12e63c247a956b3e52799e1f771bfd6c120ff8b9380c0a649cb8c45b57eb8400898c52e994335294a3314e735d770b74ebf5a303535cfdd2e4ef49c5ff5f0ec6e24a945584ea48e473be4ed58cbbbd2183705392bd8da849604ccb9dd660a57bb2b20cbe9ff99e86e290dfd14e17207d3c1330681769cca8bfc56a7fbbcf5a8cb95fcd9774b423c0535d4b65bc4a2efc7dd96942e03d7451444f5c19ea01599455c4e2192fdd6729cad96c212b75bffbd4a38167ffca01201bc50be81da7ce529b81260868d9765b71ee32b13278d8bc56ae501fbd5cce32b31100f53d6abfe120c61b4d1946b9db1b2b51f32f9246205cffc8225e05e8a8f4626417c756fcc1125a6436b20bfc0d5049bddc52b8a9b52b8154226a086c5b8aee504afbad0d8bdf78b25021eb0039a1813d6d0bb417933c6483fe37e85821d7965ccfc5de13df9637bbbcb5bed7e2923cd728be96a0709f77d759a6c8699e5fc223df2c04a78e46c05d8cf235d65b4b1d6db70fbc4b87f78dcd02a730379492301c2173db08e78213b70dc9f5f03c9385a4ff583edf52dd69899e27dc1875e5a1a04a213bd97be61b02f8d9a8c56ad9feddd9d7af04346f13e6c72d2c6dee42da0d0b784198abcc882d44f89c7403009174a82a30a4bb14c8784e081e72ff0c40e18037da41f2a9a1a5366af9015759c606b4f28c3834d9c844a6d2d6c83bfccae176f1f25b6f5a1cec981b13b2acf03490554e0dff9aa0cd591a0f1a79a0581b1da5b40e14de5025bc32ee7afbdd03400cc349e164faebcd15018aa9380a81cf45e1c3e9957f911dfe47a76a8ec0a50fb0a56832f4ee3213de2e38e0feb249ceb3db7b06a2c29b24f7d10134e23e5c76aa17c6598bcb80456217026676cc9aa4ab69d47706ea41a85393c3ee6a20ab5031819bb7618262fce268f100cf2901d627230e78fc2b6f8cc22bc644b19149e205d10e5d81d72b4fcfe627d4ba05592813518c825264e5602e39bf4f1f2e904e857137fd3f90c725d106fb974d516d9491f4ae4bc06c5f49437ab443f6bc064ec5ad9dc8012bd722f9c4bc6616b8f325f828bfe039572c135d34cdb1d64f25119d47708796f6880f7cac3a66e89e28521292435b92c92e43bc4bb947e2abff72ceb3d1f0fecf78b64bf6f9cb5fc3a10f8b959632debc62e19535cc82001723613913b141f4ffa109dcd29c135667eefe475c77f90e72605e2c92b89c8c2f65085aa3651b1ebfb5c72aaaea2e93a4b8bb87639afec4c4fa14ea8d130c318605c027e7144f3de535163ba641a4afb661fb157e99c374d3ad3c1eef3f8ea2b031a37426ecf33f6c165493efc7cdecf936450e45837f02006072a6adc9afc32b1c5f5fa2b5ef8c0e2e320264b95a040308e677b5ccd603b3e4e900ead15f460454f8710948c748e331efca533a766c7397df1b26fc059ca2f4301d2b6ea2bb36549ce0ecdec54f7269a1c9cfeec80d7aaa0b1106b295ff61fde506c6375095095e5ed0550d5186f23a7ce1eb7482c0c54f2693e7b2903a8196c1fdaf828180d7931ec466823b1597ce6c6dccab2c9e03d35e069b10b313702d4410806d0d1cd382ff6e387421631ca907c4078389e76bae8cf2719dbaa6e35fb606e7b3769018d1d5358790379afac2fadb37a5f3fa681def36848d51c40fe28c098d0c4bbf9a769feb44cbc487da32eaa3831a3a31e179c9313cc5d7be5b1a22f6a0ffaffc045262293acb973c083bfd3b83128c66ea9f4b7bf25ebb37af4ef7497016060f6925c82b9799f110071754ac9ab195410eeb3c26dd019c4eb3e8c32fc3633386ea480eeb47826c6d661a92cc0d0518271d9c58f0ea3fe872055c6d0ee75cff9b6aca684530102748a236ca7e93d8e41aa61e2c675dbbed733e3167afcc51abe819eb51a2d611da25a2a95a113523b7a9d2a9eaf683312912cc96377310f35be9ae0bc79c7f298b5245b1a2c99ad5855f5fe70d43969e5030e93bd8a56dd0ad6cbd386c1ca0d25c091ca19d334a418aed92f60614a6748c3c0c563690033e18517f40066775a1a27fca1d3486d9ccd9122902caaa2c5049e4f9c21fcf0e83f75d2c201abeb5a9e6540d652eaad04b4e54825d444133c45f6999a69bf01a8654a4c9bd4e44dd69748baee20dc69a6be3f01b2ffc99d197b85d6a0669c386eca10c05bc9c2f98a98377c8e26cf05be64eca598f1c11b19983fa72fd655de966056dc785f80db321b8976d5fa449f2bf90c830eb1ecd01ad75b2e554bab0aad273532783bd1317865c3e17a6acf89f70ddf77cf04b9982d9a99de1f1eda9af3c295a56d194f8a5d4354cf62c22f244ee771b278ddc71dac6a0e4e59e7e8ec4170a3ca4288c200a3086395b5d18d90593f740f1c5c62205c838b167e72da96b8560f54897ef67425897d37fbd30f725068236d79ce0d78f8c361f721919bf8ac5ed9c19eebed06444e2f337a539b1bb3963a0b7ebb6378dfc6c20b36393f66139525b0556085e0c447d6f5868130be9fc61a248b42347435f86b73ca55f314e896821abd8d47109a13b631e4d657bee5e2b64bf52830d6b441b0b2f378d2eec1ab44b06cd227ccb7a7d8719858e805729dad0bfdb72d6b9158d9b631101fbaecbb7ea04f4c2af7f2dcc1dcbaf8a22ea796b4496593c3ca8daeb85e6e3103e77cb936008cbe84551f7353c76b94ddebab5fe3c823d585bb2405dd1f02c8dd43580d0abcbe6a298240901c31a7d54616d631ce72b4ea05033c14034d2725ce6d5cfc64d93596cf4ce3fa30c1e3ec3a86727f7820f41132b1f7f75b45872b621b4643936b74379309a443b02ec630aea4ce2599cca42229cfe3ce13820b7b379b034552a7841dc224c451ad0c79b394ae2e277456879563139cc7b205eb2ae645b70ee1deebff691dc24db15595abb24410484eea88933d1987681974669cca04eb61267bf6d1e7c80973121b3034cae08d44cb9b36e73110cba2a16970fea4ca63ed8eb33890f68e02232e7a45eb47aaaad3a9a961ec18cbb2aa8cf5c623eda505a94c7bb4a1c7c673d8aa5108c4789832c4afee61058a87878481147a382d00c2bc4ef785e26e1cf35ca903189d3dae02080aa7ad2f598139982a51d56d9c1959873098403884b6aad0740e860b5c340ebcaa830f2a52848e668ac67b58fe086fe78844cf64948331d5ff25215131bf89a0cd1ae736959632eb3e97c3c2c59eb81e6ea7c4555b32ee13475e013086f28f9b16341137a0d7bf78c8d7bdf909d3b441b1dae0939f1849bac76a471709d2e5683a1f276ed18121e2dbaec387569a00765d230d8b49f240310419db07ce0e9ee0d7e3535bef35f1d23394f0374933483c4f7f5e49e8fdfc95c27d303b1acbd1e63f5dd4aa6d140f259a7c7b9a68fda2bf5ef8f43621d2b7cf19711aa1ee1a715c39433117d0de565509ebe342b367175337fe78dda797e0cca8d7b021785ebe2cfc42826b395e312cbecea70aa8b086f7758dcde7d9f8f51c7e3ec8793720d97a48bd7b7ef700022f7f5324afb936c43f64a1765a8a79d45db75e6be9a277e7936c7ea057664e4195a9ab2e49c3eaa7c2822d6248cbdb03a0412afd5c26fb35ae2b27a3815e585af3d10a8675de0e76d28e47a9596a22d3eb939d2638b7b8fbadc2f9349809f4da2ed63732fe1d00b60265f065d19b169043cc1ddadba814c9662e596b8ad61e8900bd89e64fca67a0eaa561845f08e369ce0ea2aa5d5f6c4713ead041550b6f629f309092323f61f7284f35c54d025c537b606e0a38e201d9a3c5f12f48f56dfcf6b19530c492d995e22028e6066b6e3a1fdc7098ffc6755d305ca34ecd11a664c9287139106a6ca0d1accb076441218cbf5e4a74fe67bffe8b2509bd97ff0a3620b2790a02508ffbe3d7e250609de4d084d6e026081b225fcc4f534f35dd90a20f9fcab60e620fdf1d832942636ed51d1be109a551b0d6fc1fc0864e431a26ac1a800e9de2ed2d61e27cdebfea28a7287e0945c16ce545637fa7512cfb706d76acfc1f722f662c1546863cc962131bcf06a6f0c2aa54b2d2b4b3aa140ffb587b20e1d06e18fcf213eb1a17ee2d1d99c502e8c7f8c11c068cd0fe3dc7a2ad53e29097f2a473f34c9551a97380681a3fd4a6041c2e13fe386f8e5d39af3af44d902064a1336029ee4d3ce5d677fb46a65604add290488fbc3a2d7199311dd2f712846f18e3b291dc82530178b364d5df50c99525e2306027333dca940bae632e7fa9ab5844a6d26b7b974bf43c25bf5e5ba5fbc2e577f9f9a9fe7a7e121b4ce7d7c82138a7a6a0a64a2fd6fea51b3c93735dbc23194010fa39e348d052ae842de992c27c29070a7ea865032e14c43c44524baab80907b5f27f78f2b7f198295a446ccc71b28152834d84b1e929f2b683bf72207698bacb6096d1ce6473ad09faec6fdfbc53f818c8d7676050e1750efba155d200713de2aeb11826063fc22b1d1dfd75cc404dd81472c96d66b665da8da383a5456d507010d05f318097b15db905f0cfd6dc3a09c1cf7d3e64c516eaecdf9fa2e5470db8dd3074a2d98a70362ca720db3d889ffc322d2253bda71be52abe19e238167b38891edfda33cc1bb659960cc7e6c20c28b31306160e0f2853ff931081699084839bb802cc874f18fc3f22c1ee212817687e7a2a5710bc29b201b537a7123dc2759223d230b2d5d02cd1f41ab6e765fbd6b5f554664764c853ed94c8885e9d99d4a27860edf027d4bebf6813435ca05fb05cfd5a34a20cfb63ec4d8bf5ae6056b97cd6abc15339e1533592e239b6c51bdc2106eae711a8961d6ff1a24f03cadb9563ef7421f85ca952e98bcfe445799ed2bbdebc43f0db7f4e6d7b928276038f2e948a16ec6f14f8bdf78b432c1528ea9ca6d9ef08ccfa448d4a27c349e504985780f98c4181bb4b2835a293dad1f910dea3f5520866dcae9a0309cf277000a33fd3bf7ad2630fc3e8bc5bbdfd06da3f6655093b80450cd98ac55c777abbd1428b63d435183a31d10bab3fe4e61442857ed42dbb80152b5393c2c902b1d02779f280b1143013a697724763285eed3319e9decc075d1768726b1fd1c506f49049d6c73ab01cb3f08c8b4c35fa37b29e9d5643590fd730cdcc511ad625280c7c9bbdc98884126c79654dcbf3dfb87fc6707bb2102f74e5fa4916ffda87ea12ac1c2634119483990c45cbfb0872f806d93d052665bb83a31122779763d07349589d0e089fac67efdbcc2ea3f13ec7387ef065734174b11b8a04d11e8dc2c76e20f5d242eea63686a4ab30bc39ecd5dcec1ef274c74358d4281b0bafd49023bb950d362834c2e153aee2c0abe2a9cb5b39bfc064b8b5b888a5cf3fc406aac1431cc9c5ba9a7dd6fd3a6a32dc0fa9b4d47b879845d694032d186011d1d8706ae7b55a77b7947ce48df86ae225492335b42608c521a3b6626d9eee730c071f05195552e1be8fb4b320e1547773d4338d5ad67644055a9b5a4d544debcd2498c9a54e690a028feea7a0f27478dcab7e58d4f1081255f6a159bd22e7e2ae43a7c457bc8dc337817b508172074f0769e17374589f9eb8bf4a8c575a2dbf2b9d4f02be1c4d91aa8c859ed7a966defa9b69208a0912c49406629c4a9dad6a07d55297f71010bb07abbaeb169a2bd9d6f6d8317cd45f41dd284981fbad6f25f230cfb4fd6d005a33e1f7004be5da469be0f880a7b2fdfd811b846c5a7762528e0162de522e30982588708d3f37e606271721227c6e254b7d08749edbc34d382b50d1f4e7caa3d563f6767cb62c22344d51674d91f7fcff04ee801b0a1eb89fa38301cd9984067ff90ff2d59139bb75c11e58e144337cb783213e4f8a174c4620c689d68518bdd8da302089778c43ba09d398723c117e2839059f2f02c008868eccba56bf25bcb546efb7cebdec5dc68fdde171bc2c38eca90acd4bcd19e147f700e1f0534684923fce6c5c25da4321300b83892d77c0a2e453a7af34c9b43314cfad6f3e396e7bc764a081254068137440c9fa39f9b4deca94a4e8fdd24ef4993d3437e80bd50f3c63bb9f915104d8fa87389d08762518746e011deccca14b1c1234f9e5ca5d3b985337c6382502c8ebbc40164a6f40996e75b7d39a5182d8903473ec67e5beca2911eb0e3fd64e535c5f30aa3718151c68d4149e922c6cf4ecb1e0d65f0ef79eaeb3395cb9482831eb03c40a80a29aa5296a2f8ec568e80132dd70bfd05cc948ec6dd8caf2110ef6729940220c6f43a11a49cfce8320993b51ae7d20920fb474dee2c20c2062212116cf2314bb95572472d0b4ea813848cac27228a338eb18666deec564746a328b2d7babcf71d2fb6bcb4c93a691d325e0953d81a35f2fe5f29afe547658547e68e4f5d70148d36c26b4763cab8f4606d15bc21223ecf7bedc035d9f2b3b628ac0b7cc919b71ebedb16114f4aeea728a40477c6a2f931b66b6e50b7fb4222a8f5aa12dc954ee98c4da3b75fa9c55b457cdfede81ecf07484f3e32ac5f88249d3b23d09563b0dfbcc05a0fe47a4be45abc105c6cf5b8e62b72ee3f46232f8741c9e945ab7fe9ba96c84b973765d63652152e005493bcb4fc433cbcad92a3f71755fa7a39115fe6a97bde4950e20feab45440054ccea511b24248a70f889bee025113c6b9430dd090b78d50b18c91855c9ba2489744674b2839fe14a6b602928073b620e080b4c4d5503444f2d1a87d0d304096516c81372cb1a8d7dab68f2ca02a24b239445332db481f4967fc4c6d69f97f8c814c4b0a5c13961c9fbbe94b05b47a73945744e3971d4277827545371460eca03bdba26d17b06ef4eb1486e36ab064112cfb9dbc9ab72da2f23ebd1be73f5137c6e16accab10d1697942bcb8b5c2128d50c14a41da96e9cf61d03d3ee6606ac58a8a047b0e93e02baf063a934544a452b6b0f438e26828367eb0619f1843b910c51ba1d5d272d71796445e60633d2b9dee5e977b7e140ae0ac7ad2fd91a8b6741f8b77a9ba65263a154937ec2cc326c1f1520e1068b80c4a200ad676e4fbfd9538afd544fcd01b48e6cde6ac4848e3e42dc84ace6cb3dc32e34ee7a0c5d82850b001b68a33e3e39969f45f8f44f9722f60bec468ffcb0aba57b1ce379ae381ceae71e67fa2a9711eb119bc6e5a69bc1ed1264dc967d5353bd8ef6658740bd18b75941f43be0b8bf9e3b619103d780c6c92bc36f5289e0aad9d0cb89d6012c90a35f829d413a540ed025debd778f1d198a8c34b7c547bcd928f7213f5a05f87d00ec5331027cd4ac9384131ea046fcd3d9dc43ec084d5350a8880490428bc73c19e4878e67cf4346f8b7feb9876463fc712cf9d6ced09c1a4fc8fdd69362248643182ca2c87a0b0ec1e73aba6ce6352ad4f90337f7106eaafd9d0a48b1fb35e0730ea8c95fb220d04fb018de32c7b222ad5cf51199e7e5562d05a9a48c3fd82a2836d83ac677eadd17502496edcfd6f5c526f5d0d263006053c5fb3405d2fb70f234990cd686e1018be26573fffd691d4981484e15354f5a4c62077892660d3bde7e91b9d492fbfe84bf8e06437d550eeb32a6387d477b97f5216738baf91373e28573906fc7f1714094991a4eac78275ce1a2641a6b11247750bd7e70e7db14f980bc90ad8da61c3a0f9475007f5b67088396475730d007a41ac2fc1a4e2ec2a16ba51a70180bc725ba298a553f769cac593d04e222aa0181a866288edff31118e10bd9a17df59e661b41cc0565c607424a9b0962ac7fa3901a581fd4e5a7adb832c9ddce416f3bb5fb16795519611843666f900f2da7878d87791ad101c4341322c1e0fd72de40589d2c0ca676e942d55d8762def68da4b5db79018c87978946ca6f591b227e9690b68139768d303130050fea8bfd0d580f64d2cd75f5b7a8a1120a7f2ce55b70929eea227a89fb51b1dea3c5881c7d577ba4dc0eed75f13c69dc2563aefcfe1d13037e388373b9b011a33ce3650510332906a401ca13f202265307df139e5890e631221834079806c93b24427390f4a4cb76424c45458f00aaa858278fd019e31bf870d791e9ed02ce165be7a4f168bdb2bc91cb1727b5ff4ad5158227005f6eeb150f632330f52daa0e272263583f3c3440e587da0713d6e1314796dc331e13fb552a481ff0dfe9dad1687b3d0269da2d0b70cfb29b0d821d98a26dd92bdfe6284901348a2b2b04c7125843087cfe959b1bc82a20237577e5016433dd5901742892e33dfbb7a06609bd318dc8b80bc766c9239e0d28395b43e8d765215e81b165f31b042a077da96735f8a2ea44b53409ddf06d822c14f48923fee66aec15bfbb266d1c6065556c10725a418b0e5ecc4969fa07967cb6a13475b791913fc06378e33ca43650e3f484626540f5aa5d87d2f9b203cb8b02e5b9550329b60139856cca15a865bc61b2ede10163fcfb38eddf02754627c75d4d87064c31024c15e7976e57c46d4674edb74d68f6628195caa042fb8d71f280a0802cb20288b9e2901874b4a85af6c4d8c5be472a0ecf9742a78d2e977e1123793c016794abecb3174c26b5835cfb9cb17c8f30d057630696332e72c4a15228a589292559680750970258a541ee35dbddbdd7fdcc17a07ed59423fded64ba7f0877f2a06eeaf1e0520150112874209dbbd03b75f9acc832207a71a95d4e31a7dee6f47db8c6097e5e1d204b706dd7efa5a3eb45df77fea4d40ac0286ca72b34b04d2977381916e7acf452b64e73ab8e119ea25b854e59185cb3f53ef9f308a644abe798ebc8e145d6f0b28b1113113431c62b574a010b01d6109c41473c8ed5ebe4e0875bedb8e35de0dd935abb00b57ac1f735484a6dd2c704c093ba23f06228379e77a19cdb2c0c079989c00c47718281d496b41ccdbb5970b76e22838c42af5e7e0b07127e8ebe0128177936d1d1e22f21d283da20bcda7927a10d3520a561c9b2ed43bb9f035cc364dce3918a144546d074ea60b817c5dcf2134b7a11cc87e75245304230378f71871bbacc75e638cdf8f6f9552286e86027b69971ef67e1ff81f803edf61cf3d9ba826f9a9ff2af1f75be10500c9d992a644ba1295669d4daf15fd9128c5751db2bcb54382e1992266caae64fc2fcaa14609108db488130dc3ec97e4fa128f232b855d6464a2938b61e7f7229c5e8246bff501120aacf33c9287097881e99d8af98c0e40eed82924b31ee927fe2b6d8223b13e8fe51fbe92ee9dd6eb32f7fd811b379ac63cc295d75cc2d8e7ec002c92cad1e28c4f88fb2d72db5e2a69fb9d2b64c9830a8fbe8c4c8bf139de06287a481a2b421e47268d00d2eb44af0cd4a400817f7a63ad9160dd818c67495cc14217ff298d6a0595f2105776ee4ec652c7610336ca1be1e96300bc01899fe0e3bc66aeee51f7baa5538e6fdd5a841f1079692b427cac1c84ad93d720ad2e12cc021fc546d188952f2e79f00f3d8b45f6f0abe3f2eb6401f0e65bfea956a48b600e9c607d4d86ed0c33a969dd9a0611a3293f3f6ad5072a942495ac7051fb9e998ebb22070a82532b6ddb2c3c92306060ea17ca5867819cb3c13d138b90ed5fd78fa23da32b46f32ccff3446f5f5be9dfd4d9902204a143fb21c239807107ad4f90238bb859d2a5463bf52d13351d0b44030dc16893e50d9c532366f1d03510ec908df6dbbfa04876ec50de23325b2c43ec54fd239e05c891f0151c7c11aa0954205015b21303d84572034f9d0b9079c209741306f1b212487c2a83b0dc33db704f969d941f0d53e9560e0fb60e90dc1c424761cf4939a3c168b4d270a59352c7ff514a0d9c6608e5456a2bd791bf3f548c5640dae643c6085f58dcdf18b1394d11cd39e1db3d747af1c677ea81c3b07776c6ec6b616bb658b85f289b2d210838f8a032bf2ca3d7d5d15cae4e1ae6e679bd7cf73950f8e5614054a33ede564208af276bd56ba2ba04c0ad70383c9b081c1d19486291206d1356588ab3aa3f466fcbe90a11ea85f9ba0b3b373648ba332f29873f7286538a6f843b314ab3094dc0817d905522d07d5804d5256551641c84a4d98d3b7cc18dffd514bbd4b710490389f6571f0500d4d426268f0e4b7ccebab3e1c7fbc058bdccf70872c6d14e30d6f61519114c2b3323fd86d87fe4eb46243d7f827e06c3738f1f80ba46406c7a5009c6eaadbb96f5916d355a7f9228fd96138640c94cbfa07c0739ae6ab40f9f29a947e7c277dca2bbb436642ac2c96d0158e4acbad22a8b64034b61383d3cd78fa7c46673e693b3c770d076c6b8910483c0059148541cd2b610ff8072e2e35145cf1993d690b6da7c676957737c733519f1e132d9983681339578ca2e50ccc2e00d61c301c1376265f6fac93351d39614b3b146d57dc75a53cf777643653c6a04bd93b5837d0a305f11f65f285d534ea7620f24223d5526049e995d73c9b770e2e7bc334c9606c9babd3e3ba3f47c98a7be920806b918157ae34d4676ba0e49f06e7a67354c622174b165cbb34e7f00cc5bcdfbd3f85f8d9a8573130908c0f6714edcc22e04f41b3c2c8665a6ba8d76ec893889a125c1f16471b5d8d2d61c843918f3ef5a4060c64ae3c9c1faf142cd26139435574fcc1e305097f3c4f74f55d2a94a5e04e360152e541d0f1d4d416226a055c08ecfda3ea17059ff7853e28dd4d9c5271114a1db8f4c1f6553cc70a86f0aca1f22acf894eaf4b9a9a9ac571c372b342f72942d2f315abdf6abf8e46922fab7d87744813aeaa7472b25cbc7cb08bb10266242234b09270d10948f86f3ebbb53aaab356c9f6fc683e5b8a71e1adf007f7a3628f835f3e58279303b41ac30413ed3aefb4e5617a93eb6d9af09c0b1191b3d51ab3149a43f5fc19930d6478ea3a10577ce07f90089da52b138b17a404a4d23e9bd5763a61a0bf206fa17a8f458e5f4219b1dc2e16661f41f7c5c1756909cde3dc985bf376dbbe0ed7af65d0cd9d632b0503449abf7b8f7df4174cb60c8f32db51775fe4c874041527c1838edeb9acd92258532109ba51c73bc6cb3763b0c9558f3f3922aa18006f4b992263b41176db80927c6d174fa19e77d2f2478f4d40355c38462d0fbbb2f474fb0ad7e5b49715a3f2cfe85950601df63290c6e25a104833e164e6666817d9ae5f8e195f389247c3d4a522d2ab8d8db56b12173c3e2c04ac48f75498bcae43db08d1e93f6c34a4292b0c25a1323da8e5462b1470f0a5b76b8e47a87731b1635128e4d466af39dfeef7462825aaecf877e8919974bc53be9557d628719caacf82918b13a8f34712b7cd40fb0cc571cd3e1014d40af7decb4991f349256b978a145f3ec81b4ff10684385e68316d0dcfe1715c30895e018ad56a0249d94356d2daaba660fd6bb6eab6df7975971b3a190d5d0abe16960c2dbaae62ecdbc1862510b4276f2a16c0fb608922d73407fc6b8f6e2b9a0e22a1903c4f02a1e9535aa6e726a1f81e7160fda50a2d0aa2b3dcf9ab32f45d21a2fa64a52e8d7bb756cbd3e323a79b9216b1c1fc92de2908d54d6f227d7f13bed9420005c93def4ff079446e23968d31791ef03aaffa2a6f63fefcd6b8d06ba8c1b344d3833b5eec0e120fc8a21898f1d8eb03129d5f03a48588fd42d20223f36a38687c11f7624ceb2bc20af67704107ae0e6a0c0f7b1454d96cdefa58fa418f36d5f38fc88d5c378278ee0522d7ecc9d2a1a9700546f298b135371ef590c541a1e29a2d5c14b0f3bddfb1f26603b4d20a351334c46199e8aefa3ccb354106fa189a2bf50d772161848cf6173910bb159377bc05f31f26565f38951c4cd95d38e9ca33d1448306720a86030d8145e98d66ecec1c08b1c7ca465507fe29ffd49fb7ad09c3d54ef99eb3c539149cca2368e24f13a2016ba29cfd703bc9520ed75b8bc14df56b43bd2461cc46b486ee3a4f0c9c497db56e982c9d433f157d85ed59cfb04e9dcef4cd071000a103be295633fea148493cd87ad1070d8c1eab8c1ca6b6dedc63f96154e81fa5dc3d6946a73311b2a21eb2b0909427d4e1618beb2195b099f78761a93dde4fb7361a35cd23d254a7832d21a4a81b7d07e626af439319379d27cb1f759c0ba93b70b3267f93fa5d6d66e0dad0f1a327c87faa4e9028ca321cc933b3333661e51a581c6e49fe7c54c22b360e3992c0528ea4ad4641aad93ef59f42fe7e2d3fe9a701310d5e033895c50ff09aaa6f587e87487f32f25d6aaf208427146b48b345a1aa2c8dd4396b6270eea8c4806478272dc245cea9a6d9494beb17ecb7d3c69a1f9607bde27d4028774621ca337770d47f2b6b37fdf30931c702ea02c08a92ad87d7ff4377071304601f07f0e163d2f715d0bb1ac46df20fdc243c6d6c625edefca2d35b4382919a847f4d681a460357f52a409f8b8aed816b91f71142f4cbe76eb3d4fac9c4216cd83d6b8fded4e0227b2fbc8b2d00be569bd381e0ba1a1ae9144b743656e03f7cf5598a2efea5b6d8e3504de013ec8383980116188917a1e2870bde9b41bf2f1c0e86f06ec0baf06b51f7a120fafbc126ad79f87668a17f36453c5af88e6befe64e87521dbefca63d79b0a1876bb028f6a56a1ac5693361df995b7d63e17120f8562a51ab0fc9472b0a2138d49c1cd06ffb23269089f7dcf81a2822b353498f91d8f9539d968a05e994a253d7f82c37dc56280dbeda4da9422fdf453b2854a5012bc048e467e666372c9a55271a13aa2e7ce86788155814bf733b6ef4a881db89d40c572e533bd27ace242fb48edf10db29e0508e40e691ad05fba485a0b87aaf80cdb6ab72267aa534179da78700b70e1ef01acbbeb577c368b85d362044163be98ff5c4bca67ce4f1a074105ac0702565898f65241a60cc81b96222bee01954e33ba64ee020ea7a5e8052525a6599f8c069f599ecb058580411c2196d555c1fb8e24356fbd43423339e11812cf756ffc2e320525bb5426668136366ce2c246916688564ce6d55ad3f62cc78cf8ec1b889afb47a513a0db856005b89848894ee3769b326bc98c632e53025a42027137e3c2fcd7782df4c7289b8dfc200858038ee7f5c0bc17cdc10f98dd0ac34ca0928b9c26c674074b6d0066408cb535cf87aad6f5c7e6535a6c0d61857aaa607fb0197e91ce9b92146c74a8b0ac662cd9913d466b12867031f2d94164cdc38c521e4557a322f37caaf83efa8cc66668a081bab708a2df579d2594e47e99c26dcdefa06f4f33659b78ca836da0ec4eac93517811a9df56134493c064c907c63cdb18c1d5c26a2271b9166da2811db1622378576d15a9019a27de50efd77e6bca121239e21a8ed16a26650637985a070b7435db73f8834765c423648ab41589c5631925e310a0d87af986f833dc21d6a21874f3836f9945a5bfc496a6d3fbb54ec937ed0ca2d51d8cb66fce717d295ae9381bd692bfd7f038d13b3997178a18b137c780a765dcc6c979ec65e7285af284f38105a5e9319c2b74de1831b9a14cfa2d0946c5254010a6a940fa9789037bb9c9fff9122f95eb01ac8d6a4aac245fdc3ebabb737bb7eb8f17b80a18cef24316777d609ef0f7c964b262fb81788c8cb0c385a585d81472aab729fcabe04f63569b5373ae47645cdfc63db97f8ac099f9245e7c3a5684c8e2fa9dfcd1003f7387ba984e3429e8aa2b36ad6f84a2ae896b42df4e73e441332de273dc50f300232a1c343be1bd7b7cbb4cb1a24d0b98abec34a0e15432e3fe9f4aaaf9bfbf3f48bf9fecd188b670db0f1f498c33f4e2619e224fb4a8b893f3a9a8110a64b7d7de10f50a2a3c5d1448237e76c4146aadb7a085745f59568952568abb21331740a7dd72454a1a604b54bce6f3bae64660c2aaba4e6c45c6f9c13c81eb12b7a8680032df04a5a9f88506638f572aa4dcc31748251afe5b40363f2bb62887bd2a1f92f463f6c417f077e6251e0c455b7d50fb516385ab6047a048f2855f69298ef66de87156b3c3b350b527334d5f87d68c2b4f70cde6173341abf98f6e7d0bd6fe2ccba69870bedd0eb915976070a2f1eaec29f677c9b7ab779c2ff6573d22fc9575a829be404b7fc996154d94a67d8532f283edf9b2db560c258cc3c22843c8f7eebaccccabfc838d4c66c4f0f8ffaf31d99087559e5df070365a900a71f55d9efcdf4c8522216e16b471277da4e37351c6e15bf6c044b266cd405c8c0c80550a22273baa1eea3674f67e1c2ee8d0083da613ea9c2118077692ab55c18d7309848c2d355b0120eee48c7d992d40be900766a6956f9edd95dbcf61c7707671cabe16172207749d3929a1447ee9e2ca830746f7ccef186d109c038df4fcc13f2f73d495f804f6be8523de1d98c024c3eb27860e6ebc3758a9400aa99c6135815709e69947ec86b77f1dcf4301d9666ec6d03479363346938c5d97a05afc00864874855a823bd7a6fcb1a9f031ef1a00d47607e6359ebefc110f3f08a0362e835f0ef5c28ea16c473d8edebd4addc448aadde6c31e25c56b4373fe6fc745d9392dd1d2738f138a1220efdeb49b87412abe6c6226b9ce37dc745a7c4ed04da49dac41deff0c1abfbacf6b9bd12df1794b67c4edf0b1c42c7affd695fb90de229ff856a9ca3c947f9b94c4bfabe437e36c47f7898870a238b1715528d6d91b9f50a75501b70e650f5c1a927ca08cb92909c291d8649b1d6eb2dc6e2cd296fb042d6a259cdc8047837133188d044bc3293e109d5b5a566d74c94e689908402327aacc71a20108691fe1361fa4a75efe0f5b072bfc94af3a5f8cf7d5bd7eed1a2ecf47b52cf78bfe4b0bd3fefdab2b730ed47e1bbbf9826c51567e61bc3506c11c69914e38304c42a1f51132c61471dee97164ef3fb47707b9287483c1b8469bf32c14c522c0db2a6ffd7e6be9e4f215b48ca56676de578b2bf7d6a30478fb7715c74555150acbc354606681041eb4144aed90f760fb3ff5e3b05763205fd95bb171eb231634f3541476f03b710d4f60b615457536a68e66e8461888fee37fd1200148c7537a452ae4a622e6ec385499a06d1fe984273a5dd9dece18012cfdb6d656618373c40878636bf63472e0dcc11502e2f2e63a70b2dcfa5471279891095baeba2bed292c28d333906899b18d95d7266c1b5899d63db8b6519a3554184885adfeb9af29d68639be8f522738237a43547d31f2a185cbd02355f48b96e3f3595562d25e9ebfd257aaff0dcbf595e202626c2ecbc46b75038ff5ca5f4f615004db6e3e8d8c12ddc62b2bbf12cced570d6221f7470261c87bed743e1d7c0aad604d385e0a1896fc21c123c23c10c97b4d8c2617b0c70dafecd729e436d904caa8cdb269f0067bc148e2364dd76d8c3023de9360f5f70e9fb3a25ce598f0e49d44ce98d203a5b96a8b2abed74d6b7881d1bdfdbf6e18fa25a0255e36393010d81815d6ce930a2746b9d000e375aece2d7b4557f10c8867ce66a1c4415a1bf11a92de3c0903283c36adc22fb65d473c6663c55b531e5548a4f72497d79b38380b197cf0eea6fb092101e1fcb12e766374dbc0eb8cd0e8318e5e70c72ad86bc70c393a51d1027b97f86d83cdb44e66182adbe67026a216171f40847f9449d5e3ee4deb72c324b715773de20b42ed9a1385c2062e010669a946ed73228d04eee01cca350364ba2b0bb734ae7fcc5d45945686815d50372af87c657cd135105ee85ddeba9ecac80a852e34ec0c4b77e807f27b55aa1aaef0c2b33e417971c59aca1bcf051f32f9e7612c6a9243312064ae3ce51871b013be1684705493a2b7a8f3f03ec851fbaf9ab3712da11c49ddb03ddbe9938b262ae23af2455066bdc3eb02139a72bb436718895c8c9e32a47982d66f491a3a49b2ba7c60586239894c18026b2fef6159e0af80d72c73d826f285510c03605a43977594caa56682ff36f74fe7a09b9a304aa9ec726a60066c8e278246c8f9687fdd1148ab71f79f723a4aecbbf4bd42b762ab4bc1fb89c9888c21a5c3e4faec7dc00885c815f7fc0ea091e0c00dd3e14c9427316221e379084056e873eae652d0336ccbf0e1373eb65c08a7ab0c3da7208ca7d1f156344c4782aa867df2d9a47e25e697990c1ed031fd3d98e544f8a352a2271e0c3239ccab1d5a8549fa983d232ae982df1a5ff99ccb3a160b56f73f0fd8177bf383e6d3262aa2e14021489d0c93b0c77a86447e9f0c45861dc57d29c6085edf2256c6f2a9462cd70d3b63531d3f308caa29471c48a5c0f3dd3254f9f231324a53f963e6d1f0c5eb8c0232a867ea714cadac0e3b0c57d4648bc15ab8e0e9557ee52d8ad07498ed620b4cd258a890f826b3cfbe11904ab000d3f94e3b3451488db5fe4c29973e72b1432c2cae4010f4d41cc22babead44383f09d4f1af28b6be7951fff1fbfe3b2247edad5c6dc4fe7a1f94e3cea6c078bb2e42dd897cf2ba0a571baa6cf3e464dfb9404c17688f7f197c9bd84f739bc8553e243b55a2aaa1f9bc88c16b5bb65b8d65981fbb06110eb5b3d3add1ca1fe1870ef46f6ab0c8ba59b2721e8e69c9ad559f4b95800a0c4e926c13d98617e1ad0e0bb74957644ac594a5ef1da3d8f480d339c34fe320e237c520c4d529c51ab232fc57d9004e0f6c0b178b5f36f62fab825f38b4ec83207e21ed7910b6df3d191fa6d9f03a0a409f5bf811aa3bf0636fdc98a45d1ff7d9480a7efdc346e3de321f94967473dc8f1f697da7bbd213f1f6ce4fc24e0d7aa35eb4197c9bae67339b94a7eb00a2cd78de01bcc0fba3f8278589b0e1bf99da2bdb51069228083d63e93668c6574cddb6018ada0d6f5419899be74498076e08c3c36a7b98ed75d7ce67beac91db70046f2482af9d7bfa8fe8ce6f77682427c40311f0a58de610ba27d08f075a41852ac71f6c9d0a0abc6005ce024071494ed54b20707e94e91063ae1699862661f43c50689970b3fabcbbd0c0187d98361d2faa42e68c6697d643c79020cccf5bc58a6acdc4c60b3409b5a3864bcc2f4a2f979d615b7a515b6ded6bd96a2e236f50901f3e0885d39b10ed14aadf07524abf2aaf1017e47e6387eca33ac54aad936ab1a33aca8b9b389c137e0d029fb91cb6191dd6d1d7816eccd3017dc165a8e5e63ffb00e5dca6c7ea4c0e225d4c0a30fd262c0178f2d71b1b8dbebf3ef97b28d19fbbf13bfd8651ec3f3a042db0242cef14b47cf720f276430c38e46f43eae82a5a222ecb7bcecde6e73becfdc47314e690770ad8af5a7c4c62cab57e191b9c6d5168a56e3bff46f17973f609ffec702c46d7b95e26f5e438745cacc4bca634b057778e2cd3a45019604c6dd77453472f984017687b3b05eb98791265d4f1944eafdd75bae1dd82d19307a4040b86d2478af087ed6c9cf0503ff9306c90a168ac8eeae4b56ced21ba9548ee71bbf55ec76e1f264f60d97ad93add3f3e863cb45a46322dd1132f46ac4adeb3e0b26086e8154885dfb25ab74d6fc837cc2a088c4f4ef07deaeb240814915d6d52551c89fd216b58e370c1d791143e366e5b8bfb7f19ba2f4e86040095baf3f8e2cc66997adfd50fa4c6a0a95c44cd52d68585df1e5f2e2115170cfecbd62b56a61333c8be67b860bc496d9ff8fe054b9a8c23b46b36ab38acfe464135798b1f18a6408b0686ef9998e00df17571c9ab853d262ae5ffa45c86e03fe1c66d0a3e5b821ffdd482f749aff7871f242435047734d32b0412b96e7627ad46b6e38c7cf233faeb5253161601eec31929eeb82a6c882d8794c0ee9e3939ad246aba73edca41d6fd9e68e467290d4b68026e1f57ea4d986efea2b28f8fe960bc300fd710ac7b311abe545bf643e08cdc7a1c8a715aa35968be425d7f94882beea860a275bf89ee35fcbd3381d41524b73cf688622092f581180c59648470122247d20edca0b8e2b7cef0fb2f7a55ca125cc4b08a4c9a9b92e952be69fe0bfb2f7f1197ebb0962cf8c23afd30e73b4d8bd8dc660362db23444a7fa50a73babc6e936eb361032f0e5736eae64d638a197c289127c258668a32176ac0a51f3ae9c873e657d66a543ed93857c07d3bc21028c58bfbcd9b5b520f366dba0144f210ce6d61951be0c136c2dfa7762c45d6e25be3a26a344d56b3483c0de455513230568527f1321ab8eca9193f7b3bc954ff2024fb3c88bae59d0da9b6cc699c93f31afc715e52efc59d261c3180139cf89fcfafe8c34aa399cd1e3b936f8ddd0326ca0161b88ee5855957a718851a6375f2f50cfbb6af8ac7ffdde7de91cfc19acac909934e67f976cd839849922d2ee455cdba28b1b99f5fcd9405a80781d8935eea9e4cdec3033477eb3409e14d64a5f99499fcbdce3f91ccd241569d67547f2bffa6a0b64f1682d182773199df7a7cfb8567212ac2a6f7febc328b95252998bb19d53737e55ef777408a550a8edda9e7ae0b17b6d69fd0c3e09a80f22540df4d7dac203dccd9f953f34be8179ed3ac7e0e80a38ee149c78bdc778e911ac5e97694390723ea9cd8fea9752bb7a3c00c21f0b81f033cffb4bf2d37d15265c0bf8fd1b89ea918b98f873eee4e829589d21f409faf5f39d005347012ee93ca72ae13548589765e1fd6051ebd0c726ad197720bfd447cd59e2728ba6259bd5d9e0f6f9edd3920a6b73457804e72f4a86c763217a8ffa13c43354130a00b94b6a06deeb87af1906307e821ab89e2a1c7d61328b7ae821407d86f9242ef8813dd18bfcd0fda1bcd62073902bf6cbd161d9787a80772b001ce3cdf42a36c54900ea644a01bcfbe8d613bcaabbcfd3fd2f07aeaf5349bb208f109dcb20fcb65191c134fe1d45396f5feddd3708c29dcbf42696a5a45115686d42c324b2decebb7e3d8838880c0f9bc10f50b14e8d926556f243426c278f549e9f9fd7c41f9303361e3a9f213173df35c66c90fb661e26d664cb3eabc77e12a3789c897e3f22e0944294bee9543a4647f7177432e77bba84aa2c79e557213623c6156ec2ba2242efaf97e8672f5332f70bb4064fdae42321e7c5f0a40ff7d10ee89c910922c541fcb38089e1dea6412f87fe2616d87596390b86da4d8b3aa756248e2967715f18d8aeaf7a61813fb725fc6c356a83acb99eb0462bc2530b167c24beb61607afde8bccb1c6fa7cb4edfd5087bb9e472d92cfea36bc318f712fd67cdb082dce7e5e6c011b4593a6dfb57c7beb131fbc86fd2cc0b56cfbc28e3bb364432e4283627d6605a364b128bf84b657ccd6142d5289354c1be4550a31f1aebf00a2e7d9605961ee4f325517bb34f86a525873ca7361290adefbe176e11b8bedb2eb3c7721b505fd9b0144409ac25cd70b2d34f9585e2017eacf58a5e6a68fd7c5e7560039b8d611dbf18906363f9f7641d1fe9a807f8e84df7fd99a17968c51f314f118a016e4166aa4ec2a8ae9b6f35b73b08a33163e806f06ae432ead4a5e591c6a4b1ea3be665600b90221aec4ed00fcd21bf4423347350b679d34b30453118397cef43a769990f1654eaeeda2892c55a0cb0241d459fd093173f3d1897ac2e00ee0ea4e4358d1fa0668c5f21e9aa4a638e493465806f4ac98312a60dcc94fcd3bec50bee49a008a4d035c8ef8b6cda164b26e4773cca834d54fd9d59e992bc08159220f4748673ea5339e9a53ccd46e5a228731253bf02bd90b48a769e8483bc4f9eb84bfe29a9a20eff177521460333ff553d572596bfebe8d1815852ab41907e64e6100fe66180ddd65f7688151715624203ce636e8ed6e2a2f63af4b4f6d8d0dea28ed1127a1e71e5234645db66107dece057a879b7d341575faa4e29f7daa578e055ad0a6880f70a6063dd0dd6b7d77d98d8c47b021696e7341e9d3ae99e3362ab7e92ccdca66ebf0596bb1d22f1d3c12729702837f887508d0b03e2172060dd8fd7b70ad1d21f94e3f60d75845ab5a987e0f2445b7b0793f684f30a2443bf5d9ecb8608be74e041b13dc333584250aac1c2ef4d036c5f034128fdb5eb39bf9abb6dfaacb01dec8a9d95da2e4adf4fc3ad4b6626651d5d24f5a9224da2d158f95264a980a0c82e2b44ec4a4f9b4d2ebfd6fdeba8865932e452ef7678f31bf86e6ac5fc3e58922b669c8e88a766a25b7a472c38f0473699f5d5d38bf4962270e46fc5ecf99bb3d9593632436d7a1b42fb72863a82b7e1307d658e083fc484163ee1c687e0cc5b50db9466f817debe8fea4ed42af73f2fc13366459d88443f5cdec3fbc4d6ececa2d7dc2ebffc21dbdcfe910b96ba6650100be012e616099339aead7ba7c9eb7c25d67789b8c41d5aa891d8773807cdf86c76406263cd47b9ce8df352eb7bd2c653b7af3708e6ae9290c5b7af86526b37a325f30f190425747578ff4a40d68ba16fb19ec45cdf26a6b5a5783c1bea3e9a09003fdcc36cf2e092ac22527f270ef29800de858e8de65ccc043fbb39aa63531915e7710104406fca9e7066dbdb097acea4376d9d24f980bcaf24331ecc3438388b13bd6b917d1b0758d883603624ab63b779bbbb21596a7f945200a210455ff25e1c64eed0d0366eb0af732094bda79a6917df10acea9062cbed4f54fce66b0980cf70deb60f0bc6435828a1d1561f3bc5584642fd9a06df35c8b3784eeae01dc6db6bdce990ce4ec204aa73b1d3c78bd33aca618bec90a0d647e907bbb28211d2b2ddf30895c685f13cbaab16d0b604e6adea643c0d0a89667bb693070ac368743fc6cfa0432619c9f96a8a484d933fe5e274f9c6271186b3f9de7bcbb5d71280eab5ff829747d5e7fbcfb132292b3bacd9bd18daba028b1d5051feee9ca89370567ba7ecf113b4abc61d35e4b6ebedcefe869af09cefc480816f7c688b1eb187a62abb371c71e35c5ec1267238de9da451d8826f63846b6e2506dcce0b12f816a6f77265e7f8dd17702ad54ae2c64bce2e501d3589b8d5cd3aeac2809f043e038626d72c4e1b4aea8b6202f127718256648d9c9723e0ee199903f7b5497734cca1a40ed341bc2f6b89b89e0326e3b40405fa42505cdfbe20f74d2aee442c528fc0207d278f4e09891f428f59ab7214099c2c250ff3b9308ef255ecf0accbf0dbfd89afbb67b1b61429bd362cc89f98194f613d1176e0891107a75ac58575a4d6781aa6640a1de8362b14cf6b695b86e97a152f679d01cedd5f0ca01f0f4cc0d8d232f0329b8f4bd50af84e6aba09c1f8c8d2baf3b826d98e6b84716de4e026fd5445e43d017b407ea370ef870130d760b16d2e6c91c53236f08d091b42b42ac81c9b257567d4a91ee9d6f99d27a2fb4c2c403fe241cfd96757b19386c2b32c8f7aa7f113b5c81f99667421906f671df3a1e8fc9b7d3bb21d7e738ef77d71266436c17f435ccf6b2ef694c0bcc1dc2335609a94bfb91f7d03e887736d1e33f1ab5b0e8728471634863426622c4d3c1cb2891fda395b9e62f7af58cd879ccf19daf92729ac8c04a13ab689506482b44ab426054a2dc2703104292b56fb9543fea43b5522c2817bb431cc4bcea47f1d371ac67ddf6d5229d4041c740800a6c7866632a340df41e2b133bd4c02d61f38796ecd391eaf9d1f3e14e31bd4b257943b5bdb48c00e1e9f85da5442fadf8f0d662413e89624d5e55688e8074f4f33c310ff56edfaa44ca478fb31fa30c0481909a5d521272259533c05eb1ecdfa94bffaa99ad20310382036281efc7c688f52adae17cc747d22a3e74b3aaaf47281e7aa628e9eddb89148c71437d52361a65dc75a9908ef6209c350ef6e7a121d31ce2d966a9a81275a91070d750c09e8ef27ecd1c64a86bf5157496945d8cfb4e5df38436490a5c33fbd51cdbf9c2f1dd1ff53085ae32e0eb9cb522f3301f5192a2ad308198f9ae677c6b168ee42a08e5900d9a0a4a5633a9df10db24c2635efaed8ea7337daaa41ba4a9ee2d8eecc6f24ad912e8d8a7450ec7348c35c7f3b7bfac7383910c15b4a6a287de7c475e8bf036400f6b62d4ac20cab2cb7fc8d31403f0650364a0b95c8d75121628efcf5cc9e22e7d67c89065bcec84c01fcef97e508503485610e3f7ac4a1a0896e152b9d83e39b494dcd7266bac2593546b15f2a205282954a91f9691a2b047e1174b4fdb8eb9bde036f1eb8650300b89a86ce24d21f6be269083d1206ad07dab36ade60a2d47e4f5f9048c5eecd5945109a72800f949ac5a2183edbb3cabf1f27de28bf2ffdb5758d910f757d23256e9d27f37f8a8d2b2a38f5bf69dfe4aedd124d5d11f10cfbe35bfd9b064a0a07c4a104d1bf8cb33cd8722be727d640a684ea26fd8c3078ff60cf2c5a54e7dcaa89f5d36c1346a40654ad87f91e627479f34eeb544eef78b2b0783d38b91a17af15c88a3f3124521e5da89745c404e809efb308e6a5635b803a245c523dfa5abfd198c7d2cab47bb5b52aa0c92c4881b8ae030e8c235a5186b7f62f7f0d965b539b4588699c345a8dd52bb66a8b19788bfad350c4b70cdcdfe6ce3233c514dc9cf59bf50c32834d3e5ffa0b513f88f5915bb4cf3761d3174fe346bf930f5010a791d9a228426c8750c155955660eb2ab54dbd9cb82af97a3a698fa84f2dedaa2df3cbc4186656e7f3a02b1fb22b95939aef09541a1e8ca9b737c9b5a1d8584b905293964a90736e086820ee254f7732e9cad3b1db2736d2259a17023bb36bb9d5918bf3a463655afaf092a4e322001fb80741fd655ae5fa986cfde7b4a22f9065441abd5351855ba3af87593cbf5d5170de0ce1eeb5e25e12be426b190261e94e069b3d340b2958475e8ecc38b14f16e8b871edf1e471995d6014ddce7ae943fa76ccf2fb6a16dc872a99135422c51280e57fb1cbd31a2b56767031afd20ed1f5c645daeba5781a865d28956ecfcbb2a2f9f665260b5948efca3d4f395577606ace6ac2be10a933a1059f10e52cc88669288126fd3f3e59d150594fb4d5c5863fdd7b22642000d51ecd50529d26fbae37a9536216572f3689af114c6f512c195f0df4e9854c4432851984c018440fc4cf51a423b6a20d2f97be3539ed0f178f36b2bad1833a7bc4922edad0a19e67dab09c7f7d408606c1b5ccda6e73efdfad6de51cf528930eb02d55063f4c32ce56a9cb37e92589a773f972dc17b4ba1a1033f311cc233fabcb0c7bac2afd296173c3c39162c98e9f2566e94ede900379ad9943372d43d223402e259b381cbc3d8aaeea56170988e2b2a2afb7151c562540abab338f93f6f54f398227365555d4317b83fdea3eee8a40efc131c05080dae17cfedaf29c6eca491feb44ad1179e41a041e45ed8eea510e0b54ee11db0c72a96285467449dcb6a41d964020b770f42b92bedb5bf877adfdc73e563b41596c8a15de42bc2fa4ef67c6dd0f00959b1966d8f26dcdb4aa5284688fb53418250ca9f8d5c171315ad717bbf16b596f583639d5438288c503c8d2bb06f3246e7270597eb19b00aabbfcce738229a2f3a25e37ae6f881974e831548a35631ed2cbda7fffb44f75c78829d6b49d45675a2424443307ed95b14ebfc6d61b526ccfe36d044549ac43b51d2fa8bc050c49f173c6b797a384354d90374b52890dda5c539ef258f1f828cc703a8158ca8f273545fde0ac4b7a9d7b7cd335ada12c405cba077155e1c4d6c4eac04e18c9183ef1be155542020991aecb14225aa9d5e83ef22b069a9fe59de38d12a93b738eb92c0a7d9aa34a8f6283874d45a271085a22e0272626654bb6321b511c3ed508c23074ed165068ef5426e9328e2e3fe920b73601c05de9f6f9655a35e5160ac052d00186ec2ad26c7a68025ca6d0fdd33c8a8111236febb13ccad558d2312686fc068ce0a4fb477a23e269f515042e9dc27f6521cb222f428425603f5afa9177b6d5b939f8096a567ef53b93430f1c75b188952b17b4394cdef60aad8797e904171e9e4612830bec7d1857f88e3daa47d819449396acf3d8653140eba4efc040d0968c723d853908f0ead53c1bd996561c531ea2f38b89a144a252f64604c5f04fbf7853d1bc354f9d9e2f166b2f8ffd8aaea21f89b820e99dc53480cd32613dc7878a08941881b78ee9d4186b651a6fd5930e06ca9620da4ea2ab0a39c3536a16af45b86e7ff825e8b2630acd8c2d633935de2ca4830f4187bd95ee93ab6de3ede9ab6a49cc14d3d86c3407a28a7d05a6e5ffacb6876dd2a8930a5373bb95729c2907531ab2a9b0c66c213f176d3a3f394e66dbf215819da91af4a198122be5723f18f35156ee07bb91e4e609217cccf251054eab224bb6f69530dd0ef7940970e17a5fed44a2dac745aca8b2edcb2742f61d9902da4d4411d1afacdf89b5ab3330a14cd248c3e2d19806f5a173db6fe7feb0b8c56a01d8448f5edf6b0c3674c9cdfe4efc63d8b860eee8bf79d966ef882df0c752866a2e605dc8fc8fc5d2f250b4124d8127ad64c99d2c598200f42e1fce4569d76770f8cd698fd39a22090a56ed7f050dec8797c0a460c992af02b14a4a7824efcc5abaec2f117cab0b4599944a7f023ccbf1bd6453469624a8e7533ed10c08a715661557d3256a9956a64ebfce2b33251dbd5838fd6b42f459390215ce7399e81dd27e8ca454cc014d67ad9ced6672e522cbef119a855b5528dd06a49753d8363f22628470f54152f17d2cd4b84833d0567b54dccacb8dc063fb18f8b1296c6222ee9e4e97d9fae724dc2fa1f9a1dcad4fe55af8026bc57d4330772951a1bf2bec0ff439c559386397fb8215e37365fa0a315eaf47f19c452eb56018f976334601fddc807ed194c019ff94cb4a01c9d41597fbb8582f848771406f9383f882cbd9c3f40ceff561da2be5abb5e3acc41fe8a9819b2ba13034a424b537a5082be9ec56e18691d97d44834852b6ba31ad3501ef102930502aad4725c2ad9284c19ddad748f912af9e61bdb7ff4ba1c4cd9b7e4992cfea750159489035ee3cf80937844870037bdbd8f3b8d9a3a25be9876ee41daa52baeccc57e9ad8fcc455fb8344092e9f87a5d1efa00744adebc7f66bbd7ce29646ef00d20648dfbc4d64f00f7d3e18cad747e573cbe5b566f228d220118f1c45abe767037216b4e6aac8d7f62e1f51d77594be9b3ccc717aa92cb22837df1434cbff404f6d6a7812800de8f96d7844797fa85cca527dfda3f66ef44e645efc8f5de93cd33e465b114d797895b7e42163b723772672929b48134189572f0903f04e338951493bcca1a42764ca18e0fe8a4214f49293f21ec21227afc3ddca564d71a4deda7e26e32b6e76fce4714c1f25373b4088bea5ae8ddfa2255a265492ce397996fefd6d2f58ff96265d2d88a50c2f598631f5d7cbdd9b88d5bc4aaa90fda511fde73d4fa7c592259a1a587d7ceb4250d3a52a27d28ba5eb08eb527103bec991ab070291b13ce6a5b25c073c529cb0daa7f020dbd362c7c02056043be25ac9ec91e7d96381b7ce4a091fd591e116f8c6891b72b8fd5d8bb56c61665f7d971f73c7e7bc08267ebb5ba06179bc605442f084af68db47355e92aebe97d7d28144ff8566609a42f7bb97e4da53481b81115ee41f0dd9cc494c400d1615027483254c4ab7cf23aa4d18fb10c032a456efb51f2923697a5e9127d7e533184792d79d8c955ccb2ba2ee5e9b71068e5c0318f5f3aa6cf29e361467c04e897f6945799f9d07476282f0569a407e23f1feeed8eb6ee7447798953e053e898c686a2e5b9ee959fcfe5ae962721562545667632b158175074fadb5a9ea807897d9fb582b479a9a112d9acc2e0e8cda67f2f62296d59c874a9fc93b9067936f0244317de81bdddba04fb1b2f6fe51a744b4802b7a4d0ff3ccaf4f8f9b8dd66e18439d314b3b1a6158e2345430b997cf2557129718cda126ea40ff6ea2a4ccd3a11cd22133f9ef9a01a18c8ee8aadc232663cdd9e29030e4c2b32245ff3ec3e8815aea86b3eff6656dcfe0ca2c7d5bba51e6e8e9ae383de00420f3c7315d1137790da0fd58feb44388f17fddb64d2f911662c911e9919f4b5a1a21071e9e8f53782e106a341b2cf4f60650b22f6ec5c9e0196a7b31fe1aa50cf537763db1bc17c39742c3c8224d322c37e4659bb558aa1daf863a4235b416d44625436179525e4b1da189cd372acb3a01876c21bc85d457778e53d3f242cb7f568474627c1c701bae11eb51d6bbcd51fbd29cf6e9dd3d48e288b1e140caaedf701ad3ba88c13d9b9558cad250075c731f4a16cce79c0c9563cb0d8b8b003e82f089abc543aaafd7dbf1b95cda38be2fb3d8ce8ebfe1f0a22b035adcd0a914b5b40cc8b1556654f7bd0e29674a69315e24cf6923a5d67e29ab52dd275873339ecc9b6e539a8bb536ce39bb6a503d63231513f5fddade89e80eb6ae0cbbb743f28711a33e1e3efe9af2e944dec0e9c440a8a3f8ccab64fc42e45ca27256f18fe7cdc84578290be44b110f94804f403ab104188af50850045adb0164389c2cae5a1783be18239c7d4cc297f68d7fb92c65655b5c5e02d5581477f7b81da3f9071bd49efbd34a2578d4e49da66e982491d04ff9e140b92b94d3621d251e89185281840950da31e2df91a6e65683f6a46a8cbf0c7eafead2f30eb127172f4c13bbd5a86ffa97905e03cec4ffc8718b7c20b51032f3756730f1321d1131c1612a4d5779a366ed135a5756220db0b4653da4ba7697ecd31c7119b54787a3a62737e3f498e0edc0336c2cad6c65fa92a5a83544c5675bf8da8ce2707078c1ae5ff1760048e5b91434a1eea15d73236f00c0169d7717e3ac866612813920b60acd748207a08799be4803b7a66fd5f4d64f66d2f85bb64d73fb3de0be2755f709a535aaeb29e9c8de9e9a92ad6f443c1afb7503dfc53488df5ce8c8215173e8d625464870425de50f4a6c213c1a1ba16d1177f9aa3cc92d518155dd9ac3367400839438ae9fca8647d5811a0a4f174410476f9c62ff0407a469cff92ed5e65c753657953c898c285c116c333795bab79d36159265c0e1c6fe27679cec0c0897230d32207fe1b71cc8833c813f9f785eba6a6ea1b4cbe576ad1b18dea6d4a2fea5bcee8f5e71a47a749297eda200dd7f257f677431f59abf5a2e305b760baff6bdf8d61111a350796ea78fc6863f39294c1830d2dd9c76429c904fbd14924ffa8a2925c3ddc09faa4bd6a471fab21075eb4de3a8016ff545eab14b31248d44cbfce9914f6281622d4426b5730677de16fe0dffd850f9d52502307b25d60139c24955191d87fb8d42066bfded935279913ebf9fc7a4c24610c20cc017200ee80a8da840749e15e24965fa33099455682f08bf3a32b630ae7988fb13f931d67de982896f507b1cc5b7715a5df165c59ab38440ef5846d02b6e9d9513b66da8b0584fca6776007a6b4464ccb8205d16ffba536e7a52866e69412356b3d1ed21577848483392764fd1c5dd62d8b3f330d09f8cb8aec427775a712905e9e540dd8e1d99f1a458e395cb07c5413b7e963125a20f5827e58a1541432f95c3942eb9d61dbea50724d7c8849dfd32932eb2d34cc856a2aef403840c1badfc9b36b4ccba87a848a66f933da51fa623c443caa2cfea596cd358b40a1d034a621a0b75ad4aa669a11940c99c73789fa6710ef66bb1a7c7550b46edfeacb8bdaf55599d5bb1d0d92d3e19fc796b5ed11e778921f971cdc9bf7c146f99192f5109d8e780f678de9ff9539da7f964fc810d1c9b2fa3ffefae50646b05b65eaea7870f50d1d02b8bfc42940c92862258c13d13e7c5cf409ab036f3317213594e14739f2b61906f20e87211dbf45008e8ca858b21bb967bd06e860cb3699027fd92986a66b8a4f7c00a876c37e5d1667299de250c0d73d7bf633f833a334edb752c6b01cd2c55b27a83cd06065300a4fccc2dfd44f8240e8be2a168ca505a96a36886ff17e84a4fd952ed55a8c6f20705269d911a3d9cafe67170d415bcac41a50d1e627263c5ca1ce9d355c240c3fffce897ad9c12d066cb47c7fb6bfe20b919396c9face465c05eafd009c14c46ccb66fcf155abde1d2a7fe6201feab70dae72ab23ea9e2259fe8c4defb33214c9b52e095f63813d926229aef317c4ddafdd4ff3cfe6206c073897d84f432f901eb6272e2ff881f5138decbc301deb16e7da0019fb2d0af903a66658b19f5fb65175edba373bd44f9cc5b4636281471041229c6d1bab436f8617ba09bc418621cd55467970b91c11ab80e7d2cbfe40487cd0fb04aed48ce097ab72012daba41e8703fef1b702fb15c194c17703dfc67bfa8466864ac8f01487df099435de8119e444a8a8ad30dc6fa25dbd206d4acfc3ed6d29d6936bb076045666ccd70e2f29577407675ceb1394d2095dd9f839fff0e5284e20dade923efa99f93124dd59f68d30d3813fea5964d93f1bf26948a1293383e92c71b388156ec451084a628341866a4eb2dcfef895448f54ea9ae700e0a243f641518d9c4ec439afec5ee8d95718dfb66dd9ba47ab4b644ff1dc80d55eff44b314f1d47001db61e149c1ccc453c307788013c52f24765e90fe6858132b61193ae69b0ae501b6eec21f40730ee36d47c66b9c170cbaf780674ab8b15d1f9353402667bbfcdf1575a5159d80fd3f17eae27fa8acc38a6a04262f249909395964f6237de9bb9a0b3890fc9c6620ee55de3021984bef0a2c84851a87c128c389f3d2ab762e23da5e6e1fc1ee251b409fb59a8cf85ee83c13f24602f1b5a302bc079eeb7fffbcf76a60efb6d15092e6a2a4150cc62c9c205367e15c4783e87e50c2fbacd7bd801168e2531a6cb397db67bd74cdae82a4e9e18d0b0883bfdbdfe99a7d8d59471aa3ebce3d003e386e391d9bd675a7bd78504b808dd3311f0da04ac84ae236eacf4b3db6b3cc88d80957284408583393cf469a26f2487dd2924f0a7191dd1eb963491c4a56a82fbc080dbdc67ac9ec3bbcd1a5eed549a25a824aec6701ac4eea31607033b6b1c42976c70a23e4e58be26cc574d9a997c6891741f660707b9dbf4967a75f62f70b7b421753a1c4b641ee149abe5f7b09990972f5b925d15fd632e1c61710f65385c5a2c5670967895d5b438547b275596c3ab55723e6e29b9e7a0de1e46c8212f826c852b5be9f106b4e575f185aabc02d9f646a980d2a9c7814e2a5bda3819d62dca2a96dbb5a45bc433b281b1b15824dc13e2fd53736db09fe9edaf66365f425a07dd91b8fa6d3ebef73540ada154b2767b3863dc182ccdccf47b8a0702ad0b231abdb6b11454c7097b267146bee24880cf6177e178f84455eb220c380e260ddf6a013148bf381223b338924a28a3f1b30a9a24254fe946033d61160c1519055bd3426aae236c0221e6e5c59b59a1230707fe6e783c98d877c269ff0f40f665e153f2aa578f6956ccf4e1e2889a74e45677e6e7c4bc2522b5bc53ffac206ee02932c2475a647df99030e32fda16adb83e900c7d7da009d26c2e8d5d1eb6f3854c941337808325f241f399e4f2493a5700a5f0a56c117ae77f77936ee6827fbe0ab9db1893bbc2e692378dc997248c1fc3eadc3351f0413821eca805ed0e6f6786783e51861aa5861e7fcd9a8abee68fcf079b4f599b5646cf49ab7ab442e664f24035be8dd75feb175968080c903f3f70acf72fc3f430e3430cbc30d700e6c1a63351a9888ce90539a417be976cc7ef14015520bf6b26cdf761192dc0f489da63734689a72df65d4f67bfcc1e3c3a7b892d8bf60a6679db984cfc526f6adce9e75695078e0ebd8f410843865458a5d2f9d46616b98755e5f2e197eb5a32f0dbba4b42a84bbd747de3e18322120e000e9fd6ab4a4001ce71a2f1419e66a2b35e4c1810cd570c9e3bdc49c38ee4d3ac72dd6dd6d0055c7ac425c2b047f7e55fd1fc47685ffc950abf4d2ca64e51776be12d36f8ce4db370ffd5dc37c2bce4726d1d78b6f458e317c975d4ada07b7cada6b2cc79602623ca960876fc91a784903db39ab7a78a4e5136ce26545e1cee594140f09aeedc22580b7a7c32e7d80bddd39dcb5c51fb83a7f8ca7a03770d930b45351e538e76e5e063372c3983e59200179607a6c094843018fe304cc51938ff628156ee6dddab11feb630db6e8730adc900d8b191fc0f5bf12ee469bc2fb3e69779240735e0d34333455eb3300edbb75f3fab554374304450c8c3f0d36b41d5a9a1627b8cfd8ad3d5998f70e201b266391339f6d3a9742a4176db213466cf637ee4b8bb8f150408b958e05a08a5de8e865f9204c0581a184c2c55330866303bb82785dff67c80e1bb73aa3cb6025def7a8b35566ed724b5137bb9f1a1767c5d487875ac376d9433335f326913c0f085237ed39656c37ea59abfaa64192971570cc0506bd3c620d96f677c77f3c3479d3c91c98c9ca2b9cf0e4e9521e948cd90b406f772d3593a8229f4db0b891c17f16939b6be31566083d90140ab24f9eb1ce99b1ae7522d6679a573630bc5e1cc83e8ca05bc83b60bdccf82f6fc94b0fccbdf3b9ad7f6340d65af3612026c37d90f4085a9cfee48b564dbecf2d142d8cf0f20da60b5eee23e369b241d985228e8fe280f6526a4863e83e560367ce5d30fbcad2b31379527745dfd34f4b92040f7192dc3e026e5e1f79f78fe810123ae32e7d9ad1ed0d0e11f9e4fbd4e8aa02dfa58222766edaf48bff926836fb1dc5d08a4a00d11f98cc53e3a4ba58d18662a1e3c54429c7be57eda7859e18ca907386184bae2fd1f15b8df5eb133c9c3e26384a47b81d712177b5ba449b4158512524f658dcb15c3227e44151975f01574bfdfd5eb1f01c41fdaf37d1572b36fdcb71f6d45df2cc4914161e96df60adbd40efb41379229bb4450f78413f2287b57a9e3d4aabc676c349796a6e199f1804311af31ec35409f333ab2ea46144db868a0890434208f200cd741696039ad9aa02e8fba3850ebf68ad972d402c52277c033b1c7325e28dc91b908fd1b5ab89749d49bcf214f159b878a8cbf86dc5cb1f2f6a5834775c51b92be1273cef78cc28814c92e5f6e1c0431b920bb903e1f18e015cd6491e1440fc26e881995ec940f3c30be9bc51649afbdbff735339db99714e1717cff1df3c230db02e8ecfc40bbcdb6647efb46be1f31cb79eae3c805d6e72d9f7c57abdd9ba03a5872afbea4974700c69972063a25d795e91cbe880b7650a5a3da08fb1821f7696b24c6d24914ad3bc107c5fdbeaf98ac1d48a078f52430a4a7bc0811bd37025189cdd26e0c9974b590f9e50738223c62d58d3b71f0ccc9bba5cb2af08902db94bd3919a495251fba91f3aa8a5d9ff037fdbbf6bb208722d55458f62d0b10c75f7eb0a4c9bbced3d044d1d2495e81ec4ca11bd3a01386056961b86668ea74bae77bce0494c46425bb9cf27aa1ba0699a09dc0f51f296283957d401e11368d2a1dee10385dfa076b70b9645093ead7662806253b8ef31a2879882897be1c2935aa36b8a2f3313c06d968e1580e7dbc4dc84b3fe232b52510ca7661cfa599b0b81540b4ed33b0a7f39cb390979660cb6de4550fd24b39acd61f3d4dfc9ae0af1f346cbc622b52b10b2815b77391644a8fb9eec235fade9716de4b24c26a3b9a82f56a455eef8629a63ff83d3f62ce01f5fcc1dcd7a7c6166c713e0de9764760723a73a7b3e31a7d43b9b3d5566b805d7cb5ca2d81c2aac2191464047472a056112508dc2eb52d95df184a96cd4acd35ad5a6ba339146ab632e49985670685544cbe7e3e8d2157731a4832572efc123303b98a751ad941feb2cf05dae6ee3fd37885700eda72b46680382025013f9f8cc94f1527b8763438983b2f24b2c1f5658a3e49bb37621a04ca76feac89f9ad076d1541cae5b5d63f23324c9e9500c65170ef575a5beb73586f8fea6b045a8a1f078ef43f96f586414c35eb2d263095be728ca1a4e649f0c9b53516e73794da49551f3c5e4b1985306a250947b48f0a2b009a83340c8090167ec0a80a2353a4b071add2d43bf2a21ead6fe9ea2163702503e04ca56f9f75ece20c5e2d7b113cd1a2d50e9962191c0f064fe2b542b7ed58973656aeb953426f44167ebf18c119a60f7ddacc6bafbf761ea60138c86c4058626d4ed3acaecea37fb52ba0023e0f3dccf4b64ae8f3ad23e93036683bf0cc9b95b9cf4c84b8ceb6ecdbe6d187f340e849aa19563958433d445dc74def8e70402b1b2fccf41119e3dc04652778ee77cda4c2bf2ed857c6ad48133137f6a0a519ee972b16c8a0a17bee63989ed9db2bf2eab235e24789fa6f0108233ae73aadb5dff08d328ee0a38e74db3fecaf2dde0cba565fa84f70254b83720070992b28d3e385a908fd11ea1c6d767cb71dd769c9484345654dab8be733c2a3292a00aef4d321e9d85a46bb838e8dc13f4489f270d2eb7b4ae4b771242a694b8c278b2485e6dd6cbdc73957b77712db0d86b2aadc22fe42bf30358e128f1d44997816d5b1e44e0baf0848833f28d4eb9594a1f2ae4eb116344374d126a14bcbf3555ac3df638f655262306480241a399ccc92a5a8d1ef7079c887f32008cedea7d421dae41c89dcaffe11fcc07835b16d92afae8d35c5125f043cc8d6dfbc5e79eaa3f1b1d9e6e1ec01832775900e6234dc2249e44640d529f3f5de7a790e7695ead4f245be74251bdf363ecd15686e9cc983ebbd41869fdce6736f72d85af883078fe4f46f5f53120a920f635fb93b701ef280214b28acc6a6b9a1b01d60cf5660dc848d4361d02095edd0a5bf3739f07a859986796adcd4ab112c92d741e8aa90aa228f8034be6cc18e492138a91fb511d87a8dde057679b6f086965c72761297d029972be3730c8a36e2a45e720d655e556a92dc10cf411a35e869081deb29c1925ea26ba4dff6674199352c5311beb4a59121063c93b5da1e7a574ea989df210d811db398a45993bcc70941ee84eeea9886acc61099658d4363df61714ef32bc4e88bad93c069bc547debed6697dcccc35e6275d17667650da602e76614dbe815c33c45e3314e7c39250c674d9ea74d023353e1d54792869ae20bcc6800e0a5e9cd54600b4064cf0779c329b51157e254e1efdd86ae5c4dbe42c3fd5524a41c748234c8dac03ada2a27bfa5bab956a565f7091fdeb3086d1d321a1b95fa7f287a2c7731aefb3b18fa925fcf4ea30204480f8109ec313de81c45dfe5043d27ad4b3353c04c443b639e20f0758db515ecb9801f62bf4842957178c69ef90182df7878119acc420a4896b073ecfcb0727429dd2ddafb8e5cd168aa2c253db590a96501fb2223fcffbef4c5fef9b57874e6914397c4517b405c47f5333d8ea19c883a10b54114a065bde59712dcb6fc8613db0045e726cd08b8e14fd5fb59f1a41ae710b316da5e6d954109329f9ed613cb87592c6a2041eb7866b24477935dae07128889ba56c323fcff4b09b8af4ef7f821bc774a8d77e9f3965ce514a1927d52ea9190850d838c7948ae28f74a04b2f18eb40b6c40b50cd37619b3150a066f7927e59dd76fde7acd1fe42128e4ac207de67448515166cb0b0412e62a280b8a8520c09983ee7ac13c3af0e1525ab2f01bdc01a8252d87e8ed8d261f3e82fcc9309e72fcaeb3c33e8fd160aee0c8b0d0d31b1e2d485e0c5acfdea35d136d4532091c8ec50a79f9ea124c643039a1897679ba88806630747f8a204edfe053fddc14c3d7cfaace41f31f86dab4cffbd368b029d177a376d524429b36ffea8e4f827d116eb146aaff8788ac23b780d757adafbcf254d84be2f5657a3df8e922d45080ca2f27b7b28feb39d9eb64b5805f00674b72334243f810920f6b239cfee5c14a0e5a605599ec1474f7c29e753f2ae76703ee39991cd01552bb8c3979addd43cc110da698402ce3bd5894c2b67bb571b8e266714dad609615ceefcb3b0525c666a0540ecfb49e41c352ff8e95717cbb84a3d6faa34ac7dc5d70e5019cf1501b41ea651ec8311a242f041b0575fa61b429e00b005629e8984b07fec07a3e0538a9189e214529524a3d9dde2a9f5d84d34edde4434afb2e3632916413acbb7c8993ad8e19d0bb6c61895d687ad9a50ffcbfe60ae9fffab08748fd1a407cfa6e96173192705677fed6ce7a4ff7a3e8c8fb8698a1f222feefce0285347c2b985ac524ccff0c66678dbf13f45724ea42849f0c2b01a104c0a42bf7101a45c684841de693d774ac86e4ea441f6e7c5f9a62d6c0ce4c3cec0a0071fbff27b8d2930fdea7c6ad3f234d7531da8644ab617d7a0e393b7b44a75fa72f8999023b8820c4812b613d996ae22b49d2cb1629e7fbf18698485f8d77689ef09bdd41b75d3afc3dc484fd1481f538a0311ac1fe74c871c76c1f043bf3f7c36737eb27ee3d02900ee68a26fd5bdc0080b52c6d8fba39bf732c807ddef40478edc751b82f4489c266a8320ba573e0858a67809cc5e4a8d1e2a14bedbd0436434b7c639c51d0994e5db80e5ef3d49da90c22e13daccf6c73e4aed6ddb522634ae6bb09d7c64d2b376dc35068ffa6f0c5bd73b2485ac7a59e8512f873ff00c3ad78262c337f21207919d50dc5f3e490c2a49a728034dceba0842818758b96f21f933008dd1412a76da2bf4f8f25309564cc54a9b1f7f7466c416b0dffd379ba7a3fdcdc10d01fb43aaad51536610816a40615f79516d1198df78065a9ec5fc7e684a085378b6a0747eb71e36090d8ec61e0ca00bbd16c1ed448bb5300d2401cd841dfffa1eb1cbec752dcce6fd634f2b915efc4a1d6e7996f78c19306d3a88ac925d8e771e1012f27fb65e61d6c4a6e124aa81e0e2d0f155030abc5601aedb108303a545b97e6cdf545ec1211093d8e3215a370682df41dfc2feec849e21534893ff4d2955a8c58c8e8619b01850a0d92d48d10d1fae6349f18c982ec0c6b83dcb54c4a0813368ad8fd039ae5888ebfd0ea8a4ded6e9886cfeb0983188437dee8491593881566094b1f37944a5f888822daaa9027c023a5a7a580dbfd85044aa0994a23c2d2f23e1f7250f47bc1b1847c23578f89ef0ec945dc34f88923e7608c07b37cef35bd899880a6b61abc83bacbe9d398cc17fe79d0215a7a8cb7d33d53071642f0e20629969c8dcfae90edd782912bd4b978eebcfe1cef0c2b32ba43ac16799a18b0ee3497720b4683a3fbf1544b0b8fd6355a147b5756e2b8e152a5b1832d6baa18dd0a23676732d40398b8d67c71f6bcd72085076367a6b8b503413971985b22926ef26a07aca2937f77d1972a813b560fd5ce8ae41777f5fb40fae5c30331ac463a9f7d46a5d121200017a28750fc06140e5cd5773fc9bdb6dd080b37f07f09eb1820fe0a4483bacc55a4aa56090dadaf7dde4459638f9cea232256749db195dcc09dc2446446aad3f41e07c73be75a96ee8c9dbc1c6cfbe6240740e6f6067a0ce445cd21a9aefb2118b9f91b6bfe5fd6cb6ff2f8c1c1cc21c34c39d05f16c936b5afd49c67209884ae13a551d178e6e65ac9055325ec8d0a88886f0df62769490e27077153ab8b2138e537022deb39ff5b0c9e961d334e018b0c988ce03644408817ab21629ec47759174317fb7bd3e4f4f890ae94f620689c9c5a00624e27eee6fc1ede4825163c1d32178273e1c3aa5d19c5230b6c6b60547885c3ebd527e2cf5da272f3e2ecfaf79b2ab90e77f93a524cd676bf3a5bf8fb6adef94a6c1da5d2455d0e8ed737f9ee498db5087f156cf377db7a0b7b9573882174e9fc1c547d9a8c0bfb0881</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">è¿™é‡Œè®°å½•æ¯”è¾ƒæœºå¯†çš„ä¸€äº›äº‹æƒ…å“¦ï¼Œéœ€è¦å¯†ç æ‰èƒ½è¿›å…¥!</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIG </tag>
            
            <tag> aws </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 Packet Filter</title>
      <link href="/posts/27f08c7633f8.html"/>
      <url>/posts/27f08c7633f8.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>â€‹<code>Packet Filter</code>é€šè¿‡æ‚¨æŒ‡å®šçš„æ•°æ®åŒ…è¿‡æ»¤æ¡ä»¶ï¼Œå†³å®š BIG-IP ç³»ç»Ÿæ¥å£æ¥å—è¿˜æ˜¯æ‹’ç»æŸäº›æ•°æ®åŒ…ï¼Œä»¥æ­¤æ¥å¢å¼ºç½‘ç»œå®‰å…¨ã€‚<code>Packet Filter</code>å¯¹ä¼ å…¥æµé‡å¼ºåˆ¶å®æ–½è®¿é—®ç­–ç•¥ï¼Œå¹¶ä¸”ä»…é€‚ç”¨äºå…¥å‘æµé‡ã€‚</p><p>â€‹æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºæ•°æ®åŒ…è¿‡æ»¤è§„åˆ™æ¥å®ç°æ•°æ®åŒ…è¿‡æ»¤ã€‚<code>Packet Filter</code>ä¸­æŒ‡å®šçš„è¿‡æ»¤æ¡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><blockquote><p>ğŸ¥•æ•°æ®åŒ…çš„æº IP åœ°å€</p><p>ğŸ«‘æ•°æ®åŒ…çš„ç›®æ ‡ IP åœ°å€</p><p>ğŸ¥¦æ•°æ®åŒ…çš„ç›®æ ‡ç«¯å£</p></blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸ BIG-IP é…ç½®å®ç”¨ç¨‹åºä¸­çš„å¤§å¤šæ•° IP åœ°å€é…ç½®è®¾ç½®ï¼ˆè¦æ±‚è·¯ç”±åŸŸ <code>0</code> ä»¥å¤–çš„è·¯ç”±åŸŸä½¿ç”¨ <code>%ID</code> è¡¨ç¤ºæ³•ï¼‰ä¸åŒï¼Œæ•°æ®åŒ…ç­›é€‰å™¨è§„åˆ™çš„<code>æºä¸»æœºå’Œç½‘ç»œ</code>ä»¥åŠ<code>ç›®æ ‡ä¸»æœºå’Œç½‘ç»œ</code>è®¾ç½®æ¥å—ä¸å¸¦è·¯ç”±åŸŸè¡¨ç¤ºæ³•çš„ IP åœ°å€ã€‚è¿™æ˜¯å› ä¸ºï¼Œå½“æ‚¨å°†æ•°æ®åŒ…è¿‡æ»¤å™¨è§„åˆ™åº”ç”¨äºå±äºè·¯ç”±åŸŸçš„ VLAN æ—¶ï¼Œæ‚¨èƒ½é—´æ¥æŒ‡å®šè¦è¿‡æ»¤çš„è·¯ç”±åŸŸçš„æµé‡ã€‚</p><h2 id="ä¸€ã€Packet-Filter-å±æ€§">ä¸€ã€Packet Filter å±æ€§</h2><h3 id="1ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™é¡ºåº">1ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™é¡ºåº</h3><h4 id="ï¼ˆ1ï¼‰First">ï¼ˆ1ï¼‰First</h4><blockquote><p>å¦‚æœå¸Œæœ›æ­¤<code>Packet Filter</code>è§„åˆ™æˆä¸º<code>BIG-IP</code>ç³»ç»Ÿåº”ç”¨çš„ç¬¬ä¸€ä¸ªè§„åˆ™ï¼Œè¯·é€‰æ‹©æ­¤å€¼ã€‚</p></blockquote><h4 id="ï¼ˆ2ï¼‰Last">ï¼ˆ2ï¼‰Last</h4><blockquote><p>å¦‚æœå¸Œæœ›æ­¤<code>Packet Filter</code>è§„åˆ™æˆä¸º<code>BIG-IP</code>ç³»ç»Ÿåº”ç”¨çš„æœ€åä¸€ä¸ªè§„åˆ™ï¼Œè¯·é€‰æ‹©æ­¤å€¼ã€‚</p></blockquote><h4 id="ï¼ˆ3ï¼‰After">ï¼ˆ3ï¼‰After</h4><blockquote><p>é€‰æ‹©æ­¤å€¼ï¼Œç„¶åä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª<code>Packet Filter</code>è§„åˆ™ï¼ˆå¦‚æœå¸Œæœ›ç³»ç»Ÿåœ¨ä»åˆ—è¡¨ä¸­é€‰æ‹©çš„æ•°æ®åŒ…ç­›é€‰å™¨ä¹‹ååº”ç”¨æ­¤æ•°æ®åŒ…ç­›é€‰å™¨ï¼‰ã€‚è¯·æ³¨æ„ï¼Œå½“æ‚¨é…ç½®äº†ä¸‰ä¸ªä»¥ä¸Šçš„<code>Packet Filter</code>è§„åˆ™æ—¶ï¼Œæ­¤è®¾ç½®æœ€æœ‰ç”¨ã€‚</p></blockquote><h3 id="2ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™åŠ¨ä½œ">2ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™åŠ¨ä½œ</h3><h4 id="ï¼ˆ1ï¼‰Accept">ï¼ˆ1ï¼‰Accept</h4><blockquote><p>å¦‚æœå¸Œæœ›ç³»ç»Ÿæ¥å—æ•°æ®åŒ…ï¼Œè¯·é€‰æ‹©<code>Accept</code>ï¼Œå¹¶åœæ­¢å¤„ç†å…¶ä»–æ•°æ®åŒ…ç­›é€‰è§„åˆ™ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚è¿™æ˜¯é»˜è®¤è®¾ç½®ã€‚</p></blockquote><h4 id="ï¼ˆ2ï¼‰Discard">ï¼ˆ2ï¼‰Discard</h4><blockquote><p>å¦‚æœå¸Œæœ›ç³»ç»Ÿä¸¢å¼ƒæ•°æ®åŒ…ï¼Œè¯·é€‰æ‹©<code>Discard</code>ï¼Œå¹¶åœæ­¢å¤„ç†å…¶ä»–æ•°æ®åŒ…ç­›é€‰è§„åˆ™ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</p></blockquote><h4 id="ï¼ˆ3ï¼‰Reject">ï¼ˆ3ï¼‰Reject</h4><blockquote><p>å¦‚æœå¸Œæœ›ç³»ç»Ÿä¸¢å¼ƒæ•°æ®åŒ…ï¼ŒåŒæ—¶å‘å‘é€æ–¹å‘é€æ‹’ç»æ•°æ®åŒ…ï¼Œè¯·é€‰æ‹©<code>Reject</code>ï¼ŒæŒ‡ç¤ºè¯¥æ•°æ®åŒ…å·²è¢«æ‹’ç»ã€‚è¯·æ³¨æ„ï¼Œå½“æ‚¨é€‰æ‹©æ‹’ç»æ“ä½œæ—¶ç³»ç»Ÿçš„è¡Œä¸ºå–å†³äºæ‚¨å¦‚ä½•é…ç½®å¸¸è§„æ•°æ®åŒ…è¿‡æ»¤å™¨é€‰é¡¹å±æ€§ï¼Œå³åœ¨æ•°æ®åŒ…æ‹’ç»æ—¶å‘é€ ICMP é”™è¯¯ã€‚</p></blockquote><h4 id="ï¼ˆ4ï¼‰Continue">ï¼ˆ4ï¼‰Continue</h4><blockquote><p>å¦‚æœæ‚¨åªæ˜¯æƒ³è®©ç³»ç»Ÿç¡®è®¤æ•°æ®åŒ…ä»¥è¿›è¡Œè®°å½•æˆ–ç»Ÿè®¡ï¼Œè¯·é€‰æ‹©<code>Continue</code>ã€‚å°†åŠ¨ä½œå€¼è®¾ç½®ä¸º<code>Continue</code>ä¸ä¼šå½±å“<code>BIG-IP</code>ç³»ç»Ÿå¤„ç†æ•°æ®åŒ…çš„æ–¹å¼ï¼›ç³»ç»Ÿç»§ç»­è¯„ä¼°ä¸è§„åˆ™åŒ¹é…çš„æµé‡ï¼Œä»åˆ—å‡ºçš„ä¸‹ä¸€ä¸ªæ•°æ®åŒ…è¿‡æ»¤è§„åˆ™å¼€å§‹ã€‚</p></blockquote><h3 id="3ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™æŒ‡å®š-VLAN">3ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™æŒ‡å®š VLAN</h3><blockquote><p>æŒ‡å®šæ•°æ®åŒ…è¿‡æ»¤çš„<code>Vlan</code>ï¼Œé»˜è®¤è¿‡æ»¤å…¨éƒ¨<code>vlan</code>æ•°æ®åŒ…ã€‚</p></blockquote><h3 id="4ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™è¿‡æ»¤æ—¥å¿—">4ã€æ•°æ®åŒ…è¿‡æ»¤è§„åˆ™è¿‡æ»¤æ—¥å¿—</h3><blockquote><p>å¦‚æœè¦åœ¨æ¯æ¬¡æ•°æ®åŒ…ä¸è§„åˆ™åŒ¹é…æ—¶ç”Ÿæˆæ—¥å¿—æ¶ˆæ¯ï¼Œå¯ä»¥ä¸º<code>Packet Filter</code>è§„åˆ™å¯ç”¨æ—¥å¿—è®°å½•ï¼Œé»˜è®¤ä¸è®°å½•æ—¥å¿—ã€‚</p></blockquote><h3 id="5ã€è¿‡æ»¤è§„åˆ™è¡¨è¾¾å¼">5ã€è¿‡æ»¤è§„åˆ™è¡¨è¾¾å¼</h3><p>å¤šæ¡è¡¨è¾¾å¼ä¹‹é—´ä½¿ç”¨<code>and</code>è¿æ¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( ( ip proto TCP or ip6 proto TCP )  ) and ( src net 1.1.1.0/24 or src host 1.1.1.1 ) and ( dst host 192.168.10.101 or dst net 192.168.10.0/24 ) and ( dst port 22 )</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ1ï¼‰æºåœ°å€ä¿¡æ¯">ï¼ˆ1ï¼‰æºåœ°å€ä¿¡æ¯</h4><p>å¤šæ¡æºåœ°å€ä¿¡æ¯ä¹‹é—´ä½¿ç”¨<code>or</code>è¿æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">src hostï¼šæºä¸»æœº</span><br><span class="line">src netï¼šæºç½‘æ®µ</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line">( src host 1.1.1.1 or src net 1.1.1.0/24 ) </span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ç›®çš„åœ°å€ä¿¡æ¯">ï¼ˆ2ï¼‰ç›®çš„åœ°å€ä¿¡æ¯</h4><p>å¤šæ¡ç›®çš„åœ°å€ä¿¡æ¯ä¹‹é—´ä½¿ç”¨<code>or</code>è¿æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">dst hostï¼šç›®çš„ä¸»æœº</span><br><span class="line">dst netï¼šç›®çš„ç½‘æ®µ</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line">( dst host 192.168.10.101 or dst net 192.168.10.0/24 ) </span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ç›®çš„ç«¯å£ä¿¡æ¯">ï¼ˆ3ï¼‰ç›®çš„ç«¯å£ä¿¡æ¯</h4><p>å¤šæ¡ç›®çš„ç«¯å£ä¿¡æ¯ä¹‹é—´ä½¿ç”¨<code>or</code>è¿æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">dst portï¼šç›®çš„ä¸»æœº</span><br><span class="line">dst netï¼šç›®çš„ç½‘æ®µ</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line">( dst port 22 )</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰åè®®ä¿¡æ¯">ï¼ˆ4ï¼‰åè®®ä¿¡æ¯</h4><p>å¤šæ¡åè®®ä¿¡æ¯ä¹‹é—´ä½¿ç”¨<code>or</code>è¿æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line">( ( ip proto TCP or ip6 proto TCP )  )</span><br></pre></td></tr></table></figure><h2 id="äºŒã€F5-åˆ›å»º-Packet-Filter-å®æˆ˜">äºŒã€F5 åˆ›å»º Packet Filter å®æˆ˜</h2><blockquote><p>è¦æ±‚ç¤ºä¾‹ï¼šä»…å…è®¸ 192.168.10.0/16 è®¿é—® seifip 192.168.10.84 çš„ 22 å’Œ 443 ç«¯å£ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–æµé‡ï¼ˆä¾‹å¦‚ï¼šè™šæ‹ŸæœåŠ¡ï¼‰ã€‚</p></blockquote><h3 id="1ã€åˆ›å»ºç­–ç•¥">1ã€åˆ›å»ºç­–ç•¥</h3><p>â€‹å¯¼èˆªè‡³<code>Network &gt;&gt; Packet Filters:Rules</code>è·¯å¾„ï¼Œç‚¹å‡»<code>Create</code>åˆ›å»ºç­–ç•¥ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220402120514746.png" alt="image-20220402120514746"></p><h4 id="1-åˆ›å»ºå…è®¸ç­–ç•¥">(1) åˆ›å»ºå…è®¸ç­–ç•¥</h4><blockquote><p>Name : ç­–ç•¥åç§°</p><p>Order ï¼š ç­–ç•¥é¡ºåºï¼Œè¿™é‡Œé€‰æ‹©<code>First</code>ã€‚</p><p>Action ï¼š ç­–ç•¥æ‰§è¡ŒåŠ¨ä½œï¼Œè¿™é‡Œé€‰æ‹©<code>Accept</code>ã€‚</p><p>Source Hosts and Networksï¼šé€‰æ‹©<code>Restrict to any in list</code>ï¼Œæ·»åŠ å…è®¸è®¿é—®çš„æºåœ°å€æˆ–ç½‘æ®µã€‚</p><p>Destination Hosts and Networksï¼šé€‰æ‹©<code>Restrict to any in list</code>ï¼Œæ·»åŠ å…è®¸è®¿é—®çš„ç›®çš„åœ°å€æˆ–ç½‘æ®µã€‚</p><p>Destination Portï¼šé€‰æ‹©<code>Restrict to any in list</code>ï¼Œæ·»åŠ å…è®¸è®¿é—®çš„ç›®çš„ç«¯å£ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220402120833331.png" alt="image-20220402120833331"></p><h4 id="2-åˆ›å»ºæ‹’ç»ç­–ç•¥">(2) åˆ›å»ºæ‹’ç»ç­–ç•¥</h4><blockquote><p>Name : ç­–ç•¥åç§°</p><p>Order ï¼š ç­–ç•¥é¡ºåºï¼Œè¿™é‡Œé€‰æ‹©<code>Last</code>ã€‚</p><p>Action ï¼š ç­–ç•¥æ‰§è¡ŒåŠ¨ä½œï¼Œè¿™é‡Œé€‰æ‹©<code>Reject</code>ã€‚</p><p>Destination Hosts and Networksï¼šé€‰æ‹©<code>Restrict to any in list</code>ï¼Œæ·»åŠ æ‹’ç»è®¿é—®çš„ç›®çš„åœ°å€æˆ–ç½‘æ®µã€‚</p><p>Destination Portï¼šé€‰æ‹©<code>Restrict to any in list</code>ï¼Œæ·»åŠ æ‹’ç»è®¿é—®çš„ç›®çš„ç«¯å£ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220402121259607.png" alt="image-20220402121259607"></p><h4 id="3-åˆ›å»ºContinueç­–ç•¥ï¼ˆå»ºè®®é…ç½®ï¼‰">(3) åˆ›å»ºContinueç­–ç•¥ï¼ˆå»ºè®®é…ç½®ï¼‰</h4><blockquote><p>Name : ç­–ç•¥åç§°</p><p>Order ï¼š ç­–ç•¥é¡ºåºï¼Œè¿™é‡Œé€‰æ‹©<code>Last</code>ã€‚</p><p>Action ï¼š ç­–ç•¥æ‰§è¡ŒåŠ¨ä½œï¼Œè¿™é‡Œé€‰æ‹©<code>Continue</code>ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220402121548145.png" alt="image-20220402121548145"></p><h3 id="äºŒã€å¼€å¯ç­–ç•¥">äºŒã€å¼€å¯ç­–ç•¥</h3><p>â€‹å¯¼èˆªè‡³<code>Network &gt;&gt; Packet Filters:General</code>è·¯å¾„ï¼Œé€‰æ‹©<code>Packet Filtering</code>ä¸º<code>Enabled</code>ï¼Œç‚¹å‡»<code>Finish</code>å¼€å¯ç­–ç•¥ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220402122513588.png" alt="image-20220402122513588"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> Packet Filter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 æ¸…é™¤ LCD å‘Šè­¦</title>
      <link href="/posts/45afd63a5b5f.html"/>
      <url>/posts/45afd63a5b5f.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦è¿œç¨‹æ¸…é™¤LCDè­¦å‘Šå’ŒæŠ¥è­¦LEDã€‚æ‰§è¡Œæ­¤æ“ä½œå¯èƒ½ä¼šé˜»æ­¢ç°åœºäººå‘˜å‘ç°å’ŒæŠ¥å‘Šæ—§è­¦å‘Šï¼Œæˆ–è€…å¿…é¡»æ•™ä¼šç°åœºäººå‘˜å¦‚ä½•æ¸…é™¤LCDã€‚æ‚¨å¯ä»¥ä½¿ç”¨lcdwarnå‘½ä»¤è¡Œå®ç”¨ç¨‹åºæ¥æ§åˆ¶LCDå’ŒæŠ¥è­¦LEDã€‚è¦æ˜¾ç¤ºå…¶ç”¨æ³•ï¼Œè¯·åœ¨ä¸å¸¦ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹è¿è¡Œlcdwarnå‘½ä»¤ã€‚</p><p>â€‹  æ³¨æ„ï¼šä»BIG-IP 12.1.0å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨<code>tmsh show sys alert lcd</code>å‘½ä»¤æ˜¾ç¤ºå‘é€åˆ°lcdå‰é¢æ¿æ˜¾ç¤ºå±çš„è­¦æŠ¥åˆ—è¡¨ã€‚</p><h2 id="ä¸€ã€LCD-å‘Šè­¦æ¸…é™¤">ä¸€ã€LCD å‘Šè­¦æ¸…é™¤</h2><h3 id="1ã€BIG-IP-iSeries-å¹³å°">1ã€BIG-IP iSeries å¹³å°</h3><p>â€‹æœ‰å…³æ¸…é™¤ BIG-IP iSeries å¹³å°ä¸Šçš„è­¦æŠ¥ LED çš„ä¿¡æ¯ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmsh reset-stats sys alert lcd</span><br></pre></td></tr></table></figure><h3 id="2ã€VIPRION-å¹³å°">2ã€VIPRION å¹³å°</h3><p>â€‹æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å•ä¸ªå‘½ä»¤æ¸…é™¤æ‰€æœ‰ VIPRION æ’æ§½ä¸Šæ‰€æœ‰è­¦æŠ¥çº§åˆ«çš„æ‰€æœ‰ LCD è­¦å‘Šï¼š</p><p><strong>ï¼ˆ1ï¼‰BIG-IP 12.1.5ã€BIG-IP 13.1.0 åŠæ›´é«˜ç‰ˆæœ¬</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3 4 5; <span class="keyword">do</span> lcdwarn -c <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰BIG-IP 13.0.0ã€BIG-IP 12.1.4 åŠæ›´æ—©ç‰ˆæœ¬</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3 4 5; <span class="keyword">do</span> <span class="keyword">for</span> j <span class="keyword">in</span> 1 2 3 4 5 6 7 8; <span class="keyword">do</span> lcdwarn -c <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;j&#125;</span>&quot;</span>; <span class="keyword">done</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåœ¨å…·æœ‰æœªå¡«å……åˆ€ç‰‡æ’æ§½çš„ VIPRION ç³»ç»Ÿä¸Šè¿è¡Œæ­¤å‘½ä»¤ï¼Œç³»ç»Ÿä¼šå°†è‰¯æ€§é”™è¯¯æ¶ˆæ¯è®°å½•åˆ° <strong>/var/log/ltm</strong> æ–‡ä»¶ä¸­ï¼Œè¿™äº›æ¶ˆæ¯ç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">012a0004:4: ledSet error: LopDev: sendLopCmd: Lopd status: 1 packet: action=2 obj_id=3c sub_obj=0 slot_id=2 result=2 len=0 crc=e071 payload= (error code:0x2)</span><br></pre></td></tr></table></figure><p>â€‹æ‚¨å¯ä»¥å®‰å…¨åœ°å¿½ç•¥æ­¤æ¶ˆæ¯;å®ƒä¸ä¼šå½±å“VIPRIONç³»ç»Ÿçš„æµé‡å¤„ç†èƒ½åŠ›ã€‚</p><p>â€‹è¦é˜²æ­¢åœ¨å…·æœ‰æœªå¡«å……åˆ€ç‰‡æ’æ§½çš„ VIPRION ç³»ç»Ÿä¸Šå‡ºç°æ­¤é”™è¯¯æ¶ˆæ¯ï¼Œè¯·è°ƒæ•´ <strong>j</strong> å˜é‡çš„è¾“å…¥å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»…å¡«å……åˆ€ç‰‡å¼æœåŠ¡å™¨æ’æ§½ <strong>1</strong> å’Œ <strong>2</strong> çš„ VIPRION ç³»ç»Ÿä¸Šï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3 4 5; <span class="keyword">do</span> <span class="keyword">for</span> j <span class="keyword">in</span> 1 2; <span class="keyword">do</span> lcdwarn -c <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;j&#125;</span>&quot;</span>; <span class="keyword">done</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="3ã€æ‰€æœ‰å…¶ä»–BIG-IPå¹³å°ï¼ˆVIPRIONå¹³å°å’ŒBIG-IP-iSerieså¹³å°é™¤å¤–ï¼‰">3ã€æ‰€æœ‰å…¶ä»–BIG-IPå¹³å°ï¼ˆVIPRIONå¹³å°å’ŒBIG-IP iSerieså¹³å°é™¤å¤–ï¼‰</h3><p>â€‹æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å•ä¸ªå‘½ä»¤æ¸…é™¤æ‰€æœ‰å…¶ä»– BIG-IP å¹³å°ï¼ˆVIPRION å¹³å°é™¤å¤–ï¼‰ä¸Šæ‰€æœ‰è­¦æŠ¥çº§åˆ«çš„æ‰€æœ‰ LCD è­¦å‘Šï¼š</p><p><strong>ï¼ˆ1ï¼‰BIG-IP 12.1.5ã€BIG-IP 13.1.0 åŠæ›´é«˜ç‰ˆæœ¬</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3 4 5; <span class="keyword">do</span> lcdwarn -c <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰BIG-IP 13.0.0ã€BIG-IP 12.1.4 åŠæ›´æ—©ç‰ˆæœ¬</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3 4 5; <span class="keyword">do</span> lcdwarn -c <span class="string">&quot;<span class="variable">$&#123;i&#125;</span>&quot;</span> 0; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€éªŒè¯æµ‹è¯•">äºŒã€éªŒè¯æµ‹è¯•</h2><h3 id="1ã€æ¨¡æ‹Ÿæ—¥å¿—ï¼ˆå¯é€‰ï¼‰">1ã€æ¨¡æ‹Ÿæ—¥å¿—ï¼ˆå¯é€‰ï¼‰</h3><p>â€‹å¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒæ²¡æœ‰æ—¥å¿—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œè§¦å‘lcdå‘Šè­¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger -p local0.notice <span class="string">&quot;010d0002:2: Cpu 1: fan speed (0) is too low.&quot;</span></span><br></pre></td></tr></table></figure><p>â€‹ä½¿ç”¨ <code>show sys alert lcd</code> å‘½ä»¤æŸ¥çœ‹å‘Šè­¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show sys alert lcd</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">Sys::LCDAlerts</span><br><span class="line">Slot          Timestamp  Priority         Id        Description</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">0     07/05/20 17:22:23  critical  0x10d0002  CPU fan too slow.</span><br></pre></td></tr></table></figure><h3 id="2ã€LCD-å‘Šè­¦æ¸…é™¤">2ã€LCD å‘Šè­¦æ¸…é™¤</h3><p>æŒ‰ç…§è®¾å¤‡å‹å·é€‰æ‹©ç¬¬ä¸€ç« ä¸­ LCD å‘Šè­¦æ¸…é™¤æ–¹å¼è¿›è¡Œå‘Šè­¦æ¸…é™¤å¹¶è¿›è¡ŒéªŒè¯ã€‚</p><h2 id="ä¸‰ã€å‚è€ƒæ–‡æ¡£">ä¸‰ã€å‚è€ƒæ–‡æ¡£</h2><blockquote><p><a href="https://support.f5.com/csp/article/K11094">Clearing the LCD and the Alarm LED remotely (f5.com)</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> æ•…éšœå¤„ç† </tag>
            
            <tag> LCD </tag>
            
            <tag> å‘Šè­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 ä¸‰è§’ä¼ è¾“ï¼ˆnPathï¼‰æ¨¡å¼é…ç½®</title>
      <link href="/posts/f30c5d8a5a4c.html"/>
      <url>/posts/f30c5d8a5a4c.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åŸºç¡€ä»‹ç»">ä¸€ã€åŸºç¡€ä»‹ç»</h2><p>â€‹ä¸‰è§’ä¼ è¾“æ¨¡å¼åˆå«nPathæ¨¡å¼ï¼Œè®¾ç½®nPathè·¯ç”±é…ç½®ä¹‹åï¼Œå®¢æˆ·ç«¯è¿›å…¥çš„æµé‡é€šè¿‡F5è´Ÿè½½å‡è¡¡å™¨è´Ÿè½½åˆ°åç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨çš„è¿”å›æµé‡å°†ç»•è¿‡F5è´Ÿè½½å‡è¡¡å™¨ç›´æ¥åˆ°è¾¾å¤–é¢ã€‚è¿™ç§æµé‡ç®¡ç†æ–¹æ³•å¯æé«˜å‡ºç«™ååé‡ï¼Œå› ä¸ºä¸éœ€è¦å°†æ•°æ®åŒ…è¿”å›åŒ…ä¼ è¾“åˆ°BIG-IPç³»ç»Ÿè¿›è¡Œè½¬æ¢ï¼Œç„¶åå†è½¬å‘åˆ°ä¸‹ä¸€è·³ã€‚</p><p>â€‹nPathæ¨¡å¼æµé‡èµ°å‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.whbblog.cn/img/image-20220328150127843.png" alt="image-20220328150127843"></p><h2 id="äºŒã€éƒ¨ç½²åŸç†">äºŒã€éƒ¨ç½²åŸç†</h2><p>â€‹åœ¨é…ç½®å®ç°DSR(æœåŠ¡å™¨ç›´æ¥è¿”å›)æŠ€æœ¯æ—¶ï¼Œè´Ÿè½½å‡è¡¡å™¨åªè½¬æ¢è¯·æ±‚æ•°æ®åŒ…çš„ç›®çš„MACåœ°å€ï¼Œä¸æ”¹å†™å…¶ä»–ä»»ä½•æ•°æ®ï¼Œè¿™æ ·ï¼Œå‘é€åˆ°åç«¯çœŸå®æœåŠ¡å™¨çš„è¯·æ±‚çš„æ•°æ®åŒ…ä¿æŒäº†åŸæœ¬çš„æºIPã€ç›®çš„IPã€æºç«¯å£å’Œç›®çš„ç«¯å£ã€‚ä¸ºäº†ä¿è¯è¯·æ±‚çš„æ•°æ®åŒ…åªæ ¹æ®MACåœ°å€å°±åˆ°è¾¾çœŸå®æœåŠ¡å™¨ï¼Œæ‰€ä»¥çœŸå®æœåŠ¡å™¨å¿…é¡»ä¸è´Ÿè½½å‡è¡¡å™¨åœ¨åŒä¸€ä¸ªäºŒå±‚å¹¿æ’­åŸŸã€‚å› æ­¤ï¼Œéœ€è¦æŠŠæ¯ä¸ªçœŸå®æœåŠ¡å™¨çš„Loopbackåœ°å€è®¾ç½®æˆVIP(è™šæ‹ŸæœåŠ¡å™¨)çš„åœ°å€ã€‚æœåŠ¡å™¨ç½‘å…³æŒ‡å‘å‡ºå£è®¾å¤‡ç›´æ¥å‡ºå»ï¼Œæ— éœ€ç»è¿‡BIG-IP LTMã€‚</p><p>â€‹ä»¥TCPå»ºç«‹è¿æ¥æ¥è¯´ï¼Œæ•°æ®åŒ…æµé‡å¤„ç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://cdn.whbblog.cn/img/image-20220328170520887.png" alt="image-20220328170520887" style="zoom: 50%;" /><p>â€‹è¿™ç§éƒ¨ç½²çš„ä¼˜åŠ¿ï¼šä¸Šä¼ å’Œä¸‹è½½çš„æ¯”ä¾‹è¶…è¿‡1æ¯”10ï¼Œä¾‹å¦‚BIG-IPåªéœ€è¦å¤„ç†100Mbpsçš„æµé‡ï¼Œæ•´ä¸ªç³»ç»Ÿå¤„ç†èƒ½åŠ›å°±å¯ä»¥è¾¾åˆ°1Gbpsã€‚ç”¨æˆ·åªéœ€è¦æäº¤å¾ˆå°é‡çš„è¯·æ±‚å°±ä¼šç­‰åˆ°å¤§é‡çš„æ•°æ®ã€‚</p><h2 id="ä¸‰ã€å®éªŒç¯å¢ƒ">ä¸‰ã€å®éªŒç¯å¢ƒ</h2><p><strong>å®éªŒæ‹“æ‰‘å¦‚ä¸‹ï¼š</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220328170248075.png" alt="image-20220328170248075"></p><h2 id="å››ã€F5-éƒ¨ç½²ä¸‰è§’ä¼ è¾“ä¸šåŠ¡">å››ã€F5 éƒ¨ç½²ä¸‰è§’ä¼ è¾“ä¸šåŠ¡</h2><h3 id="1ã€åˆ›å»º-fastL4-Profile">1ã€åˆ›å»º fastL4 Profile</h3><p>â€‹å¯¼èˆªè‡³<code>Local Traffic â€ºâ€º Profiles : Protocol : Fast L4</code>è·¯å¾„ä¸‹ç‚¹å‡»<code>create</code>åˆ›å»ºæ–°çš„<code>fastL4 profile</code>ã€‚éœ€è¦é…ç½®çš„å‚æ•°å¦‚ä¸‹ï¼š</p><blockquote><p>Nameï¼šè¾“å…¥æ–°çš„fastL4 profileåç§°ã€‚</p><p>Parent Profileï¼šé€‰æ‹©è¦ç»§æ‰¿çš„åè®®ï¼Œè¿™é‡Œå¡«å†™fastL4ã€‚</p><p>Loose Initiationï¼šå‹¾é€‰å¼€å¯ã€‚</p><p>Loose Closeï¼šå‹¾é€‰å¼€å¯ã€‚</p><p>SYN Challenge Handlingï¼šé€‰æ‹©Disable Challengesã€‚</p><p>å…¶ä½™é…ç½®ä¿æŒé»˜è®¤ï¼Œç‚¹å‡» Finish å®Œæˆåˆ›å»ºã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220328174411206.png" alt="image-20220328174411206"></p><p><img src="https://cdn.whbblog.cn/img/image-20220328174539563.png" alt="image-20220328174539563"></p><h3 id="2ã€åˆ›å»º-pool">2ã€åˆ›å»º pool</h3><p>â€‹å¯¼èˆªè‡³<code>Local Traffic â€ºâ€º Pools</code>è·¯å¾„ä¸‹ï¼Œç‚¹å‡»<code>create</code> æ–°å»º<code>pool</code>ã€‚éœ€è¦é…ç½®çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><blockquote><p>Name: è¾“å…¥Poolåç§°</p><p>Health Monitorsï¼šé€‰æ‹©å¥åº·æ£€æµ‹</p><p>New Membersï¼šæ–°å»ºåç«¯æœåŠ¡ã€‚</p><p>å…¶ä½™é…ç½®ä¿æŒé»˜è®¤ï¼Œç‚¹å‡» Finish å®Œæˆåˆ›å»ºã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220328175028195.png" alt="image-20220328175028195"></p><h3 id="3ã€åˆ›å»º-Virtual-Server">3ã€åˆ›å»º Virtual Server</h3><p>â€‹å¯¼èˆªè‡³<code>Local Traffic  â€ºâ€º  Virtual Servers : Virtual Server List</code>è·¯å¾„ä¸‹ï¼Œç‚¹å‡»<code>Create</code>åˆ›å»ºè™šæ‹ŸæœåŠ¡ã€‚é…ç½®ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>Name : è™šæ‹ŸæœåŠ¡åç§°</p><p>Type ï¼šè™šæ‹ŸæœåŠ¡ç±»å‹ï¼Œè¿™é‡Œé€‰æ‹© Performanceï¼ˆLayer 4ï¼‰</p><p>Destination Address/Mask ï¼šè™šæ‹ŸæœåŠ¡åœ°å€</p><p>Server Port ï¼šè™šæ‹ŸæœåŠ¡ç«¯å£</p><p>Protocol profileï¼ˆclientï¼‰ï¼šè™šæ‹ŸæœåŠ¡å®¢æˆ·ç«¯åè®®ï¼Œè¿™é‡Œé€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ nPath_fastL4</p><p>Address Translation : ç›®çš„åœ°å€è½¬æ¢ï¼Œè¿™é‡Œå–æ¶ˆå‹¾é€‰ã€‚</p><p>Port translation ï¼šç›®çš„ç«¯å£è½¬æ¢ï¼Œè¿™é‡Œå–æ¶ˆå‹¾é€‰ã€‚</p><p>Source Port ï¼šæºç«¯å£è®¾ç½®ï¼Œè¿™é‡Œé€‰æ‹© Preserve Strict ä¸¥æ ¼ä¿ç•™æºç«¯å£ã€‚</p><p>Default Pool ï¼šPoolé€‰æ‹©ï¼Œè¿™é‡Œé€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ nPath_poolã€‚</p><p>å…¶ä½™é…ç½®ä¿æŒé»˜è®¤ï¼Œç‚¹å‡» Finish å®Œæˆåˆ›å»ºã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220328180109075.png" alt="image-20220328180109075"></p><p><img src="https://cdn.whbblog.cn/img/image-20220328180336107.png" alt="image-20220328180336107"></p><h2 id="äº”ã€æœåŠ¡å™¨é…ç½®">äº”ã€æœåŠ¡å™¨é…ç½®</h2><h3 id="1ã€loopback-æ¥å£é…ç½®">1ã€loopback æ¥å£é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-lo:1</span></span><br><span class="line">DEVICE=lo:1</span><br><span class="line">IPADDR=192.168.10.99</span><br><span class="line">NETMASK=255.255.255.255</span><br><span class="line">GATEWAY=192.168.10.1</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">NAME=loopback1</span><br></pre></td></tr></table></figure><h3 id="2ã€é‡å¯ç½‘ç»œ">2ã€é‡å¯ç½‘ç»œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure><h2 id="å…­ã€è®¿é—®æµ‹è¯•">å…­ã€è®¿é—®æµ‹è¯•</h2><p>â€‹è®¿é—®è™šæ‹ŸæœåŠ¡<code>http://192.168.10.99</code>è¿›è¡Œæµ‹è¯•ï¼Œæ­£å¸¸è®¿é—®å³é…ç½®æˆåŠŸã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220328181250070.png" alt="image-20220328181250070"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> é…ç½® </tag>
            
            <tag> nPat </tag>
            
            <tag> ä¸‰è§’ä¼ è¾“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 Tcpudmp æŠ“åŒ…</title>
      <link href="/posts/91d0a674be32.html"/>
      <url>/posts/91d0a674be32.html</url>
      
        <content type="html"><![CDATA[<p><code>tcpdump</code>æ˜¯ä¸€ä¸ªç”¨äºæˆªå–ç½‘ç»œåˆ†ç»„ï¼Œå¹¶è¾“å‡ºåˆ†ç»„å†…å®¹çš„å·¥å…·ã€‚å‡­å€Ÿå¼ºå¤§çš„åŠŸèƒ½å’Œçµæ´»çš„æˆªå–ç­–ç•¥ï¼Œä½¿å…¶æˆä¸ºç±»UNIXç³»ç»Ÿä¸‹ç”¨äºç½‘ç»œåˆ†æå’Œé—®é¢˜æ’æŸ¥çš„é¦–é€‰å·¥å…·ã€‚</p><p><code>tcpdump</code>æ”¯æŒé’ˆå¯¹ç½‘ç»œå±‚ã€åè®®ã€ä¸»æœºã€ç½‘ç»œæˆ–ç«¯å£çš„è¿‡æ»¤ï¼Œå¹¶æä¾›andã€orã€notç­‰é€»è¾‘è¯­å¥æ¥å¸®åŠ©ä½ å»æ‰æ— ç”¨çš„ä¿¡æ¯ã€‚</p><h2 id="ä¸€ã€å¸¸ç”¨å‚æ•°">ä¸€ã€å¸¸ç”¨å‚æ•°</h2><h3 id="1ã€-D">1ã€<code>-D</code></h3><p>è¦åˆ—å‡ºå¯ç”¨äºæ•°æ®åŒ…æ•è·çš„æ¥å£ï¼Œè¯·ä½¿ç”¨ <code>tcpdump -D</code></p><p>æ³¨æ„ï¼š<code>any</code> æ¥å£å¯ä»¥ç”± <code>0.0</code>è¡¨ç¤º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -D</span></span><br><span class="line">1.eth0</span><br><span class="line">2.mgmt</span><br><span class="line">3.tmm</span><br><span class="line">4.vlan_test</span><br><span class="line">5.ha-vlan</span><br><span class="line">6.tmm_bp</span><br><span class="line">7.any (Pseudo-device that captures on all interfaces)</span><br><span class="line">8.lo [Loopback]</span><br></pre></td></tr></table></figure><h3 id="2ã€-i">2ã€<code>-i</code></h3><p>è¦æ•è·ç‰¹å®šæ¥å£ä¸Šçš„æµé‡ï¼Œè¯·ä½¿ç”¨ <code>tcpdump -i &lt;æ¥å£åç§°&gt;</code>ï¼Œå³ <code>tcpdump -i 0.0</code>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p>æ³¨æ„ï¼šåœ¨æ•è·æ—¶å¯¹æ¥å£ä½¿ç”¨ 0.0 æ—¶ï¼Œè¯·ç¡®ä¿ä½¿ç”¨æ•è·ç­›é€‰å™¨ï¼Œå¦åˆ™å°†è·å¾—å¤ªå¤šä¿¡æ¯ï¼Œå¹¶å¯èƒ½å½±å“ F5 çš„æ€§èƒ½ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -i 0.0</span></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on 0.0, link-type EN10MB (Ethernet), capture size 65535 bytes</span><br><span class="line">16:22:32.750177 IP bigip2.com.63463 &gt; 192.168.10.223.syslog: [|syslog] out slot1/tmm0 lis=</span><br></pre></td></tr></table></figure><p><strong>(1) <code>:n</code></strong></p><p><code>:n</code> æä¾› wireshark F5 æ’ä»¶ä½ç­‰ç»†èŠ‚è¾“å‡ºï¼Œè¾“å‡ºç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -i 0.0:n</span></span><br></pre></td></tr></table></figure><img src="https://cdn.whbblog.cn/img/image-20220319170951009.png" alt="image-20220319170951009" style="zoom:67%;" /><blockquote><ul><li><p>Ingress : æ ‡è®°å…¥å‘æˆ–è€…å‡ºå‘æµé‡ã€‚</p></li><li><p>Slot ï¼š å¤„ç†æµé‡çš„æ’æ§½</p></li><li><p>TMM ï¼š æµé‡å¤„ç†çš„ TMM å†…æ ¸</p></li><li><p>Virtual Server ï¼š å¤„ç†æµé‡çš„è™šæ‹ŸæœåŠ¡å™¨åç§°</p></li></ul></blockquote><p><strong>ï¼ˆ2ï¼‰<code>:nn</code></strong></p><p><code>:nn</code> æä¾› wireshark F5 æ’ä»¶ä½ç­‰å’Œä¸­ç­‰ç»†èŠ‚è¾“å‡ºï¼Œè¾“å‡ºç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -i 0.0:nn</span></span><br></pre></td></tr></table></figure><img src="https://cdn.whbblog.cn/img/image-20220319172027566.png" alt="image-20220319172027566" style="zoom:67%;" /><blockquote><ul><li>Flow ID number : æµ ID å·</li><li>Peer Flow ID number ï¼š å¯¹ç«¯æµ ID å·</li><li>Flow type ï¼š æµé‡ç±»å‹</li><li>HA unit ï¼š é«˜å¯ç”¨å•å…ƒ</li><li>Priority ï¼š ä¼˜å…ˆçº§</li></ul></blockquote><p><strong>ï¼ˆ3ï¼‰<code>:nnn</code></strong></p><p><code>:nnn</code> æä¾› wireshark F5 æ’ä»¶ä½ç­‰ã€ä¸­ç­‰å’Œé«˜ç­‰ç»†èŠ‚è¾“å‡ºï¼Œè¾“å‡ºç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -i 0.0:nnn</span></span><br></pre></td></tr></table></figure><img src="https://cdn.whbblog.cn/img/image-20220321101446019.png" alt="image-20220321101446019" style="zoom:67%;" /><blockquote><ul><li>Peer IP Protocol : å¯¹ç­‰ IP åè®®</li><li>Peer Vlan ï¼š å¯¹ç­‰ VLAN</li><li>Peer remote address ï¼š å¯¹ç­‰è¿œç¨‹åœ°å€</li><li>Peer local address ï¼š å¯¹ç­‰æœ¬åœ°åœ°å€</li><li>Peer remote port ï¼š å¯¹ç­‰è¿œç¨‹ç«¯å£</li><li>Peer local port ï¼š å¯¹ç­‰æœ¬åœ°ç«¯å£</li></ul></blockquote><p><strong>ï¼ˆ4ï¼‰<code>:nnnp</code></strong></p><p><code>:nnnp</code> æ•è·ä¸è¿‡æ»¤æ¡ä»¶ç›¸å…³çš„ F5 çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„æµé‡ã€‚</p><p>â€‹ä¾‹å¦‚ï¼šè™šæ‹ŸæœåŠ¡åœ°å€ä¸º 10.1.20.103ï¼Œæ± æˆå‘˜æ˜¯ 10.1.10.7ï¼Œä¸»æœºIPåœ°å€ä¸º 10.1.20.103ï¼Œåˆ™å¯ä»¥æ•è·åœ°å€ 10.1.20.103 å³å¯å¾—åˆ°ä»å®¢æˆ·ç«¯åˆ°æ± æˆå‘˜çš„æ‰€æœ‰æµé‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -i 0.0:nnnp host 10.1.20.103</span></span><br></pre></td></tr></table></figure><h3 id="3ã€-n">3ã€<code>-n</code></h3><p>ä½¿ç”¨ <code>tcpdump -n</code> ç¦ç”¨ä¸»æœºåçš„åç§°è§£æï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -n -i 0.0</span></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on 0.0, link-type EN10MB (Ethernet), capture size 65535 bytes</span><br><span class="line">16:26:40.396534 IP 192.168.10.84.icl-twobase5 &gt; 192.168.10.223.syslog: [|syslog] out slot1/tmm1 lis=</span><br></pre></td></tr></table></figure><h3 id="4ã€-nn">4ã€<code>-nn</code></h3><p>ä½¿ç”¨ <code>tcpdump -nn</code> ç¦ç”¨ä¸»æœºåå’Œç«¯å£åçš„åç§°è§£æï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -nn -i 0.0</span></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on 0.0, link-type EN10MB (Ethernet), capture size 65535 bytes</span><br><span class="line">16:26:40.396534 IP 192.168.10.84.icl-twobase5 &gt; 192.168.10.223.syslog: [|syslog] out slot1/tmm1 lis=</span><br></pre></td></tr></table></figure><h3 id="5ã€-X">5ã€<code>-X</code></h3><p>ä½¿ç”¨ <code>tcpdump -X</code> æ˜¾ç¤ºåŒ…æ‹¬ ASCII å’Œåå…­è¿›åˆ¶çš„è¾“å‡ºã€‚è¿™å°†ä½¿é˜…è¯»å±å¹•è¾“å‡ºæ›´å®¹æ˜“ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@bigip2:LICENSE EXPIRES IN 5 DAYS:Active:Standalone] config <span class="comment"># tcpdump -X -i 0.0</span></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on 0.0, link-type EN10MB (Ethernet), capture size 65535 bytes</span><br><span class="line">16:24:29.148469 IP bigip2.com.24874 &gt; 192.168.10.223.syslog: [|syslog] out slot1/tmm1 lis=</span><br><span class="line">0x0000:  4500 005a 00f0 4000 ff11 e41e c0a8 0a54  E..Z..@........T</span><br><span class="line">0x0010:  c0a8 0adf 612a 0202 0046 96db 5463 7064  ....a*...F..Tcpd</span><br><span class="line">0x0020:  756d 7020 7374 6172 7469 6e67 206c 6f63  ump.starting.loc</span><br><span class="line">0x0030:  616c 6c79 206f 6e20 3132 372e 312e 312e  ally.on.127.1.1.</span><br><span class="line">0x0040:  323a 3220 6672 6f6d 2031 3237 2e31 2e31  2:2.from.127.1.1</span><br><span class="line">0x0050:  2e32 3534 3a35 3433 3831 f5de b0f5 0014  .254:54381......</span><br><span class="line">0x0060:  0001 0001 0001 000c 0003 0000 0100       ..............</span><br></pre></td></tr></table></figure><h3 id="5ã€-w">5ã€<code>-w</code></h3><p>ä½¿ç”¨ <code>tcpdump -w</code> å°†æ•°æ®åŒ…æ•è·å†™å…¥<code>/var/tmp/bigip1.pcap</code>æ–‡ä»¶ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -nn -i 0.0  -w /var/tmp/bigip1.pcap</span></span><br><span class="line">tcpdump: listening on 0.0, link-type EN10MB (Ethernet), capture size 65535 bytes</span><br><span class="line">^C276 packets captured</span><br><span class="line">276 packets received by filter</span><br><span class="line">0 packets dropped by kernel</span><br></pre></td></tr></table></figure><h3 id="6ã€-s">6ã€<code>-s</code></h3><p>ä½¿ç”¨<code>tcpdump -s0</code>æ•è·å®Œæ•´çš„æ•°æ®åŒ…ã€‚<code>s</code>åé¢çš„æ•°å­—è¡¨ç¤ºè¦æ•è·çš„æ¯ä¸ªæ•°æ®åŒ…çš„ä½æ•°ã€‚<code>0</code>è¡¨ç¤ºå…¨éƒ¨ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -nn -i 0.0 -s0</span></span><br></pre></td></tr></table></figure><h3 id="7ã€-C">7ã€<code>-C</code></h3><p>ä½¿ç”¨<code>tcpdump -C</code>æ•è·æ•°æ®åŒ…å¤§å°ï¼Œå•ä½ä¸ºMã€‚ä¸€èˆ¬ä¸<code>-W</code>é…åˆä½¿ç”¨ï¼Œå¦åˆ™åˆ°æŠ“åŒ…æ–‡ä»¶åˆ°<code>-C</code>æŒ‡å®šå¤§å°ï¼Œä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶ã€‚</p><h3 id="8ã€-W">8ã€<code>-W</code></h3><p>ä½¿ç”¨ -W å¼€å…³å†™å…¥å¤šä¸ªæ–‡ä»¶ã€‚ä¸æ–‡ä»¶å¤§å°çš„ -C ç»“åˆä½¿ç”¨ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†è½®æ¢ 4 ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¸º 50 Mbã€‚ç¬¬å››ä¸ªæ–‡ä»¶å®Œæˆåï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å°†è¢«åˆ é™¤ï¼Œå¹¶å†™å…¥ä¸€ä¸ªæ–°æ–‡ä»¶å¹¶ç»§ç»­ï¼Œç›´åˆ°æ•è·åœæ­¢ã€‚å½“ä¸æ¸…æ¥šäº‹ä»¶ä½•æ—¶å‘ç”Ÿå¹¶ä¸”æ‚¨å¯ä»¥åœ¨å¶æ•°å‘ç”Ÿåä¸ä¹…åœæ­¢æ—¶ï¼Œè¿™æ˜¯å¾ªç¯æ—¥å¿—è®°å½•çš„ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -W 4 -C 50 -w /var/tmp/file.pcap</span><br></pre></td></tr></table></figure><h3 id="9ã€-r">9ã€<code>-r</code></h3><p>ä½¿ç”¨tcpdump -r &lt;æ–‡ä»¶å&gt;è¯»å–æ–‡ä»¶ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -r /var/tmp/file.pcap</span><br></pre></td></tr></table></figure><h3 id="10ã€-v-vv-vvv">10ã€<code>-v -vv -vvv</code></h3><p>-v ï¼šåœ¨è§£æå’Œæ‰“å°æ—¶ï¼Œç”Ÿæˆï¼ˆç¨å¾®å¤šä¸€äº›ï¼‰è¯¦ç»†çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œæ‰“å°IPæ•°æ®åŒ…ä¸­çš„ç”Ÿå­˜æ—¶é—´ã€æ ‡è¯†ã€æ€»é•¿åº¦å’Œé€‰é¡¹ã€‚è¿˜æ”¯æŒå…¶ä»–æ•°æ®åŒ…å®Œæ•´æ€§æ£€æŸ¥ï¼Œä¾‹å¦‚éªŒè¯IPå’ŒICMPæŠ¥å¤´æ ¡éªŒå’Œã€‚</p><p>ä½¿ç”¨-wé€‰é¡¹å†™å…¥æ–‡ä»¶æ—¶ï¼Œæ¯10ç§’æŠ¥å‘Šæ•è·çš„æ•°æ®åŒ…æ•°ã€‚</p><p>-vvï¼šæ›´è¯¦ç»†çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä»NFSå›å¤æ•°æ®åŒ…æ‰“å°é™„åŠ å­—æ®µï¼Œå¹¶å¯¹SMBæ•°æ®åŒ…è¿›è¡Œå®Œå…¨è§£ç ã€‚</p><p>-vvvï¼šè¾“å‡ºæ›´åŠ è¯¦ç»†ã€‚ä¾‹å¦‚ï¼Œtelnet SBã€‚SEé€‰é¡¹å…¨éƒ¨æ‰“å°ã€‚ä½¿ç”¨-X Telnetæ—¶ï¼Œé€‰é¡¹ä¹Ÿä»¥åå…­è¿›åˆ¶æ‰“å°ã€‚</p><h2 id="äºŒã€è¿‡æ»¤æ¡ä»¶">äºŒã€è¿‡æ»¤æ¡ä»¶</h2><h3 id="1ã€host">1ã€host</h3><p>â€‹æ•è·ä¸»æœºåœ°å€ç›¸å…³æŠ¥æ–‡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump host 192.168.2.5</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ1ï¼‰src host</strong></p><p>â€‹æ•è·æŒ‡å®šåœ°å€ç›¸å…³æŠ¥æ–‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump src host 192.168.2.5</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰dst host</strong></p><p>â€‹æ•è·æŒ‡å®šç›®çš„åœ°å€ç›¸å…³æŠ¥æ–‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump dst host 192.168.2.5</span><br></pre></td></tr></table></figure><h3 id="2ã€port">2ã€port</h3><p>â€‹æ•è·æŒ‡å®šç«¯å£ç›¸å…³æŠ¥æ–‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump host 192.168.2.5</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ1ï¼‰src post</strong></p><p>â€‹æ•è·æŒ‡å®šæºç«¯å£ç›¸å…³æŠ¥æ–‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump src host 192.168.2.5</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰dst host</strong></p><p>â€‹æ•è·æŒ‡å®šç›®çš„ç«¯å£ç›¸å…³æŠ¥æ–‡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump dst host 192.168.2.5</span><br></pre></td></tr></table></figure><h3 id="3ã€tcp-flag">3ã€tcp flag</h3><p>(1) è¦æŸ¥çœ‹é€šè¿‡ BIG-IP ç³»ç»Ÿä¼ è¾“å¹¶åŒ…å« SYN æ ‡å¿—çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œè¯·é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump <span class="string">&#x27;tcp[tcpflags] &amp; (tcp-syn) != 0&#x27;</span></span><br></pre></td></tr></table></figure><p>(2) è‹¥è¦æŸ¥çœ‹é€šè¿‡ BIG-IP ç³»ç»Ÿä¼ è¾“å¹¶åŒ…å« RST æ ‡å¿—çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œè¯·é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump <span class="string">&#x27;tcp[tcpflags] &amp; (tcp-rst) != 0&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å‚è€ƒæ–‡æ¡£">ä¸‰ã€å‚è€ƒæ–‡æ¡£</h2><p><a href="https://support.f5.com/csp/article/K411">Overview of packet tracing with the tcpdump utility (f5.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> tcpdump </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 HTTPS è¯ä¹¦å¸è½½</title>
      <link href="/posts/53154f0bfb79.html"/>
      <url>/posts/53154f0bfb79.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šå®¢æˆ·ç«¯è®¿é—® F5 è™šæ‹ŸæœåŠ¡ï¼Œé€šè¿‡ F5 è™šæ‹ŸæœåŠ¡åšè¯ä¹¦å¸è½½ï¼ŒæŠŠæ˜æ–‡ä¿¡æ¯ä¼ é€’ç»™åç«¯æœåŠ¡å™¨ï¼Œå‡å°æœåŠ¡å™¨çš„å‹åŠ›ã€‚</strong></p><h2 id="ä¸€ã€ç¯å¢ƒä»‹ç»ğŸŒ»">ä¸€ã€ç¯å¢ƒä»‹ç»ğŸŒ»</h2><h3 id="1ã€å‰æœŸå‡†å¤‡">1ã€å‰æœŸå‡†å¤‡</h3><blockquote><p>ğŸƒ F5 LTM ç¯å¢ƒ</p><p>ğŸƒ æœåŠ¡å™¨è¯ä¹¦å’Œç§é’¥</p></blockquote><h3 id="2ã€å®éªŒæ‹“æ‰‘">2ã€å®éªŒæ‹“æ‰‘</h3><p><img src="https://cdn.whbblog.cn/img/image-20220317153844717.png" alt="image-20220317153844717"></p><h2 id="äºŒã€F5-é…ç½®æ­¥éª¤ğŸ¥">äºŒã€F5 é…ç½®æ­¥éª¤ğŸ¥</h2><h3 id="1ã€è¯ä¹¦å’Œç§é’¥ä¸Šä¼ è‡³-F5">1ã€è¯ä¹¦å’Œç§é’¥ä¸Šä¼ è‡³ F5</h3><p>å¯¼èˆªè‡³ <code>System  â€ºâ€º  Certificate Management : Traffic Certificate Management : SSL Certificate List</code> è·¯å¾„ï¼Œç‚¹å‡»<code>Import</code>è¿›è¡Œè¯ä¹¦å’Œç§é’¥å¯¼å…¥ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220317155142223.png" alt="image-20220317155142223"></p><h4 id="ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦">ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦</h4><blockquote><p>Import Type : Certificate   é€‰æ‹© Certificate ç±»å‹è¿›è¡Œè¯ä¹¦å¯¼å…¥ã€‚</p><p>Certificate Name ï¼š testwhbblog   è¾“å…¥è¯ä¹¦åç§°</p><p>Certificate Source ï¼š é€‰æ‹©è¯ä¹¦ä¸Šä¼ ï¼Œä¹Ÿå¯ä»¥ç²˜è´´æ–‡æœ¬</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220317155448786.png" alt="image-20220317155448786"></p><h4 id="ï¼ˆ2ï¼‰ä¸Šä¼ ç§é’¥">ï¼ˆ2ï¼‰ä¸Šä¼ ç§é’¥</h4><blockquote><p>Import Type : Key   é€‰æ‹© Key ç±»å‹è¿›è¡Œç§é’¥å¯¼å…¥ã€‚</p><p>Certificate Name ï¼š testwhbblog   è¾“å…¥ç§é’¥åç§°ï¼Œå’Œè¯ä¹¦åç§°ä¿æŒä¸€è‡´</p><p>Certificate Source ï¼š é€‰æ‹©ç§é’¥ä¸Šä¼ ï¼Œä¹Ÿå¯ä»¥ç²˜è´´æ–‡æœ¬</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220317160427831.png" alt="image-20220317160427831"></p><h2 id="2ã€åˆ›å»º-Client-SSL-Profile">2ã€åˆ›å»º  Client SSL Profile</h2><p>å¯¼èˆªè‡³ <code>Local Traffic  â€ºâ€º  Profiles : SSL : Client</code> è·¯å¾„ï¼Œç‚¹å‡» <code>Create</code> è¿›è¡Œ <code>Client SSL Profile</code> åˆ›å»ºã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220317170901484.png" alt="image-20220317170901484"></p><h3 id="ï¼ˆ1ï¼‰é…ç½®-Client-SSL-Profile">ï¼ˆ1ï¼‰é…ç½® Client SSL Profile</h3><blockquote><p>Name : è¾“å…¥ Client SSL Profile åç§°</p><p>Parent Profile ï¼š é€‰æ‹© clientssl</p><p>Certificate Key Chain ï¼š é€‰æ‹©è¯ä¹¦ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220317171256897.png" alt="image-20220317171256897"></p><p><strong>æ·»åŠ è¯ä¹¦</strong></p><img src="https://cdn.whbblog.cn/img/image-20220317171213303.png" alt="image-20220317171213303" style="zoom:67%;" /><h3 id="3ã€åˆ›å»º-Pool">3ã€åˆ›å»º Pool</h3><blockquote><p>Name : Poolåç§°</p><p>Health Monitor : é€‰æ‹©å¥åº·æ£€æŸ¥æ–¹å¼</p><p>New Members ï¼š è¾“å…¥åç«¯æœåŠ¡ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220317172013057.png" alt="image-20220317172013057"></p><h3 id="4ã€åˆ›å»º-Virtual-Server">4ã€åˆ›å»º Virtual Server</h3><blockquote><p>Name ï¼š è™šæ‹ŸæœåŠ¡åç§°</p><p>TYPE ï¼š è™šæ‹ŸæœåŠ¡ç±»å‹ï¼Œè¿™é‡Œéœ€è¦é€‰æ‹© Standard ç±»å‹ã€‚</p><p>Destination Address/Mask ï¼š è™šæ‹ŸæœåŠ¡åœ°å€ã€‚</p><p>Service Port ï¼š è™šæ‹ŸæœåŠ¡åœ°å€æä¾›çš„æœåŠ¡ç«¯å£ã€‚</p><p>SSL Profileï¼ˆClientï¼‰ï¼šå®¢æˆ·ç«¯è¯ä¹¦å¸è½½é…ç½®æ–‡ä»¶ã€‚</p><p>Source Address Translate ï¼š Auto Mapï¼ˆæ ¹æ®æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼‰ã€‚</p><p>Default Pool ï¼š åç«¯æœåŠ¡å™¨èµ„æºæ± ã€‚</p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220318103713696.png" alt="image-20220318103713696"></p><p><img src="https://cdn.whbblog.cn/img/image-20220317172837761.png" alt="image-20220317172837761"></p><h2 id="ä¸‰ã€éªŒè¯æµ‹è¯•ğŸ‰">ä¸‰ã€éªŒè¯æµ‹è¯•ğŸ‰</h2><h3 id="1ã€ä¿®æ”¹-Hostsæ–‡ä»¶">1ã€ä¿®æ”¹ Hostsæ–‡ä»¶</h3><p>ç”±äºæµ‹è¯•ç¯å¢ƒé—®æœ¬åœ°å†…ç½‘ç¯å¢ƒï¼Œæµ‹è¯•æ—¶ä¿®æ”¹<code>hosts</code>æ–‡ä»¶ï¼Œå¢åŠ å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.10.100 test.whbblog.cn</span><br></pre></td></tr></table></figure><h2 id="2ã€è®¿é—®æµ‹è¯•">2ã€è®¿é—®æµ‹è¯•</h2><p><img src="https://cdn.whbblog.cn/img/image-20220318105019140.png" alt="image-20220318105019140"></p><p>æµ‹è¯•å®Œæˆï¼Œç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®</p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> HTTPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 NTP æ•…éšœæ’æŸ¥</title>
      <link href="/posts/2f3804aa035a.html"/>
      <url>/posts/2f3804aa035a.html</url>
      
        <content type="html"><![CDATA[<p>â€‹<strong>BIG-IPç³»ç»Ÿæ—¶é’Ÿæœªæ˜¾ç¤ºæ­£ç¡®çš„æ—¶åŒºï¼Œæˆ–æ—¥æœŸå’Œæ—¶é—´æœªæ­£ç¡®åŒæ­¥ï¼Œå¯èƒ½æ˜¯ç”±äºNTPé…ç½®ä¸æ­£ç¡®æˆ–ä¸æœ‰æ•ˆNTPå¯¹ç­‰æœåŠ¡å™¨çš„é€šä¿¡é—®é¢˜é€ æˆçš„ã€‚æœ¬æ–‡ä¸­çš„è¿‡ç¨‹å±•ç¤ºäº†å¦‚ä½•æ£€æŸ¥NTPå®ˆæŠ¤è¿›ç¨‹ã€éªŒè¯NTPé…ç½®ã€æŸ¥è¯¢NTPå¯¹ç­‰æœåŠ¡å™¨ï¼Œä»¥åŠæ£€æŸ¥åˆ°NTPå¯¹ç­‰æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥ã€‚</strong></p><h2 id="1ã€éªŒè¯-NTP-å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦æ­£å¸¸ğŸ¸">1ã€éªŒè¯ NTP å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦æ­£å¸¸ğŸ¸</h2><p>â€‹éªŒè¯ NTP å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦æ­£å¸¸ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¦‚æœå‡ºç°active(running)åˆ™è¿›ç¨‹æ­£åœ¨æ­£å¸¸è¿è¡Œã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tmsh show sys service ntpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£å¸¸è¿è¡Œè¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">* ntpd.service - start and stop ntpd</span><br><span class="line">   Loaded: loaded (/etc/rc.d/init.d/ntpd; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Sun 2022-03-06 17:48:45 CST; 1 weeks 0 days ago</span><br><span class="line">  Process: 4031 ExecStart=/etc/rc.d/init.d/ntpd start (code=exited, status=0/SUCCESS)</span><br><span class="line">   CGroup: /system.slice/ntpd.service</span><br><span class="line">           `-4052 ntpd -g</span><br><span class="line"><span class="comment"># æœªæ­£å¸¸è¿è¡Œè¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">Warning: Journal has been rotated since unit was started. Log output is incomplete or unavailable.</span><br></pre></td></tr></table></figure><p>â€‹å¦‚æœè¿›ç¨‹æœªæ­£å¸¸è¿è¡Œï¼Œè¾“å‡º NTP é€šä¿¡è¿æ¥æ—¶ï¼Œåˆ™è¾“å‡ºå¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ntpq -p</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼‚å¸¸è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">ntpq: <span class="built_in">read</span>: Connection refused</span><br></pre></td></tr></table></figure><h2 id="2ã€éªŒè¯-NTP-é…ç½®ğŸ¢">2ã€éªŒè¯ NTP é…ç½®ğŸ¢</h2><p><strong>ï¼ˆ1ï¼‰F5 GUI æŸ¥çœ‹ NTP é…ç½®</strong></p><p>â€‹å¯¼èˆªè‡³<code>System  â€ºâ€º  Configuration : Device : NTP</code>è·¯å¾„ä¸‹ï¼ŒæŸ¥çœ‹ NTP åœ°å€æ˜¯å¦æ­£ç¡®ã€‚</p><img src="https://cdn.whbblog.cn/img/image-20220313210542977.png" alt="image-20220313210542977" style="zoom:67%;" /><p><strong>ï¼ˆ2ï¼‰F5 CLI æŸ¥çœ‹ NTP é…ç½®</strong></p><p>é€šè¿‡å‘½ä»¤è¡Œç™»å½• F5 ï¼Œ æ£€æµ‹ NTP é…ç½®æ˜¯å¦æ­£å¸¸ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tmsh list sys ntp servers </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºé…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</span></span><br><span class="line">sys ntp &#123;</span><br><span class="line">    servers &#123; 1.1.1.2 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€éªŒè¯-BIG-IP-ç³»ç»Ÿä¸-NTP-å¯¹ç­‰æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ğŸ³">3ã€éªŒè¯ BIG-IP ç³»ç»Ÿä¸ NTP å¯¹ç­‰æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ğŸ³</h2><p>â€‹è¦ BIG-IP ç³»ç»Ÿä¸ NTP å¯¹ç­‰æœåŠ¡å™¨é€šä¿¡ï¼Œè¯·è¾“å…¥å‘½ä»¤: <code>ntpq -np</code>ï¼Œè¾“å‡ºå‚æ•°è§£é‡Šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>remote</strong></td><td>è¿œç¨‹ NTP æœåŠ¡å™¨çš„åœ°å€</td></tr><tr><td><strong>refid</strong></td><td>ç”¨äºåŒæ­¥çš„ä¸‹ä¸€ä¸ªè¾ƒä½å±‚æœåŠ¡å™¨çš„åœ°å€</td></tr><tr><td><strong>st</strong></td><td>è¿œç¨‹å¯¹ç­‰å±‚ã€‚ä¸»æœåŠ¡å™¨ï¼ˆå¸¦æœ‰å¤–éƒ¨å‚è€ƒæ—¶é’Ÿï¼ˆå¦‚GPSï¼‰çš„æœåŠ¡å™¨ï¼‰è¢«åˆ†é…åˆ°ç¬¬1å±‚ã€‚ä¸ç¬¬1å±‚æœåŠ¡å™¨åŒæ­¥çš„è¾…åŠ©NTPæœåŠ¡å™¨è¢«åˆ†é…ç»™ç¬¬2å±‚ã€‚ä¸ç¬¬2å±‚æœåŠ¡å™¨åŒæ­¥çš„æ¬¡è¦NTPæœåŠ¡å™¨è¢«åˆ†é…ç»™ç¬¬3å±‚ã€‚åœ°å±‚16è¢«ç§°ä¸º<strong>MAXSTRAT</strong>ï¼Œé€šå¸¸è¢«æ˜ å°„åˆ°åœ°å±‚å€¼0ï¼Œå› æ­¤è¡¨ç¤ºå®ƒä¸åŒæ­¥ã€‚ç¬¬17å±‚è‡³255å±‚ä¸ºä¿ç•™å±‚ã€‚</td></tr><tr><td><strong>t</strong></td><td>è¿œç¨‹ NTP ç±»å‹ï¼šæœ¬åœ°ã€å•æ’­ã€å¤šæ’­æˆ–å¹¿æ’­ã€‚</td></tr><tr><td><strong>when</strong></td><td>è‡ªä¸Šæ¬¡æ”¶åˆ°è½®è¯¢å“åº”ä»¥æ¥çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</td></tr><tr><td><strong>poll</strong></td><td>è½®è¯¢é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚è¯¥å€¼å¼€å§‹æ—¶è¾ƒä½ï¼ˆç¤ºä¾‹ï¼š64ï¼‰ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¦‚æœæœªæ£€æµ‹åˆ°ä»»ä½•æ›´æ”¹ï¼Œåˆ™è¯¥è½®è¯¢å€¼å°†é€’å¢è‡³é…ç½®çš„æœ€å¤§è½®è¯¢å€¼ï¼ˆç¤ºä¾‹ï¼š1024ï¼‰ã€‚</td></tr><tr><td><strong>reach</strong></td><td>å¯è¾¾æ€§å¯„å­˜å™¨ã€‚å…«è¿›åˆ¶ç§»ä½å¯„å­˜å™¨è®°å½•æœ€è¿‘å…«æ¬¡è½®è¯¢å°è¯•çš„ç»“æœã€‚</td></tr><tr><td><strong>delay</strong></td><td>å½“å‰ä¼°è®¡çš„å»¶è¿Ÿï¼Œå³è¿™äº› NTP æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</td></tr><tr><td><strong>offset</strong></td><td>å½“å‰ä¼°è®¡çš„åç§»é‡ï¼Œå³è¿™äº› NTP æœåŠ¡å™¨ä¹‹é—´çš„æ—¶é—´å·®ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td></tr><tr><td><strong>jitter</strong></td><td>å½“å‰ä¼°è®¡çš„ç¦»æ•£åº¦ï¼Œå³è¿™äº› NTP æœåŠ¡å™¨ä¹‹é—´çš„å»¶è¿Ÿå˜åŒ–ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td></tr></tbody></table><p><strong>NTPæœåŠ¡è¿æ¥å¼‚å¸¸ç¤ºä¾‹ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ntpq -np</span></span><br><span class="line">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class="line">==============================================================================</span><br><span class="line"> 1.1.1.2         .INIT.          16 u    -   64    0    0.000    0.000   0.000</span><br></pre></td></tr></table></figure><p><strong>NTPæœåŠ¡è¿æ¥æ­£å¸¸ç¤ºä¾‹ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># ntpq -np</span></span><br><span class="line">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class="line">==============================================================================</span><br><span class="line">*114.118.7.163   123.139.33.3     2 u   42   64  357    6.240   20.008   6.171</span><br></pre></td></tr></table></figure><h2 id="4ã€æŠ“åŒ…åˆ†æğŸ¦–">4ã€æŠ“åŒ…åˆ†æğŸ¦–</h2><p>â€‹é€šè¿‡æŠ“åŒ…æ¥åˆ†æï¼Œæ˜¯å¦å‘é€äº†åŒæ­¥è¯·æ±‚ï¼Œä»¥åŠæ˜¯å¦æ”¶åˆ°äº† NTP æœåŠ¡å™¨çš„å“åº”ï¼ŒæŠ“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tcpdump -nni 0.0:nnnp -s0 -vvv port 123 and udp</span></span><br></pre></td></tr></table></figure><h2 id="5ã€å‚è€ƒæ–‡æ¡£ğŸŸ">5ã€å‚è€ƒæ–‡æ¡£ğŸŸ</h2><p>[button color=â€œprimaryâ€ url=â€œ<a href="https://support.f5.com/csp/article/K10240">https://support.f5.com/csp/article/K10240</a>â€ outline=â€œâ€ target=â€œ_blankâ€]1ï¸âƒ£ Verifying NTP peer server communications[/button]</p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> NTP </tag>
            
            <tag> æ•…éšœå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 é…ç½® DNS è§£ææ—¥å¿—</title>
      <link href="/posts/92717defa17f.html"/>
      <url>/posts/92717defa17f.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç”¨æˆ·æƒ³è¦ç»Ÿè®¡ F5 DNS è§£æèµ„æºè®°å½•ç»“æœï¼Œéœ€è¦é…ç½® F5 DNS è®°å½•è¯·æ±‚è§£æå’Œå“åº”ç»“æœåˆ°æ—¥å¿—ä¸­ã€‚</strong></p><hr><h2 id="1ã€åˆ›å»º-Log-PublishersğŸ¿ï¸">1ã€åˆ›å»º Log PublishersğŸ¿ï¸</h2><p>â€‹å¯¼èˆªè‡³<code>System  â€ºâ€º  Logs : Configuration : Log Publishers</code>è·¯å¾„ï¼Œæ–°å»º <code>Log Publishers</code> ï¼Œä»¥å°†æ—¥å¿—å‘é€åˆ°ä¸€ç»„æŒ‡å®šçš„æ—¥å¿—ç›®æ ‡ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŠŠæ—¥å¿—å‘é€è‡³<code>local-syslog</code>ä¸­ã€‚</p><img src="https://cdn.whbblog.cn/img/image-20220313160953779.png" alt="image-20220313160953779" style="zoom:67%;" /><h2 id="2ã€åˆ›å»º-DNS-Logging-ProfileğŸ‡">2ã€åˆ›å»º DNS Logging ProfileğŸ‡</h2><p>â€‹å¯¼èˆªè‡³<code>DNS  â€ºâ€º  Delivery : Profiles : Other : DNS Logging</code>è·¯å¾„ï¼Œæ–°å»º DNS æ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œå¹¶å…³è”ä¸Šä¸€æ­¥åˆ›å»ºçš„<code>Log Publisher</code>.</p><img src="https://cdn.whbblog.cn/img/image-20220313202019788.png" alt="image-20220313202019788" style="zoom:67%;" /><h2 id="3ã€åˆ›å»º-DNS-ProfileğŸ¦¥">3ã€åˆ›å»º DNS ProfileğŸ¦¥</h2><p>â€‹å¯¼èˆªè‡³<code>DNS  â€ºâ€º  Delivery : Profiles : DNS</code>è·¯å¾„ï¼Œæ–°å»º DNS é…ç½®æ–‡ä»¶ï¼Œå¹¶é€‰æ‹©ä¸Šä¸€æ­¥åˆ›å»ºçš„<code>Logging Profile</code>.</p><img src="https://cdn.whbblog.cn/img/image-20220313202915830.png" alt="image-20220313202915830" style="zoom: 80%;" /><h2 id="4ã€åˆ›å»º-ListenersğŸ¦˜">4ã€åˆ›å»º ListenersğŸ¦˜</h2><p>â€‹å¯¼èˆªè‡³<code>DNS  â€ºâ€º  Delivery : Listeners : Listener List</code>è·¯å¾„ï¼Œåˆ›å»º<code>DNS Listener</code>ï¼Œå¹¶å…³è”ä¸Šä¸€æ­¥åˆ›å»ºçš„<code>DNS Profile</code>ã€‚</p><img src="https://cdn.whbblog.cn/img/image-20220313203331507.png" alt="image-20220313203331507" style="zoom:67%;" /><h2 id="5ã€DNS-è§£ææµ‹è¯•ğŸ">5ã€DNS è§£ææµ‹è¯•ğŸ</h2><p><strong>æ³¨ï¼šè§£ææ—¥å¿—å­˜å‚¨åœ¨<code>/var/log/ltm</code>ä¸­</strong></p><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><p><img src="https://cdn.whbblog.cn/img/image-20220310154158461.png" alt="image-20220310154158461"></p><p><strong>Event è¯·æ±‚æ ¼å¼ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2022-03-10 15:40:39 bigip1.com from 192.168.10.222<span class="comment">#21919: view none: query: app.example.choerodon.io IN A +E (192.168.10.83%0)</span></span><br><span class="line"></span><br><span class="line">2022-03-10 15:40:39 : è¯·æ±‚æ—¶é—´æˆ³</span><br><span class="line">bigip1.com ï¼š è¯·æ±‚ä¸»æœº</span><br><span class="line">from ï¼š æ¥æº</span><br><span class="line">192.168.10.222<span class="comment">#21919 ï¼š æ¥æºåœ°å€#ç«¯å£å·</span></span><br><span class="line">view none ï¼š viewè§†å›¾ç©º</span><br><span class="line">query ï¼š è¯·æ±‚</span><br><span class="line">app.example.choerodon.io ï¼š è¯·æ±‚åŸŸå</span><br><span class="line">IN ï¼š Internet</span><br><span class="line">A ï¼š Aè®°å½•</span><br><span class="line">192.168.10.83%0 ï¼š Listenerç›‘å¬åœ°å€</span><br></pre></td></tr></table></figure><p><strong>Event å“åº”æ ¼å¼ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">2022-03-10 15:40:39 bigip1.com to 192.168.10.222<span class="comment">#21919: [NOERROR qr,aa,rd,ra] response: app.example.choerodon.io. 60 IN A 192.168.30.136;</span></span><br><span class="line"></span><br><span class="line">2022-03-10 15:40:39 : è¯·æ±‚æ—¶é—´æˆ³</span><br><span class="line">bigip1.com ï¼š è¯·æ±‚ä¸»æœº</span><br><span class="line">to ï¼š å»å¾€</span><br><span class="line">192.168.10.222<span class="comment">#21919 ï¼š å‘é€è‡³åœ°å€#ç«¯å£å·</span></span><br><span class="line">[NOERROR qr,aa,rd,ra] ï¼šflags æ ‡å¿— ï¼Œæ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·è§[DNSæŠ¥æ–‡è¯¦è§£][1]</span><br><span class="line">NOERROR ï¼š å“åº”ç ä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰é”™è¯¯ã€‚</span><br><span class="line">qr(Response) ï¼š æŸ¥è¯¢/å“åº”çš„æ ‡å¿—ä½</span><br><span class="line">aa(Authoritative) ï¼š æˆæƒåº”ç­”æ ‡å¿—ä½ã€‚</span><br><span class="line">rd(Recursion desired) ï¼š æœŸæœ›é€’å½’æ ‡å¿—ä½</span><br><span class="line">ra(Recursion available) ï¼š å¯ç”¨é€’å½’æ ‡å¿—ä½</span><br><span class="line">response ï¼š å“åº”</span><br><span class="line">app.example.choerodon.io ï¼š å“åº”åŸŸå</span><br><span class="line">60 ï¼š TTL</span><br><span class="line">IN ï¼š Internet</span><br><span class="line">A ï¼š Aè®°å½•</span><br><span class="line">192.168.30.136 ï¼šè¿”å›Aè®°å½•ç»“æœ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> DNS </tag>
            
            <tag> GTM </tag>
            
            <tag> LOG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 æ•…éšœè½¬ç§»æœºåˆ¶</title>
      <link href="/posts/12c83ab92c98.html"/>
      <url>/posts/12c83ab92c98.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ•…éšœè½¬ç§»æ–¹å¼â˜˜ï¸">ä¸€ã€æ•…éšœè½¬ç§»æ–¹å¼â˜˜ï¸</h2><p><strong>æ•…éšœè½¬ç§»æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç½‘ç»œæ•…éšœè½¬ç§»ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ Failover å¿ƒè·³çº¿æ•…éšœè½¬ç§»ã€‚</strong></p><h3 id="1ã€ç½‘ç»œæ•…éšœè½¬ç§»">1ã€ç½‘ç»œæ•…éšœè½¬ç§»</h3><p>ç½‘ç»œæ•…éšœè½¬ç§»åŸºäºå¿ƒè·³ä¿¡å·æ£€æµ‹ï¼Œä¸»å¤‡è®¾å¤‡ä½¿ç”¨ Failover åœ°å€å‘é€ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³ä¿¡å·æ•°æ®åŒ…ã€‚</p><h4 id="ï¼ˆ1ï¼‰-Failover-åœ°å€é…ç½®">ï¼ˆ1ï¼‰ Failover åœ°å€é…ç½®</h4><p>å¯¼èˆªè‡³ <code>Device Management  â€ºâ€º  Devices  â€ºâ€º</code>ï¼Œé€‰æ‹©è®¾å¤‡ï¼Œç‚¹å‡» <code>Failover Network</code> è¿›è¡Œ <code>Failover åœ°å€</code>é…ç½®ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220312183123212.png" alt="image-20220312183123212"></p><blockquote><p><strong>é…ç½®å»ºè®®ï¼š</strong></p><ul><li><p>1ï¸âƒ£ è‹¥è¦ç¡®ä¿æœ€ç¨³å®šçš„ç½‘ç»œæ•…éšœè½¬ç§»é…ç½®ï¼Œè¯·é€‰æ‹©ä¸¤ä¸ªé€šé“è¿›è¡Œç½‘ç»œæ•…éšœè½¬ç§»é€šä¿¡ã€‚F5 è®¤ä¸ºæœ€ä½³åšæ³•æ˜¯åŒæ—¶é€‰æ‹©ç®¡ç†åœ°å€å’Œ TMM ç½‘ç»œåœ°å€ã€‚é¿å…åœ¨ BIG-IP ç³»ç»Ÿåˆå§‹åŒ–æ—¶ä»¥åŠåœ¨å®Œå…¨å»ºç«‹ TMM ç½‘ç»œè¿æ¥é€šé“ä¹‹å‰å‡ºç°æ„å¤–çš„æ•…éšœè½¬ç§»æƒ…å†µã€‚ä¸ºæ­¤ï¼Œå¿…é¡»é…ç½®ç®¡ç†å’Œ TMM æ•…éšœè½¬ç§»å•æ’­åœ°å€ã€‚</p></li><li><p>2ï¸âƒ£ ç¡®ä¿å·²ä¸º DSC ç»„æˆå‘˜ä¹‹é—´çš„æ­£ç¡®æ—¶é—´åŒæ­¥é…ç½®äº†å¯é çš„ NTP æœåŠ¡å™¨ã€‚</p></li><li><p>3ï¸âƒ£ åœ¨éƒ¨ç½²ç½‘ç»œæ•…éšœè½¬ç§»ä¹‹å‰ï¼Œè‹¥è¦ç¡®ä¿é¢„æœŸç½‘ç»œçš„å¯é æ€§ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å»ºè®®ï¼š</p><ul><li><p>ç¡®ä¿æ‚¨æœ‰æƒè®¿é—®å’Œæ§åˆ¶ä¸´æ—¶è®¾å¤‡ï¼Œä»¥åŠ BIG-IP ç³»ç»Ÿä¹‹é—´çš„é“¾æ¥ã€‚</p></li><li><p>æµ‹è¯•BIG-IPç³»ç»Ÿä¹‹é—´çš„æ•…éšœè½¬ç§»ç½‘ç»œï¼Œä»¥ç¡®ä¿ç½‘ç»œæä¾›ä½äº100msçš„ä½å»¶è¿Ÿã€‚</p><p>é‡è¦äº‹é¡¹ï¼šç”±äºæ€§èƒ½è¾ƒå·®çš„ç½‘ç»œè€Œä¸¢å¼ƒæˆ–å»¶è¿Ÿçš„ BIG-IP æ£€æµ‹ä¿¡å·æ¶ˆæ¯å¯èƒ½ä¼šè§¦å‘ BIG-IP å¯¹ç­‰ç³»ç»Ÿä¹‹é—´çš„æ„å¤–æ•…éšœè½¬ç§»ã€‚</p></li></ul></li></ul></blockquote><h4 id="ï¼ˆ2ï¼‰ç½‘ç»œæ•…éšœåˆ‡æ¢çš„æœåŠ¡ç«¯å£å’Œåè®®">ï¼ˆ2ï¼‰ç½‘ç»œæ•…éšœåˆ‡æ¢çš„æœåŠ¡ç«¯å£å’Œåè®®</h4><p>â€‹é…ç½®ç½‘ç»œæ•…éšœè½¬ç§»æ—¶ï¼Œå†—ä½™ BIG-IP ç³»ç»Ÿä½¿ç”¨ç½‘ç»œæ¥ç¡®å®šå¯¹ç«¯è®¾å¤‡çš„çŠ¶æ€ã€‚å½“ BIG-IP å†—ä½™ç³»ç»Ÿé…ç½®ä¸ºä½¿ç”¨ç½‘ç»œæ•…éšœè½¬ç§»æ—¶ï¼Œç³»ç»Ÿå°†é€šè¿‡é…ç½®çš„ Failover åœ°å€è¿›è¡Œé€šä¿¡ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº†ç”¨äº BIG-IP ç½‘ç»œæ•…éšœè½¬ç§»çš„ä¼ è¾“åè®®å’ŒæœåŠ¡ç«¯å£ã€‚</p><table><thead><tr><th>BIG-IP LTM version</th><th>Protocol</th><th>Service port</th></tr></thead><tbody><tr><td>16.x</td><td>UDP</td><td>1026</td></tr><tr><td>15.x</td><td>UDP</td><td>1026</td></tr><tr><td>14.x</td><td>UDP</td><td>1026</td></tr><tr><td>13.x</td><td>UDP</td><td>1026</td></tr><tr><td>12.x</td><td>UDP</td><td>1026</td></tr><tr><td>11.x</td><td>UDP</td><td>1026</td></tr><tr><td>10.x</td><td>UDP</td><td>1026</td></tr><tr><td>9.6.x</td><td>UDP</td><td>1026</td></tr><tr><td>9.4.x</td><td>UDP</td><td>1026</td></tr><tr><td>9.3.x</td><td>TCP</td><td>1028</td></tr><tr><td>9.2.x</td><td>SCTP</td><td>1028</td></tr><tr><td>9.0.1 through 9.1.3</td><td>TCP</td><td>1028</td></tr><tr><td>9.0.0</td><td>UDP</td><td>1028</td></tr></tbody></table><h4 id="ï¼ˆ3ï¼‰Mirror-åœ°å€é…ç½®">ï¼ˆ3ï¼‰Mirror åœ°å€é…ç½®</h4><p>å¯¼èˆªè‡³ <code>Device Management  â€ºâ€º  Devices  â€ºâ€º</code>ï¼Œé€‰æ‹©è®¾å¤‡ï¼Œç‚¹å‡» <code>Mirroring</code> è¿›è¡Œ <code>Mirror åœ°å€</code>é…ç½®ã€‚</p><p><img src="https://cdn.whbblog.cn/img/image-20220312191310071.png" alt="image-20220312191310071"></p><p>â€‹Mirror åœ°å€å¯ä»¥é…ç½®ä¸º<code>Self IP</code>åœ°å€æˆ–è€…<code>MGMT</code>åœ°å€ï¼Œâ€œ**ä¸»æœ¬åœ°é•œåƒåœ°å€&quot;<strong>è®¾ç½®ï¼Œä»¥åˆ†é…ç³»ç»Ÿç”¨äºå»ºç«‹é•œåƒé€šé“çš„é¦–é€‰è‡ªèº« IP åœ°å€ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä¸ºè®¾å¤‡ç»„çš„æ¯ä¸ªæˆå‘˜é…ç½®</strong>&quot;è¾…åŠ©æœ¬åœ°é•œåƒåœ°å€â€**è®¾ç½®ã€‚â€œ**è¾…åŠ©æœ¬åœ°é•œåƒåœ°å€â€**æ˜¯å½“æ— æ³•ä½¿ç”¨ä¸»é•œåƒå»ºç«‹é€šé“æ—¶ï¼Œç³»ç»Ÿå°†ä½¿ç”¨è¯¥åœ°å€å»ºç«‹é•œåƒé€šé“ã€‚</p><p><strong>è¦ç‚¹</strong>ï¼š é…ç½®ä¸»æœ¬åœ°é•œåƒåœ°å€å’Œè¾…åŠ©æœ¬åœ°é•œåƒåœ°å€æ—¶ï¼ŒBIG-IP ç³»ç»Ÿä»…å°†å…¶ä¸­ä¸€ä¸ªåœ°å€ç”¨äºé•œåƒé“¾è·¯ï¼Œå¹¶ä¸”é¦–é€‰ä¸»åœ°å€ã€‚å¦‚æœæ´»åŠ¨é•œåƒé“¾è·¯å‡ºç°æ•…éšœï¼Œå¤‡ç”¨ BIG-IP ç³»ç»Ÿå°†å…³é—­æ‰€æœ‰å½“å‰é•œåƒè¿æ¥ï¼Œå¹¶å¼€å§‹ä½¿ç”¨å…¶ä»–é•œåƒé“¾è·¯é•œåƒæ–°è¿æ¥ã€‚</p><h4 id="ï¼ˆ4ï¼‰ç”¨äº-BIG-IP-è¿æ¥å’ŒæŒä¹…æ€§é•œåƒçš„ä¼ è¾“åè®®">ï¼ˆ4ï¼‰ç”¨äº BIG-IP è¿æ¥å’ŒæŒä¹…æ€§é•œåƒçš„ä¼ è¾“åè®®</h4><p><code>è¿æ¥</code>å’Œ<code>ä¼šè¯ä¿æŒ</code>é•œåƒåŠŸèƒ½å…è®¸ BIG-IP ç³»ç»Ÿå°†<code>è¿æ¥</code>å’Œ<code>ä¼šè¯ä¿æŒ</code>ä¿¡æ¯å¤åˆ¶åˆ°å†—ä½™å¯¹çš„å¤‡ç”¨å•å…ƒã€‚</p><table><thead><tr><th>BIG-IP LTM Version</th><th>Protocol</th><th>Port</th></tr></thead><tbody><tr><td>11.6.0 and later</td><td>TCP</td><td>1029 - 1055</td></tr><tr><td>11.4.0 through 11.5.x</td><td>TCP</td><td>1029 - 1043</td></tr><tr><td>11.0.0 through 11.3.0</td><td>TCP</td><td>1028</td></tr><tr><td>10.x</td><td>TCP</td><td>1028</td></tr><tr><td>9.6.x</td><td>TCP</td><td>1028</td></tr><tr><td>9.4.x</td><td>TCP</td><td>1028</td></tr><tr><td>9.3.x</td><td>TCP</td><td>1028</td></tr><tr><td>9.2.x</td><td>SCTP</td><td>1028</td></tr><tr><td>9.0.1 through 9.1.3</td><td>TCP</td><td>1028</td></tr><tr><td>9.0.0</td><td>UDP</td><td>1028</td></tr></tbody></table><p>æ³¨æ„ï¼šä» BIG-IP 11.4.0 å¼€å§‹ï¼ŒBIG-IP ç³»ç»Ÿä¸ºæ¯ä¸ªæµé‡ç»„ç»´æŠ¤ä¸€ä¸ªå•ç‹¬çš„é•œåƒé€šé“ã€‚æ¯ä¸ªè¿æ¥é€šé“çš„ç«¯å£èŒƒå›´ä» TCP 1029 å¼€å§‹ï¼Œå¹¶ä¸ºæ¯ä¸ªåˆ›å»ºçš„æ–°æµé‡ç»„å’Œé€šé“é€’å¢ã€‚</p><h4 id="ï¼ˆ5ï¼‰ç½‘ç»œæ•…éšœè½¬ç§»æ£€æµ‹ä¿¡å·çš„æ•°æ®åŒ…é€Ÿç‡">ï¼ˆ5ï¼‰ç½‘ç»œæ•…éšœè½¬ç§»æ£€æµ‹ä¿¡å·çš„æ•°æ®åŒ…é€Ÿç‡</h4><p>BIG-IP ç³»ç»Ÿé€šè¿‡ç½‘ç»œå‘é€æ£€æµ‹ä¿¡å·æ•°æ®åŒ…ï¼Œä»¥ä¼ è¾¾å¯ç”¨æ€§ä»¥åŠæ´»åŠ¨æˆ–å¾…æœºçŠ¶æ€ã€‚ç³»ç»Ÿä»¥ä¸€å®šçš„é€Ÿç‡å‘é€æ£€æµ‹ä¿¡å·æ•°æ®åŒ…ï¼Œè¯¥é€Ÿç‡å›  BIG-IP ç³»ç»Ÿçš„ç‰ˆæœ¬è€Œå¼‚ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº†æ¯ä¸ª BIG-IP ç‰ˆæœ¬çš„æ£€æµ‹ä¿¡å·é€Ÿç‡ã€‚</p><table><thead><tr><th>BIG-IP ç‰ˆæœ¬</th><th>å¿ƒè·³ä¿¡å·æ£€æµ‹é€Ÿç‡ ï¼ˆæ¯ç§’æ•°æ®åŒ…æ•°ï¼‰</th><th>è¯¦ç»†ä¿¡æ¯</th></tr></thead><tbody><tr><td>16.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>15.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>14.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>13.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>12.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>11.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>10.2.x</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>10.1.0</td><td>10</td><td>ç½‘ç»œæ•…éšœè½¬ç§»å¿ƒè·³å¢åŠ ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</td></tr><tr><td>10.0.x</td><td>1 - 2</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢æ£€æµ‹ä¿¡å·ä¸çŠ¶æ€é•œåƒé€šä¿¡åˆ†ç¦»ã€‚</td></tr><tr><td>9.4.x</td><td>1 - 2</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢æ£€æµ‹ä¿¡å·ä¸çŠ¶æ€é•œåƒé€šä¿¡åˆ†ç¦»ã€‚</td></tr><tr><td>9.3.x</td><td>1 - 2</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢æ£€æµ‹ä¿¡å·ä¸çŠ¶æ€é•œåƒé€šä¿¡åˆ†ç¦»ã€‚</td></tr><tr><td>9.2.x</td><td>3</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢å¿ƒè·³ä¿¡å·ä¸å¤§IPç³»ç»Ÿä¹‹é—´çš„çŠ¶æ€é•œåƒé€šä¿¡ä¸€èµ·å‘é€ã€‚</td></tr><tr><td>9.1.x</td><td>3</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢å¿ƒè·³ä¿¡å·ä¸å¤§IPç³»ç»Ÿä¹‹é—´çš„çŠ¶æ€é•œåƒé€šä¿¡ä¸€èµ·å‘é€ã€‚</td></tr><tr><td>9.0.x</td><td>3</td><td>ç½‘ç»œæ•…éšœåˆ‡æ¢å¿ƒè·³ä¿¡å·ä¸å¤§IPç³»ç»Ÿä¹‹é—´çš„çŠ¶æ€é•œåƒé€šä¿¡ä¸€èµ·å‘é€ã€‚</td></tr></tbody></table><h4 id="ï¼ˆ6ï¼‰æ•…éšœåˆ‡æ¢æ—¶é—´">ï¼ˆ6ï¼‰æ•…éšœåˆ‡æ¢æ—¶é—´</h4><p>â€‹BIG-IPç½‘ç»œæ•…éšœåˆ‡æ¢åŠŸèƒ½å…è®¸è®¾å¤‡ä½¿ç”¨ç½‘ç»œæ¥ä¼ è¾¾å…¶æ•…éšœåˆ‡æ¢çŠ¶æ€ã€‚å¤‡ç”¨BIG-IPç³»ç»Ÿä½¿ç”¨ä¸€ä¸ªå†…éƒ¨è®¡æ—¶å™¨æ¥è·Ÿè¸ªè‡ªå¤‡ç”¨è®¾å¤‡ä»æ´»åŠ¨å•å…ƒæ¥æ”¶åˆ°ä¸Šæ¬¡æ•…éšœè½¬ç§»çŠ¶æ€æ›´æ–°ä»¥æ¥ç»è¿‡çš„æ—¶é—´ã€‚ç³»ç»Ÿä½¿ç”¨ nettimeoutsec æ•°æ®åº“é”®å€¼ï¼Œç”¨äºæŒ‡å®šå¤‡ç”¨è®¾å¤‡åœ¨ä¸Šæ¬¡ä»æ´»åŠ¨è®¾å¤‡æ›´æ–°åå˜ä¸ºæ´»åŠ¨è®¾å¤‡ä¹‹å‰ç­‰å¾…çš„ç§’æ•°ã€‚é»˜è®¤è®¾ç½®ä¸ºä¸‰ç§’ã€‚ç”±äºå•å…ƒä¹‹é—´çš„ç½‘ç»œè¿æ¥å¯èƒ½ä¼šç©¿è¶Šå¤šä¸ªç½‘ç»œè¿æ¥å’Œè®¾å¤‡ï¼Œå› æ­¤ç½‘ç»œçŠ¶å†µå¯èƒ½å¶å°”ä¼šé˜»æ­¢å•å…ƒåœ¨çŸ­æ—¶é—´å†…ï¼ˆä¾‹å¦‚ï¼Œå°‘é‡ä¸¢åŒ…æˆ–çŸ­æš‚çš„ç½‘ç»œä¸­æ–­ï¼‰å½¼æ­¤é€šä¿¡å…¶çŠ¶æ€ã€‚æ­¤è®¾ç½®æœ‰åŠ©äºåœ¨ä¸´æ—¶é€šä¿¡ä¸­æ–­çš„æƒ…å†µä¸‹é˜²æ­¢è¿‡æ—©æ•…éšœåˆ‡æ¢ã€‚</p><p>æ³¨æ„ï¼šå¯¹äºå¤§å¤šæ•°ç¯å¢ƒï¼ŒF5å»ºè®®ä½¿ç”¨é»˜è®¤æ•…éšœåˆ‡æ¢ã€‚<code>nettimeoutsec</code> å€¼ä¸º3ç§’ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚éœ€æ›´æ”¹ nettimeoutsec æ•°æ®åº“é”®å€¼ï¼Œä½¿ç”¨å¦‚ä¸‹è¯­æ³•ï¼š</span></span><br><span class="line">tmsh modify /sys db failover.nettimeoutsec value &lt;new_value&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šæ›´æ”¹ nettimeoutsec æ•°æ®åº“é”®å€¼ä¸º5s</span></span><br><span class="line">tmsh modify /sys db failover.nettimeoutsec value 5</span><br></pre></td></tr></table></figure><h2 id="äºŒã€Failover-äº’è”å¿ƒè·³çº¿æ•…éšœè½¬ç§»ğŸŒ¿">äºŒã€Failover äº’è”å¿ƒè·³çº¿æ•…éšœè½¬ç§»ğŸŒ¿</h2><p>â€‹Failover äº’è”å¿ƒè·³çº¿æ•…éšœåˆ‡æ¢ä¹ŸåŸºäºå¿ƒè·³æ£€æµ‹ï¼Œå³ä¸€ä¸ª BIG-IP ç³»ç»Ÿä¸æ–­å‘å¦ä¸€ä¸ªç³»ç»Ÿå‘é€ç”µå‹ã€‚å¦‚æœæ²¡æœ‰ä»å¦ä¸€ä¸ªBIG-IPç³»ç»Ÿè·å¾—å“åº”ï¼Œåˆ™åœ¨ä¸åˆ°ä¸€ç§’é’Ÿçš„æ—¶é—´å†…å‘ç”Ÿåˆ°å¯¹ç­‰ç³»ç»Ÿçš„æ•…éšœåˆ‡æ¢ã€‚</p><p>â€‹Failover äº’è”å¿ƒè·³çº¿æ•…éšœè½¬ç§»åªæ˜¯ä¸€ä¸ªå¿ƒè·³ä¿¡å·ï¼Œä¸æºå¸¦ä»»ä½•çŠ¶æ€ä¿¡æ¯ã€‚ä¸ºäº†ä½¿æŸäº›åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼Œå¿…é¡»é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œæµé‡ç®¡ç†å¾®å†…æ ¸ï¼ˆTMMï¼‰ä½¿ç”¨ç½‘ç»œå°†æ•°æ®åŒ…å’ŒæµçŠ¶æ€æ›´æ–°åŒæ­¥åˆ°å¯¹ç­‰æ–¹ï¼Œä»¥è¿›è¡Œè¿æ¥é•œåƒã€‚è¦å¯ç”¨æ­£ç¡®çš„çŠ¶æ€æŠ¥å‘Šå’Œé•œåƒï¼ŒF5å»ºè®®æ‚¨åœ¨ç¡¬è¿çº¿æ•…éšœåˆ‡æ¢ä¹‹å¤–é…ç½®ç½‘ç»œæ•…éšœåˆ‡æ¢ã€‚</p><h2 id="ä¸‰ã€ç½‘ç»œå’Œç¡¬è¿çº¿æ•…éšœè½¬ç§»çš„æ¯”è¾ƒğŸ€">ä¸‰ã€ç½‘ç»œå’Œç¡¬è¿çº¿æ•…éšœè½¬ç§»çš„æ¯”è¾ƒğŸ€</h2><table><thead><tr><th>åºå·</th><th>ç½‘ç»œæ•…éšœè½¬ç§»</th><th>ç¡¬è¿çº¿æ•…éšœè½¬ç§»</th></tr></thead><tbody><tr><td>1</td><td>åŸºäºæ£€æµ‹ä¿¡å·æ£€æµ‹ï¼Œå…¶ä¸­ç³»ç»Ÿé€šè¿‡å†…éƒ¨ IP ç½‘ç»œå‘é€æ£€æµ‹ä¿¡å·æ•°æ®åŒ…ã€‚</td><td>åŸºäºä¸€ç§ç®€å•çš„æœºåˆ¶ï¼Œå…¶ä¸­æœ‰æºå™¨ä»¶ç½®ä½ï¼ˆæˆ–å–æ¶ˆç½®ä½ï¼‰ç”µå‹ï¼ˆCTS/RTSï¼‰ä¿¡å·ä»¥æŒ‡ç¤ºæœ‰æºçŠ¶æ€ã€‚</td></tr><tr><td>2</td><td>æ”¯æŒåŒ…å«ä¸¤ä¸ªæˆ–å¤šä¸ª BIG-IP è®¾å¤‡çš„è®¾å¤‡ç»„éƒ¨ç½²ã€‚</td><td>ä»…æ”¯æŒä¸¤ä¸ª BIG-IP è®¾å¤‡ã€‚</td></tr><tr><td>3</td><td>æ”¯æŒåŸºäºæœºç®±çš„å¹³å° ï¼ˆVIPRIONSï¼‰ã€BIG-IP VCMP Guest å’Œ BIG-IP è™šæ‹Ÿç‰ˆ ï¼ˆVEï¼‰ ç³»ç»Ÿã€‚</td><td>ä¸æ”¯æŒåŸºäºæœºç®±çš„å¹³å° ï¼ˆVIPRIONSï¼‰ã€BIG-IP VCMP Guest å’Œ BIG-IP è™šæ‹Ÿç‰ˆ ï¼ˆVEï¼‰ ç³»ç»Ÿã€‚</td></tr><tr><td>4</td><td>æ”¯æŒä¸»åŠ¨-ä¸»åŠ¨ HA é…ç½®ã€‚</td><td>ä¸æ”¯æŒä¸»åŠ¨-ä¸»åŠ¨ HA é…ç½®ã€‚</td></tr><tr><td>5</td><td>æ”¯æŒå…·æœ‰å¤šä¸ªæµé‡ç»„çš„ HA é…ç½®</td><td>ä¸æ”¯æŒå…·æœ‰å¤šä¸ªæµé‡ç»„çš„ HA é…ç½®ã€‚</td></tr><tr><td>6</td><td>ç½‘ç»œæ•°æ®åŒ…åŒ…å«ç”¨äºä¼ è¾¾è®¾å¤‡å¯ç”¨æ€§å’Œæ•…éšœè½¬ç§»çŠ¶æ€çš„æ•°æ®ã€‚</td><td>ä¸ä¼šé€šè¿‡æ•…éšœè½¬ç§»ç”µç¼†å‘é€æˆ–æ¥æ”¶ä»»ä½•æ•°æ®ã€‚</td></tr><tr><td>7</td><td>ä¸ºæ•…éšœè½¬ç§»è®¾ç½®çš„ç½‘ç»œæ¥å£è¿˜å¯ç”¨äºè®¾å¤‡çš„é…ç½®åŒæ­¥å’Œè¿æ¥é•œåƒã€‚</td><td>ç¡¬è¿çº¿æ•…éšœè½¬ç§»ç”µç¼†ä¸“ç”¨äº HA æ•…éšœè½¬ç§»ä½¿ç”¨ã€‚</td></tr><tr><td>8</td><td>å¯ä»¥åœ¨å¤šä¸ªBIG-IPè®¾å¤‡ä¹‹é—´çš„IPç½‘ç»œä¸­è®¾ç½®ä¸€ä¸ªè·ç¦»ã€‚</td><td>ä¸¤ä¸ª BIG-IP è®¾å¤‡ä¹‹é—´çš„è·ç¦»å—æœ€å¤§ç¡¬è¿çº¿ç”µç¼†é•¿åº¦ 50 è‹±å°ºçš„é™åˆ¶ã€‚</td></tr><tr><td>9</td><td>ç½‘ç»œé—®é¢˜å¯èƒ½ä¼šå¯¼è‡´ BIG-IP ç³»ç»Ÿé‡åˆ°æ•…éšœè½¬ç§»é—®é¢˜ã€‚</td><td>ç‹¬ç«‹äºç½‘ç»œé—®é¢˜ã€‚</td></tr><tr><td>10</td><td>æ•°æ®åº“å˜é‡ <strong>failover.nettimeoutsec</strong> è®¾ç½®åœ¨æœªæ”¶åˆ°æ£€æµ‹ä¿¡å·æ¶ˆæ¯åå°†å¯¹ç­‰ä½“è§†ä¸ºå…³é—­çš„æ—¶é—´ã€‚æœ€å°å€¼ä¸º 1ã€‚</td><td>ç¡¬è¿çº¿æ•…éšœè½¬ç§»å¯ä»¥æä¾›ä¸åˆ°ä¸€ç§’çš„æ›´å¿«æ•…éšœè½¬ç§»å“åº”æ—¶é—´ã€‚</td></tr></tbody></table><p>æ³¨æ„ï¼šå¦‚æœå°† BIG-IP é«˜å¯ç”¨æ€§å¯¹é…ç½®ä¸ºä½¿ç”¨ç½‘ç»œæ•…éšœè½¬ç§»ï¼Œå¹¶ä¸”ç¡¬è¿çº¿æ•…éšœè½¬ç§»ç”µç¼†ä¹Ÿè¿æ¥è¿™ä¸¤ä¸ªå•å…ƒï¼Œåˆ™ç¡¬è¿çº¿æ•…éšœè½¬ç§»å§‹ç»ˆå…·æœ‰ä¼˜å…ˆæƒã€‚å¦‚æœç½‘ç»œæ•…éšœè½¬ç§»æµé‡å—åˆ°å¨èƒï¼Œè¿™ä¸¤ä¸ªè®¾å¤‡ä¸ä¼šè¿›è¡Œæ•…éšœè½¬ç§»ï¼Œå› ä¸ºç¡¬è¿çº¿æ•…éšœè½¬ç§»ç”µç¼†ä»ä¼šè¿æ¥å®ƒä»¬ã€‚</p><h2 id="å››ã€F5-åŒæœºæ•…éšœè½¬ç§»äº‹ä»¶ğŸŒ²">å››ã€F5 åŒæœºæ•…éšœè½¬ç§»äº‹ä»¶ğŸŒ²</h2><h3 id="1ã€å®ˆæŠ¤è¿›ç¨‹å¼‚å¸¸å¯¼è‡´åˆ‡æ¢">1ã€å®ˆæŠ¤è¿›ç¨‹å¼‚å¸¸å¯¼è‡´åˆ‡æ¢</h3><p>ä¸‹è¡¨åˆ—å‡ºäº†æ¯ä¸ªå—ç›‘è§†å®ˆæŠ¤ç¨‹åºçš„åç§°ã€è¯´æ˜ã€è¶…æ—¶æœŸé™å’Œé»˜è®¤æ•…éšœå®‰å…¨æ“ä½œã€‚</p><table><thead><tr><th>å®ˆæŠ¤ è¿›ç¨‹</th><th>æè¿°</th><th>æ£€æµ‹ä¿¡å·è¶…æ—¶</th><th>é»˜è®¤æ•…éšœå®‰å…¨æ“ä½œ</th></tr></thead><tbody><tr><td>MCPD</td><td>æ¶ˆæ¯ä¼ é€’å’Œé…ç½®</td><td>300ç§’</td><td>Restart All* ï¼šé‡å¯æ‰€æœ‰æœåŠ¡</td></tr><tr><td>TMM</td><td>æµé‡ç®¡ç†</td><td>10 ç§’</td><td>Go Offline &amp; Down Links &amp; restart* ï¼šç³»ç»Ÿå°†è„±æœºï¼Œå…³é—­æ‰€æœ‰é“¾æ¥ï¼Œå¹¶é‡æ–°å¯åŠ¨æœåŠ¡</td></tr><tr><td>SOD</td><td>æ•…éšœè½¬ç§»</td><td>60ç§’</td><td>Restart All* ï¼šé‡å¯æ‰€æœ‰æœåŠ¡</td></tr><tr><td>BIGD</td><td>è¿è¡ŒçŠ¶å†µç›‘è§†å™¨</td><td>150ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>BCM56XXD</td><td>äº¤æ¢æœºç¡¬ä»¶é©±åŠ¨ç¨‹åº</td><td>60ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>TMROUTED</td><td>è·¯ç”±è¡¨ç®¡ç†</td><td>30 ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>CBRD</td><td>æä¾›åŸºäº XML å†…å®¹çš„è·¯ç”±çš„æœåŠ¡</td><td>30 ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>SCRIPTD</td><td>åŸºäº <strong>tmsh</strong> å‘½ä»¤æ‰§è¡Œç”¨æˆ·å®šä¹‰è„šæœ¬çš„å®ˆæŠ¤ç¨‹åº</td><td>60ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>SNMPD</td><td>ç”¨äºè¿œç¨‹ç›‘è§†çš„ç®€å•ç½‘ç»œç®¡ç†åè®®ä»£ç†</td><td>300ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr></tbody></table><p><strong>ç‰¹å®šäºæ¨¡å—çš„å®ˆæŠ¤ç¨‹åº</strong></p><p>åªæœ‰åœ¨ç‰¹å®šäºå®ˆæŠ¤ç¨‹åºçš„æ¨¡å—è·å¾—<code>Licensed</code>è®¸å¯å¹¶<code>provisioned</code>é…ç½®åï¼ŒBIG-IPç³»ç»Ÿæ‰ä¼šç›‘æ§ä»¥ä¸‹å®ˆæŠ¤ç¨‹åºã€‚</p><table><thead><tr><th>æ¨¡å—</th><th>å®ˆæŠ¤ è¿›ç¨‹</th><th>æè¿°</th><th>æ£€æµ‹ä¿¡å·è¶…æ—¶</th><th>é»˜è®¤æ•…éšœå®‰å…¨æ“ä½œ</th></tr></thead><tbody><tr><td>DNSï¼ˆä»¥å‰ç§°ä¸º GTMï¼‰</td><td>GTMD</td><td>å…¨å±€æµé‡ç®¡ç†</td><td>60ç§’</td><td>Go Offline &amp; Restartï¼šç¦»çº¿å¹¶é‡æ–°å¯åŠ¨æ”¹è¿›ç¨‹</td></tr><tr><td>vCMP</td><td>VCMPD</td><td>vCMP å®¢æˆ·æœºç®¡ç†å®ˆæŠ¤ç¨‹åº</td><td>60ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>ASM</td><td>BD</td><td>åº”ç”¨ç¨‹åºå®‰å…¨ç®¡ç†å™¨ç­–ç•¥å®ˆæŠ¤ç¨‹åº</td><td>30ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr><tr><td>AAMï¼ˆå‰èº«ä¸º WAMï¼‰</td><td>WAMD</td><td>åº”ç”¨ç¨‹åºåŠ é€Ÿç®¡ç†å™¨å®ˆæŠ¤ç¨‹åº</td><td>30ç§’</td><td>Restart ï¼šç³»ç»Ÿå°†é‡æ–°å¯åŠ¨æ­¤ç³»ç»ŸæœåŠ¡</td></tr></tbody></table><h3 id="2ã€ç½‘ç»œå¼‚å¸¸å¯¼è‡´åˆ‡æ¢">2ã€ç½‘ç»œå¼‚å¸¸å¯¼è‡´åˆ‡æ¢</h3><p>BIG-IP ç³»ç»Ÿç›‘è§†ç½‘ç»œç»„ä»¶ï¼Œä¸‹è¡¨ä»‹ç»äº†ç½‘ç»œå¼‚å¸¸å¯¼è‡´çš„æ•…éšœè½¬ç§»åˆ‡æ¢ã€‚</p><table><thead><tr><th>é«˜å¯ç”¨æ€§åŠŸèƒ½</th><th>æè¿°</th><th>æ•…éšœå®‰å…¨æ“ä½œ</th></tr></thead><tbody><tr><td>pool-member-down</td><td>é…ç½®ç½‘å…³æ•…éšœä¿æŠ¤åŠŸèƒ½åï¼ŒBIG-IPç³»ç»Ÿå°†ç›‘è§†ç½‘å…³æ± æˆå‘˜ï¼Œå¹¶åœ¨å¯ç”¨æ± æˆå‘˜å°‘äºæŒ‡å®šæ•°é‡æ—¶é‡‡å–è¡ŒåŠ¨ã€‚</td><td>æ•…éšœè½¬ç§»åˆ°å¯¹ç­‰æ–¹</td></tr><tr><td>vlan-failsafe</td><td>é…ç½®VLANæ•…éšœä¿æŠ¤åŠŸèƒ½åï¼ŒBIG-IPç³»ç»Ÿä¼šç›‘æ§é€šè¿‡æŒ‡å®šVLANçš„ç½‘ç»œæµé‡ï¼Œå¹¶åœ¨æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥ä¸¢å¤±æ—¶é‡‡å–æªæ–½ã€‚</td><td>é‡æ–°å¯åŠ¨</td></tr><tr><td>ha-group-score</td><td>å½“HAç»„è¢«åˆ†é…ç»™æµé‡ç»„æ—¶ï¼Œç³»ç»Ÿä¼šç›‘è§† trunkã€pool å’Œ VIPRION ç¾¤é›†ç­‰å¯¹è±¡ã€‚å½“æ‚¨å°†HAç»„ä¸ç‰¹å®šè®¾å¤‡ä¸Šçš„æµé‡ç»„å®ä¾‹å…³è”æ—¶ï¼ŒBIG-IPç³»ç»Ÿä¼šæ ¹æ®trunkã€poolæˆ–ç¾¤é›†å¯ç”¨æ€§ï¼Œä¸ºå…³è”çš„æµé‡ç»„è®¡ç®—è¯¥è®¾å¤‡çš„è¿è¡ŒçŠ¶å†µåˆ†æ•°ã€‚</td><td>æ•…éšœè½¬ç§»</td></tr></tbody></table><h3 id="3ã€ç¡¬ä»¶æ•…éšœå¯¼è‡´åˆ‡æ¢">3ã€ç¡¬ä»¶æ•…éšœå¯¼è‡´åˆ‡æ¢</h3><p>BIG-IP ç³»ç»Ÿç›‘è§†å„ç§ç¡¬ä»¶ç»„ä»¶ï¼Œç„¶ååœ¨ç³»ç»Ÿæ£€æµ‹åˆ°æ•…éšœæ—¶é‡‡å–é€‚å½“çš„æªæ–½ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th>é«˜å¯ç”¨æ€§åŠŸèƒ½</th><th>æè¿°</th><th>æ•…éšœå®‰å…¨æ“ä½œ</th></tr></thead><tbody><tr><td>crypto-failsafe</td><td>æŒ‡ç¤º SSL å¡å·²é”å®šåœ¨å…·æœ‰ Cavium Nitroxã€Cave Creek æˆ– Coleto Creek SSL å¡çš„ BIG-IP ç³»ç»Ÿä¸Š</td><td>go-offline-downlinks ï¼šç³»ç»Ÿç¦»çº¿ï¼Œå…³é—­æ‰€æœ‰é“¾æ¥</td></tr><tr><td>nic-failafe</td><td>ç”± TMM ç”¨äºæ£€æµ‹ HSB è¿æ¥æ¥å£ä¸­çš„å‘é€/æ¥æ”¶æ•…éšœ</td><td>reboot ï¼šé‡å¯ç³»ç»Ÿ</td></tr><tr><td>hardware-failover</td><td>ç³»ç»Ÿç”¨äºæŠ¥å‘Šé…ç½®ä¸ºä½¿ç”¨ç¡¬è¿çº¿æ•…éšœåˆ‡æ¢çš„ç³»ç»Ÿçš„æ•…éšœè½¬ç§»ç”µç¼†ä¸Šçš„ç”µå‹ç”µå¹³ä¸‹é™</td><td>go-active ï¼šè¿›å…¥ActiveçŠ¶æ€</td></tr><tr><td>switchboard-failsafe</td><td>ç”¨äºæ£€æµ‹ Broadcom äº¤æ¢æœºå’Œ TMM ä¹‹é—´çš„æ•°æ®è·¯å¾„ä¸­çš„å‘é€/æ¥æ”¶æ•…éšœ</td><td>Go Offline Abort TM*</td></tr></tbody></table><h2 id="äº”ã€å¯¹å®ˆæŠ¤ç¨‹åºæ•…éšœå®‰å…¨äº‹ä»¶è¿›è¡Œæ•…éšœæ’é™¤ğŸƒ">äº”ã€å¯¹å®ˆæŠ¤ç¨‹åºæ•…éšœå®‰å…¨äº‹ä»¶è¿›è¡Œæ•…éšœæ’é™¤ğŸƒ</h2><h3 id="1ã€æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶">1ã€æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶</h3><p>é€šè¿‡æŸ¥çœ‹ <strong>/var/log/ltm</strong> æ–‡ä»¶æ¥éªŒè¯å“ªä¸ªå®ˆæŠ¤ç¨‹åºå¯¼è‡´äº†æ•…éšœè½¬ç§»æ“ä½œã€‚æ‰¾åˆ° <strong>HA daemon_heartbeat</strong>æ¶ˆæ¯ï¼Œå¹¶æŸ¥çœ‹æ£€æµ‹ä¿¡å·å¤±è´¥ä¹‹å‰å‘ç”Ÿçš„ä»»ä½•ç›¸å…³æ—¥å¿—è®°å½•æ¶ˆæ¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/log/ltm</span><br></pre></td></tr></table></figure><h3 id="2ã€æ£€æŸ¥å®ˆæŠ¤ç¨‹åºæ ¸å¿ƒæ–‡ä»¶">2ã€æ£€æŸ¥å®ˆæŠ¤ç¨‹åºæ ¸å¿ƒæ–‡ä»¶</h3><p>é€šè¿‡æ£€æŸ¥ <code>/var/core</code> æˆ– <code>/shared/core</code> ç›®å½•æ¥ç¡®å®šå®ˆæŠ¤ç¨‹åºæ˜¯å¦ç”Ÿæˆäº†æ ¸å¿ƒæ–‡ä»¶ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /var/core/</span><br><span class="line"><span class="built_in">ls</span> /shared/core/</span><br></pre></td></tr></table></figure><h3 id="3ã€æ£€æŸ¥ç³»ç»Ÿèµ„æºç›¸å…³é—®é¢˜">3ã€æ£€æŸ¥ç³»ç»Ÿèµ„æºç›¸å…³é—®é¢˜</h3><p>æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œå‘½ä»¤ï¼ˆå¦‚ <strong>top</strong> å‘½ä»¤ï¼‰æ¥æ£€æŸ¥ä¸ç³»ç»Ÿèµ„æºç›¸å…³çš„é—®é¢˜ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure><h3 id="4ã€æŸ¥çœ‹ç³»ç»Ÿ-HA-è¡¨">4ã€æŸ¥çœ‹ç³»ç»Ÿ HA è¡¨</h3><p>æ‚¨å¯ä»¥é€šè¿‡ä»å‘½ä»¤è¡ŒæŸ¥çœ‹ HA è¡¨æ¥æ£€æŸ¥å„ç§è¿›ç¨‹çš„ HA çŠ¶æ€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmsh show sys ha-status</span><br></pre></td></tr></table></figure><h2 id="å…­ã€å‚è€ƒé“¾æ¥ğŸŒ³">å…­ã€å‚è€ƒé“¾æ¥ğŸŒ³</h2><p><strong>æ„Ÿè°¢ä»¥ä¸‹æ–‡æ¡£æ”¯æŒï¼</strong></p><p>ğŸ¿ï¸<a href="https://support.f5.com/csp/article/K2397">Comparison of hardwired failover and network failover features (f5.com)</a></p><p>ğŸ¦¦<a href="https://support.f5.com/csp/article/K7510">Packet rate for network failover heartbeat (f5.com)</a></p><p>ğŸ¦¥<a href="https://support.f5.com/csp/article/K95002127">Troubleshooting BIG-IP failover events (f5.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> Failover </tag>
            
            <tag> æ•…éšœè½¬ç§» </tag>
            
            <tag> ä¸»å¤‡åˆ‡æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 HTTPS åŒå‘è®¤è¯é…ç½®</title>
      <link href="/posts/037fc9ef176d.html"/>
      <url>/posts/037fc9ef176d.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç”¨æˆ·å¸Œæœ›é€šè¿‡F5å®ç° HTTPS åŒå‘è®¤è¯</strong></p><h2 id="ä¸€ã€ç¯å¢ƒä»‹ç»ğŸŒ³">ä¸€ã€ç¯å¢ƒä»‹ç»ğŸŒ³</h2><h3 id="1ã€å‰æœŸå‡†å¤‡">1ã€å‰æœŸå‡†å¤‡</h3><blockquote><p><strong>ğŸ³ F5 è´Ÿè½½å‡è¡¡å™¨ç¯å¢ƒ</strong></p><p><strong>ğŸŸ æœåŠ¡å™¨è¯ä¹¦å’Œkey</strong></p><p><strong>ğŸ  å®¢æˆ·ç«¯caè¯ä¹¦å’Œkey</strong></p></blockquote><h3 id="2ã€å®éªŒæ‹“æ‰‘">2ã€å®éªŒæ‹“æ‰‘</h3><p><img src="https://cdn.whbblog.cn/img/image-20220218121051906.png" alt="image-20220218121051906"></p><h2 id="äºŒã€å®æˆ˜é…ç½®ğŸŒ¿">äºŒã€å®æˆ˜é…ç½®ğŸŒ¿</h2><h3 id="1ã€å®¢æˆ·ç«¯è¯ä¹¦ç”Ÿæˆ">1ã€å®¢æˆ·ç«¯è¯ä¹¦ç”Ÿæˆ</h3><blockquote><p>ğŸ‰<strong>å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¯ä¹¦å’Œæ ¹è¯ä¹¦ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œè‡ªç­¾å‘è¯ä¹¦ï¼Œå¦‚æœæœ‰åˆ™çœç•¥æ­¤æ­¥éª¤ã€‚</strong></p></blockquote><h4 id="ï¼ˆ1ï¼‰è‡ªç­¾å‘æ ¹è¯ä¹¦å’Œå®¢æˆ·ç«¯è¯ä¹¦">ï¼ˆ1ï¼‰è‡ªç­¾å‘æ ¹è¯ä¹¦å’Œå®¢æˆ·ç«¯è¯ä¹¦</h4><p><strong>a.åˆ›å»ºå¹¶è¿›å…¥æ“ä½œç›®å½•</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /certificate</span><br><span class="line"><span class="built_in">cd</span> /certificate/</span><br></pre></td></tr></table></figure><p><strong>b.ç”Ÿæˆæ ¹è¯ä¹¦ç§é’¥</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out client-ca.key 2048</span><br></pre></td></tr></table></figure><p><strong>c.è‡ªç­¾å‘æ ¹è¯ä¹¦</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -new -nodes -key client-ca.key -subj <span class="string">&quot;/CN=client-ca&quot;</span> -days 5000 -out client-ca.crt</span><br></pre></td></tr></table></figure><p><strong>d.ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out client.key 2048</span><br></pre></td></tr></table></figure><p><strong>e.åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key client.key -subj <span class="string">&quot;/C=CN/ST=Bei Jing/L=Bei Jing/O=YYDS Space Company/CN=yyds.space&quot;</span> -out client.csr</span><br></pre></td></tr></table></figure><p><strong>f. ext æ–‡ä»¶é…ç½®</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; client.ext &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">extendedKeyUsage=clientAuth</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p><strong>g.ä½¿ç”¨æ ¹è¯ä¹¦ç­¾å‘å®¢æˆ·ç«¯è¯ä¹¦</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> client.csr -CA client-ca.crt -CAkey client-ca.key -CAcreateserial -extfile client.ext -out client.crt -days 5000</span><br></pre></td></tr></table></figure><p><strong>h.åˆ›å»ºå®¢æˆ·ç«¯PKCS12è¯ä¹¦</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -<span class="keyword">in</span> client.crt -inkey client.key -out client.p12 -name <span class="string">&quot;client pkcs12&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æœåŠ¡å™¨ç«¯è¯ä¹¦ç”Ÿæˆ">ï¼ˆ2ï¼‰æœåŠ¡å™¨ç«¯è¯ä¹¦ç”Ÿæˆ</h4><blockquote><p>ğŸŠ<strong>å¦‚æœæ²¡æœ‰æœåŠ¡å™¨ç«¯è¯ä¹¦å’Œæ ¹è¯ä¹¦ï¼Œè¯·ä½¿ç”¨ä»¥ä¸Šæ–¹å¼è¿›è¡Œè‡ªç­¾å‘è¯ä¹¦ï¼Œå¦‚æœæœ‰åˆ™çœç•¥æ­¤æ­¥éª¤ã€‚</strong></p></blockquote><h3 id="2ã€F5-é…ç½®">2ã€F5 é…ç½®</h3><h4 id="ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦æ–‡ä»¶">ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦æ–‡ä»¶</h4><p><strong>a.ä¸Šä¼ å®¢æˆ·ç«¯caè¯ä¹¦</strong></p><p>å¯¼èˆªè‡³ <code>System  â€ºâ€º  Certificate Management : Traffic Certificate Management : SSL Certificate List  â€ºâ€º  Import SSL Certificates and Keys</code>è·¯å¾„ï¼Œç‚¹å‡»Importè¿›è¡Œå®¢æˆ·ç«¯è¯ä¹¦ä¸Šä¼ ã€‚</p><blockquote><p>ğŸ«<strong>Import Typeï¼šé€‰æ‹©Certificateã€‚</strong></p><p>ğŸ“<strong>Certificate Nameï¼šè¾“å…¥clientè¯ä¹¦åç§°ã€‚</strong></p><p>ğŸ‘<strong>Certificate Sourceï¼š é€‰æ‹©æ–‡ä»¶æˆ–è€…ç²˜è´´è¯ä¹¦ã€‚</strong></p><p>ğŸ‡<strong>æœ€åç‚¹å‡»ä¸‹é¢Importå³å¯ã€‚</strong></p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220218131413189.png" alt="image-20220218131413189"></p><p><strong>b.ä¸Šä¼ æœåŠ¡å™¨è¯ä¹¦å’Œkey</strong></p><p>å¯¼èˆªè‡³ <code>System  â€ºâ€º  Certificate Management : Traffic Certificate Management : SSL Certificate List  â€ºâ€º  Import SSL Certificates and Keys</code>è·¯å¾„ï¼Œç‚¹å‡»Importè¿›è¡Œå®¢æˆ·ç«¯è¯ä¹¦ä¸Šä¼ ã€‚</p><blockquote><p>ğŸ<strong>Import Typeï¼šé€‰æ‹©Certificateã€‚</strong></p><p>ğŸ<strong>Certificate Nameï¼šè¾“å…¥clientè¯ä¹¦åç§°ã€‚</strong></p><p><strong>ğŸCertificate Sourceï¼š é€‰æ‹©æ–‡ä»¶æˆ–è€…ç²˜è´´è¯ä¹¦ã€‚</strong></p><p>ğŸ…<strong>æœ€åç‚¹å‡»ä¸‹é¢Importå³å¯ã€‚</strong></p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220218131812724.png" alt="image-20220218131812724"></p><p>å¯¼å…¥å®¢æˆ·ç«¯ç§é’¥ï¼š</p><blockquote><p>ğŸ…<strong>Import Typeï¼šé€‰æ‹©Keyã€‚</strong></p><p>ğŸ<strong>Certificate Nameï¼šè¾“å…¥client Keyåç§°,ä¸Certificateä¿æŒä¸€è‡´ã€‚</strong></p><p>ğŸ<strong>Certificate Sourceï¼š é€‰æ‹©æ–‡ä»¶æˆ–è€…ç²˜è´´Keyã€‚</strong></p><p>ğŸ<strong>æœ€åç‚¹å‡»ä¸‹é¢Importå³å¯ã€‚</strong></p></blockquote><p><img src="https://cdn.whbblog.cn/img/image-20220218131903519.png" alt="image-20220218131903519"></p><h4 id="ï¼ˆ2ï¼‰åˆ›å»º-client-ssl-profile">ï¼ˆ2ï¼‰åˆ›å»º client ssl profile</h4><p><img src="https://cdn.whbblog.cn/img/image-20220218132150309.png" alt="image-20220218132150309"></p><blockquote><p>ğŸ¥‘<strong>Certificate Key Chain : é€‰æ‹©æœåŠ¡å™¨è¯ä¹¦å’Œkey.</strong></p><p>ğŸ†<strong>Client Certificate : æŒ‡å®šç³»ç»Ÿå¤„ç†å®¢æˆ·ç«¯è¯ä¹¦çš„æ–¹å¼,è¿™é‡Œé€‰æ‹©Require.</strong></p><p>ğŸ¥•<strong>Trusted Certificate Authorities:å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„,ç”¨äºç³»ç»ŸéªŒè¯å®¢æˆ·ç«¯çš„CAè¯ä¹¦,è¿™é‡Œé€‰æ‹©ä¸Šä¼ çš„å®¢æˆ·ç«¯è¯ä¹¦.</strong></p><p>ğŸŒ½<strong>Advertised Certificate Authorities(å¯é€‰):å°† BIG-IP ç³»ç»Ÿé€šå‘Šçš„ CA è¯ä¹¦å…³è”åˆ°è¿œç¨‹å®¢æˆ·ç«¯ï¼Œä»¥å¸®åŠ©é€‰æ‹©æ­£ç¡®çš„å®¢æˆ·ç«¯è¯ä¹¦,è¿™é‡Œé€‰æ‹©ä¸Šä¼ çš„å®¢æˆ·ç«¯è¯ä¹¦.</strong></p></blockquote><h4 id="ï¼ˆ3ï¼‰åˆ›å»ºpool">ï¼ˆ3ï¼‰åˆ›å»ºpool</h4><p><img src="https://cdn.whbblog.cn/img/image-20220218131208305.png" alt="image-20220218131208305"></p><h4 id="ï¼ˆ4ï¼‰åˆ›å»ºvs-å¹¶å…³è”-SSL-Profile-client">ï¼ˆ4ï¼‰åˆ›å»ºvs,å¹¶å…³è” SSL Profile (client)</h4><p><img src="https://cdn.whbblog.cn/img/image-20220218132304088.png" alt="image-20220218132304088"></p><p><img src="https://cdn.whbblog.cn/img/image-20220218132353148.png" alt="image-20220218132353148"></p><p><img src="https://cdn.whbblog.cn/img/image-20220218132416969.png" alt="image-20220218132416969"></p><p><img src="https://cdn.whbblog.cn/img/image-20220218132505159.png" alt="image-20220218132505159"></p><h3 id="3ã€æœåŠ¡å™¨æ“ä½œ">3ã€æœåŠ¡å™¨æ“ä½œ</h3><blockquote><p><strong>æœåŠ¡å™¨å…·ä½“æ“ä½œæ­¤å¤„çœç•¥ï¼Œå¤§è‡´æ“ä½œå¦‚ä¸‹ï¼š</strong></p><p><strong>ğŸ’ é…ç½®sslè¯ä¹¦ï¼ˆæ ¹æ®æƒ…å†µï¼‰</strong></p><p><strong>ğŸ å¼€æ”¾è®¿é—®ç­–ç•¥</strong></p></blockquote><h2 id="ä¸‰ã€éªŒè¯åˆ†æğŸŒ´">ä¸‰ã€éªŒè¯åˆ†æğŸŒ´</h2><h3 id="1ã€Linuxå®¢æˆ·ç«¯éªŒè¯">1ã€Linuxå®¢æˆ·ç«¯éªŒè¯</h3><h4 id="ï¼ˆ1ï¼‰ä¿®æ”¹æœ¬åœ°hostsæ–‡ä»¶">ï¼ˆ1ï¼‰ä¿®æ”¹æœ¬åœ°hostsæ–‡ä»¶</h4><blockquote><p>ğŸ¥¦<strong>ç”±äºæœ¬æ¬¡æµ‹è¯•ä¸ºå†…ç½‘ç¯å¢ƒæµ‹è¯•ï¼Œæ‰€ä»¥æ‰‹åŠ¨è¿›è¡Œä¿®æ”¹hostsæ–‡ä»¶æ“ä½œ</strong>ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span>  <span class="string">&quot;192.168.10.129 test.whbblog.cn&quot;</span> &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰å®¢æˆ·ç«¯è®¿é—®éªŒè¯">ï¼ˆ2ï¼‰å®¢æˆ·ç«¯è®¿é—®éªŒè¯</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost certificate]<span class="comment"># curl https://test.whbblog.cn --cert /certificate/client.crt --key /certificate/client.key</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">  &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">  &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">  &lt;title&gt;TEST SIDE&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    html,body&#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background-color: <span class="comment">#ccc;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .contentBox&#123;</span><br><span class="line">     position: fixed;</span><br><span class="line">     top: 50%;</span><br><span class="line">     width: 100%;</span><br><span class="line">     text-align: center;</span><br><span class="line">     margin-top: -90px;</span><br><span class="line">    &#125;</span><br><span class="line">    .contentBox p&#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      font-weight: 700;</span><br><span class="line">    &#125;</span><br><span class="line">    .contentBox .title&#123;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">      font-weight: 700;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;contentBox&quot;</span>&gt;</span><br><span class="line">      &lt;p class=<span class="string">&quot;title&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;WELCOME TO TEST SIDE !&lt;/h1&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰æŠ“åŒ…éªŒè¯åŒå‘è®¤è¯è¿‡ç¨‹">ï¼ˆ3ï¼‰æŠ“åŒ…éªŒè¯åŒå‘è®¤è¯è¿‡ç¨‹</h4><p><img src="C:%5CUsers%5Cwangh%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220218162401343.png" alt="image-20220218162401343"></p><p><strong>ç»“è®ºï¼šç”±ä»¥ä¸ŠæŠ“åŒ…ç»“è®ºå¾—çŸ¥ï¼ŒF5 HTTPS åŒå‘è®¤è¯é…ç½®æˆåŠŸ</strong>ã€‚</p><h3 id="2ã€Linuxå®¢æˆ·ç«¯éªŒè¯">2ã€Linuxå®¢æˆ·ç«¯éªŒè¯</h3><h4 id="ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦è‡³æµè§ˆå™¨">ï¼ˆ1ï¼‰ä¸Šä¼ è¯ä¹¦è‡³æµè§ˆå™¨</h4><p><img src="https://cdn.whbblog.cn/img/image-20220307163059412.png" alt="image-20220307163059412"></p><p><img src="https://cdn.whbblog.cn/img/image-20220307163250202.png" alt="image-20220307163250202"></p><p><img src="https://cdn.whbblog.cn/img/image-20220307163353960.png" alt="image-20220307163353960"></p><p><img src="https://cdn.whbblog.cn/img/image-20220307163508843.png" alt="image-20220307163508843"></p><p><img src="https://cdn.whbblog.cn/img/image-20220307163522594.png" alt="image-20220307163522594"></p><h4 id="ï¼ˆ2ï¼‰è®¿é—®æµ‹è¯•">ï¼ˆ2ï¼‰è®¿é—®æµ‹è¯•</h4><p><img src="https://cdn.whbblog.cn/img/image-20220310165833852.png" alt="image-20220310165833852"><img src="https://cdn.whbblog.cn/img/image-20220310174937287.png" alt="image-20220310174937287"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> HTTPS </tag>
            
            <tag> åŒå‘è®¤è¯ </tag>
            
            <tag> é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPS åŠ å¯†æœºåˆ¶</title>
      <link href="/posts/a6928ecd481c.html"/>
      <url>/posts/a6928ecd481c.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€HTTPS-äº§ç”ŸèƒŒæ™¯ğŸ³">ä¸€ã€HTTPS äº§ç”ŸèƒŒæ™¯ğŸ³</h2><p>ä¸Šè¿‡ç½‘çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œç½‘ç»œæ˜¯éå¸¸ä¸å®‰å…¨çš„ã€‚å°¤å…¶æ˜¯å…¬å…±åœºæ‰€å¾ˆå¤šå…è´¹çš„WIFIï¼Œæˆ–è®¸åªæ˜¯æ”»å‡»è€…çš„ä¸€ä¸ªè¯±é¥µã€‚è¿˜æœ‰å¤§å®¶å¹³æ—¶å–œæ¬¢ç”¨çš„ä¸‡èƒ½é’¥åŒ™ï¼Œç­‰ç­‰ã€‚é‚£æˆ‘ä»¬å¹³æ—¶ä¸Šç½‘å¯èƒ½ä¼šå­˜åœ¨å“ªäº›é£é™©å‘¢ï¼Ÿ</p><ol><li>æ³„å¯†ï¼Œä¸ªäººéšç§ã€è´¦æˆ·å¯†ç ç­‰ä¿¡æ¯å¯èƒ½ä¼šè¢«ç›—å–ã€‚</li><li>ç¯¡æ”¹ï¼Œæ”¶åˆ°çš„æ•°æ®å¯èƒ½è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹è¿‡ï¼Œæˆ–è¢«æ¤å…¥å¹¿å‘Šç­‰ã€‚</li><li>å‡å†’ï¼Œè®¿é—®çš„ç«™ç‚¹éç›®æ ‡æœåŠ¡å™¨ç«™ç‚¹ã€‚å¦‚åŸŸåæ¬ºéª—ã€åŸŸååŠ«æŒã€é’“é±¼ç½‘ç«™ç­‰ã€‚</li></ol><p>å¯èƒ½ä½ä½ éš”å£ç©¿äººå­—æ‹–ã€è¯´è¯éƒ½ç•¥æ˜¾ç¾æ¶©çš„å°ç‹ï¼Œä¸€åˆ°å¤œæ·±äººé™çš„æ—¶å€™å°±å¼€å§‹å·çª¥ä½ çš„ä¸€ä¸¾ä¸€åŠ¨ï¼é™ªä½ ä¸€èµ·çœ‹91æŸç¤¾åŒºçš„ç”µå½±è¿˜å¥½ï¼Œä¸‡ä¸€çªƒå–äº†å„è´­ç‰©ç½‘ç«™æˆ–å…¶ä»–ç«™ç‚¹çš„ç™»å½•ä¿¡æ¯å°±â€¦â€¦æ˜¯ä¸æ˜¯æƒ³æƒ³æœ‰äº›å®³æ€•å‘¢ï¼</p><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/479532365.jpg" alt="xiaowang.jpg"></p><p>ä¸ºä»€ä¹ˆåˆ«äººèƒ½è·å–ä½ ä¸Šç½‘çš„æ•°æ®å‘¢ï¼Ÿæœ‰è¿‡ä¸€å®šç½‘ç»œåŸºç¡€çš„æœ‹å‹å¤šå°‘éƒ½å¯¹TCP/IPæœ‰äº›äº†è§£ï¼Œå¯¹å„ç§æ¡æ‰‹æŒ¥æ‰‹æ—©å·²èƒŒå¾—æ»šç“œçƒ‚ä¿—ï¼Œå¯¹httpåè®®ä¹Ÿæ—©äº†ç„¶äºå¿ƒã€‚httpæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œä½äºTCP/IPå‚è€ƒæ¨¡å‹çš„æœ€ä¸Šå±‚ã€‚ç”¨æˆ·æ•°æ®ç»è¿‡åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€é“¾è·¯å±‚çš„å±‚å±‚å°è£…åç»è¿‡ç‰©ç†å±‚å‘é€åˆ°ç›®æ ‡æœºå™¨ã€‚åœ¨è¿™å‡ å±‚ä¸­ï¼Œæ•°æ®éƒ½æ²¡æœ‰ç»è¿‡åŠ å¯†å¤„ç†ï¼Œæ‰€ä»¥ä¸€æ—¦åˆ«äººè·å–åˆ°ä½ çš„æ•°æ®åŒ…ï¼Œå°±èƒ½è½»æ˜“çš„è·å–åˆ°æ•°æ®çš„ä¿¡æ¯ã€‚</p><h2 id="äºŒã€HTTPS-ä»‹ç»ğŸ‹">äºŒã€HTTPS ä»‹ç»ğŸ‹</h2><p>HTTPSï¼ˆå…¨ç§°ï¼šHyper Text Transfer Protocol over SecureSocket Layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„ HTTP é€šé“ï¼Œåœ¨HTTPçš„åŸºç¡€ä¸Šé€šè¿‡ä¼ è¾“åŠ å¯†å’Œèº«ä»½è®¤è¯ä¿è¯äº†ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨æ€§ã€‚HTTPS åœ¨HTTP çš„åŸºç¡€ä¸‹åŠ å…¥SSLï¼ŒHTTPS çš„å®‰å…¨åŸºç¡€æ˜¯ SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦ SSLã€‚SSLï¼ˆSecure Sockets Layerï¼‰ä¸­æ–‡å«â€œå®‰å…¨å¥—æ¥å±‚â€ï¼Œåæ¥ç”±äºå¹¿æ³›åº”ç”¨ï¼ŒSSLæ ‡å‡†åŒ–ä¹‹åå°±æ”¹åä¸ºTLSï¼ˆTransport Layer Securityï¼‰äº†ã€‚<br>ä¼—æ‰€å‘¨çŸ¥ï¼ŒWEBæœåŠ¡å­˜åœ¨httpå’Œhttpsä¸¤ç§é€šä¿¡æ–¹å¼ï¼Œhttpé»˜è®¤é‡‡ç”¨80ä½œä¸ºé€šè®¯ç«¯å£ï¼Œå¯¹äºä¼ è¾“é‡‡ç”¨ä¸åŠ å¯†çš„æ–¹å¼ï¼›httpsé»˜è®¤é‡‡ç”¨443ï¼Œå¯¹äºä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚ç›®å‰ä¸»æµçš„ç½‘ç«™åŸºæœ¬ä¸Šå¼€å§‹é»˜è®¤é‡‡ç”¨HTTPSä½œä¸ºé€šä¿¡æ–¹å¼ã€‚HTTPS=HTTP+SSLï¼Œåœ¨HTTPå±‚å’ŒTCPä¹‹é—´åŠ äº†ä¸€ä¸ªSSL/TLSå±‚ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/1678665706.jpg" alt="http.jpg"></p><h2 id="ä¸‰ã€HTTPS-åŸºç¡€çŸ¥è¯†ğŸŸ">ä¸‰ã€HTTPS åŸºç¡€çŸ¥è¯†ğŸŸ</h2><h3 id="1ã€å¯¹ç§°åŠ å¯†">1ã€å¯¹ç§°åŠ å¯†</h3><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/160513986.png" alt="duichen.png"></p><p>HTTPSå¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†å’Œè§£å¯†éƒ½æ˜¯ç”¨<strong>åŒä¸€ä¸ªå¯†é’¥</strong>ã€‚å¦‚æœé€šä¿¡åŒæ–¹éƒ½å„è‡ªæŒæœ‰åŒä¸€ä¸ªå¯†é’¥ï¼Œä¸”æ²¡æœ‰åˆ«äººçŸ¥é“ï¼Œåˆ™ä¸¤æ–¹çš„é€šä¿¡å®‰å…¨æ˜¯å¯ä»¥è¢«ä¿è¯çš„ï¼ˆé™¤éå¯†é’¥è¢«ç ´è§£ï¼‰ã€‚ç„¶è€Œï¼Œæœ€å¤§çš„é—®é¢˜å°±æ˜¯è¿™ä¸ªå¯†é’¥æ€ä¹ˆè®©ä¼ è¾“çš„åŒæ–¹çŸ¥æ™“ï¼ŒåŒæ—¶ä¸è¢«åˆ«äººçŸ¥é“ã€‚å¦‚æœç”±æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå¯†é’¥å¹¶ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œè¿™ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­å¯†é’¥è¢«åˆ«äººåŠ«æŒï¼Œä¹‹åä»–å°±èƒ½ç”¨å¯†é’¥è§£å¼€åŒæ–¹ä¼ è¾“çš„ä»»ä½•å†…å®¹ã€‚<br>HTTPSå¦‚æœæµè§ˆå™¨å†…éƒ¨é¢„å­˜äº†ç½‘ç«™Açš„å¯†é’¥ï¼Œä¸”å¯ä»¥ç¡®ä¿é™¤äº†æµè§ˆå™¨å’Œç½‘ç«™Aï¼Œä¸ä¼šæœ‰ä»»ä½•å¤–äººçŸ¥é“è¯¥å¯†é’¥ï¼Œé‚£ç†è®ºä¸Šç”¨å¯¹ç§°åŠ å¯†æ˜¯å¯ä»¥çš„ã€‚è¿™æ ·ï¼Œæµè§ˆå™¨åªè¦é¢„å­˜å¥½ä¸–ç•Œä¸Šæ‰€æœ‰HTTPSç½‘ç«™çš„å¯†é’¥å°±å¯ä»¥äº†ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·åšæ˜¯ä¸ç°å®çš„ã€‚<br>HTTPSæ€ä¹ˆåŠï¼Ÿè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦éå¯¹ç§°åŠ å¯†ã€‚</p><h3 id="2ã€éå¯¹ç§°åŠ å¯†">2ã€éå¯¹ç§°åŠ å¯†</h3><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/1997021267.png" alt="feiduichen.png"></p><p>åŸºäºå¯¹ç§°åŠ å¯†å­˜åœ¨çš„é—®é¢˜ï¼Œåˆæœ‰äº†éå¯¹ç§°åŠ å¯†ã€‚éå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦<strong>ä¸€ç»„å¯†é’¥å¯¹</strong>ï¼Œåˆ†åˆ«æ˜¯<strong>å…¬é’¥</strong>å’Œ<strong>ç§é’¥</strong>ï¼Œè¿™ä¸¤ä¸ªå¯†é’¥æ˜¯æˆå¯¹å‡ºç°çš„ã€‚<strong>å…¬é’¥åŠ å¯†çš„å†…å®¹éœ€è¦å¯¹åº”çš„ç§é’¥è§£å¯†ï¼Œç§é’¥åŠ å¯†çš„å†…å®¹éœ€è¦å¯¹åº”çš„å…¬é’¥è§£å¯†</strong>ã€‚ç§é’¥ç”±æœåŠ¡å™¨è‡ªå·±ä¿å­˜ï¼Œ<strong>å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯</strong>ã€‚å®¢æˆ·ç«¯æ‹¿åˆ°å…¬é’¥åå¯ä»¥å¯¹è¯·æ±‚è¿›è¡ŒåŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ï¼Œè¿™æ—¶å€™å°±ç®—ä¸­é—´è¢«æˆªè·ï¼Œæ²¡æœ‰ç§é’¥ä¹Ÿæ— æ³•è§£å¯†å‘é€çš„å†…å®¹ï¼Œè¿™æ ·ç¡®ä¿äº†<strong>å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡ç«¯æ•°æ®çš„å®‰å…¨</strong>ã€‚</p><h3 id="3ã€éå¯¹ç§°åŠ å¯†æ”¹è‰¯æ–¹æ¡ˆ">3ã€éå¯¹ç§°åŠ å¯†æ”¹è‰¯æ–¹æ¡ˆ</h3><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/1052174510.png" alt="gailiang.png"></p><p>é€šè¿‡ä¸€ç»„å…¬é’¥ç§é’¥ï¼Œå·²ç»å¯ä»¥ä¿è¯å•ä¸ªæ–¹å‘ä¼ è¾“çš„å®‰å…¨æ€§ï¼Œé‚£ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½ä¿è¯åŒå‘ä¼ è¾“éƒ½å®‰å…¨äº†ï¼Ÿè¯·çœ‹ä¸‹é¢çš„è¿‡ç¨‹ï¼š</p><blockquote><p>(1) æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥A1ã€ç§é’¥A2ï¼›æµè§ˆå™¨æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥B1ã€ç§é’¥B2ã€‚</p><p>(2) æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥A1æ˜æ–‡ä¼ è¾“ç»™æµè§ˆå™¨ã€‚</p><p>(3) æµè§ˆå™¨æŠŠå…¬é’¥B1æ˜æ–‡ä¼ è¾“ç»™æœåŠ¡å™¨ã€‚</p><p>(4) ä¹‹åæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥A1åŠ å¯†ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åç”¨ç§é’¥A2è§£å¯†ã€‚ç”±äºåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰ç§é’¥A2è¿›è¡Œè§£å¯†ï¼Œæ‰€ä»¥èƒ½ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚</p><p>(5) æœåŠ¡å™¨å‘æµè§ˆå™¨ä¼ è¾“çš„æ‰€æœ‰ä¸œè¥¿éƒ½ç”¨å…¬é’¥B1åŠ å¯†ï¼Œæµè§ˆå™¨æ”¶åˆ°åç”¨ç§é’¥B2è§£å¯†ã€‚åŒä¸Šä¹Ÿå¯ä»¥ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚</p></blockquote><p>å¯è§ç¡®å®å¯è¡Œã€‚æŠ›å¼€è¿™é‡Œé¢ä»æœ‰çš„æ¼æ´ä¸è°ˆï¼ˆä¸‹æ–‡ä¼šè®²ï¼‰ï¼ŒHTTPSçš„åŠ å¯†å´æ²¡ä½¿ç”¨è¿™ç§æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿæœ€ä¸»è¦çš„åŸå› æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•éå¸¸è€—æ—¶ï¼Œç‰¹åˆ«æ˜¯åŠ å¯†è§£å¯†ä¸€äº›è¾ƒå¤§æ•°æ®çš„æ—¶å€™æœ‰äº›åŠ›ä¸ä»å¿ƒã€‚è€Œå¯¹ç§°åŠ å¯†å¿«å¾ˆå¤šã€‚é‚£æˆ‘ä»¬èƒ½ä¸èƒ½è¿ç”¨éå¯¹ç§°åŠ å¯†çš„ç‰¹æ€§è§£å†³å‰é¢æåˆ°çš„å¯¹ç§°åŠ å¯†çš„é—®é¢˜ï¼Ÿ</p><h3 id="4ã€éå¯¹ç§°åŠ å¯†-å¯¹ç§°åŠ å¯†">4ã€éå¯¹ç§°åŠ å¯† + å¯¹ç§°åŠ å¯†</h3><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/3398461662.png" alt="fei_dui.png"></p><p>æ—¢ç„¶éå¯¹ç§°åŠ å¯†è€—æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘æ˜¯å¦å¯ä»¥é‡‡ç”¨éå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†ç»“åˆçš„æ–¹å¼ï¼Œè€Œä¸”è¦å°½é‡å‡å°‘éå¯¹ç§°åŠ å¯†çš„æ¬¡æ•°ã€‚<br>éå¯¹ç§°åŠ å¯†ã€è§£å¯†å„åªéœ€ä¸€æ¬¡çš„æ–¹æ³•ï¼š</p><blockquote><p>(1) æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥A1ã€ç§é’¥A2ã€‚</p><p>(2) æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥A1æ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚</p><p>(3) æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥A1åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚</p><p>(4) æœåŠ¡å™¨æ‹¿åˆ°åç”¨ç§é’¥A2è§£å¯†å¾—åˆ°å¯†é’¥Xã€‚</p><p>(5) è¿™æ ·åŒæ–¹å°±éƒ½æ‹¥æœ‰å¯†é’¥Xäº†ï¼Œä¸”åˆ«äººæ— æ³•çŸ¥é“å®ƒã€‚ä¹‹ååŒæ–¹æ‰€æœ‰æ•°æ®éƒ½ç”¨å¯†é’¥XåŠ å¯†è§£å¯†å³å¯ã€‚</p></blockquote><p>HTTPSåŸºæœ¬å°±æ˜¯é‡‡ç”¨äº†è¿™ç§æ–¹æ¡ˆã€‚ä½†è¿˜æ˜¯æœ‰æ¼æ´çš„ã€‚</p><h3 id="5ã€ä¸­é—´äººæ”»å‡»">5ã€ä¸­é—´äººæ”»å‡»</h3><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/2614157517.png" alt="midden.png"></p><p>ä¸­é—´äººçš„ç¡®æ— æ³•å¾—åˆ°æµè§ˆå™¨ç”Ÿæˆçš„å¯¹ç§°å¯†é’¥Xï¼Œè¿™ä¸ªå¯†é’¥æœ¬èº«è¢«å…¬é’¥A1åŠ å¯†ï¼Œåªæœ‰æœåŠ¡å™¨æ‰èƒ½ç”¨ç§é’¥A2è¿›è¡Œè§£å¯†ã€‚ç„¶è€Œä¸­é—´äººå´å®Œå…¨ä¸éœ€è¦æ‹¿åˆ°ç§é’¥A2å°±èƒ½åŠ«æŒä¿¡æ¯ï¼Œè¯·çœ‹ï¼š</p><blockquote><p>(1) æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥A1ã€ç§é’¥A2ã€‚</p><p>(2) æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥A1æ˜æ–‡ä¼ è¾“ç»™æµè§ˆå™¨ã€‚</p><p>(3) ä¸­é—´äººåŠ«æŒåˆ°å…¬é’¥A1ï¼Œä¿å­˜ä¸‹æ¥ï¼ŒæŠŠæ•°æ®åŒ…ä¸­çš„å…¬é’¥A1æ›¿æ¢æˆè‡ªå·±ä¼ªé€ çš„å…¬é’¥B1ï¼ˆå®ƒå½“ç„¶ä¹Ÿæ‹¥æœ‰å…¬é’¥B1å¯¹åº”çš„ç§é’¥B2ï¼‰ã€‚</p><p>(4) æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥B1ï¼ˆæµè§ˆå™¨ä¸çŸ¥é“å…¬é’¥è¢«æ›¿æ¢äº†ï¼‰åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚</p><p>(5) ä¸­é—´äººåŠ«æŒåç”¨ç§é’¥B2è§£å¯†å¾—åˆ°å¯†é’¥Xï¼Œå†ç”¨å…¬é’¥A1åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚</p><p>(6) æœåŠ¡å™¨æ‹¿åˆ°åç”¨ç§é’¥A2è§£å¯†å¾—åˆ°å¯†é’¥Xã€‚</p></blockquote><p>è¿™æ ·åœ¨åŒæ–¹éƒ½ä¸ä¼šå‘ç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸­é—´äººå¾—åˆ°äº†å¯¹ç§°å¯†é’¥Xã€‚æ ¹æœ¬åŸå› æ˜¯æµè§ˆå™¨æ— æ³•ç¡®è®¤è‡ªå·±æ”¶åˆ°çš„å…¬é’¥æ˜¯ä¸æ˜¯ç½‘ç«™è‡ªå·±çš„ã€‚é‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå¦‚ä½•è¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ</p><h3 id="6ã€æ•°å­—è¯ä¹¦">6ã€æ•°å­—è¯ä¹¦</h3><p>ç°å®ç”Ÿæ´»ä¸­ï¼Œå¦‚æœæƒ³è¯æ˜æŸèº«ä»½è¯å·ä¸€å®šæ˜¯å°æ˜çš„ï¼Œæ€ä¹ˆåŠï¼Ÿçœ‹èº«ä»½è¯ã€‚è¿™é‡Œæ”¿åºœæœºæ„èµ·åˆ°äº†â€œå…¬ä¿¡â€çš„ä½œç”¨ï¼Œèº«ä»½è¯æ˜¯ç”±å®ƒé¢å‘çš„ï¼Œå®ƒæœ¬èº«çš„æƒå¨å¯ä»¥å¯¹ä¸€ä¸ªäººçš„èº«ä»½ä¿¡æ¯ä½œå‡ºè¯æ˜ã€‚äº’è”ç½‘ä¸­ä¹Ÿæœ‰è¿™ä¹ˆä¸€ä¸ªå…¬ä¿¡æœºæ„ï¼ŒCA æœºæ„ã€‚<br>ç½‘ç«™åœ¨ä½¿ç”¨HTTPSå‰ï¼Œéœ€è¦å‘â€œ<strong>CAæœºæ„</strong>â€ç”³è¯·é¢å‘ä¸€<strong>æ•°å­—è¯ä¹¦</strong>ï¼Œæ•°å­—è¯ä¹¦é‡Œæœ‰<strong>è¯ä¹¦æŒæœ‰è€…ã€è¯ä¹¦æŒæœ‰è€…çš„å…¬é’¥ç­‰ä¿¡æ¯</strong>ã€‚æœåŠ¡å™¨æŠŠè¯ä¹¦ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä»è¯ä¹¦é‡Œå–å…¬é’¥å°±å¯ä»¥äº†ã€‚</p><p>é‚£è¿™ä¸ªæ•°å­—è¯ä¹¦æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿæ€»ä¸èƒ½æ˜¯æœåŠ¡å™¨è‡ªå·±é€ ä¸€ä¸ªå§ï¼Ÿä¸Šé¢è¯´åˆ°äº†æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„è¯ä¹¦æ˜¯ç”±æƒå¨æœºæ„é¢å‘çš„ã€æ— æ³•ä¼ªé€ çš„ï¼Œæ¯”å¦‚èº«ä»½è¯å°±æ˜¯ç”±æ´¾å‡ºæ‰€å‘è¯ã€æ¯•ä¸šè¯ç”±æ•™è‚²éƒ¨å‘è¯ï¼Œå¦‚æœéœ€è¦éªŒè¯çœŸå‡ï¼Œåªéœ€è¦ä¸Šç›¸å…³çš„ç³»ç»Ÿè¾“å…¥ç¼–å·æŸ¥è¯¢å°±èƒ½æŸ¥åˆ°äº†ï¼é‚£æˆ‘ä»¬æ•°å­—è¯ä¹¦ä¹Ÿåº”è¯¥æœ‰è¿™ä¸¤ä¸ªç‰¹æ€§-<strong>æƒå¨æœºæ„é¢å‘ã€é˜²ä¼ª</strong>ï¼</p><p>ä¸€ä¸ªæ ‡å‡†çš„æ•°å­—è¯ä¹¦ï¼ˆX.509æ•°å­—è¯ä¹¦ï¼‰ä¼šåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><blockquote><p>(1) ç‰ˆæœ¬ä¿¡æ¯</p><p>(2) åºåˆ—å· : æ¯ä¸ªè¯ä¹¦éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è¯ä¹¦åºåˆ—å·ï¼›</p><p>(3) ç­¾åç®—æ³• : è¿™ä¸ªæ˜¯CAæœºæ„åœ¨è¯¥è¯ä¹¦ä¸­è¿›è¡Œæ•°å­—ç­¾åæ—¶æ‰€ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨CAæœºæ„å‘å¸ƒçš„è¯ä¹¦é‡Œé¢çš„å…¬é’¥ï¼Œç„¶åæ ¹æ®è¿™ä¸ªç­¾åç®—æ³•å¯¹æŒ‡çº¹è¿›è¡Œè§£å¯†ã€‚æŒ‡çº¹çš„åŠ å¯†ç»“æœå°±æ˜¯CAæœºæ„ä½¿ç”¨è‡ªå·±ç§é’¥è¿›è¡Œçš„æ•°å­—ç­¾åã€‚</p><p>(4) ç­¾åå“ˆå¸Œç®—æ³• : CAæœºæ„åœ¨è¿›è¡Œæ•°å­—ç­¾åä¹‹å‰ï¼Œå¯¹è¯ä¹¦çš„ä¸»ä½“éƒ¨åˆ†è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç„¶åæ‰å¯¹è¿™å“ˆå¸Œåçš„å†…å®¹è¿›è¡Œç­¾åã€‚</p><p>(5) å‘è¡Œæœºæ„ : è¯´æ˜æ—¶å“ªä¸ªCAæœºæ„å‘å¸ƒè¿™ä¸ªè¯ä¹¦ã€‚</p><p>(6) è¯ä¹¦æœ‰æ•ˆæœŸ : å¦‚æœè¿‡äº†æœ‰æ•ˆæœŸï¼Œè¯ä¹¦ä½œåºŸï¼Œä¸èƒ½ä½¿ç”¨ï¼›</p><p>(7) è¯ä¹¦æ‰€æœ‰äºº : è¯´æ˜è¿™ä¸ªè¯ä¹¦å‘å¸ƒç»™è°ï¼Œä¸€èˆ¬æ˜¯ä¸ªäººã€å…¬å¸åç§°ã€æœºæ„åç§°æˆ–è€…ç½‘ç«™åœ°å€ç­‰ï¼Œä¾‹å¦‚æˆ‘çš„ä¸ªäººåšå®¢ï¼šwhbblog.cnå°±æ˜¯è¯ä¹¦çš„æ‰€æœ‰è€…ã€‚</p><p>(8) è¯ä¹¦æ‰€æœ‰äººçš„å…¬é’¥ : è¿™é‡Œæ˜¯è¯ä¹¦æ‹¥æœ‰è€…çš„å…¬é’¥ï¼Œä¹Ÿå°±æ˜¯ä¸ªäººã€å…¬å¸ã€æœºæ„ã€ç½‘ç«™ç­‰æ‰€æœ‰è€…çš„å…¬é’¥ã€‚</p><p>(9) è®¤è¯æœºæ„çš„æ•°å­—ç­¾å : è¿™ä¸ªæ˜¯CAæœºæ„ç”¨ç§é’¥ç”Ÿæˆçš„ç­¾åï¼Œç”¨äºç¡®ä¿è¯ä¹¦æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ã€‚</p></blockquote><h3 id="7ã€CAæœºæ„">7ã€CAæœºæ„</h3><p>CA(Certification Authority)æœºæ„ï¼Œå°±æ˜¯æ•°å­—è¯ä¹¦é¢å‘çš„æƒå¨æœºæ„ï¼Œè´Ÿè´£<strong>é¢å‘è¯ä¹¦</strong>ä»¥åŠ<strong>éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§</strong>ã€‚</p><p>æœåŠ¡å™¨å‘CAæœºæ„æäº¤ç”³è¯·ï¼Œéœ€è¦æäº¤ç«™ç‚¹çš„ä¿¡æ¯å¦‚åŸŸåã€å…¬å¸åç§°ã€å…¬é’¥ç­‰ç­‰ï¼ŒCAå®¡æ‰¹æ— è¯¯ä¹‹åå°±å¯ä»¥ç»™æœåŠ¡å™¨é¢å‘è¯ä¹¦äº†ï¼æ­¤è¯ä¹¦è¢« CA è¿›è¡Œäº†æ•°å­—ç­¾åã€‚ä»»ä½•ç”¨æˆ·éƒ½å¯ä»å¯ä¿¡çš„åœ°æ–¹è·å¾—è®¤è¯ä¸­å¿ƒ CA çš„å…¬é’¥ï¼Œæ­¤å…¬é’¥ç”¨æ¥éªŒè¯æŸä¸ªå…¬é’¥æ˜¯å¦ä¸ºæŸä¸ªå®ä½“æ‰€æ‹¥æœ‰ã€‚æœ‰çš„å¤§å…¬å¸ä¹Ÿæä¾›è®¤è¯ä¸­å¿ƒæœåŠ¡ã€‚</p><p>æ•°å­—è¯ä¹¦çš„éªŒè¯è¿‡ç¨‹éœ€è¦ç”¨åˆ° <strong>CAæ ¹è¯ä¹¦</strong> å’Œ <strong>ä¸šåŠ¡ç›¸å…³è¯ä¹¦</strong>ï¼Œ<strong>æ ¹è¯ä¹¦</strong> æ˜¯é¢„è£…åœ¨æ“ä½œç³»ç»Ÿä¸­çš„ã€‚åœ¨ç†è§£æ•°å­—è¯ä¹¦å·¥ä½œåŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£è¿™ä¸¤ç§è¯ä¹¦æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼š</p><h4 id="ï¼ˆ1ï¼‰CAæ ¹è¯ä¹¦çš„ç”Ÿæˆ">ï¼ˆ1ï¼‰CAæ ¹è¯ä¹¦çš„ç”Ÿæˆ</h4><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/3185345198.png" alt="CAæ ¹è¯ä¹¦ç”Ÿæˆ.png"></p><blockquote><p>a. æƒå¨æœºæ„åˆ©ç”¨RSAç­‰ç®—æ³•ï¼Œç”Ÿæˆä¸€å¯¹ å…¬é’¥PK1 / ç§é’¥SK1;</p><p>b. å°†å…¬é’¥PK1å’Œè¯ä¹¦å‘å¸ƒæœºæ„ã€æœ‰æ•ˆæœŸç­‰ä¿¡æ¯ç»„æˆä¸€ä»½åŸå§‹çš„è¯ä¹¦å†…å®¹ï¼Œè®¾ä¸º C ï¼›</p><p>c. åˆ©ç”¨æŸç§æ‘˜è¦ç®—æ³•ï¼Œè®¡ç®—åŸå§‹å†…å®¹ C çš„æ•°å­—æ‘˜è¦ï¼Œè®¾ä¸º Hï¼›</p><p>d. ç”¨ç¬¬ä¸€æ­¥ç”Ÿæˆçš„ç§é’¥SK1ï¼Œå¯¹æ‘˜è¦Hç­¾åï¼Œå¾—åˆ°ç­¾åå†…å®¹Sï¼›</p><p>e. å°†åŸå§‹å†…å®¹ C å’Œ ç­¾åå†…å®¹ S åˆåœ¨ä¸€èµ·ï¼Œå°±å¾—åˆ°äº†æ ¹è¯ä¹¦ã€‚</p></blockquote><p>æ ¹è¯ä¹¦å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºæ ¹è¯ä¹¦æ˜¯ä¸€å®šæ­£ç¡®çš„ã€‚</p><h4 id="ï¼ˆ2ï¼‰ä¸šåŠ¡ç›¸å…³è¯ä¹¦çš„ç”Ÿæˆ">ï¼ˆ2ï¼‰ä¸šåŠ¡ç›¸å…³è¯ä¹¦çš„ç”Ÿæˆ</h4><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/3642841564.png" alt="ä¸šåŠ¡è¯ä¹¦ç”Ÿæˆ.png"></p><blockquote><p>a. ä¼ä¸šåˆ©ç”¨RSAç­‰ç®—æ³•ï¼Œç”Ÿæˆä¸€å¯¹ å…¬é’¥PK2 / ç§é’¥SK2ï¼›</p><p>b. å°† å…¬é’¥PK2 å’Œ è¯ä¹¦å…¶ä»–å†…å®¹ ç»„æˆåŸå§‹è¯ä¹¦å†…å®¹ï¼Œè®¾ä¸ºCï¼Œç»™åˆ°CAæƒå¨æœºæ„ï¼›</p><p>c. æƒå¨æœºæ„æ‹¿åˆ° C åï¼Œåˆ©ç”¨æ‘˜è¦ç®—æ³•ï¼Œç”Ÿæˆæ‘˜è¦ä¿¡æ¯ H;</p><p>d. æƒå¨æœºæ„ç”¨è‡ªå·±çš„ç§é’¥SK1 (è¿™æ˜¯å…³é”®ç‚¹)ï¼Œå¯¹æ‘˜è¦ä¿¡æ¯ H ç­¾åï¼Œå¾—åˆ°ç­¾åå†…å®¹ S ;</p><p>e. å°† åŸå§‹å†…å®¹C å’Œ ç­¾åå†…å®¹S åˆå¹¶åˆ°ä¸€èµ·ï¼Œå¾—åˆ°ä¸šåŠ¡ç›¸å…³è¯ä¹¦ï¼Œäº¤ç»™ä¼ä¸šã€‚</p></blockquote><p>**æ ¹è¯ä¹¦å’Œä¸šåŠ¡è¯ä¹¦åŒºåˆ«ç‚¹åœ¨äºï¼š**ä¸šåŠ¡ç”³è¯·çš„è¯ä¹¦ï¼Œåœ¨ç­¾åæ—¶ç”¨çš„ç§é’¥æ˜¯CAæœºæ„çš„ç§é’¥ã€‚è¿™ä¸ªç§é’¥æ˜¯å’Œæ ¹è¯ä¹¦ä¸­çš„å…¬é’¥å¯¹åº”çš„ã€‚</p><h3 id="8ã€æ•°å­—ç­¾å">8ã€æ•°å­—ç­¾å</h3><p>æˆ‘ä»¬æŠŠè¯ä¹¦å†…å®¹ç”Ÿæˆä¸€ä»½â€œç­¾åâ€ï¼Œæ¯”å¯¹è¯ä¹¦å†…å®¹å’Œç­¾åæ˜¯å¦ä¸€è‡´å°±èƒ½å¯Ÿè§‰æ˜¯å¦è¢«ç¯¡æ”¹ã€‚è¿™ç§æŠ€æœ¯å°±å«æ•°å­—ç­¾åã€‚ä¸‹å›¾ä¸­å·¦ä¾§æ˜¯æ•°å­—ç­¾åçš„åˆ¶ä½œè¿‡ç¨‹ï¼Œå³ä¾§æ˜¯éªŒè¯è¿‡ç¨‹ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/1197464482.png" alt="ç­¾å.png"></p><h4 id="ï¼ˆ1ï¼‰å‘é€æ–¹Aæ•°å­—ç­¾åçš„åˆ¶ä½œè¿‡ç¨‹">ï¼ˆ1ï¼‰å‘é€æ–¹Aæ•°å­—ç­¾åçš„åˆ¶ä½œè¿‡ç¨‹</h4><blockquote><ul><li><p>å‘é€æ–¹Aæ‹¥æœ‰éå¯¹ç§°åŠ å¯†çš„ç§é’¥å’Œå…¬é’¥ã€‚</p></li><li><p>å‘é€æ–¹Aå¯¹è¯ä¹¦æ˜æ–‡ä¿¡æ¯è¿›è¡Œhashï¼Œå¾—åˆ°ä¿¡æ¯æ‘˜è¦ã€‚</p></li><li><p>å‘é€æ–¹Aç”¨ç§é’¥å¯¹æ¶ˆæ¯æ‘˜è¦åŠ å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åã€‚</p></li></ul></blockquote><p><strong>æé—®ï¼š</strong></p><p><strong>ä¸ºä»€ä¹ˆå¯¹æ˜¯å¯¹æ¶ˆæ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ç­¾åï¼Ÿ</strong></p><p>å¯¹äºè¾ƒå¤§æ–‡ä»¶è€Œè¨€ï¼Œæ¶ˆæ¯æ‘˜è¦å³å¯å°†æ¶ˆæ¯è½¬æ¢æˆç®€çŸ­çš„ä¿¡æ¯æ‘˜è¦ï¼Œç”¨ä»¥éªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œè¿˜å¯å‹ç¼©ä¿¡æ¯é•¿åº¦æé«˜ç­¾åæ•ˆç‡ã€‚</p><h4 id="ï¼ˆ2ï¼‰æ¥æ”¶æ–¹Bæ•°å­—ç­¾åçš„éªŒè¯è¿‡ç¨‹">ï¼ˆ2ï¼‰æ¥æ”¶æ–¹Bæ•°å­—ç­¾åçš„éªŒè¯è¿‡ç¨‹</h4><blockquote><ul><li><p>æ¥æ”¶æ–¹Bæ¥å—åˆ°æ¶ˆæ¯åŠå…¶ç­¾ååï¼Œç”¨å‘é€æ–¹Açš„å…¬é’¥è§£å¯†è¿™ä¸ªç­¾åï¼Œè·å¾—ç”±å‘é€Aç”Ÿæˆçš„æ¶ˆæ¯æ‘˜è¦ã€‚</p></li><li><p>æ¥æ”¶æ–¹Bç”¨å‘é€æ–¹Aæ‰€ç”¨çš„Hashç®—æ³•é‡æ–°ç”Ÿæˆæ‰€è·å¾—çš„æ¶ˆæ¯çš„æ‘˜è¦ã€‚</p></li><li><p>æ¥æ”¶æ–¹Bå¯¹æ¯”è¿™ä¸¤ä¸ªæ‘˜è¦ã€‚å¦‚æœç›¸åŒï¼Œ<strong>è¯´æ˜è¿™ä¸ªç­¾åæ˜¯å‘é€æ–¹Aé’ˆå¯¹è¿™ä¸ªæ¶ˆæ¯çš„æœ‰æ•ˆç­¾åï¼›å¦‚æœä¸ç›¸åŒï¼Œåˆ™ç­¾åæ— æ•ˆ</strong>ã€‚</p></li></ul></blockquote><p><strong>æé—®ï¼š</strong></p><p><strong>åˆ¶ä½œæ•°å­—ç­¾åæ—¶ä¸ºä»€ä¹ˆéœ€è¦hashä¸€æ¬¡</strong>ï¼Ÿ<br>æœ€æ˜¾ç„¶çš„æ˜¯æ€§èƒ½é—®é¢˜ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è¯´äº†éå¯¹ç§°åŠ å¯†æ•ˆç‡è¾ƒå·®ï¼Œè¯ä¹¦ä¿¡æ¯ä¸€èˆ¬è¾ƒé•¿ï¼Œæ¯”è¾ƒè€—æ—¶ã€‚è€Œhashåå¾—åˆ°çš„æ˜¯å›ºå®šé•¿åº¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨md5ç®—æ³•hashåå¯ä»¥å¾—åˆ°å›ºå®šçš„128ä½çš„å€¼ï¼‰ï¼Œè¿™æ ·åŠ å¯†è§£å¯†å°±ä¼šå¿«å¾ˆå¤šã€‚å½“ç„¶é™¤æ­¤ä¹‹å¤–ä¹Ÿæœ‰å®‰å…¨ä¸Šçš„åŸå› ã€‚</p><p><strong>HTTPSå¿…é¡»åœ¨æ¯æ¬¡è¯·æ±‚ä¸­éƒ½è¦å…ˆåœ¨SSL/TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ</strong><br>æ˜¾ç„¶æ¯æ¬¡è¯·æ±‚éƒ½ç»å†ä¸€æ¬¡å¯†é’¥ä¼ è¾“è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œé‚£æ€ä¹ˆè¾¾åˆ°åªä¼ è¾“ä¸€æ¬¡å‘¢ï¼Ÿç”¨sessionå°±å¯ä»¥ã€‚æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæµè§ˆå™¨ï¼ˆæˆ–å®¢æˆ·ç«¯è½¯ä»¶ï¼‰ç»´æŠ¤ä¸€ä¸ªsession IDï¼Œåœ¨TSLæ¡æ‰‹é˜¶æ®µä¼ ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç”Ÿæˆå¥½å¯†é’¥ä¼ ç»™æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥å¯†é’¥å­˜åˆ°ç›¸åº”çš„session IDä¸‹ï¼Œä¹‹åæµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦session IDï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®session IDæ‰¾åˆ°ç›¸åº”çš„å¯†é’¥å¹¶è¿›è¡Œè§£å¯†åŠ å¯†æ“ä½œï¼Œè¿™æ ·å°±ä¸å¿…è¦æ¯æ¬¡é‡æ–°åˆ¶ä½œã€ä¼ è¾“å¯†é’¥äº†ã€‚</p><h2 id="å››ã€HTTPS-å·¥ä½œåŸç†ğŸ ">å››ã€HTTPS å·¥ä½œåŸç†ğŸ </h2><p><img src="https://www.whbblog.cn/usr/uploads/2022/02/2722565772.jpg" alt="httpsåŸç†.jpg"></p><blockquote><ol><li><p>ä¸€èˆ¬ã€å®¢æˆ·ç«¯ã€‘é¦–å…ˆå‘èµ·è¯·æ±‚ï¼Œä¾‹å¦‚è¯·æ±‚ç½‘ç«™https://www.whbblog.cn/, ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼ˆRandomCï¼‰ï¼Œæºå¸¦æ”¯æŒçš„TLSç‰ˆæœ¬ã€åŠ å¯†ç®—æ³•ç­‰ä¿¡æ¯å‘é€è‡³ã€æœåŠ¡ç«¯ã€‘ã€‚</p></li><li><p>ã€æœåŠ¡ç«¯ã€‘æ”¶åˆ°è¯·æ±‚ï¼Œè¿”å›è¯ä¹¦ã€ä¸€ä¸ªéšæœºæ•°ï¼ˆRandomSï¼‰ã€åå•†åŠ å¯†ç®—æ³•ã€‚</p></li><li><p>ã€å®¢æˆ·ç«¯ã€‘æ‹¿åˆ°è¯ä¹¦åå¼€å§‹è¿›è¡Œæ ¡éªŒï¼ŒéªŒè¯å…¶åˆæ³•æ€§ã€‚å®¢æˆ·ç«¯é€šè¿‡æœ¬åœ°æµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿå†…ç½®çš„æƒå¨ç¬¬ä¸‰æ–¹è®¤è¯æœºæ„çš„CAè¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œä¸€ä¸ªè¯ä¹¦åŒ…å«åŸŸåã€è¯ä¹¦ç¼–å·ã€å…¬é’¥ã€æœ‰æ•ˆæœŸç­‰ä¿¡æ¯ï¼Œè¯ä¹¦ç¼–å·æ˜¯åœ¨æœåŠ¡å™¨ç®¡ç†å‘˜é€šè¿‡ç¬¬ä¸‰æ–¹è¯ä¹¦æœºæ„ç”³è¯·è¯ä¹¦çš„æ—¶å€™ï¼Œç¬¬ä¸‰æ–¹æœºæ„ç”¨ä»–ä»¬çš„ç§é’¥å¯¹è¯ä¹¦ç¼–å·è¿›è¡ŒåŠ å¯†å­˜å…¥è¯ä¹¦ï¼Œæ ¹æ®ç¼–å·ç”Ÿæˆæ–¹æ³•ç”Ÿæˆè¯ä¹¦ç¼–å·ï¼ˆè¯ä¹¦æœ¬èº«æºå¸¦äº†ç”Ÿæˆè¯ä¹¦ç¼–å·çš„æ–¹æ³•ï¼‰ï¼Œä¸CAè¯ä¹¦å…¬é’¥è§£å¯†å¾—å‡ºçš„è¯ä¹¦ç¼–å·è¿›è¡Œå¯¹æ¯”ï¼ŒéªŒè¯ä¸é€šè¿‡æˆ–è€…è¯ä¹¦è¿‡æœŸç­‰æƒ…å†µå°±æç¤ºå­˜åœ¨é£é™©ï¼ˆæµè§ˆå™¨çš„çº¢è‰²è­¦å‘Šï¼‰ï¼ŒéªŒè¯é€šè¿‡åˆ™è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p></li><li><p>ã€å®¢æˆ·ç«¯ã€‘ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼ˆPreMaster Keyï¼‰ï¼Œæ­¤æ—¶å·²ç»æœ‰ç¬¬ä¸‰ä¸ªéšæœºæ•°äº†ï¼Œæ ¹æ®ä¸‰ä¸ªéšæœºæ•°ï¼ˆRandomCã€RandomSã€PreMaster Keyï¼‰æŒ‰ç…§åŒæ–¹çº¦å®šçš„ç®—æ³•ç”Ÿæˆç”¨äºåé¢ä¼šè¯çš„åŒä¸€æŠŠçš„â€œä¼šè¯å¯†é’¥â€ã€‚</p></li><li><p>ã€å®¢æˆ·ç«¯ã€‘å°†éšæœºæ•°ï¼ˆPreMaster Keyï¼‰é€šè¿‡å…¬é’¥åŠ å¯†åå‘é€è‡³ã€æœåŠ¡ç«¯ã€‘ã€‚</p></li><li><p>ã€æœåŠ¡ç«¯ã€‘æ”¶åˆ°å¯†æ–‡åç”¨ç§é’¥è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°éšæœºæ•°ï¼ˆPreMaster Keyï¼‰ï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä¹Ÿæ‹¥æœ‰äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œæ ¹æ®ä¸‰ä¸ªéšæœºæ•°æŒ‰ç…§äº‹å…ˆçº¦å®šçš„åŠ å¯†ç®—æ³•ç”Ÿæˆç”¨äºåé¢ä¼šè¯çš„åŒä¸€æŠŠçš„â€œä¼šè¯å¯†é’¥â€ã€‚</p></li><li><p>ã€æœåŠ¡ç«¯ã€‘è®¡ç®—æ­¤å‰æ‰€æœ‰å†…å®¹çš„æ¡æ‰‹æ¶ˆæ¯hashå€¼ï¼Œå¹¶ç”¨â€œä¼šè¯å¯†é’¥â€åŠ å¯†åå‘é€è‡³å®¢æˆ·ç«¯ç”¨äºéªŒè¯ã€‚</p></li><li><p>ã€å®¢æˆ·ç«¯ã€‘è§£å¯†å¹¶è®¡ç®—æ¡æ‰‹æ¶ˆæ¯çš„hashå€¼ï¼Œå¦‚æœä¸æœåŠ¡ç«¯å‘æ¥çš„hashä¸€è‡´ï¼Œæ­¤æ—¶æ¡æ‰‹è¿‡ç¨‹ç»“æŸã€‚</p></li><li><p>éªŒè¯é€šè¿‡åï¼Œå¼€å§‹æ­£å¸¸çš„åŠ å¯†é€šä¿¡ã€‚</p></li></ol></blockquote><h2 id="äº”ã€å‚è€ƒé“¾æ¥ğŸ™">äº”ã€å‚è€ƒé“¾æ¥ğŸ™</h2><p><strong>æ„Ÿè°¢ä»¥ä¸‹å¤§ä½¬æ–‡æ¡£æ”¯æŒï¼ï¼ï¼</strong></p><blockquote><p>ğŸ…<a href="https://www.cnblogs.com/sxiszero/p/11133747.html">HTTPS åŠ å¯†æœºåˆ¶ - SXISZERO - åšå®¢å›­ (cnblogs.com)</a></p><p>ğŸ¥•<a href="https://mp.weixin.qq.com/s/GZFiDQkZleSmriiNs4E1sA">çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å¥¶å¥¶éƒ½æ‡‚äº†httpsçš„åŸç† (qq.com)</a></p><p>ğŸ“<a href="https://www.8btc.com/media/631309">ç§‘æ™® | æ•°å­—ç­¾åçš„æ¦‚å¿µåŠå…¶åŸç† | å·´æ¯”ç‰¹ (8btc.com)</a></p><p>ğŸ‰<a href="https://www.jianshu.com/p/b2774634041a">æ‘˜è¦ã€ç­¾åä¸æ•°å­—è¯ä¹¦éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ - ç®€ä¹¦ (jianshu.com)</a></p><p>ğŸ<a href="https://www.thinktxt.com/http/2019/08/15/diagrammatize-https.html">å›¾è§£HTTPSåŸºæœ¬åŸç† - Thinktxt</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> tcpip </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTPS </tag>
            
            <tag> HTTP </tag>
            
            <tag> HTTPSåŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SHELL åŸºç¡€</title>
      <link href="/posts/e95a29911e6c.html"/>
      <url>/posts/e95a29911e6c.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€shellä»‹ç»ğŸ’">ä¸€ã€shellä»‹ç»ğŸ’</h2><p>shellæ˜¯ä¸€ä¸ªç¨‹åºï¼Œé‡‡ç”¨Cè¯­è¨€ç¼–å†™ï¼Œæ˜¯ç”¨æˆ·å’Œlinuxå†…æ ¸æ²Ÿé€šçš„æ¡¥æ¢ã€‚å®ƒæ—¢æ˜¯ä¸€ç§å‘½ä»¤è¯­è¨€ï¼Œåˆæ˜¯ä¸€ç§è§£é‡Šæ€§çš„ç¼–ç¨‹è¯­è¨€ã€‚é€šè¿‡ä¸€ä¸ªå›¾è¡¨æ¥æŸ¥çœ‹ä¸€ä¸‹shellçš„ä½œç”¨ã€‚</p><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/14/1600050927043.png" alt="00_shell.png"></p><h2 id="äºŒã€å˜é‡ğŸ‹">äºŒã€å˜é‡ğŸ‹</h2><h3 id="1ã€å˜é‡ä»‹ç»">1ã€å˜é‡ä»‹ç»</h3><p><code>å˜é‡</code>ï¼šå˜é‡æ˜¯ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ä¸´æ—¶åœ¨å†…å­˜ä¸­å­˜å–æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚</p><p><strong>å˜é‡å­˜å–åŸç†</strong></p><blockquote><p>å…³äºå†…å­˜çš„è¯´æ˜<br>aã€ç³»ç»Ÿå¯åŠ¨  -&gt;  å†…å­˜è¢«æŒ‰ç…§1Bä¸€ä¸ªå•ä½åˆ’åˆ†æˆNå—   -&gt;  å¹¶ä¸”ä»¥åå…­è¿›åˆ¶ä¸ºæ¯ä¸€ä¸ªç©ºé—´ç¼–å·</p><p>bã€å†…å­˜è·Ÿè¸ªè¡¨è®°å½•  -&gt;  ä½¿ç”¨å’Œæœªä½¿ç”¨çš„å†…å­˜çš„åœ°å€ç¼–å·</p><p>cã€å†…å­˜ç”³è¯·  -&gt;  ç³»ç»Ÿä»æœªä½¿ç”¨çš„å†…å­˜ä¸­æ‹¿å‡ºä¸€ä¸ªæˆ–è€…ä¸€æ®µè¿ç»­ç©ºé—´ç»™ä½ ä½¿ç”¨,åŒæ—¶åœ¨å†…å­˜è·Ÿè¸ªè¡¨ä¸­è®°å½•è¯¥åœ°å€è¢«å ç”¨ä¸åœ¨åˆ†ç»™åˆ«äººï¼ŒåŒæ—¶åœ¨ç³»ç»Ÿä¸­å»ºç«‹æ˜ å°„æœºåˆ¶   ç¤ºä¾‹:å˜é‡å STRING1=â€˜ABCâ€™name&lt;==&gt;0x5</p><p>dã€é‡Šæ”¾å†…å­˜ä»å†…å­˜è·Ÿè¸ªè¡¨ä¸­å°†è®°å½•åˆ é™¤ï¼Œä¸‹æ¬¡å­˜æ•°æ®ç›´æ¥è¦†ç›–</p></blockquote><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/21/1600685218168.png" alt="å˜é‡å­˜å‚¨.png"></p><h3 id="2ã€å˜é‡å®šä¹‰">2ã€å˜é‡å®šä¹‰</h3><h4 id="2-1-ä»€ä¹ˆæ—¶å€™éœ€è¦å®šä¹‰å˜é‡ï¼Ÿ">2.1 ä»€ä¹ˆæ—¶å€™éœ€è¦å®šä¹‰å˜é‡ï¼Ÿ</h4><p>å¦‚æœæŸä¸ªå†…å®¹éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­é‡å¤å‡ºç°ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å˜é‡ä»£è¡¨è¯¥å†…å®¹ã€‚è¿™æ ·åœ¨ä¿®æ”¹å†…å®¹çš„æ—¶å€™ï¼Œä»…ä»…éœ€è¦ä¿®æ”¹å˜é‡çš„å€¼ã€‚åœ¨ä»£ç è¿ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæŠŠæŸäº›å‘½ä»¤çš„æ‰§è¡Œç»“æœä¿å­˜èµ·æ¥ï¼Œåç»­ä»£ç éœ€è¦ä½¿ç”¨è¿™äº›ç»“æœï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚</p><h4 id="2-2-å®šä¹‰ä¸€ä¸ªå˜é‡">2.2 å®šä¹‰ä¸€ä¸ªå˜é‡</h4><p>åœ¨shellç¼–ç¨‹ä¸­çš„å˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡åå‘½åè§„åˆ™ï¼š</span><br><span class="line">    å‘½ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¦–ä¸ªå­—ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚</span><br><span class="line">    ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚</span><br><span class="line">    ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ã€‚</span><br><span class="line">    å­—ç¬¦ä¸²è¦ç”¨å•å¼•å·æˆ–åŒå¼•å·å¼•èµ·æ¥</span><br><span class="line">    ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ï¼ˆå¯ç”¨helpå‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰ã€‚</span><br></pre></td></tr></table></figure><p><strong>å®šä¹‰å˜é‡æ¼”ç¤ºï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡èµ‹å€¼ï¼Œæ­¤ç§æ–¹æ³•è®¾ç½®ä¸ºæœ¬åœ°å˜é‡</span><br><span class="line">[root@zutuanxue ~]# name=&quot;baism&quot;</span><br><span class="line">[root@zutuanxue ~]# school=&#x27;ayitula&#x27;</span><br><span class="line">[root@zutuanxue ~]# age=30</span><br><span class="line">[root@zutuanxue ~]# score=88.8</span><br></pre></td></tr></table></figure><h4 id="2-3-å–æ¶ˆå˜é‡-unset">2.3 å–æ¶ˆå˜é‡ unset</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å–æ¶ˆå½“å‰ç¯å¢ƒä¸­çš„å˜é‡ï¼Œå¦‚æœæ˜¯å˜é‡è®¾ç½®æ˜¯ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡é‡å¯åˆä¼šæ¢å¤</span><br><span class="line">[root@zutuanxue ~]<span class="comment"># unset name</span></span><br><span class="line">[root@zutuanxue ~]<span class="comment"># echo $name</span></span><br></pre></td></tr></table></figure><h4 id="2-4-æœ‰ç±»å‹å˜é‡-declare">2.4 æœ‰ç±»å‹å˜é‡ declare</h4><blockquote><p>-i å°†å˜é‡çœ‹æˆæ•´æ•°</p><p>-r ä½¿å˜é‡åªè¯» readonly,è¯¥å˜é‡çš„å€¼æ— æ³•æ”¹å˜ï¼Œå¹¶ä¸”ä¸èƒ½ä¸ºunset</p><p>-x æ ‡è®°å˜é‡é€šè¿‡ç¯å¢ƒå¯¼å‡º export</p><p>-a æŒ‡å®šä¸ºç´¢å¼•æ•°ç»„ï¼ˆæ™®é€šæ•°ç»„ï¼‰ï¼›æŸ¥çœ‹æ™®é€šæ•°ç»„</p><p>-A æŒ‡å®šä¸ºå…³è”æ•°ç»„ï¼›æŸ¥çœ‹å…³è”æ•°ç»„</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# declare -i num=&#x27;asa&#x27;</span><br><span class="line">[root@zutuanxue ~]# echo $num</span><br><span class="line">0</span><br><span class="line">[root@zutuanxue ~]# num=100</span><br><span class="line">[root@zutuanxue ~]# echo $num</span><br><span class="line">100</span><br><span class="line">[root@zutuanxue ~]# declare -r num</span><br><span class="line">[root@zutuanxue ~]# echo $num</span><br><span class="line">100</span><br><span class="line"><span class="meta prompt_">[root@zutuanxue~]# </span><span class="language-bash">num=200</span></span><br><span class="line">-bash: num: åªè¯»å˜é‡</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# declare -x</span><br><span class="line">declare -x HISTCONTROL=&quot;ignoredups&quot;</span><br><span class="line">declare -x HISTSIZE=&quot;1000&quot;</span><br><span class="line">declare -x HOME=&quot;/root&quot;</span><br><span class="line">declare -x HOSTNAME=&quot;Bai_Shuming&quot;</span><br><span class="line">declare -x LANG=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">declare -x LESSOPEN=&quot;||/usr/bin/lesspipe.sh %s&quot;</span><br></pre></td></tr></table></figure><h3 id="3ã€å˜é‡åˆ†ç±»">3ã€å˜é‡åˆ†ç±»</h3><p>ç³»ç»Ÿä¸­çš„å˜é‡æ ¹æ®ä½œç”¨åŸŸåŠç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºå››ç±»ï¼š<code>æœ¬åœ°å˜é‡</code>ã€<code>ç¯å¢ƒå˜é‡</code>ã€<code>å…¨å±€å˜é‡</code>ã€<code>å†…ç½®å˜é‡</code></p><h4 id="3-1-æœ¬åœ°å˜é‡">3.1 æœ¬åœ°å˜é‡</h4><p>ç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ï¼Œå®šä¹‰åœ¨è„šæœ¬æˆ–è€…å½“å‰ç»ˆç«¯ä¸­ï¼Œè„šæœ¬æ‰§è¡Œå®Œæ¯•æˆ–ç»ˆç«¯ç»“æŸå˜é‡å¤±æ•ˆã€‚</p><h4 id="3-2-ç¯å¢ƒå˜é‡">3.2 ç¯å¢ƒå˜é‡</h4><p>å®šä¹‰åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„.bashrcæˆ–.bash_profileæ–‡ä»¶ä¸­ï¼Œç”¨æˆ·ç§æœ‰å˜é‡ï¼Œåªèƒ½æœ¬ç”¨æˆ·ä½¿ç”¨ã€‚</p><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ env</p><p>æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„æ‰€æœ‰å˜é‡(ä¸´æ—¶å˜é‡ä¸ç¯å¢ƒå˜é‡) set</p><h4 id="3-3-å°†å½“å‰å˜é‡å˜æˆç¯å¢ƒå˜é‡-export">3.3 å°†å½“å‰å˜é‡å˜æˆç¯å¢ƒå˜é‡ export</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹ä¸€</span></span><br><span class="line">[root@zutuanxue tmp]# export A=hello //ä¸´æ—¶å°†ä¸€ä¸ªæœ¬åœ°å˜é‡ï¼ˆä¸´æ—¶å˜é‡ï¼‰å˜æˆç¯å¢ƒå˜é‡</span><br><span class="line">[root@zutuanxue tmp]# env|grep ^A</span><br><span class="line">A=hello</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹äºŒ</span></span><br><span class="line">[root@zutuanxue tmp]# A=HELLO</span><br><span class="line">[root@zutuanxue tmp]# export A</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹ä¸‰ï¼šå®šä¹‰ä¸€ä¸ªæ°¸ä¹…ç”Ÿæ•ˆå˜é‡ï¼š</span></span><br><span class="line">vim .bash_profile æˆ–è€… ~/.bashrc</span><br><span class="line">A=hello</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å…³äºexportè¯´æ˜</span><br><span class="line">ç”¨æˆ·ç™»å½•æ—¶:</span><br><span class="line">ç”¨æˆ·ç™»å½•åˆ°Linuxç³»ç»Ÿåï¼Œç³»ç»Ÿå°†å¯åŠ¨ä¸€ä¸ªç”¨æˆ·shellã€‚åœ¨è¿™ä¸ªshellä¸­ï¼Œå¯ä»¥ä½¿ç”¨shellå‘½ä»¤æˆ–å£°æ˜å˜é‡ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå¹¶è¿è¡Œ shellè„šæœ¬ç¨‹åºã€‚</span><br><span class="line"></span><br><span class="line">è¿è¡Œè„šæœ¬æ—¶:</span><br><span class="line">è¿è¡Œshellè„šæœ¬ç¨‹åºæ—¶ï¼Œç³»ç»Ÿå°†åˆ›å»ºä¸€ä¸ªå­shellã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿä¸­å°†æœ‰ä¸¤ä¸ªshellï¼Œä¸€ä¸ªæ˜¯ç™»å½•æ—¶ç³»ç»Ÿå¯åŠ¨çš„shellï¼Œå¦ä¸€ä¸ªæ˜¯ç³»ç»Ÿä¸ºè¿è¡Œè„šæœ¬ç¨‹åºåˆ›å»ºçš„shellã€‚å½“ä¸€ä¸ªè„šæœ¬ç¨‹åºè¿è¡Œå®Œæ¯•ï¼Œå®ƒçš„è„šæœ¬shellå°†ç»ˆæ­¢ï¼Œå¯ä»¥è¿”å›åˆ°æ‰§è¡Œè¯¥è„šæœ¬ä¹‹å‰çš„shellã€‚</span><br><span class="line"></span><br><span class="line">ä»è¿™ç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œç”¨æˆ·å¯ä»¥æœ‰è®¸å¤š shellï¼Œæ¯ä¸ªshelléƒ½æ˜¯ç”±æŸä¸ªshellï¼ˆç§°ä¸ºçˆ¶shellï¼‰æ´¾ç”Ÿçš„ã€‚åœ¨å­shellä¸­å®šä¹‰çš„å˜é‡åªåœ¨è¯¥å­shellå†…æœ‰æ•ˆã€‚å¦‚æœåœ¨ä¸€ä¸ªshellè„šæœ¬ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œå½“è¯¥è„šæœ¬ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿™ä¸ªå®šä¹‰çš„å˜é‡åªæ˜¯è¯¥è„šæœ¬ç¨‹åºå†…çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå…¶ä»–çš„shellä¸èƒ½å¼•ç”¨å®ƒï¼Œè¦ä½¿æŸä¸ªå˜é‡çš„å€¼å¯ä»¥åœ¨å…¶ä»–shellä¸­è¢«æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨exportå‘½ä»¤å¯¹å·²å®šä¹‰çš„å˜é‡è¿›è¡Œè¾“å‡ºã€‚ </span><br><span class="line"></span><br><span class="line">exportå‘½ä»¤å°†ä½¿ç³»ç»Ÿåœ¨åˆ›å»ºæ¯ä¸€ä¸ªæ–°çš„shellæ—¶å®šä¹‰è¿™ä¸ªå˜é‡çš„ä¸€ä¸ªæ‹·è´ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºå˜é‡è¾“å‡ºã€‚</span><br></pre></td></tr></table></figure><p>çˆ¶shellä¸å­shell</p><p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/21/1600685550727.png" alt="shellçˆ¶å­å…³ç³».png"></p><h4 id="3-4-å…¨å±€å˜é‡">3.4 å…¨å±€å˜é‡</h4><p>ä½¿ç”¨exportå‘½ä»¤å°†æœ¬åœ°å˜é‡è¾“å‡ºä¸ºå½“å‰shellä¸­çš„ç¯å¢ƒå˜é‡<br>æ‰€æœ‰ç”¨æˆ·åŠshelléƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥åœ¨/etc/profile /etc/bashrcä¸‹æ°¸ä¹…å®šä¹‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å°å…¨å±€å˜é‡ printenv</span><br><span class="line"></span><br><span class="line">å®šä¹‰æ ¼å¼</span><br><span class="line">export SCHOOL=&#x27;zutuanxue&#x27;</span><br><span class="line"></span><br><span class="line">æµ‹è¯•æ–¹æ³•ï¼š</span><br><span class="line">é€šè¿‡ä¸åŒç”¨æˆ·ç™»å½•æµ‹è¯•æ˜¯å¦èƒ½è¯»å–å˜é‡</span><br></pre></td></tr></table></figure><h4 id="3-5-å†…ç½®å˜é‡">3.5 å†…ç½®å˜é‡</h4><p>ç³»ç»Ÿå˜é‡(å†…ç½®bashä¸­å˜é‡) ï¼š shellæœ¬èº«å·²ç»å›ºå®šå¥½äº†å®ƒçš„åå­—å’Œä½œç”¨.</p><p>ï¼ˆ1ï¼‰<code>$?</code>ï¼šä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œåè¿”å›çš„çŠ¶æ€ï¼Œå½“è¿”å›çŠ¶æ€å€¼ä¸º0æ—¶è¡¨ç¤ºæ‰§è¡Œæ­£å¸¸ï¼Œé0å€¼è¡¨ç¤ºæ‰§è¡Œå¼‚å¸¸æˆ–å‡ºé”™</p><blockquote><p>è‹¥é€€å‡ºçŠ¶æ€å€¼ä¸º0ï¼Œè¡¨ç¤ºå‘½ä»¤è¿è¡ŒæˆåŠŸ</p><p>è‹¥é€€å‡ºçŠ¶æ€å€¼ä¸º127,è¡¨ç¤ºcommand not found</p><p>è‹¥é€€å‡ºçŠ¶æ€å€¼ä¸º126,è¡¨ç¤ºæ‰¾åˆ°äº†è¯¥å‘½ä»¤ä½†æ— æ³•æ‰§è¡Œï¼ˆæƒé™ä¸å¤Ÿï¼‰</p><p>è‹¥é€€å‡ºçŠ¶æ€å€¼ä¸º1&amp;2,è¡¨ç¤ºæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</p></blockquote><p>(2)<code>$$</code>:å½“å‰æ‰€åœ¨è¿›ç¨‹çš„è¿›ç¨‹å·</p><blockquote><p>egï¼š# echo $$   egï¼škill -9 <code>echo $$</code>  = exit   é€€å‡ºå½“å‰ä¼šè¯</p></blockquote><p>ï¼ˆ3ï¼‰<code>$!</code>:åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹å·  ï¼ˆå½“å‰ç»ˆç«¯ï¼‰</p><blockquote><p>egï¼š # gedit &amp;</p></blockquote><p>(4)<code>!$</code>: è°ƒç”¨æœ€åä¸€æ¡å‘½ä»¤å†å²ä¸­çš„å‚æ•°</p><p>(5)<code>!!</code>: è°ƒç”¨æœ€åä¸€æ¡å‘½ä»¤å†å²</p><p>(6)<code>$#</code>ï¼šè„šæœ¬åé¢æ¥çš„å‚æ•°çš„ä¸ªæ•°</p><p>(7)<code>$*</code>ï¼šè„šæœ¬åé¢æ‰€æœ‰å‚æ•°ï¼Œå‚æ•°å½“æˆä¸€ä¸ªæ•´ä½“è¾“å‡ºï¼Œæ¯ä¸€ä¸ªå˜é‡å‚æ•°ä¹‹é—´ä»¥ç©ºæ ¼éš”å¼€</p><p>(8)<code>$@</code>: è„šæœ¬åé¢æ‰€æœ‰å‚æ•°ï¼Œå‚æ•°æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿæ˜¯å…¨éƒ¨è¾“å‡º</p><blockquote><p>äº†è§£$*å’Œ$@çš„åŒºåˆ«ï¼š</p><p>$* :è¡¨ç¤ºå°†å˜é‡çœ‹æˆä¸€ä¸ªæ•´ä½“</p><p>$@ :è¡¨ç¤ºå˜é‡æ˜¯ç‹¬ç«‹çš„</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for i in &quot;$@&quot;</span><br><span class="line">do</span><br><span class="line">echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;======æˆ‘æ˜¯åˆ†å‰²çº¿=======&quot;</span><br><span class="line"></span><br><span class="line">for i in &quot;$*&quot;</span><br><span class="line">do</span><br><span class="line">echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">[root@zutuanxue shell01]$ bash 3.sh a b c</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">======æˆ‘æ˜¯åˆ†å‰²çº¿=======</span><br><span class="line">a b c</span><br></pre></td></tr></table></figure><p>(8)<code>$0</code>ï¼šå½“å‰æ‰§è¡Œçš„è¿›ç¨‹/ç¨‹åºå</p><blockquote><p>$1~$9 ä½ç½®å‚æ•°å˜é‡</p><p>${10}~${n} æ‰©å±•ä½ç½®å‚æ•°å˜é‡  ç¬¬10ä¸ªä½ç½®å˜é‡å¿…é¡»ç”¨{}å¤§æ‹¬å·æ‹¬èµ·æ¥</p><p>./1.sh a b c</p></blockquote><p><strong>å˜é‡æ€»ç»“è¯´æ˜ï¼š</strong></p><blockquote><p>æœ¬åœ°å˜é‡ï¼šå½“å‰ç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ã€‚å½“å‰è¿›ç¨‹ä¸­æœ‰æ•ˆï¼Œå…¶ä»–è¿›ç¨‹åŠå½“å‰è¿›ç¨‹çš„å­è¿›ç¨‹æ— æ•ˆã€‚</p><p>ç¯å¢ƒå˜é‡ï¼šå½“å‰è¿›ç¨‹æœ‰æ•ˆï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«å­è¿›ç¨‹è°ƒç”¨ã€‚</p><p>å…¨å±€å˜é‡ï¼šå…¨å±€æ‰€æœ‰çš„ç”¨æˆ·å’Œç¨‹åºéƒ½èƒ½è°ƒç”¨ï¼Œä¸”ç»§æ‰¿ï¼Œæ–°å»ºçš„ç”¨æˆ·ä¹Ÿé»˜è®¤èƒ½è°ƒç”¨.</p><p>å†…ç½®å˜é‡ï¼šshellæœ¬èº«å·²ç»å›ºå®šå¥½äº†å®ƒçš„åå­—å’Œä½œç”¨.</p></blockquote><table><thead><tr><th>å˜é‡ç±»å‹</th><th>ä½œç”¨åŸŸ</th><th>ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td>æœ¬åœ°å˜é‡</td><td>å½“å‰shellç¯å¢ƒ(å­shellä¸èƒ½ç”¨)</td><td>è„šæœ¬ç»“æŸæˆ–ç»ˆç«¯ç»“æŸ</td></tr><tr><td>ç¯å¢ƒå˜é‡</td><td>å½“å‰shellæˆ–è€…å­shell</td><td>å½“å‰è¿›ç¨‹ç»“æŸ</td></tr><tr><td>å…¨å±€å˜é‡</td><td>æ‰€æœ‰ç”¨æˆ·åŠshellç¯å¢ƒ</td><td>å…³æœº</td></tr><tr><td>å†…ç½®å˜é‡</td><td>æ‰€æœ‰ç”¨æˆ·åŠshellç¯å¢ƒ</td><td>å…³æœº</td></tr></tbody></table><h3 id="4ã€å˜é‡å–å€¼">4ã€å˜é‡å–å€¼</h3><p>è¯»å–å˜é‡å†…å®¹ç¬¦: è¯»å–æ–¹æ³•ï¼šå˜é‡å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡å†…å®¹è¯»å‡º</span><br><span class="line">[root@localhost ~]# echo $name</span><br><span class="line">baism</span><br><span class="line">[root@localhost ~]# echo $school</span><br><span class="line">ayitula</span><br><span class="line">[root@localhost ~]# echo $age</span><br><span class="line">30</span><br><span class="line">[root@localhost ~]# echo $score</span><br><span class="line">88.8</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡è¯»å–è¿‡ç¨‹ä¸­ï¼Œé»˜è®¤å•å¼•å·æ˜¯ä¸è§£é‡Šå˜é‡çš„.æ¯”å¦‚</span><br><span class="line">[root@localhost ~]# echo &#x27;$name&#x27;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">name</span></span><br><span class="line"></span><br><span class="line">å¦‚æœå¿…é¡»ä½¿ç”¨å•å¼•å·è¿˜è¦è¯»å–å˜é‡çš„å€¼å¯ä»¥ä½¿ç”¨evalå‘½ä»¤[é‡æ–°è¿ç®—æ±‚å‡ºå‚æ•°çš„å†…å®¹] </span><br><span class="line">[root@localhost ~]# eval  echo &#x27;$name&#x27;</span><br><span class="line">baism</span><br></pre></td></tr></table></figure><h3 id="5ã€å…¶ä»–å˜é‡ï¼ˆæ‰©å±•ï¼‰">5ã€å…¶ä»–å˜é‡ï¼ˆæ‰©å±•ï¼‰</h3><blockquote><p>1ï¼‰å–å‡ºä¸€ä¸ªç›®å½•ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ï¼šdirnameå’Œ basename</p><p>2ï¼‰å˜é‡&quot;å†…å®¹&quot;çš„åˆ é™¤å’Œæ›¿æ¢</p><p>ä¸€ä¸ªâ€œ%â€ä»£è¡¨ä»å³å¾€å·¦å»æ‰ä¸€ä¸ª/key/</p><p>ä¸¤ä¸ªâ€œ%%â€ä»£è¡¨ä»å³å¾€å·¦æœ€å¤§å»æ‰/key/</p><p>ä¸€ä¸ªâ€œ#â€ä»£è¡¨ä»å·¦å¾€å³å»æ‰ä¸€ä¸ª/key/</p><p>ä¸¤ä¸ªâ€œ##â€ä»£è¡¨ä»å·¦å¾€å³æœ€å¤§å»æ‰/key/</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dirname /etc/test/hosts</span><br><span class="line">/etc/test</span><br><span class="line">[root@localhost ~]# basename /etc/test/hosts</span><br><span class="line">hosts</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# url=www.taobao.com</span><br><span class="line">[root@localhost ~]# echo $&#123;#url&#125;</span><br><span class="line">14</span><br><span class="line">[root@localhost ~]# echo $&#123;url#*.&#125;</span><br><span class="line">taobao.com</span><br><span class="line">[root@localhost ~]# echo $&#123;url##*.&#125;</span><br><span class="line">com</span><br><span class="line">[root@localhost ~]# echo $&#123;url%.*&#125;</span><br><span class="line">www.taobao</span><br><span class="line">[root@localhost ~]# echo $&#123;url%%.*&#125;</span><br><span class="line">www</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€shellæ ¼å¼åŒ–è¾“å‡ºğŸ«’">ä¸‰ã€shellæ ¼å¼åŒ–è¾“å‡ºğŸ«’</h2><h3 id="1ã€echoå‘½ä»¤">1ã€echoå‘½ä»¤</h3><p><strong>åŠŸèƒ½ï¼šå°†å†…å®¹è¾“å‡ºåˆ°é»˜è®¤æ˜¾ç¤ºè®¾å¤‡</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼šéœ€è¦è®¡ç®—æœºç¨‹åºè¾“å‡ºçš„åœ°æ–¹</strong></p><p>echoå‘½ä»¤çš„åŠŸèƒ½æ˜¯åœ¨æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºä¸€æ®µæ–‡å­—ï¼Œä¸€èˆ¬èµ·åˆ°ä¸€ä¸ªæç¤ºçš„ä½œç”¨ã€‚ åŠŸèƒ½è¯´æ˜:æ˜¾ç¤ºæ–‡å­—ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•:echo [-ne][å­—ç¬¦ä¸²]</span><br><span class="line"></span><br><span class="line">è¡¥å……è¯´æ˜:</span><br><span class="line">1ã€echoä¼šå°†è¾“å…¥çš„å­—ç¬¦ä¸²é€å¾€æ ‡å‡†è¾“å‡ºã€‚</span><br><span class="line">2ã€è¾“å‡ºçš„å­—ç¬¦ä¸²é—´ä»¥ç©ºç™½å­—ç¬¦éš”å¼€,å¹¶åœ¨æœ€ååŠ ä¸Šæ¢è¡Œå·ã€‚</span><br><span class="line"></span><br><span class="line">OPTIONSï¼š</span><br><span class="line">-nä¸è¦åœ¨æœ€åè‡ªåŠ¨æ¢è¡Œ</span><br><span class="line">-eè‹¥å­—ç¬¦ä¸²ä¸­å‡ºç°ä»¥ä¸‹å­—ç¬¦ï¼Œåˆ™ç‰¹åˆ«åŠ ä»¥å¤„ç†ï¼Œè€Œä¸ä¼šå°†å®ƒå½“æˆä¸€èˆ¬æ–‡å­—è¾“å‡º:</span><br><span class="line"></span><br><span class="line">è½¬ä¹‰å­—ç¬¦</span><br><span class="line">\aå‘å‡ºè­¦å‘Šå£°;</span><br><span class="line">\båˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦;</span><br><span class="line">\tæ’å…¥tab;</span><br><span class="line">\næ¢è¡Œä¸”å…‰æ ‡ç§»è‡³è¡Œé¦–;</span><br><span class="line"></span><br><span class="line">\cæœ€åä¸åŠ ä¸Šæ¢è¡Œç¬¦å·;</span><br><span class="line">\fæ¢è¡Œä½†å…‰æ ‡ä»æ—§åœç•™åœ¨åŸæ¥çš„ä½ç½®;</span><br><span class="line">\rå…‰æ ‡ç§»è‡³è¡Œé¦–ï¼Œä½†ä¸æ¢è¡Œ;</span><br><span class="line">\vä¸\fç›¸åŒ;</span><br><span class="line">\æ’å…¥\å­—ç¬¦;</span><br><span class="line">\0nnnæ‰“å°nnn(å…«è¿›åˆ¶)æ‰€ä»£è¡¨çš„ASCIIå­—ç¬¦;  å¤‡æ³¨ï¼šæ•°å­—0  ä¸è¦ç†è§£æˆå­—æ¯o</span><br><span class="line">\xNN  æ‰“å°NN(åå…­è¿›åˆ¶)æ‰€ä»£è¡¨çš„ASCIIå­—ç¬¦;</span><br><span class="line"></span><br><span class="line">-â€“helpæ˜¾ç¤ºå¸®åŠ©</span><br><span class="line">-â€“versionæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br></pre></td></tr></table></figure><h3 id="2ã€è¾“å‡ºé¢œè‰²å­—ä½“">2ã€è¾“å‡ºé¢œè‰²å­—ä½“</h3><p>è„šæœ¬ä¸­echoæ˜¾ç¤ºå†…å®¹å¸¦é¢œè‰²æ˜¾ç¤º,echoæ˜¾ç¤ºå¸¦é¢œè‰²ï¼Œéœ€è¦ä½¿ç”¨å‚æ•°<code>-e</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ ¼å¼å¦‚ä¸‹ï¼š</span><br><span class="line">echo -e &quot;\033[å­—èƒŒæ™¯é¢œè‰²ï¼›æ–‡å­—é¢œè‰²må­—ç¬¦ä¸²\033[0m&quot;</span><br></pre></td></tr></table></figure><blockquote><p>egï¼š echo -e â€œ\033[41;36m something here \033[0mâ€</p><p>å…¶ä¸­41çš„ä½ç½®ä»£è¡¨åº•è‰²ï¼Œ 36mçš„ä½ç½®æ˜¯ä»£è¡¨å­—çš„é¢œè‰²</p><p>1ã€å­—èƒŒæ™¯é¢œè‰²å’Œæ–‡å­—é¢œè‰²ä¹‹é—´æ˜¯è‹±æ–‡çš„</p><p>2ã€æ–‡å­—é¢œè‰²åé¢æœ‰ä¸ªm</p><p>3ã€å­—ç¬¦ä¸²å‰åå¯ä»¥æ²¡æœ‰ç©ºæ ¼ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œè¾“å‡ºä¹Ÿæ˜¯åŒæ ·æœ‰ç©ºæ ¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">å­—é¢œè‰²ï¼š30â€”â€“37</span><br><span class="line">ã€€ã€€echo -e â€œ\033[30m é»‘è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[31m çº¢è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[32m ç»¿è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[33m é»„è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[34m è“è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[35m ç´«è‰²å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[36m å¤©è“å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[37m ç™½è‰²å­— \033[0mâ€</span><br><span class="line"></span><br><span class="line">ã€€ã€€</span><br><span class="line">å­—èƒŒæ™¯é¢œè‰²èŒƒå›´ï¼š40â€”â€“47</span><br><span class="line">ã€€ã€€echo -e â€œ\033[40;37m é»‘åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[41;37m çº¢åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[42;37m ç»¿åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[43;37m é»„åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[44;37m è“åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[45;37m ç´«åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[46;37m å¤©è“åº•ç™½å­— \033[0mâ€</span><br><span class="line">ã€€ã€€echo -e â€œ\033[47;30m ç™½åº•é»‘å­— \033[0mâ€</span><br><span class="line">ã€€ã€€</span><br><span class="line">æœ€åé¢æ§åˆ¶é€‰é¡¹è¯´æ˜</span><br><span class="line">ã€€ã€€\033[0m å…³é—­æ‰€æœ‰å±æ€§</span><br><span class="line">ã€€ã€€\033[1m è®¾ç½®é«˜äº®åº¦</span><br><span class="line">ã€€ã€€\033[4m ä¸‹åˆ’çº¿</span><br><span class="line">ã€€ã€€\033[5m é—ªçƒ</span><br><span class="line">ã€€ã€€\033[7m åæ˜¾</span><br><span class="line">ã€€ã€€\033[8m æ¶ˆéš</span><br><span class="line"></span><br><span class="line">ã€€ã€€\033[30m â€” \33[37m </span><br><span class="line"></span><br><span class="line">è®¾ç½®å‰æ™¯è‰²</span><br><span class="line">ã€€ã€€\033[40m â€” \33[47m è®¾ç½®èƒŒæ™¯è‰²</span><br><span class="line">ã€€ã€€</span><br><span class="line">ã€€ã€€</span><br><span class="line">ã€€ã€€\033[nA å…‰æ ‡ä¸Šç§»nè¡Œ</span><br><span class="line">ã€€ã€€\033[nB å…‰æ ‡ä¸‹ç§»nè¡Œ</span><br><span class="line">ã€€ã€€\033[nC å…‰æ ‡å³ç§»nè¡Œ</span><br><span class="line">ã€€ã€€\033[nD å…‰æ ‡å·¦ç§»nè¡Œ</span><br><span class="line">ã€€ã€€\033[y;xHè®¾ç½®å…‰æ ‡ä½ç½®</span><br><span class="line">ã€€ã€€\033[2J æ¸…å±</span><br><span class="line">ã€€ã€€\033[K æ¸…é™¤ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹</span><br><span class="line">ã€€ã€€\33[s ä¿å­˜å…‰æ ‡ä½ç½®</span><br><span class="line">ã€€ã€€\033[u æ¢å¤å…‰æ ‡ä½ç½®</span><br><span class="line">ã€€ã€€\033[?25l éšè—å…‰æ ‡</span><br><span class="line">ã€€ã€€\033[?25h æ˜¾ç¤ºå…‰æ ‡</span><br><span class="line">ã€€ã€€</span><br><span class="line">ç”¨æ³•ä¾‹å­  å…‰æ ‡ä¸‹ç§»ä¸‰è¡Œã€€ã€€</span><br><span class="line">[root@localhost ~]# echo -e &quot;\033[0m today is fine \033[3B&quot;</span><br><span class="line"> today is fine </span><br></pre></td></tr></table></figure><h2 id="å››ã€ç®—æœ¯è¿ç®—ğŸ…">å››ã€ç®—æœ¯è¿ç®—ğŸ…</h2><h3 id="1ã€è¿ç®—ç¬¦ä¸å‘½ä»¤">1ã€è¿ç®—ç¬¦ä¸å‘½ä»¤</h3><p><strong>å››åˆ™è¿ç®—ç¬¦ï¼š</strong> + - * \ ã€åŠ å‡ä¹˜é™¤ã€‘<br><strong>æ‰©å±•ï¼š</strong> % ** ã€å–ä½™ å¼€æ–¹ã€‘</p><p><strong>è¿ç®—å‘½ä»¤:</strong></p><ul><li>æ•´å½¢è¿ç®—<br>â€“ expr<br>â€“ let<br>â€“ $(())<br>â€“ bc</li><li>æµ®ç‚¹è¿ç®—<br>â€“ bc</li></ul><h3 id="2ã€æ•´å½¢è¿ç®—">2ã€æ•´å½¢è¿ç®—</h3><h4 id="2-1-expr-å‘½ä»¤">2.1 <code>expr</code> å‘½ä»¤</h4><p><strong>åªèƒ½åšæ•´æ•°è¿ç®—ï¼Œæ ¼å¼æ¯”è¾ƒå¤æ¿ï¼Œæ³¨æ„ç©ºæ ¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# expr 1 + 1</span><br><span class="line">2</span><br><span class="line">[root@localhost ~]# expr 5 - 2</span><br><span class="line">3</span><br><span class="line">[root@localhost ~]# expr 5 \* 2  #æ³¨æ„*å‡ºç°åº”è¯¥è½¬ä¹‰ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯é€šé…ç¬¦</span><br><span class="line">10</span><br><span class="line">[root@localhost ~]# expr 5 / 2</span><br><span class="line">2</span><br><span class="line">[root@localhost ~]# expr 5 % 2</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="2-2-letå‘½ä»¤">2.2 <code>let</code>å‘½ä»¤</h4><p><strong>åªèƒ½åšæ•´æ•°è¿ç®—ï¼Œä¸”è¿ç®—å…ƒç´ å¿…é¡»æ˜¯å˜é‡ï¼Œæ— æ³•ç›´æ¥å¯¹æ•´æ•°åšè¿ç®—</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# let a=100+3;echo $a</span><br><span class="line">103</span><br><span class="line">[root@localhost ~]# let a=100-3;echo $a</span><br><span class="line">97</span><br><span class="line">[root@localhost ~]# let a=100/3;echo $a</span><br><span class="line">33</span><br><span class="line">[root@localhost ~]# let a=100*3;echo $a</span><br><span class="line">300</span><br><span class="line">[root@localhost ~]# let a=100%3;echo $a</span><br><span class="line">1</span><br><span class="line">[root@localhost ~]# let a=100**3;echo $a</span><br><span class="line">1000000</span><br><span class="line">[root@localhost ~]# a=100</span><br><span class="line">[root@localhost ~]# let a++;echo $a</span><br><span class="line">101</span><br><span class="line">[root@localhost ~]# let a--;echo $a</span><br><span class="line">100</span><br><span class="line">[root@localhost ~]# let a-=3;echo $a</span><br><span class="line">97</span><br><span class="line">[root@localhost ~]# let a+=5;echo $a</span><br><span class="line">102</span><br></pre></td></tr></table></figure><h4 id="2-3">2.3 (())</h4><p><strong>åŒå°åœ†æ‹¬å·è¿ç®—ï¼Œåœ¨shellä¸­(( ))ä¹Ÿå¯ä»¥ç”¨æ¥åšæ•°å­¦è¿ç®—</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo $(( 100+3))</span><br><span class="line">103</span><br><span class="line">[root@localhost ~]# echo $(( 100-3)) </span><br><span class="line">97</span><br><span class="line">[root@localhost ~]# echo $(( 100%3))</span><br><span class="line">1</span><br><span class="line">[root@localhost ~]# echo $(( 100*3))</span><br><span class="line">300</span><br><span class="line">[root@localhost ~]# echo $(( 100/3))</span><br><span class="line">33</span><br><span class="line">[root@localhost ~]# echo $(( 100**3))     #å¼€æ–¹è¿ç®—</span><br><span class="line">1000000</span><br></pre></td></tr></table></figure><h3 id="3ã€æµ®ç‚¹è¿ç®—">3ã€æµ®ç‚¹è¿ç®—</h3><p><strong>æµ®ç‚¹è¿ç®—æ˜¯é‡‡ç”¨çš„å‘½ä»¤ç»„åˆçš„æ–¹å¼æ¥å®ç°çš„ echo â€œscale=N;è¡¨è¾¾å¼â€|bc</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo &quot;scale=2;3+100&quot;|bc</span><br><span class="line">103</span><br><span class="line">[root@localhost ~]# echo &quot;scale=2;100-3&quot;|bc</span><br><span class="line">97</span><br><span class="line">[root@localhost ~]# echo &quot;scale=2;100/3&quot;|bc</span><br><span class="line">33.33</span><br><span class="line">[root@localhost ~]# echo &quot;scale=2;100*3&quot;|bc</span><br><span class="line">300</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼šlinuxä¸‹çš„bcå‘½ä»¤å¯ä»¥é€šè¿‡scaleå‚æ•°è®¾ç½®ç»“æœçš„ä½æ•°ï¼Œä½†æ˜¯scaleåªå¯¹é™¤æ³•ã€å–ä½™ã€ä¹˜å¹‚æœ‰æ•ˆï¼Œæ¯”å¦‚ä¹˜æ³•å°±æ— æ•ˆï¼Œæƒ³äº†ä¸€ä¸ªå›é¿çš„æ–¹æ³•ï¼Œå°±æ˜¯é™¤ä»¥ï¼‘ã€‚</strong></p><h2 id="äº”ã€æ•°ç»„ğŸ¥•">äº”ã€æ•°ç»„ğŸ¥•</h2><h3 id="1ã€æ•°ç»„ä»‹ç»">1ã€æ•°ç»„ä»‹ç»</h3><p>æ•°ç»„å¯ä»¥è®©ç”¨æˆ·ä¸€æ¬¡èµ‹äºˆå¤šä¸ªå€¼ï¼Œéœ€è¦è¯»å–æ•°æ®æ—¶åªéœ€é€šè¿‡ç´¢å¼•è°ƒç”¨å°±å¯ä»¥æ–¹ä¾¿è¯»å‡ºäº†ã€‚</p><p>æ™®é€šæ•°ç»„ï¼šåªèƒ½ä½¿ç”¨æ•´æ•°ä½œä¸ºæ•°ç»„ç´¢å¼•(å…ƒç´ çš„ç´¢å¼•)<br>å…³è”æ•°ç»„ï¼šå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºæ•°ç»„ç´¢å¼•(å…ƒç´ çš„ç´¢å¼•)</p><h3 id="2ã€æ•°ç»„å®šä¹‰">2ã€æ•°ç»„å®šä¹‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ•°ç»„åç§°=(å…ƒç´ 1 å…ƒç´ 2 å…ƒç´ 3 ...)</span><br></pre></td></tr></table></figure><h3 id="3ã€æ•°ç»„èµ‹å€¼æ–¹å¼">3ã€æ•°ç»„èµ‹å€¼æ–¹å¼</h3><ul><li>ä¸€æ¬¡é™„ä¸€ä¸ªå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡å=å˜é‡å€¼</span><br><span class="line">array[0]=v1</span><br><span class="line">array[1]=v2</span><br><span class="line">array[3]=v3</span><br></pre></td></tr></table></figure><ul><li>ä¸€æ¬¡é™„å¤šä¸ªå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array=(var1 var2 var3 var4)</span><br><span class="line">array1=(`cat /etc/passwd`)//å°†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œèµ‹å€¼ç»™array1æ•°ç»„</span><br><span class="line">array2=(`ls /root`)</span><br><span class="line">array3=(harry amy jack &quot;Miss zhang&quot;)</span><br><span class="line">array4=(1 2 3 4 &quot;hello world&quot; [10]=linux)</span><br></pre></td></tr></table></figure><h3 id="4ã€æ•°ç»„å–å€¼">4ã€æ•°ç»„å–å€¼</h3><p><strong>å–å€¼æ–¹å¼:</strong> ${æ•°ç»„åç§°[ç´¢å¼•]}</p><p><strong>ç´¢å¼•:</strong> é»˜è®¤æƒ…å†µä¸‹ç´¢å¼•æ˜¯æŒ‡æ•°ç»„ä¸­çš„å…ƒç´ [å­˜çš„å€¼]åœ¨æ•°ç»„ä¸­çš„é¡ºåºï¼Œä»0å¼€å§‹è®¡æ•°ï¼Œå…³è”æ•°ç»„é™¤å¤–ã€‚æ¯”å¦‚ï¼š</p><ul><li>array=(var1 var2 var3 var4)</li></ul><p>arrayæ•°ç»„ä¸­å­˜æœ‰4ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«æ˜¯ï¼švar1 var2 var3 var4 ï¼Œé‚£ä¹ˆæˆ‘æƒ³å–å‡ºvar2è¿™ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±å¾—å…ˆçœ‹çœ‹ä»–åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ç´¢å¼•å¦‚ä¸‹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…ƒç´ var1 var2 var3 var4</span><br><span class="line">ç´¢å¼•0     1     2    3</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ­£ç¡®è¡¨ç¤ºarrayæ•°ç»„ä¸­å…ƒç´ var2çš„æ–¹å¼æ˜¯ï¼š${array[1]}</p><p><strong>æ•°ç»„å–å€¼ç»ƒä¹ </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;array[i]&#125;  iè¡¨ç¤ºå…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line">ä½¿ç”¨@ æˆ– * å¯ä»¥è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š</span><br><span class="line"></span><br><span class="line">echo $&#123;array[0]&#125;è·å–ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">echo $&#123;array[*]&#125;è·å–æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">echo $&#123;#array[*]&#125;è·å–æ•°ç»„é‡Œæ‰€æœ‰å…ƒç´ ä¸ªæ•°</span><br><span class="line">echo $&#123;!array[@]&#125;    è·å–æ•°ç»„å…ƒç´ çš„ç´¢å¼•ç´¢å¼•</span><br><span class="line">echo $&#123;array[@]:1:2&#125;    è®¿é—®æŒ‡å®šçš„å…ƒç´ ï¼›1ä»£è¡¨ä»ç´¢å¼•ä¸º1çš„å…ƒç´ å¼€å§‹è·å–ï¼›2ä»£è¡¨è·å–åé¢å‡ ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure><h3 id="5ã€å…³è”æ•°ç»„">5ã€å…³è”æ•°ç»„</h3><h4 id="5-1-å®šä¹‰å…³è”æ•°ç»„">5.1 å®šä¹‰å…³è”æ•°ç»„</h4><p>å…³è”æ•°ç»„ä½¿ç”¨é¦–å…ˆéœ€è¦ç”³æ˜è¯¥æ•°ç»„ä¸ºå…³è”æ•°ç»„ï¼Œç”³æ˜æ–¹å¼ï¼š declare -A æ•°ç»„åç§°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆå£°æ˜å…³è”æ•°ç»„</span><br><span class="line">declare -A asso_array1</span><br><span class="line">declare -A asso_array2</span><br><span class="line">declare -A asso_array3</span><br></pre></td></tr></table></figure><h4 id="5-2-å…³è”æ•°ç»„èµ‹å€¼">5.2 å…³è”æ•°ç»„èµ‹å€¼</h4><ul><li>ä¸€æ¬¡èµ‹ä¸€ä¸ªå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ•°ç»„å[ç´¢å¼•]=å˜é‡å€¼</span><br><span class="line">[root@zutuanxue ~]# asso_array1[linux]=one</span><br><span class="line">[root@zutuanxue ~]# asso_array1[java]=two</span><br><span class="line">[root@zutuanxue ~]# asso_array1[php]=three</span><br></pre></td></tr></table></figure><ul><li>ä¸€æ¬¡é™„å¤šä¸ªå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]=&quot;Miss zhang&quot;)</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹å…³è”æ•°ç»„</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]<span class="comment"># declare -A</span></span><br><span class="line"><span class="built_in">declare</span> -A asso_array1=<span class="string">&#x27;([php]=&quot;three&quot; [java]=&quot;two&quot; [linux]=&quot;one&quot; )&#x27;</span></span><br><span class="line"><span class="built_in">declare</span> -A asso_array2=<span class="string">&#x27;([name3]=&quot;amy&quot; [name2]=&quot;jack&quot; [name1]=&quot;harry&quot; [name4]=&quot;Miss zhang&quot; )&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="5-3-ç®¡ç†æ•°ç»„å–å€¼">5.3 ç®¡ç†æ•°ç»„å–å€¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo $&#123;asso_array1[linux]&#125;</span><br><span class="line">one</span><br><span class="line">[root@localhost ~]# echo $&#123;asso_array1[php]&#125;</span><br><span class="line">three</span><br><span class="line">[root@localhost ~]# echo $&#123;asso_array1[*]&#125;</span><br><span class="line">three two one</span><br><span class="line">[root@localhost ~]# echo $&#123;!asso_array1[*]&#125;</span><br><span class="line">php java linux</span><br><span class="line">[root@localhost ~]# echo $&#123;#asso_array1[*]&#125;</span><br><span class="line">3</span><br><span class="line">[root@localhost ~]# echo $&#123;#asso_array2[*]&#125;</span><br><span class="line">4</span><br><span class="line">[root@localhost ~]# echo $&#123;!asso_array2[*]&#125;</span><br><span class="line">name3 name2 name1 name4</span><br></pre></td></tr></table></figure><h2 id="å…­ã€å‡½æ•°ğŸŒ½">å…­ã€å‡½æ•°ğŸŒ½</h2><h3 id="1ã€å‡½æ•°ä»‹ç»">1ã€å‡½æ•°ä»‹ç»</h3><p>shellä¸­å…è®¸å°†<strong>ä¸€ç»„å‘½ä»¤é›†åˆ</strong>æˆ–<strong>è¯­å¥</strong>å½¢æˆä¸€æ®µ<strong>å¯ç”¨ä»£ç </strong>ï¼Œè¿™äº›ä»£ç å—ç§°ä¸ºshellå‡½æ•°ã€‚ç»™è¿™æ®µä»£ç èµ·ä¸ªåå­—ç§°ä¸ºå‡½æ•°åï¼Œåç»­å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥æ®µä»£ç çš„åŠŸèƒ½ã€‚å¯ä»¥å°†å®Œæˆä¸€ä¸ªåŠŸèƒ½çš„ä¸€æ®µä»£ç è¿›è¡Œå‘½åã€å°è£…ã€‚</p><p>å‡½æ•°çš„ä¼˜ç‚¹ï¼š</p><blockquote><p>a. ä»£ç æ¨¡å—åŒ–ï¼Œè°ƒç”¨æ–¹ä¾¿ï¼ŒèŠ‚çœå†…å­˜</p><p>b. ä»£ç æ¨¡å—åŒ–ï¼Œä»£ç é‡å°‘ï¼Œæ’é”™ç®€å•</p><p>c. ä»£ç æ¨¡å—åŒ–ï¼Œå¯ä»¥æ”¹å˜ä»£ç çš„æ‰§è¡Œé¡ºåº</p></blockquote><h3 id="2ã€å‡½æ•°å®šä¹‰">2ã€å‡½æ•°å®šä¹‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ä¸€:</span><br><span class="line">å‡½æ•°å () &#123;</span><br><span class="line">    ä»£ç å—</span><br><span class="line">    return N</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">è¯­æ³•äºŒï¼š</span><br><span class="line">function å‡½æ•°å &#123;</span><br><span class="line">      ä»£ç å—</span><br><span class="line">      return N</span><br><span class="line">      &#125;  </span><br><span class="line">      </span><br><span class="line">å‡½æ•°ä¸­returnè¯´æ˜ï¼š</span><br><span class="line">a. returnå¯ä»¥ç»“æŸä¸€ä¸ªå‡½æ•°ï¼Œç±»ä¼¼äºå‰é¢è®²çš„å¾ªç¯æ§åˆ¶è¯­å¥break(ç»“æŸå½“å‰å¾ªç¯ï¼Œæ‰§è¡Œå¾ªç¯ä½“åé¢çš„ä»£ç )</span><br><span class="line">b. returné»˜è®¤è¿”å›å‡½æ•°ä¸­æœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ç»™å®šå‚æ•°å€¼ï¼Œè¯¥å‚æ•°å€¼çš„èŒƒå›´æ˜¯0-256ä¹‹é—´ã€‚</span><br><span class="line">c. å¦‚æœæ²¡æœ‰returnå‘½ä»¤ï¼Œå‡½æ•°å°†è¿”å›æœ€åä¸€ä¸ªShellçš„é€€å‡ºå€¼ã€‚</span><br></pre></td></tr></table></figure><h3 id="3ã€å‡½æ•°è°ƒç”¨">3ã€å‡½æ•°è°ƒç”¨</h3><ul><li>å½“å‰å‘½ä»¤è¡Œè°ƒç”¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat fun1.sh </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">hello()&#123;</span><br><span class="line">echo &quot;hello world $1&quot;</span><br><span class="line">hostname</span><br><span class="line">&#125;</span><br><span class="line">menu()&#123;</span><br><span class="line">cat &lt;&lt;-EOF</span><br><span class="line">1. mysql</span><br><span class="line">2. web</span><br><span class="line">3. app</span><br><span class="line">4. exit</span><br><span class="line">EOF</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# source fun1.sh </span><br><span class="line">[root@localhost ~]# . fun1.sh </span><br><span class="line"></span><br><span class="line">[root@localhost ~]# hello 888</span><br><span class="line">hello zutuanxue 888</span><br><span class="line">MissHou.zutuanxue.cc</span><br><span class="line">[root@localhost ~]# menu</span><br><span class="line">1. mysql</span><br><span class="line">2. web</span><br><span class="line">3. app</span><br><span class="line">4. exit</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰åˆ°ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile/etc/bashrc~/.bash_profile~/.bashrc</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# cat ~/.bashrc </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">.bashrc</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">User specific aliases and <span class="built_in">functions</span></span></span><br><span class="line"></span><br><span class="line">alias rm=&#x27;rm -i&#x27;</span><br><span class="line">alias cp=&#x27;cp -i&#x27;</span><br><span class="line">alias mv=&#x27;mv -i&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source global definitions</span></span><br><span class="line">if [ -f /etc/bashrc ]; then</span><br><span class="line">. /etc/bashrc</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">hello()&#123;</span><br><span class="line">echo &quot;hello world $1&quot;</span><br><span class="line">hostname</span><br><span class="line">&#125;</span><br><span class="line">menu()&#123;</span><br><span class="line">cat &lt;&lt;-EOF</span><br><span class="line">1. mysql</span><br><span class="line">2. web</span><br><span class="line">3. app</span><br><span class="line">4. exit</span><br><span class="line">EOF</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š å½“ç”¨æˆ·æ‰“å¼€bashçš„æ—¶å€™ä¼šè¯»å–è¯¥æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><ul><li>è„šæœ¬ä¸­è°ƒç”¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ‰“å°èœå•</span></span><br><span class="line">source ./fun1.sh</span><br><span class="line">menu()&#123;</span><br><span class="line">cat &lt;&lt;-END</span><br><span class="line">hæ˜¾ç¤ºå‘½ä»¤å¸®åŠ©</span><br><span class="line">fæ˜¾ç¤ºç£ç›˜åˆ†åŒº</span><br><span class="line">dæ˜¾ç¤ºç£ç›˜æŒ‚è½½</span><br><span class="line">mæŸ¥çœ‹å†…å­˜ä½¿ç”¨</span><br><span class="line">uæŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½</span><br><span class="line">qé€€å‡ºç¨‹åº</span><br><span class="line">END</span><br><span class="line">&#125;</span><br><span class="line">menu//è°ƒç”¨å‡½æ•°</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€if-è¯­å¥-ğŸ“">ä¸ƒã€if è¯­å¥ ğŸ“</h2><p>å½“æˆ‘ä»¬åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œæ—¶å¸¸å¯¹ä¸Šä¸€æ­¥æ‰§è¡Œæ˜¯å¦æˆåŠŸå¦‚ä½•åˆ¤æ–­è‹¦æ¼ï¼Œå½“æˆ‘ä»¬ä»Šå¤©å­¦ä¹ äº†ifå°±å¯ä»¥è§£å†³ä½ çš„è‹¦æ¼ã€‚ifè¯­å¥åœ¨æˆ‘ä»¬ç¨‹åºä¸­å°±æ˜¯ç”¨æ¥åšåˆ¤æ–­çš„ï¼Œä»¥åå¤§å®¶ä¸ç®¡å­¦ä¹ ä»€ä¹ˆè¯­è¨€ï¼Œä»¥ååªè¦æ¶‰åŠåˆ°åˆ¤æ–­çš„éƒ¨åˆ†ï¼Œå¤§å®¶å°±å¯ä»¥ç›´æ¥æ‹¿ifæ¥ä½¿ç”¨ï¼Œä¸åŒçš„è¯­è¨€ä¹‹é—´çš„ifåªæ˜¯è¯­æ³•ä¸åŒï¼ŒåŸç†æ˜¯ç›¸åŒçš„ã€‚</p><h3 id="1ã€å•ifè¯­æ³•">1ã€å•ifè¯­æ³•</h3><p>é€‚ç”¨èŒƒå›´:åªéœ€è¦ä¸€æ­¥åˆ¤æ–­ï¼Œæ¡ä»¶è¿”å›çœŸå¹²ä»€ä¹ˆã€‚</p><p><strong>è¯­å¥æ ¼å¼ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]           #condition å€¼ä¸ºtrue or false</span><br><span class="line">   then                    #æ¡ä»¶ä¸ºçœŸçš„æ—¶å€™æ‰§è¡Œ</span><br><span class="line">      commands             #ä»£ç å— ä¸€è¡Œæˆ–è€…å¤šè¡Œä»£ç </span><br><span class="line">fi      #è¯­å¥çš„ç»“æŸ</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/1601016825298.png" alt="æµç¨‹åˆ¤æ–­11.png"></p><p>é€šè¿‡ä¸€æ®µä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹å§ï¼Œåˆ¤æ–­ å½“å‰ç”¨æˆ·æ˜¯ä¸æ˜¯rootï¼Œå¦‚æœä¸æ˜¯é‚£ä¹ˆè¿”å›â€ERROR: need to be root so that!â€œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $USER != &#x27;root&#x27; ]</span><br><span class="line">   then</span><br><span class="line">echo &quot;ERROR: need to be root so that&quot;</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="2ã€ifâ€¦else-è¯­å¥">2ã€ifâ€¦else è¯­å¥</h3><p>é€‚ç”¨èŒƒå›´:ä¸¤æ­¥åˆ¤æ–­ï¼Œæ¡ä»¶ä¸ºçœŸå¹²ä»€ä¹ˆï¼Œæ¡ä»¶ä¸ºå‡å¹²ä»€ä¹ˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]     </span><br><span class="line">     then           #æ¡ä»¶ä¸ºçœŸ</span><br><span class="line">          commands1     #çœŸ  è¦æ‰§è¡Œä»£ç å—</span><br><span class="line">else                #æ¡ä»¶ä¸ºå‡</span><br><span class="line">          commands2     #å‡   è¦æ‰§è¡Œçš„ä»£ç å—</span><br><span class="line">fi         #ç»“æŸ</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/1601016994805.png" alt="æµç¨‹åˆ¤æ–­2.png"></p><p>é€šè¿‡ä¸€æ®µä»£ç æ¼”ç¤ºä¸€ä¸‹å§ï¼Œåˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯ç®¡ç†å‘˜è¿˜æ˜¯æ™®é€šç”¨æˆ·,å¦‚æœæ˜¯ç®¡ç†å‘˜è¾“å‡ºâ€hey adminâ€œ å¦‚æœæ˜¯æ™®é€šç”¨æˆ·è¾“å‡ºâ€hey guestâ€œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $USER == &#x27;root&#x27; ]</span><br><span class="line">   then</span><br><span class="line">echo &quot;hey admin&quot;</span><br><span class="line">else</span><br><span class="line">echo &quot;hey guest&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="3ã€ifâ€¦elifâ€¦else-è¯­å¥">3ã€ifâ€¦elifâ€¦else è¯­å¥</h3><p>é€‚ç”¨èŒƒå›´:å¤šäºä¸¤ä¸ªä»¥ä¸Šçš„åˆ¤æ–­ç»“æœï¼Œä¹Ÿå°±æ˜¯å¤šäºä¸€ä¸ªä»¥ä¸Šçš„åˆ¤æ–­æ¡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if [ condition 1]     # æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶</span><br><span class="line">     then          # çœŸ</span><br><span class="line">            command1    # æ‰§è¡Œcommand1ä»£ç å—</span><br><span class="line">elif [ condition 2]   # æ»¡è¶³ç¬¬äºŒä¸ªæ¡ä»¶ </span><br><span class="line">     then           # çœŸ</span><br><span class="line">             commands2  # æ‰§è¡Œcommand2ä»£ç å—</span><br><span class="line">  .......# Â·Â·Â·</span><br><span class="line">else      # å¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³</span><br><span class="line">            commandsX   # æ‰§è¡ŒcommandXä»£ç å—</span><br><span class="line">fi    # ç»“æŸåˆ¤æ–­</span><br></pre></td></tr></table></figure><p><img src="https://cdn.whbblog.cn/img/1601017300715.png" alt="æµç¨‹åˆ¤æ–­3.png"></p><p>é€šè¿‡ä¸€æ®µä»£ç æ¼”ç¤ºä¸€ä¸‹å§ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•´æ•°çš„å…³ç³»ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $1 -gt $2 ]</span><br><span class="line">   then</span><br><span class="line">echo &quot;$1 &gt; $2&quot;</span><br><span class="line">elif [ $1 -eq $2 ]</span><br><span class="line">   then</span><br><span class="line">        echo &quot;$1 = $2&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;$1 &lt; $2&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="4ã€ifé«˜çº§ç”¨æ³•">4ã€ifé«˜çº§ç”¨æ³•</h3><h4 id="4-1ã€æ¡ä»¶ç¬¦å·ä½¿ç”¨åŒåœ†æ‹¬å·ï¼Œå¯ä»¥åœ¨æ¡ä»¶ä¸­æ¤å…¥æ•°å­¦è¡¨è¾¾å¼-if">4.1ã€æ¡ä»¶ç¬¦å·ä½¿ç”¨åŒåœ†æ‹¬å·ï¼Œå¯ä»¥åœ¨æ¡ä»¶ä¸­æ¤å…¥æ•°å­¦è¡¨è¾¾å¼ if (())</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if (( (5+5-5)*5/5 &gt; 10 ))</span><br><span class="line">    then</span><br><span class="line">        echo &quot;yes&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;no&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h4 id="4-2ã€ä½¿ç”¨åŒæ–¹æ‹¬å·-å¯ä»¥åœ¨æ¡ä»¶ä¸­ä½¿ç”¨é€šé…ç¬¦">4.2ã€ä½¿ç”¨åŒæ–¹æ‹¬å·,å¯ä»¥åœ¨æ¡ä»¶ä¸­ä½¿ç”¨é€šé…ç¬¦</h4><p>é€šè¿‡ä»£ç çœ‹ä¸‹ ï¼Œä¸ºå­—ç¬¦ä¸²æä¾›é«˜çº§åŠŸèƒ½ï¼Œæ¨¡å¼åŒ¹é… r* åŒ¹é…rå¼€å¤´çš„å­—ç¬¦ä¸²</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for var in  ab ac rx bx rvv vt</span><br><span class="line">   do</span><br><span class="line">       if [[ &quot;$var&quot; == r* ]]</span><br><span class="line">  then</span><br><span class="line">echo &quot;$var&quot;</span><br><span class="line">       fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="5ã€ç®€å†™if">5ã€ç®€å†™if</h3><p>çœå»äº†å…³é”®å­—ï¼Œæ¡ä»¶ä¸ºçœŸé‡‡ç”¨&amp;&amp;ç¬¦å·é“¾æ¥å‘½ä»¤å—ï¼Œæ¡ä»¶ä¸ºå‡é‡‡ç”¨||é“¾æ¥å‘½ä»¤å—</p><p>ç®€å†™ifä¸€èˆ¬ç”¨åœ¨ç®€å•çš„åˆ¤æ–­ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if [ ! -d /tmp/baism ]</span><br><span class="line">    then</span><br><span class="line">        mkdir /tmp/baism</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ä»¥ç®€å†™ä¸ºï¼š</span></span><br><span class="line">[ ï¼ -d /tmp/baism ] &amp;&amp; mkdir /tmp/baism</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line">if [ $USER == &#x27;root&#x27; ]</span><br><span class="line">  then</span><br><span class="line">      echo &quot;hello root&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;hello guest&quot;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ä»¥ç®€å†™ä¸ºï¼š</span></span><br><span class="line">[ $USER == &#x27;root&#x27; ]&amp;&amp;echo &quot;hello root&quot; || echo &quot;hello guest&quot;</span><br></pre></td></tr></table></figure><h3 id="6ã€if-åˆ¤æ–­">6ã€if åˆ¤æ–­</h3><h4 id="6-1-æ–‡ä»¶åˆ¤æ–­">6.1 æ–‡ä»¶åˆ¤æ–­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸¸ç”¨çš„ï¼š</span></span><br><span class="line">[ -a FILE ] å¦‚æœ FILE å­˜åœ¨åˆ™ä¸ºçœŸã€‚</span><br><span class="line">[ -d FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç›®å½•åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -e FILE ] å¦‚æœ æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨æ—¶è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -f FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -r FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯å¯è¯»çš„åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -w FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯å¯å†™çš„åˆ™è¿”å›ä¸ºçœŸã€‚ï¼ˆä¸€ä¸ªç›®å½•ä¸ºäº†å®ƒçš„å†…å®¹è¢«è®¿é—®å¿…ç„¶æ˜¯å¯æ‰§è¡Œçš„ï¼‰</span><br><span class="line">[ -x FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯å¯æ‰§è¡Œçš„åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸å¸¸ç”¨çš„ï¼š</span></span><br><span class="line">[ -b FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå—æ–‡ä»¶åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -c FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦æ–‡ä»¶åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -g FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”è®¾ç½®äº†SGIDåˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -h FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç¬¦å·ç¬¦å·é“¾æ¥æ–‡ä»¶åˆ™è¿”å›ä¸ºçœŸã€‚ï¼ˆè¯¥é€‰é¡¹åœ¨ä¸€äº›è€ç³»ç»Ÿä¸Šæ— æ•ˆï¼‰</span><br><span class="line">[ -k FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”å·²ç»è®¾ç½®äº†å†’é™©ä½åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -p FILE ] å¦‚æœ FILE å­˜å¹¶ä¸”æ˜¯å‘½ä»¤ç®¡é“æ—¶è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -s FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”å¤§å°é0æ—¶ä¸ºçœŸåˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -u FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”è®¾ç½®äº†SUIDä½æ—¶è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -O FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”å±æœ‰æ•ˆç”¨æˆ·IDåˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -G FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”é»˜è®¤ç»„ä¸ºå½“å‰ç»„åˆ™è¿”å›ä¸ºçœŸã€‚ï¼ˆåªæ£€æŸ¥ç³»ç»Ÿé»˜è®¤ç»„ï¼‰</span><br><span class="line">[ -L FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç¬¦å·è¿æ¥åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -N FILE ] å¦‚æœ FILE å­˜åœ¨ and has been modå¦‚æœied since it was last readåˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ -S FILE ] å¦‚æœ FILE å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå¥—æ¥å­—åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ FILE1 -nt FILE2 ] å¦‚æœ FILE1 æ¯” FILE2 æ–°, æˆ–è€… FILE1 å­˜åœ¨ä½†æ˜¯ FILE2 ä¸å­˜åœ¨åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ FILE1 -ot FILE2 ] å¦‚æœ FILE1 æ¯” FILE2 è€, æˆ–è€… FILE2 å­˜åœ¨ä½†æ˜¯ FILE1 ä¸å­˜åœ¨åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ FILE1 -ef FILE2 ] å¦‚æœ FILE1 å’Œ FILE2 æŒ‡å‘ç›¸åŒçš„è®¾å¤‡å’ŒèŠ‚ç‚¹å·åˆ™è¿”å›ä¸ºçœŸã€‚</span><br></pre></td></tr></table></figure><h4 id="6-2-å­—ç¬¦ä¸²åˆ¤æ–­">6.2 å­—ç¬¦ä¸²åˆ¤æ–­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ -z STRING ] å¦‚æœSTRINGçš„é•¿åº¦ä¸ºé›¶åˆ™è¿”å›ä¸ºçœŸï¼Œå³ç©ºæ˜¯çœŸ</span><br><span class="line">[ -n STRING ] å¦‚æœSTRINGçš„é•¿åº¦éé›¶åˆ™è¿”å›ä¸ºçœŸï¼Œå³éç©ºæ˜¯çœŸ</span><br><span class="line">[ STRING1 ]ã€€ å¦‚æœå­—ç¬¦ä¸²ä¸ä¸ºç©ºåˆ™è¿”å›ä¸ºçœŸ,ä¸-nç±»ä¼¼</span><br><span class="line">[ STRING1 == STRING2 ] å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒåˆ™è¿”å›ä¸ºçœŸ</span><br><span class="line">[ STRING1 != STRING2 ] å¦‚æœå­—ç¬¦ä¸²ä¸ç›¸åŒåˆ™è¿”å›ä¸ºçœŸ</span><br><span class="line">[ STRING1 &lt; STRING2 ] å¦‚æœ â€œSTRING1â€å­—å…¸æ’åºåœ¨â€œSTRING2â€å‰é¢åˆ™è¿”å›ä¸ºçœŸã€‚</span><br><span class="line">[ STRING1 &gt; STRING2 ] å¦‚æœ â€œSTRING1â€å­—å…¸æ’åºåœ¨â€œSTRING2â€åé¢åˆ™è¿”å›ä¸ºçœŸã€‚</span><br></pre></td></tr></table></figure><h4 id="6-3-æ•°å€¼åˆ¤æ–­">6.3 æ•°å€¼åˆ¤æ–­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ INT1 -eq INT2 ] INT1å’ŒINT2ä¸¤æ•°ç›¸ç­‰è¿”å›ä¸ºçœŸ ,=</span><br><span class="line">[ INT1 -ne INT2 ] INT1å’ŒINT2ä¸¤æ•°ä¸ç­‰è¿”å›ä¸ºçœŸ ,&lt;&gt;</span><br><span class="line">[ INT1 -gt INT2 ] INT1å¤§äºINT2è¿”å›ä¸ºçœŸ ,&gt;</span><br><span class="line">[ INT1 -ge INT2 ] INT1å¤§äºç­‰äºINT2è¿”å›ä¸ºçœŸ,&gt;=</span><br><span class="line">[ INT1 -lt INT2 ] INT1å°äºINT2è¿”å›ä¸ºçœŸ ,&lt;</span><br><span class="line">[ INT1 -le INT2 ] INT1å°äºç­‰äºINT2è¿”å›ä¸ºçœŸ,&lt;=</span><br></pre></td></tr></table></figure><h4 id="6-4-æ–‡ä»¶æƒé™åˆ¤æ–­">6.4 æ–‡ä»¶æƒé™åˆ¤æ–­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-rå½“å‰ç”¨æˆ·å¯¹å…¶æ˜¯å¦å¯è¯»</span><br><span class="line">-wå½“å‰ç”¨æˆ·å¯¹å…¶æ˜¯å¦å¯å†™</span><br><span class="line">-xå½“å‰ç”¨æˆ·å¯¹å…¶æ˜¯å¦å¯æ‰§è¡Œ</span><br><span class="line">-uæ˜¯å¦æœ‰suid</span><br><span class="line">-gæ˜¯å¦sgid</span><br><span class="line">-kæ˜¯å¦æœ‰tä½</span><br></pre></td></tr></table></figure><h4 id="6-5-é€»è¾‘åˆ¤æ–­">6.5 é€»è¾‘åˆ¤æ–­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;  (and é€»è¾‘ä¸) ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³ï¼Œæ•´ä¸ªå¤§æ¡ä»¶ä¸ºçœŸ</span><br><span class="line">||(or é€»è¾‘æˆ–)ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä»»æ„ä¸€ä¸ªï¼Œæ•´ä¸ªå¤§æ¡ä»¶ä¸ºçœŸ</span><br><span class="line">ï¼    éè¿ç®—</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><div class="tip warning"><ol><li><p>[ ]è¡¨ç¤ºæ¡ä»¶æµ‹è¯•ã€‚æ³¨æ„è¿™é‡Œçš„ç©ºæ ¼å¾ˆé‡è¦ã€‚è¦æ³¨æ„åœ¨â€™[â€˜åé¢å’Œâ€™]'å‰é¢éƒ½å¿…é¡»è¦æœ‰ç©ºæ ¼</p></li><li><p>åœ¨shellä¸­ï¼Œthenå’Œfiæ˜¯åˆ†å¼€çš„è¯­å¥ã€‚å¦‚æœè¦åœ¨åŒä¸€è¡Œé‡Œé¢è¾“å…¥ï¼Œåˆ™éœ€è¦ç”¨åˆ†å·å°†ä»–ä»¬éš”å¼€ã€‚</p></li><li><p>æ³¨æ„ifåˆ¤æ–­ä¸­å¯¹äºå˜é‡çš„å¤„ç†ï¼Œéœ€è¦åŠ å¼•å·ï¼Œä»¥å…ä¸€äº›ä¸å¿…è¦çš„é”™è¯¯ã€‚æ²¡æœ‰åŠ åŒå¼•å·ä¼šåœ¨ä¸€äº›å«ç©ºæ ¼ç­‰çš„å­—ç¬¦ä¸²å˜é‡åˆ¤æ–­çš„æ—¶å€™äº§ç”Ÿé”™è¯¯ã€‚æ¯”å¦‚[ -n â€œ$varâ€ ]å¦‚æœvarä¸ºç©ºä¼šå‡ºé”™</p></li><li><p>åˆ¤æ–­æ˜¯ä¸æ”¯æŒæµ®ç‚¹å€¼çš„</p></li><li><p>å¦‚æœåªå•ç‹¬ä½¿ç”¨&gt;æˆ–è€…&lt;å·ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºæ˜¯è¾“å‡ºæˆ–è€…è¾“å…¥é‡å®šå‘ï¼Œè™½ç„¶ç»“æœæ˜¾ç¤ºæ­£ç¡®ï¼Œä½†æ˜¯å…¶å®æ˜¯é”™è¯¯çš„ï¼Œå› æ­¤è¦å¯¹è¿™äº›ç¬¦å·è¿›è¡Œè½¬æ„</p></li><li><p>åœ¨é»˜è®¤ä¸­ï¼Œè¿è¡Œifè¯­å¥ä¸­çš„å‘½ä»¤æ‰€äº§ç”Ÿçš„é”™è¯¯ä¿¡æ¯ä»ç„¶å‡ºç°åœ¨è„šæœ¬çš„è¾“å‡ºç»“æœä¸­</p></li><li><p>ä½¿ç”¨-zæˆ–è€…-næ¥æ£€æŸ¥é•¿åº¦çš„æ—¶å€™ï¼Œæ²¡æœ‰å®šä¹‰çš„å˜é‡ä¹Ÿä¸º0</p></li><li><p>ç©ºå˜é‡å’Œæ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡å¯èƒ½ä¼šå¯¹shellè„šæœ¬æµ‹è¯•äº§ç”Ÿç¾éš¾æ€§çš„å½±å“ï¼Œå› æ­¤åœ¨ä¸ç¡®å®šå˜é‡çš„å†…å®¹çš„æ—¶å€™ï¼Œåœ¨æµ‹è¯•å·å‰ä½¿ç”¨-næˆ–è€…-zæµ‹è¯•ä¸€ä¸‹</p></li><li><p>? å˜é‡åŒ…å«äº†ä¹‹å‰æ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼ˆæœ€è¿‘å®Œæˆçš„å‰å°è¿›ç¨‹ï¼‰ï¼ˆå¯ä»¥ç”¨äºæ£€æµ‹é€€å‡ºçŠ¶æ€ï¼‰</p></li></ol></div><h2 id="å…«ã€å¾ªç¯è¯­å¥-forğŸ„">å…«ã€å¾ªç¯è¯­å¥-forğŸ„</h2><h3 id="1ã€forä»‹ç»">1ã€forä»‹ç»</h3><p>è„šæœ¬åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œæ€»ä¼šé‡åˆ°éœ€è¦å¾ªç¯æ‰§è¡Œçš„æ—¶å€™ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦è„šæœ¬æ¯éš”äº”åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡pingçš„æ“ä½œï¼Œé™¤äº†è®¡åˆ’ä»»åŠ¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è„šæœ¬æ¥å®Œæˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨åˆ°äº†å¾ªç¯è¯­å¥ã€‚</p><h3 id="2ã€foråŸºæœ¬è¯­æ³•">2ã€foråŸºæœ¬è¯­æ³•</h3><ul><li>åˆ—è¡¨forå¾ªç¯ï¼šç”¨äºå°†ä¸€ç»„å‘½ä»¤æ‰§è¡Œ<strong>å·²çŸ¥çš„æ¬¡æ•°</strong>ï¼Œä¸‹é¢ç»™å‡ºäº†forå¾ªç¯è¯­å¥çš„åŸºæœ¬æ ¼å¼ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for variable_name in &#123;list&#125;</span><br><span class="line">     do</span><br><span class="line">          command </span><br><span class="line">          command</span><br><span class="line">          â€¦</span><br><span class="line">     done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">for variable in a b c</span><br><span class="line">     do</span><br><span class="line">         command</span><br><span class="line">         command</span><br><span class="line">     done</span><br></pre></td></tr></table></figure><h3 id="3ã€foræ¡ä»¶åº”ç”¨">3ã€foræ¡ä»¶åº”ç”¨</h3><p><strong>foræ¡ä»¶ä¸åŒçš„èµ‹å€¼æ–¹å¼</strong><br>aã€èµ‹å€¼æ¥è‡ªä¸€ä¸ªèŒƒå›´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in &#123;1..10&#125;</span><br><span class="line">do </span><br><span class="line">echo $var</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>bã€ç›´æ¥èµ‹å€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in 1 2 3 4 5</span><br><span class="line">do </span><br><span class="line">echo $var</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>cã€èµ‹å€¼æ¥è‡ªå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in `seq  10`</span><br><span class="line">do </span><br><span class="line">echo $var</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="4ã€for-Cæ ¼å¼è¯­æ³•">4ã€for Cæ ¼å¼è¯­æ³•</h3><p><strong>ç±»Cé£æ ¼çš„forå¾ªç¯</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">for(( expr1;expr2;expr3 ))</span><br><span class="line">do</span><br><span class="line">command</span><br><span class="line">command</span><br><span class="line">â€¦</span><br><span class="line">done</span><br><span class="line">for (( i=1;i&lt;=5;i++))  </span><br><span class="line">do</span><br><span class="line">echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">expr1ï¼šå®šä¹‰å˜é‡å¹¶èµ‹åˆå€¼   å˜é‡åˆå§‹å€¼</span><br><span class="line">expr2ï¼šå†³å®šæ˜¯å¦è¿›è¡Œå¾ªç¯ï¼ˆæ¡ä»¶ï¼‰  å˜é‡çš„æ¡ä»¶</span><br><span class="line">expr3ï¼šå†³å®šå¾ªç¯å˜é‡å¦‚ä½•æ”¹å˜,å†³å®šå¾ªç¯ä»€ä¹ˆæ—¶å€™é€€å‡º è‡ªå¢æˆ–è‡ªå‡è¿ç®—</span><br><span class="line"></span><br><span class="line">å¤šå˜é‡ç”¨æ³•</span><br><span class="line">for ((A=1,B=10;A&lt;10,B&gt;1;A++,B--))</span><br></pre></td></tr></table></figure><p><strong>è¯­æ³•ç»“æ„ä¸¾ä¾‹è¯´æ˜ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for ((i=1;i&lt;=5;i++));do echo $i;done</span><br><span class="line">for ((i=1;i&lt;=10;i+=2));do echo $i;done</span><br><span class="line">for ((i=2;i&lt;=10;i+=2));do echo $i;done</span><br></pre></td></tr></table></figure><h3 id="5ã€foråµŒå¥—">5ã€foråµŒå¥—</h3><h4 id="5-1-foråµŒå¥—if">5.1 foråµŒå¥—if</h4><p><strong>æ¡ˆä¾‹:</strong><br>è¾“å‡º1-9ï¼Œå½“è¾“å‡º5æ—¶åœæ­¢è¾“å‡º</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description:è¾“å‡º1-9ï¼Œå½“è¾“å‡º5æ—¶åœæ­¢è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">for ((num=1;num&lt;10;num++))</span><br><span class="line">   do</span><br><span class="line">     echo $num</span><br><span class="line">     [ $num -eq 5 ]&amp;&amp; break</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="5-2-foråµŒå¥—for">5.2 foråµŒå¥—for</h4><p><strong>æ¡ˆä¾‹:</strong><br>æ‰“å°99ä¹˜æ³•è¡¨</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ‰“å°99ä¹˜æ³•è¡¨ï¼Œæ€è€ƒA*Bçš„å…³ç³»</span></span><br><span class="line"></span><br><span class="line">for ((A=1;A&lt;=9;A++))</span><br><span class="line">  do</span><br><span class="line">     for ((B=1;B&lt;=$A;B++))</span><br><span class="line">        do</span><br><span class="line">           echo -n -e &quot;$B*$A=$((A*B)) \t&quot;</span><br><span class="line">     done</span><br><span class="line">     #æ¢è¡Œ</span><br><span class="line">     echo </span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="6ã€forä¸æ•°ç»„">6ã€forä¸æ•°ç»„</h3><h4 id="6-1-ä½¿ç”¨forå¾ªç¯éå†è¯»å‡ºæ•°ç»„">6.1 ä½¿ç”¨forå¾ªç¯éå†è¯»å‡ºæ•°ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name=(&#x27;tom&#x27; &#x27;jarry&#x27; &#x27;harry&#x27; &#x27;barry&#x27;)</span><br><span class="line">for i in 0 1 2 3</span><br><span class="line">  do</span><br><span class="line">      echo $&#123;name[$i]&#125;</span><br><span class="line"> done</span><br></pre></td></tr></table></figure><h4 id="6-2-ä½¿ç”¨forå¾ªç¯è¿›è¡Œæ•°ç»„å­˜å€¼">6.2 ä½¿ç”¨forå¾ªç¯è¿›è¡Œæ•°ç»„å­˜å€¼</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 0 9`</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">     <span class="built_in">read</span> -p <span class="string">&quot;name: &quot;</span> name[<span class="variable">$i</span>]</span><br><span class="line"> <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="ä¹ã€å¾ªç¯è¯­å¥-whileğŸ¥¬">ä¹ã€å¾ªç¯è¯­å¥-whileğŸ¥¬</h2><p>whileåœ¨shellä¸­ä¹Ÿæ˜¯è´Ÿè´£å¾ªç¯çš„è¯­å¥ï¼Œå’Œforä¸€æ ·ã€‚å› ä¸ºåŠŸèƒ½ä¸€æ ·ï¼Œå¾ˆå¤šäººåœ¨å­¦ä¹ å’Œå·¥ä½œä¸­çš„è„šæœ¬é‡åˆ°å¾ªç¯åˆ°åº•è¯¥ä½¿ç”¨forè¿˜æ˜¯whileå‘¢ï¼Ÿå¾ˆå¤šäººä¸çŸ¥é“ï¼Œå°±é€ å°±äº†æœ‰äººä¸€é‡åˆ°å¾ªç¯å°±æ˜¯foræˆ–è€…ä¸€ä½çš„whileã€‚æˆ‘ä¸ªäººè®¤ä¸ºå¯ä»¥æŒ‰ç…§æˆ‘è¯´çš„è¿™ä¸ªæ€æƒ³æ¥ä½¿ç”¨ï¼Œæ—¢çŸ¥é“å¾ªç¯æ¬¡æ•°å°±å¯ä»¥ç”¨forï¼Œæ¯”å¦‚è¯´ä¸€å¤©éœ€è¦å¾ªç¯24æ¬¡ï¼›å¦‚æœä¸çŸ¥é“ä»£ç è¦å¾ªç¯å¤šå°‘æ¬¡ï¼Œé‚£å°±ç”¨whileï¼Œæ¯”å¦‚æˆ‘ä»¬ä½œä¸šä¸­è¦æ±‚å†™çš„çŒœæ•°å­—ï¼Œæ¯ä¸ªäººçŒœå¯¹ä¸€ä¸ªæ•°å­—çš„æ¬¡æ•°éƒ½æ˜¯ä¸èƒ½å›ºå®šçš„ï¼Œä¹Ÿæ˜¯æœªçŸ¥çš„ã€‚æ‰€ä»¥è¿™æ ·çš„å¾ªç¯æˆ‘å°±å»ºè®®å¤§å®¶ç”¨whileäº†ã€‚</p><h3 id="1ã€whileä»‹ç»">1ã€whileä»‹ç»</h3><p>**ç‰¹ç‚¹ï¼š**æ¡ä»¶ä¸ºçœŸå°±è¿›å…¥å¾ªç¯ï¼›æ¡ä»¶ä¸ºå‡å°±é€€å‡ºå¾ªç¯ï¼Œä¸€èˆ¬åº”ç”¨åœ¨æœªçŸ¥å¾ªç¯æ¬¡æ•°çš„ç¯å¢ƒã€‚</p><h3 id="2ã€whileè¯­æ³•">2ã€whileè¯­æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">while [ è¡¨è¾¾å¼ ]</span><br><span class="line">do</span><br><span class="line">command...</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">while  [ 1 -eq 1 ]   # æˆ–è€… (( 1 &gt; 2 ))</span><br><span class="line">  do</span><br><span class="line">     command</span><br><span class="line">     command</span><br><span class="line">     ...</span><br><span class="line"> done</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong><br>ä½¿ç”¨forå¾ªç¯å’Œwhileå¾ªç¯åˆ†åˆ«å¾ªç¯æ‰“å°æ•°ç»„1-5</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">forå¾ªç¯æ‰“å°ï¼š</span><br><span class="line">for ((i=1;i&lt;=5;i++))</span><br><span class="line">do</span><br><span class="line">echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">whileå¾ªç¯æ‰“å°ï¼š</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ‰“å°æ•°å­—1-5</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: æ‰“å°1-5</span></span><br><span class="line"></span><br><span class="line">num=1</span><br><span class="line">while [ $num -le 5 ]</span><br><span class="line">  do</span><br><span class="line">      echo $num</span><br><span class="line">      let num++</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>å¤‡æ³¨ï¼š</strong> çŸ¥é“å¾ªç¯æ¬¡æ•°å°±å¯ä»¥ç”¨forï¼Œæ¯”å¦‚è¯´ä¸€å¤©éœ€è¦å¾ªç¯24æ¬¡ï¼›å¦‚æœä¸çŸ¥é“ä»£ç è¦å¾ªç¯å¤šå°‘æ¬¡ï¼Œé‚£å°±ç”¨whileï¼Œæ¯”å¦‚æˆ‘ä»¬ä½œä¸šä¸­è¦æ±‚å†™çš„çŒœæ•°å­—ï¼Œæ¯ä¸ªäººçŒœå¯¹ä¸€ä¸ªæ•°å­—çš„æ¬¡æ•°éƒ½æ˜¯ä¸èƒ½å›ºå®šçš„ï¼Œä¹Ÿæ˜¯æœªçŸ¥çš„ã€‚</p><h3 id="3ã€whileä¸shellè¿ç®—">3ã€whileä¸shellè¿ç®—</h3><p><strong>3.1 æ¯”è¾ƒè¿ç®—</strong></p><p><strong>æ¡ˆä¾‹ï¼š</strong><br>å¾ªç¯äº¤äº’è¾“å…¥ä¸€ä¸ªå°å†™å­—æ¯ï¼ŒæŒ‰Qé€€å‡ºå¾ªç¯</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŒ‰Qé€€å‡ºåœºæ™¯</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">read -p &quot;è¯·è¾“å…¥ä¸€ä¸ªå°å†™å­—æ¯,æŒ‰Qé€€å‡º: &quot; choose</span><br><span class="line">while [ $choose != &#x27;Q&#x27; ]</span><br><span class="line">  do</span><br><span class="line">     echo &quot;ä½ è¾“å…¥çš„æ˜¯: $choose&quot;</span><br><span class="line">     read -p &quot;è¯·è¾“å…¥ä¸€ä¸ªå°å†™å­—æ¯,æŒ‰Qé€€å‡º: &quot; choose</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>3.2 é€»è¾‘è¿ç®—</strong><br><strong>æ¡ˆä¾‹ï¼š</strong><br>ä½¿ç”¨å¾ªç¯è¯­å¥å¸®åŠ©ä¸ˆæ¯å¨˜æ‰¹é‡é€‰æ‹©å¥³å©¿</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸ˆæ¯å¨˜é€‰å¥³å©¿  åˆ†åˆ«æŒ‰ç…§å§‘å¨˜20  30   40 è¿›è¡Œä¸æˆ–éæ¨¡æ‹Ÿ</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.ç¬¬ä¸€ä¸ªåº”å¾è€…å›ç­”</span></span><br><span class="line">read -p &quot;ä½ æœ‰å¤šå°‘é’±: &quot; money</span><br><span class="line">read -p &quot;ä½ æœ‰å¤šå°‘è½¦: &quot; car</span><br><span class="line">read -p &quot;ä½ å®¶æˆ¿å­æœ‰å‡ å¥—: &quot; house</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">while</span> [ <span class="variable">$money</span> -lt 10000 ]&amp;&amp;[ <span class="variable">$car</span> -lt 1 ]&amp;&amp;[ <span class="variable">$house</span> -lt 2 ]</span></span><br><span class="line">while [ $money -lt 10000 ]||[ $car -lt 1 ]||[ $house -lt 2 ]</span><br><span class="line">  do</span><br><span class="line">     #åº”å¾è€…ä¸æ»¡ä½æ¡ä»¶å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</span><br><span class="line">     echo &quot;æœ‰è¯·ä¸‹ä¸€ä¸ª&quot;</span><br><span class="line">     read -p &quot;ä½ æœ‰å¤šå°‘é’±: &quot; money</span><br><span class="line">     read -p &quot;ä½ æœ‰å¤šå°‘è½¦: &quot; car</span><br><span class="line">     read -p &quot;ä½ å®¶æˆ¿å­æœ‰å‡ å¥—: &quot; house</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åº”å¾è€…æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">echo  &quot;ä¹–å¥³å©¿ï¼Œä½ æ€ä¹ˆæ‰æ¥å•Šï¼å¥³å„¿ç»™ä½ äº†&quot;</span><br></pre></td></tr></table></figure><p><strong>3.3 æ–‡ä»¶ç±»å‹åˆ¤æ–­</strong><br><strong>æ¡ˆä¾‹:</strong><br>ä½¿ç”¨å¾ªç¯åˆ¤æ–­/tmp/xxxç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯æ–‡ä»¶ç±»å‹çš„æ‰“å°å­—ç¬¦ä¸²&quot;ç›®å½•&quot;</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶ç±»å‹åˆ¤æ–­</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">while [ ! -f /tmp/xxx ]</span><br><span class="line"> do</span><br><span class="line">   echo â€œç›®å½•â€</span><br><span class="line">   sleep 1</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>3.4 ç‰¹æ®Šæ¡ä»¶</strong></p><p>whileè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ç‰¹æ®Šæ¡ä»¶æ¥è¿›è¡Œå¾ªç¯ï¼š</p><ul><li>ç¬¦å·&quot;:&quot; æ¡ä»¶ä»£è¡¨çœŸï¼Œé€‚ç”¨ä¸æ— é™å¾ªç¯</li><li>å­—ç¬¦ä¸² â€œtrueâ€ æ¡ä»¶ä»£è¡¨çœŸï¼Œé€‚ç”¨ä¸æ— é™å¾ªç¯</li><li>å­—ç¬¦ä¸² &quot;false&quot;æ¡ä»¶ä»£è¡¨å‡</li></ul><p><strong>ä»£ç å±•ç¤º</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ç‰¹æ®Šç¬¦å· :  ä»£è¡¨çœŸ</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">while : </span><br><span class="line"> do</span><br><span class="line">   echo haha</span><br><span class="line">   sleep 1</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">true å­—ç¬¦ä¸²ä»£è¡¨çœŸï¼Œå’Œ:ç±»ä¼¼</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#Author: www.zutuanxue.com</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Created Time:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Release:</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description:</span> </span><br><span class="line"></span><br><span class="line">while true</span><br><span class="line"> do</span><br><span class="line">   echo haha</span><br><span class="line">   sleep 1</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">false   å­—ç¬¦ä¸²ä»£è¡¨å‡ï¼Œåœ¨whileä¸­ä¸ä¼šå¼€å§‹å¾ªç¯</span><br></pre></td></tr></table></figure><h3 id="4ã€whileä¸å¾ªç¯æ§åˆ¶è¯­å¥">4ã€whileä¸å¾ªç¯æ§åˆ¶è¯­å¥</h3><p><strong>4.1 sleepè¯­å¥</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: å€’è®¡æ—¶æ¸¸æˆ</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.å®šä¹‰åˆå§‹å€¼</span></span><br><span class="line">time=9</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.å¾ªç¯è¾“å‡ºï¼Œ1ç§’ä¸€æ¬¡</span></span><br><span class="line">while [ $time -ge 0 ]</span><br><span class="line">  do</span><br><span class="line">     echo -n -e  &quot;\b$time&quot;</span><br><span class="line">     let time--</span><br><span class="line">     #æ§åˆ¶å¾ªç¯ 1ç§’ä¸€æ¬¡</span><br><span class="line">     sleep 1</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å›è½¦</span></span><br><span class="line">echo</span><br></pre></td></tr></table></figure><p><strong>4.2 break</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: è¾“å‡ºæ•°å­—1-9ï¼Œå½“è¾“å‡º5æ—¶åœæ­¢</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1ã€å®šä¹‰åˆå§‹å€¼</span></span><br><span class="line">num=1</span><br><span class="line"></span><br><span class="line">while [ $num -lt 10 ]</span><br><span class="line">  do</span><br><span class="line">     echo $num</span><br><span class="line"></span><br><span class="line">     #åˆ¤æ–­å½“å‰numçš„å€¼ï¼Œå¦‚æœç­‰äº5å°±è·³å‡ºå¾ªç¯</span><br><span class="line">     if [ $num -eq 5 ]</span><br><span class="line">        then</span><br><span class="line">break</span><br><span class="line">     fi</span><br><span class="line"></span><br><span class="line">     #è‡ªåŠ¨ç´¯åŠ </span><br><span class="line">     let num++</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>4.3 continue</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#Author:</span></span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Created Time:</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Release:</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: è¾“å‡ºæ•°å­—1-9,å½“ç­‰äº5æ—¶è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œè¾“å‡º1ã€2ã€3ã€4ã€6ã€7ã€8ã€9</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1ã€å®šä¹‰åˆå§‹å€¼</span></span><br><span class="line">num=0</span><br><span class="line"></span><br><span class="line">while [ $num -lt 9 ]</span><br><span class="line">  do</span><br><span class="line">     #è‡ªåŠ¨ç´¯åŠ </span><br><span class="line">     let num++</span><br><span class="line">     </span><br><span class="line">     #åˆ¤æ–­å½“å‰numçš„å€¼ï¼Œå¦‚æœç­‰äº5å°±è·³è¿‡æœ¬æ¬¡å¾ªç¯</span><br><span class="line">     if [ $num -eq 5 ]</span><br><span class="line">        then</span><br><span class="line">continue</span><br><span class="line">     fi</span><br><span class="line"></span><br><span class="line">     #è¾“å‡ºnumçš„å€¼</span><br><span class="line">     echo $num</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="5ã€whileåµŒå¥—å…¶ä»–è¯­å¥">5ã€whileåµŒå¥—å…¶ä»–è¯­å¥</h3><p><strong>5.1 whileåµŒå¥—if</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: è¾“å‡ºæ•°å­—1-9ï¼Œå½“è¾“å‡º5æ—¶åœæ­¢</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1ã€å®šä¹‰åˆå§‹å€¼</span></span><br><span class="line">num=1</span><br><span class="line"></span><br><span class="line">while [ $num -lt 10 ]</span><br><span class="line">  do</span><br><span class="line">     echo $num</span><br><span class="line"></span><br><span class="line">     #åˆ¤æ–­å½“å‰numçš„å€¼ï¼Œå¦‚æœç­‰äº5å°±è·³å‡ºå¾ªç¯</span><br><span class="line">     if [ $num -eq 5 ]</span><br><span class="line">        then</span><br><span class="line">break</span><br><span class="line">     fi</span><br><span class="line"></span><br><span class="line">     #è‡ªåŠ¨ç´¯åŠ </span><br><span class="line">     let num++</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>5.2 whileåµŒå¥—for</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: 99ä¹˜æ³•è¡¨</span></span><br><span class="line"></span><br><span class="line">A=1</span><br><span class="line">while [ $A -lt 10 ]</span><br><span class="line">  do</span><br><span class="line">    for ((B=1;B&lt;=$A;B++))</span><br><span class="line">       do</span><br><span class="line">  echo -n -e &quot;$B*$A=$((A*B)) \t&quot;</span><br><span class="line">   done</span><br><span class="line">   echo </span><br><span class="line">   let A++</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>5.3 whileåµŒå¥—while</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: 99ä¹˜æ³•è¡¨</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®šä¹‰A</span></span><br><span class="line">A=1</span><br><span class="line">while [ $A -lt 10 ]</span><br><span class="line">  do</span><br><span class="line">      #å®šä¹‰B</span><br><span class="line">      B=1</span><br><span class="line">      while [ $B -le $A ]</span><br><span class="line">        do</span><br><span class="line">          echo -n -e &quot;$B*$A=$((A*B)) \t&quot;</span><br><span class="line">          let B++</span><br><span class="line">      done</span><br><span class="line"></span><br><span class="line">   echo </span><br><span class="line">   let A++</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="åã€å¾ªç¯è¯­å¥-untilğŸ«‘">åã€å¾ªç¯è¯­å¥-untilğŸ«‘</h2><p>ç³»ç»Ÿä¸­è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼whileçš„å¾ªç¯è¯­å¥ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹untilè¯­å¥ï¼Œä¸åŒäºwhileçš„æ˜¯ï¼Œå½“æ¡ä»¶ä¸ºå‡æ—¶å¼€å§‹untilå¾ªç¯ã€‚</p><h3 id="1ã€untilä»‹ç»">1ã€untilä»‹ç»</h3><p>ç‰¹ç‚¹ï¼šæ¡ä»¶ä¸ºå‡å°±è¿›å…¥å¾ªç¯ï¼›æ¡ä»¶ä¸ºçœŸå°±é€€å‡ºå¾ªç¯</p><h3 id="2ã€untilè¯­æ³•">2ã€untilè¯­æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">until expression   [ 1 -eq 1 ]  (( 1 &gt;= 1 ))</span><br><span class="line">do</span><br><span class="line">command</span><br><span class="line">command</span><br><span class="line">...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹ï¼š</strong><br>ä½¿ç”¨whileå¾ªç¯å’Œuntilå¾ªç¯æ‰“å°æ•°å­—æ¥é¾™ï¼Œè¦æ±‚whileå¾ªç¯è¾“å‡º1-5ï¼Œuntilå¾ªç¯è¾“å‡º6-9.</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Description: æ•°å­—æ¥é¾™</span></span><br><span class="line"></span><br><span class="line">i=1</span><br><span class="line">while [ $i -le 5 ]</span><br><span class="line">do</span><br><span class="line">echo $i</span><br><span class="line">let i++</span><br><span class="line">until [ $i -le 5 ]</span><br><span class="line">do</span><br><span class="line">    echo $i</span><br><span class="line">            let i++</span><br><span class="line">            [ $i -eq 10 ]&amp;&amp;break</span><br><span class="line">done</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="åä¸€ã€æ¡ä»¶å¾ªç¯è¯­å¥-caseğŸŒ">åä¸€ã€æ¡ä»¶å¾ªç¯è¯­å¥-caseğŸŒ</h2><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬æ€»ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜éœ€è¦æ ¹æ®ä¸åŒçš„çŠ¶å†µæ¥æ‰§è¡Œä¸åŒçš„é¢„æ¡ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å¤„ç†è¿™æ ·çš„é—®é¢˜å°±è¦é¦–å…ˆæ ¹æ®å¯èƒ½å‡ºç°çš„æƒ…å†µå†™å‡ºå¯¹åº”é¢„æ¡ˆï¼Œæ ¹æ®å‡ºç°çš„æƒ…å†µæ¥åŠ è½½ä¸åŒçš„é¢„æ¡ˆã€‚</p><h3 id="1ã€caseä»‹ç»">1ã€caseä»‹ç»</h3><p>ç‰¹ç‚¹ï¼šæ ¹æ®ç»™äºˆçš„ä¸åŒæ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚ä½ å»ç›¸äº²ï¼šä½ ä¼šåœ¨è„‘å­é‡Œå‡ºç°ä»¥ä¸‹çš„é¢„æ¡ˆï¼š</span><br><span class="line">ç¬¬ä¸€çœ¼çœ‹åˆ°å¯¹æ–¹çˆ¶äº²ï¼Œä½ åº”è¯¥è¯´ï¼šä¼¯çˆ¶å¥½</span><br><span class="line">ç¬¬ä¸€çœ¼çœ‹åˆ°å¯¹æ–¹æ¯äº²ï¼Œä½ åº”è¯¥è¯´ï¼šä¼¯æ¯å¥½</span><br><span class="line">ç¬¬ä¸€çœ¼çœ‹åˆ°å¯¹æ–¹å¥¶å¥¶ï¼Œä½ åº”è¯¥è¯´ï¼šå¥¶å¥¶å¥½</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è€Œè¿™ä¸ªä¾‹å­ä¸­è§¦å‘å°±æ˜¯ä½ ç¬¬ä¸€çœ¼çœ‹åˆ°äº†å¯¹æ–¹çš„è°ï¼Œé¢„æ¡ˆåˆ™æ˜¯å«ä»€ä¹ˆç§°å‘¼ã€‚</span><br><span class="line"></span><br><span class="line">å†æ¥è¯´ä¸€ä¸ªè®¡ç®—æœºçš„ç›¸å…³ä¾‹å­---ç›‘æ§å†…å­˜ä½¿ç”¨ç‡</span><br><span class="line">å†…å­˜ä½¿ç”¨ç‡ä½äº80%ï¼Œè„šæœ¬è¾“å‡ºï¼š ç»¿è‰²å­—ä½“çš„Memory use xx%</span><br><span class="line">å†…å­˜ä½¿ç”¨ç‡å¤§äº80%å°äº90%ï¼Œè„šæœ¬è¾“å‡ºï¼š é»„è‰²å­—ä½“çš„Memory use xx%</span><br><span class="line">å†…å­˜ä½¿ç”¨å¤§äº90%ï¼Œè„šæœ¬è¾“å‡ºï¼š çº¢è‰²å­—ä½“çš„Memory use xx%</span><br></pre></td></tr></table></figure><h3 id="2ã€caseè¯­æ³•">2ã€caseè¯­æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">case $var in             å®šä¹‰å˜é‡;varä»£è¡¨æ˜¯å˜é‡å</span><br><span class="line">pattern 1)              æ¨¡å¼1;ç”¨ | åˆ†å‰²å¤šä¸ªæ¨¡å¼ï¼Œç›¸å½“äºor</span><br><span class="line">    command1            éœ€è¦æ‰§è¡Œçš„è¯­å¥</span><br><span class="line">    ;;                  ä¸¤ä¸ªåˆ†å·ä»£è¡¨å‘½ä»¤ç»“æŸ</span><br><span class="line">pattern 2)</span><br><span class="line">    command2</span><br><span class="line">    ;;</span><br><span class="line">pattern 3)</span><br><span class="line">    command3</span><br><span class="line">    ;;</span><br><span class="line">  *)              defaultï¼Œä¸æ»¡è¶³ä»¥ä¸Šæ¨¡å¼ï¼Œé»˜è®¤æ‰§è¡Œ*)ä¸‹é¢çš„è¯­å¥</span><br><span class="line">    command4</span><br><span class="line">    ;;</span><br><span class="line">esacesacè¡¨ç¤ºcaseè¯­å¥ç»“æŸ</span><br></pre></td></tr></table></figure><h3 id="3ã€æ¡ˆä¾‹">3ã€æ¡ˆä¾‹</h3><p><strong>æ¡ˆä¾‹éœ€æ±‚</strong><br>å†™ä¸€ä¸ªnginxå¯åŠ¨ç®¡ç†è„šæœ¬ï¼Œå¯ä»¥å®ç°/etc/init.d/nginx start|stop|restart|status|reload<br>æˆ–è€…<br>systemctl start nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nginx service manage script</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">variables</span></span><br><span class="line">nginx_install_doc=/usr/local/nginx</span><br><span class="line">proc=nginx</span><br><span class="line">nginxd=$nginx_install_doc/sbin/nginx</span><br><span class="line">pid_file=$nginx_install_doc/logs/nginx.pid</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source <span class="keyword">function</span> library.</span></span><br><span class="line">if [ -f /etc/init.d/functions ];then</span><br><span class="line">   . /etc/init.d/functions</span><br><span class="line">else</span><br><span class="line">   echo &quot;not found file /etc/init.d/functions&quot;</span><br><span class="line">   exit</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‡å¦‚pidæ–‡ä»¶å­˜åœ¨ï¼Œé‚£ä¹ˆç»Ÿè®¡ä¸€ä¸‹nginxè¿›ç¨‹æ•°é‡</span></span><br><span class="line">if [ -f $pid_file ];then</span><br><span class="line">   nginx_process_id=`cat $pid_file` </span><br><span class="line">   nginx_process_num=`ps aux |grep $nginx_process_id|grep -v &quot;grep&quot;|wc -l`</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">function</span></span></span><br><span class="line">start () &#123;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¦‚æœnginx æ²¡æœ‰å¯åŠ¨ç›´æ¥å¯åŠ¨ï¼Œå¦åˆ™æŠ¥é”™ å·²ç»å¯åŠ¨</span></span><br><span class="line">if [ -f $pid_file ]&amp;&amp;[ $nginx_process_num -ge 1 ];then</span><br><span class="line">   echo &quot;nginx running...&quot;</span><br><span class="line">else</span><br><span class="line"><span class="meta prompt_">   #</span><span class="language-bash">å¦‚æœpidæ–‡ä»¶å­˜åœ¨ï¼Œä½†æ˜¯æ²¡æœ‰è¿›ç¨‹ï¼Œè¯´æ˜ä¸Šä¸€æ¬¡éæ³•å…³é—­äº†nginx,é€ æˆpidæ–‡ä»¶æ²¡æœ‰è‡ªåŠ¨åˆ é™¤,æ‰€ä»¥å¯åŠ¨nginxä¹‹å‰å…ˆåˆ é™¤æ—§çš„pidæ–‡ä»¶</span></span><br><span class="line">   if [ -f $pid_file ] &amp;&amp; [ $nginx_process_num -lt 1 ];then</span><br><span class="line">        rm -f $pig_file</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œä¸¤ç§æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœ</span></span><br><span class="line">        #1)daemon</span><br><span class="line">        #2)action   å»ºè®®è¿™ä¸ªï¼Œç®€å•æ˜“ç”¨</span><br><span class="line">        </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot; nginx start `daemon <span class="variable">$nginxd</span>` &quot;</span></span></span><br><span class="line">        action &quot;nginx start&quot; $nginxd</span><br><span class="line">  fi</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot; nginx start `daemon <span class="variable">$nginxd</span>` &quot;</span></span></span><br><span class="line">  action &quot;nginx start&quot; $nginxd</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop () &#123;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ¤æ–­nginxå¯åŠ¨çš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œå…³é—­ï¼Œå¦‚æœæ²¡å¯åŠ¨ç›´æ¥æŠ¥é”™ï¼Œæˆ–è€…æç¤ºç”¨æˆ·æœåŠ¡æ²¡å¯åŠ¨,è¿™é‡Œæˆ‘ç›´æ¥æŠ¥é”™çš„åŸå› æ˜¯ä¸ºäº†ç»™å¤§å®¶æ¼”ç¤ºå¤±è´¥çš„è¾“å‡º</span></span><br><span class="line">if [ -f $pid_file ]&amp;&amp;[ $nginx_process_num -ge 1 ];then</span><br><span class="line">     action &quot;nginx stop&quot; killall -s QUIT $proc</span><br><span class="line">     rm -f $pid_file</span><br><span class="line">else</span><br><span class="line">     action &quot;nginx stop&quot; killall -s QUIT $proc 2&gt;/dev/null</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart () &#123;</span><br><span class="line">  stop</span><br><span class="line">  sleep 1</span><br><span class="line">  start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reload () &#123;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é‡è½½çš„ç›®çš„æ˜¯è®©ä¸»è¿›ç¨‹é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶,ä½†æ˜¯å‰ææ˜¯æœåŠ¡å¿…é¡»å¼€å¯</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è¿™é‡Œå…ˆåˆ¤æ–­æœåŠ¡æ˜¯å¦å¼€å¯ï¼Œå¼€å¯å°±æ‰§è¡ŒåŠ è½½ï¼Œæ²¡æœ‰å¼€å¯ç›´æ¥æŠ¥åŠ è½½é”™è¯¯</span></span><br><span class="line">if [ -f $pid_file ]&amp;&amp;[ $nginx_process_num -ge 1 ];then</span><br><span class="line">    action &quot;nginx reload&quot; killall -s HUP $proc</span><br><span class="line">else</span><br><span class="line">    action &quot;nginx reload&quot; killall -s HUP $proc 2&gt;/dev/null</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status () &#123;</span><br><span class="line">if [ -f $pid_file ]&amp;&amp;[ $nginx_process_num -ge 1 ];then</span><br><span class="line"> echo &quot;nginx running...&quot;</span><br><span class="line">else</span><br><span class="line"> echo &quot;nginx stop&quot;</span><br><span class="line">fi </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">callable</span></span><br><span class="line">case $1 in </span><br><span class="line">start) start;;</span><br><span class="line">stop) stop;;</span><br><span class="line">restart) restart;;</span><br><span class="line">reload) reload;;</span><br><span class="line">status) status;;</span><br><span class="line">*) echo &quot;USAGE: $0 start|stop|restart|reload|status&quot;;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><h2 id="åäºŒã€å¾ªç¯æ§åˆ¶ğŸ">åäºŒã€å¾ªç¯æ§åˆ¶ğŸ</h2><h3 id="1ã€break">1ã€break</h3><p>ä½œç”¨: ç»ˆæ­¢å¾ªç¯ï¼Œæ‰§è¡Œå¾ªç¯ä½“åé¢çš„ä»£ç <br><strong>æ¡ˆä¾‹:</strong><br>å¾ªç¯æ‰“å°è¾“å‡ºæ•°å­—1åˆ°9ï¼Œå½“æ‰§è¡Œè¾“å‡ºåˆ°5æ—¶ç»ˆæ­¢å¾ªç¯ã€‚</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in `seq 1 9`</span><br><span class="line">  do</span><br><span class="line">      echo $i</span><br><span class="line">      if [ $i -eq 5 ]</span><br><span class="line"> then</span><br><span class="line">   break</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line">echo &quot;æ‰§è¡Œå®Œæ¯•&quot;</span><br></pre></td></tr></table></figure><h3 id="2ã€continue">2ã€continue</h3><p>ä½œç”¨: è·³è¿‡æŸæ¬¡å¾ªç¯ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ï¼›è¡¨ç¤ºå¾ªç¯ä½“å†…ä¸‹é¢çš„ä»£ç ä¸æ‰§è¡Œï¼Œé‡æ–°å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</p><p><strong>æ¡ˆä¾‹:</strong><br>å¾ªç¯æ‰“å°è¾“å‡ºæ•°å­—1åˆ°9ï¼Œå½“æ‰§è¡Œè¾“å‡ºåˆ°5æ—¶è·³è¿‡æœ¬æ¬¡å¾ªç¯ã€‚</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for ((i=1;i&lt;10;i++))</span><br><span class="line">   do</span><br><span class="line">       if [ $i -eq 5 ]</span><br><span class="line">  then </span><br><span class="line">continue</span><br><span class="line">else</span><br><span class="line">echo $i</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">done</span><br><span class="line">echo &quot;æ‰§è¡Œå®Œæ¯•&quot;</span><br></pre></td></tr></table></figure><h3 id="3ã€sleep">3ã€sleep</h3><p>ä½œç”¨: æ§åˆ¶å¾ªç¯çš„èŠ‚å¥,æ§åˆ¶å¾ªç¯é¢‘ç‡<br>å½“æ‰§è¡Œä¸€ä¸ªæ— é™å¾ªç¯è¯­å¥çš„æ—¶å€™ï¼Œå¦‚æœä»»æ„å…¶å¾ªç¯é‚£ä¹ˆè¯¥å¾ªç¯å°±ä¼šç–¯ç‹‚çš„æ¶ˆè€—è®¡ç®—æœºçš„å†…å­˜å’ŒCPUèµ„æºï¼Œæ¶ˆè€—æœ€å¤§çš„å°±æ˜¯CPUï¼Œæ‰€ä»¥ä¸€ä¸ªå¾ªç¯ä¸å¯èƒ½è®©å…¶è‚†æ„å¾ªç¯ï¼Œå¿…é¡»æ§åˆ¶å…¶å¾ªç¯çš„èŠ‚å¥ï¼Œå¯ä»¥ä½¿ç”¨sleepè¯­å¥æ¥å®Œæˆã€‚</p><p><strong>æ¡ˆä¾‹ï¼š</strong><br>å†™ä¸€ä¸ªå€’è®¡æ—¶ç¨‹åºï¼šä»9åˆ°1ï¼Œæ¯ç§’å€’æ•°ä¸€æ¬¡ã€‚</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo -n &quot;å€’è®¡æ—¶: &quot;</span><br><span class="line">for i in `seq 9 -1 1`</span><br><span class="line">   do</span><br><span class="line">      echo -n -e &quot;\b$i&quot;</span><br><span class="line">      sleep 1</span><br><span class="line">done</span><br><span class="line">echo </span><br><span class="line">echo &quot;æ‰§è¡Œå®Œæ¯•&quot;</span><br></pre></td></tr></table></figure><h3 id="4ã€shift">4ã€shift</h3><p>ä½œç”¨: å¤–éƒ¨ä¼ å‚åˆ°å¾ªç¯æ—¶ï¼Œå‚æ•°ç®¡ç†å‘½ä»¤<br>ä½¿ä½ç½®å‚æ•°å‘å·¦ç§»åŠ¨ï¼Œé»˜è®¤ç§»åŠ¨1ä½ï¼Œå¯ä»¥ä½¿ç”¨shift 2 ä¼ å‚è¦æ˜¯Nçš„æ•´æ•°å€</p><p><strong>æ¡ˆä¾‹:</strong><br>é€šè¿‡å¤–éƒ¨ä¼ å‚çš„æ–¹å¼å‘è„šæœ¬å†…çš„å¾ªç¯ä¼ é€’å‚æ•°ï¼Œè¦æ±‚æ‰“å°æ¯æ¬¡å¾ªç¯ä½¿ç”¨çš„å‚æ•°ã€‚</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1ã€åˆ¤æ–­å¤–ä¼ å‚çš„æ•°é‡</span></span><br><span class="line">[ $# -lt 3 ]&amp;&amp;echo &#x27;è¯·è¾“å…¥è‡³å°‘ä¸‰ä¸ªå‚æ•°:&#x27;$0&#x27; $1 $2 $3 ...&#x27;&amp;&amp;exit 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°†å‚æ•°çš„æ•°é‡èµ‹å€¼ç»™count</span></span><br><span class="line">count=$#</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é€šè¿‡<span class="built_in">shift</span>å·¦ç§»å‚æ•°è¾“å‡º</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä½¿ä½ç½®å‚æ•°å‘å·¦ç§»åŠ¨ï¼Œé»˜è®¤ç§»åŠ¨1ä½ï¼Œå¯ä»¥ä½¿ç”¨<span class="built_in">shift</span> 2 ä¼ å‚è¦æ˜¯Nçš„æ•´æ•°å€</span></span><br><span class="line">for ((i=1;i&lt;=$count;i++))</span><br><span class="line">  do</span><br><span class="line">    echo &#x27;å‚æ•°æ•°é‡: &#x27;$#&#x27;&#x27;</span><br><span class="line">    echo &#x27;å½“å‰$1çš„æ•°å€¼æ˜¯: &#x27;$1&#x27;&#x27;</span><br><span class="line">    shift 1</span><br><span class="line">    sleep 1</span><br><span class="line">done</span><br><span class="line">echo &quot;æ‰§è¡Œå®Œæ¯•&quot;</span><br></pre></td></tr></table></figure><h3 id="5ã€exit">5ã€exit</h3><p>ä½œç”¨: é€€å‡ºç¨‹åºå¹¶é‡Šæ”¾å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚</p><p><strong>æ¡ˆä¾‹:</strong><br>å¾ªç¯è¾“å‡ºæ•°å­—1-9ï¼Œå½“å¾ªç¯åˆ°5æ—¶é€€å‡ºè„šæœ¬ã€‚</p><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in `seq 1 9`</span><br><span class="line">  do</span><br><span class="line">      echo $i</span><br><span class="line">      if [ $i -eq 5 ]</span><br><span class="line"> then</span><br><span class="line">   exit 0  </span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line">echo &quot;æ‰§è¡Œå®Œæ¯•&quot;</span><br></pre></td></tr></table></figure><h2 id="åä¸‰ã€-æ­£åˆ™è¡¨è¾¾å¼ğŸ“">åä¸‰ã€ æ­£åˆ™è¡¨è¾¾å¼ğŸ“</h2><h3 id="1ã€æ­£åˆ™è¡¨è¾¾å¼ä»‹ç»">1ã€æ­£åˆ™è¡¨è¾¾å¼ä»‹ç»</h3><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼ˆRegular   Expressionã€regexæˆ–regexpï¼Œç¼©å†™ä¸ºREï¼‰ï¼Œä¹Ÿè¯‘ä¸ºæ­£è§„è¡¨ç¤ºæ³•ã€å¸¸è§„è¡¨ç¤ºæ³•ï¼Œæ˜¯ä¸€ç§å­—ç¬¦æ¨¡å¼ï¼Œç”¨äºåœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­åŒ¹é…æŒ‡å®šçš„å­—ç¬¦ã€‚</p><p>è®¸å¤šç¨‹åºè®¾è®¡è¯­è¨€éƒ½æ”¯æŒåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œ<strong>å­—ç¬¦ä¸²æ“ä½œ</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨Perlä¸­å°±å†…å»ºäº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼è¿™ä¸ªæ¦‚å¿µæœ€åˆæ˜¯ç”±Unixä¸­çš„å·¥å…·è½¯ä»¶ï¼ˆä¾‹å¦‚sedå’Œgrepï¼‰æ™®åŠå¼€çš„ã€‚</p><p><strong>æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„ç¨‹åºå¦‚ï¼šlocate |find| vim| grep| sed |awk</strong></p><p><strong>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªä¸‰æ–¹äº§å“ï¼Œè¢«å¸¸ç”¨è®¡ç®—æœºè¯­è¨€å¹¿æ³›ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼šshellã€PHPã€pythonã€javaã€jsç­‰ï¼</strong></p><h3 id="2ã€æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦">2ã€æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦</h3><p>å®šä½ç¬¦ä½¿ç”¨æŠ€å·§ï¼šåŒæ—¶é”šå®šå¼€å¤´å’Œç»“å°¾ï¼Œåšç²¾ç¡®åŒ¹é…ï¼›å•ä¸€é”šå®šå¼€å¤´æˆ–ç»“å°¾æˆ–è€…ä¸é”šå®šçš„ï¼Œåšæ¨¡ç³ŠåŒ¹é…ã€‚</p><table><thead><tr><th style="text-align:center">å®šä½ç¬¦</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td style="text-align:left">é”šå®šå¼€å¤´ ^a ä»¥aå¼€å¤´ é»˜è®¤é”šå®šä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center">$</td><td style="text-align:left">é”šå®šç»“å°¾ a$ ä»¥aç»“å°¾ é»˜è®¤é”šå®šä¸€ä¸ªå­—ç¬¦</td></tr></tbody></table><p>æµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ac$&quot; file </span><br><span class="line">ac</span><br><span class="line"></span><br><span class="line">2ï¼‰æ¨¡ç³ŠåŒ¹é…  ä»¥aå¼€å¤´</span><br><span class="line">[root@localhost ~]# egrep &quot;^a&quot; file </span><br><span class="line">ac</span><br><span class="line">ab</span><br><span class="line"></span><br><span class="line">3ï¼‰æ¨¡ç³ŠåŒ¹é… ä»¥cç»“å°¾çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;c$&quot; file </span><br><span class="line">ac</span><br><span class="line">abc</span><br></pre></td></tr></table></figure><p>åŒ¹é…ç¬¦:åŒ¹é…å­—ç¬¦ä¸²</p><table><thead><tr><th style="text-align:center">åŒ¹é…ç¬¦</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td style="text-align:left">åŒ¹é…é™¤å›è½¦ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center">( )</td><td style="text-align:left">å­—ç¬¦ä¸²åˆ†ç»„</td></tr><tr><td style="text-align:center">[ ]</td><td style="text-align:left">å®šä¹‰å­—ç¬¦ç±»ï¼ŒåŒ¹é…æ‹¬å·ä¸­çš„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center">[ ^ ]</td><td style="text-align:left">è¡¨ç¤ºå¦å®šæ‹¬å·ä¸­å‡ºç°å­—ç¬¦ç±»ä¸­çš„å­—ç¬¦,å–åã€‚</td></tr><tr><td style="text-align:center">\</td><td style="text-align:left">è½¬ä¹‰å­—ç¬¦</td></tr><tr><td style="text-align:center">&amp;#124</td><td style="text-align:left">æˆ–</td></tr></tbody></table><p>æµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´ä»»æ„  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a.c$&quot; file </span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">a_c</span><br><span class="line"></span><br><span class="line">2ï¼‰æ¨¡ç³ŠåŒ¹é…  ä»¥ccç»“å°¾çš„å­—ç¬¦ä¸²   å› ä¸º$åªèƒ½é”šå®šå•ä¸ªå­—ç¬¦ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å°±éœ€è¦ç”¨()æ¥åšå®šä¹‰</span><br><span class="line">[root@localhost ~]# egrep &quot;(cc)$&quot; file </span><br><span class="line">abcc</span><br><span class="line">aabbcc</span><br><span class="line">acc</span><br><span class="line">ccc</span><br><span class="line"></span><br><span class="line">3ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯a-z,0-9  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[a-z0-9]c$&quot; file </span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">a3c</span><br><span class="line"></span><br><span class="line">4)ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´ä¸åŒ…å«a-z,0-9  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[^a-z0-9]c$&quot; file </span><br><span class="line">a_c</span><br><span class="line">aZc</span><br><span class="line">a c</span><br><span class="line"></span><br><span class="line">5ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥eå¼€å¤´fç»“å°¾  ä¸­é—´æ˜¯*å·  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²  e*f</span><br><span class="line">[root@localhost ~]# egrep &quot;^e\*f$&quot; file </span><br><span class="line">e*f</span><br><span class="line"></span><br><span class="line">6ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´bæˆ–cç»“å°¾  ä¸­é—´æ˜¯ä»»æ„  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a.(b|c)$&quot; file </span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">asb</span><br><span class="line">a_c</span><br><span class="line">aZc</span><br><span class="line">a c</span><br><span class="line">a3c</span><br></pre></td></tr></table></figure><p>é™å®šç¬¦:å¯¹å‰é¢çš„å­—ç¬¦æˆ–è€…(å­—ç¬¦ä¸²)å‡ºç°çš„æ¬¡æ•°åšé™å®šè¯´æ˜</p><table><thead><tr><th style="text-align:center">é™å®šç¬¦</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:left">æŸä¸ªå­—ç¬¦ä¹‹ååŠ æ˜Ÿå·è¡¨ç¤ºè¯¥å­—ç¬¦ä¸å‡ºç°æˆ–å‡ºç°å¤šæ¬¡ a* (ab)*</td></tr><tr><td style="text-align:center">ï¼Ÿ</td><td style="text-align:left">ä¸æ˜Ÿå·ç›¸ä¼¼ï¼Œä½†ç•¥æœ‰å˜åŒ–ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦å‡ºç°ä¸€æ¬¡æˆ–ä¸å‡ºç°</td></tr><tr><td style="text-align:center">+</td><td style="text-align:left">ä¸æ˜Ÿå·ç›¸ä¼¼ï¼Œè¡¨ç¤ºå…¶å‰é¢å­—ç¬¦å‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œä½†å¿…é¡»å‡ºç°ä¸€æ¬¡</td></tr><tr><td style="text-align:center">{n,m}</td><td style="text-align:left">æŸä¸ªå­—ç¬¦ä¹‹åå‡ºç°ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦æœ€å°‘næ¬¡ï¼Œæœ€å¤šmæ¬¡</td></tr><tr><td style="text-align:center">{m}</td><td style="text-align:left">æ­£å¥½å‡ºç°äº†mæ¬¡</td></tr></tbody></table><p>æµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´æ˜¯æœ‰bæˆ–è€…æ²¡æœ‰b é•¿åº¦ä¸é™çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab*c$&quot; file </span><br><span class="line">ac</span><br><span class="line">abbc</span><br><span class="line">abbbc</span><br><span class="line">abbbbbc</span><br><span class="line">abc</span><br><span class="line"></span><br><span class="line">2ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´åªå‡ºç°ä¸€æ¬¡bæˆ–è€…æ²¡æœ‰bçš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab?c$&quot; file </span><br><span class="line">ac</span><br><span class="line">abc</span><br><span class="line"></span><br><span class="line">3ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´æ˜¯æœ‰bä¸”è‡³å°‘å‡ºç°ä¸€æ¬¡ é•¿åº¦ä¸é™çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab+c$&quot; file </span><br><span class="line">abbc</span><br><span class="line">abbbc</span><br><span class="line">abbbbbc</span><br><span class="line">abc</span><br><span class="line"></span><br><span class="line">4ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´æ˜¯æœ‰bä¸”è‡³å°‘å‡ºç°ä¸¤æ¬¡æœ€å¤šå‡ºç°å››æ¬¡ é•¿åº¦ä¸é™çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab&#123;2,4&#125;c$&quot; file </span><br><span class="line">abbc</span><br><span class="line">abbbc</span><br><span class="line"></span><br><span class="line">5ï¼‰ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´æ˜¯æœ‰bä¸”æ­£å¥½å‡ºç°ä¸‰æ¬¡çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab&#123;3&#125;c$&quot; file </span><br><span class="line">abbbc</span><br><span class="line"></span><br><span class="line">6) ç²¾ç¡®åŒ¹é… ä»¥aå¼€å¤´ cç»“å°¾ ä¸­é—´æ˜¯æœ‰bä¸”è‡³å°‘å‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^ab&#123;1,&#125;c$&quot; file </span><br><span class="line">abbc</span><br><span class="line">abbbc</span><br><span class="line">abbbbbc</span><br><span class="line">abc</span><br></pre></td></tr></table></figure><h3 id="3ã€æ­£åˆ™è¡¨è¾¾å¼POSIXå­—ç¬¦">3ã€æ­£åˆ™è¡¨è¾¾å¼POSIXå­—ç¬¦</h3><p><strong>posixå­—ç¬¦ä¸€æ¬¡åªåŒ¹é…ä¸€ä¸ªèŒƒå›´ä¸­çš„ä¸€ä¸ªå­—èŠ‚</strong></p><table><thead><tr><th style="text-align:center">ç‰¹æ®Šå­—ç¬¦</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">[:alnum:]</td><td style="text-align:left">åŒ¹é…ä»»æ„å­—æ¯å­—ç¬¦0-9 a-z A-Z</td></tr><tr><td style="text-align:center">[:alpha:]</td><td style="text-align:left">åŒ¹é…ä»»æ„å­—æ¯ï¼Œå¤§å†™æˆ–å°å†™</td></tr><tr><td style="text-align:center">[:digit:]</td><td style="text-align:left">æ•°å­— 0-9</td></tr><tr><td style="text-align:center">[:graph:]</td><td style="text-align:left">éç©ºå­—ç¬¦( éç©ºæ ¼æ§åˆ¶å­—ç¬¦)</td></tr><tr><td style="text-align:center">[:lower:]</td><td style="text-align:left">å°å†™å­—ç¬¦a-z</td></tr><tr><td style="text-align:center">[:upper:]</td><td style="text-align:left">å¤§å†™å­—ç¬¦A-Z</td></tr><tr><td style="text-align:center">[:cntrl:]</td><td style="text-align:left">æ§åˆ¶å­—ç¬¦</td></tr><tr><td style="text-align:center">[:print:]</td><td style="text-align:left">éç©ºå­—ç¬¦( åŒ…æ‹¬ç©ºæ ¼)</td></tr><tr><td style="text-align:center">[:punct:]</td><td style="text-align:left">æ ‡ç‚¹ç¬¦å·</td></tr><tr><td style="text-align:center">[:blank:]</td><td style="text-align:left">ç©ºæ ¼å’ŒTABå­—ç¬¦</td></tr><tr><td style="text-align:center">[:xdigit:]</td><td style="text-align:left">16 è¿›åˆ¶æ•°å­—</td></tr><tr><td style="text-align:center">[:space:]</td><td style="text-align:left">æ‰€æœ‰ç©ºç™½å­—ç¬¦( æ–°è¡Œã€ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦)</td></tr></tbody></table><p>æµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨æ„: [[ ]]  åŒä¸­æ‹¬å·çš„æ„æ€:  ç¬¬ä¸€ä¸ªä¸­æ‹¬å·æ˜¯åŒ¹é…ç¬¦[] åŒ¹é…ä¸­æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œç¬¬äºŒä¸ª[]æ˜¯æ ¼å¼ å¦‚[:digit:]</span></span><br><span class="line"></span><br><span class="line">1ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´a-zA-Z0-9ä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:alnum:]]c$&quot; file</span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">aZc</span><br><span class="line">a3c</span><br><span class="line"></span><br><span class="line">2ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯a-zA-Zä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:alpha:]]c$&quot; file</span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">aZc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯0-9ä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:digit:]]c$&quot; file</span><br><span class="line">a3c</span><br><span class="line"></span><br><span class="line">4ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯a-zä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:lower:]]c$&quot; file</span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯A-Zä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:upper:]]c$&quot; file</span><br><span class="line">aZc</span><br><span class="line"></span><br><span class="line">5ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯éç©ºä»»æ„å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:print:]]c$&quot; file</span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">a_c</span><br><span class="line">aZc</span><br><span class="line">a c</span><br><span class="line">a3c</span><br><span class="line"></span><br><span class="line">6ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯ç¬¦å·å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:punct:]]c$&quot; file</span><br><span class="line">a_c</span><br><span class="line"></span><br><span class="line">7ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯ç©ºæ ¼æˆ–è€…TABç¬¦å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:blank:]]c$&quot; file</span><br><span class="line">a c</span><br><span class="line"></span><br><span class="line">ç±»ä¼¼</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:space:]]c$&quot; file</span><br><span class="line">a c</span><br><span class="line"></span><br><span class="line">8ï¼‰ç²¾ç¡®åŒ¹é…  ä»¥aå¼€å¤´cç»“å°¾  ä¸­é—´æ˜¯åå…­è¿›åˆ¶å­—ç¬¦  é•¿åº¦ä¸ºä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@localhost ~]# egrep &quot;^a[[:xdigit:]]c$&quot; file</span><br><span class="line">acc</span><br><span class="line">abc</span><br><span class="line">a3c</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼šç‰¹æ®Šå­—ç¬¦å’ŒPOSIXå­—ç¬¦æ˜¯ä¸¤å¥—å­—ç¬¦ï¼Œéƒ½å¯ä»¥å®Œæˆéœ€è¦çš„åŒ¹é…ï¼Œå¤§å®¶å­¦ä¹ çš„æ—¶å€™æœ€å°‘è¦è®°ä½ä¸€å¥—å­—ç¬¦å¹¶ç†Ÿç»ƒåº”ç”¨ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯æ—¥ 60S æ—©æŠ¥</title>
      <link href="/posts/3ba5dfdb58f4.html"/>
      <url>/posts/3ba5dfdb58f4.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://v2.alapi.cn/api/zaobao?token=81snvbLzkPT0BamQ&amp;format=image" alt="60s-for-news"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚é¡¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> News </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 SNMP é…ç½®ç¦æ­¢å‘é€æŒ‡å®š Trap ä¿¡æ¯</title>
      <link href="/posts/bb2993db3a80.html"/>
      <url>/posts/bb2993db3a80.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç”¨æˆ·å¸Œæœ› F5 ç¦æ­¢å‘é€æŒ‡å®š SNMP Trap å‘Šè­¦ï¼Œæœ¬æ–‡ä»¥ç¦æ­¢å‘é€ pool æˆå‘˜çŠ¶æ€ç›‘æµ‹ down å‘Šè­¦ä¸ºä¾‹è¿›è¡Œé…ç½®ï¼Œä»¥ TcpDump å·¥å…·è¿›è¡ŒæŠ“åŒ…éªŒè¯ã€‚ç¦ç”¨å…¶ä»– SNMP Trap å‘Šè­¦ä¹Ÿå¯å‚è€ƒæœ¬æ–‡ç« è¿›è¡Œå®ç°ã€‚</strong></p><h2 id="ä¸€ã€æœªç¦ç”¨-pool-member-down-Trapå‘Šè­¦ğŸŒ³">ä¸€ã€æœªç¦ç”¨ pool member down Trapå‘Šè­¦ğŸŒ³</h2><h3 id="1ã€åœ¨-F5-ä¸Šæ¨¡æ‹Ÿ-pool-member-down-å‘-SNMP-æœåŠ¡å™¨å‘å‡ºå‘Šè­¦ã€‚">1ã€åœ¨ F5 ä¸Šæ¨¡æ‹Ÿ pool member down å‘ SNMP æœåŠ¡å™¨å‘å‡ºå‘Šè­¦ã€‚</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger -p local0.notice <span class="string">&quot;01070638:5: Pool /Common/pool_one member /Common/192.168.10.1:80 monitor status down.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€åœ¨F5ä¸ŠæŠ“åŒ…æŸ¥çœ‹æ˜¯å¦å‘é€å‘Šè­¦">2ã€åœ¨F5ä¸ŠæŠ“åŒ…æŸ¥çœ‹æ˜¯å¦å‘é€å‘Šè­¦</h3><p>æŠ“åŒ…å‘½ä»¤ï¼š<code>tcpdump -nni 0.0:nnnp -s0 -vvv host 192.168.10.84 and port 162</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">14:27:08.642228 IP (tos 0x0, ttl 64, <span class="built_in">id</span> 43540, offset 0, flags [DF], proto UDP (17), length 278)</span><br><span class="line">    192.168.10.84.65221 &gt; 192.168.10.223.162: [udp <span class="built_in">sum</span> ok]  &#123; SNMPv2c C=<span class="string">&quot;Ad123min&quot;</span> &#123; V2Trap(231) R=722473879  .1.3.6.1.2.1.1.3.0=295208617 .1.3.6.1.6.3.1.1.4.1.0=.1.3.6.1.4.1.3375.2.4.0.10 .1.3.6.1.4.1.3375.2.4.1.1=<span class="string">&quot;Pool /Common/pool_one member /Common/192.168.10.1:80 monitor status down.&quot;</span> .1.3.6.1.4.1.3375.2.4.1.2=<span class="string">&quot;/Common/192.168.10.1&quot;</span> .1.3.6.1.4.1.3375.2.4.1.3=<span class="string">&quot;80&quot;</span> .1.3.6.1.6.3.1.1.4.3.0=.1.3.6.1.4.1.3375.2.4 &#125; &#125;  <span class="keyword">in</span> slot1/tmm0 lis= flowtype=0 flowid=0 peerid=0 conflags=0 inslot=0 inport=0 haunit=0 priority=0 peerremote=00000000:00000000:00000000:00000000 peerlocal=00000000:00000000:00000000:00000000 remoteport=0 localport=0 proto=0 vlan=0</span><br></pre></td></tr></table></figure><h3 id="3ã€åœ¨-SNMP-æœåŠ¡å™¨æŸ¥çœ‹æ˜¯å¦æ”¶åˆ°å‘Šè­¦">3ã€åœ¨ SNMP æœåŠ¡å™¨æŸ¥çœ‹æ˜¯å¦æ”¶åˆ°å‘Šè­¦</h3><p>æŠ“åŒ…å‘½ä»¤ï¼š<code>tcpdump -i ens192 host 192.168.10.84 and port 162</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">14:24:49.509918 IP 192.168.10.84.46185 &gt; compute.snmptrap:  C=<span class="string">&quot;Ad123min&quot;</span> V2Trap(83)  system.sysUpTime.0=4364560 S:1.1.4.1.0=E:3375.2.4.0.3 S:1.1.4.3.0=E:3375.2.4</span><br><span class="line">14:24:52.031740 IP 192.168.10.84.65221 &gt; compute.snmptrap:  C=<span class="string">&quot;Ad123min&quot;</span> V2Trap(231)  system.sysUpTime.0=295208617 S:1.1.4.1.0=E:3375.2.4.0.10 E:3375.2.4.1.1=<span class="string">&quot;Pool /Common/pool_one member /Common/192.168.10.1:80 monitor status down.&quot;</span> E:3375.2.4.1.2=<span class="string">&quot;/Common/192.168.10.1&quot;</span> E:3375.2.4.1.3=<span class="string">&quot;80&quot;</span> S:1.1.4.3.0=E:3375.2.4</span><br></pre></td></tr></table></figure><h2 id="äºŒã€é…ç½®ç¦ç”¨-pool-member-down-Trap-å‘Šè­¦ğŸŒ¿">äºŒã€é…ç½®ç¦ç”¨ pool member down Trap å‘Šè­¦ğŸŒ¿</h2><h3 id="1ã€æŸ¥æ‰¾-pool-member-down-Trap-å‘Šè­¦é…ç½®">1ã€æŸ¥æ‰¾ pool member down Trap å‘Šè­¦é…ç½®</h3><p>æŸ¥æ‰¾<code>/etc/alertd/alert.conf</code> æ–‡ä»¶ä¸­ pool member down Trap å‘Šè­¦ç›¸å…³é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert BIGIP_MCPD_MCPDERR_POOL_MEMBER_MON_STATUS &#123;</span><br><span class="line">        snmptrap OID=<span class="string">&quot;.1.3.6.1.4.1.3375.2.4.0.10&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€å¤‡ä»½é…ç½®">2ã€å¤‡ä»½é…ç½®</h3><p>å¤‡ä»½ <code>/config/user_alert.conf</code>æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /config/user_alert.conf /config/user_alert_backup.conf </span><br></pre></td></tr></table></figure><h3 id="3ã€ç¼–è¾‘é…ç½®æ–‡ä»¶">3ã€ç¼–è¾‘é…ç½®æ–‡ä»¶</h3><p>ç¼–è¾‘é…ç½®æ–‡ä»¶<code>/config/user_alert.conf</code>ï¼Œç²˜è´´ç¬¬ä¸€æ­¥ä¸­è¦ç¦ç”¨çš„å†…å®¹ï¼Œåœ¨OIDè¡Œé¦–æ·»åŠ <code>#</code>æ³¨é‡Šã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert BIGIP_MCPD_MCPDERR_POOL_MEMBER_MON_STATUS &#123;</span><br><span class="line"><span class="comment">#        snmptrap OID=&quot;.1.3.6.1.4.1.3375.2.4.0.10&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡è¦æç¤º</strong>ï¼šä»…æ³¨é‡Šæ‰ <strong>snmptrap OID=</strong> æ¡ç›®ï¼Œä»¥é˜²æ­¢å‘é€å…³è”çš„é™·é˜±ã€‚å¦‚æœæ³¨é‡Šæ‰æ•´ä¸ªèŠ‚ï¼Œåˆ™ä»å°†å‘é€é™·é˜±ã€‚</p><h3 id="4ã€é‡æ–°å¯åŠ¨alertdè¿›ç¨‹">4ã€é‡æ–°å¯åŠ¨<code>alertd</code>è¿›ç¨‹</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bigstart restart alertd</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€éªŒè¯é…ç½®ğŸŒ±">ä¸‰ã€éªŒè¯é…ç½®ğŸŒ±</h2><p><strong>éªŒè¯è¿‡ç¨‹å¦‚ç¬¬ä¸€ç« æ‰€ç¤ºï¼Œæ¨¡æ‹Ÿå‘Šè­¦è¿›è¡ŒéªŒè¯ï¼Œæ­¤å¤„çœç•¥ã€‚</strong></p><h2 id="å››ã€é™„å½•ğŸŒ¾">å››ã€é™„å½•ğŸŒ¾</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¯­æ³•åœ¨ <strong>/var/log/ltm</strong> æ–‡ä»¶ä¸­ç”Ÿæˆæ—¥å¿—æ¶ˆæ¯å¹¶è§¦å‘è­¦æŠ¥ç”µå­é‚®ä»¶ï¼š</p><blockquote><p>logger -p local0.notice â€œ<logged error message>â€</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">logger -p local0.notice <span class="string">&quot;010d0001:0: Cpu 1: temperature (80) is too high.&quot;</span></span><br><span class="line">logger -p local0.notice <span class="string">&quot;010d0002:2: Cpu 1: fan speed (0) is too low.&quot;</span></span><br><span class="line">logger -p local0.notice <span class="string">&quot;010c0019:5: Active.&quot;</span></span><br><span class="line">logger -p local0.notice <span class="string">&quot;010c0018:5: Standby.&quot;</span></span><br><span class="line">logger -p local0.notice <span class="string">&quot;01070638:5: Pool /Common/pool_one member /Common/192.168.10.1:80 monitor status down.&quot;</span></span><br><span class="line">logger -p local0.notice <span class="string">&quot;01070727:5: Pool /Common/pool_one member /Common/192.168.10.1:80 monitor status up.&quot;</span></span><br></pre></td></tr></table></figure><h2 id="äº”ã€å‚è€ƒæ–‡æ¡£ğŸ‚">äº”ã€å‚è€ƒæ–‡æ¡£ğŸ‚</h2><blockquote><p>æ„Ÿè°¢ä»¥ä¸‹æ–‡æ¡£æä¾›çš„å¸®åŠ©ï¼ï¼ï¼</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>support.f5.com<span class="regexp">/csp/</span>article/K77406702</span><br><span class="line">https:<span class="regexp">//</span>support.f5.com<span class="regexp">/csp/</span>article/K11234</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> SNMP </tag>
            
            <tag> udp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7 æ­å»º SNMP æœåŠ¡å™¨</title>
      <link href="/posts/cc4110267368.html"/>
      <url>/posts/cc4110267368.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å®‰è£…-SNMP-æœåŠ¡ğŸ³">ä¸€ã€å®‰è£… SNMP æœåŠ¡ğŸ³</h2><h3 id="1ã€å®‰è£…-SNMP-æœåŠ¡åŠå·¥å…·">1ã€å®‰è£… SNMP æœåŠ¡åŠå·¥å…·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># yum -y install net-snmp net-snmp-utils -y</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æŸ¥çœ‹ç‰ˆæœ¬å·">2ã€æŸ¥çœ‹ç‰ˆæœ¬å·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># snmpd -v</span></span><br><span class="line"></span><br><span class="line">NET-SNMP version:  5.7.2</span><br><span class="line">Web:               http://www.net-snmp.org/</span><br><span class="line">Email:             net-snmp-coders@lists.sourceforge.net</span><br></pre></td></tr></table></figure><h2 id="äºŒã€ä¿®æ”¹-SNMP-Trap-é…ç½®æ–‡ä»¶ğŸ¬">äºŒã€ä¿®æ”¹ SNMP Trap é…ç½®æ–‡ä»¶ğŸ¬</h2><h3 id="1ã€SNMP-V2-Trap-é…ç½®æ–‡ä»¶ä¿®æ”¹">1ã€SNMP V2 Trap é…ç½®æ–‡ä»¶ä¿®æ”¹</h3><h4 id="ï¼ˆ1ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶">ï¼ˆ1ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>åœ¨é…ç½®æ–‡ä»¶<code>/etc/snmp/snmpd.conf</code>ä¸­ä¿®æ”¹communityå†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/snmp/snmpd.conf</span><br><span class="line">...</span><br><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="comment"># First, map the community name &quot;public&quot; into a &quot;security name&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#       sec.name  source          community</span></span><br><span class="line">com2sec notConfigUser  default       public</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>å°†ä¸Šé¢çš„ public å›¢ä½“åæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å®Œæˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#       sec.name  source          community</span></span><br><span class="line">com2sec notConfigUser  default       Ad123min</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰é‡å¯æœåŠ¡">ï¼ˆ2ï¼‰é‡å¯æœåŠ¡</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ SNMP æœåŠ¡</span></span><br><span class="line">[root@compute ~]<span class="comment"># systemctl start snmpd.service </span></span><br><span class="line"><span class="comment"># å¼€æœºå¯åŠ¨ SNMP æœåŠ¡</span></span><br><span class="line">[root@compute ~]<span class="comment"># systemctl enable snmpd.service</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/snmpd.service to /usr/lib/systemd/system/snmpd.service.</span><br></pre></td></tr></table></figure><h2 id="2ã€SNMP-V3-Trap-é…ç½®æ–‡ä»¶ä¿®æ”¹">2ã€SNMP V3 Trap é…ç½®æ–‡ä»¶ä¿®æ”¹</h2><h4 id="ï¼ˆ1ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶-2">ï¼ˆ1ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/snmp/snmptrapd.conf</code>ï¼Œåœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ ä¸€è¡Œï¼Œå†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">createUser -e engineID myuser SHA <span class="string">&quot;my authentication pass&quot;</span> AES <span class="string">&quot;my encryption pass&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># engineID å°†è¦å‘é€trapçš„åº”ç”¨ç¨‹åºçš„EngineID</span></span><br><span class="line"><span class="comment"># myuser å°†è¦å‘é€trapçš„USMç”¨æˆ·å</span></span><br><span class="line"><span class="comment"># SHA  èº«ä»½éªŒè¯ç±»å‹ï¼ˆSHAæˆ–MD5ï¼Œå…¶ä¸­SHAæ›´å¥½ï¼‰</span></span><br><span class="line"><span class="comment"># my authentication pass ç”¨äºç”Ÿæˆæœºå¯†èº«ä»½éªŒè¯å¯†é’¥çš„èº«ä»½éªŒè¯å¯†ç çŸ­è¯­ã€‚å¦‚æœåŒ…å«ç©ºæ ¼ï¼Œè¯·ç”¨å¼•å·å°†å…¶æ‹¬èµ·æ¥</span></span><br><span class="line"><span class="comment"># AES è¦ä½¿ç”¨çš„åŠ å¯†ç±»å‹ï¼ˆAESæˆ–DESï¼ŒAESæ›´å¥½ï¼‰</span></span><br><span class="line"><span class="comment"># my encryption pass ç”¨äºç”Ÿæˆæœºå¯†åŠ å¯†å¯†é’¥çš„åŠ å¯†å¯†ç çŸ­è¯­ã€‚å¦‚æœåŒ…å«ç©ºæ ¼ï¼Œè¯·ç”¨å¼•å·å°†å…¶æ‹¬èµ·æ¥ã€‚å¦‚æœæ‚¨å°†å…¶ç¦ç”¨ï¼Œå®ƒå°†è®¾ç½®ä¸ºä¸èº«ä»½éªŒè¯å¯†ç ç›¸åŒçš„å¯†ç çŸ­è¯­ã€‚</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/snmp/snmptrapd.conf</span><br><span class="line"><span class="comment"># Example configuration file for snmptrapd</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># No traps are handled by default, you must edit this file!</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># authCommunity   log,execute,net public</span></span><br><span class="line"><span class="comment"># traphandle SNMPv2-MIB::coldStart    /usr/bin/bin/my_great_script cold</span></span><br><span class="line">createUser Ad123min SHA <span class="string">&quot;Ad123min&quot;</span> AES <span class="string">&quot;Ad123min&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰é‡å¯æœåŠ¡-2">ï¼ˆ2ï¼‰é‡å¯æœåŠ¡</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ SNMP æœåŠ¡</span></span><br><span class="line">[root@compute ~]<span class="comment"># systemctl start snmpd.service </span></span><br><span class="line"><span class="comment"># å¼€æœºå¯åŠ¨ SNMP æœåŠ¡</span></span><br><span class="line">[root@compute ~]<span class="comment"># systemctl enable snmpd.service</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/snmpd.service to /usr/lib/systemd/system/snmpd.service.</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ”¾é€šé˜²ç«å¢™ç­–ç•¥ğŸ ">ä¸‰ã€æ”¾é€šé˜²ç«å¢™ç­–ç•¥ğŸ </h2><h3 id="1ã€æ”¾é€š-udp-162-ç«¯å£">1ã€æ”¾é€š udp 162 ç«¯å£</h3><p>ï¼ˆ1ï¼‰æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œé˜²ç«å¢™æœªå¯åŠ¨ï¼Œæ‰€ä»¥ä¸ç”¨æ”¾é€šç­–ç•¥ã€‚ä¹‹åçš„æ­¥éª¤å…¨éƒ¨çœç•¥ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œé˜²ç«å¢™æ­£åœ¨è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦æ”¾é€šç­–ç•¥ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># firewall-cmd --state</span></span><br><span class="line">running</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æ˜¾ç¤ºæ‰€æœ‰å…¬å…±åŒºåŸŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">public (active)</span><br><span class="line">  target: default</span><br><span class="line">  icmp-block-inversion: no</span><br><span class="line">  interfaces: ens192</span><br><span class="line">  sources: </span><br><span class="line">  services: dhcpv6-client ssh</span><br><span class="line">  ports: </span><br><span class="line">  protocols: </span><br><span class="line">  masquerade: no</span><br><span class="line">  forward-ports: </span><br><span class="line">  source-ports: </span><br><span class="line">  icmp-blocks: </span><br><span class="line">  rich rules:</span><br></pre></td></tr></table></figure><p>(4)ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/firewalld/zones/public.xml</code> ï¼Œå¢åŠ å†…å®¹ <code>&lt;port protocol=&quot;udp&quot; port=&quot;161&quot;/&gt;</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;zone&gt;</span><br><span class="line">  &lt;short&gt;Public&lt;/short&gt;</span><br><span class="line">  &lt;description&gt;For use <span class="keyword">in</span> public areas. You <span class="keyword">do</span> not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;</span><br><span class="line">  &lt;service name=<span class="string">&quot;ssh&quot;</span>/&gt;</span><br><span class="line">  &lt;port protocol=<span class="string">&quot;udp&quot;</span> port=<span class="string">&quot;161&quot;</span>/&gt;</span><br><span class="line">  &lt;service name=<span class="string">&quot;dhcpv6-client&quot;</span>/&gt;</span><br><span class="line">&lt;/zone&gt;</span><br></pre></td></tr></table></figure><p>(5)é‡å¯é˜²ç«å¢™æœåŠ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># systemctl restart firewalld.service</span></span><br></pre></td></tr></table></figure><p>(6)é‡å¯ SNMP æœåŠ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]<span class="comment"># systemctl restart snmpd.service</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS 7 </tag>
            
            <tag> SNMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPæ…¢é€Ÿæ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆSlow HTTP Dosï¼‰</title>
      <link href="/posts/efff535c9495.html"/>
      <url>/posts/efff535c9495.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€HTTPæ…¢é€Ÿæ‹’ç»æœåŠ¡æ”»å‡»ç®€ä»‹ğŸ’">ä¸€ã€HTTPæ…¢é€Ÿæ‹’ç»æœåŠ¡æ”»å‡»ç®€ä»‹ğŸ’</h2><p>HTTPæ…¢é€Ÿæ”»å‡»æ˜¯åˆ©ç”¨HTTPåˆæ³•æœºåˆ¶ï¼Œä»¥æä½çš„é€Ÿåº¦å¾€æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚ï¼Œå°½é‡é•¿æ—¶é—´ä¿æŒè¿æ¥ï¼Œä¸é‡Šæ”¾ï¼Œè‹¥æ˜¯è¾¾åˆ°äº†Web Serverå¯¹äºå¹¶å‘è¿æ¥æ•°çš„ä¸Šé™ï¼ŒåŒæ—¶æ¶æ„å ç”¨çš„è¿æ¥æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯å°†æ— æ³•æ¥å—æ–°çš„è¯·æ±‚ï¼Œå¯¼è‡´æ‹’ç»æœåŠ¡ã€‚</p><h2 id="äºŒã€HTTPæ…¢é€Ÿæ”»å‡»åŸç†ğŸ“">äºŒã€HTTPæ…¢é€Ÿæ”»å‡»åŸç†ğŸ“</h2><p>æ—¢ç„¶æ˜¯ä¸€ä¸ªHTTPåè®®çš„ç¼“æ…¢æ”»å‡»ï¼Œè¿™å°±è¦ä»HTTPåè®®è¯´èµ·äº†ã€‚</p><p>é¦–å…ˆHTTPåè®®çš„æŠ¥æ–‡éƒ½æ˜¯ä¸€è¡Œä¸€è¡Œçš„ï¼Œç±»ä¼¼äºï¼š</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/<span class="number">1.1</span><span class="string">\r\n</span></span><br><span class="line">Host : payloads.online<span class="string">\r\n</span></span><br><span class="line">Connection: keep-alive<span class="string">\r\n</span></span><br><span class="line">Keep-Alive: <span class="number">900</span><span class="string">\r\n</span></span><br><span class="line">Content-Length: <span class="number">100000000</span><span class="string">\r\n</span></span><br><span class="line">Content_Type: application/x-www-form-urlencoded<span class="string">\r\n</span></span><br><span class="line">Accept: *.*<span class="string">\r\n</span></span><br><span class="line"><span class="string">\r\n</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæŠ¥æ–‡ä¸­çš„<code>\r\n</code>æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><code>\r\n</code>ä»£è¡¨ä¸€è¡ŒæŠ¥æ–‡çš„ç»“æŸä¹Ÿè¢«ç§°ä¸ºç©ºè¡Œï¼ˆCRLFï¼‰ï¼Œè€Œ<code>\r\n\r\n</code>ä»£è¡¨æ•´ä¸ªæŠ¥æ–‡çš„ç»“æŸ</p><p>ä»ä¸Šé¢è´´å‡ºçš„<code>GET</code>è¯·æ±‚åŒ…å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯è¯·æ±‚åˆ°æœåŠ¡å™¨åï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è¿™ä¸ªè¿æ¥éœ€è¦ä¿ç•™ã€‚</p><p>é€šå¸¸æˆ‘ä»¬çŸ¥é“ HTTP åè®®é‡‡ç”¨â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³é KeepAlive æ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚/åº”ç­”å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œå®Œæˆä¹‹åç«‹å³æ–­å¼€è¿æ¥<code>ï¼ˆHTTPåè®®ä¸ºæ— è¿æ¥çš„åè®®ï¼‰</code>ï¼›å½“ä½¿ç”¨ Keep-Alive æ¨¡å¼ï¼ˆåˆç§°æŒä¹…è¿æ¥ã€è¿æ¥é‡ç”¨ï¼‰æ—¶ï¼ŒKeep-Alive åŠŸèƒ½ä½¿å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„è¿æ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºç°å¯¹æœåŠ¡å™¨çš„åç»§è¯·æ±‚æ—¶ï¼ŒKeep-AliveåŠŸèƒ½é¿å…äº†å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿æ¥ã€‚</p><p>é‚£ä¹ˆå½“æˆ‘ä»¬å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œä¸ä»¥<code>CRLF</code>ç»“å°¾ï¼Œè€Œæ˜¯10så‘é€ä¸€è¡ŒæŠ¥æ–‡ï¼Œæˆ‘ä»¬çš„æŠ¥æ–‡éœ€è¦80sæ‰èƒ½å‘é€å®Œæ¯•ï¼Œè¿™80så†…ï¼ŒæœåŠ¡å™¨éœ€è¦ä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯çš„CRLFï¼Œç„¶åæ‰èƒ½è§£æè¿™ä¸ªæŠ¥æ–‡ã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨æ›´å¤šçš„ç¨‹åºå‘é€è¿™æ ·çš„æŠ¥æ–‡ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šç»™å®¢æˆ·ç«¯ç•™å‡ºæ›´å¤šçš„èµ„æºæ¥å¤„ç†ã€ç­‰å¾…è¿™è¿Ÿè¿Ÿä¸ä¼ å®Œçš„æŠ¥æ–‡ã€‚å‡è®¾æœåŠ¡å™¨ç«¯çš„å®¢æˆ·ç«¯æœ€å¤§è¿æ¥æ•°æ˜¯100ä¸ªï¼Œæˆ‘ä»¬ä½¿ç”¨æµ‹è¯•ç¨‹åºå…ˆè¿æ¥ä¸Š100æ¬¡æœåŠ¡å™¨ç«¯ï¼Œå¹¶ä¸”æŠ¥æ–‡ä¸­å¯ç”¨Keep-Aliveï¼Œé‚£ä¹ˆå…¶ä»–æ­£å¸¸ç”¨æˆ·101ã€102å°±æ— æ³•æ­£å¸¸è®¿é—®ç½‘ç«™äº†ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡åªå‘ä¸€è¡Œï¼Œæ¯æ¬¡å‘é€ä¹‹é—´çš„é—´éš”æ—¶é—´å¾ˆé•¿ï¼Œè¿™è¿Ÿè¿Ÿæœªå‘é€ç»“æŸçš„HTTPåŒ…ä¼šå ç”¨æœåŠ¡ç«¯çš„èµ„æºï¼Œå½“è¾¾åˆ°æœåŠ¡ç«¯å¤„ç†è¯·æ±‚çš„ä¸Šé™æ—¶ï¼Œè¿™æ—¶å€™å†ç”¨æˆ·å¯¹ç½‘ç«™æ­£å¸¸è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¹Ÿå¤„ç†ä¸äº†äº†ï¼Œå¯¼è‡´äº†æ‹’ç»æœåŠ¡ã€‚</p><h2 id="ä¸‰ã€HTTPæ…¢é€Ÿæ”»å‡»åˆ†ç±»ğŸ«’">ä¸‰ã€HTTPæ…¢é€Ÿæ”»å‡»åˆ†ç±»ğŸ«’</h2><p>HTTPæ…¢é€Ÿæ”»å‡»åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>Slow headers</li><li>Slow body</li><li>Slow read</li></ul><h3 id="1ã€Slow-headers">1ã€Slow headers</h3><p>ç¬¬ä¸€ç±»æ˜¯æœ€ç»å…¸çš„HTTP Slowæ…¢é€Ÿæ”»å‡»ï¼Œç”±rsnakeå‘æ˜çš„ï¼ŒåŸç†åœ¨ä¸Šé¢å·²ä»‹ç»ã€‚</p><h3 id="2ã€Slow-body">2ã€Slow body</h3><p>ç¬¬äºŒç±»ä¹Ÿå«åšSlow HTTP POST</p><p>åŸç†ä¸ºåœ¨POSTæäº¤æ–¹å¼ä¸­ï¼Œå…è®¸åœ¨HTTPçš„å¤´ä¸­å£°æ˜content-lengthï¼Œå³POSTå†…å®¹çš„é•¿åº¦ã€‚</p><p>æäº¤äº†æ¶æ„å¤´ä¹‹åï¼Œå°†éœ€è¦ä¼ è¾“çš„bodyç¼“æ…¢è¿›è¡Œå‘é€ï¼Œè·ŸSlow headersç±»ä¼¼ï¼Œå¯¼è‡´æœåŠ¡å™¨ç«¯é•¿æ—¶é—´ç­‰å¾…éœ€è¦ä¼ è¾“çš„POSTæ•°æ®ï¼Œå½“è¯·æ±‚çš„æ•°é‡å˜å¤šåï¼Œè¾¾åˆ°äº†æ¶ˆè€—æœåŠ¡å™¨èµ„æºçš„æ•ˆæœï¼Œå¯¼è‡´æœåŠ¡å™¨å®•æœºã€‚</p><h3 id="3ã€Slow-Read-attack">3ã€Slow Read attack</h3><p>ç¬¬ä¸‰ç±»æ”»å‡»æ–¹å¼é‡‡ç”¨è°ƒæ•´TCPåè®®ä¸­æ»‘åŠ¨çª—å£å¤§å°ï¼Œæ¥å¯¹æœåŠ¡å™¨å•æ¬¡å‘é€çš„æ•°æ®å¤§å°è¿›è¡Œæ§åˆ¶ï¼Œä½¿å¾—æœåŠ¡å™¨éœ€è¦å¯¹ä¸€ä¸ªç›¸åº”åŒ…åˆ†ä¸ºå¾ˆå¤šä¸ªåŒ…æ¥å‘é€ï¼Œæƒ³è¦ä½¿è¿™ç§æ”»å‡»æ•ˆæœæ˜æ˜¾ï¼Œè¯·æ±‚çš„èµ„æºè¦å°½é‡å¤§ï¼Œè¿™é‡Œå¾ˆå®¹æ˜“ç†è§£ï¼Œå½“è¯·æ±‚çš„èµ„æºè¶Šå¤§ï¼Œè¿”å›åŒ…æ‰è¶Šå¤§ï¼Œè¿™æ ·æ‰èƒ½åˆ†æˆæ›´å¤šçš„åŒ…è®©æœåŠ¡å™¨å‘é€ï¼Œå¯¼è‡´æ‹’ç»æœåŠ¡çš„äº§ç”Ÿã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯ä»¥æä½çš„é€Ÿåº¦æ¥è¯»å–è¿”å›åŒ…ï¼Œæ¥æ¶ˆè€—æœåŠ¡å™¨çš„è¿æ¥å’Œå†…å­˜èµ„æºã€‚</p><h2 id="å››ã€HTTPæ…¢é€Ÿæ”»å‡»å®æˆ˜ğŸ…">å››ã€HTTPæ…¢é€Ÿæ”»å‡»å®æˆ˜ğŸ…</h2><p>HTTPæ…¢é€Ÿæ”»å‡»ä¸€èˆ¬ä½¿ç”¨slowhttptestå·¥å…·ï¼Œå®‰è£…è¿‡ç¨‹çœç•¥ã€‚</p><h3 id="1ã€slowhttptestå·¥å…·ç®€ä»‹">1ã€slowhttptestå·¥å…·ç®€ä»‹</h3><blockquote><p>SlowHTTPTestæ˜¯ä¸€ä¸ªå¯é…ç½®çš„åº”ç”¨å±‚æ‹’ç»æœåŠ¡æ”»å‡»æµ‹è¯•å·¥å…·ï¼Œå®ƒå¯ä»¥å·¥ä½œåœ¨Linuxï¼ŒOSXå’ŒCygwinç¯å¢ƒä»¥åŠWindowså‘½ä»¤è¡Œæ¥å£ï¼Œå¯ä»¥å¸®åŠ©å®‰å…¨æµ‹è¯•äººå‘˜æ£€éªŒæœåŠ¡å™¨å¯¹æ…¢é€Ÿæ”»å‡»çš„å¤„ç†èƒ½åŠ›ã€‚</p><p>è¿™ä¸ªå·¥å…·å¯ä»¥æ¨¡æ‹Ÿä½å¸¦å®½è€—è´¹ä¸‹çš„DoSæ”»å‡»ï¼Œæ¯”å¦‚æ…¢é€Ÿæ”»å‡»ï¼Œæ…¢é€ŸHTTP POSTï¼Œé€šè¿‡å¹¶å‘è¿æ¥æ± è¿›è¡Œçš„æ…¢é€Ÿè¯»æ”»å‡»ï¼ˆåŸºäºTCPæŒä¹…æ—¶é—´ï¼‰ç­‰ã€‚æ…¢é€Ÿæ”»å‡»åŸºäºHTTPåè®®ï¼Œé€šè¿‡ç²¾å¿ƒçš„è®¾è®¡å’Œæ„é€ ï¼Œè¿™ç§ç‰¹æ®Šçš„è¯·æ±‚åŒ…ä¼šé€ æˆæœåŠ¡å™¨å»¶æ—¶ï¼Œè€Œå½“æœåŠ¡å™¨è´Ÿè½½èƒ½åŠ›æ¶ˆè€—è¿‡å¤§å³ä¼šå¯¼è‡´æ‹’ç»æœåŠ¡ã€‚</p></blockquote><h3 id="2ã€ä½¿ç”¨å‚æ•°ä»‹ç»">2ã€ä½¿ç”¨å‚æ•°ä»‹ç»</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•æ¨¡å¼:</span></span><br><span class="line">-H                            slow header,slowlorisé»˜è®¤é‡‡ç”¨æ­¤æ¨¡å¼          </span><br><span class="line">-B                            slow body</span><br><span class="line">-R                            è¿œç¨‹æ”»å‡»åˆåApache killer</span><br><span class="line">-X                            slow read</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŠ¥å‘Šé€‰é¡¹ï¼š</span></span><br><span class="line">-g                            ç”Ÿæˆå…·æœ‰å¥—æ¥å­—çŠ¶æ€æ›´æ”¹çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆé»˜è®¤å…³é—­ï¼‰</span><br><span class="line">-o file_prefix                å°†ç»Ÿè®¡ä¿¡æ¯è¾“å‡ºä¿å­˜åœ¨file.htmlå’Œfile.csvä¸­ï¼ˆéœ€è¦-gï¼‰</span><br><span class="line">-v level                      æ—¥å¿—ä¿¡æ¯ï¼Œè¯¦ç»†çº§åˆ«0-4ï¼šè‡´å‘½ï¼Œä¿¡æ¯ï¼Œé”™è¯¯ï¼Œè­¦å‘Šï¼Œè°ƒè¯•</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸¸è§„é€‰é¡¹ï¼š</span></span><br><span class="line">-c connections                è¿æ¥ç›®æ ‡è¿æ¥æ•°ï¼ˆ50ï¼‰</span><br><span class="line">-i seconds                    åç»­æ•°æ®ä¹‹é—´çš„é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼ˆ10ï¼‰</span><br><span class="line">-l seconds                    æµ‹è¯•ç›®æ ‡æ—¶é—´é•¿åº¦ï¼Œä»¥ç§’ä¸ºå•ä½ï¼ˆ240ï¼‰</span><br><span class="line">-r rate                       æ¯ç§’è¿æ¥æ•°ï¼ˆ50ï¼‰</span><br><span class="line">-s                            å¦‚æœéœ€è¦ï¼ŒContent-Lengthæ ‡å¤´çš„å€¼ï¼ˆ4096ï¼‰</span><br><span class="line">-t                            åœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„åŠ¨è¯ï¼Œå¯¹äºslow headerå’Œresponseï¼Œé»˜è®¤ä¸ºGETï¼›å¯¹äºslow bodyï¼Œé»˜è®¤ä¸ºPOST</span><br><span class="line">-u URL                        ç›®æ ‡çš„ç»å¯¹URLï¼ˆhttp://localhost/ï¼‰</span><br><span class="line">-x                            åœ¨slowloris and Slow POST testsæ¨¡å¼ä¸­ï¼ŒæŒ‡å®šå‘é€çš„æœ€å¤§æ•°æ®é•¿åº¦</span><br><span class="line">-f                            Content-Typeæ ‡å¤´çš„å€¼ï¼ˆapplication/x-www-form-urlencodedï¼‰</span><br><span class="line">-m                            æ¥å—(Accept)æ ‡å¤´çš„å€¼ï¼ˆtext/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5ï¼‰</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢æµ‹/ä»£ç†é€‰é¡¹ï¼š</span></span><br><span class="line">-d host:port                  ä¸ºæ‰€æœ‰è¿æ¥æŒ‡å®šä»£ç†</span><br><span class="line">-e host:port                  ä¸ºæ¢æµ‹è¿æ¥æŒ‡å®šä»£ç†</span><br><span class="line">-p seconds                    æŒ‡å®šç­‰å¾…æ—¶é—´æ¥ç¡®è®¤DoSæ”»å‡»å·²ç»æˆåŠŸ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">range attackç‰¹å®šé€‰é¡¹ï¼š</span></span><br><span class="line">-a                            æ ‡å¤´ä¸­çš„èµ·å§‹ä½ç½®</span><br><span class="line">-b                            æ ‡å¤´ä¸­çš„ç»“æŸä½ç½®</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">slow <span class="built_in">read</span>ç‰¹å®šé€‰é¡¹ï¼š</span></span><br><span class="line">-k                            åœ¨è¿æ¥ä¸­é‡å¤ç›¸åŒè¯·æ±‚çš„æ¬¡æ•°ã€‚å¦‚æœæœåŠ¡å™¨æ”¯æŒæ°¸ä¹…è¿æ¥ï¼Œåˆ™ç”¨äºæˆå€å¢åŠ å“åº”å¤§å°ã€‚</span><br><span class="line">-n                            ä»recvç¼“å†²åŒºè¯»å–æ“ä½œä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œä»¥ç§’ä¸ºå•ä½ï¼ˆ1ï¼‰</span><br><span class="line">-w                            slow readæ¨¡å¼ä¸­æŒ‡å®štcpçª—å£èŒƒå›´ä¸‹é™</span><br><span class="line">-y                            slow readæ¨¡å¼ä¸­æŒ‡å®štcpçª—å£èŒƒå›´ä¸Šé™</span><br><span class="line">-z                            åœ¨æ¯æ¬¡çš„readä¸­ï¼Œä»bufferä¸­è¯»å–æ•°æ®é‡</span><br></pre></td></tr></table></figure><h3 id="3ã€æ”»å‡»æµ‹è¯•å‘½ä»¤">3ã€æ”»å‡»æµ‹è¯•å‘½ä»¤</h3><h4 id="ï¼ˆ1ï¼‰Slow-Header">ï¼ˆ1ï¼‰Slow Header</h4><p>è¯¥æ”»å‡»ä¼šåƒæˆ‘ä»¬åˆšæ‰è®²çš„æ…¢é€Ÿä¼ é€’HTTPæŠ¥æ–‡ï¼Œå ç”¨æœåŠ¡å™¨èµ„æºè®©å…¶ç­‰å¾…æˆ‘ä»¬æœ€åçš„CRLFã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">slowhttptest</span> -c <span class="number">65500</span> -H -i <span class="number">10</span> -r <span class="number">200</span> -s <span class="number">8192</span> -t SLOWHEADER -u http:``//vulurl``.com</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰Slow-Read">ï¼ˆ2ï¼‰Slow Read</h4><p>è¯¥æ”»å‡»ä¼šåœ¨WebæœåŠ¡å™¨å“åº”å†…å®¹ä¼ è¾“å›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯ç¼“æ…¢çš„è¯»å–å“åº”æŠ¥æ–‡ï¼Œè¿™æ ·æœåŠ¡å™¨ç«¯ä¹Ÿä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯æ¥æ¥æ”¶å®Œæ¯•ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">slowhttptest</span> -c <span class="number">65500</span> -X -r <span class="number">1000</span> -w <span class="number">10</span> -y <span class="number">20</span> -t SLOWREAD -n <span class="number">5</span> -z <span class="number">32</span> -u http:``//vulurl``.com</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰Slow-Post">ï¼ˆ3ï¼‰Slow Post</h4><p>è¯¥æ”»å‡»ä¼šæ„é€ ä¸€ä¸ªPOSTæ•°æ®åŒ…ï¼Œå°†æ•°æ®ç¼“æ…¢ä¼ è¾“ï¼Œä½¿æœåŠ¡å™¨ç«¯ä¸€ç›´ç­‰å¾…æ¥æ”¶æŠ¥æ–‡ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">slowhttptest</span> -c <span class="number">65500</span> -B -i <span class="number">10</span> -r <span class="number">200</span> -s <span class="number">8192</span> -t SLOWBODY -u http:``//vulurl``.com</span><br></pre></td></tr></table></figure><p>æ‰¾ä¸€ä¸ªå­˜åœ¨æ¼æ´çš„ç½‘å€è¿›è¡Œæ£€æµ‹ï¼š</p><p>ä½¿ç”¨Slow Postçš„payloadï¼šï¼ˆæ¼æ´ç½‘å€å·²é«˜ç ï¼‰</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">slowhttptest</span> -c <span class="number">65500</span> -B -i <span class="number">10</span> -r <span class="number">200</span> -s <span class="number">8192</span> -t SLOWBODY -u https:``//xxxxxx</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2022/01/17173364.png" alt="slowhttp.png"></p><p>å½“æ˜¾ç¤ºä¸ºNOï¼Œåˆ™è¡¨ç¤ºå­˜åœ¨HTTPæ…¢é€Ÿæ”»å‡»æ¼æ´ï¼Œå¯å¯¼è‡´æ‹’ç»æœåŠ¡ã€‚</p><h2 id="äº”ã€å‚è€ƒé“¾æ¥ğŸŒ">äº”ã€å‚è€ƒé“¾æ¥ğŸŒ</h2><ul><li><p><a href="https://payloads.online/archivers/2018-04-16/2">https://payloads.online/archivers/2018-04-16/2</a></p></li><li><p><a href="https://www.cnblogs.com/xiaoliu66007/p/10174672.html">https://www.cnblogs.com/xiaoliu66007/p/10174672.html</a></p></li><li><p><a href="https://forum.huawei.com/enterprise/zh/thread-293945.html">https://forum.huawei.com/enterprise/zh/thread-293945.html</a></p></li><li><p><a href="https://www.cnblogs.com/Cl0ud/p/13409171.html">https://www.cnblogs.com/Cl0ud/p/13409171.html</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> SLOW HTTP Dos </tag>
            
            <tag> HTTPæ…¢é€Ÿæ”»å‡» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 UCS é…ç½®æ–‡ä»¶ä¿®æ”¹</title>
      <link href="/posts/af797cac3996.html"/>
      <url>/posts/af797cac3996.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šåœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œç»å¸¸éœ€è¦å®‰è£…å®¢æˆ·çš„ucsæ¥å°½é‡ä¿è¯åŒæ ·çš„é…ç½®ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦å¯¹ UCS é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿæ“ä½œç¤ºä¾‹å¦‚ä¸‹ï¼Œå…¶ä»–çš„é…ç½®ä¿®æ”¹ä¹Ÿå¯ä»¥å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼š</strong></p><p><strong>ç¤ºä¾‹ï¼šä¿®æ”¹ UCS é…ç½®æ–‡ä»¶ä¸­ NTP æœåŠ¡å™¨IPåœ°å€ 1.1.1.1 ä¸º 1.1.1.2</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sys ntp &#123;</span><br><span class="line">    servers &#123; time1.cloud.tencent.com 1.1.1.1 &#125;</span><br><span class="line">    timezone Asia/Shanghai</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1ã€è§£å‹-UCS-é…ç½®æ–‡ä»¶">1ã€è§£å‹ UCS é…ç½®æ–‡ä»¶</h2><p>(1)åˆ›å»ºå­˜å‚¨ UCS è§£å‹åé…ç½®çš„æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /backupucs</span><br></pre></td></tr></table></figure><p>(2)è§£å‹é…ç½®æ–‡ä»¶ test.ucs è‡³ /backupucs è·¯å¾„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /var/local/ucs/test.ucs -C /backupucs</span><br></pre></td></tr></table></figure><h2 id="2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶">2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>æ›´æ”¹ NTP æœåŠ¡å™¨IP 1.1.1.1 ä¸º 1.1.1.2ï¼Œå¹¶ä¿å­˜é€€å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /backupucs/config/bigip_base.conf</span><br></pre></td></tr></table></figure><p>å˜æ›´å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sys ntp &#123;</span><br><span class="line">    servers &#123; time1.cloud.tencent.com 1.1.1.2 &#125;</span><br><span class="line">    timezone Asia/Shanghai</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€é‡æ–°æ‰“åŒ…é…ç½®æ–‡ä»¶">3ã€é‡æ–°æ‰“åŒ…é…ç½®æ–‡ä»¶</h2><p>å°†ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶è¿›è¡Œé‡æ–°æ‰“åŒ…ã€‚</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /backupucs</span><br><span class="line">tar cvf - * | gzip -c &gt; /var/local/ucs/test1.ucs</span><br></pre></td></tr></table></figure><h2 id="4ã€åŠ è½½é…ç½®æ–‡ä»¶">4ã€åŠ è½½é…ç½®æ–‡ä»¶</h2><p>å°†æ‰“åŒ…å¥½çš„é…ç½®æ–‡ä»¶ test1.ucs åŠ è½½åˆ° BIG-IP ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmsh load sys ucs test1.ucs </span><br></pre></td></tr></table></figure><h2 id="5ã€éªŒè¯-NTP-æœåŠ¡å™¨æ˜¯å¦å˜æ›´æˆåŠŸ">5ã€éªŒè¯ NTP æœåŠ¡å™¨æ˜¯å¦å˜æ›´æˆåŠŸ</h2><p>é‡æ–°åŠ è½½é…ç½®åéªŒè¯ NTP é…ç½®ï¼Œé…ç½®è¾“å‡ºå¦‚ä¸‹å¾—å‡ºç»“è®ºï¼šUCS é…ç½®æ›´æ”¹æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tmsh list sys ntp</span></span><br><span class="line">sys ntp &#123;</span><br><span class="line">    servers &#123; time1.cloud.tencent.com 1.1.1.2 &#125;</span><br><span class="line">    timezone Asia/Shanghai</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>##6ã€è‡´è°¢</p><p>æ„Ÿè°¢æ­¦è€å¸ˆã€å±…è€å¸ˆæ–‡æ¡£æ”¯æŒï¼</p><blockquote><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://mp.weixin.qq.com/s/FCliuczEMeApwFU4glVgRg">https://mp.weixin.qq.com/s/FCliuczEMeApwFU4glVgRg</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> ucs </tag>
            
            <tag> é…ç½®ä¿®æ”¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 HSL é«˜é€Ÿæ—¥å¿—</title>
      <link href="/posts/c573ee4af7a5.html"/>
      <url>/posts/c573ee4af7a5.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åŸºç¡€ä»‹ç»">ä¸€ã€åŸºç¡€ä»‹ç»</h2><h3 id="1ã€HSL-ä»‹ç»">1ã€HSL ä»‹ç»</h3><p>â€‹HSL(high speed log)ç§°ä½œé«˜é€Ÿè¿œç¨‹æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡BIG-IPç³»ç»Ÿæ¥è®°å½•BIG-IPç³»ç»Ÿçš„è¿›ç¨‹æ¶ˆæ¯ï¼Œå¹¶å°†è¿™äº›æ—¥å¿—æ¶ˆæ¯å‘é€åˆ°é«˜é€Ÿè¿œç¨‹æ—¥å¿—æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¯¹è¿™äº›æ¶ˆæ¯æ—¥å¿—é’ˆå¯¹æ¶ˆæ¯æ¥æºã€æ¶ˆæ¯è­¦æŠ¥çº§åˆ«æ¥è¿‡æ»¤è¿™äº›æ¶ˆæ¯æ—¥å¿—å†å‘é€åˆ°è¿œç¨‹é«˜é€Ÿæ—¥å¿—æœåŠ¡å™¨ã€‚</p><h3 id="2ã€HSL-ä¼˜åŠ¿">2ã€HSL ä¼˜åŠ¿</h3><p>ï¼ˆ1ï¼‰æœªæ ¼å¼åŒ–çš„é«˜é€Ÿæ—¥å¿—è®°å½•</p><p>ï¼ˆ2ï¼‰æ ¼å¼åŒ–çš„é«˜é€Ÿæ—¥å¿—è®°å½•</p><p>ï¼ˆ3ï¼‰æ—¥å¿—ä¾æ®æ¶ˆæ¯æŠ¥è­¦çº§åˆ«ä¸æ¶ˆæ¯æ¥æºæ¥è¿›è¡Œæ—¥å¿—è¿‡æ»¤</p><p>ï¼ˆ4ï¼‰æä¾›æ–¹ä¾¿çš„ GUI æ—¥å¿—è¾“å‡ºè¿‡æ»¤ã€å¤š RSL è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨çš„é…ç½®å…³è”é€‰æ‹©</p><p>ï¼ˆ5ï¼‰ä¸çŸ¥åçš„æ—¥å¿—ç›‘æ§ç®¡ç†å‚å•†ååŒåšå¥½ F5 BIG-IPæ—¥å¿—ç®¡ç†ç­‰</p><h3 id="3ã€HSL-é…ç½®å¯¹è±¡">3ã€HSL é…ç½®å¯¹è±¡</h3><table><thead><tr><th><strong>Object</strong></th><th><strong>Reason</strong></th><th><strong>Applies to</strong></th></tr></thead><tbody><tr><td>Pool of remote  log servers</td><td>åˆ›å»ºè¿œç¨‹æ—¥å¿—æœåŠ¡å™¨ï¼ŒBIG-IP ç³»ç»Ÿå¯ä»¥å‘é€æ—¥å¿—ä¿¡æ¯è¿‡å»ã€‚</td><td>å»ºä¸€ä¸ªè¿œç¨‹æ—¥å¿—æœåŠ¡å™¨æ± </td></tr><tr><td>Destination  (unformatted)</td><td>åˆ›å»ºè¿œç¨‹é«˜é€Ÿæ—¥å¿—ç›®æ ‡ï¼Œè¯¥ç›®æ ‡æŒ‡å®šäº†è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨æ± </td><td>åˆ›å»ºè¿œç¨‹é«˜é€Ÿæ—¥å¿—ç›®çš„åœ°</td></tr><tr><td>Destination  (formatted)</td><td>å¦‚æœæ‚¨çš„è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨æ˜¯ ArcSight ã€Splunk ã€IPFIX æˆ– Remote Syslog ç±»å‹ï¼Œè¯·åˆ›å»ºå…¶ä»–æ—¥å¿—ç›®æ ‡ï¼Œä»¥å°†æ—¥å¿—æ ¼å¼åŒ–ä¸ºæ‰€éœ€æ ¼å¼ï¼Œç„¶åå°†æ—¥å¿—è½¬å‘åˆ°è¿œç¨‹é«˜é€Ÿæ—¥å¿—ç›®æ ‡ã€‚</td><td>åˆ›å»ºæ ¼å¼åŒ–çš„è¿œç¨‹é«˜é€Ÿæ—¥å¿—ç›®æ ‡ã€‚</td></tr><tr><td>Publisher</td><td>åˆ›å»ºä¸€ä¸ªæ—¥å¿—Publisherï¼Œä»¥å°†æ—¥å¿—å‘é€åˆ°ä¸€ç»„æŒ‡å®šçš„æ—¥å¿—ç›®æ ‡</td><td>åˆ›å»ºä¸€ä¸ª publisher</td></tr><tr><td>Filter</td><td>åˆ›å»ºä¸€ä¸ªæ—¥å¿—è¿‡æ»¤å™¨ä»¥å®šä¹‰è¦åŒ…å«åœ¨BIG-IPç³»ç»Ÿæ—¥å¿—ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶å°†æ—¥å¿—å‘å¸ƒè€…ä¸è¯¥è¿‡æ»¤å™¨ç›¸å…³è”ã€‚</td><td>åˆ›å»ºä¸€ä¸ªæ—¥å¿—è¿‡æ»¤å™¨</td></tr></tbody></table><p>ä¸‹å›¾æ˜¾ç¤ºäº†ç”¨äº BIG-IP ç³»ç»Ÿè¿›ç¨‹çš„è¿œç¨‹é«˜é€Ÿæ—¥å¿—è®°å½•çš„é…ç½®å¯¹è±¡çš„å…³è”ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/1094395785.png" alt="image-20211227113433151.png"></p><h2 id="äºŒã€é…ç½®å®æˆ˜">äºŒã€é…ç½®å®æˆ˜</h2><h3 id="1ã€åˆ›å»ºè¿œç¨‹æ—¥å¿—æœåŠ¡å™¨-Pool">1ã€åˆ›å»ºè¿œç¨‹æ—¥å¿—æœåŠ¡å™¨ Pool</h3><p>â€‹åœ¨åˆ›å»ºæ—¥å¿—æœåŠ¡å™¨æ± ä¹‹å‰ï¼Œè¯·æ”¶é›†è¦åŒ…æ‹¬åœ¨è¯¥æ± ä¸­çš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚ç¡®ä¿è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨é…ç½®ä¸ºä» BIG-IP ç³»ç»Ÿå¬å–å’Œæ¥æ”¶æ—¥å¿—æ¶ˆæ¯ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/4223180098.png" alt="image-20211227175216499.png"></p><h3 id="2ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—ç›®çš„åœ°-Destination">2ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—ç›®çš„åœ° Destination</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/3222058082.png" alt="image-20211227175348930.png"></p><p>é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Type ï¼šé€‰æ‹© Remote High-Speed Log</span><br><span class="line">Pool Name ï¼šé€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ POOL-HSL</span><br><span class="line">Protocol ï¼šé€‰æ‹© UDP</span><br><span class="line">Distribution ï¼šæŒ‡å®šé«˜é€Ÿè¿œç¨‹æ—¥å¿—ç›®æ ‡ç”¨äºå‘æ± æˆå‘˜å‘é€æ¶ˆæ¯çš„åˆ†å‘æ–¹æ³•ã€‚é»˜è®¤æ–¹æ³•æ˜¯è‡ªé€‚åº”çš„ã€‚</span><br><span class="line">-adaptive ï¼šå°†æ ¹æ®éœ€è¦æ·»åŠ åˆ°æ± æˆå‘˜çš„è¿æ¥ä»¥æä¾›è¶³å¤Ÿçš„æ—¥å¿—è®°å½•å¸¦å®½ã€‚ å½“å®ƒè‡ªå·±æä¾›è¶³å¤Ÿçš„æ—¥å¿—è®°å½•å¸¦å®½æ—¶ï¼Œè¿™å¯èƒ½ä¼šäº§ç”Ÿä¸è‰¯å½±å“ï¼Œå³æ—¥å¿—ä»…åœ¨ä¸€ä¸ªæ± æˆå‘˜ä¸Šç´¯ç§¯ã€‚</span><br><span class="line">-balanced ï¼š å°†æ¯ä¸ªè¿ç»­çš„æ—¥å¿—å‘é€åˆ°æ–°çš„æ± æˆå‘˜ï¼Œæ ¹æ®æ± çš„è´Ÿè½½å¹³è¡¡æ–¹æ³•å¹³è¡¡å®ƒä»¬ä¹‹é—´çš„æ—¥å¿—ã€‚</span><br><span class="line">-replicated ï¼šå°†æ¯ä¸ªæ—¥å¿—å¤åˆ¶åˆ°æ‰€æœ‰æ± æˆå‘˜ï¼Œä»¥å®ç°å†—ä½™ã€‚</span><br></pre></td></tr></table></figure><h3 id="3ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—çš„å‘å¸ƒè€…-Publisher">3ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—çš„å‘å¸ƒè€… Publisher</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/4222327899.png" alt="image-20211227180256845.png"></p><p>Destinations ï¼šé€‰å®šæ—¥å¿—è¦å‘å¾€çš„ç›®çš„åœ°ï¼Œé€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ Destinations-HSLã€‚</p><h3 id="4ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—çš„è¿‡æ»¤å™¨-Filter">4ã€é…ç½®é«˜é€Ÿè¿œç¨‹æ—¥å¿—çš„è¿‡æ»¤å™¨ Filter</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/3387395914.png" alt="image-20211227212929079.png"></p><p>é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Severity ï¼šæŒ‡å®šå‘é€çš„æ—¥å¿—ç­‰çº§</span><br><span class="line">Source ï¼šæŒ‡å®šè¿‡æ»¤å™¨è®°å½•æ¥è‡ªç‰¹å®šç³»ç»Ÿè¿›ç¨‹çš„æ¶ˆæ¯æˆ–è®°å½•æ¥è‡ªæ‰€æœ‰ç³»ç»Ÿè¿›ç¨‹çš„æ¶ˆæ¯</span><br><span class="line">Message ID ï¼šæŒ‡å®šåœ¨ç³»ç»Ÿè®°å½•çš„æ—¥å¿—æ¶ˆæ¯ä¸­å‡ºç°çš„çŠ¶æ€ç ã€‚</span><br><span class="line">Log Publisher ï¼šæŒ‡å®šå‘å¸ƒè€…ï¼Œå¦åˆ™æ— æ³•å‘é€æŒ‡å®šçš„æ—¥å¿—ã€‚</span><br></pre></td></tr></table></figure><h3 id="5ã€åˆ›å»ºRequest-Logging-Profile">5ã€åˆ›å»ºRequest Logging Profile</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/124470702.png" alt="image-20211227214647623.png"></p><p>åœ¨Templateä¸­è¾“å…¥å‘é€åˆ°æ—¥å¿—æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œè¯¦ç»†å‚æ•°å‚è€ƒä»¥ä¸‹é“¾æ¥ã€‚</p><blockquote><p><a href="https://support.f5.com/csp/article/K00847516">https://support.f5.com/csp/article/K00847516</a></p></blockquote><h3 id="6ã€-åœ¨-Virtual-Server-ä¸­å¼€å¯-http-Profile-å¹¶è°ƒç”¨-Request-Logging-Profile">6ã€ åœ¨ Virtual Server ä¸­å¼€å¯ http Profile å¹¶è°ƒç”¨ Request Logging Profile</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/2978885437.png" alt="image-20211227215516845.png"></p><h2 id="ä¸‰ã€å‚è€ƒæ–‡æ¡£">ä¸‰ã€å‚è€ƒæ–‡æ¡£</h2><p>æœ¬æ–‡ç« å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼Œæ„Ÿè°¢å„ä½ä½œè€…æ”¯æŒï¼</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€HSLé…ç½®ï¼š</span></span><br><span class="line">https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-external-monitoring-implementations-13-1-0/3.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€HSL profile æ¨¡æ¿ï¼š</span></span><br><span class="line">https://support.f5.com/csp/article/K00847516</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€åˆ›å»ºHSL profileï¼š</span></span><br><span class="line">https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-external-monitoring-implementations-13-1-0/2.html</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> HSL </tag>
            
            <tag> é«˜é€Ÿæ—¥å¿— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 SNMP é…ç½®</title>
      <link href="/posts/4848953be56b.html"/>
      <url>/posts/4848953be56b.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://www.whbblog.cn/usr/uploads/2021/12/554416656.jpg" alt="snmp.jpg"></p><h2 id="ä¸€ã€SNMP-ä»‹ç»">ä¸€ã€SNMP ä»‹ç»</h2><p>â€‹ç®€å•ç½‘ç»œç®¡ç†åè®® ï¼ˆSNMPï¼‰æ˜¯ä¸€ç§è¡Œä¸šæ ‡å‡†åè®®ï¼Œå®ƒä½¿æ ‡å‡† SNMP ç®¡ç†ç³»ç»Ÿèƒ½å¤Ÿè¿œç¨‹ç®¡ç†ç½‘ç»œä¸Šçš„è®¾å¤‡ã€‚SNMP ç®¡ç†ç³»ç»Ÿå¯ä»¥ç®¡ç†çš„è®¾å¤‡ä¹‹ä¸€æ˜¯è®¿é—®ç­–ç•¥ç®¡ç†å™¨ç³»ç»Ÿã€‚è®¿é—®ç­–ç•¥ç®¡ç†å™¨ç³»ç»Ÿæ”¯æŒçš„ SNMP ç‰ˆæœ¬åŒ…æ‹¬ï¼šSNMP v1ã€SNMP v2c å’Œ SNMP v3ã€‚</p><p>â€‹SNMP åè®®ç«¯å£ ï¼šSNMP Get ä½¿ç”¨ UDP 161 ç«¯å£ , SNMP Trap ä½¿ç”¨ udp 162 ç«¯å£ã€‚</p><p>â€‹SNMP å®ç°åŒ…æ‹¬ SNMP Agent å’Œ SNMP Trapã€‚</p><ul><li>SNMP Agent ï¼šæŒ‡å®šå…è®¸æŒ‡å®šåœ°å€ï¼ˆSNMPç®¡ç†ç³»ç»Ÿåœ°å€ï¼‰æ ¹æ® MIB æ–‡ä»¶ä¸­çš„ OID æ¥ F5 BIGIP è·å–è®¾å¤‡å‚æ•°ä¿¡æ¯ã€‚</li><li>SNMP Trap ï¼šæŒ‡å®šå½“ F5 BIGIP è®¾å¤‡è§¦å‘å“ªäº›æ•…éšœè­¦å‘Šï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å‘é€ç»™æŒ‡å®šåœ°å€ï¼ˆSNMPç®¡ç†ç³»ç»Ÿåœ°å€ï¼‰ã€‚</li></ul><h3 id="1ã€MIBæ–‡ä»¶ä¸‹è½½">1ã€MIBæ–‡ä»¶ä¸‹è½½</h3><p>ä»å¯¼èˆªçª—æ ¼ä¸­ï¼Œå±•å¼€ About ï¼Œç„¶åå•å‡» Downloads ã€‚è·³è½¬åˆ° MIB æ–‡ä»¶ä¸‹è½½é¡µé¢è¿›è¡Œä¸‹è½½ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/1370748583.png" alt="image-20211222104152418.png"></p><h2 id="äºŒã€F5-SNMP-v2-é…ç½®">äºŒã€F5 SNMP v2 é…ç½®</h2><h3 id="1ã€Agent-é…ç½®">1ã€Agent é…ç½®</h3><h4 id="ï¼ˆ1ï¼‰Agent-Configuration-é…ç½®">ï¼ˆ1ï¼‰Agent Configuration é…ç½®</h4><p>â€‹ä½¿ç”¨ Agent é…ç½®å…è®¸æŒ‡å®šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ SNMP åè®®è®¿é—® F5 BIG-IPã€‚</p><p>â€‹å¯¼èˆªè‡³ System â€ºâ€º SNMP : Agent : Configuration ï¼Œåœ¨ Client Allow List çš„ Address è¡Œè¾“å…¥å…è®¸åœ°å€æˆ–è€…ç½‘æ®µï¼Œç‚¹å‡» Add æ·»åŠ ï¼Œç‚¹å‡» Update å®Œæˆ agent é…ç½®ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/1425684478.png" alt="image-20211222105423352.png"></p><h4 id="ï¼ˆ2ï¼‰Agent-Access-é…ç½®">ï¼ˆ2ï¼‰Agent Access é…ç½®</h4><p>â€‹å¯¼èˆªè‡³ System â€ºâ€º SNMP : Agent : Access (v1, v2c) å¯ä»¥è¿›è¡Œ Agent Access é…ç½®ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Type: æŒ‡å®šè®°å½•æ˜¯åº”ç”¨äºIPv4åœ°å€è¿˜æ˜¯IPv6åœ°å€ã€‚é»˜è®¤å€¼æ˜¯IPv4ã€‚</span><br><span class="line">Community : æŒ‡å®šè®¿é—®MIBçš„ç¤¾åŒºå­—ç¬¦ä¸²ï¼ˆå¯†ç ï¼‰ã€‚</span><br><span class="line">Source : æŒ‡å®šè®¿é—®MIBçš„æºåœ°å€ã€‚é»˜è®¤ä¸º ALLã€‚</span><br><span class="line">OIDï¼šæŒ‡å®šè®°å½•çš„å¯¹è±¡æ ‡è¯†ç¬¦ï¼ˆOIDï¼‰ã€‚å¯ä»¥ä¸å¡«å†™ã€‚</span><br><span class="line">Access ï¼šæŒ‡å®šç”¨æˆ·å¯¹MIBçš„è®¿é—®çº§åˆ«ã€‚é»˜è®¤å€¼ä¸ºåªè¯»ã€‚</span><br><span class="line">Read Onlyï¼šæŒ‡å®šç”¨æˆ·å¯ä»¥æŸ¥çœ‹MIBï¼Œä½†ä¸èƒ½ä¿®æ”¹MIBã€‚</span><br><span class="line">Read/Writeï¼šæŒ‡å®šç”¨æˆ·å¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹MIBã€‚</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/1826770456.png" alt="image-20211222114939886.png"></p><h3 id="2ã€Trap-é…ç½®">2ã€Trap é…ç½®</h3><p>å¯¼èˆªè‡³ System â€ºâ€º SNMP : Traps : Destination</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Version  : æŒ‡å®šé™·é˜±ç›®æ ‡åº”ç”¨äºå“ªä¸ªç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰ç‰ˆæœ¬ï¼Œv1ã€v2cæˆ–v3ã€‚</span><br><span class="line">Comminity : æŒ‡å®šè®¿é—®MIBçš„ç¤¾åŒºå­—ç¬¦ä¸²ï¼ˆå¯†ç ï¼‰ã€‚</span><br><span class="line">Destination : æŒ‡å®šé™·é˜±ç›®æ ‡çš„åœ°å€ã€‚</span><br><span class="line">Port :æŒ‡å®šé™·é˜±ç›®æ ‡çš„ç«¯å£ã€‚é»˜è®¤å¡«å†™ä¸º162.</span><br><span class="line">Network :æŒ‡å®šé™·é˜±ç½‘ç»œã€‚ç³»ç»Ÿå°†SNMPé™·é˜±å‘é€åˆ°æŒ‡å®šçš„ç½‘ç»œã€‚æ‚¨å¿…é¡»èƒ½å¤Ÿé€šè¿‡è¯¥æ¥å£è·¯ç”±åˆ°ç›®çš„åœ°ã€‚é€‰æ‹©æ˜¯ç®¡ç†å’Œå…¶ä»–ã€‚</span><br><span class="line">Management:æŒ‡å®šç³»ç»Ÿä»ç®¡ç†IPåœ°å€ï¼ˆæˆ–ç¾¤é›†ç®¡ç†IPåœ°å€ï¼Œå¦‚æœè¿™æ˜¯ç¾¤é›†é…ç½®ï¼‰å‘é€é™·é˜±ã€‚</span><br><span class="line">Other:æŒ‡å®šç³»ç»Ÿæ ¹æ®è·¯ç”±è¡¨å°†é™·é˜±å‘é€å‡ºæ¥å£ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/2425399233.png" alt="image-20211222151110568.png"></p><h3 id="3ã€éªŒè¯">3ã€éªŒè¯</h3><h4 id="ï¼ˆ1ï¼‰éªŒè¯-SNMP-ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡-OID-è·å–F5-BIG-IP-å‚æ•°ä¿¡æ¯ã€‚">ï¼ˆ1ï¼‰éªŒè¯ SNMP ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡ OID è·å–F5 BIG-IP å‚æ•°ä¿¡æ¯ã€‚</h4><p>ä½¿ç”¨çš„æµ‹è¯•OIDå¦‚ä¸‹ï¼š</p><blockquote><p>.1.3.6.1.4.1.3375.2.1.6.2.0  :  ç”¨äºè·å–ä¸»æœºå</p></blockquote><p>ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼Œè·å–åˆ°å¯¹åº”ä¿¡æ¯åˆ™è¯´æ˜é…ç½®å®Œæˆã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¼å¼å¦‚ä¸‹ï¼š</span></span><br><span class="line">snmpwalk -c &lt;communitystring&gt; -v &lt;2c&gt; &lt;BIG-IP IP Address&gt; OID</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–ä¸»æœºåæµ‹è¯•ï¼š</span></span><br><span class="line">snmpwalk -v 2c -c Ad123min 192.168.10.84 .1.3.6.1.4.1.3375.2.1.6.2.0</span><br><span class="line"><span class="comment">#è¾“å‡ºå¦‚ä¸‹ï¼š</span></span><br><span class="line">F5-BIGIP-SYSTEM-MIB::sysSystemNodeName.0 = STRING: bigip2.com</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰éªŒè¯-SNMP-ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡-OID-è¿›è¡Œé…ç½®æ›´æ”¹ã€‚">ï¼ˆ2ï¼‰éªŒè¯ SNMP ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡ OID è¿›è¡Œé…ç½®æ›´æ”¹ã€‚</h4><p><strong>æ³¨æ„ï¼šAgent Access è¦é…ç½®ä¸º Read/Writeï¼Œé»˜è®¤ä¸º Read Onlyã€‚</strong></p><p>æœ¬æ¬¡æµ‹è¯•ç›®çš„ä¸ºå˜æ›´è™šæ‹ŸæœåŠ¡çŠ¶æ€ï¼Œå…·ä½“æ“ä½œä¸ºå˜æ›´ BIG-IP åœ°å€ä¸º 192.168.10.84 ä¸Šçš„è™šæ‹ŸæœåŠ¡ vs_ntp çŠ¶æ€ã€‚ä½¿ç”¨çš„æµ‹è¯•OIDå¦‚ä¸‹ï¼š</p><blockquote><p>.1.3.6.1.4.1.3375.2.2.10.1.2.1.1 ï¼š ç”¨äºè·å–è™šæ‹ŸæœåŠ¡åç§°</p><p>.1.3.6.1.4.1.3375.2.2.10.1.2.1.9 ï¼š ç”¨äºè·å–è™šæ‹ŸæœåŠ¡çŠ¶æ€</p></blockquote><p><strong>a. æŸ¥çœ‹è™šæ‹ŸæœåŠ¡ vs_ntp å½“å‰çŠ¶æ€</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@(bigip2)(cfg-sync Standalone)(Active)(/Common)(tmos)<span class="comment"># show ltm virtual vs_ntp </span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">Ltm::Virtual Server: vs_ntp    </span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">Status                         </span><br><span class="line">  Availability     : available </span><br><span class="line">  State            : enabled   </span><br><span class="line">  Reason           : The virtual server is available</span><br><span class="line">  CMP              : enabled   </span><br><span class="line">  CMP Mode         : all-cpus  </span><br><span class="line">  Destination      : 192.168.10.245:any</span><br></pre></td></tr></table></figure><blockquote><p>ç”±ä»¥ä¸Šè¾“å‡ºå¾—å‡ºç»“æœï¼š vs_ntp å½“å‰çŠ¶æ€ä¸º enabledã€‚</p></blockquote><p><strong>b. æŸ¥è¯¢è™šæ‹ŸæœåŠ¡æŸ¥è¯¢æˆå‘˜ vs_ntp åç§°å¯¹åº”çš„å®Œæ•´OIDå€¼ã€‚</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line">snmpwalk -c Ad123min -v 2c 192.168.10.84 .1.3.6.1.4.1.3375.2.2.10.1.2.1.1 -On</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">.1.3.6.1.4.1.3375.2.2.10.1.2.1.1.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 = STRING: /Common/vs_ntp</span><br></pre></td></tr></table></figure><blockquote><p>ç”±ä»¥ä¸Šè¾“å‡ºå¯ä»¥è·å–åˆ°è™šæ‹ŸæœåŠ¡ vs_ntp åç§°å¯¹åº”çš„å®Œæ•´ OID ä¸º .1.3.6.1.4.1.3375.2.2.10.1.2.1.1.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 ã€‚</p></blockquote><p><strong>c. æ ¹æ®è™šæ‹ŸæœåŠ¡ vs_ntp å®Œæ•´åç§° OID å€¼è·å–è™šæ‹ŸæœåŠ¡ vs_ntp å½“å‰çŠ¶æ€ã€‚</strong></p><p>å°†æŸ¥è¯¢è™šæ‹ŸæœåŠ¡åç§° OID å˜æ›´ä¸ºæŸ¥è¯¢è™šæ‹ŸæœåŠ¡çŠ¶æ€çš„ OIDï¼Œåé¢çš„éƒ¨åˆ†ä¿æŒä¸å˜ã€‚</p><p>å˜æ›´åæŸ¥è¯¢è™šæ‹ŸæœåŠ¡ vs_ntp çŠ¶æ€çš„ OID ä¸ºï¼š .1.3.6.1.4.1.3375.2.2.10.1.2.1.9.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥è¯¢ vs_ntp å½“å‰çŠ¶æ€</span></span><br><span class="line">snmpwalk -c Ad123min -v 2c 192.168.10.84 .1.3.6.1.4.1.3375.2.2.10.1.2.1.9.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 -On</span><br><span class="line"><span class="comment"># è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line">.1.3.6.1.4.1.3375.2.2.10.1.2.1.9.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 = INTEGER: <span class="literal">true</span>(1)</span><br></pre></td></tr></table></figure><blockquote><p>æ ¹æ®ä»¥ä¸Šè¾“å‡ºå¯ä¸€æŸ¥çœ‹å½“å‰è™šæ‹ŸæœåŠ¡çŠ¶æ€æ˜¯å¼€å¯çŠ¶æ€ï¼Œå’Œæ­¥éª¤ a ç»“æœä¸€è‡´ã€‚</p></blockquote><p><strong>d. å°†è™šæ‹ŸæœåŠ¡ vs_ntp çŠ¶æ€å˜ä¸º disabled çŠ¶æ€</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜æ›´è™šæ‹ŸæœåŠ¡ vs_ntp çŠ¶æ€</span></span><br><span class="line">snmpset -c Ad123min -v 2c 192.168.10.84 .1.3.6.1.4.1.3375.2.2.10.1.2.1.9.14.47.67.111.109.109.111.110.47.118.115.95.110.116.112 i 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå¦‚ä¸‹ï¼Œåˆ™å˜æ›´æˆåŠŸï¼Œå¦åˆ™æ£€éªŒSNMP Access è¯»å†™æƒé™ã€‚</span></span><br><span class="line">F5-BIGIP-LOCAL-MIB::ltmVirtualServEnabled.<span class="string">&quot;/Common/vs_ntp&quot;</span> = INTEGER: <span class="literal">false</span>(0)</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šiåé¢çš„å‚æ•°ï¼š 0 false ï¼› 1 trueï¼›</p></blockquote><p><strong>e. éªŒè¯è™šæ‹ŸæœåŠ¡ vs_ntp å½“å‰çŠ¶æ€</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@(bigip2)(cfg-sync Standalone)(Active)(/Common)(tmos)<span class="comment"># show ltm virtual vs_ntp</span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">Ltm::Virtual Server: vs_ntp    </span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">Status                         </span><br><span class="line">  Availability     : available </span><br><span class="line">  State            : disabled  </span><br><span class="line">  Reason           : The virtual server is available</span><br><span class="line">  CMP              : enabled   </span><br><span class="line">  CMP Mode         : all-cpus  </span><br><span class="line">  Destination      : 192.168.10.245:any</span><br></pre></td></tr></table></figure><blockquote><p>ç”±ä»¥ä¸Šè¾“å‡ºå¾—å‡ºç»“æœï¼š vs_ntp å½“å‰çŠ¶æ€ä¸º disabledï¼ŒéªŒè¯è‡³æ­¤å®Œæˆã€‚</p></blockquote><h2 id="ä¸‰ã€F5-SNMP-v3-é…ç½®">ä¸‰ã€F5 SNMP v3 é…ç½®</h2><h3 id="1ã€Agent-é…ç½®-2">1ã€Agent é…ç½®</h3><h4 id="ï¼ˆ1ï¼‰Agent-Configuration-é…ç½®-2">ï¼ˆ1ï¼‰Agent Configuration é…ç½®</h4><p>â€‹ä½¿ç”¨ Agent é…ç½®å…è®¸æŒ‡å®šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ SNMP åè®®è®¿é—® F5 BIG-IPã€‚</p><p>â€‹å¯¼èˆªè‡³ System â€ºâ€º SNMP : Agent : Configuration ï¼Œåœ¨ Client Allow List çš„ Address è¡Œè¾“å…¥å…è®¸åœ°å€æˆ–è€…ç½‘æ®µï¼Œç‚¹å‡» Add æ·»åŠ ï¼Œç‚¹å‡» Update å®Œæˆ agent é…ç½®ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/1425684478.png" alt="image-20211222105423352.png"></p><h4 id="ï¼ˆ2ï¼‰Agent-Access-é…ç½®-2">ï¼ˆ2ï¼‰Agent Access é…ç½®</h4><p>â€‹å¯¼èˆªè‡³ System â€ºâ€º SNMP : Agent : Access (v3) å¯ä»¥è¿›è¡Œ Agent Access é…ç½®ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">User Nameï¼šæŒ‡å®šè¦æˆäºˆå…¶å¯¹ SNMP v3 MIB è®¿é—®æƒé™çš„ç”¨æˆ·çš„åç§°ã€‚</span><br><span class="line">Authentication: æŒ‡å®šç”¨æˆ·çš„èº«ä»½éªŒè¯æ–¹æ³•å’Œå¯†ç ã€‚</span><br><span class="line">Typeï¼šæŒ‡å®šç”¨æˆ·çš„èº«ä»½éªŒè¯æ–¹æ³•ã€‚</span><br><span class="line">MD5ï¼šæŒ‡å®šå¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯çš„MD5ç®—æ³•ã€‚</span><br><span class="line">SHAï¼šæŒ‡å®šç”¨äºå¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯çš„å®‰å…¨å“ˆå¸Œç®—æ³•ï¼ˆSHAï¼‰ã€‚</span><br><span class="line">None:æŒ‡å®šæ— ç”¨æˆ·èº«ä»½éªŒè¯ã€‚</span><br><span class="line">Passwardï¼šæŒ‡å®šç”¨æˆ·çš„å¯†ç ã€‚</span><br><span class="line">Confirm ï¼šç¡®è®¤ç”¨æˆ·çš„å¯†ç ã€‚å¯†ç å’Œç¡®è®¤æ¡ç›®å¿…é¡»åŒ¹é…ã€‚</span><br><span class="line">Privacy: æŒ‡å®šç”¨äºä¸ºæ­¤ç”¨æˆ·ä¼ é€’èº«ä»½éªŒè¯ä¿¡æ¯çš„éšç§åè®®ã€‚</span><br><span class="line">Protocolï¼šæŒ‡å®šåŠ å¯†åè®®ã€‚</span><br><span class="line">AESï¼šæŒ‡å®šç³»ç»Ÿä½¿ç”¨AESï¼ˆé«˜çº§åŠ å¯†æ ‡å‡†ï¼‰åŠ å¯†ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line">DESï¼šæŒ‡å®šç³»ç»Ÿä½¿ç”¨DESï¼ˆæ•°æ®åŠ å¯†æ ‡å‡†ï¼‰åŠ å¯†ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line">Noneï¼šæŒ‡å®šç³»ç»Ÿä¸åŠ å¯†ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line">OIDï¼šæŒ‡å®šè®°å½•çš„å¯¹è±¡æ ‡è¯†ç¬¦ï¼ˆOIDï¼‰ã€‚å¯ä»¥å¡«å†™.1ã€‚</span><br><span class="line">Access ï¼šæŒ‡å®šç”¨æˆ·å¯¹MIBçš„è®¿é—®çº§åˆ«ã€‚é»˜è®¤å€¼ä¸ºåªè¯»ã€‚</span><br><span class="line">Read Onlyï¼šæŒ‡å®šç”¨æˆ·å¯ä»¥æŸ¥çœ‹MIBï¼Œä½†ä¸èƒ½ä¿®æ”¹MIBã€‚</span><br><span class="line">Read/Writeï¼šæŒ‡å®šç”¨æˆ·å¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹MIBã€‚</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/2489214538.png" alt="image-20211222153850735.png"></p><h3 id="2ã€Trap-é…ç½®-2">2ã€Trap é…ç½®</h3><p>å¯¼èˆªè‡³ System â€ºâ€º SNMP : Traps : Destination</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Version  : æŒ‡å®šé™·é˜±ç›®æ ‡åº”ç”¨äºå“ªä¸ªç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰ç‰ˆæœ¬ï¼Œv1ã€v2cæˆ–v3ã€‚</span><br><span class="line">Destination  :æŒ‡å®šé™·é˜±ç›®æ ‡çš„åœ°å€ã€‚</span><br><span class="line">Port :æŒ‡å®šé™·é˜±ç›®æ ‡çš„ç«¯å£ã€‚é»˜è®¤å¡«å†™ä¸º162ã€‚</span><br><span class="line">Network :æŒ‡å®šé™·é˜±ç½‘ç»œã€‚ç³»ç»Ÿå°†SNMPé™·é˜±å‘é€åˆ°æŒ‡å®šçš„ç½‘ç»œã€‚æ‚¨å¿…é¡»èƒ½å¤Ÿé€šè¿‡è¯¥æ¥å£è·¯ç”±åˆ°ç›®çš„åœ°ã€‚é€‰æ‹©æ˜¯ç®¡ç†å’Œå…¶ä»–ã€‚</span><br><span class="line">Management:æŒ‡å®šç³»ç»Ÿä»ç®¡ç†IPåœ°å€ï¼ˆæˆ–ç¾¤é›†ç®¡ç†IPåœ°å€ï¼Œå¦‚æœè¿™æ˜¯ç¾¤é›†é…ç½®ï¼‰å‘é€é™·é˜±ã€‚</span><br><span class="line">Other:æŒ‡å®šç³»ç»Ÿæ ¹æ®è·¯ç”±è¡¨å°†é™·é˜±å‘é€å‡ºæ¥å£ã€‚</span><br><span class="line">Security Level ï¼šæŒ‡å®šè¦å¤„ç†SNMPæ¶ˆæ¯çš„å®‰å…¨çº§åˆ«ã€‚</span><br><span class="line">Auth, No Privacyï¼šä½¿ç”¨èº«ä»½éªŒè¯ä½†ä¸åŠ å¯†æ¥å¤„ç†SNMPæ¶ˆæ¯ã€‚ä½¿ç”¨æ­¤å€¼æ—¶ï¼Œè¿˜å¿…é¡»ä¸ºå®‰å…¨åç§°ã€èº«ä»½éªŒè¯åè®®å’Œèº«ä»½éªŒè¯å¯†ç è®¾ç½®æä¾›å€¼ã€‚</span><br><span class="line">Auth &amp; Privacyï¼šä½¿ç”¨èº«ä»½éªŒè¯å’ŒåŠ å¯†å¤„ç†SNMPæ¶ˆæ¯ã€‚ä½¿ç”¨æ­¤å€¼æ—¶ï¼Œè¿˜å¿…é¡»æä¾›å®‰å…¨åç§°ã€èº«ä»½éªŒè¯åè®®ã€èº«ä»½éªŒè¯å¯†ç ã€éšç§åè®®å’Œéšç§å¯†ç è®¾ç½®çš„å€¼ã€‚</span><br><span class="line">Authentication Protocol : æŒ‡å®šç³»ç»Ÿç”¨äºéªŒè¯SNMP v3é™·é˜±çš„ç®—æ³•ã€‚æ‚¨å¯ä»¥é€‰æ‹©MD5æˆ–SHAã€‚</span><br><span class="line">Authentication Password: æŒ‡å®šç³»ç»Ÿç”¨äºå¤„ç†SNMP v3é™·é˜±çš„å¯†ç ã€‚æ­¤å¯†ç çš„é•¿åº¦å¿…é¡»è‡³å°‘ä¸º8ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">Privacy Protocol: æŒ‡å®šç³»ç»Ÿç”¨äºåŠ å¯†SNMP v3é™·é˜±çš„ç®—æ³•ã€‚æ‚¨å¯ä»¥é€‰æ‹©AESæˆ–DESã€‚</span><br><span class="line">Privacy Password: æŒ‡å®šç³»ç»Ÿç”¨äºå¤„ç†åŠ å¯†SNMP v3é™·é˜±çš„å¯†ç ã€‚æ­¤å¯†ç çš„é•¿åº¦å¿…é¡»è‡³å°‘ä¸º8ä¸ªå­—ç¬¦ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/12/3160764071.png" alt="image-20211222161727617.png"></p><h3 id="3ã€éªŒè¯-2">3ã€éªŒè¯</h3><h4 id="ï¼ˆ1ï¼‰éªŒè¯-SNMP-ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡-OID-è·å–F5-BIG-IP-å‚æ•°ä¿¡æ¯ã€‚-2">ï¼ˆ1ï¼‰éªŒè¯ SNMP ç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯ä»¥é€šè¿‡ OID è·å–F5 BIG-IP å‚æ•°ä¿¡æ¯ã€‚</h4><p>ä½¿ç”¨çš„æµ‹è¯•OIDå¦‚ä¸‹ï¼š</p><blockquote><p>.1.3.6.1.4.1.3375.2.1.6.2.0  :  ç”¨äºè·å–ä¸»æœºå</p></blockquote><p>ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼Œè·å–åˆ°å¯¹åº”ä¿¡æ¯åˆ™è¯´æ˜é…ç½®å®Œæˆã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼å¦‚ä¸‹ï¼š</span></span><br><span class="line">snmpwalk -c &lt;communitystring&gt; -v &lt;version&gt; -l &lt;level&gt; -a &lt;auth&gt; -A &lt;passward&gt; -x &lt;Privacy&gt; -X &lt;passward&gt; &lt;BIG-IP IP Address&gt; OID</span><br><span class="line"><span class="comment"># è·å–ä¸»æœºåæµ‹è¯•ï¼š</span></span><br><span class="line">snmpwalk -v3 -u Ad123min -a SHA -A <span class="string">&quot;Ad123min&quot;</span> -x AES -X <span class="string">&quot;Ad123min&quot;</span> -l authPriv  192.168.5.122 .1.3.6.1.4.1.3375.2.1.6.2.0</span><br><span class="line"><span class="comment"># è¾“å‡ºå¦‚ä¸‹ï¼š </span></span><br><span class="line">F5-BIGIP-SYSTEM-MIB::sysSystemNodeName.0 = STRING: bigip1.com</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> SNMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 å¸¸ç”¨ Shell è„šæœ¬æ•´ç†ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</title>
      <link href="/posts/f14900787904.html"/>
      <url>/posts/f14900787904.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ‰¹é‡åŸŸåè§£æ">ä¸€ã€æ‰¹é‡åŸŸåè§£æ</h2><p><strong>è¯´æ˜ï¼šæ‰¹é‡åŸŸåè¿›è¡ŒåŸŸåè§£æï¼Œè¿”å›è§£æç»“æœã€‚</strong></p><div class="tabs" id="è„šæœ¬ä¸€"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è„šæœ¬ä¸€-1">è„šæœ¬è¯´æ˜</button></li><li class="tab"><button type="button" data-href="#è„šæœ¬ä¸€-2">è„šæœ¬</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è„šæœ¬ä¸€-1"><p><strong>1ã€åˆ›å»ºåŸŸåæ–‡æ¡£</strong><br>åˆ›å»ºè¦æ‰¹é‡è§£ææµ‹è¯•çš„åŸŸåï¼Œåç§°ä¸º domainname.txt ã€‚<br>æ³¨æ„ï¼šåç§°ä¸ºä¸€å®šè¦ä¸ºdomainname.txtï¼Œå¹¶ä¸”ä¸ªè„šæœ¬åœ¨åŒä¸€ä¸ªè·¯å¾„ä¸‹ã€‚<br>åŸŸåæ–‡æ¡£å†…å®¹æ ¹æ®æƒ…å†µè¿›è¡Œå¡«å†™ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baidu.com</span><br><span class="line">whbblog.cn</span><br><span class="line">aaa.com</span><br></pre></td></tr></table></figure><p><strong>2ã€åˆ›å»ºè„šæœ¬</strong><br><strong>3ã€æ‰§è¡Œè„šæœ¬</strong><br>åœ¨æ‰§è¡Œè„šæœ¬æ—¶ä¸€å®šè¦ä½¿ç”¨ -d å‚æ•° ï¼Œåé¢è·Ÿè¦è¿›è¡ŒåŸŸåè§£æçš„ DNS æœåŠ¡å™¨ï¼Œç¤ºä¾‹å¦‚ä¸‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash script_name.sh -d 192.168.1.1</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è„šæœ¬ä¸€-2"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Author:Hongbao Wang</span></span><br><span class="line"><span class="comment">#Date:2021/12/07</span></span><br><span class="line"><span class="comment">#Description:This script performs batch domain name resolution.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">resolve</span></span>()&#123;</span><br><span class="line">suss=0</span><br><span class="line">fail=0</span><br><span class="line"><span class="keyword">for</span> dn <span class="keyword">in</span> $(<span class="built_in">cat</span> domainname.txt)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">nslookup <span class="variable">$&#123;dn&#125;</span> -<span class="built_in">timeout</span>=1 <span class="variable">$OPTARG</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ $? == 0 ] </span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;dn&#125;</span> resolve Succeeded!&quot;</span></span><br><span class="line">((suss++))</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;dn&#125;</span> resolve Failed!&quot;</span></span><br><span class="line">((fail++))</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;----------------------------------------------&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;DNS Resolve Finish, Success : <span class="variable">$suss</span> , Failed : <span class="variable">$fail</span>&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">usage</span></span>()&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Usage: -d &lt;dns resolve address&gt; :  Input DNS resolve address&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Example : <span class="variable">$0</span> -d 192.168.1.1&quot;</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nargs=<span class="variable">$#</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$nargs</span> -eq 0 ] ; <span class="keyword">then</span></span><br><span class="line">        usage</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">getopts</span> <span class="string">&quot;:d:&quot;</span> OPT &amp;&gt; /dev/null ;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$OPT</span> <span class="keyword">in</span></span><br><span class="line">                d)</span><br><span class="line">                        resolve <span class="variable">$OPTARG</span>;;</span><br><span class="line">                *)</span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;Parameter input error!&quot;</span></span><br><span class="line">usage</span><br><span class="line">                        <span class="built_in">exit</span> 1;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="äºŒã€SNAT-Pool-æˆå‘˜æµé‡ç»„åˆ‡æ¢">äºŒã€SNAT Pool æˆå‘˜æµé‡ç»„åˆ‡æ¢</h2><div class="tabs" id="è„šæœ¬äºŒ"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è„šæœ¬äºŒ-1">è„šæœ¬è¯´æ˜</button></li><li class="tab"><button type="button" data-href="#è„šæœ¬äºŒ-2">è„šæœ¬</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è„šæœ¬äºŒ-1"><p>å®ç°ç›®çš„ï¼šå°† SNAT Pool ä¸­çš„æˆå‘˜ä» traffic-group-1 å˜æ›´åˆ° traffic-group-2ã€‚<br>éœ€è¦æ ¹æ®æƒ…å†µæ‰‹åŠ¨å˜æ›´ä»¥ä¸‹ä½ç½®ï¼Œ<br>SNAT Pool Nameï¼štest_snatpool<br>Traffic-groupï¼štraffic-group-2<br><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è„šæœ¬äºŒ-2"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> snatpool_member <span class="keyword">in</span> `tmsh list ltm snatpool test_snatpool members | grep -E <span class="string">&#x27;[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;|:&#x27;</span>|awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`;<span class="keyword">do</span> tmsh modify ltm snat-translation <span class="variable">$&#123;snatpool_member&#125;</span> traffic-group traffic-group-2;[[ $? -eq 0 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$snatpool_member</span> --&gt; Success &quot;</span> || <span class="string">&quot;<span class="variable">$snatpool_member</span> --&gt; Failed&quot;</span>;<span class="keyword">done</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="ä¸‰ã€F5æ‰¹é‡å¢åŠ å¤„ç†Partitionä¸­poolä¸­poolmember">ä¸‰ã€F5æ‰¹é‡å¢åŠ å¤„ç†Partitionä¸­poolä¸­poolmember</h2><div class="tabs" id="è„šæœ¬ä¸‰"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#è„šæœ¬ä¸‰-1">è„šæœ¬è¯´æ˜</button></li><li class="tab"><button type="button" data-href="#è„šæœ¬ä¸‰-2">è„šæœ¬</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="è„šæœ¬ä¸‰-1"><p>åœ¨ partition <code>dmz_partitio</code>n ä¸‹ pool <code>dmz_pool</code> ä¸­ å¢åŠ  <code>10.252.55.144%2:7058</code>  <code>10.252.55.145%2:7058</code> <code>10.252.55.148%2:7058</code>  ä¸‰ä¸ªæ–°æˆå‘˜ã€‚</p><p><strong>éœ€è¦ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</strong><br>dmz_partition ï¼š partitionåç§°<br>dmz_pool ï¼š pool åç§°<br>%2 ï¼š domain id<br>144 145 148 ï¼š å˜é‡ï¼Œåœ¨ä¸‹é¢<code>$i</code>è¿›è¡Œè°ƒç”¨</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="è„šæœ¬ä¸‰-2"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 144 145 148 ; <span class="keyword">do</span> tmsh modify ltm pool /dmz_partition/dmz_pool members add &#123; 10.252.55.<span class="variable">$i</span>%2:7058 &#123; address 10.252.55.<span class="variable">$i</span>%2 &#125; &#125; ; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> shell </tag>
            
            <tag> è„šæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 å¸¸ç”¨æ‰‹å†Œï¼ˆé•¿æœŸæ›´æ–°ï¼‰</title>
      <link href="/posts/533dab9ef63e.html"/>
      <url>/posts/533dab9ef63e.html</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€F5-å‡çº§æ³¨æ„äº‹é¡¹-Licenseé—®é¢˜">1ã€F5 å‡çº§æ³¨æ„äº‹é¡¹ - Licenseé—®é¢˜</h3><p>ï¼ˆ1ï¼‰æ£€æŸ¥ F5 è®¾å¤‡ <code>Service Check Date</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">grep &quot;Service check date&quot; /config/bigip.license</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼äºŒï¼š</span></span><br><span class="line">tmsh show sys license | grep &quot;Service Check Date&quot;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æŸ¥çœ‹ç›®æ ‡ç‰ˆæœ¬ <code>License Check Date</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K7727</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰F5 è®¾å¤‡å‡çº§<br>ã€€å¦‚æœ <code>Service Check Date</code> æ—©äº  <code>License Check Date</code> ï¼Œåˆ™éœ€è¦é‡æ–°æ¿€æ´»Licenseï¼Œå†è¿›è¡Œå‡çº§ï¼Œåä¹‹ä¸éœ€è¦é‡æ–°æ¿€æ´»Licenseè¿›è¡Œå‡çº§ã€‚</p><h3 id="2ã€ä¿®æ”¹æ—¥å¿—æœåŠ¡å™¨">2ã€ä¿®æ”¹æ—¥å¿—æœåŠ¡å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tmsh modify /sys syslog remote-servers add &#123; name &#123; host ip remote-port 514 &#125; &#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®˜æ–¹æ–‡æ¡£ï¼šhttps://support.f5.com/csp/article/K13080</span></span><br></pre></td></tr></table></figure><h3 id="3ã€ä¿®æ”¹å¯†ç ç­–ç•¥">3ã€ä¿®æ”¹å¯†ç ç­–ç•¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tmsh modify auth password-policy minimum-length 8 password-memory 3 max-duration 90 max-login-failures 5 </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨ï¼šmininum-lengthä¸ºæœ€å°å¯†ç é•¿åº¦ï¼Œpassword-memoryæœ€å°‘å¯†ç å¤æ‚åº¦ï¼Œmax-durationå¯†ç æœ€å¤§æœŸé™</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®˜æ–¹æ–‡æ¡£ï¼šhttps://clouddocs.f5.com/cli/tmsh-reference/latest/modules/auth/auth_password-policy.html</span></span><br></pre></td></tr></table></figure><h3 id="4ã€ç™»å½•è¶…æ—¶æ—¶é—´è®¾ç½®">4ã€ç™»å½•è¶…æ—¶æ—¶é—´è®¾ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SSH ç™»é™†è¶…æ—¶æ—¶é—´</span></span><br><span class="line">tmsh modify /sys  sshd inactivity-timeout 300</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®˜æ–¹æ–‡æ¡£ï¼šhttps://support.f5.com/csp/article/K9908</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">console ä¼šè¯è¶…æ—¶æ—¶é—´</span></span><br><span class="line">tmsh modify /sys global-setting console-inactivity-timeout 300</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HTTP ä¼šè¯è¶…æ—¶æ—¶é—´</span></span><br><span class="line">tmsh modify sys httpd auth-pam-idle-timeout 180</span><br></pre></td></tr></table></figure><h3 id="5ã€banner-é…ç½®">5ã€banner é…ç½®</h3><p>ï¼ˆ1ï¼‰ç™»é™†å‰ banner é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç™»é™†å‰ bannerï¼Œâ€œâ€ ä¸­æ·»åŠ  banner è¯­ã€‚</span></span><br><span class="line">tmsh modify sys sshd banner enabled banner-text &quot;Authorized users only. All activity may be monitored and reported.&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆç™»é™†å‰ banner é…ç½®</span></span><br><span class="line">tmsh modify /sys sshd banner disabled banner-text none</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ç™»å½•å banner é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç™»é™†å bannerï¼Œåœ¨ â€œâ€ ä¸­æ·»åŠ  banner è¯­ã€‚</span></span><br><span class="line">echo &quot; banner &quot; &gt; /etc/motd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆç™»é™†å banner é…ç½®</span></span><br><span class="line">cat /dev/null &gt; /etc/motd</span><br></pre></td></tr></table></figure><h3 id="6ã€æŸ¥çœ‹å½“å‰ç¡¬ä»¶æ”¯æŒè½¯ä»¶ç‰ˆæœ¬">6ã€æŸ¥çœ‹å½“å‰ç¡¬ä»¶æ”¯æŒè½¯ä»¶ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K9476</span><br></pre></td></tr></table></figure><h3 id="7ã€ä¿®æ”¹-web-ç™»å½•ç«¯å£">7ã€ä¿®æ”¹ web ç™»å½•ç«¯å£</h3><p><strong>ä¿®æ”¹ä¸šåŠ¡åœ°å€ httpd ç«¯å£1200ï¼Œæ³¨æ„ä¿®æ”¹ç«¯å£åï¼Œä¸šåŠ¡åœ°å€éœ€è¦æ”¾é€šè¯¥ç«¯å£ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ 1200 ç«¯å£ç™»å½•ä¸ºä¾‹</span></span><br><span class="line">tmsh modify sys httpd ssl-port 1200</span><br><span class="line">tmsh modify net self-allow defaults add &#123; tcp:1200 &#125;</span><br><span class="line">tmsh save sys config</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹ç®¡ç†åœ°å€ httpd ç«¯å£1200ï¼Œç®¡ç†åœ°å€é»˜è®¤æ”¾é€šå…¨éƒ¨ç«¯å£</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ 1200 ç«¯å£ç™»å½•ä¸ºä¾‹</span></span><br><span class="line">tmsh modify sys httpd ssl-port 1200</span><br><span class="line">tmsh save sys config</span><br></pre></td></tr></table></figure><h3 id="8ã€æŸ¥çœ‹ä¸åŒç³»ç»Ÿçš„-TTL">8ã€æŸ¥çœ‹ä¸åŒç³»ç»Ÿçš„ TTL</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://subinsb.com/default-device-ttl-values/</span><br></pre></td></tr></table></figure><h3 id="9ã€é‡æ–°åŠ è½½ç³»ç»Ÿ">9ã€é‡æ–°åŠ è½½ç³»ç»Ÿ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">image2disk --format=volumes --nosaveconfig /shared/images/BIGIP-13.0.1-0.0.3.iso      </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®˜æ–¹æ–‡æ¡£ï¼šhttps://support.f5.com/csp/article/K13117</span></span><br></pre></td></tr></table></figure><h3 id="10ã€HTTP-Monitor">10ã€HTTP Monitor</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HTTP 0.9</span></span><br><span class="line">&quot;GET /\n&quot; or &quot;GET /\r\n&quot;.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HTTP 1.0</span></span><br><span class="line">&quot;GET / HTTP/1.0\r\n\r\n&quot; or &quot;GET / HTTP/1.0\n\n&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HTTP 1.1</span></span><br><span class="line">&quot;GET / HTTP/1.1\r\nHost: server.com\r\n\r\n&quot; or &quot;GET / HTTP/1.1\r\nHost: server.com\r\nConnection: close\r\n\r\n&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">GET /index.html HTTP/1.1\r\nHost: host.domain.com\r\nConnection: Close\r\n\r\n</span><br></pre></td></tr></table></figure><h3 id="11ã€æ¸…é™¤è®¾å¤‡å‘Šè­¦">11ã€æ¸…é™¤è®¾å¤‡å‘Šè­¦</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">iç³»åˆ—æ¸…é™¤lcdè­¦å‘Š</span></span><br><span class="line">tmsh reset-stats sys alert lcd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¶ä»–é™¤VIPRIONæ¸…é™¤lcdå‘Šè­¦</span></span><br><span class="line">BIG-IP 12.1.5, BIG-IP 13.1.0 and later</span><br><span class="line">for i in 0 1 2 3 4 5; do lcdwarn -c &quot;$&#123;i&#125;&quot;; done</span><br><span class="line">BIG-IP 13.0.0, BIG-IP 12.1.4 and earlier</span><br><span class="line">for i in 0 1 2 3 4 5; do lcdwarn -c &quot;$&#123;i&#125;&quot; 0; done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®˜æ–¹æ–‡æ¡£ï¼šhttps://support.f5.com/csp/article/K11094&gt;</span></span><br></pre></td></tr></table></figure><h3 id="12ã€ä¸‰è§’ä¼ è¾“-loopback-æ¥å£é…ç½®">12ã€ä¸‰è§’ä¼ è¾“ loopback æ¥å£é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat ifcfg-lo:1</span><br><span class="line">DEVICE=lo:1</span><br><span class="line">IPADDR=10.10.1.1</span><br><span class="line">NETMASK=255.255.255.255</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=loopback1</span><br></pre></td></tr></table></figure><h3 id="13ã€F5-å¤§æ–‡ä»¶æŸ¥è¯¢">13ã€F5 å¤§æ–‡ä»¶æŸ¥è¯¢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /usr/ -xdev -type f -exec du &#123;&#125; \; | sort -rn | head -20</span><br></pre></td></tr></table></figure><h3 id="14ã€ç¦ç”¨httpdæ”¯æŒçš„å¯†ç å¥—ä»¶">14ã€ç¦ç”¨httpdæ”¯æŒçš„å¯†ç å¥—ä»¶</h3><p><strong>ç¤ºä¾‹ï¼šç¦ç”¨DESå¯†ç </strong></p><p>ç¦ç”¨å‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@(localdns3)(cfg-sync Disconnected)(LICENSE EXPIRED)(/Common)(tmos)# list sys httpd ssl-ciphersuite </span><br><span class="line">sys httpd &#123;</span><br><span class="line">    ssl-ciphersuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA:AES256-SHA:AES128-SHA256:AES256-SHA256:!3DES</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¦ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@(localdns3)(cfg-sync Disconnected)(LICENSE EXPIRED)(/Common)(tmos)# modify sys httpd ssl-ciphersuite &#x27;&quot;ssl-ciphersuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA:AES256-SHA:AES128-SHA256:AES256-SHA256:!3DES:DES&quot;&#x27;</span><br></pre></td></tr></table></figure><blockquote><p>å®˜æ–¹KBï¼š<a href="https://support.f5.com/csp/article/K61363565">https://support.f5.com/csp/article/K61363565</a></p></blockquote><h3 id="15ã€Xshell-è¿æ¥F5è®°ä½å¯†ç ç™»å½•">15ã€Xshell è¿æ¥F5è®°ä½å¯†ç ç™»å½•</h3><blockquote><p>é»˜è®¤ Xshell è¿æ¥ F5 è®¾å¤‡éœ€è¦é”®ç›˜äº¤äº’è¾“å…¥å¯†ç ï¼Œæ— æ³•è®°ä½å¯†ç ã€‚å¸Œæœ›ä¸‹æ¬¡ç™»å½•è®°ä½å¯†ç ç›´æ¥ç™»å½•ã€‚<br>ä¼˜åŒ–æ–¹å¼ï¼šç™»å½• F5 è®¾å¤‡ ä¿®æ”¹ sshd é…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim /run/config/sshd_config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®å…è®¸rootç™»å½•</span></span><br><span class="line">PermitRootLogin yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…è®¸ç”¨å¯†ç æ–¹å¼ç™»é™†</span></span><br><span class="line">PasswordAuthentication yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŠŠä¸Šè¿°å‚æ•°å‰é¢çš„<span class="comment">#æ³¨é‡Šå»æ‰</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŠŠä¸Šè¿°å‚æ•°çš„noæ”¹æˆ<span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‰é”®ã€Escã€‘ï¼Œè¾“å…¥:wq!ï¼Œå³ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘çŠ¶æ€</span></span><br></pre></td></tr></table></figure><blockquote><p>é‡å¯ SSHD æœåŠ¡</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><h3 id="16ã€æ¸…é™¤LTMä¼šè¯ä¿æŒ">16ã€æ¸…é™¤LTMä¼šè¯ä¿æŒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmsh delete ltm persistence persist-records virtual virtual_åç§°</span><br></pre></td></tr></table></figure><h3 id="17ã€æŸ¥çœ‹-F5-ç¬¬ä¸‰æ–¹æœåŠ¡ç‰ˆæœ¬">17ã€æŸ¥çœ‹ F5 ç¬¬ä¸‰æ–¹æœåŠ¡ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K65097545</span><br></pre></td></tr></table></figure><h3 id="18ã€æŸ¥çœ‹-F5-14ç‰ˆæœ¬æ‰€æ”¯æŒå¯†ç å¥—ä»¶ï¼Œå…¶ä»–ç‰ˆæœ¬ä¹Ÿé€šè¿‡æœ¬é“¾æ¥è¿›è¡Œè·³è½¬">18ã€æŸ¥çœ‹ F5 14ç‰ˆæœ¬æ‰€æ”¯æŒå¯†ç å¥—ä»¶ï¼Œå…¶ä»–ç‰ˆæœ¬ä¹Ÿé€šè¿‡æœ¬é“¾æ¥è¿›è¡Œè·³è½¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K54125331</span><br></pre></td></tr></table></figure><h3 id="19ã€æŸ¥çœ‹-F5-æ“ä½œç³»ç»Ÿä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿå’Œå†…æ ¸ç‰ˆæœ¬ç­‰ï¼‰">19ã€æŸ¥çœ‹ F5 æ“ä½œç³»ç»Ÿä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿå’Œå†…æ ¸ç‰ˆæœ¬ç­‰ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K3645</span><br></pre></td></tr></table></figure><h3 id="20ã€F5-external-monitor-è„šæœ¬ï¼ˆä»…ä¾›å‚è€ƒï¼‰">20ã€F5 external monitor è„šæœ¬ï¼ˆä»…ä¾›å‚è€ƒï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">server=192.168.6.80</span><br><span class="line">port=8080</span><br><span class="line"></span><br><span class="line">status=`curl -s -X GET &quot;http://$&#123;server&#125;:$&#123;port&#125;/test/&quot; -H &quot;accept: */*&quot;`</span><br><span class="line"></span><br><span class="line">if [ $status -eq 1 ]; then</span><br><span class="line">  echo &quot;UP&quot;</span><br><span class="line">fi</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> CLI </tag>
            
            <tag> å‘½ä»¤ </tag>
            
            <tag> TMSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5å¸¸è§æ¼æ´å¤„ç†</title>
      <link href="/posts/847c90f72cce.html"/>
      <url>/posts/847c90f72cce.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€CVE-2016-2183">ä¸€ã€CVE-2016-2183</h2><h3 id="1ã€ç®¡ç†æ¥å£æ¼æ´">1ã€ç®¡ç†æ¥å£æ¼æ´</h3><p>(1) è·å–ç®¡ç†åœ°å€æ”¯æŒçš„å¯†ç å¥—ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh list sys httpd ssl-ciphersuite</span></span><br><span class="line">sys httpd &#123;</span><br><span class="line">    ssl-ciphersuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA:AES256-SHA:AES128-SHA256:AES256-SHA256</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åœ¨æ‰€æ”¯æŒçš„å¯†ç å¥—ä»¶ä¸­ç¦ç”¨ 3DES å¯†ç ï¼Œåœ¨ä¸Šä¸€æ­¥è¾“å‡ºçš„å¯†ç å¥—ä»¶ååŠ  :!3DES</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh modify sys httpd ssl-ciphersuite &quot;ssl-ciphersuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA:AES256-SHA:AES128-SHA256:AES256-SHA256:!3DES&quot;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä¿®æ”¹sslåè®®ï¼Œç¦ç”¨ä½ç‰ˆæœ¬sslåè®®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh modify sys httpd ssl-protocol &quot;all -SSLv2 -SSLv3 -TLS v1&quot;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰ä¿å­˜é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh save sys config</span></span><br></pre></td></tr></table></figure><h3 id="2ã€ä¸šåŠ¡ç«¯å£æ¼æ´">2ã€ä¸šåŠ¡ç«¯å£æ¼æ´</h3><p>ï¼ˆ1ï¼‰æŸ¥çœ‹ ssl profile è¯ä¹¦å¯†ç å¥—ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost:Active:Standalone] config <span class="comment"># tmsh list ltm profile client-ssl test_clientssl ciphers </span></span><br><span class="line">ltm profile client-ssl test_clientssl &#123;</span><br><span class="line">    ciphers DEFAULT</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä¿®æ”¹ ssl profile ï¼Œåœ¨æ‰€æ”¯æŒçš„å¯†ç å¥—ä»¶ä¸­ç¦ç”¨ 3DES å¯†ç ï¼Œåœ¨ä¸Šä¸€æ­¥è¾“å‡ºçš„å¯†ç å¥—ä»¶ååŠ  :!3DES ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost:Active:Standalone] config <span class="comment"># tmsh modify ltm profile client-ssl test_clientssl ciphers &quot;DEFAULT:!3DES&quot;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä¿å­˜é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh save sys config</span></span><br></pre></td></tr></table></figure><h3 id="3ã€ç›¸å…³å®˜æ–¹æ–‡æ¡£">3ã€ç›¸å…³å®˜æ–¹æ–‡æ¡£</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K13167034</span><br></pre></td></tr></table></figure><h2 id="äºŒã€SSL-TLS-æœåŠ¡å™¨ç¬æ—¶-Diffie-Hellman-å…¬å…±å¯†é’¥è¿‡å¼±">äºŒã€SSL/TLS æœåŠ¡å™¨ç¬æ—¶ Diffie-Hellman å…¬å…±å¯†é’¥è¿‡å¼±</h2><p>ï¼ˆ1ï¼‰æŸ¥çœ‹ ssl profile è¯ä¹¦å¯†ç å¥—ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost:Active:Standalone] config <span class="comment"># tmsh list ltm profile client-ssl test_clientssl ciphers </span></span><br><span class="line">ltm profile client-ssl test_clientssl &#123;</span><br><span class="line">    ciphers DEFAULT</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä¿®æ”¹ ssl profile ï¼Œåœ¨æ‰€æ”¯æŒçš„å¯†ç å¥—ä»¶ä¸­ç¦ç”¨ DHE å¯†ç ï¼Œåœ¨ä¸Šä¸€æ­¥è¾“å‡ºçš„å¯†ç å¥—ä»¶ååŠ  :!DHE ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost:Active:Standalone] config <span class="comment"># tmsh modify ltm profile client-ssl test_clientssl ciphers &quot;DEFAULT:!DHE&quot;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä¿å­˜é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localdns3:Active:Standalone] config <span class="comment"># tmsh save sys config</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> CVE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 ZoneRunner CNAME è½¬å‘é…ç½®</title>
      <link href="/posts/9cf4f1324ca6.html"/>
      <url>/posts/9cf4f1324ca6.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€é…ç½®è¦æ±‚">ä¸€ã€é…ç½®è¦æ±‚</h2><p>ç”¨æˆ·é€šè¿‡ F5 Local DNS è®¿é—®åŸŸå <a href="http://whb.test.com">whb.test.com</a> çš„èµ„æºè®°å½•ï¼Œç”± F5 Local DNS é…ç½® CNAME è®°å½•ä¸º <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> , å¹¶è½¬å‘è¯·æ±‚ <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> åˆ° F5 GTM ï¼ŒGTM æŠŠ <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> ç›¸å…³èµ„æºè®°å½•è¿”å›ç»™ F5 Local DNS ï¼Œå†ç”± F5 Local DNS è¿”å›ç»™ç”¨æˆ·ã€‚</p><h2 id="äºŒã€ç¯å¢ƒè®¾è®¡">äºŒã€ç¯å¢ƒè®¾è®¡</h2><ul><li><p>F5 Local DNS IP Address ï¼š 192.168.10.83</p></li><li><p>F5 GTM IP Address ï¼š192.168.10.84</p></li><li><p>æµ‹è¯•åŸŸåï¼š<a href="http://whb.test.com">whb.test.com</a></p></li><li><p>æµ‹è¯•åŸŸå CNAME ï¼š<a href="http://whb.gslb.test.com">whb.gslb.test.com</a></p></li></ul><p><strong>è®¿é—®æ‹“æ‰‘å¦‚ä¸‹ï¼š</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3647690677.png" alt="image-20211120172640795.png"></p><p>æ­¥éª¤ä¸€ï¼šClient å‘ Local DNS è¯·æ±‚ <a href="http://whb.test.com">whb.test.com</a> çš„èµ„æºè®°å½•ã€‚</p><p>æ­¥éª¤äºŒï¼šF5 Local DNS ç›‘å¬åˆ°è¯¥ Client è§£æ <a href="http://whb.test.com">whb.test.com</a> çš„è¯·æ±‚ ï¼Œé…ç½® CNAME ä¸º <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> è®°å½•è½¬å‘åˆ° F5 GTM ã€‚</p><p>æ­¥éª¤ä¸‰ï¼šF5 GTM è¿”å› <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> çš„èµ„æºè®°å½•ç»™ F5 Local DNS ã€‚</p><p>æ­¥éª¤å››ï¼šF5 Local DNS æŠŠ <a href="http://whb.test.com">whb.test.com</a> çš„èµ„æºè®°å½•ç»™ Client ã€‚</p><h2 id="ä¸‰ã€F5-Local-DNS-é…ç½®">ä¸‰ã€F5 Local DNS é…ç½®</h2><p>ï¼ˆ1ï¼‰é…ç½® Listener</p><p>â€‹ç”¨äºç›‘å¬ DNS è¯·æ±‚ï¼Œé…ç½®ç›‘å¬åœ°å€ï¼Œé…ç½® SNAT ä¸º Automap ï¼Œå¼€å¯ Address Translation å’Œ Port Translation ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1601784294.png" alt="image-20211120175658371.png"></p><p>ï¼ˆ2ï¼‰æ–°å»ºZone</p><p>æ–°å»º <a href="http://test.com">test.com</a> åŒºåŸŸã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/446166917.png" alt="image-20211120180011785.png"></p><p>ï¼ˆ3ï¼‰é…ç½®cname</p><p>é…ç½® <a href="http://whb.test.com">whb.test.com</a> CNAME èµ„æºè®°å½•ä¸º <a href="http://whb.gslb.test.com">whb.gslb.test.com</a>ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/615062322.png" alt="image-20211120180152681.png"></p><p>ï¼ˆ4ï¼‰é…ç½®æˆæƒ</p><p><a href="http://xn--gslb-9v6ko99f.test.com">é…ç½®gslb.test.com</a> NS æˆæƒç»™ gtm è§£æã€‚ï¼ˆæ³¨æ„ï¼šå¦‚æœæ²¡æœ‰è¯¥ NS çš„ A è®°å½•è¯·è‡ªè¡Œæ·»åŠ ï¼Œè¿™é‡Œä¸åšæ¼”ç¤ºã€‚ï¼‰</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/892574619.png" alt="image-20211120180326482.png"></p><h2 id="å››ã€GTM-é…ç½®">å››ã€GTM é…ç½®</h2><p>GTM è¿›è¡Œæ­£å¸¸é…ç½®å³å¯ã€‚ç»†èŠ‚å°±ä¸è¿›è¡Œå±•ç¤ºäº†ã€‚</p><p>ï¼ˆ1ï¼‰é…ç½®pool</p><p>é…ç½® <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> , pool member IP åœ°å€ä¸º 192.168.10.96 ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/750090941.png" alt="image-20211120180832395.png"></p><p>ï¼ˆ2ï¼‰é…ç½® Wide IPs</p><p>é…ç½® <a href="http://whb.gslb.test.com">whb.gslb.test.com</a> ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1796238575.png" alt="image-20211120181028615.png"></p><h2 id="äº”ã€æµ‹è¯•">äº”ã€æµ‹è¯•</h2><p>æµ‹è¯•ç»“æœï¼š</p><p>å®¢æˆ·ç«¯å‘ F5 local dns è·å– <a href="http://whb.test.com">whb.test.com</a> çš„èµ„æºè®°å½• ï¼Œè¿›è¿‡ CNAME æˆæƒè½¬å‘ ï¼Œæœ€åæˆåŠŸè§£æåˆ°äº† IP åœ°å€ ã€‚æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]<span class="comment"># nslookup whb.test.com 192.168.10.83</span></span><br><span class="line">Server:192.168.10.83</span><br><span class="line">Address:192.168.10.83<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">whb.test.comcanonical name = whb.gslb.test.com.</span><br><span class="line">Name:whb.gslb.test.com</span><br><span class="line">Address: 192.168.10.96</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> DNS </tag>
            
            <tag> ZoneRunner </tag>
            
            <tag> Cname </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 EDNS é…ç½®</title>
      <link href="/posts/9648ad8a6474.html"/>
      <url>/posts/9648ad8a6474.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç¯å¢ƒä»‹ç»">ä¸€ã€ç¯å¢ƒä»‹ç»</h2><h3 id="1ã€åœ°å€åˆ’åˆ†">1ã€åœ°å€åˆ’åˆ†</h3><p>PC1 IP Address ï¼š172.30.193.58</p><p>PC2 IP Address ï¼š172.23.5.17</p><p>F5 Local DNS IP ï¼š 172.30.201.242</p><p>F5 GTM IP ï¼š 172.30.192.36</p><h3 id="2ã€GTM-æµ‹è¯•ä¿¡æ¯">2ã€GTM æµ‹è¯•ä¿¡æ¯</h3><p>æµ‹è¯•åŸŸåï¼š<a href="http://ednstest.gslb.bmcc.com.cn">ednstest.gslb.bmcc.com.cn</a></p><p>Aè®°å½•1 IP Address : 172.30.197.146</p><p>Aè®°å½•2 IP Address : 10.4.166.72</p><h3 id="3ã€Topology-ç­–ç•¥">3ã€Topology ç­–ç•¥</h3><p>æºåœ°å€172.23.5.17/32 --&gt; ç›®çš„åœ°å€172.30.197.146/32</p><p>æºåœ°å€173.30.193.58/32 --&gt; ç›®çš„åœ°å€10.4.166.72/32</p><h3 id="4ã€ç¯å¢ƒæ‹“æ‰‘">4ã€ç¯å¢ƒæ‹“æ‰‘</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/105303153.png" alt="image-20211118203644602.png"></p><h3 id="5ã€æµ‹è¯•è¦æ±‚">5ã€æµ‹è¯•è¦æ±‚</h3><p>a. å½“PC1 172.30.193.58 é€šè¿‡ F5 Local DNS <a href="http://172.30.201.xn--242ednstest-qs3sj11bur3eyn9e.gslb.bmcc.com.cn">172.30.201.242è¯·æ±‚åŸŸåednstest.gslb.bmcc.com.cn</a>ï¼ŒF5 Local DNSé€šè¿‡ iRule è½¬å‘è¯¥ç‰¹å®šåŸŸåè‡³F5 GTM ï¼ŒF5 GTM æ ¹æ®PC1 172.30.193.58 çš„IPåœ°å€åŒ¹é… Topology ç®—æ³•ï¼Œè§£æAè®°å½•ä¸º10.4.166.72ã€‚</p><p>b. å½“PC2 172.23.5.17 é€šè¿‡ F5 Local DNS <a href="http://172.30.201.xn--242ednstest-qs3sj11bur3eyn9e.gslb.bmcc.com.cn">172.30.201.242è¯·æ±‚åŸŸåednstest.gslb.bmcc.com.cn</a>ï¼ŒF5 Local DNSé€šè¿‡ iRule è½¬å‘è¯¥ç‰¹å®šåŸŸåè‡³F5 GTM ï¼ŒF5 GTM æ ¹æ®PC2 172.23.5.17 çš„IPåœ°å€åŒ¹é… Topology ç®—æ³•ï¼Œè§£æAè®°å½•ä¸º172.30.197.146ã€‚</p><h2 id="äºŒã€F5-Local-DNS-é…ç½®">äºŒã€F5 Local DNS é…ç½®</h2><h3 id="1ã€Data-Group-é…ç½®">1ã€Data Group é…ç½®</h3><p>åˆ›å»º data group ï¼Œç”¨äºå­˜å‚¨è½¬å‘è‡³ GTM çš„åŸŸåä¿¡æ¯ ã€‚å†é€šè¿‡é…ç½® iRule ï¼Œå½“ Local DNS Listener ç›‘å¬åˆ°è¯¥ data group ä¸­çš„åŸŸåï¼Œåˆ™è½¬å‘ DNS è¯·æ±‚åˆ° GTMã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3437280986.png" alt="dns1.png"></p><h3 id="2ã€Pool-é…ç½®">2ã€Pool é…ç½®</h3><p>åˆ›å»º GTM Pool ï¼Œç”¨äºæŠŠç‰¹å®šè¯·æ±‚è½¬å‘ GTM ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3616144005.png" alt="dns2.png"></p><h3 id="3ã€iRule-é…ç½®">3ã€iRule é…ç½®</h3><p>å®šä¹‰å½“ Local DNS Listener ç›‘å¬åˆ° data group ä¸­çš„åŸŸåè¯·æ±‚ä¿¡æ¯ï¼Œåˆ™è½¬å‘ DNS è¯·æ±‚åˆ° GTM Poolã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1742866336.png" alt="dns3.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when DNS_REQUEST &#123; </span><br><span class="line"><span class="keyword">if</span> &#123; [class match [DNS::question name] equals forward_to_gtm] &#125; &#123;</span><br><span class="line">pool gtm_pool</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€DNS-Profile-é…ç½®">4ã€DNS Profile é…ç½®</h3><p>å¼€å¯ Insert Source Address into Client Subnet Option é€‰é¡¹ï¼Œç”¨äºåœ¨ DNS è¯·æ±‚ä¸­ï¼ŒDNS æŠ¥æ–‡é™„åŠ å­—æ®µæ’å…¥å®¢æˆ·ç«¯åœ°å€ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1360609601.png" alt="image-20211118205244643.png"></p><h3 id="5ã€Listener-é…ç½®">5ã€Listener é…ç½®</h3><p>é…ç½®ç›‘å¬åœ°å€ï¼Œå¼€å¯æºåœ°å€ã€ç›®çš„åœ°å€å’Œç›®çš„ç«¯å£è½¬æ¢ã€‚è°ƒç”¨ edns profile å’Œ iRuleã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/440341266.png" alt="dns4.png"></p><h2 id="ä¸‰ã€F5-GTM-é…ç½®">ä¸‰ã€F5 GTM é…ç½®</h2><h3 id="1ã€Pool-é…ç½®">1ã€Pool é…ç½®</h3><p>é…ç½®GSLB Poolï¼Œé¦–é€‰ç®—æ³•ä¸º Topology ï¼Œæˆå‘˜ä¸º 172.30.197.146 å’Œ 10.4.166.72</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1954967758.png" alt="gtm2.png"></p><h3 id="2ã€Topology-é…ç½®">2ã€Topology é…ç½®</h3><ul><li>å½“å®¢æˆ·ç«¯åœ°å€ 172.23.5.17 æ¥è¿›è¡Œdnsè¯·æ±‚ï¼Œè¿”å›ç»“æœåœ¨ 172.30.197.146/32 æ®µå†…ã€‚</li><li>å½“å®¢æˆ·ç«¯åœ°å€ 172.30.198.58 æ¥è¿›è¡Œdnsè¯·æ±‚ï¼Œè¿”å›ç»“æœåœ¨ 10.4.166.72/32 æ®µå†…ã€‚</li></ul><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1776774508.png" alt="gtm1.png"></p><h3 id="3ã€é…ç½®-Wide-IPs">3ã€é…ç½® Wide IPs</h3><p>é€‰æ‹© <a href="http://ednstest.gslb.bmcc.com.cn">ednstest.gslb.bmcc.com.cn</a> poolã€‚</p><p>æ³¨æ„ï¼šå½“éœ€è¦å¯¹ pool è¿›è¡Œæ ¹æ®å®¢æˆ·ç«¯ Topology ç®—æ³•æ—¶ï¼Œéœ€è¦é€‰æ‹©ä¸‹å›¾ General Properties ï¼š Advancedï¼Œå¼€å¯ Prefer Client Subnetã€‚å¯¹ pool member è¿›è¡Œæ ¹æ®å®¢æˆ·ç«¯ Topology ç®—æ³•æ—¶ï¼Œå¯ä»¥ä¸ç”¨å¼€å¯è¯¥é€‰é¡¹ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/97729138.png" alt="gtm3.png"></p><h3 id="4ã€Prefer-Client-Subnet-å¼€å¯">4ã€Prefer Client Subnet å¼€å¯</h3><p>å½“å¼€å¯ Prefer Client Subnet é€‰é¡¹ã€‚ ç³»ç»Ÿä½¿ç”¨ edns0 å®¢æˆ·ç«¯å­ç½‘é€‰é¡¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œè€Œä¸æ˜¯æºåœ°å€ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1071276927.png" alt="gtm4.png"></p><h2 id="å››ã€æµ‹è¯•">å››ã€æµ‹è¯•</h2><h3 id="1ã€PC1-172-30-193-58-æµ‹è¯•">1ã€PC1 172.30.193.58 æµ‹è¯•</h3><p>ä½¿ç”¨ PC1 172.30.193.58 å» Local DNS 172.30.201.242 è¿›è¡Œ <a href="http://ednstest.gslb.bmcc.com.cn">ednstest.gslb.bmcc.com.cn</a> åŸŸåè§£æï¼Œå¤šæ¬¡æµ‹è¯•è¿”å›ç»“æœä¸º 10.6.166.72 ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3055635956.png" alt="dnstest1.png"></p><h3 id="2ã€-PC1-172-23-5-17-æµ‹è¯•">2ã€ PC1 172.23.5.17 æµ‹è¯•</h3><p>ä½¿ç”¨ PC2 172.23.5.17 å» Local DNS 172.30.201.242 è¿›è¡Œ <a href="http://ednstest.gslb.bmcc.com.cn">ednstest.gslb.bmcc.com.cn</a> åŸŸåè§£æï¼Œå¤šæ¬¡æµ‹è¯•è¿”å›ç»“æœä¸º 172.30.197.146 ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3269956066.png" alt="dnstest2.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> edns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNS åè®®æŠ¥æ–‡æ ¼å¼è§£æ</title>
      <link href="/posts/3b5295ef71c6.html"/>
      <url>/posts/3b5295ef71c6.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€DNS-æŠ¥æ–‡åŸºç¡€">ä¸€ã€DNS æŠ¥æ–‡åŸºç¡€</h2><p>DNSæŠ¥æ–‡å¯ä»¥åˆ†ä¸ºæŸ¥è¯¢å’Œåº”ç­”ï¼Œä»–ä»¬çš„æ€»ä½“ç»“æ„æ˜¯ç›¸åŒçš„ã€‚DNSçš„é¡¶å±‚æ ¼å¼åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼š</p><blockquote><p>1ã€é¦–éƒ¨ï¼ˆHeaderï¼‰<br>2ã€é—®é¢˜ï¼ˆQuestionï¼‰<br>3ã€å›ç­”ï¼ˆAnswerï¼‰<br>4ã€æƒå¨ï¼ˆAuthorityï¼‰<br>5ã€é™„åŠ ï¼ˆAdditionalï¼‰</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/762916609.png" alt="image-20211117202404754.png"></p><h2 id="äºŒã€DNS-é¦–éƒ¨">äºŒã€DNS é¦–éƒ¨</h2><p>æ¯ä¸€ç±»DNSæŠ¥æ–‡éƒ½æœ‰ä¸€ä¸ªé¦–éƒ¨éƒ¨åˆ†ã€‚é¦–éƒ¨åŒ…æ‹¬ä¸€äº›å­—æ®µï¼Œç”¨äºè§„å®šå…¶ä½™éƒ¨åˆ†æ˜¯å¦å­˜åœ¨ï¼Œä¹Ÿæ˜¯è§„å®šæ˜¯æŸ¥è¯¢è¿˜æ˜¯å“åº”ï¼Œæ˜¯æ ‡å‡†æŸ¥è¯¢è¿˜æ˜¯å…¶ä»–ç±»å‹çš„æ“ä½œã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/893867181.png" alt="image-20211117210720834.png"></p><p><strong>ï¼ˆ1ï¼‰ã€Transaction ID æ ‡è¯† (16bit)</strong></p><p><strong>ï¼ˆ2ï¼‰ã€Flags æ ‡å¿— (16bit)</strong></p><ul><li><p>Response (QR)  (1bit)</p><ul><li>æŸ¥è¯¢/å“åº”çš„æ ‡å¿—ä½ï¼Œ0ä¸ºæŸ¥è¯¢ ï¼Œ1ä¸ºå“åº”ã€‚</li></ul></li><li><p>Opcode (4bit)</p><ul><li>æ“ä½œç ï¼Œå®šä¹‰æŸ¥è¯¢æˆ–å“åº”çš„ç±»å‹ï¼Œ0åˆ™æ˜¯æ ‡å‡†çš„ï¼Œ1åˆ™æ˜¯åå‘çš„ï¼Œ2æ˜¯æœåŠ¡å™¨çŠ¶æ€è¯·æ±‚ã€‚</li></ul></li><li><p>Authoritative (AA) (1bit)</p><ul><li>æˆæƒåº”ç­”ï¼Œè¯¥å­—æ®µåœ¨å“åº”æŠ¥æ–‡ä¸­æœ‰æ•ˆã€‚å€¼ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºåç§°æœåŠ¡å™¨æ˜¯æƒå¨æœåŠ¡å™¨ï¼›å€¼ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºä¸æ˜¯æƒå¨æœåŠ¡å™¨ã€‚</li></ul></li><li><p>Truncated (TC) (1bit)</p><ul><li>æˆªæ–­æ ‡å¿—ä½ã€‚å€¼ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºå“åº”å·²è¶…è¿‡ 512 å­—èŠ‚å¹¶å·²è¢«æˆªæ–­ï¼Œåªè¿”å›å‰ 512 ä¸ªå­—èŠ‚ã€‚</li></ul></li><li><p>Recursion desired (RD) (1bit)</p><ul><li>æœŸæœ›é€’å½’ã€‚è¯¥å­—æ®µèƒ½åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­è®¾ç½®ï¼Œå¹¶åœ¨å“åº”ä¸­è¿”å›ã€‚è¯¥æ ‡å¿—å‘Šè¯‰åç§°æœåŠ¡å™¨å¿…é¡»å¤„ç†è¿™ä¸ªæŸ¥è¯¢ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºä¸€ä¸ªé€’å½’æŸ¥è¯¢ã€‚å¦‚æœè¯¥ä½ä¸º 0ï¼Œä¸”è¢«è¯·æ±‚çš„åç§°æœåŠ¡å™¨æ²¡æœ‰ä¸€ä¸ªæˆæƒå›ç­”ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªèƒ½è§£ç­”è¯¥æŸ¥è¯¢çš„å…¶ä»–åç§°æœåŠ¡å™¨åˆ—è¡¨ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸ºè¿­ä»£æŸ¥è¯¢ã€‚</li></ul></li><li><p>Recursion available (RA) (1bit)</p><ul><li>å¯ç”¨é€’å½’ã€‚è¯¥å­—æ®µåªå‡ºç°åœ¨å“åº”æŠ¥æ–‡ä¸­ã€‚å½“å€¼ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æ”¯æŒé€’å½’æŸ¥è¯¢ã€‚</li></ul></li><li><p>Z (zero) (1bit)</p><ul><li>ä¿ç•™å­—æ®µï¼Œåœ¨æ‰€æœ‰çš„è¯·æ±‚å’Œåº”ç­”æŠ¥æ–‡ä¸­ï¼Œå®ƒçš„å€¼å¿…é¡»ä¸º 0ã€‚</li></ul></li><li><p>answer authenticated (AD) (1bit)</p><ul><li>åº”ç­”è®¤è¯ï¼šåº”ç­”/æƒé™éƒ¨åˆ†æœªç”±æœåŠ¡å™¨è¿›è¡Œè®¤è¯ã€‚0 ä¸ºåº”ç­”æœåŠ¡å™¨æœªéªŒè¯äº†è¯¥æŸ¥è¯¢ç›¸å…³çš„ DNSSEC æ•°å­—ç­¾åã€‚1 ä¸ºåº”ç­”æœåŠ¡å™¨å·²ç»éªŒè¯äº†è¯¥æŸ¥è¯¢ç›¸å…³çš„ DNSSEC æ•°å­—ç­¾åã€‚</li></ul></li><li><p>Non-authenticated data (CD) (1bit)</p><ul><li>æœªç»è®¤è¯çš„æ•°æ®ï¼šä¸å¯æ¥å—ã€‚0 ä¸ºæœåŠ¡å™¨å·²ç»è¿›è¡Œäº†ç›¸å…³ DNSSEC æ•°å­—ç­¾åçš„éªŒè¯ã€‚1ä¸ºæœåŠ¡å™¨å¹¶æœªè¿›è¡Œç›¸å…³ DNSSEC æ•°å­—ç­¾åçš„éªŒè¯</li></ul></li><li><p>Reply code (rcode) (4bit)</p><ul><li>è¿”å›ç å­—æ®µï¼Œè¡¨ç¤ºå“åº”çš„å·®é”™çŠ¶æ€ã€‚å¸¸è§è¿”å›ç å­—æ®µå¦‚ä¸‹ï¼š</li></ul></li></ul><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/4206187764.png" alt="image-20211117220210437.png"></p><p><strong>(3)ã€Questions é—®é¢˜æ•°</strong></p><p><strong>(4)ã€Answer RRs å›ç­”èµ„æºè®°å½•æ•°</strong></p><p><strong>(5)ã€Authority RRs æƒå¨èµ„æºè®°å½•æ•°</strong></p><p><strong>(6)ã€Additional é™„åŠ èµ„æºè®°å½•æ•°</strong></p><p>RRs å³ Resource Recordsï¼Œèµ„æºè®°å½•ã€‚åˆ†åˆ«å¯¹åº”ä¸‹é¢çš„æŸ¥è¯¢é—®é¢˜ã€å›ç­”ã€æˆæƒå’Œé™„åŠ ä¿¡æ¯éƒ¨åˆ†çš„æ•°é‡ã€‚</p><p>åœ¨ DNS æŸ¥è¯¢è¯·æ±‚ä¸­ï¼Œä¸€èˆ¬ Questions (é—®é¢˜æ•°)éƒ½ä¸º1ï¼Œå›ç­”è®°å½•æ•°ã€æˆæƒèµ„æºè®°å½•æ•°å’Œé™„åŠ èµ„æºè®°å½•æ•°éƒ½ä¸º0ã€‚</p><h2 id="ä¸‰ã€è¯·æ±‚åŒºåŸŸ">ä¸‰ã€è¯·æ±‚åŒºåŸŸ</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/276894050.png" alt="image-20211117211623604.png"></p><p><strong>(1)ã€æŸ¥è¯¢å</strong></p><p>æŸ¥è¯¢åéƒ¨åˆ†é•¿åº¦ä¸å®šï¼Œä¸€èˆ¬ä¸ºè¦æŸ¥è¯¢çš„åŸŸå(ä¹Ÿä¼šæœ‰IPçš„æ—¶å€™ï¼Œå³åå‘æŸ¥è¯¢)ã€‚ æ­¤éƒ¨åˆ†ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ ‡ç¤ºç¬¦åºåˆ—ç»„æˆï¼Œæ¯ä¸ªæ ‡ç¤ºç¬¦ä»¥é¦–å­—èŠ‚æ•°çš„è®¡æ•°å€¼æ¥è¯´æ˜è¯¥æ ‡ç¤ºç¬¦é•¿åº¦ï¼Œæ¯ä¸ªåå­—ä»¥0ç»“æŸã€‚è®¡æ•°å­—èŠ‚æ•°å¿…é¡»æ˜¯0~63ä¹‹é—´ã€‚è¯¥å­—æ®µæ— éœ€å¡«å……å­—èŠ‚ã€‚</p><p><strong>(2)ã€æŸ¥è¯¢ç±»å‹</strong></p><table><thead><tr><th>ä»£ç </th><th>å·ç </th><th>å®šä¹‰çš„ RFC</th><th>æè¿°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>A</td><td>1</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>IP åœ°å€è®°å½•</td><td>ä¼ å›ä¸€ä¸ª 32 æ¯”ç‰¹çš„ <a href="https://zh.wikipedia.org/wiki/IPv4">IPv4</a> åœ°å€ï¼Œæœ€å¸¸ç”¨äºæ˜ å°„<a href="https://zh.wikipedia.org/wiki/%E4%B8%BB%E6%A9%9F%E5%90%8D%E7%A8%B1">ä¸»æœºåç§°</a>åˆ° <a href="https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80">IPåœ°å€</a>ï¼Œä½†ä¹Ÿç”¨äº<a href="https://zh.wikipedia.org/w/index.php?title=DNSBL&amp;action=edit&amp;redlink=1">DNSBL</a>ï¼ˆ<a href="https://tools.ietf.org/html/rfc1101">RFC 1101</a>ï¼‰ç­‰ã€‚</td></tr><tr><td>AAAA</td><td>28</td><td><a href="https://tools.ietf.org/html/rfc3596">RFC 3596</a></td><td><a href="https://zh.wikipedia.org/wiki/IPv6">IPv6</a> IP åœ°å€è®°å½•</td><td>ä¼ å›ä¸€ä¸ª 128 æ¯”ç‰¹çš„ IPv6 åœ°å€ï¼Œæœ€å¸¸ç”¨äºæ˜ å°„ä¸»æœºåç§°åˆ° IP åœ°å€ã€‚</td></tr><tr><td>AFSDB</td><td>18</td><td><a href="https://tools.ietf.org/html/rfc1183">RFC 1183</a></td><td><a href="https://zh.wikipedia.org/w/index.php?title=AFS%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1&amp;action=edit&amp;redlink=1">AFSæ–‡ä»¶ç³»ç»Ÿ</a></td><td>ï¼ˆAndrew File Systemï¼‰æ•°æ®åº“æ ¸å¿ƒçš„ä½ç½®ï¼ŒäºåŸŸåä»¥å¤–çš„ AFS å®¢æˆ·ç«¯å¸¸ç”¨æ¥è”ç³» AFS æ ¸å¿ƒã€‚è¿™ä¸ªè®°å½•çš„å­ç±»å‹æ˜¯è¢«è¿‡æ—¶çš„çš„ <a href="https://zh.wikipedia.org/wiki/DCE/DFS">DCE/DFS</a>ï¼ˆDCE Distributed File Systemï¼‰æ‰€ä½¿ç”¨ã€‚</td></tr><tr><td>APL</td><td>42</td><td><a href="https://tools.ietf.org/html/rfc3123">RFC 3123</a></td><td>åœ°å€å‰ç¼€åˆ—è¡¨</td><td>æŒ‡å®šåœ°å€åˆ—è¡¨çš„èŒƒå›´ï¼Œä¾‹å¦‚ï¼šCIDR æ ¼å¼ä¸ºå„ä¸ªç±»å‹çš„åœ°å€ï¼ˆè¯•éªŒæ€§ï¼‰ã€‚</td></tr><tr><td>CAA</td><td>257</td><td><a href="https://tools.ietf.org/html/rfc6844">RFC 6844</a></td><td>æƒå¨è®¤è¯æˆæƒ</td><td>DNSè®¤è¯æœºæ„æˆæƒï¼Œé™åˆ¶ä¸»æœº/åŸŸçš„å¯æ¥å—çš„CA</td></tr><tr><td>CDNSKEY</td><td>60</td><td><a href="https://tools.ietf.org/html/rfc7344">RFC 7344</a></td><td>å­å…³é”®è®°å½•</td><td>å…³é”®è®°å½•è®°å½•çš„å­ç‰ˆæœ¬ï¼Œç”¨äºè½¬ç§»åˆ°çˆ¶çº§</td></tr><tr><td>CDS</td><td>59</td><td><a href="https://tools.ietf.org/html/rfc7344">RFC 7344</a></td><td>å­å§”æ‰˜ç­¾å‘è€…</td><td>å§”æ‰˜ç­¾å‘è€…è®°å½•çš„å­ç‰ˆæœ¬ï¼Œç”¨äºè½¬ç§»åˆ°çˆ¶çº§</td></tr><tr><td>CERT</td><td>37</td><td><a href="https://tools.ietf.org/html/rfc4398">RFC 4398</a></td><td>è¯ä¹¦è®°å½•</td><td>å­˜å‚¨ <a href="https://zh.wikipedia.org/wiki/PKIX">PKIX</a>ã€<a href="https://zh.wikipedia.org/w/index.php?title=SPKI&amp;action=edit&amp;redlink=1">SPKI</a>ã€<a href="https://zh.wikipedia.org/wiki/Pretty_Good_Privacy">PGP</a>ç­‰ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=CNAME_%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">CNAME</a></td><td>5</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>è§„èŒƒåç§°è®°å½•</td><td>ä¸€ä¸ªä¸»æœºåå­—çš„åˆ«åï¼š<a href="https://zh.wikipedia.org/wiki/DNS">åŸŸåç³»ç»Ÿ</a>å°†ä¼šç»§ç»­å°è¯•æŸ¥æ‰¾æ–°çš„åå­—ã€‚</td></tr><tr><td>DHCID</td><td>49</td><td><a href="https://tools.ietf.org/html/rfc4701">RFC 4701</a></td><td><a href="https://zh.wikipedia.org/wiki/DHCP">DHCP</a>ï¼ˆåŠ¨æ€ä¸»æœºè®¾ç½®åè®®ï¼‰è¯†åˆ«ç </td><td>ç”¨äºå°† FQDN é€‰é¡¹ç»“åˆè‡³ <a href="https://zh.wikipedia.org/wiki/DHCP">DHCP</a>ã€‚</td></tr><tr><td>DLV</td><td>32769</td><td><a href="https://tools.ietf.org/html/rfc4431">RFC 4431</a></td><td><a href="https://zh.wikipedia.org/wiki/DNSSEC">DNSSEC</a>ï¼ˆåŸŸåç³»ç»Ÿå®‰å…¨æ‰©å±•ï¼‰æ¥æºéªŒè¯è®°å½•</td><td>ä¸ºä¸åœ¨DNSå§”æ‰˜è€…å†…å‘å¸ƒDNSSECçš„ä¿¡ä»»é”šç‚¹ï¼Œä¸ DS è®°å½•ä½¿ç”¨ç›¸åŒçš„æ ¼å¼ï¼Œ<a href="https://tools.ietf.org/html/rfc5074">RFC 5074</a> ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨è¿™äº›è®°å½•ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=DNAME_%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">DNAME</a></td><td>39</td><td><a href="https://tools.ietf.org/html/rfc2672">RFC 2672</a></td><td>ä»£è¡¨åç§°</td><td>DNAME ä¼šä¸ºåç§°å’Œå…¶å­åç§°äº§ç”Ÿåˆ«åï¼Œä¸ CNAME ä¸åŒï¼Œåœ¨å…¶æ ‡ç­¾åˆ«åä¸ä¼šé‡å¤ã€‚ä½†ä¸ CNAME è®°å½•ç›¸åŒçš„æ˜¯ï¼ŒDNSå°†ä¼šç»§ç»­å°è¯•æŸ¥æ‰¾æ–°çš„åå­—ã€‚</td></tr><tr><td>DNSKEY</td><td>48</td><td><a href="https://tools.ietf.org/html/rfc4034">RFC 4034</a></td><td>DNS å…³é”®è®°å½•</td><td>äºDNSSECå†…ä½¿ç”¨çš„å…³é”®è®°å½•ï¼Œä¸ KEY ä½¿ç”¨ç›¸åŒæ ¼å¼ã€‚</td></tr><tr><td>DS</td><td>43</td><td><a href="https://tools.ietf.org/html/rfc4034">RFC 4034</a></td><td>å§”æ‰˜ç­¾å‘è€…</td><td>æ­¤è®°å½•ç”¨äºé‰´å®šDNSSECå·²æˆæƒåŒºåŸŸçš„ç­¾åå¯†é’¥ã€‚</td></tr><tr><td>HIP</td><td>55</td><td><a href="https://tools.ietf.org/html/rfc5205">RFC 5205</a></td><td>ä¸»æœºé‰´å®šåè®®</td><td>å°†ç«¯ç‚¹æ ‡è¯†ç¬¦åŠIP åœ°å€å®šä½çš„åˆ†å¼€çš„æ–¹æ³•ã€‚</td></tr><tr><td>IPSECKEY</td><td>45</td><td><a href="https://tools.ietf.org/html/rfc4025">RFC 4025</a></td><td>IPSEC å¯†é’¥</td><td>ä¸ <a href="https://zh.wikipedia.org/wiki/IPSEC">IPSEC</a> åŒæ—¶ä½¿ç”¨çš„å¯†é’¥è®°å½•ã€‚</td></tr><tr><td>KEY</td><td>25</td><td><a href="https://tools.ietf.org/html/rfc2535">RFC 2535</a>[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-1">1]</a><a href="https://tools.ietf.org/html/rfc2930">RFC 2930</a>[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-rfc3445_sec1_def-2">2]</a></td><td>å…³é”®è®°å½•</td><td>åªç”¨äº SIG(0)ï¼ˆ<a href="https://tools.ietf.org/html/rfc2931">RFC 2931</a>ï¼‰åŠ TKEYï¼ˆ<a href="https://tools.ietf.org/html/rfc2930">RFC 2930</a>ï¼‰ã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-3">3]</a><a href="https://tools.ietf.org/html/rfc3455">RFC 3455</a> å¦å®šå…¶ä½œä¸ºåº”ç”¨ç¨‹åºé”®åŠé™åˆ¶DNSSECçš„ä½¿ç”¨ã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-rfc3445_sec1_subtype-4">4]</a><a href="https://tools.ietf.org/html/rfc3755">RFC 3755</a> æŒ‡å®šäº† DNSKEY ä½œä¸ºDNSSECçš„ä»£æ›¿ã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-rfc3755_sec3-5">5]</a></td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=LOC%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">LOCè®°å½•</a>ï¼ˆLOC recordï¼‰</td><td>29</td><td><a href="https://tools.ietf.org/html/rfc1876">RFC 1876</a></td><td>ä½ç½®è®°å½•</td><td>å°†ä¸€ä¸ªåŸŸåæŒ‡å®šåœ°ç†ä½ç½®ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/wiki/MX%E8%AE%B0%E5%BD%95">MXè®°å½•</a>ï¼ˆMX recordï¼‰</td><td>15</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>ç”µé‚®äº¤äº’è®°å½•</td><td>å¼•å¯¼åŸŸååˆ°è¯¥åŸŸåçš„<a href="https://zh.wikipedia.org/w/index.php?title=%E9%83%B5%E4%BB%B6%E5%82%B3%E8%BC%B8%E4%BB%A3%E7%90%86&amp;action=edit&amp;redlink=1">é‚®ä»¶ä¼ è¾“ä»£ç†</a>ï¼ˆMTA, Message Transfer Agentsï¼‰åˆ—è¡¨ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=NAPTR%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">NAPTRè®°å½•</a>ï¼ˆNAPTR recordï¼‰</td><td>35</td><td><a href="https://tools.ietf.org/html/rfc3403">RFC 3403</a></td><td>å‘½åç®¡ç†æŒ‡é’ˆ</td><td>å…è®¸åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„åŸŸåé‡å†™ä½¿å…¶èƒ½å¤Ÿä½œä¸º <a href="https://zh.wikipedia.org/wiki/URI">URI</a>ã€è¿›ä¸€æ­¥åŸŸåæŸ¥æ‰¾ç­‰ã€‚</td></tr><tr><td>NS</td><td>2</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>åç§°æœåŠ¡å™¨è®°å½•</td><td>å§”æ‰˜<a href="https://zh.wikipedia.org/w/index.php?title=DNS%E5%8D%80%E5%9F%9F&amp;action=edit&amp;redlink=1">DNSåŒºåŸŸ</a>ï¼ˆDNS zoneï¼‰ä½¿ç”¨å·²æä¾›çš„æƒå¨åŸŸåæœåŠ¡å™¨ã€‚</td></tr><tr><td>NSEC</td><td>47</td><td><a href="https://tools.ietf.org/html/rfc4034">RFC 4034</a></td><td>ä¸‹ä¸€ä»£å®‰å…¨è®°å½•</td><td>DNSSEC çš„ä¸€éƒ¨åˆ† â€” ç”¨æ¥éªŒè¯ä¸€ä¸ªæœªå­˜åœ¨çš„æœåŠ¡å™¨ï¼Œä½¿ç”¨ä¸ NXTï¼ˆå·²è¿‡æ—¶ï¼‰è®°å½•çš„æ ¼å¼ã€‚</td></tr><tr><td>NSEC3</td><td>50</td><td><a href="https://tools.ietf.org/html/rfc5155">RFC 5155</a></td><td>NSEC è®°å½•ç¬¬ä¸‰ç‰ˆ</td><td>ç”¨ä½œå…è®¸æœªç»å…è®¸çš„åŒºåŸŸè¡Œèµ°ä»¥è¯æ˜åç§°ä¸å­˜åœ¨æ€§çš„ DNSSEC æ‰©å±•ã€‚</td></tr><tr><td>NSEC3PARAM</td><td>51</td><td><a href="https://tools.ietf.org/html/rfc5155">RFC 5155</a></td><td>NSEC3 å‚æ•°</td><td>ä¸ NSEC3 åŒæ—¶ä½¿ç”¨çš„å‚æ•°è®°å½•ã€‚</td></tr><tr><td>OPENPGPKEY</td><td>61</td><td><a href="https://tools.ietf.org/html/rfc7929">RFC 7929</a></td><td>OpenPGPå…¬é’¥è®°å½•</td><td>åŸºäºDNSçš„åŸŸåå®ä½“è®¤è¯æ–¹æ³•ï¼Œç”¨äºä½¿ç”¨OPENPGPKEY DNSèµ„æºè®°å½•åœ¨ç‰¹å®šç”µå­é‚®ä»¶åœ°å€çš„DNSä¸­å‘å¸ƒå’Œå®šä½OpenPGPå…¬é’¥ã€‚</td></tr><tr><td>PTR</td><td>12</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>æŒ‡é’ˆè®°å½•</td><td>å¼•å¯¼è‡³ä¸€ä¸ª<a href="https://zh.wikipedia.org/w/index.php?title=%E8%A6%8F%E7%AF%84%E5%90%8D%E7%A8%B1&amp;action=edit&amp;redlink=1">è§„èŒƒåç§°</a>ï¼ˆCanonical Nameï¼‰ã€‚ä¸ CNAME è®°å½•ä¸åŒï¼ŒDNSâ€œä¸ä¼šâ€è¿›è¡Œè¿›ç¨‹ï¼Œåªä¼šä¼ å›åç§°ã€‚æœ€å¸¸ç”¨æ¥è¿è¡Œ<a href="https://zh.wikipedia.org/w/index.php?title=%E5%8F%8D%E5%90%91_DNS_%E6%9F%A5%E6%89%BE&amp;action=edit&amp;redlink=1">åå‘ DNS æŸ¥æ‰¾</a>ï¼Œå…¶ä»–ç”¨é€”åŒ…æ‹¬å¼•ä½œ <a href="https://zh.wikipedia.org/w/index.php?title=DNS-SD&amp;action=edit&amp;redlink=1">DNS-SD</a>ã€‚</td></tr><tr><td>RRSIG</td><td>46</td><td><a href="https://tools.ietf.org/html/rfc4034">RFC 4034</a></td><td>DNSSEC è¯ä¹¦</td><td>DNSSEC å®‰å…¨è®°å½•é›†è¯ä¹¦ï¼Œä¸ SIG è®°å½•ä½¿ç”¨ç›¸åŒçš„æ ¼å¼ã€‚</td></tr><tr><td>RP</td><td>17</td><td><a href="https://tools.ietf.org/html/rfc1183">RFC 1183</a></td><td>è´Ÿè´£äºº</td><td>æœ‰å…³åŸŸåè´Ÿè´£äººçš„ä¿¡æ¯ï¼Œç”µé‚®åœ°å€çš„ <strong>@</strong> é€šå¸¸å†™ä¸º <strong>a</strong>ã€‚</td></tr><tr><td>SIG</td><td>24</td><td><a href="https://tools.ietf.org/html/rfc2535">RFC 2535</a></td><td>è¯ä¹¦</td><td>SIG(0)ï¼ˆ<a href="https://tools.ietf.org/html/rfc2931">RFC 2931</a>ï¼‰åŠ TKEYï¼ˆ<a href="https://tools.ietf.org/html/rfc2930">RFC 2930</a>ï¼‰ä½¿ç”¨çš„è¯ä¹¦ã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-rfc3755_sec3-5">5]</a><a href="https://tools.ietf.org/html/rfc3755">RFC 3755</a> designated RRSIG as the replacement for SIG for use within DNSSEC.[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-rfc3755_sec3-5">5]</a></td></tr><tr><td>SOA</td><td>6</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>æƒå¨è®°å½•çš„èµ·å§‹</td><td>æŒ‡å®šæœ‰å…³DNSåŒºåŸŸçš„æƒå¨æ€§ä¿¡æ¯ï¼ŒåŒ…å«ä¸»è¦åç§°æœåŠ¡å™¨ã€åŸŸåç®¡ç†å‘˜çš„ç”µé‚®åœ°å€ã€åŸŸåçš„æµæ°´å¼ç¼–å·ã€å’Œå‡ ä¸ªæœ‰å…³åˆ·æ–°åŒºåŸŸçš„å®šæ—¶å™¨ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/wiki/Sender_Policy_Framework">SPF</a></td><td>99</td><td><a href="https://tools.ietf.org/html/rfc4408">RFC 4408</a></td><td>SPF è®°å½•</td><td>ä½œä¸º SPF åè®®çš„ä¸€éƒ¨åˆ†ï¼Œä¼˜å…ˆä½œä¸ºå…ˆå‰åœ¨ TXT å­˜å‚¨ SPF æ•°æ®çš„ä¸´æ—¶åšæ³•ï¼Œä½¿ç”¨ä¸å…ˆå‰åœ¨ TXT å­˜å‚¨çš„æ ¼å¼ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=SRV%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">SRVè®°å½•</a>ï¼ˆSRV recordï¼‰</td><td>33</td><td><a href="https://tools.ietf.org/html/rfc2782">RFC 2782</a></td><td>æœåŠ¡å®šä½å™¨</td><td>å¹¿ä¹‰ä¸ºæœåŠ¡å®šä½è®°å½•ï¼Œè¢«æ–°å¼åè®®ä½¿ç”¨è€Œé¿å…äº§ç”Ÿç‰¹å®šåè®®çš„è®°å½•ï¼Œä¾‹å¦‚ï¼šMX è®°å½•ã€‚</td></tr><tr><td>SSHFP</td><td>44</td><td><a href="https://tools.ietf.org/html/rfc4255">RFC 4255</a></td><td>SSH å…¬å…±å¯†é’¥æŒ‡çº¹</td><td>DNS ç³»ç»Ÿç”¨æ¥å‘å¸ƒ <a href="https://zh.wikipedia.org/wiki/SSH">SSH</a> å…¬å…±å¯†é’¥æŒ‡çº¹çš„èµ„æºè®°å½•ï¼Œä»¥ç”¨ä½œè¾…åŠ©éªŒè¯æœåŠ¡å™¨çš„çœŸå®æ€§ã€‚</td></tr><tr><td>TA</td><td>32768</td><td>æ— </td><td>DNSSEC ä¿¡ä»»å½“å±€</td><td>DNSSEC ä¸€éƒ¨åˆ†æ— ç­¾è®¢ DNS æ ¹ç›®å½•çš„éƒ¨ç½²ææ¡ˆï¼Œï¼Œä½¿ç”¨ä¸ DS è®°å½•ç›¸åŒçš„æ ¼å¼[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-6">6]</a>[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-7">7]</a>ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=TKEY%E8%A8%98%E9%8C%84&amp;action=edit&amp;redlink=1">TKEYè®°å½•</a>ï¼ˆTKEY recordï¼‰</td><td>249</td><td><a href="https://tools.ietf.org/html/rfc2930">RFC 2930</a></td><td>ç§˜å¯†å¯†é’¥è®°å½•</td><td>ä¸º<a href="https://zh.wikipedia.org/w/index.php?title=TSIG&amp;action=edit&amp;redlink=1">TSIG</a>æä¾›å¯†é’¥ææ–™çš„å…¶ä¸­ä¸€ç±»æ–¹æ³•ï¼Œthat is åœ¨å…¬å…±å¯†é’¥ä¸‹åŠ å¯†çš„ accompanying KEY RRã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-8">8]</a></td></tr><tr><td>TSIG</td><td>250</td><td><a href="https://tools.ietf.org/html/rfc2845">RFC 2845</a></td><td>äº¤æ˜“è¯ä¹¦</td><td>ç”¨ä»¥è®¤è¯åŠ¨æ€æ›´æ–°ï¼ˆDynamic DNSï¼‰æ˜¯æ¥è‡ªåˆæ³•çš„å®¢æˆ·ç«¯ï¼Œæˆ–ä¸ DNSSEC ä¸€æ ·æ˜¯éªŒè¯å›åº”æ˜¯å¦æ¥è‡ªåˆæ³•çš„é€’å½’åç§°æœåŠ¡å™¨ã€‚[<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8#cite_note-9">9]</a></td></tr><tr><td>TXT</td><td>16</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>æ–‡æœ¬è®°å½•</td><td>æœ€åˆæ˜¯ä¸ºä»»æ„å¯è¯»çš„æ–‡æœ¬ DNS è®°å½•ã€‚è‡ª1990å¹´èµ·ï¼Œäº›è®°å½•æ›´ç»å¸¸åœ°å¸¦æœ‰æœºè¯»æ•°æ®ï¼Œä»¥ <a href="https://tools.ietf.org/html/rfc1464">RFC 1464</a> æŒ‡å®šï¼š<a href="https://zh.wikipedia.org/wiki/%E6%9C%BA%E4%BC%9A%E6%80%A7%E5%8A%A0%E5%AF%86">æœºä¼šæ€§åŠ å¯†</a>ï¼ˆopportunistic encryptionï¼‰ã€<a href="https://zh.wikipedia.org/wiki/Sender_Policy_Framework">Sender Policy Framework</a>ï¼ˆè™½ç„¶è¿™ä¸ªä¸´æ—¶ä½¿ç”¨çš„ TXT è®°å½•åœ¨ SPF è®°å½•æ¨å‡ºåä¸è¢«æ¨èï¼‰ã€DomainKeysã€DNS-SDç­‰ã€‚</td></tr><tr><td>URI</td><td>256</td><td><a href="https://tools.ietf.org/html/rfc7553">RFC 7553</a></td><td>ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</td><td>å¯ç”¨äºå‘å¸ƒä»ä¸»æœºååˆ°URIçš„æ˜ å°„ã€‚</td></tr></tbody></table><p><strong>å…¶ä»–ç±»å‹åŠä¼ªèµ„æºè®°å½•</strong></p><p>å…¶ä»–ç±»å‹çš„èµ„æºè®°å½•ç®€å•åœ°æä¾›ä¸€äº›ç±»å‹çš„æ¶ˆæ¯ï¼ˆå¦‚ï¼šHINFO è®°å½•æä¾›ç”µè„‘æˆ–æ“ä½œç³»ç»Ÿçš„ç±»å‹ï¼‰ï¼Œæˆ–ä¼ å›å®éªŒä¸­ä¹‹åŠŸèƒ½çš„æ•°æ®ã€‚â€œtypeâ€å­—æ®µä¹Ÿä½¿ç”¨äºå…¶ä»–åè®®ä½œå„ç§æ“ä½œã€‚</p><table><thead><tr><th>ä»£ç </th><th>å·ç </th><th>å®šä¹‰çš„ RFC</th><th>æè¿°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>*</td><td>255</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>æ‰€æœ‰ç¼“å­˜çš„è®°å½•</td><td>ä¼ å›æ‰€æœ‰æœåŠ¡å™¨å·²çŸ¥ç±»å‹çš„è®°å½•ã€‚å¦‚æœæœåŠ¡å™¨æœªæœ‰ä»»ä½•å…³äºåç§°çš„è®°å½•ï¼Œè¯¥è¯·æ±‚å°†è¢«è½¬å‘ã€‚è€Œä¼ å›çš„è®°å½•æœªå¿…å®Œå…¨å®Œæˆï¼Œä¾‹å¦‚ï¼šå½“ä¸€ä¸ªåç§°æœ‰ A åŠ MX ç±»å‹çš„è®°å½•æ—¶ï¼Œä½†æœåŠ¡å™¨å·²ç¼“å­˜äº† A è®°å½•ï¼Œå°±åªæœ‰ A è®°å½•ä¼šè¢«ä¼ å›ã€‚</td></tr><tr><td><a href="https://zh.wikipedia.org/w/index.php?title=AXFR&amp;action=edit&amp;redlink=1">AXFR</a></td><td>252</td><td><a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td><td>å…¨åŸŸè½¬ç§»</td><td>ç”±ä¸»åŸŸåæœåŠ¡å™¨è½¬ç§»æ•´ä¸ªåŒºåŸŸæ–‡ä»¶è‡³äºŒçº§åŸŸåæœåŠ¡å™¨ã€‚</td></tr><tr><td>IXFR</td><td>251</td><td><a href="https://tools.ietf.org/html/rfc1995">RFC 1995</a></td><td>å¢é‡åŒºåŸŸè½¬ç§»</td><td>è¯·æ±‚åªæœ‰ä¸å…ˆå‰æµæ°´å¼ç¼–å·ä¸åŒçš„ç‰¹å®šåŒºåŸŸçš„åŒºåŸŸè½¬ç§»ã€‚æ­¤è¯·æ±‚æœ‰æœºä¼šè¢«æ‹’ç»ï¼Œå¦‚æœæƒå¨æœåŠ¡å™¨ç”±äºé…ç½®æˆ–ç¼ºä¹å¿…è¦çš„æ•°æ®è€Œæ— æ³•å±¥è¡Œè¯·æ±‚ï¼Œä¸€ä¸ªå®Œæ•´çš„ï¼ˆAXFRï¼‰ä¼šè¢«å‘é€ä»¥ä½œå›åº”ã€‚</td></tr><tr><td>OPT</td><td>41</td><td><a href="https://tools.ietf.org/html/rfc2671">RFC 2671</a></td><td>é€‰é¡¹</td><td>è¿™æ˜¯ä¸€ä¸ªâ€œä¼ª DNSè®°å½•ç±»å‹â€ä»¥æ”¯æŒ <a href="https://zh.wikipedia.org/w/index.php?title=EDNS&amp;action=edit&amp;redlink=1">EDNS</a>ã€‚</td></tr></tbody></table><p><strong>(3)ã€æŸ¥è¯¢ç±»</strong></p><p>ä¸€èˆ¬ä¸ºIN ï¼Œå³ Internetæ•°æ®.</p><h2 id="å››ã€èµ„æºè®°å½•-RR-åŒºåŸŸ">å››ã€èµ„æºè®°å½•(RR)åŒºåŸŸ</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1969922975.png" alt="image-20211117212551579.png"></p><p>è¯¥åŒºåŸŸæœ‰ä¸‰ä¸ªï¼Œä½†æ ¼å¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸‰ä¸ªåŒºåŸŸåˆ†åˆ«æ˜¯ï¼šå›ç­”åŒºåŸŸï¼ŒæˆæƒåŒºåŸŸå’Œé™„åŠ åŒºåŸŸã€‚</p><p><strong>ï¼ˆ1ï¼‰ åŸŸåNAMEï¼ˆ2å­—èŠ‚æˆ–ä¸å®šé•¿ï¼‰</strong>ï¼šå®ƒçš„æ ¼å¼å’ŒQueriesåŒºåŸŸçš„æŸ¥è¯¢åå­—å­—æ®µæ˜¯ä¸€æ ·çš„ã€‚æœ‰ä¸€ç‚¹ä¸åŒå°±æ˜¯ï¼Œå½“æŠ¥æ–‡ä¸­åŸŸåé‡å¤å‡ºç°çš„æ—¶å€™ï¼Œè¯¥å­—æ®µä½¿ç”¨2ä¸ªå­—èŠ‚çš„åç§»æŒ‡é’ˆæ¥è¡¨ç¤ºã€‚æ¯”å¦‚ï¼Œåœ¨èµ„æºè®°å½•ä¸­ï¼ŒåŸŸåé€šå¸¸æ˜¯æŸ¥è¯¢é—®é¢˜éƒ¨åˆ†çš„åŸŸåçš„é‡å¤ï¼Œå› æ­¤ç”¨2å­—èŠ‚çš„æŒ‡é’ˆæ¥è¡¨ç¤ºï¼Œå…·ä½“æ ¼å¼æ˜¯æœ€å‰é¢çš„ä¸¤ä¸ªé«˜ä½æ˜¯ 11ï¼Œç”¨äºè¯†åˆ«æŒ‡é’ˆã€‚å…¶ä½™çš„14ä½ä»DNSæŠ¥æ–‡çš„å¼€å§‹å¤„è®¡æ•°ï¼ˆä»0å¼€å§‹ï¼‰ï¼ŒæŒ‡å‡ºè¯¥æŠ¥æ–‡ä¸­çš„ç›¸åº”å­—èŠ‚æ•°ã€‚</p><p><strong>ï¼ˆ2ï¼‰ æŸ¥è¯¢ç±»å‹TYPE</strong> ï¼šè¡¨æ˜èµ„æºçºªå½•çš„ç±»å‹ï¼ŒæŒ‡å‡ºRDATAæ•°æ®çš„å«ä¹‰ã€‚</p><p><strong>ï¼ˆ3ï¼‰æŸ¥è¯¢ç±»CLASS</strong> ï¼šå¯¹äºInternetä¿¡æ¯ï¼Œæ€»æ˜¯1ï¼Œä»£è¡¨INã€‚è¡¨ç¤ºRDATAçš„ç±»ã€‚</p><p><strong>ï¼ˆ4ï¼‰ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰</strong>ï¼š4å­—èŠ‚æ— ç¬¦å·æ•´æ•°è¡¨ç¤ºèµ„æºè®°å½•å¯ä»¥ç¼“å­˜çš„æ—¶é—´ã€‚ä»¥ç§’ä¸ºå•ä½ï¼Œè¡¨ç¤ºçš„æ˜¯èµ„æºè®°å½•çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸€èˆ¬ç”¨äºå½“åœ°å€è§£æç¨‹åºå–å‡ºèµ„æºè®°å½•åå†³å®šä¿å­˜åŠä½¿ç”¨ç¼“å­˜æ•°æ®çš„æ—¶é—´ï¼Œå®ƒåŒæ—¶ä¹Ÿå¯ä»¥è¡¨æ˜è¯¥èµ„æºè®°å½•çš„ç¨³å®šç¨‹åº¦ï¼Œæä¸ºç¨³å®šçš„ä¿¡æ¯ä¼šè¢«åˆ†é…ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼ˆæ¯”å¦‚86400ï¼Œè¿™æ˜¯ä¸€å¤©çš„ç§’æ•°ï¼‰ã€‚0ä»£è¡¨åªèƒ½è¢«ä¼ è¾“ï¼Œä½†æ˜¯ä¸èƒ½è¢«ç¼“å­˜ã€‚TTL æ˜¯ DNS è®°å½•ä¸­çš„ä¸€ä¸ªå€¼ï¼Œå¯å†³å®šå¯¹è¯¥è®°å½•æ‰€åšçš„åç»­æ›´æ”¹éœ€è¦å¤šå°‘ç§’æ‰ä¼šç”Ÿæ•ˆã€‚ç½‘åŸŸçš„æ¯æ¡ DNS è®°å½•ï¼ˆå¦‚ MX è®°å½•ã€CNAME è®°å½•ç­‰ï¼‰éƒ½æœ‰ä¸€ä¸ª TTL å€¼ã€‚ä¸€æ¡è®°å½•ç›®å‰æ‰€è®¾çš„ TTL å†³å®šäº†æ‚¨ç°åœ¨æ‰€åšçš„ä»»ä½•æ›´æ”¹éœ€è¦å¤šä¹…æ‰ä¼šç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€æ¡è®°å½•çš„ TTL ä¸º 86400 ç§’ï¼Œåˆ™å¯¹è¯¥è®°å½•çš„æ›´æ”¹æœ€å¤šéœ€è¦ 24 å°æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚è¯·æ³¨æ„ï¼Œæ›´æ”¹è®°å½•çš„ TTL ä¼šå½±å“ä¹‹åçš„æ‰€æœ‰æ›´æ”¹éœ€è¦å¤šä¹…æ‰ä¼šç”Ÿæ•ˆã€‚æˆ‘ä»¬å»ºè®®å°† TTL å€¼è®¾ç½®ä¸º 3600ï¼Œå³è®©æ•´ä¸ªäº’è”ç½‘ä¸­çš„æœåŠ¡å™¨æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡è¯¥è®°å½•çš„æ›´æ–°æƒ…å†µã€‚è¾ƒçŸ­çš„ TTL åœ¨ä¹‹å‰çš„æœ‰æ•ˆæœŸåˆ°æœŸåæ‰ä¼šç”Ÿæ•ˆã€‚è¿™æ„å‘³ç€ï¼Œä¸‹æ¬¡æ›´æ–°è¯¥è®°å½•æ—¶ï¼Œæ‚¨çš„æ›´æ”¹æœ€å¤šè¦ä¸€ä¸ªå°æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚è¦ä½¿åç»­çš„æ›´æ”¹æ›´å¿«ç”Ÿæ•ˆï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å¿«é€Ÿè¿˜åŸä¸€é¡¹æ›´æ”¹ï¼‰ï¼Œåˆ™å¯ä»¥è®¾ç½®è¾ƒçŸ­çš„ TTL å€¼ï¼Œå¦‚ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚æ­£ç¡®é…ç½®è®°å½•åï¼Œæˆ‘ä»¬å»ºè®®å°† TTL å€¼è®¾ç½®ä¸º 86400ï¼Œå³è®©æ•´ä¸ªäº’è”ç½‘ä¸­çš„æœåŠ¡å™¨æ¯ 24 å°æ—¶æ£€æŸ¥ä¸€æ¬¡è®°å½•çš„æ›´æ–°æƒ…å†µã€‚</p><p><strong>ï¼ˆ5ï¼‰ èµ„æºæ•°æ®é•¿åº¦LENGTH</strong>ï¼š2ä¸ªå­—èŠ‚æ— ç¬¦å·æ•´æ•°è¡¨ç¤ºRDATAçš„é•¿åº¦</p><p><strong>ï¼ˆ6ï¼‰èµ„æºæ•°æ® RDATA</strong> ï¼š è¯¥å­—æ®µæ˜¯ä¸€ä¸ªå¯å˜é•¿å­—æ®µï¼Œä¸å®šé•¿å­—ç¬¦ä¸²æ¥è¡¨ç¤ºè®°å½•ï¼Œæ ¼å¼ä¸TYPEå’ŒCLASSæœ‰å…³ã€‚æ¯”å¦‚ï¼ŒTYPEæ˜¯Aï¼ŒCLASS æ˜¯ INï¼Œé‚£ä¹ˆRDATAå°±æ˜¯ä¸€ä¸ª4ä¸ªå­—èŠ‚çš„ARPAç½‘ç»œåœ°å€ã€‚è¡¨ç¤ºæŒ‰ç…§æŸ¥è¯¢æ®µçš„è¦æ±‚è¿”å›çš„ç›¸å…³èµ„æºè®°å½•çš„æ•°æ®ã€‚å¯ä»¥æ˜¯Addressï¼ˆè¡¨æ˜æŸ¥è¯¢æŠ¥æ–‡æƒ³è¦çš„å›åº”æ˜¯ä¸€ä¸ªIPåœ°å€ï¼‰æˆ–è€…CNAMEï¼ˆè¡¨æ˜æŸ¥è¯¢æŠ¥æ–‡æƒ³è¦çš„å›åº”æ˜¯ä¸€ä¸ªè§„èŒƒä¸»æœºåï¼‰ç­‰ã€‚</p><h2 id="äº”ã€å‚è€ƒæ–‡æ¡£">äº”ã€å‚è€ƒæ–‡æ¡£</h2><p>æ„Ÿè°¢ä»¥ä¸‹å¤§ä½¬æ–‡ç« æ”¯æŒï¼ï¼ï¼</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/answer3lin/article/details/84638845">https://blog.csdn.net/answer3lin/article/details/84638845</a><br>å‚è€ƒè¿æ¥ï¼š<a href="https://blog.csdn.net/weixin_45975575/article/details/115561913">https://blog.csdn.net/weixin_45975575/article/details/115561913</a></p>]]></content>
      
      
      <categories>
          
          <category> tcpip </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows Server DNS æœåŠ¡å™¨è¿ç§»è‡³F5 GTM</title>
      <link href="/posts/398687b5ca7e.html"/>
      <url>/posts/398687b5ca7e.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€èƒŒæ™¯ä»‹ç»">1ã€èƒŒæ™¯ä»‹ç»</h2><p>ç”¨æˆ·å½“å‰ä½¿ç”¨ Windows Server DNS æœåŠ¡å™¨åš DNS åŸŸåè§£æï¼Œç”±äºç¡¬ä»¶è®¾å¤‡èµ„æºæœ‰é™ï¼Œæ‰€ä»¥æƒ³ä½¿ç”¨F5 GTM è¿›è¡Œæ›¿æ¢æ‰ Windows Server DNSæœåŠ¡å™¨ã€‚</p><h2 id="2ã€ç¯å¢ƒä»‹ç»">2ã€ç¯å¢ƒä»‹ç»</h2><ul><li>Windows Server 2016</li><li>F5 GTM</li></ul><h2 id="3ã€Windows-Server-DNS-æœåŠ¡å™¨è¿ç§»é…ç½®">3ã€Windows Server DNS æœåŠ¡å™¨è¿ç§»é…ç½®</h2><h3 id="ï¼ˆ1ï¼‰æ­£å‘åŒºåŸŸæ•°æ®ä¼ é€é…ç½®">ï¼ˆ1ï¼‰æ­£å‘åŒºåŸŸæ•°æ®ä¼ é€é…ç½®</h3><p>â€‹ç”¨äºä¼ é€æ­£å‘åŒºåŸŸèµ„æºè®°å½•ç»™ F5 GTM ã€‚é…ç½®å¦‚ä¸‹ï¼š<br>â€‹é€‰æ‹©è¦ä¼ é€åŒºåŸŸè®°å½•çš„åŒºåŸŸï¼Œå³é”®é€‰æ‹©å±æ€§ï¼Œæ‰¾åˆ°åŒºåŸŸä¼ é€é€‰é¡¹å¡ï¼Œå‹¾é€‰å…è®¸åŒºåŸŸä¼ é€ï¼Œåªå…è®¸åˆ°ä¸‹åˆ—æœåŠ¡å™¨ï¼Œåœ°å€æ·»åŠ F5 GTM åœ°å€ï¼Œç‚¹å‡»åº”ç”¨å’Œç¡®å®šã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/2327317323.png" alt="image-20211112204921191.png"></p><h3 id="ï¼ˆ2ï¼‰åå‘åŒºåŸŸæ•°æ®ä¼ é€é…ç½®">ï¼ˆ2ï¼‰åå‘åŒºåŸŸæ•°æ®ä¼ é€é…ç½®</h3><p>â€‹ç”¨äºä¼ é€åå‘åŒºåŸŸèµ„æºè®°å½•ç»™ F5 GTM ã€‚é…ç½®å¦‚ä¸‹ï¼š<br>â€‹é€‰æ‹©è¦ä¼ é€åŒºåŸŸè®°å½•çš„åŒºåŸŸï¼Œå³é”®é€‰æ‹©å±æ€§ï¼Œæ‰¾åˆ°åŒºåŸŸä¼ é€é€‰é¡¹å¡ï¼Œå‹¾é€‰å…è®¸åŒºåŸŸä¼ é€ï¼Œåªå…è®¸åˆ°ä¸‹åˆ—æœåŠ¡å™¨ï¼Œåœ°å€æ·»åŠ F5 GTM åœ°å€ï¼Œç‚¹å‡»åº”ç”¨å’Œç¡®å®šã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/3269806770.png" alt="image-20211112205103225.png"></p><h2 id="4ã€F5-GTM-é…ç½®">4ã€F5 GTM é…ç½®</h2><h3 id="ï¼ˆ1ï¼‰é…ç½®æ­£å‘èµ„æºè®°å½•">ï¼ˆ1ï¼‰é…ç½®æ­£å‘èµ„æºè®°å½•</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å‚æ•°è§£è¯»</span></span><br><span class="line">View ï¼šexternal ï¼›<span class="comment"># viewé€‰æ‹©é»˜è®¤ã€‚</span></span><br><span class="line">Zone Name ï¼šåŸŸåï¼›<span class="comment">#è¾“å…¥å¾…ä¼ é€çš„åŒºåŸŸåç§°ã€‚</span></span><br><span class="line">Zone Type ï¼šMaster ï¼›<span class="comment">#è¾“å…¥åŒºåŸŸç±»å‹ï¼Œè¿™é‡Œä¸ºmasterã€‚</span></span><br><span class="line">Records Creation Method ï¼šTratransfer_fan.pngnsfer Form Server ï¼›<span class="comment">#èµ„æºè®°å½•åˆ›å»ºæ–¹å¼ï¼Œè¿™é‡Œé€‰æ‹©ä»windows server dnsæœåŠ¡å™¨ä¼ é€ã€‚</span></span><br><span class="line">Source Server ï¼š Windows Server DNS IP Address ï¼›<span class="comment">#è¾“å…¥windows server dns æœåŠ¡å™¨çš„IP åœ°å€ã€‚</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1151535878.png" alt="transfer_zheng.png"></p><h3 id="ï¼ˆ2ï¼‰åå‘åŒºåŸŸæ•°æ®è®°å½•è¿ç§»">ï¼ˆ2ï¼‰åå‘åŒºåŸŸæ•°æ®è®°å½•è¿ç§»</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å‚æ•°è§£è¯»</span></span><br><span class="line">View ï¼šexternal ï¼›<span class="comment">#viewé€‰æ‹©é»˜è®¤ã€‚</span></span><br><span class="line">Zone Name ï¼šåŸŸåï¼›  <span class="comment">#è¾“å…¥å¾…ä¼ é€çš„åŒºåŸŸåç§°ã€‚</span></span><br><span class="line">Zone Type ï¼šMaster ï¼›     <span class="comment">#è¾“å…¥åŒºåŸŸç±»å‹ï¼Œè¿™é‡Œä¸ºmasterã€‚</span></span><br><span class="line">Records Creation Method ï¼šTransfer Form Server ï¼›<span class="comment">#èµ„æºè®°å½•åˆ›å»ºæ–¹å¼ï¼Œè¿™é‡Œé€‰æ‹©ä»windows server dnsæœåŠ¡å™¨ä¼ é€ã€‚</span></span><br><span class="line">Source Server ï¼š Windows Server DNS IP Address ï¼›<span class="comment">#è¾“å…¥windows server dns æœåŠ¡å™¨çš„IP åœ°å€ã€‚</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/1444548216.png" alt="transfer_fan.png"></p><h3 id="ï¼ˆ3ï¼‰åŒºåŸŸè½¬å‘å™¨é…ç½®è¿ç§»">ï¼ˆ3ï¼‰åŒºåŸŸè½¬å‘å™¨é…ç½®è¿ç§»</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å‚æ•°è§£è¯»</span></span><br><span class="line">View ï¼šexternal ï¼› <span class="comment">#viewé€‰æ‹©é»˜è®¤ã€‚</span></span><br><span class="line">Zone Name ï¼šåŸŸåï¼›    <span class="comment">#è¾“å…¥å¾…ä¼ é€çš„åŒºåŸŸåç§°ã€‚</span></span><br><span class="line">Zone Type ï¼šMaster ï¼› <span class="comment">#è¾“å…¥åŒºåŸŸç±»å‹ï¼Œè¿™é‡Œä¸ºForwardã€‚</span></span><br><span class="line">Optionsã€€ï¼šé…ç½®è½¬å‘ ï¼› <span class="comment">#forwardersé‡Œå¡«å†™è½¬å‘è‡³æŒ‡å®šIPåœ°å€</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/983966928.png" alt="transfer_forward.png"></p><h3 id="ï¼ˆ4ï¼‰å…¨å±€è½¬å‘å™¨é…ç½®è¿ç§»">ï¼ˆ4ï¼‰å…¨å±€è½¬å‘å™¨é…ç½®è¿ç§»</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#named Configuration optionä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š</span></span><br><span class="line">recursion <span class="built_in">yes</span>; <span class="comment">#é»˜è®¤ä¸ºnoï¼Œä¸è¿›è¡Œé€’å½’è§£æï¼Œè¿™é‡Œæ›´æ”¹ä¸ºyesã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># named Configuration å…¨å±€å¢åŠ ä»¥ä¸‹é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">## å¢åŠ aclç­–ç•¥ï¼Œåç§°ä¸º internal ï¼Œåœ°å€èŒƒå›´ä¸ºå…¨éƒ¨åœ°å€</span></span><br><span class="line"></span><br><span class="line">acl <span class="string">&quot;internal&quot;</span> &#123;</span><br><span class="line">0.0.0.0/0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">#named optionå¢åŠ ä»¥ä¸‹é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">##å…è®¸é€’å½’èŒƒå›´ï¼Œè¿™é‡Œä½¿ç”¨è°ƒç”¨ä¸Šé¢çš„åœ°å€ç­–ç•¥ï¼Œå…è®¸å…¨éƒ¨åœ°å€é€’å½’æŸ¥è¯¢ã€‚</span></span><br><span class="line">allow-recursion &#123;</span><br><span class="line">internal;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">#named optionå¢åŠ ä»¥ä¸‹é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">##é…ç½®å…¨å±€è½¬å‘åœ°å€</span></span><br><span class="line">forwarders &#123;</span><br><span class="line">192.168.10.89; <span class="comment">#æ›´æ”¹ä¸ºè¦è½¬å‘çš„åœ°å€</span></span><br><span class="line">192.168.10.90;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/11/2595827661.png" alt="image-20211112211303686.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
            <tag> GTM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xen ç¯å¢ƒé…ç½® F5 BIGIP VE</title>
      <link href="/posts/783579044b9c.html"/>
      <url>/posts/783579044b9c.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç¯å¢ƒä»‹ç»">ä¸€ã€ç¯å¢ƒä»‹ç»</h2><ul><li>Linux Centos 7.9 æ“ä½œç³»ç»Ÿ</li><li>BIGIP-15.1.4-0.0.47.qcow2 é•œåƒ</li></ul><h2 id="äºŒã€ç¯å¢ƒéƒ¨ç½²">äºŒã€ç¯å¢ƒéƒ¨ç½²</h2><p>1ã€å…³é—­é˜²ç«å¢™</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>2ã€å…³é—­selinux</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line"><span class="comment">#éªŒè¯ï¼Œä½¿ç”¨ getenforce å‘½ä»¤ï¼Œå‡ºç°Disabledåˆ™è¡¨ç¤ºå…³é—­ã€‚</span></span><br><span class="line">getenforce </span><br><span class="line">Disabled</span><br></pre></td></tr></table></figure><p>3ã€æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/cpuinfo | grep flags  | egrep -o <span class="string">&#x27;pae|vmx|svm&#x27;</span></span><br><span class="line">pae</span><br><span class="line">pae</span><br><span class="line"></span><br><span class="line"><span class="comment"># vmxè¯´æ˜æ”¯æŒè™šæ‹ŸåŒ– , pae æŒ‡çš„æ˜¯cpuæ”¯æŒåŠè™šæ‹ŸåŒ–ï¼Œvmx æŒ‡çš„æ˜¯æ”¯æŒå…¨è™šæ‹ŸåŒ– cpu ä¸º intel çš„ã€‚svm ä¸º amd çš„ cpuã€‚</span></span><br><span class="line"><span class="comment"># XenåŠè™šæ‹ŸåŒ–ï¼ˆpara Virtualizationï¼‰ï¼šè™šæ‹ŸåŒ–ç³»ç»Ÿä»…æä¾›ä¸­å¤®å¤„ç†å™¨çš„è™šæ‹ŸåŒ–èƒ½åŠ›ï¼Œå°±æ˜¯åªè™šæ‹Ÿcpuï¼Œå…¶ä»–çš„ç¡¬è®¾å¤‡åˆ™ä¸çœŸå®æœºå™¨å…±äº«åŒä¸€ä¸ªç¡¬è®¾å¤‡ï¼Œä½¿ç”¨ç¡¬è®¾å¤‡çš„è™šæ‹ŸåŒ–æ•ˆç‡è¾ƒä½³ï¼Œä½†ç¼ºç‚¹æ˜¯æ“ä½œç³»ç»Ÿå¿…é¡»ä¿®æ”¹å…¶å†…æ ¸æ‰èƒ½å®‰è£…åœ¨åŠè™šæ‹ŸåŒ–ç³»ç»Ÿä¸­çš„è™šæ‹Ÿæœºä¸­ï¼Œå…¶å®å°±æ˜¯å¯¹è™šæ‹Ÿæœºçš„å†…æ ¸åšä¸€äº›æ›´æ”¹ï¼Œè™šæ‹Ÿæœºæ„è¯†åˆ°è‡ªå·±çš„ç¯å¢ƒï¼Œå½“å‘å¸ƒæŸä¸ªå‘½ä»¤æ—¶ä¹Ÿä»…ä»…æ˜¯è¦æ±‚vmmå…³é—­æœ¬è™šæ‹Ÿæœºä½¿ç”¨çš„èµ„æºï¼Œè€Œéè‡ªä½œä¸»å¼ è¦å…³é—­ä¸»æ¿ç”µæºã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#å…¨è™šæ‹ŸåŒ–ï¼ˆFull Virtualizationï¼‰ï¼šå¥½å¤„æ˜¯ç”±äºæ‰€æœ‰çš„ç¡¬è®¾å¤‡éƒ½ç”±è™šæ‹ŸåŒ–ç³»ç»Ÿäº§ç”Ÿï¼Œæ‰€ä»¥åªè¦æ“ä½œç³»ç»Ÿæœ‰æ”¯æŒè™šæ‹ŸåŒ–ç³»ç»Ÿæä¾›çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå°±å¯ä»¥ä¸ä¿®æ”¹æ“ä½œç³»ç»Ÿè®¾ç½®è€Œç›´æ¥é…ç½®è™šæ‹Ÿæœºå¹¶å®‰è£…æ“ä½œç³»ç»Ÿï¼Œä½†ä¹Ÿå› ä¸ºæ‰€æœ‰çš„ç¡¬è®¾å¤‡éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œæ‰€ä»¥å½“è™šæ‹Ÿæœºä¸Šçš„æ“ä½œç³»ç»Ÿè¦è¯»å–æŸä¸€ä¸ªç¡¬è®¾å¤‡æ—¶ï¼Œè¿˜éœ€é€šè¿‡è™šæ‹ŸåŒ–ç³»ç»Ÿæ‰èƒ½è¯»å–çœŸå®çš„ç¡¬è®¾å¤‡ï¼Œå› è€Œæ€§èƒ½æ¯”è¾ƒå·®ã€‚å…¨æ˜¯è™šæ‹Ÿçš„æ€§èƒ½è‚¯å®šå·®ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#ç»è¿‡ä¸Šè¿°æ¯”è¾ƒï¼šå…¨è™šæ‹ŸåŒ–çµæ´»ä½†æ•ˆç‡å¤ªä½ï¼ŒåŠè™šæ‹ŸåŒ–æ•ˆç‡é«˜å»‰ä»·ï¼Œæ‰€ä»¥å¸¸ç”¨çš„è™šæ‹ŸåŒ–è¿˜æ˜¯åŠè™šæ‹ŸåŒ–ã€‚å…¨è™šæ‹ŸåŒ–å¯ä»¥å®‰è£…ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ŒåŠè™šæ‹ŸåŒ–ä¸€èˆ¬åªèƒ½å®‰è£…åŒæ ·çš„æ“ä½œç³»ç»Ÿã€‚å¦‚æœæœ‰éœ€æ±‚ï¼Œå®‰è£…åˆ«çš„æ“ä½œç³»ç»Ÿå°±ä½¿ç”¨å…¨è™šæ‹ŸåŒ–ã€‚</span></span><br></pre></td></tr></table></figure><p>4ã€ä¸‹è½½ Xen å®‰è£…æº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install centos-release-xen</span><br></pre></td></tr></table></figure><p>5ã€ä¿®æ”¹ Xen å®‰è£…æº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i -e <span class="string">&quot;s/enabled=1/enabled=0/g&quot;</span> /etc/yum.repos.d/CentOS-Xen.repo</span><br></pre></td></tr></table></figure><p>6ã€æ›´æ–°å†…æ ¸</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=centos-virt-xen -y update kernel</span><br><span class="line"><span class="comment">#æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤æŠ¥é”™åˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="comment">#å¤‡ç”¨å‘½ä»¤ï¼šyum -y update kernel</span></span><br></pre></td></tr></table></figure><p>7ã€å®‰è£…Xen</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=centos-virt-xen -y install xen</span><br><span class="line"><span class="comment">#æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤æŠ¥é”™åˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="comment">#å¤‡ç”¨å‘½ä»¤ï¼šyum -y install xen</span></span><br></pre></td></tr></table></figure><p>8ã€ä¿®æ”¹ grub æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/default/grub</span><br><span class="line"></span><br><span class="line">GRUB_CMDLINE_XEN_DEFAULT=<span class="string">&quot;dom0_mem=8192M,max:8192M cpuinfo com1=115200,8n1 console=com1,tty loglvl=all guest_loglvl=all&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dom0_mem å‚æ•°æŒ‡å®šå†…å­˜å¤§å°ï¼Œmax æŒ‡å®šæœ€å¤§å†…å­˜ã€‚</span></span><br></pre></td></tr></table></figure><p>9ã€æ‰§è¡Œ <a href="http://grub-bootxen.sh">grub-bootxen.sh</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> f -iname grub-bootxen.sh</span><br><span class="line">/usr/bin/grub-bootxen.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œè„šæœ¬</span></span><br><span class="line">/usr/bin/grub-bootxen.sh</span><br></pre></td></tr></table></figure><p>10ã€é‡å¯ç³»ç»Ÿ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/2813102134.png" alt="image-20211028182202945.png"></p><p>11ã€æ£€æŸ¥Xenç¯å¢ƒæ˜¯å¦å®‰è£…å®Œæˆ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">xl info</span><br><span class="line"></span><br><span class="line">host                   : localhost.localdomain</span><br><span class="line">release                : 4.9.241-37.el7.x86_64</span><br><span class="line">version                : <span class="comment">#1 SMP Mon Nov 2 13:55:04 UTC 2020</span></span><br><span class="line">machine                : x86_64</span><br><span class="line">nr_cpus                : 8</span><br><span class="line">max_cpu_id             : 7</span><br><span class="line">nr_nodes               : 1</span><br><span class="line">cores_per_socket       : 1</span><br><span class="line">threads_per_core       : 1</span><br><span class="line">cpu_mhz                : 2926.007</span><br><span class="line">hw_caps                : 0fabfbff:83b82223:28100800:00000001:00000000:00000002:00000000:00000100</span><br><span class="line">virt_caps              : pv hvm</span><br><span class="line">total_memory           : 12287</span><br><span class="line">free_memory            : 3927</span><br><span class="line">sharing_freed_memory   : 0</span><br><span class="line">sharing_used_memory    : 0</span><br><span class="line">outstanding_claims     : 0</span><br><span class="line">free_cpus              : 0</span><br><span class="line">xen_major              : 4</span><br><span class="line">xen_minor              : 12</span><br><span class="line">xen_extra              : .4.95.g95172a63</span><br><span class="line">xen_version            : 4.12.4.95.g95172a63</span><br><span class="line">xen_caps               : xen-3.0-x86_64 xen-3.0-x86_32p hvm-3.0-x86_32 hvm-3.0-x86_32p hvm-3.0-x86_64 </span><br><span class="line">xen_scheduler          : credit2</span><br><span class="line">xen_pagesize           : 4096</span><br><span class="line">platform_params        : virt_start=0xffff800000000000</span><br><span class="line">xen_changeset          : </span><br><span class="line">xen_commandline        : placeholder dom0_mem=4096M,max:4096M cpuinfo com1=115200,8n1 console=com1,<span class="built_in">tty</span> loglvl=all guest_loglvl=all</span><br><span class="line">cc_compiler            : gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)</span><br><span class="line">cc_compile_by          : mockbuild</span><br><span class="line">cc_compile_domain      : centos.org</span><br><span class="line">cc_compile_date        : Thu Oct  7 15:19:59 UTC 2021</span><br><span class="line">build_id               : e88b287373be2de53430a35e9645c5742a465e60</span><br><span class="line">xend_config_format     : 4</span><br></pre></td></tr></table></figure><p>12ã€å®‰è£… Libvirt å·¥å…·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libvirt libvirt-daemon-xen virt-install</span><br></pre></td></tr></table></figure><p>13ã€ç½‘æ¡¥é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç½‘å¡ens192åŠ å…¥ç½‘æ¡¥br0ï¼Œç½‘å¡ens224åŠ å…¥ç½‘æ¡¥br1</span></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cat ifcfg-ens192 </span></span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens192&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens192&quot;</span></span><br><span class="line">BRIDGE=<span class="string">&quot;br0&quot;</span></span><br><span class="line"></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cat ifcfg-br0 </span></span><br><span class="line">TYPE=<span class="string">&quot;bridge&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;br0&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;br0&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.10.36&quot;</span></span><br><span class="line">PREFIX=<span class="string">&quot;24&quot;</span></span><br><span class="line">GATEWAY=<span class="string">&quot;192.168.10.1&quot;</span></span><br><span class="line">DNS1=<span class="string">&quot;114.114.114.114&quot;</span></span><br><span class="line"></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cat ifcfg-ens224</span></span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens224&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens224&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">BRIDGE=<span class="string">&quot;br1&quot;</span></span><br><span class="line"></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cat ifcfg-br1</span></span><br><span class="line">TYPE=<span class="string">&quot;bridge&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;br1&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;br1&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.20.36&quot;</span></span><br><span class="line">PREFIX=<span class="string">&quot;24&quot;</span></span><br><span class="line">GATEWAY=<span class="string">&quot;192.168.20.1&quot;</span></span><br><span class="line">DNS1=<span class="string">&quot;114.114.114.114&quot;</span></span><br></pre></td></tr></table></figure><p>14ã€ä¸Šä¼ é•œåƒè‡³xenç¯å¢ƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‹è½½v15ç‰ˆæœ¬kvmé•œåƒ</span></span><br><span class="line"><span class="comment">#é•œåƒä¸‹è½½åœ°å€ï¼šhttps://downloads.f5.com</span></span><br></pre></td></tr></table></figure><p>15ã€é•œåƒæ ¼å¼è½¬æ¢</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è½¬æ¢kvmé•œåƒä¸ºxené•œåƒ</span></span><br><span class="line">qemu-img convert &lt;qcow_file_name&gt;.qcow2 &lt;raw_file_name&gt;.raw</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment"># qemu-img convert BIGIP-15.1.4-0.0.47.qcow2 BIGIP-15.1.4-0.0.47.raw</span></span><br></pre></td></tr></table></figure><p>16ã€virt-manager è¿æ¥ Xen ç¯å¢ƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‘½ä»¤è¡Œè¾“å…¥ virt-manager è°ƒç”¨webè™šæ‹Ÿæœºç®¡ç†å·¥å…·</span></span><br><span class="line">[root@localhost ~]<span class="comment"># virt-manager </span></span><br></pre></td></tr></table></figure><p>â€‹17ã€æ‰“å¼€è™šæ‹Ÿæœºç®¡ç†å·¥å…·ï¼Œç‚¹å‡»å·¦ä¸Šè§’Fileï¼Œé€‰æ‹© Add Connection ï¼ŒHypervisor é€‰æ‹© Xen ï¼Œç‚¹å‡» Connect å®Œæˆ Xen çš„è¿æ¥ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/1474171693.png" alt="image-20211029143932967.png"></p><p>â€‹18ã€æ‰“å¼€è™šæ‹Ÿæœºç®¡ç†å·¥å…·ï¼Œç‚¹å‡»å·¦ä¸Šè§’Fileï¼Œé€‰æ‹© Create a new Virtual machineã€‚ ç‚¹å‡»Import existing disk imageï¼ˆä½¿ç”¨å·²å­˜åœ¨çš„é•œåƒï¼‰ï¼Œæ¶æ„é€‰é¡¹æ ¹æ®æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼Œè¿™é‡Œé€‰æ‹©å…¨è™šæ‹ŸåŒ–ã€‚ç‚¹å‡» Forward è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/1324437211.png" alt="image-20211029175811885.png"></p><p>19ã€OS type é€‰æ‹© Linux ï¼ŒVersion é€‰æ‹© Red Hat Enterprise linux 6 unkownã€‚Browse é€‰æ‹©ä¹‹å‰è½¬æ¢çš„ raw é•œåƒ ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/721637703.png" alt="image-20211029175847982.png"></p><p>20ã€åˆ†é… CPU å’Œ Memoryã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/1451763406.png" alt="image-20211029175920605.png"></p><p>21ã€Name æ ¹æ®æƒ…å†µè¿›è¡Œå¡«å†™ï¼Œå‹¾é€‰ Customize configuration before install è¿›è¡Œç½‘ç»œé…ç½®ï¼Œç‚¹å‡» Finish è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/1053628821.png" alt="image-20211029175955218.png"></p><p>22ã€ç½‘ç»œé…ç½®ï¼Œæ·»åŠ ç½‘å¡ï¼Œå¹¶é€‰æ‹©ç½‘æ¡¥ï¼ˆä¸¤å¼ ç½‘å¡åˆ†åˆ«é…ç½®ä¸åŒçš„ç½‘æ¡¥ï¼‰ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/3538596577.png" alt="image-20211029180123642.png"></p><p>23ã€ç‚¹å‡»å·¦ä¸Šè§’ Begin Installation è¿›è¡Œå®‰è£…ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/10/3136839960.png" alt="image-20211029180148807.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xen </tag>
            
            <tag> VE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨F5 GTM åš Windows Server DNS çš„ Slave åç§°æœåŠ¡å™¨</title>
      <link href="/posts/e7438d0af736.html"/>
      <url>/posts/e7438d0af736.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€èƒŒæ™¯ä»‹ç»">1ã€èƒŒæ™¯ä»‹ç»</h2><p>â€‹ç”¨æˆ·å½“å‰ä½¿ç”¨ Windows Server DNS æœåŠ¡å™¨åš DNS åŸŸåè§£æï¼Œç”±äºç¡¬ä»¶è®¾å¤‡èµ„æºæœ‰é™ï¼Œæ‰€ä»¥æƒ³æŠŠ DNS è§£æä»»åŠ¡äº¤ç»™ F5 GTM è¿›è¡Œå¤„ç†ï¼ŒWindows Server DNS ç”¨ä½œåŸŸåè®°å½•ç®¡ç† ï¼Œå½“åŸŸåè®°å½•æ›´æ–°çš„æ—¶å€™ä¼šåŒæ­¥ç»™ F5 GTM ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å» F5 GTM è§£æåŸŸåå³å¯ ã€‚</p><h2 id="2ã€ç¯å¢ƒä»‹ç»">2ã€ç¯å¢ƒä»‹ç»</h2><ul><li>Windows Server 2016</li><li>F5 GTM</li></ul><h2 id="3ã€é…ç½®">3ã€é…ç½®</h2><h3 id="ï¼ˆ1ï¼‰-Windows-Server-2016-DNS-é…ç½®">ï¼ˆ1ï¼‰ Windows Server 2016 DNS é…ç½®</h3><p>â€‹1ï¼‰è¿›å…¥ Windows Server DNS ç®¡ç†å™¨ï¼Œé…ç½®å¯¹åº”åŸŸåŒºåŸŸæ•°æ®ä¼ é€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…è®¸åŒºåŸŸä¼ é€åˆ°F5 GTMã€‚<br>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/1444232796.png" alt="image-20211026142030310.png"></p><p>â€‹2ï¼‰å¼€å¯ Windows Server DNS é…ç½®å˜æ›´é€šçŸ¥ï¼ˆå¿½ç•¥éªŒè¯æŠ¥é”™ï¼‰ã€‚</p><p>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/1689861336.png" alt="image-20211026142136846.png"></p><h3 id="ï¼ˆ2ï¼‰-F5-GTM-é…ç½®">ï¼ˆ2ï¼‰ F5 GTM é…ç½®</h3><p>â€‹1ï¼‰ é…ç½®Listenerï¼ŒæŒ‡å®šç›‘å¬ DNS è¯·æ±‚çš„åœ°å€ã€‚</p><p>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/1671276633.png" alt="image-20211026153444835.png"></p><p>â€‹2ï¼‰é…ç½®ZoneRunner zone</p><p>â€‹    æŒ‡å®šåŒºåŸŸç±»å‹ä»¥åŠ windows server dns åœ°å€ã€‚</p><p>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/1421452743.png" alt="image-20211026162405882.png"></p><h2 id="4ã€æµ‹è¯•">4ã€æµ‹è¯•</h2><h3 id="ï¼ˆ1ï¼‰æŸ¥çœ‹F5-GTMæ˜¯å¦è¯»å–åˆ°äº†Windows-server-dnsæœåŠ¡å™¨çš„èµ„æºè®°å½•ã€‚">ï¼ˆ1ï¼‰æŸ¥çœ‹F5 GTMæ˜¯å¦è¯»å–åˆ°äº†Windows server dnsæœåŠ¡å™¨çš„èµ„æºè®°å½•ã€‚</h3><p>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/3308921522.png" alt="image-20211027145927088.png"></p><p>â€‹æµ‹è¯•ç»“æœï¼šF5 GTM å·²ç»è·å–åˆ° Windwos Server DNS èµ„æºè®°å½•ã€‚</p><h3 id="ï¼ˆ2ï¼‰é€šè¿‡F5-GTMè¿›è¡Œè§£ææµ‹è¯•">ï¼ˆ2ï¼‰é€šè¿‡F5 GTMè¿›è¡Œè§£ææµ‹è¯•</h3><p>â€‹<img src="https://www.whbblog.cn/usr/uploads/2021/10/1265332552.png" alt="image-20211027150057497.png"></p><p>â€‹è§£æç»“æœï¼šæˆåŠŸè§£æå¹¶è¿”å›è¯·æ±‚çš„ A è®°å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> DNS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5æ£€æµ‹è¿œç«¯UDPç«¯å£æ˜¯å¦æ­£å¸¸</title>
      <link href="/posts/0e7a6560f05e.html"/>
      <url>/posts/0e7a6560f05e.html</url>
      
        <content type="html"><![CDATA[<p><strong>ä½¿ç”¨F5å†…ç½®å‘½ä»¤ï¼šncï¼ˆNetCatï¼‰</strong></p><p>NetCatï¼Œåœ¨ç½‘ç»œå·¥å…·ä¸­æœ‰â€œç‘å£«å†›åˆ€â€ç¾èª‰ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæµ‹è¯•udpåªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½å˜é€šã€‚åœ¨å®‰å…¨é¢†åŸŸncå¸¸ç”¨æ¥ç«¯å£ç›‘å¬è½¬å‘ï¼Œç”¨çš„æ¯”è¾ƒå¤šçš„ä¹Ÿæ˜¯windowsç‰ˆçš„NCï¼Œåœ¨è¿ç»´ä¸­éœ€è¦å¸¸ç”¨åˆ°linuxä¸Šçš„ncï¼Œè€Œä¸€èˆ¬linuxä¼šé»˜è®¤é›†æˆè¿™ä¸ªå‘½ä»¤ï¼Œæ ¹æ®ä¸åŒç³»ç»Ÿå‘½ä»¤ä¸åŒï¼Œæœ‰çš„ä¸ºâ€œncâ€ï¼Œæœ‰çš„ä¸ºâ€œnetcatâ€ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å®é™…ç³»ç»Ÿå°è¯•ä¸‹ã€‚</p><p>æ¥ä¸‹æ¥è¿›è¡Œè¿æ¥æ€§æµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ nc -uv $ip $port å‘½ä»¤ï¼Œè¾“å…¥å¤šæ¬¡å›è½¦æ²¡æœ‰å‡ºç°å¼‚å¸¸è¡¨ç¤ºè¿æ¥æ­£å¸¸</span></span><br><span class="line"><span class="comment">#æ­£å¸¸ç¤ºä¾‹ï¼š</span></span><br><span class="line">[root@bigip1:Active:Standalone] config <span class="comment"># nc -uv 114.114.114.114 53</span></span><br><span class="line">Ncat: Version 6.40 ( http://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 114.114.114.114:53.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ nc -uv $ip $port å‘½ä»¤ï¼Œè¾“å…¥å¤šæ¬¡å›è½¦å‡ºç°å¼‚å¸¸è¡¨ç¤ºè¿æ¥ç«¯å£å¤±è´¥</span></span><br><span class="line"><span class="comment">#å¤±è´¥ç¤ºä¾‹ï¼š</span></span><br><span class="line">[root@bigip1:Active:Standalone] config <span class="comment"># nc -uv 114.114.114.114 535</span></span><br><span class="line">Ncat: Version 6.40 ( http://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 114.114.114.114:535.</span><br><span class="line"></span><br><span class="line">Ncat: Connection refused.</span><br></pre></td></tr></table></figure><p>å…¶ä»–å‚æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-4                         Use IPv4 only</span><br><span class="line">-6                         Use IPv6 only</span><br><span class="line">-U, --unixsock             Use Unix domain sockets only</span><br><span class="line">-C, --crlf                 Use CRLF <span class="keyword">for</span> EOL sequence</span><br><span class="line">-c, --sh-exec &lt;<span class="built_in">command</span>&gt;    Executes the given <span class="built_in">command</span> via /bin/sh</span><br><span class="line">-e, --<span class="built_in">exec</span> &lt;<span class="built_in">command</span>&gt;       Executes the given <span class="built_in">command</span></span><br><span class="line">    --lua-exec &lt;filename&gt;  Executes the given Lua script</span><br><span class="line">-g hop1[,hop2,...]         Loose <span class="built_in">source</span> routing hop points (8 max)</span><br><span class="line">-G &lt;n&gt;                     Loose <span class="built_in">source</span> routing hop pointer (4, 8, 12, ...)</span><br><span class="line">-m, --max-conns &lt;n&gt;        Maximum &lt;n&gt; simultaneous connections</span><br><span class="line">-h, --<span class="built_in">help</span>                 Display this <span class="built_in">help</span> screen</span><br><span class="line">-d, --delay &lt;time&gt;         Wait between <span class="built_in">read</span>/writes</span><br><span class="line">-o, --output &lt;filename&gt;    Dump session data to a file</span><br><span class="line">-x, --hex-dump &lt;filename&gt;  Dump session data as hex to a file</span><br><span class="line">-i, --idle-timeout &lt;time&gt;  Idle <span class="built_in">read</span>/write <span class="built_in">timeout</span></span><br><span class="line">-p, --source-port port     Specify <span class="built_in">source</span> port to use</span><br><span class="line">-s, --<span class="built_in">source</span> addr          Specify <span class="built_in">source</span> address to use (doesn<span class="string">&#x27;t affect -l)</span></span><br><span class="line"><span class="string">-l, --listen               Bind and listen for incoming connections</span></span><br><span class="line"><span class="string">-k, --keep-open            Accept multiple connections in listen mode</span></span><br><span class="line"><span class="string">-n, --nodns                Do not resolve hostnames via DNS</span></span><br><span class="line"><span class="string">-t, --telnet               Answer Telnet negotiations</span></span><br><span class="line"><span class="string">-u, --udp                  Use UDP instead of default TCP</span></span><br><span class="line"><span class="string">    --sctp                 Use SCTP instead of default TCP</span></span><br><span class="line"><span class="string">-v, --verbose              Set verbosity level (can be used several times)</span></span><br><span class="line"><span class="string">-w, --wait &lt;time&gt;          Connect timeout</span></span><br><span class="line"><span class="string">    --append-output        Append rather than clobber specified output files</span></span><br><span class="line"><span class="string">    --send-only            Only send data, ignoring received; quit on EOF</span></span><br><span class="line"><span class="string">    --recv-only            Only receive data, never send anything</span></span><br><span class="line"><span class="string">    --allow                Allow only given hosts to connect to Ncat</span></span><br><span class="line"><span class="string">    --allowfile            A file of hosts allowed to connect to Ncat</span></span><br><span class="line"><span class="string">    --deny                 Deny given hosts from connecting to Ncat</span></span><br><span class="line"><span class="string">    --denyfile             A file of hosts denied from connecting to Ncat</span></span><br><span class="line"><span class="string">    --broker               Enable Ncat&#x27;</span>s connection brokering mode</span><br><span class="line">    --chat                 Start a simple Ncat chat server</span><br><span class="line">    --proxy &lt;addr[:port]&gt;  Specify address of host to proxy through</span><br><span class="line">    --proxy-type &lt;<span class="built_in">type</span>&gt;    Specify proxy <span class="built_in">type</span> (<span class="string">&quot;http&quot;</span> or <span class="string">&quot;socks4&quot;</span>)</span><br><span class="line">    --proxy-auth &lt;auth&gt;    Authenticate with HTTP or SOCKS proxy server</span><br><span class="line">    --ssl                  Connect or listen with SSL</span><br><span class="line">    --ssl-cert             Specify SSL certificate file (PEM) <span class="keyword">for</span> listening</span><br><span class="line">    --ssl-key              Specify SSL private key (PEM) <span class="keyword">for</span> listening</span><br><span class="line">    --ssl-verify           Verify trust and domain name of certificates</span><br><span class="line">    --ssl-trustfile        PEM file containing trusted SSL certificates</span><br><span class="line">    --version              Display Ncat<span class="string">&#x27;s version information and exit</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> udp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Novaï¼ˆå…­ï¼‰</title>
      <link href="/posts/431b86a01142.html"/>
      <url>/posts/431b86a01142.html</url>
      
        <content type="html"><![CDATA[<h1>ä¸€ã€Nova åŸºç¡€</h1><h2 id="1ã€Nova-æ¦‚è¿°">1ã€Nova æ¦‚è¿°</h2><p>Novaï¼ˆOpenStack Compute Serviceï¼‰æ˜¯ OpenStack æœ€æ ¸å¿ƒçš„æœåŠ¡ï¼Œè´Ÿè´£ç»´æŠ¤å’Œç®¡ç†äº‘ç¯å¢ƒçš„è®¡ç®—èµ„æºï¼ŒåŒæ—¶ç®¡ç†è™šæ‹Ÿæœºç”Ÿå‘½å‘¨æœŸã€‚</p><p>Novaè‡ªèº«å¹¶æ²¡æœ‰æä¾›ä»»ä½•è™šæ‹ŸåŒ–èƒ½åŠ›ï¼Œå®ƒæä¾›è®¡ç®—æœåŠ¡ï¼Œä½¿ç”¨ä¸åŒçš„æ˜¾æ‹Ÿ1åŒ–é©±åŠ¨æ¥ä¸åº•å±‚æ”¯æŒçš„Hypervisor(è™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰è¿›è¡Œäº¤äº’ã€‚æ‰€æœ‰çš„è®¡ç®—å®ä¾‹ï¼ˆè™šæ‹ŸæœåŠ¡å™¨ï¼‰ç”±Novaè¿›è¡Œç”Ÿå‘½å‘¨æœŸçš„è°ƒåº¦ç®¡ç†(ååŠ¨ã€æ³¨èµ·ã€åœæ­¢ã€åˆ é™¤ç­‰)ã€‚</p><p>Novaéœ€è¦keystone.glanceã€neutronã€cinderå’Œswiftç­‰å…¶ä»–æœåŠ¡çš„æ”¯æŒï¼Œèƒ½ä¸è¿™äº›æœåŠ¡é›†æˆï¼Œå®ç°å¦‚åŠ å¯†ç£ç›˜ã€è£¸é‡‘å±è®¡ç®—å®ä¾‹ç­‰ã€‚</p><h2 id="2ã€Nova-æ¶æ„">2ã€Nova æ¶æ„</h2><img src="https://www.whbblog.cn/usr/uploads/2021/08/1724512348.gif" style="zoom:80%;" /><p>Nova çš„æ¶æ„æ¯”è¾ƒå¤æ‚ï¼ŒåŒ…å«å¾ˆå¤šç»„ä»¶ã€‚ è¿™äº›ç»„ä»¶ä»¥å­æœåŠ¡ï¼ˆåå° deamon è¿›ç¨‹ï¼‰çš„å½¢å¼è¿è¡Œï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><h3 id="1-nova-api">(1)  nova-api</h3><p>æ˜¯æ•´ä¸ª Nova ç»„ä»¶çš„é—¨æˆ·ï¼Œæ¥æ”¶å’Œå“åº”å®¢æˆ·çš„ API è°ƒç”¨ã€‚æ‰€æœ‰å¯¹ Nova çš„è¯·æ±‚éƒ½é¦–å…ˆç”± nova-api å¤„ç†ã€‚nova-api å‘å¤–ç•Œæš´éœ²è‹¥å¹² HTTP REST API æ¥å£ åœ¨ keystone ä¸­æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢ nova-api çš„ endponitsã€‚</p><p>å®¢æˆ·ç«¯å°±å¯ä»¥å°†è¯·æ±‚å‘é€åˆ° endponits æŒ‡å®šçš„åœ°å€ï¼Œå‘ nova-api è¯·æ±‚æ“ä½œã€‚ å½“ç„¶ï¼Œä½œä¸ºæœ€ç»ˆç”¨æˆ·çš„æˆ‘ä»¬ä¸ä¼šç›´æ¥å‘é€ Rest APIè¯·æ±‚ã€‚ OpenStack CLIï¼ŒDashboard å’Œå…¶ä»–éœ€è¦è·Ÿ Nova äº¤æ¢çš„ç»„ä»¶ä¼šä½¿ç”¨è¿™äº› APIã€‚</p><p><strong>Nova-api å¯¹æ¥æ”¶åˆ°çš„ HTTP API è¯·æ±‚ä¼šåšå¦‚ä¸‹å¤„ç†ï¼š</strong></p><ul><li><p>æ£€æŸ¥å®¢æˆ·ç«¯ä¼ å…¥çš„å‚æ•°æ˜¯å¦åˆæ³•æœ‰æ•ˆã€‚</p></li><li><p>è°ƒç”¨ Nova å…¶ä»–å­æœåŠ¡çš„å¤„ç†å®¢æˆ·ç«¯ HTTP è¯·æ±‚ã€‚</p></li><li><p>æ ¼å¼åŒ– Nova å…¶ä»–å­æœåŠ¡è¿”å›çš„ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li></ul><p><strong>nova-api æ¥æ”¶å“ªäº›è¯·æ±‚ï¼Ÿ</strong></p><p>ç®€å•çš„è¯´ï¼Œåªè¦æ˜¯è·Ÿè™šæ‹Ÿæœºç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ“ä½œï¼Œnova-api éƒ½å¯ä»¥å“åº”ã€‚ å¤§éƒ¨åˆ†æ“ä½œéƒ½å¯ä»¥åœ¨ Dashboard ä¸Šæ‰¾åˆ°ã€‚æ‰“å¼€Instanceç®¡ç†ç•Œé¢ï¼Œé™¤äº†æä¾› OpenStack è‡ªå·±çš„APIï¼Œnova-api è¿˜æ”¯æŒ Amazon EC2 APIã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®¢æˆ·ä»¥å‰ä½¿ç”¨ Amazon EC2ï¼Œå¹¶ä¸”ç”¨ EC2 çš„ API å¼€å‘äº†äº›å·¥å…·æ¥ç®¡ç†è™šæœºï¼Œé‚£ä¹ˆå¦‚æœç°åœ¨è¦æ¢æˆ OpenStackï¼Œè¿™äº›å·¥å…·å¯ä»¥æ— ç¼è¿ç§»åˆ° OpenStackï¼Œå› ä¸º nova-api å…¼å®¹ EC2 APIï¼Œæ— éœ€åšä»»ä½•ä¿®æ”¹ã€‚</p><h3 id="2-nova-schedulerï¼š">(2) nova-schedulerï¼š</h3><p>è™šæœºè°ƒåº¦æœåŠ¡ï¼Œè´Ÿè´£å†³å®šåœ¨å“ªä¸ªè®¡ç®—èŠ‚ç‚¹ä¸Šè¿è¡Œè™šæœºã€‚åˆ›å»º Instance æ—¶ï¼Œç”¨æˆ·ä¼šæå‡ºèµ„æºéœ€æ±‚ï¼Œä¾‹å¦‚ CPUã€å†…å­˜ã€ç£ç›˜å„éœ€è¦å¤šå°‘ã€‚OpenStack å°†è¿™äº›éœ€æ±‚å®šä¹‰åœ¨ flavor ä¸­ï¼Œç”¨æˆ·åªéœ€è¦æŒ‡å®šç”¨å“ªä¸ª flavor å°±å¯ä»¥äº†ã€‚</p><p>ä¸‹é¢ä»‹ç» nova-scheduler æ˜¯å¦‚ä½•å®ç°è°ƒåº¦çš„ã€‚åœ¨ /etc/nova/nova.conf ä¸­ï¼Œnova é€šè¿‡ driver=filter_scheduler è¿™ä¸ªå‚æ•°æ¥é…ç½® nova-schedulerã€‚</p><p><strong>Filter scheduler</strong></p><p>Filter scheduler æ˜¯ nova-scheduler é»˜è®¤çš„è°ƒåº¦å™¨ï¼Œè°ƒåº¦è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼š</p><p>a. é€šè¿‡è¿‡æ»¤å™¨ï¼ˆfilterï¼‰é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„è®¡ç®—èŠ‚ç‚¹ï¼ˆè¿è¡Œ nova-computeï¼‰</p><p>b. é€šè¿‡æƒé‡è®¡ç®—ï¼ˆweightingï¼‰é€‰æ‹©åœ¨æœ€ä¼˜ï¼ˆæƒé‡å€¼æœ€å¤§ï¼‰çš„è®¡ç®—èŠ‚ç‚¹ä¸Šåˆ›å»º Instanceã€‚</p><p>Filter scheduleå…è®¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ schedulerï¼Œé…ç½® scheduler_driver å³å¯ã€‚ è¿™åˆä¸€æ¬¡ä½“ç°äº†OpenStackçš„å¼€æ”¾æ€§ã€‚Scheduler å¯ä»¥ä½¿ç”¨å¤šä¸ª filter ä¾æ¬¡è¿›è¡Œè¿‡æ»¤ï¼Œè¿‡æ»¤ä¹‹åçš„èŠ‚ç‚¹å†é€šè¿‡è®¡ç®—æƒé‡é€‰å‡ºæœ€é€‚åˆçš„èŠ‚ç‚¹ã€‚</p><p>å½“ Filter scheduler éœ€è¦æ‰§è¡Œè°ƒåº¦æ“ä½œæ—¶ï¼Œä¼šè®© filter å¯¹è®¡ç®—èŠ‚ç‚¹è¿›è¡Œåˆ¤æ–­ï¼Œfilter è¿”å› True æˆ– Falseã€‚ç»è¿‡å‰é¢ä¸€å † filter çš„è¿‡æ»¤ï¼Œnova-scheduler é€‰å‡ºäº†èƒ½å¤Ÿéƒ¨ç½² instance çš„è®¡ç®—èŠ‚ç‚¹ã€‚</p><p>Scheduler ä¼šå¯¹æ¯ä¸ªè®¡ç®—èŠ‚ç‚¹æ‰“åˆ†ï¼Œå¾—åˆ†æœ€é«˜çš„è·èƒœã€‚ æ‰“åˆ†çš„è¿‡ç¨‹å°±æ˜¯ weightï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯è®¡ç®—æƒé‡å€¼ï¼Œç›®å‰ nova-scheduler çš„é»˜è®¤å®ç°æ˜¯æ ¹æ®è®¡ç®—èŠ‚ç‚¹ç©ºé—²çš„å†…å­˜é‡è®¡ç®—æƒé‡å€¼ï¼š ç©ºé—²å†…å­˜è¶Šå¤šï¼Œæƒé‡è¶Šå¤§ï¼Œinstance å°†è¢«éƒ¨ç½²åˆ°å½“å‰ç©ºé—²å†…å­˜æœ€å¤šçš„è®¡ç®—èŠ‚ç‚¹ä¸Šã€‚</p><h3 id="3-nova-computeï¼š">(3) nova-computeï¼š</h3><p>nova-compute æ˜¯ç®¡ç†è™šæœºçš„æ ¸å¿ƒæœåŠ¡ï¼Œåœ¨è®¡ç®—èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚é€šè¿‡è°ƒç”¨Hypervisor APIå®ç°èŠ‚ç‚¹ä¸Šçš„ instanceçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ OpenStack å¯¹ instance çš„æ“ä½œï¼Œæœ€åéƒ½æ˜¯äº¤ç»™ nova-compute æ¥å®Œæˆçš„ã€‚ nova-compute ä¸ Hypervisor ä¸€èµ·å®ç° OpenStack å¯¹ instance ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚</p><p>Openstackä¸­è™šæœºé»˜è®¤çš„ä¿å­˜è·¯å¾„åœ¨ï¼š/var/lib/nova/instancesã€‚</p><p>é€šè¿‡Driveræ¶æ„æ”¯æŒå¤šç§Hypervisorã€‚</p><p>Hypervisoræ˜¯è®¡ç®—èŠ‚ç‚¹ä¸Šè·‘çš„è™šæ‹ŸåŒ–ç®¡ç†ç¨‹åºï¼Œè™šæœºç®¡ç†æœ€åº•å±‚çš„ç¨‹åºã€‚ ä¸åŒè™šæ‹ŸåŒ–æŠ€æœ¯æä¾›è‡ªå·±çš„ Hypervisorã€‚ å¸¸ç”¨çš„ Hypervisor æœ‰ KVMï¼ŒXenï¼Œ VMWare ç­‰ã€‚nova-compute ä¸ºè¿™äº› Hypervisor å®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ï¼ŒHypervisor åªéœ€è¦å®ç°è¿™äº›æ¥å£ï¼Œå°±å¯ä»¥ Driver çš„å½¢å¼å³æ’å³ç”¨åˆ° OpenStack ç³»ç»Ÿä¸­ã€‚</p><h3 id="4-nova-conductorï¼š">(4) nova-conductorï¼š</h3><p>nova-compute ç»å¸¸éœ€è¦æ›´æ–°æ•°æ®åº“ï¼Œæ¯”å¦‚æ›´æ–°å’Œè·å–è™šæœºçš„çŠ¶æ€ã€‚ å‡ºäºå®‰å…¨æ€§å’Œä¼¸ç¼©æ€§çš„è€ƒè™‘ï¼Œnova-compute å¹¶ä¸ä¼šç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œè€Œæ˜¯å°†è¿™ä¸ªä»»åŠ¡å§”æ‰˜ç»™ nova-conductorã€‚</p><h3 id="5-Console-Interface">(5) Console Interface</h3><ul><li><p>nova-consoleï¼š ç”¨æˆ·å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è®¿é—®è™šæœºçš„æ§åˆ¶å°ï¼š</p></li><li><p>nova-novncproxyï¼š åŸºäº Web æµè§ˆå™¨çš„ VNC è®¿é—®</p></li><li><p>nova-spicehtml5proxyï¼š åŸºäº HTML5 æµè§ˆå™¨çš„ SPICE è®¿é—®</p></li><li><p>nova-xvpnvncproxyï¼š åŸºäº Java å®¢æˆ·ç«¯çš„ VNC è®¿é—®</p></li><li><p>nova-consoleauthï¼š è´Ÿè´£å¯¹è®¿é—®è™šæœºæ§åˆ¶å°è¯·æ±‚æä¾› Token è®¤è¯</p></li><li><p>nova-certï¼š æä¾› x509 è¯ä¹¦æ”¯æŒ</p></li></ul><h2 id="äºŒã€Novaéƒ¨ç½²">äºŒã€Novaéƒ¨ç½²</h2><h3 id="1ã€æ§åˆ¶èŠ‚ç‚¹æ“ä½œ">1ã€æ§åˆ¶èŠ‚ç‚¹æ“ä½œ</h3><h4 id="1-åˆ›å»ºnovaæ•°æ®åº“ï¼Œå¹¶æ‰§è¡Œæˆæƒæ“ä½œ">(1) åˆ›å»ºnovaæ•°æ®åº“ï¼Œå¹¶æ‰§è¡Œæˆæƒæ“ä½œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç™»é™†mysql ï¼Œå¦‚æœæœ‰å¯†ç åˆ™ä½¿ç”¨ mysql -u root -p</span></span><br><span class="line">[root@controller ~]<span class="comment"># mysql</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºæ•°æ®åº“ nova_api</span></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE nova_api;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºæ•°æ®åº“ nova</span></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE nova;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºæ•°æ®åº“ nova_cell0</span></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE nova_cell0;</span><br><span class="line"></span><br><span class="line"><span class="comment">#nova_apiæˆäºˆæƒé™</span></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova_api.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova_api.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#novaæˆäºˆæƒé™</span></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>  IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#nova_cell0æˆäºˆæƒé™</span></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova_cell0.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON nova_cell0.* TO <span class="string">&#x27;nova&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;NOVA_DBPASS&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é€€å‡ºæ•°æ®åº“</span></span><br><span class="line">MariaDB [(none)]&gt; quit</span><br></pre></td></tr></table></figure><h4 id="2-åœ¨Keystoneä¸Šåˆ›å»ºç”¨æˆ·ï¼Œå…³è”è§’è‰²">(2) åœ¨Keystoneä¸Šåˆ›å»ºç”¨æˆ·ï¼Œå…³è”è§’è‰²</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">[root@controller ~]<span class="comment"># openstack user create --domain default --password NOVA_PASS  nova</span></span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | default                          |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| <span class="built_in">id</span>                  | d5822431914e44ada7f7b795a18fdbc5 |</span><br><span class="line">| name                | nova                             |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…³è”è§’è‰²</span></span><br><span class="line">[root@controller ~]<span class="comment"># openstack role add --project service --user nova admin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»º nova service</span></span><br><span class="line">[root@controller ~]<span class="comment"># openstack service create --name nova --description &quot;OpenStack Compute&quot; compute</span></span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | OpenStack Compute                |</span><br><span class="line">| enabled     | True                             |</span><br><span class="line">| <span class="built_in">id</span>          | decf85729d0a4f548dd0897f756f86ef |</span><br><span class="line">| name        | nova                             |</span><br><span class="line">| <span class="built_in">type</span>        | compute                          |</span><br><span class="line">+-------------+----------------------------------+</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨keystoneä¸Šæ³¨å†Œapiè®¿é—®åœ°å€">(3) åœ¨keystoneä¸Šæ³¨å†Œapiè®¿é—®åœ°å€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne compute public http://controller:8774/v2.1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | 49a3b72075464debb3d14c89b89661ab |</span><br><span class="line">| interface    | public                           |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | decf85729d0a4f548dd0897f756f86ef |</span><br><span class="line">| service_name | nova                             |</span><br><span class="line">| service_type | compute                          |</span><br><span class="line">| url          | http://controller:8774/v2.1      |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line"></span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne compute internal http://controller:8774/v2.1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | ff95cabd968b4845bbc09b2ecbf9c0e0 |</span><br><span class="line">| interface    | internal                         |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | decf85729d0a4f548dd0897f756f86ef |</span><br><span class="line">| service_name | nova                             |</span><br><span class="line">| service_type | compute                          |</span><br><span class="line">| url          | http://controller:8774/v2.1      |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line"></span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne compute admin http://controller:8774/v2.1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | b6a586c1e74a41ae95e27cbcd9607df8 |</span><br><span class="line">| interface    | admin                            |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | decf85729d0a4f548dd0897f756f86ef |</span><br><span class="line">| service_name | nova                             |</span><br><span class="line">| service_type | compute                          |</span><br><span class="line">| url          | http://controller:8774/v2.1      |</span><br><span class="line">+--------------+----------------------------------+</span><br></pre></td></tr></table></figure><h4 id="4-å®‰è£…è½¯ä»¶åŒ…">(4) å®‰è£…è½¯ä»¶åŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install openstack-nova-api openstack-nova-conductor openstack-nova-novncproxy openstack-nova-scheduler -y</span><br></pre></td></tr></table></figure><h4 id="5-ä¿®æ”¹é…ç½®æ–‡ä»¶">(5) ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¿®æ”¹novaé…ç½®æ–‡ä»¶/etc/nova/nova.conf</span></span><br><span class="line">[root@controller ~]# cp /etc/nova/nova.conf /etc/nova/nova.conf.bak</span><br><span class="line">[root@controller ~]# grep -Ev &quot;^#|^$&quot; /etc/nova/nova.conf.bak &gt; /etc/nova/nova.conf</span><br><span class="line">[root@controller ~]# vi /etc/nova/nova.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">enabled_apis = osapi_compute,metadata</span><br><span class="line">my_ip = 192.168.10.222</span><br><span class="line">transport_url = rabbit://openstack:RABBIT_PASS@controller:5672/</span><br><span class="line">use_neutron = True</span><br><span class="line">firewall_driver = nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">[api]</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">[api_database]</span><br><span class="line">connection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova_api</span><br><span class="line">[barbican]</span><br><span class="line">[cache]</span><br><span class="line">[cells]</span><br><span class="line">[cinder]</span><br><span class="line">[cloudpipe]</span><br><span class="line">[conductor]</span><br><span class="line">[console]</span><br><span class="line">[consoleauth]</span><br><span class="line">[cors]</span><br><span class="line">[cors.subdomain]</span><br><span class="line">[crypto]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova</span><br><span class="line">[ephemeral_storage_encryption]</span><br><span class="line">[filter_scheduler]</span><br><span class="line">[glance]</span><br><span class="line">api_servers = http://controller:9292</span><br><span class="line">[guestfs]</span><br><span class="line">[healthcheck]</span><br><span class="line">[hyperv]</span><br><span class="line">[image_file_url]</span><br><span class="line">[ironic]</span><br><span class="line">[key_manager]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">www_authenticate_uri = http://controller:5000/</span><br><span class="line">auth_url = http://controller:5000/</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = Default</span><br><span class="line">user_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = NOVA_PASS</span><br><span class="line">[libvirt]</span><br><span class="line">[matchmaker_redis]</span><br><span class="line">[metrics]</span><br><span class="line">[mks]</span><br><span class="line">[neutron]</span><br><span class="line">[notifications]</span><br><span class="line">[osapi_v21]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_messaging_zmq]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[pci]</span><br><span class="line">[placement]</span><br><span class="line">region_name = RegionOne</span><br><span class="line">project_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">auth_type = password</span><br><span class="line">user_domain_name = Default</span><br><span class="line">auth_url = http://controller:5000/v3</span><br><span class="line">username = placement</span><br><span class="line">password = PLACEMENT_PASS</span><br><span class="line">[quota]</span><br><span class="line">[rdp]</span><br><span class="line">[remote_debug]</span><br><span class="line">[scheduler]</span><br><span class="line">[serial_console]</span><br><span class="line">[service_user]</span><br><span class="line">[spice]</span><br><span class="line">[ssl]</span><br><span class="line">[trusted_computing]</span><br><span class="line">[upgrade_levels]</span><br><span class="line">[vendordata_dynamic_auth]</span><br><span class="line">[vmware]</span><br><span class="line">[vnc]</span><br><span class="line">enabled = true</span><br><span class="line">server_listen = $my_ip</span><br><span class="line">server_proxyclient_address = $my_ip</span><br><span class="line">[workarounds]</span><br><span class="line">[wsgi]</span><br><span class="line">[xenserver]</span><br><span class="line">[xvp]</span><br></pre></td></tr></table></figure><h4 id="6-åŒæ­¥æ•°æ®åº“">(6) åŒæ­¥æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage api_db sync&quot; nova</span><br><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage cell_v2 map_cell0&quot; nova</span><br><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage cell_v2 create_cell --name=cell1 --verbose&quot; nova</span><br><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage db sync&quot; nova</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ nova cell0 å’Œ cell1 æ˜¯å¦æ­£ç¡®æ³¨å†Œ</span></span><br><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage cell_v2 list_cells&quot; nova</span><br><span class="line">+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+</span><br><span class="line">|  Name |                 UUID                 |              Transport URL               |               Database Connection               | Disabled |</span><br><span class="line">+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+</span><br><span class="line">| cell0 | 00000000-0000-0000-0000-000000000000 |                  none:/                  | mysql+pymysql://nova:****@controller/nova_cell0 |  False   |</span><br><span class="line">| cell1 | 771a0328-3035-49f5-951e-0c56e5f636fb | rabbit://openstack:****@controller:5672/ |    mysql+pymysql://nova:****@controller/nova    |  False   |</span><br><span class="line">+-------+--------------------------------------+------------------------------------------+-------------------------------------------------+----------+</span><br></pre></td></tr></table></figure><h4 id="7-å¯åŠ¨æœåŠ¡">(7) å¯åŠ¨æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl enable openstack-nova-api.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br><span class="line"></span><br><span class="line">[root@controller ~]# systemctl start openstack-nova-api.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br></pre></td></tr></table></figure><h4 id="8-éªŒè¯">(8) éªŒè¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# nova service-list</span><br><span class="line">+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+-----------------+-------------+</span><br><span class="line">| Id                                   | Binary         | Host       | Zone     | Status  | State | Updated_at                 | Disabled Reason | Forced down |</span><br><span class="line">+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+-----------------+-------------+</span><br><span class="line">| 027ad868-0c2c-4f20-958a-429c8fe141ec | nova-conductor | controller | internal | enabled | up    | 2021-08-23T09:45:16.000000 | -               | False       |</span><br><span class="line">| 35031a41-d092-4b24-abbf-a74b84fa59d2 | nova-scheduler | controller | internal | enabled | up    | 2021-08-23T09:45:20.000000 | -               | False       |</span><br><span class="line">+--------------------------------------+----------------+------------+----------+---------+-------+----------------------------+-----------------+-------------+</span><br></pre></td></tr></table></figure><h3 id="2ã€è®¡ç®—èŠ‚ç‚¹é…ç½®">2ã€è®¡ç®—èŠ‚ç‚¹é…ç½®</h3><p><strong>æ³¨ï¼šå¦‚æœæŠŠæ§åˆ¶èŠ‚ç‚¹ä¹Ÿä½œä¸ºè®¡ç®—èŠ‚ç‚¹çš„è¯ï¼Œå°±åœ¨æ§åˆ¶èŠ‚ç‚¹è¿›è¡Œä»¥ä¸‹æ“ä½œã€‚</strong></p><h4 id="1-å®‰è£…">(1) å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install openstack-nova-compute -y</span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®-etc-nova-nova-conf">(2) é…ç½®/etc/nova/nova.conf</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]#  cp /etc/nova/nova.conf /etc/nova/nova.conf.bak</span><br><span class="line">[root@compute ~]# grep -Ev &quot;^#|^$&quot; /etc/nova/nova.conf.bak &gt; /etc/nova/nova.conf</span><br><span class="line">[root@compute ~]# vi /etc/nova/nova.conf</span><br><span class="line">[root@compute ~]# cat /etc/nova/nova.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">enabled_apis = osapi_compute,metadata</span><br><span class="line">transport_url = rabbit://openstack:RABBIT_PASS@controller</span><br><span class="line">my_ip = 192.168.10.222</span><br><span class="line">use_neutron = true</span><br><span class="line">firewall_driver = nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">[api]</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">[api_database]</span><br><span class="line">[barbican]</span><br><span class="line">[cache]</span><br><span class="line">[cinder]</span><br><span class="line">[compute]</span><br><span class="line">[conductor]</span><br><span class="line">[console]</span><br><span class="line">[consoleauth]</span><br><span class="line">[cors]</span><br><span class="line">[database]</span><br><span class="line">[devices]</span><br><span class="line">[ephemeral_storage_encryption]</span><br><span class="line">[filter_scheduler]</span><br><span class="line">[glance]</span><br><span class="line">api_servers = http://controller:9292</span><br><span class="line">[guestfs]</span><br><span class="line">[healthcheck]</span><br><span class="line">[hyperv]</span><br><span class="line">[ironic]</span><br><span class="line">[key_manager]</span><br><span class="line">[keystone]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">www_authenticate_uri = http://controller:5000/</span><br><span class="line">auth_url = http://controller:5000/</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = Default</span><br><span class="line">user_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = NOVA_PASS</span><br><span class="line">[libvirt]</span><br><span class="line">[metrics]</span><br><span class="line">[mks]</span><br><span class="line">[neutron]</span><br><span class="line">[notifications]</span><br><span class="line">[osapi_v21]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[pci]</span><br><span class="line">[placement]</span><br><span class="line">region_name = RegionOne</span><br><span class="line">project_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">auth_type = password</span><br><span class="line">user_domain_name = Default</span><br><span class="line">auth_url = http://controller:5000/v3</span><br><span class="line">username = placement</span><br><span class="line">password = PLACEMENT_PASS</span><br><span class="line">[powervm]</span><br><span class="line">[privsep]</span><br><span class="line">[profiler]</span><br><span class="line">[quota]</span><br><span class="line">[rdp]</span><br><span class="line">[remote_debug]</span><br><span class="line">[scheduler]</span><br><span class="line">[serial_console]</span><br><span class="line">[service_user]</span><br><span class="line">[spice]</span><br><span class="line">[upgrade_levels]</span><br><span class="line">[vault]</span><br><span class="line">[vendordata_dynamic_auth]</span><br><span class="line">[vmware]</span><br><span class="line">[vnc]</span><br><span class="line">enabled = true</span><br><span class="line">server_listen = 0.0.0.0</span><br><span class="line">server_proxyclient_address = $my_ip</span><br><span class="line">novncproxy_base_url = http://controller:6080/vnc_auto.html</span><br><span class="line">[workarounds]</span><br><span class="line">[wsgi]</span><br><span class="line">[xenserver]</span><br><span class="line">[xvp]</span><br><span class="line">[zvm]</span><br></pre></td></tr></table></figure><h4 id="3-æœ€ç»ˆå®‰è£…ç¡®å®š">(3) æœ€ç»ˆå®‰è£…ç¡®å®š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# egrep -c &#x27;(vmx|svm)&#x27; /proc/cpuinfo</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­¤å‘½ä»¤è¿”å› 1 æˆ–æ›´å¤§çš„å€¼ï¼Œåˆ™æ‚¨çš„è®¡ç®—èŠ‚ç‚¹æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œè¿™é€šå¸¸ä¸éœ€è¦é¢å¤–é…ç½®ã€‚ å¦‚æœæ­¤å‘½ä»¤è¿”å›å€¼ä¸ºé›¶ï¼Œåˆ™æ‚¨çš„è®¡ç®—èŠ‚ç‚¹ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œæ‚¨å¿…é¡»å°† libvirt é…ç½®ä¸ºä½¿ç”¨ QEMU è€Œä¸æ˜¯ KVMã€‚</p><p>ç¼–è¾‘ /etc/nova/nova.conf ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[libvirt]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">...</span></span><br><span class="line">virt_type = qemu</span><br></pre></td></tr></table></figure><h4 id="4-å¯åŠ¨æœåŠ¡">(4) å¯åŠ¨æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# systemctl enable libvirtd.service openstack-nova-compute.service</span><br><span class="line">[root@compute ~]# systemctl start libvirtd.service openstack-nova-compute.service</span><br></pre></td></tr></table></figure><h4 id="5-å°†è®¡ç®—èŠ‚ç‚¹æ·»åŠ åˆ°æ•°æ®åº“ï¼ˆæ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰">(5) å°†è®¡ç®—èŠ‚ç‚¹æ·»åŠ åˆ°æ•°æ®åº“ï¼ˆæ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰</h4><p>ç¡®è®¤æ•°æ®åº“ä¸­æœ‰è®¡ç®—ä¸»æœº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack compute service list --service nova-compute</span><br><span class="line">+----+--------------+---------+------+---------+-------+----------------------------+</span><br><span class="line">| ID | Binary       | Host    | Zone | Status  | State | Updated At                 |</span><br><span class="line">+----+--------------+---------+------+---------+-------+----------------------------+</span><br><span class="line">|  8 | nova-compute | compute | nova | enabled | up    | 2021-08-23T10:04:44.000000 |</span><br><span class="line">+----+--------------+---------+------+---------+-------+----------------------------+</span><br></pre></td></tr></table></figure><p>å‘ç°è®¡ç®—ä¸»æœº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;nova-manage cell_v2 discover_hosts --verbose&quot; nova</span><br><span class="line">Found 2 cell mappings.</span><br><span class="line">Skipping cell0 since it does not contain hosts.</span><br><span class="line">Getting computes from cell &#x27;cell1&#x27;: 771a0328-3035-49f5-951e-0c56e5f636fb</span><br><span class="line">Checking host mapping for compute host &#x27;compute&#x27;: b5efd8e3-c924-4b29-839f-65f4b3f10a2b</span><br><span class="line">Creating host mapping for compute host &#x27;compute&#x27;: b5efd8e3-c924-4b29-839f-65f4b3f10a2b</span><br><span class="line">Found 1 unmapped computes in cell: 771a0328-3035-49f5-951e-0c56e5f636fb</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ–°çš„è®¡ç®—èŠ‚ç‚¹æ—¶ï¼Œæ‚¨å¿…é¡»åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šè¿è¡Œ<code>nova-manage cell_v2 discover_hosts</code>ä»¥æ³¨å†Œè¿™äº›æ–°çš„è®¡ç®—èŠ‚ç‚¹ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥è®¾ç½®é€‚å½“çš„é—´éš”ï¼šç¼–è¾‘<code>/etc/nova/nova.conf</code>æ–‡ä»¶ã€‚é…ç½®å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[scheduler]</span><br><span class="line">discover_hosts_in_cells_interval = 300</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€å‚è€ƒæ–‡ç« ">ä¸‰ã€å‚è€ƒæ–‡ç« </h3><p><strong>æ„Ÿè°¢ä»¥ä¸‹æ–‡ç« å’Œåšä¸»çš„å¸®åŠ©ï¼</strong></p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/wangsirde0428/p/15065125.html">äº‘è®¡ç®—openstackæ ¸å¿ƒç»„ä»¶â€”â€”novaè®¡ç®—æœåŠ¡ - uplee - åšå®¢å›­ (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Palcementï¼ˆäº”ï¼‰</title>
      <link href="/posts/fe757a76305c.html"/>
      <url>/posts/fe757a76305c.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€PalcementåŸºç¡€">ä¸€ã€PalcementåŸºç¡€</h3><h4 id="1ã€PalcementèƒŒæ™¯">1ã€PalcementèƒŒæ™¯</h4><p>ç§æœ‰äº‘çš„ç”¨æˆ·ï¼Œå°¤å…¶æ˜¯ä¼ ç»Ÿ IT æ¶æ„è½¬å‹çš„ç§æœ‰äº‘ç”¨æˆ·ä¸€èˆ¬ä¼šæ‹¥æœ‰å„å¼å„æ ·çš„å­˜é‡èµ„æºç³»ç»Ÿï¼Œä¸è¿™äº›ç³»ç»Ÿå¯¹æ¥ä¼šè®© OpenStack çš„èµ„æºä½“ç³»å˜å¾—å¤æ‚ã€‚</p><p>ä»ç”¨æˆ·çš„è§’åº¦å‡ºå‘ï¼Œæˆ–è®¸ä¼šå¸Œæœ›ï¼š</p><ul><li>ä½œä¸ºä½¿ç”¨å…±äº«å­˜å‚¨è§£å†³æ–¹æ¡ˆçš„ç”¨æˆ·ï¼Œä¼šå¸Œæœ› Nova å’Œ Horizon èƒ½å¤Ÿæ­£ç¡®æŠ¥å‘Šå…±äº«å­˜å‚¨ç£ç›˜èµ„æºçš„æ€»é‡å’Œä½¿ç”¨é‡ä¿¡æ¯ã€‚</li><li>ä½œä¸ºé«˜çº§çš„ Neutron ç”¨æˆ·ï¼Œé¢„æœŸä¼šä½¿ç”¨å¤–éƒ¨çš„ç¬¬ä¸‰æ–¹è·¯ç”±ç½‘ç»œåŠŸèƒ½ï¼Œå¸Œæœ› Nova èƒ½å¤ŸæŒæ¡å’Œä½¿ç”¨ç‰¹å®šçš„ç½‘ç»œç«¯å£ä¸ç‰¹å®šçš„å­ç½‘æ± ç›¸å…³è”ï¼Œç¡®ä¿è™šæ‹Ÿæœºèƒ½å¤Ÿåœ¨è¯¥å­ç½‘æ± ä¸Šå¯åŠ¨ã€‚</li><li>ä½œä¸ºé«˜çº§çš„ Cinder ç”¨æˆ·ï¼Œå¸Œæœ›å½“æˆ‘åœ¨ nova boot å‘½ä»¤ä¸­æŒ‡å®šäº† cinder volume-id å Nova èƒ½å¤ŸçŸ¥é“å“ªä¸€äº›è®¡ç®—èŠ‚ç‚¹ä¸ Request Volume æ‰€åœ¨çš„ Cinder å­˜å‚¨æ± ç›¸å…³è”ã€‚</li></ul><p>æ‰€ä»¥ï¼ŒOpenStack é™¤äº†è¦å¤„ç†è®¡ç®—èŠ‚ç‚¹ CPUï¼Œå†…å­˜ï¼ŒPCI è®¾å¤‡ã€æœ¬åœ°ç£ç›˜ç­‰å†…éƒ¨èµ„æºå¤–ï¼Œè¿˜ç»å¸¸éœ€è¦çº³ç®¡æœ‰å¦‚ SDSã€NFS æä¾›çš„å­˜å‚¨æœåŠ¡ï¼ŒSDN æä¾›çš„ç½‘ç»œæœåŠ¡ç­‰å¤–éƒ¨èµ„æºã€‚</p><p>ä½†åœ¨ä»¥å¾€ï¼ŒNova åªèƒ½å¤„ç†ç”±è®¡ç®—èŠ‚ç‚¹æä¾›çš„èµ„æºã€‚Nova Resource Tracker å‡å®šæ‰€æœ‰èµ„æºå‡æ¥è‡ªè®¡ç®—èŠ‚ç‚¹ï¼Œå› æ­¤åœ¨å‘¨æœŸæ€§ä¸ŠæŠ¥èµ„æºçŠ¶å†µæ—¶ï¼ŒResource Tracker åªä¼šå•çº¯å¯¹è®¡ç®—èŠ‚ç‚¹æ¸…å•è¿›è¡Œèµ„æºæ€»é‡å’Œä½¿ç”¨é‡çš„åŠ å’Œç»Ÿè®¡ã€‚æ˜¾ç„¶ï¼Œè¿™æ— æ³•æ»¡è¶³ä¸Šè¿°å¤æ‚çš„ç”Ÿäº§éœ€æ±‚ï¼Œä¹Ÿè¿èƒŒäº† OpenStack ä¸€å‘èµ–ä»¥è‡ªè±ªçš„å¼€æ”¾æ€§åŸåˆ™ã€‚è€Œä¸”éšç€ OpenStack çš„å®šä¹‰è¢«ç¤¾åŒºè¿›ä¸€æ­¥å‡çº§ä¸ºã€Œä¸€ä¸ªå¼€æºåŸºç¡€è®¾æ–½é›†æˆå¼•æ“ã€ï¼Œæ„å‘³ OpenStack çš„èµ„æºç³»ç»Ÿå°†ä¼šç”±æ›´å¤šå¤–éƒ¨èµ„æºç±»å‹æ„æˆã€‚</p><p>æ‰€ä»¥ï¼Œå½“èµ„æºç±»å‹å’Œæä¾›è€…å˜å¾—å¤šæ ·æ—¶ï¼Œè‡ªç„¶å°±éœ€æ±‚ä¸€ç§é«˜åº¦æŠ½è±¡ä¸”ç®€å•ç»Ÿä¸€çš„ç®¡ç†æ–¹æ³•ï¼Œè®©ç”¨æˆ·å’Œä»£ç èƒ½å¤Ÿä¾¿æ·çš„ä½¿ç”¨ã€ç®¡ç†ã€ç›‘æ§æ•´ä¸ª OpenStack çš„ç³»ç»Ÿèµ„æºï¼Œè¿™å°±æ˜¯ Placementï¼ˆå¸ƒå±€ï¼‰ã€‚</p><h4 id="2ã€é¡¹ç›®ç®€ä»‹">2ã€é¡¹ç›®ç®€ä»‹</h4><p>Placement è‚©è´Ÿç€è¿™æ ·çš„å†å²ä½¿å‘½ï¼Œæœ€æ—©åœ¨ Newton ç‰ˆæœ¬è¢«å¼•å…¥åˆ° openstack/nova repoï¼Œä»¥ API çš„å½¢å¼è¿›è¡Œå­µåŒ–ï¼Œæ‰€ä»¥ä¹Ÿç»å¸¸è¢«ç§°å‘¼ä¸º Placement APIã€‚å®ƒå‚ä¸åˆ° nova-scheduler é€‰æ‹©ç›®æ ‡ä¸»æœºçš„è°ƒåº¦æµç¨‹ä¸­ï¼Œè´Ÿè´£è·Ÿè¸ªè®°å½• Resource Provider çš„ Inventory å’Œ Usageï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„ Resource Classes æ¥åˆ’åˆ†èµ„æºç±»å‹ï¼Œä½¿ç”¨ä¸åŒçš„ Resource Traits æ¥æ ‡è®°èµ„æºç‰¹å¾ã€‚</p><p>Ocata ç‰ˆæœ¬çš„ Placement API æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå»ºè®®ç”¨æˆ·å¯ç”¨å¹¶æ›¿ä»£ CpuFilterã€CoreFilter å’Œ DiskFilterã€‚Pike ç‰ˆæœ¬åˆ™å¼ºåˆ¶è¦æ±‚å¯åŠ¨ Placement API æœåŠ¡ï¼Œå¦åˆ™ nova-compute service æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p><p>Placement API å¼€å§‹äº† openstack/nova repo å‰¥ç¦»æµç¨‹ï¼Œä» Placement API èœ•å˜ä¸º OpenStack Placementï¼Œå¹¶åœ¨ Stein ç‰ˆæœ¬ä¸­æˆä¸ºç‹¬ç«‹é¡¹ç›®ã€‚PlacementæœåŠ¡çš„ç›‘å¬ç«¯å£æ˜¯8778ã€‚</p><h4 id="3ã€å·¥ä½œåŸç†">3ã€å·¥ä½œåŸç†</h4><p>nova-computeå‘placementæŠ¥å‘Šèµ„æºä¿¡æ¯ã€‚nova-scheduleråœ¨å‘placementè¯¢é—®æ»¡è¶³ä¸€ç³»åˆ—èµ„æºè¯·æ±‚çš„èŠ‚ç‚¹çš„åŒæ—¶ï¼Œä»ç„¶ä½¿ç”¨éƒ¨åˆ†ä¿ç•™çš„filterå’Œweightã€‚ï¼ˆç›®å‰placementåªæ›¿ä»£äº† nova-schedulerçš„CpuFilterã€CoreFilter å’Œ DiskFilterå¸¸ç”¨çš„è¿‡æ»¤å™¨ï¼‰</p><p>nova-scheduler å¯¹ placement-api çš„ä¸¤æ¬¡è°ƒç”¨ã€‚ç¬¬ä¸€æ¬¡ï¼Œnova-scheduler å‘ placement-api è·å–ä¸€ç»„ Allocation Candidatesï¼ˆåˆ†é…å€™é€‰äººï¼‰ï¼Œæ‰€è°“ Allocation Candidates å°±æ˜¯èƒ½å¤Ÿæ»¡è¶³èµ„æºéœ€æ±‚çš„ Resource Providerã€‚</p><p>EXAMPLEï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /allocation_candidates?resources=VCPU:1,MEMORY_MB:2048,DISK_GB:100</span><br></pre></td></tr></table></figure><p>NOTEï¼šè·å– Allocation Candidates çš„å®ç°æ˜¯ä¸€ç³»åˆ—å¤æ‚çš„<a href="https://cloud.tencent.com/solution/database?from=10680">æ•°æ®åº“</a>çº§è”æŸ¥è¯¢ä¸è¿‡æ»¤æ“ä½œï¼Œä»¥ query params ä½œä¸ºè¿‡æ»¤æ¡ä»¶ã€‚è¯¥ä¾‹å­ä¼ é€’äº† Launch Instance æ‰€éœ€çš„ vCPUã€RAM å’Œ Disk èµ„æºï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æä¾› required å’Œ member_of å‚æ•°ï¼Œåˆ†åˆ«ç”¨äºæŒ‡å®š Resource Traits å’Œ Resource Provider Aggregate ç‰¹æ€§ï¼Œä½¿ Allocation Candidates çš„è·å–æ–¹å¼æ›´åŠ çµæ´»ã€‚æ›´å¤šè¯¦æƒ…è¯·æµè§ˆ Allocation candidatesã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@control01 ~]<span class="comment"># openstack allocation candidate list --resource VCPU=1,MEMORY_MB=2048,DISK_GB=10 --required HW_CPU_X86_SSE2</span></span><br><span class="line">+---+----------------------------------+--------------------------------------+----------------------------------------------+--------------------------------------------------------------+</span><br><span class="line">| <span class="comment"># | allocation                       | resource provider                    | inventory used/capacity                      | traits                                                       |</span></span><br><span class="line">+---+----------------------------------+--------------------------------------+----------------------------------------------+--------------------------------------------------------------+</span><br><span class="line">| 1 | VCPU=1,MEMORY_MB=2048,DISK_GB=10 | 5c5a578f-51b0-481c-b38c-7aaa3394e585 | VCPU=5/512,MEMORY_MB=3648/60670,DISK_GB=7/49 | HW_CPU_X86_SSE2,HW_CPU_X86_SSE,HW_CPU_X86_MMX,HW_CPU_X86_SVM |</span><br><span class="line">+---+----------------------------------+--------------------------------------+----------------------------------------------+--------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p>placement-api è¿”å›ç»™ nova-scheduler çš„ JSON object with a list of allocation requests and a JSON object of provider summary objects æ•°æ®ç»“æ„å¦‚ä¸‹ï¼Œå…³é”®åœ¨äº allocation_requests å’Œ provider_summaries ä¸¤ä¸ªå­—æ®µï¼Œå®ƒä»¬åœ¨åç»­çš„ Scheduler Filters é€»è¾‘ä¸­ä¹Ÿå‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;allocation_requests&quot;</span>: [</span><br><span class="line">    &lt;<span class="variable constant_">ALLOCATION_REQUEST_1</span>&gt;,</span><br><span class="line">    ...</span><br><span class="line">    &lt;<span class="variable constant_">ALLOCATION_REQUEST_N</span>&gt;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;provider_summaries&quot;</span>: &#123;</span><br><span class="line">    &lt;<span class="variable constant_">COMPUTE_NODE_UUID_1</span>&gt;: &lt;<span class="variable constant_">PROVIDER_SUMMARY_1</span>&gt;,</span><br><span class="line">    ...</span><br><span class="line">    &lt;<span class="variable constant_">COMPUTE_NODE_UUID_N</span>&gt;: &lt;<span class="variable constant_">PROVIDER_SUMMARY_N</span>&gt;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>allocation_requestsï¼šåŒ…å«äº†æ‰€æœ‰èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„ resource provider åŠå…¶é¢„æœŸåˆ†é…çš„èµ„æºæ¸…å•ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;allocation_requests&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;allocations&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;a99bad54-a275-4c4f-a8a3-ac00d57e5c64&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;DISK_GB&quot;</span>: 100</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;35791f28-fb45-4717-9ea9-435b3ef7c3b3&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;VCPU&quot;</span>: 1,</span><br><span class="line">                        <span class="string">&quot;MEMORY_MB&quot;</span>: 1024</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;allocations&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;a99bad54-a275-4c4f-a8a3-ac00d57e5c64&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;DISK_GB&quot;</span>: 100</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;915ef8ed-9b91-4e38-8802-2e4224ad54cd&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;VCPU&quot;</span>: 1,</span><br><span class="line">                        <span class="string">&quot;MEMORY_MB&quot;</span>: 1024</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><p>provider_summariesï¼šåŒ…å«äº†æ‰€æœ‰æ»¡è¶³éœ€æ±‚çš„ resource providers çš„å„é¡¹èµ„æºæ€»é‡å’Œä½¿ç”¨é‡ä¿¡æ¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">&quot;provider_summaries&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;a99bad54-a275-4c4f-a8a3-ac00d57e5c64&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;DISK_GB&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 1900</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;traits&quot;</span>: [<span class="string">&quot;MISC_SHARES_VIA_AGGREGATE&quot;</span>],</span><br><span class="line">            <span class="string">&quot;parent_provider_uuid&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;root_provider_uuid&quot;</span>: <span class="string">&quot;a99bad54-a275-4c4f-a8a3-ac00d57e5c64&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;35791f28-fb45-4717-9ea9-435b3ef7c3b3&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;VCPU&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 384</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;MEMORY_MB&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 196608</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;traits&quot;</span>: [<span class="string">&quot;HW_CPU_X86_SSE2&quot;</span>, <span class="string">&quot;HW_CPU_X86_AVX2&quot;</span>],</span><br><span class="line">            <span class="string">&quot;parent_provider_uuid&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;root_provider_uuid&quot;</span>: <span class="string">&quot;35791f28-fb45-4717-9ea9-435b3ef7c3b3&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;915ef8ed-9b91-4e38-8802-2e4224ad54cd&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;VCPU&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 384</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;MEMORY_MB&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 196608</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;traits&quot;</span>: [<span class="string">&quot;HW_NIC_SRIOV&quot;</span>],</span><br><span class="line">            <span class="string">&quot;parent_provider_uuid&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;root_provider_uuid&quot;</span>: <span class="string">&quot;915ef8ed-9b91-4e38-8802-2e4224ad54cd&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;f5120cad-67d9-4f20-9210-3092a79a28cf&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;resources&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;SRIOV_NET_VF&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;used&quot;</span>: 0,</span><br><span class="line">                    <span class="string">&quot;capacity&quot;</span>: 8</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;traits&quot;</span>: [],</span><br><span class="line">            <span class="string">&quot;parent_provider_uuid&quot;</span>: <span class="string">&quot;915ef8ed-9b91-4e38-8802-2e4224ad54cd&quot;</span>,</span><br><span class="line">            <span class="string">&quot;root_provider_uuid&quot;</span>: <span class="string">&quot;915ef8ed-9b91-4e38-8802-2e4224ad54cd&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">NOTEï¼šå¯ä»¥çœ‹å‡º SRIOV_NET_VF äº¦è¢«å½“åšä¸ºä¸€ç§èµ„æºç±»å‹ï¼Œç”±ä¸“é—¨çš„ resource provider æä¾›ã€‚</span><br></pre></td></tr></table></figure><p>nova-scheduler åœ¨è·å¾—äº† Allocation Candidates ä¹‹åå†è¿›ä¸€æ­¥é€šè¿‡ Filtered å’Œ Weighed æœºåˆ¶æ¥æœ€ç»ˆç¡®å®šç›®æ ‡ä¸»æœºã€‚ç„¶åå†æ ¹æ® allocation requests å’Œ provider summaries çš„æ•°æ®æ¥æ‰£é™¤ï¼ˆclaim_resourcesï¼‰ç›®æ ‡ä¸»æœºå¯¹åº”çš„ resource provider çš„èµ„æºä½¿ç”¨é‡ï¼Œè¿™å°±æ˜¯ nova-scheduler ç¬¬äºŒæ¬¡è°ƒç”¨ placement-api æ‰€åšçš„äº‹æƒ…ã€‚å›é¡¾ä¸€ä¸‹ allocations tables çš„å†…å®¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [nova_api]&gt; <span class="keyword">select</span> * from allocations;</span><br><span class="line">+---------------------+------------+----+----------------------+--------------------------------------+-------------------+------+</span><br><span class="line">| created_at          | updated_at | <span class="built_in">id</span> | resource_provider_id | consumer_id                          | resource_class_id | used |</span><br><span class="line">+---------------------+------------+----+----------------------+--------------------------------------+-------------------+------+</span><br><span class="line">| 2018-08-01 10:52:15 | NULL       |  7 |                    1 | f8d55035-389c-47b8-beea-02f00f25f5d9 |                 0 |    1 |</span><br><span class="line">| 2018-08-01 10:52:15 | NULL       |  8 |                    1 | f8d55035-389c-47b8-beea-02f00f25f5d9 |                 1 |  512 |</span><br><span class="line">| 2018-08-01 10:52:15 | NULL       |  9 |                    1 | f8d55035-389c-47b8-beea-02f00f25f5d9 |                 2 |    1 |</span><br><span class="line">+---------------------+------------+----+----------------------+--------------------------------------+-------------------+------+</span><br><span class="line"><span class="comment"># consumer_id æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"># resource_class_id èµ„æºç±»å‹</span></span><br><span class="line"><span class="comment"># resource_provider_id èµ„æºæä¾›è€…</span></span><br><span class="line"><span class="comment"># used åˆ†é…çš„æ•°é‡</span></span><br><span class="line"><span class="comment"># ä¸Šè¿°è®°å½•è¡¨ç¤ºä¸ºè™šæ‹Ÿæœºåˆ†é…äº† vCPU 1é¢—ï¼ŒRAM 512MBï¼ŒDisk 1GB</span></span><br><span class="line">æ˜¾ç„¶ï¼Œå…¶ä¸­çš„ Consumer æ¶ˆè´¹è€…å°±æ˜¯è¦åˆ›å»ºçš„è™šæ‹Ÿæœºäº†ã€‚</span><br></pre></td></tr></table></figure><h3 id="äºŒã€Palcement-é…ç½®">äºŒã€Palcement é…ç½®</h3><h4 id="1-mysql-åˆ›å»ºæ•°æ®åº“å¹¶æˆæƒ">(1)  mysql åˆ›å»ºæ•°æ®åº“å¹¶æˆæƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç™»é™†mysql ï¼Œå¦‚æœæœ‰å¯†ç åˆ™ä½¿ç”¨ mysql -u root -p</span></span><br><span class="line">[root@controller ~]# mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºæ•°æ®åº“ placement</span></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE placement;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æˆäºˆæƒé™</span></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON placement.* TO &#x27;placement&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;PLACEMENT_DBPASS&#x27;;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON placement.* TO &#x27;placement&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;PLACEMENT_DBPASS&#x27;;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é€€å‡ºæ•°æ®åº“</span></span><br><span class="line">MariaDB [(none)]&gt; quit</span><br></pre></td></tr></table></figure><br/><h4 id="2-åœ¨Keystoneä¸Šåˆ›å»ºç”¨æˆ·ï¼Œå…³è”è§’è‰²">(2) åœ¨Keystoneä¸Šåˆ›å»ºç”¨æˆ·ï¼Œå…³è”è§’è‰²</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºplacementç”¨æˆ·</span></span><br><span class="line">[root@controller ~]<span class="comment"># openstack user create --domain default --password PLACEMENT_PASS placement</span></span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | default                          |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| <span class="built_in">id</span>                  | dd6e8e32bf864e9ca9f5fedf287571ca |</span><br><span class="line">| name                | placement                        |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³è”è§’è‰²</span></span><br><span class="line">[root@controller ~]<span class="comment"># openstack role add --project service --user placement admin</span></span><br></pre></td></tr></table></figure><br/><h4 id="3-åœ¨Keystoneä¸Šæ³¨å†ŒAPI">(3) åœ¨Keystoneä¸Šæ³¨å†ŒAPI</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºAPIæœåŠ¡</span></span><br><span class="line">[root@controller ~]# openstack service create --name placement  --description &quot;Placement API&quot; placement</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | Placement API                    |</span><br><span class="line">| enabled     | True                             |</span><br><span class="line">| id          | 1fccd7613fd64af0988285fa0378a234 |</span><br><span class="line">| name        | placement                        |</span><br><span class="line">| type        | placement                        |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºendpoint</span></span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne placement public http://controller:8778</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | 066b909623d345908cd9123ad1141066 |</span><br><span class="line">| interface    | public                           |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 1fccd7613fd64af0988285fa0378a234 |</span><br><span class="line">| service_name | placement                        |</span><br><span class="line">| service_type | placement                        |</span><br><span class="line">| url          | http://controller:8778           |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line"></span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne placement internal http://controller:8778</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | e2e9f8f703ff4c8da5819bd31f975347 |</span><br><span class="line">| interface    | internal                         |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 1fccd7613fd64af0988285fa0378a234 |</span><br><span class="line">| service_name | placement                        |</span><br><span class="line">| service_type | placement                        |</span><br><span class="line">| url          | http://controller:8778           |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line"></span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne placement admin http://controller:8778</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | be55ca7fbda841449ee467fb820e4eb6 |</span><br><span class="line">| interface    | admin                            |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 1fccd7613fd64af0988285fa0378a234 |</span><br><span class="line">| service_name | placement                        |</span><br><span class="line">| service_type | placement                        |</span><br><span class="line">| url          | http://controller:8778           |</span><br><span class="line">+--------------+----------------------------------+</span><br></pre></td></tr></table></figure><h4 id="4-å®‰è£…placementæœåŠ¡">(4) å®‰è£…placementæœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install openstack-placement-api -y</span><br></pre></td></tr></table></figure><h4 id="5-ä¿®æ”¹placementé…ç½®æ–‡ä»¶">(5) ä¿®æ”¹placementé…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cp /etc/placement/placement.conf /etc/placement/placement.conf.bak</span><br><span class="line">[root@controller ~]# grep -Ev &quot;^#|^$&quot; /etc/placement/placement.conf.bak &gt; /etc/placement/placement.conf</span><br><span class="line">[root@controller ~]# vi /etc/placement/placement.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">[api]</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">[cors]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">auth_url = http://controller:5000/v3</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = Default</span><br><span class="line">user_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">username = placement</span><br><span class="line">password = PLACEMENT_PASS</span><br><span class="line">[oslo_policy]</span><br><span class="line">[placement]</span><br><span class="line">[placement_database]</span><br><span class="line">connection = mysql+pymysql://placement:PLACEMENT_DBPASS@controller/placement</span><br><span class="line">[profiler]</span><br></pre></td></tr></table></figure><h4 id="6-åŒæ­¥æ•°æ®åº“">(6) åŒæ­¥æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;placement-manage db sync&quot; placement</span><br></pre></td></tr></table></figure><h4 id="7-ä¿®æ”¹httpdé…ç½®æ–‡ä»¶ï¼ˆæ­¤å¤„ä¸ºbugï¼‰">(7) ä¿®æ”¹httpdé…ç½®æ–‡ä»¶ï¼ˆæ­¤å¤„ä¸ºbugï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/httpd/conf.d/00-placement-api.conf </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æœ«å°¾æ·»åŠ ï¼š</span></span><br><span class="line">&lt;Directory /usr/bin&gt;            #æ­¤å¤„æ˜¯bugï¼Œå¿…é¡»æ·»åŠ ä¸‹é¢çš„é…ç½®æ¥å¯ç”¨å¯¹placement apiçš„è®¿é—®ï¼Œå¦åˆ™åœ¨è®¿é—®apacheçš„</span><br><span class="line">&lt;IfVersion &gt;= 2.4&gt;                  #apiæ—¶ä¼šæŠ¥403ï¼›æ·»åŠ åœ¨æ–‡ä»¶çš„æœ€åå³å¯</span><br><span class="line">  Require all granted</span><br><span class="line">&lt;/IfVersion&gt;</span><br><span class="line">&lt;IfVersion &lt; 2.4&gt;                   #apacheç‰ˆæœ¬ï¼›å…è®¸apacheè®¿é—®/usr/binç›®å½•ï¼›å¦åˆ™/usr/bin/placement-apiå°†ä¸å…è®¸è¢«è®¿é—®</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow from all                        #å…è®¸apacheè®¿é—®</span><br><span class="line">&lt;/IfVersion&gt;</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><h4 id="8-é‡å¯httpdæœåŠ¡">(8) é‡å¯httpdæœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl restart httpd</span><br></pre></td></tr></table></figure><h4 id="9-éªŒè¯">(9) éªŒè¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ‰§è¡ŒçŠ¶æ€æ£€æŸ¥</span></span><br><span class="line">[root@controller ~]# placement-status upgrade check</span><br><span class="line">+----------------------------------+</span><br><span class="line">| Upgrade Check Results            |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| Check: Missing Root Provider IDs |</span><br><span class="line">| Result: Success                  |</span><br><span class="line">| Details: None                    |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| Check: Incomplete Consumers      |</span><br><span class="line">| Result: Success                  |</span><br><span class="line">| Details: None                    |</span><br><span class="line">+----------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€å‚è€ƒæ–‡ç« ">ä¸‰ã€å‚è€ƒæ–‡ç« </h3><p><strong>æ„Ÿè°¢ä»¥ä¸‹æ–‡ç« å’Œåšä¸»çš„å¸®åŠ©ï¼</strong></p><p><a href="https://cloud.tencent.com/developer/article/1440332">OpenStack Placement - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Glanceï¼ˆå››ï¼‰</title>
      <link href="/posts/f4203fff5e53.html"/>
      <url>/posts/f4203fff5e53.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€GlanceåŸºç¡€">ä¸€ã€GlanceåŸºç¡€</h3><h4 id="1ã€Glanceæ¦‚è¿°">1ã€Glanceæ¦‚è¿°</h4><p>å®ƒåœ¨OpenStackä¸­çš„é¡¹ç›®åç§°ä¸ºGlanceï¼Œåœ¨æ—©æœŸçš„OpenStackç‰ˆæœ¬ä¸­ï¼ŒGlanceåªæœ‰ç®¡ç†é•œåƒçš„åŠŸèƒ½ï¼Œå¹¶ä¸å…·å¤‡é•œåƒå­˜å‚¨åŠŸèƒ½ï¼Œç°åœ¨Glanceå·²å‘å±•æˆä¸ºé•œåƒä¸Šä¼ ã€æ£€ç´¢ã€ç®¡ç†å’Œå­˜å‚¨ç­‰å¤šç§åŠŸèƒ½çš„OpenStackæ ¸å¿ƒæœåŠ¡ã€‚æˆ‘ä»¬åŸºäºOpenstackæ˜¯æ„å»ºåŸºæœ¬çš„IaaSå¹³å°å¯¹å¤–æä¾›è™šæ‹Ÿæœºï¼Œè€Œè™šæ‹Ÿæœºåœ¨åˆ›å»ºæ—¶å¿…é¡»ä¸ºé€‰æ‹©éœ€è¦å®‰è£…çš„æ“ä½œç³»ç»Ÿï¼ŒGlanceæœåŠ¡å°±æ˜¯ä¸ºè¯¥é€‰æ‹©æä¾›ä¸åŒçš„æ“ä½œç³»ç»Ÿé•œåƒã€‚</p><h4 id="2ã€Glanceç»„ä»¶">2ã€Glanceç»„ä»¶</h4><img src="https://www.whbblog.cn/usr/uploads/2021/08/1315277931.png" style="zoom:67%;" /><ul><li><strong>Glance-API</strong></li></ul><p>ä¸»è¦ç”¨æ¥å“åº”å„ç§RESTè¯·æ±‚ç„¶åé€šè¿‡å…¶å®ƒæ¨¡å—ï¼ˆä¸»è¦æ˜¯glance-registryç»„ä»¶å’Œåç«¯å­˜å‚¨æ¥å£ï¼‰å®Œæˆé•œåƒçš„ä¸Šä¼ ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰æ“ä½œã€‚å¯ä»¥ç®€å•çš„å†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸€å±‚ä¸­é—´ä»¶ï¼Œå®ƒä¸»è¦æ˜¯åšä¸€äº›å¯¹è¯·æ±‚çš„è§£æå·¥ä½œï¼ˆå¦‚åˆ†æå‡ºç‰ˆæœ¬å·ï¼‰ï¼Œ å¦å¤–ä¸€éƒ¨åˆ†æä¾›å®é™…çš„æœåŠ¡ï¼ˆå¦‚ä¸é•œåƒä¸Šä¼ ä¸‹è½½çš„åç«¯å­˜å‚¨æ¥å£äº¤äº’ï¼‰ã€‚é»˜è®¤ç»‘å®šç«¯å£æ˜¯9292ã€‚</p><ul><li><strong>Glance-Registry</strong></li></ul><p>é•œåƒæ³¨å†ŒæœåŠ¡ç”¨äºæä¾›é•œåƒå…ƒæ•°æ®çš„RESTæ¥å£ã€‚ä¸»è¦å·¥ä½œæ˜¯å­˜å‚¨æˆ–è€…è·å–é•œåƒçš„å…ƒæ•°æ®ï¼Œä¸MySQLæ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚ä¹Ÿå¯ä»¥ç®€å•çš„å†ç»†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ŒAPIå’Œå…·ä½“çš„Serverã€‚å…ƒæ•°æ®æ˜¯æŒ‡é•œåƒç›¸å…³çš„ä¸€äº›ä¿¡æ¯ï¼ˆå¦‚idï¼Œsizeï¼Œ statusï¼Œlocationï¼Œchecksumï¼Œmin_diskï¼Œmin_ramï¼Œownerç­‰ï¼‰çœŸæ­£çš„é•œåƒæ•°æ®ä¿å­˜åœ¨å®é™…æ‰€ä½¿ç”¨çš„åç«¯å­˜å‚¨é‡Œï¼ˆå¦‚Swiftï¼ŒS3ï¼ŒFilesystemç­‰ï¼‰ã€‚é»˜è®¤ç»‘å®šçš„ç«¯å£æ˜¯9191ã€‚</p><ul><li><strong>database (db)</strong></li></ul><p>image çš„ metadata éƒ½ä¿å­˜åœ¨ database ä¸­ï¼Œé»˜è®¤ MySQLã€‚</p><ul><li><strong>store backend</strong></li></ul><p>ä¸¥æ ¼æ¥è¯´store backendä¸å±äºGlanceçš„ç»„ä»¶ï¼Œè¿™é‡ŒæŠŠå®ƒå•ç‹¬åˆ†å‡ºæ¥åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¥å£å±‚ï¼Œæä¾›é•œåƒå­˜å‚¨å’ŒæŸ¥è¯¢çš„æ¥å£ã€‚å…·ä½“çš„å®ç°åˆ™éœ€è¦å¤–éƒ¨å­˜å‚¨ï¼ˆSwiftï¼ŒS3ï¼Œç­‰ï¼‰çš„æ”¯æŒã€‚</p><h3 id="äºŒã€Glanceé…ç½®">äºŒã€Glanceé…ç½®</h3><h4 id="1-mysql-åˆ›åº“æˆæƒ">(1) mysql åˆ›åº“æˆæƒ</h4><ul><li>ç™»é™†æ•°æ®åº“ï¼Œæ— å¯†ç çš„è¯ç›´æ¥ mysql å›è½¦å³å¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mysql -u root -p</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºglanceæ•°æ®åº“</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE DATABASE glance;</span><br></pre></td></tr></table></figure><ul><li>æˆäºˆå¯¹glanceæ•°æ®åº“çš„æ­£ç¡®è®¿é—®æƒé™</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON glance.* TO &#x27;glance&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;GLANCE_DBPASS&#x27;;</span><br><span class="line">MariaDB [(none)]&gt;  GRANT ALL PRIVILEGES ON glance.* TO &#x27;glance&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;GLANCE_DBPASS&#x27;;</span><br><span class="line">MariaDB [(none)]&gt; quit</span><br></pre></td></tr></table></figure><h4 id="2-åœ¨keystoneåˆ›å»ºæœåŠ¡ç”¨æˆ·-å¹¶å…³è”è§’è‰²">(2) åœ¨keystoneåˆ›å»ºæœåŠ¡ç”¨æˆ·,å¹¶å…³è”è§’è‰²</h4><ul><li>åˆ›å»ºç”¨æˆ·</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack user create --domain default --password GLANCE_PASS  glance</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | default                          |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| id                  | 01066dd3eacc47a09d71b0d7c18b743e |</span><br><span class="line">| name                | glance                           |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br></pre></td></tr></table></figure><ul><li>ç»™ glance å…³è” admin è§’è‰²</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack role add --project service --user glance admin</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»º glance æœåŠ¡å®ä¾‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack service create --name glance --description &quot;OpenStack Image&quot; image</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | OpenStack Image                  |</span><br><span class="line">| enabled     | True                             |</span><br><span class="line">| id          | 8d22c9ed24f244f9b5c2bc9e175a497d |</span><br><span class="line">| name        | glance                           |</span><br><span class="line">| type        | image                            |</span><br><span class="line">+-------------+----------------------------------+</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨keystoneä¸Šæ³¨å†Œapiè®¿é—®åœ°å€">(3) åœ¨keystoneä¸Šæ³¨å†Œapiè®¿é—®åœ°å€</h4><ul><li>åˆ›å»ºé•œåƒæœåŠ¡API</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne image public http://controller:9292</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | 4119b06d329e4a16b4546286cf3f946c |</span><br><span class="line">| interface    | public                           |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 8d22c9ed24f244f9b5c2bc9e175a497d |</span><br><span class="line">| service_name | glance                           |</span><br><span class="line">| service_type | image                            |</span><br><span class="line">| url          | http://controller:9292           |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne image public http://controller:9292</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | 97220fed62fe4c919fb1531e53e27840 |</span><br><span class="line">| interface    | public                           |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 8d22c9ed24f244f9b5c2bc9e175a497d |</span><br><span class="line">| service_name | glance                           |</span><br><span class="line">| service_type | image                            |</span><br><span class="line">| url          | http://controller:9292           |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne image admin http://controller:9292</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field        | Value                            |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled      | True                             |</span><br><span class="line">| id           | 58ca9263e57b44079fea0b514e0b6157 |</span><br><span class="line">| interface    | admin                            |</span><br><span class="line">| region       | RegionOne                        |</span><br><span class="line">| region_id    | RegionOne                        |</span><br><span class="line">| service_id   | 8d22c9ed24f244f9b5c2bc9e175a497d |</span><br><span class="line">| service_name | glance                           |</span><br><span class="line">| service_type | image                            |</span><br><span class="line">| url          | http://controller:9292           |</span><br><span class="line">+--------------+----------------------------------+</span><br></pre></td></tr></table></figure><h4 id="4-å®‰è£…-openstack-glance-è½¯ä»¶åŒ…">(4) å®‰è£… openstack-glance è½¯ä»¶åŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install openstack-glance -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨ï¼šCentOS 8 å®‰è£…ä¼šæŠ¥é”™ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</span></span><br><span class="line">[root@controller yum.repos.d]# yum install -y openstack-glance                                                                                         Repository extras is listed more than once in the configuration</span><br><span class="line">Last metadata expiration check: 0:00:40 ago on Tue 24 Aug 2021 10:38:15 PM CST.</span><br><span class="line">Error: </span><br><span class="line"> Problem: package openstack-glance-1:19.0.4-1.el8.noarch requires python3-glance = 1:19.0.4-1.el8, but none of the providers can be installed</span><br><span class="line">  - cannot install the best candidate for the job</span><br><span class="line">  - nothing provides python3-httplib2 needed by python3-glance-1:19.0.4-1.el8.noarch</span><br><span class="line">  - nothing provides python3-pyxattr needed by python3-glance-1:19.0.4-1.el8.noarch</span><br><span class="line">(try to add &#x27;--skip-broken&#x27; to skip uninstallable packages or &#x27;--nobest&#x27; to use not only best candidate packages)</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼šä¸‹è½½ python3-httplib2ï¼Œpython3-pyxattr å¹¶å®‰è£… å†æ‰§è¡Œ yum install openstack-glance -y</span><br><span class="line">[root@controller rpmpackage]# wget https://rpmfind.net/linux/centos/8.3.2011/PowerTools/x86_64/os/Packages/python3-pyxattr-0.5.3-18.el8.x86_64.rpm</span><br><span class="line">[root@controller rpmpackage]# sudo rpm -i python3-pyxattr-0.5.3-18.el8.x86_64.rpm</span><br><span class="line">[root@controller rpmpackage]# sudo wget https://rpmfind.net/linux/centos/8.3.2011/PowerTools/x86_64/os/Packages/python3-httplib2-0.10.3-4.el8.noarch.rpm</span><br><span class="line">[root@controller rpmpackage]# sudo rpm -i python3-httplib2-0.10.3-4.el8.noarch.rpm</span><br></pre></td></tr></table></figure><h4 id="5-ä¿®æ”¹glanceé…ç½®æ–‡ä»¶">(5) ä¿®æ”¹glanceé…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cp /etc/glance/glance-api.conf /etc/glance/glance-api.conf.bak</span><br><span class="line">[root@controller ~]# grep -Ev &quot;^#|^$&quot; /etc/glance/glance-api.conf.bak &gt; /etc/glance/glance-api.conf</span><br><span class="line">[root@controller ~]# vi /etc/glance/glance-api.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">[cinder]</span><br><span class="line">[cors]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance</span><br><span class="line">[file]</span><br><span class="line">[glance.store.http.store]</span><br><span class="line">[glance.store.rbd.store]</span><br><span class="line">[glance.store.sheepdog.store]</span><br><span class="line">[glance.store.swift.store]</span><br><span class="line">[glance.store.vmware_datastore.store]</span><br><span class="line">[glance_store]</span><br><span class="line">stores = file,http</span><br><span class="line">default_store = file</span><br><span class="line">filesystem_store_datadir = /var/lib/glance/images/</span><br><span class="line">[image_format]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">www_authenticate_uri  = http://controller:5000</span><br><span class="line">auth_url = http://controller:5000</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = Default</span><br><span class="line">user_domain_name = Default</span><br><span class="line">project_name = service</span><br><span class="line">username = glance</span><br><span class="line">password = GLANCE_PASS</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[paste_deploy]</span><br><span class="line">flavor = keystone</span><br><span class="line">[profiler]</span><br><span class="line">[store_type_location_strategy]</span><br><span class="line">[task]</span><br><span class="line">[taskflow_executor]</span><br></pre></td></tr></table></figure><h4 id="6-åŒæ­¥æ•°æ®åº“">(6) åŒæ­¥æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;glance-manage db_sync&quot; glance</span><br></pre></td></tr></table></figure><h4 id="7-å¯åŠ¨æœåŠ¡">(7) å¯åŠ¨æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl enable openstack-glance-api.service</span><br><span class="line">[root@controller ~]# systemctl start openstack-glance-api.service</span><br></pre></td></tr></table></figure><h4 id="8-éªŒè¯æœåŠ¡">(8) éªŒè¯æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@controller /]# openstack image create &quot;cirros&quot;   --file cirros-0.4.0-x86_64-disk.img   --disk-format qcow2 --container-format bare   --public</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                                                                                                                                                      |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| checksum         | 443b7623e27ecf03dc9e01ee93f67afe                                                                                                                                                           |</span><br><span class="line">| container_format | bare                                                                                                                                                                                       |</span><br><span class="line">| created_at       | 2021-08-22T04:25:56Z                                                                                                                                                                       |</span><br><span class="line">| disk_format      | qcow2                                                                                                                                                                                      |</span><br><span class="line">| file             | /v2/images/c35fcda2-bbed-470c-8b1d-68c2f42afeba/file                                                                                                                                       |</span><br><span class="line">| id               | c35fcda2-bbed-470c-8b1d-68c2f42afeba                                                                                                                                                       |</span><br><span class="line">| min_disk         | 0                                                                                                                                                                                          |</span><br><span class="line">| min_ram          | 0                                                                                                                                                                                          |</span><br><span class="line">| name             | cirros                                                                                                                                                                                     |</span><br><span class="line">| owner            | 37297436d3384cf18dde714da386d2af                                                                                                                                                           |</span><br><span class="line">| properties       | os_hash_algo=&#x27;sha512&#x27;, os_hash_value=&#x27;6513f21e44aa3da349f248188a44bc304a3653a04122d8fb4535423c8e1d14cd6a153f735bb0982e2161b5b5186106570c17a9e58b64dd39390617cd5a350f78&#x27;, os_hidden=&#x27;False&#x27; |</span><br><span class="line">| protected        | False                                                                                                                                                                                      |</span><br><span class="line">| schema           | /v2/schemas/image                                                                                                                                                                          |</span><br><span class="line">| size             | 12716032                                                                                                                                                                                   |</span><br><span class="line">| status           | active                                                                                                                                                                                     |</span><br><span class="line">| tags             |                                                                                                                                                                                            |</span><br><span class="line">| updated_at       | 2021-08-22T04:25:56Z                                                                                                                                                                       |</span><br><span class="line">| virtual_size     | None                                                                                                                                                                                       |</span><br><span class="line">| visibility       | public                                                                                                                                                                                     |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€å‚è€ƒæ–‡ç« ">ä¸‰ã€å‚è€ƒæ–‡ç« </h3><p><strong>æ„Ÿè°¢ä»¥ä¸‹æ–‡ç« å’Œåšä¸»çš„å¸®åŠ©ï¼</strong></p><p><a href="https://www.jianshu.com/p/366551923232">ç©è½¬ OpenStackï¼ˆå››ï¼‰Keystoneã€Glance - ç®€ä¹¦ (jianshu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Keystoneï¼ˆä¸‰ï¼‰</title>
      <link href="/posts/620260e4dd3a.html"/>
      <url>/posts/620260e4dd3a.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Keytone-åŸºç¡€">ä¸€ã€Keytone åŸºç¡€</h2><h3 id="1ã€åŸºç¡€ä»‹ç»">1ã€åŸºç¡€ä»‹ç»</h3><p>Keystone (OpenStack ldentityServiceï¼‰æ˜¯OpenStackä¸­çš„ä¸€ä¸ªç‹¬ç«‹çš„æä¾›å®‰å…¨è®¤è¯çš„æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£openstackç”¨æˆ·çš„èº«ä»½è®¤è¯ã€ä»¤ç‰Œç®¡ç†ã€æä¾›è®¿é—®èµ„æºçš„æœåŠ¡ç›®å½•(æŒ‡å¼•è·¯å¾„)ã€ä»¥åŠåŸºäºç”¨æˆ·è§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚</p><p>Keystoneç±»ä¼¼ä¸€ä¸ªæœåŠ¡æ€»çº¿ï¼Œæˆ–è€…è¯´æ˜¯æ•´ä¸ªOpenstackæ¡†æ¶çš„æ³¨å†Œè¡¨ï¼Œå…¶ä»–æœåŠ¡é€šè¿‡keystoneæ¥æ³¨å†Œå…¶æœåŠ¡çš„Endpoint(æœåŠ¡è®¿é—®çš„URL)ï¼Œä»»ä½•æœåŠ¡ä¹‹é—´ç›¸äº’çš„è°ƒç”¨ï¼Œéœ€è¦ç»è¿‡Keystoneçš„èº«ä»½éªŒè¯ï¼Œæ¥è·å¾—ç›®æ ‡æœåŠ¡çš„Endpointæ¥æ‰¾åˆ°ç›®æ ‡æœåŠ¡ã€‚</p><h3 id="2ã€åŠŸèƒ½">2ã€åŠŸèƒ½</h3><p>å®é™…ä¸Šæ‰€æœ‰çš„ç»„ä»¶éƒ½ä¾èµ–keystone(å•ç‚¹çš„)ï¼Œå®ƒé›†æˆäº†ä¸‰ä¸ªåŠŸèƒ½ï¼š</p><p>(1) ç®¡ç†èº«ä»½éªŒè¯(managing authentication)ï¼šéªŒè¯ç”¨æˆ·èº«ä»½ã€‚</p><p>(2) æˆæƒ(authorization):åŸºäºè§’è‰²roleçš„æƒé™ç®¡ç†ã€‚</p><p>(3) æœåŠ¡ç›®å½•(catalog of services)ï¼šææœåŠ¡ç›®å½•(ServiceCatalogï¼šåŒ…æ‹¬serviceå’Œendpoint)æœåŠ¡ï¼Œç±»ä¼¼äºUDDIæœåŠ¡çš„æ¦‚å¿µï¼Œç”¨æˆ·(æ— è®ºæ˜¯Dashboard, APIClient)éƒ½éœ€è¦è®¿é—®Keystoneè·å–æœåŠ¡åˆ—è¡¨ï¼Œä»¥åŠæ¯ä¸ªæœåŠ¡çš„åœ°å€(Openstackä¸­ç§°ä¸ºEndpoint)ã€‚</p><h3 id="3ã€Keystoneæ¦‚å¿µè¯´æ˜">3ã€Keystoneæ¦‚å¿µè¯´æ˜</h3><h4 id="1-user">(1) user</h4><p>ä½¿ç”¨Openstackç»„ä»¶çš„å®¢æˆ·ç«¯å¯ä»¥æ˜¯äººã€æœåŠ¡ã€ç³»ç»Ÿï¼Œä»»ä½•çš„å®¢æˆ·ç«¯æ¥è®¿é—®openstackç»„ä»¶ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªç”¨æˆ·åã€‚</p><h4 id="2-Credentials">(2) Credentials</h4><p>ç”¨äºç¡®è®¤ç”¨æˆ·èº«ä»½çš„å‡­è¯ï¼Œè¯´ç™½äº†å°±æ˜¯â€˜ä¿¡ç‰©â€™ï¼Œå…·ä½“å¯ä»¥æ˜¯:</p><p>a. ç”¨æˆ·åå’Œå¯†ç </p><p>b. ç”¨æˆ·åå’ŒAPI key</p><p>c. ä¸€ä¸ª Keystone åˆ†é…çš„èº«ä»½token</p><h4 id="3-Authentication">(3) Authentication</h4><p>éªŒè¯ç”¨æˆ·èº«ä»½çš„è¿‡ç¨‹ã€‚Keystone æœåŠ¡é€šè¿‡æ£€æŸ¥ç”¨æˆ·çš„ Credential æ¥ç¡®å®šç”¨æˆ·çš„èº«ä»½ã€‚</p><p>æœ€å¼€å§‹ï¼Œä½¿ç”¨ç”¨æˆ·å/å¯†ç æˆ–è€…ç”¨æˆ·å/API keyä½œä¸ºcredentialã€‚å½“ç”¨æˆ·çš„credentialè¢«éªŒè¯åï¼ŒKestone ä¼šç»™ç”¨æˆ·åˆ†é…ä¸€ä¸ª authentication token ä¾›è¯¥ç”¨æˆ·åç»­çš„è¯·æ±‚ä½¿ç”¨ã€‚</p><p>Keystoneä¸­é€šè¿‡Policyï¼ˆè®¿é—®è§„åˆ™ï¼‰æ¥åšåˆ°åŸºäºç”¨æˆ·è§’è‰²(Role)çš„è®¿é—®æ§åˆ¶ã€‚</p><h4 id="4-Token">(4) Token</h4><p>æ˜¯ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œè®¿é—®èµ„æºæ—¶éœ€è¦&quot;äº®å‡º&quot;ä½ çš„ä»¤ç‰Œã€‚åœ¨keystoneä¸­ä¸»è¦æ˜¯å¼•å…¥ä»¤ç‰Œæœºåˆ¶æ¥ä¿æŠ¤ç”¨æˆ·å¯¹äºèµ„æºçš„è®¿é—®ï¼ŒåŒæ—¶å¼•å…¥PKIï¼ˆå…¬é’¥åŸºç¡€å®æ–½ï¼‰å¯¹ä»¤ç‰ŒåŠ ä»¥ä¿æŠ¤ã€‚</p><p>TokenåŒ…å«äº†åœ¨æŒ‡å®šèŒƒå›´å’Œæœ‰æ•ˆæ—¶é—´å†…å¯ä»¥è¢«è®¿é—®çš„èµ„æºã€‚EG. åœ¨Novaä¸­ä¸€ä¸ªtenantå¯ä»¥æ˜¯ä¸€äº›è™šæ‹Ÿæœºï¼Œåœ¨Swiftå’ŒGlanceä¸­ä¸€ä¸ªtenantå¯ä»¥æ˜¯ä¸€äº›é•œåƒå­˜å‚¨ï¼Œåœ¨Networkä¸­ä¸€ä¸ªtenantå¯ä»¥æ˜¯ä¸€äº›ç½‘ç»œèµ„æºã€‚</p><h4 id="5-Role">(5) Role</h4><p>æœ¬è´¨å°±æ˜¯ä¸€å †ACLçš„é›†åˆï¼Œç”¨äºåˆ’åˆ†æƒé™</p><p>å¯ä»¥é€šè¿‡ç»™UseræŒ‡å®šRoleï¼Œä½¿Userè·å¾—Roleå¯¹åº”çš„æ“ä½œæƒé™ã€‚</p><p>Keystoneè¿”å›ç»™Userçš„TokenåŒ…å«äº†Roleåˆ—è¡¨ï¼Œè¢«è®¿é—®çš„Servicesä¼šåˆ¤æ–­è®¿é—®å®ƒçš„Userå’ŒUseræä¾›çš„Tokenä¸­æ‰€åŒ…å«çš„Role,åŠæ¯ä¸ªroleè®¿é—®èµ„æºæˆ–è€…è¿›è¡Œæ“ä½œçš„æƒé™ã€‚</p><p>ç³»ç»Ÿé»˜è®¤ä½¿ç”¨ç®¡ç†Role adminå’Œæˆå‘˜Role userï¼ˆè¿‡å»çš„æ™®é€šç”¨æˆ·è§’è‰²æ˜¯ï¼š<em>member</em>ï¼‰ ã€‚</p><p>useréªŒè¯æ—¶å¿…é¡»å¸¦æœ‰Project(Tenant)</p><h4 id="6-Policy">(6) Policy</h4><p>å¯¹äºKeystone serviceæ¥è¯´ï¼ŒPolicyå°±æ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯<code>/etc/keystone/policy.json</code>ã€‚é€šè¿‡é…ç½®è¿™ä¸ªæ–‡ä»¶ï¼ŒKeystoneå®ç°äº†å¯¹UseråŸºäºRoleçš„æƒé™ç®¡ç†ã€‚</p><p>OpenStackå¯¹Userçš„éªŒè¯é™¤äº†OpenStackçš„èº«ä»½éªŒè¯ä»¥å¤–ï¼Œè¿˜éœ€è¦é‰´åˆ«Userå¯¹æŸä¸ªServiceæ˜¯å¦æœ‰è®¿é—®æƒé™ã€‚Policyæœºåˆ¶å°±æ˜¯ç”¨æ¥æ§åˆ¶Userå¯¹Project(Tenant)ä¸­èµ„æºçš„æ“ä½œæƒé™ã€‚</p><h4 id="7-Project-Tenant">(7) Project(Tenant)</h4><p>æ˜¯ä¸€ä¸ªäººã€æˆ–æœåŠ¡æ‰€æ‹¥æœ‰çš„èµ„æºé›†åˆã€‚ä¸åŒçš„Projectä¹‹é—´èµ„æºæ˜¯éš”ç¦»çš„ï¼Œèµ„æºå¯ä»¥è®¾ç½®é…é¢ã€‚</p><p>åœ¨ä¸€ä¸ªProject(Tenant)ä¸­å¯ä»¥åŒ…å«å¤šä¸ªUserï¼Œæ¯ä¸€ä¸ªUseréƒ½ä¼šæ ¹æ®æƒé™çš„åˆ’åˆ†æ¥ä½¿ç”¨Project(Tenant)ä¸­çš„èµ„æºã€‚æ¯”å¦‚é€šè¿‡Novaåˆ›å»ºè™šæ‹Ÿæœºæ—¶è¦æŒ‡å®šåˆ°æŸä¸ªProjectä¸­ï¼Œåœ¨Cinderåˆ›å»ºå·ä¹Ÿè¦æŒ‡å®šåˆ°æŸä¸ªProjectä¸­ã€‚</p><p>Userè®¿é—®Projectçš„èµ„æºå‰ï¼Œå¿…é¡»è¦ä¸è¯¥Projectå…³è”ï¼Œå¹¶ä¸”æŒ‡å®šUseråœ¨Projectä¸‹çš„Roleï¼Œä¸€ä¸ªassignmentï¼ˆå…³è”ï¼‰å³ï¼šProject-User-Role</p><h4 id="8-service">(8) service</h4><p>Openstackä¸­è¿è¡Œçš„å„ä¸ªç»„ä»¶æœåŠ¡ã€‚</p><h4 id="9-Endpoint">(9) Endpoint</h4><ol><li>æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ç½‘ç»œæ¥è®¿é—®å’Œå®šä½æŸä¸ªOpenstack serviceçš„åœ°å€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªURL</li><li>ä¸åŒçš„regionæœ‰ä¸åŒçš„endpointï¼ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡endpointçš„regionå±æ€§å»å®šä¹‰å¤šä¸ªregionï¼‰ã€‚</li><li>å½“Novaéœ€è¦è®¿é—®GlanceæœåŠ¡å»è·å–image æ—¶ï¼ŒNovaé€šè¿‡è®¿é—®Keystoneæ‹¿åˆ°Glanceçš„endpointï¼Œç„¶åé€šè¿‡è®¿é—®è¯¥endpointå»è·å–GlanceæœåŠ¡ã€‚</li><li>Endpoint åˆ†ä¸ºä¸‰ç±»ï¼š</li></ol><ul><li>admin url â€“&gt; ç»™adminç”¨æˆ·ä½¿ç”¨ï¼ŒPortï¼š35357</li><li>internal url â€“&gt; OpenStackå†…éƒ¨æœåŠ¡ä½¿ç”¨æ¥è·Ÿåˆ«çš„æœåŠ¡é€šä¿¡ï¼ŒPortï¼š5000</li><li>public url â€“&gt; äº’è”ç½‘ç”¨æˆ·å¯ä»¥è®¿é—®çš„åœ°å€ï¼ŒPortï¼š5000</li></ul><h4 id="10-Catalog">(10) Catalog</h4><p>ç”¨æˆ·å’ŒæœåŠ¡å¯ä»¥ä½¿ç”¨ä½¿ç”¨keystoneç®¡ç†çš„catalogï¼Œå®šä½åˆ°å…¶ä»–çš„æœåŠ¡ï¼Œcatalogä¸€ä¸ªopenstackéƒ¨ç½²çš„ç›¸å…³æœåŠ¡çš„é›†åˆï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªendpointï¼ˆå³å¯ä»¥è®¿é—®çš„urlåœ°å€ï¼‰ï¼Œå³catalog=services+endpointã€‚æ¯ä¸ªendpointå¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><p>adminï¼Œinternalï¼Œpublicï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸åŒendpointç±»å‹ä½äºä¸åŒçš„ç½‘ç»œæ¥ä¸ºä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ï¼ˆæé«˜å®‰å…¨æ€§ï¼‰ï¼Œæ¯”å¦‚:</p><p>public API:å¯¹æ•´ä¸ªäº’è”ç½‘å¯è§ï¼Œè¿™æ ·å®¢æˆ·å°±å¯ä»¥æ–¹ä¾¿çš„ç®¡ç†è‡ªå·±çš„äº‘äº†ã€‚</p><p>admin API:åº”è¯¥ä¸¥æ ¼é™å®šåªæœ‰ç®¡ç†äº‘åŸºç¡€è®¾æ–½çš„ç»„ç»‡å†…çš„è¿è¥å•†ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥API</p><p>internel API:åº”è¯¥è¢«é™å®šåªæœ‰é‚£äº›å®‰è£…æœ‰OpenStackæœåŠ¡çš„ä¸»æœºï¼Œæ‰èƒ½ä½¿ç”¨è¯¥API</p><h4 id="11-Serviceä¸Endpointå…³ç³»ä»‹ç»">(11) Serviceä¸Endpointå…³ç³»ä»‹ç»</h4><p>åœ¨openstackä¸­ï¼Œæ¯ä¸€ä¸ªserviceéƒ½æœ‰ä¸‰ç§endpoint. Admin, public, internalï¼ˆåˆ›å»ºå®Œserviceåéœ€è¦ä¸ºå…¶åˆ›å»ºAPI EndPoint. ï¼‰</p><p>Adminæ˜¯ç”¨ä½œç®¡ç†ç”¨é€”çš„ï¼Œå¦‚å®ƒèƒ½å¤Ÿä¿®æ”¹user/tenant(project)ã€‚</p><p>public æ˜¯è®©å®¢æˆ·è°ƒç”¨çš„ï¼Œæ¯”å¦‚å¯ä»¥éƒ¨ç½²åœ¨å¤–ç½‘ä¸Šè®©å®¢æˆ·å¯ä»¥ç®¡ç†è‡ªå·±çš„äº‘ã€‚</p><p>internalæ˜¯openstackå†…éƒ¨è°ƒç”¨çš„ã€‚</p><p>ä¸‰ç§endpoints åœ¨ç½‘ç»œä¸Šå¼€æ”¾çš„æƒé™ä¸€èˆ¬ä¹Ÿä¸åŒã€‚Adminé€šå¸¸åªèƒ½å¯¹å†…ç½‘å¼€æ”¾ï¼Œpublicé€šå¸¸å¯ä»¥å¯¹å¤–ç½‘å¼€æ”¾ï¼Œinternalé€šå¸¸åªèƒ½å¯¹å®‰è£…æœ‰openstackå¯¹æœåŠ¡çš„æœºå™¨å¼€æ”¾ã€‚</p><h4 id="12-Regions">(12) Regions</h4><p>openstackæ”¯æŒå¤šä¸ªå¯æ‰©å±•çš„regionsï¼ŒOpenStackçš„æ”¯æŒå¯æ‰©å±•çš„å¤šä¸ªåŒºåŸŸã€‚ä¸ºç®€å•èµ·è§ï¼Œä¸€èˆ¬ä½¿ç”¨ç®¡ç†ç½‘ç»œipåœ°å€ä½œä¸ºæ‰€æœ‰endpointç±»å‹(ä¸‰ç§api)çš„ipï¼Œä¸”æ‰€æœ‰çš„endpointç±»å‹(ä¸‰ç§api)éƒ½ä½¿ç”¨ä¸€ä¸ªåŒºåŸŸï¼Œå³regiononeåŒºã€‚</p><p>æ¯ä¸ªä½ éƒ¨ç½²çš„openstackæœåŠ¡éƒ½éœ€è¦ç»‘å®šendpointï¼ˆå­˜å‚¨åœ¨keystoneä¸­ï¼‰æ¥æä¾›æœä¸€ä¸ªæœåŠ¡çš„å…¥å£ï¼Œå› è€Œæˆ‘ä»¬ç¬¬ä¸€éœ€è¦éƒ¨ç½²çš„ç»„ä»¶å°±æ˜¯keystoneã€‚</p><h2 id="äºŒã€Keystone-å®‰è£…éƒ¨ç½²">äºŒã€Keystone å®‰è£…éƒ¨ç½²</h2><h3 id="1ã€-åˆ›å»ºæ•°æ®åº“">1ã€ åˆ›å»ºæ•°æ®åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœä¹‹å‰mysqlæ•°æ®åº“æ²¡æœ‰è®¾ç½®å¯†ç ï¼Œåˆ™å¯ä»¥è¾“å…¥ mysql å›è½¦è¿›å…¥ã€‚</span></span><br><span class="line">[root@controller ~]# mysql -u root -p</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE keystone;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON keystone.* TO &#x27;keystone&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;KEYSTONE_DBPASS&#x27;;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON keystone.* TO &#x27;keystone&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;KEYSTONE_DBPASS&#x27;;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; quit</span><br></pre></td></tr></table></figure><h3 id="2ã€å®‰è£…keystoreè½¯ä»¶åŒ…">2ã€å®‰è£…keystoreè½¯ä»¶åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install openstack-keystone httpd mod_wsgi -y</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨ï¼šCentOS 8ä½¿ç”¨ dnf -y install python3-mod_wsgi å®‰è£…mod_wsgi</span></span><br></pre></td></tr></table></figure><h3 id="3ã€ä¿®æ”¹-etc-keystone-keystone-conf-é…ç½®æ–‡ä»¶">3ã€ä¿®æ”¹ /etc/keystone/keystone.conf é…ç½®æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/keystone/keystone.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. åœ¨ [database] éƒ¨åˆ†ï¼Œé…ç½®æ•°æ®åº“è®¿é—®</span> </span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. åœ¨ [token] éƒ¨åˆ†ï¼Œé…ç½® Fernet ä»¤ç‰Œæä¾›ç¨‹åº</span> </span><br><span class="line">[token]</span><br><span class="line">provider = fernet</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼Œå’Œä¸Šè¿°æ­¥éª¤æ˜¯ä¸€è‡´çš„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@controller ~]# cp /etc/keystone/keystone.conf /etc/keystone/keystone.conf.bak</span><br><span class="line">[root@controller ~]# grep -Ev &quot;^#|^$&quot; /etc/keystone/keystone.conf.bak &gt; /etc/keystone/keystone.conf</span><br><span class="line">[root@controller ~]# vi /etc/keystone/keystone.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">[application_credential]</span><br><span class="line">[assignment]</span><br><span class="line">[auth]</span><br><span class="line">[cache]</span><br><span class="line">[catalog]</span><br><span class="line">[cors]</span><br><span class="line">[credential]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone</span><br><span class="line">[domain_config]</span><br><span class="line">[endpoint_filter]</span><br><span class="line">[endpoint_policy]</span><br><span class="line">[eventlet_server]</span><br><span class="line">[federation]</span><br><span class="line">[fernet_receipts]</span><br><span class="line">[fernet_tokens]</span><br><span class="line">[healthcheck]</span><br><span class="line">[identity]</span><br><span class="line">[identity_mapping]</span><br><span class="line">[jwt_tokens]</span><br><span class="line">[ldap]</span><br><span class="line">[memcache]</span><br><span class="line">[oauth1]</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[policy]</span><br><span class="line">[profiler]</span><br><span class="line">[receipt]</span><br><span class="line">[resource]</span><br><span class="line">[revoke]</span><br><span class="line">[role]</span><br><span class="line">[saml]</span><br><span class="line">[security_compliance]</span><br><span class="line">[shadow_users]</span><br><span class="line">[token]</span><br><span class="line">provider = fernet</span><br><span class="line">[tokenless_auth]</span><br><span class="line">[totp]</span><br><span class="line">[trust]</span><br><span class="line">[unified_limit]</span><br><span class="line">[wsgi]</span><br></pre></td></tr></table></figure><br/>### 4ã€åŒæ­¥æ•°æ®åº“<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# su -s /bin/sh -c &quot;keystone-manage db_sync&quot; keystone</span><br></pre></td></tr></table></figure><h3 id="5ã€é…ç½®åˆå§‹åŒ–">5ã€é…ç½®åˆå§‹åŒ–</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ–æ•°æ®åº“</span></span><br><span class="line">[root@controller ~]# keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone</span><br><span class="line">[root@controller ~]# keystone-manage credential_setup --keystone-user keystone --keystone-group keystone</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ–keystone</span></span><br><span class="line">[root@controller ~]# keystone-manage bootstrap --bootstrap-password ADMIN_PASS \</span><br><span class="line">  --bootstrap-admin-url http://controller:5000/v3/ \</span><br><span class="line">  --bootstrap-internal-url http://controller:5000/v3/ \</span><br><span class="line">  --bootstrap-public-url http://controller:5000/v3/ \</span><br><span class="line">  --bootstrap-region-id RegionOne</span><br></pre></td></tr></table></figure><h3 id="6ã€é…ç½®httpd">6ã€é…ç½®httpd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# echo &quot;ServerName controller&quot; &gt;&gt;/etc/httpd/conf/httpd.conf</span><br><span class="line">[root@controller ~]# ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/</span><br></pre></td></tr></table></figure><h3 id="7ã€å¯åŠ¨httpd">7ã€å¯åŠ¨httpd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl start httpd</span><br><span class="line">[root@controller ~]# systemctl enable httpd</span><br></pre></td></tr></table></figure><h3 id="8ã€é…ç½®ç¯å¢ƒå˜é‡">8ã€é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®šä¹‰ç¯å¢ƒå˜é‡</span></span><br><span class="line">[root@controller ~]# vi admin-openrc </span><br><span class="line">export OS_USERNAME=admin</span><br><span class="line">export OS_PASSWORD=ADMIN_PASS</span><br><span class="line">export OS_PROJECT_NAME=admin</span><br><span class="line">export OS_USER_DOMAIN_NAME=Default</span><br><span class="line">export OS_PROJECT_DOMAIN_NAME=Default</span><br><span class="line">export OS_AUTH_URL=http://controller:5000/v3</span><br><span class="line">export OS_IDENTITY_API_VERSION=3</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">[root@controller ~]# source admin-openrc</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¼€æœºè‡ªåŠ¨åŠ è½½ç¯å¢ƒå˜é‡ï¼Œé…ç½® .bashrc ï¼Œ æœ€ä¸‹é¢æ·»åŠ  <span class="built_in">source</span> admin-openrc</span></span><br><span class="line">[root@controller ~]# cat .bashrc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">.bashrc</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">User specific aliases and <span class="built_in">functions</span></span></span><br><span class="line"></span><br><span class="line">alias rm=&#x27;rm -i&#x27;</span><br><span class="line">alias cp=&#x27;cp -i&#x27;</span><br><span class="line">alias mv=&#x27;mv -i&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source global definitions</span></span><br><span class="line">if [ -f /etc/bashrc ]; then</span><br><span class="line">        . /etc/bashrc</span><br><span class="line">fi</span><br><span class="line">source admin-openrc</span><br></pre></td></tr></table></figure><h3 id="9ã€åˆ›å»ºKeystoneå¯¹è±¡å®ä¾‹">9ã€åˆ›å»ºKeystoneå¯¹è±¡å®ä¾‹</h3><p>Keystoneä¸ºæ¯ä¸ª OpenStack æœåŠ¡æä¾›èº«ä»½éªŒè¯æœåŠ¡ã€‚èº«ä»½éªŒè¯æœåŠ¡ä½¿ç”¨åŸŸã€é¡¹ç›®ã€ç”¨æˆ·å’Œè§’è‰²çš„ç»„åˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºåŸŸ</span></span><br><span class="line">[root@controller ~]# openstack domain create --description &quot;An Example Domain&quot; example</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | An Example Domain                |</span><br><span class="line">| enabled     | True                             |</span><br><span class="line">| id          | 00c198ac769d4424a842692c2f06111b |</span><br><span class="line">| name        | example                          |</span><br><span class="line">| options     | &#123;&#125;                               |</span><br><span class="line">| tags        | []                               |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">[root@controller ~]# openstack project create --domain default --description &quot;Demo Project&quot; myproject</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | Demo Project                     |</span><br><span class="line">| domain_id   | default                          |</span><br><span class="line">| enabled     | True                             |</span><br><span class="line">| id          | a04121c96e3b4e978f41515e4d788168 |</span><br><span class="line">| is_domain   | False                            |</span><br><span class="line">| name        | myproject                        |</span><br><span class="line">| options     | &#123;&#125;                               |</span><br><span class="line">| parent_id   | default                          |</span><br><span class="line">| tags        | []                               |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">[root@controller ~]# openstack user create --domain default --password-prompt myuser</span><br><span class="line">User Password:</span><br><span class="line">Repeat User Password:</span><br><span class="line">No password was supplied, authentication will fail when a user does not have a password.</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | default                          |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| id                  | c4f4a104dea0425ca5e3ad3966e8809c |</span><br><span class="line">| name                | myuser                           |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºè§’è‰²</span></span><br><span class="line">[root@controller ~]# openstack role create myrole</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field       | Value                            |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | None                             |</span><br><span class="line">| domain_id   | None                             |</span><br><span class="line">| id          | 7f71ee008de940b3afa5164f437f8d40 |</span><br><span class="line">| name        | myrole                           |</span><br><span class="line">| options     | &#123;&#125;                               |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°†è§’è‰²æ·»åŠ åˆ°é¡¹ç›®å’Œç”¨æˆ·</span></span><br><span class="line">openstack role add --project myproject --user myuser myrole</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥æ·»åŠ ç»“æœ</span></span><br><span class="line">[root@controller ~]# openstack project list </span><br><span class="line">+----------------------------------+-----------+</span><br><span class="line">| ID                               | Name      |</span><br><span class="line">+----------------------------------+-----------+</span><br><span class="line">| 37297436d3384cf18dde714da386d2af | admin     |</span><br><span class="line">| 7efc773eda9648e8b041821a6a29d93c | service   |</span><br><span class="line">| a04121c96e3b4e978f41515e4d788168 | myproject |</span><br><span class="line">+----------------------------------+-----------+</span><br><span class="line">[root@controller ~]# openstack domain list </span><br><span class="line">+----------------------------------+---------+---------+--------------------+</span><br><span class="line">| ID                               | Name    | Enabled | Description        |</span><br><span class="line">+----------------------------------+---------+---------+--------------------+</span><br><span class="line">| 00c198ac769d4424a842692c2f06111b | example | True    | An Example Domain  |</span><br><span class="line">| default                          | Default | True    | The default domain |</span><br><span class="line">+----------------------------------+---------+---------+--------------------+</span><br><span class="line">[root@controller ~]# openstack user list  </span><br><span class="line">+----------------------------------+--------+</span><br><span class="line">| ID                               | Name   |</span><br><span class="line">+----------------------------------+--------+</span><br><span class="line">| 49a25f94cf88430d889a9dee6e7f27a4 | admin  |</span><br><span class="line">| c4f4a104dea0425ca5e3ad3966e8809c | myuser |</span><br><span class="line">+----------------------------------+--------+</span><br><span class="line">[root@controller ~]# openstack role list</span><br><span class="line">+----------------------------------+--------+</span><br><span class="line">| ID                               | Name   |</span><br><span class="line">+----------------------------------+--------+</span><br><span class="line">| 0285a6213e8441adb5b6fc9c75b46359 | admin  |</span><br><span class="line">| 147dbdf7503c4241b2661f251724c0b9 | member |</span><br><span class="line">| 7f71ee008de940b3afa5164f437f8d40 | myrole |</span><br><span class="line">| fb396571f9714c3faf0007ccc04566e5 | reader |</span><br><span class="line">+----------------------------------+--------+</span><br></pre></td></tr></table></figure><h3 id="10ã€éªŒè¯KeystoneæœåŠ¡æ˜¯å¦æ­£å¸¸">10ã€éªŒè¯KeystoneæœåŠ¡æ˜¯å¦æ­£å¸¸</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è·å–tokenæµ‹è¯•ï¼Œè¾“å‡ºtokenä¿¡æ¯åˆ™æ­£å¸¸ã€‚</span></span><br><span class="line"></span><br><span class="line">[root@controller ~]# openstack token issue</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field      | Value                                                                                                                                                                                   |</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| expires    | 2021-08-20T04:01:26+0000                                                                                                                                                                |</span><br><span class="line">| id         | gAAAAABhHxsGDuAaeHeYrA6Sxon7jtqrEPMQMQUXF9rtRgJrr1_BNhxjpg2SfwFYxM3a8Ax8AoncDSHOzXujKM3zgnuhmotI6WECyemd7KvML_s4m5SGTbiui-6iIt45meeR8sJjVjjPLGCONAsFfFSC41lpX1neZmo7UiCbPlJd9Pz5128u2lM |</span><br><span class="line">| project_id | 37297436d3384cf18dde714da386d2af                                                                                                                                                        |</span><br><span class="line">| user_id    | 49a25f94cf88430d889a9dee6e7f27a4                                                                                                                                                        |</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Openstack åˆå§‹ç¯å¢ƒéƒ¨ç½²ï¼ˆäºŒï¼‰</title>
      <link href="/posts/010cf15f6558.html"/>
      <url>/posts/010cf15f6558.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç¯å¢ƒä»‹ç»ï¼š">ä¸€ã€ç¯å¢ƒä»‹ç»ï¼š</h2><p>Linuxç‰ˆæœ¬ï¼šCentOS 7.9 ï¼ŒæŸ¥çœ‹å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br></pre></td></tr></table></figure><p>OpenStackç‰ˆæœ¬ï¼šTï¼ˆtrainï¼‰ç‰ˆæœ¬</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹centos7.9æ”¯æŒçš„æ‰€æœ‰çš„CentOSç‰ˆæœ¬é“¾æ¥å¦‚ä¸‹ï¼š</span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/centos-vault/7.9.2009/cloud/x86_64/</span><br></pre></td></tr></table></figure><p>Linuxä¸»æœºï¼š2å°</p><table><thead><tr><th>èŠ‚ç‚¹</th><th>IP</th></tr></thead><tbody><tr><td>æ§åˆ¶èŠ‚ç‚¹ï¼ˆcontrollerï¼‰</td><td>192.168.10.222</td></tr><tr><td>è®¡ç®—èŠ‚ç‚¹ï¼ˆComputeï¼‰</td><td>192.168.10.223</td></tr></tbody></table><h2 id="äºŒã€åŸºç¡€é…ç½®">äºŒã€åŸºç¡€é…ç½®</h2><p><strong>æ³¨ï¼šåŸºç¡€é…ç½®æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½è¦é…ç½®ã€‚</strong></p><h3 id="1ã€é…ç½®ä¸»æœºå">1ã€é…ç½®ä¸»æœºå</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹é…ç½®</span></span><br><span class="line">[root@localhost ~]<span class="comment"># hostnamectl set-hostname controller</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bash</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¡ç®—èŠ‚ç‚¹é…ç½®</span></span><br><span class="line">[root@compute ~]<span class="comment"># hostnamectl set-hostname compute</span></span><br><span class="line">[root@compute ~]<span class="comment"># bash</span></span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹hostsæ–‡ä»¶">2ã€ä¿®æ”¹hostsæ–‡ä»¶</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹é…ç½®</span></span><br><span class="line">[root@controller ~]<span class="comment"># cat /etc/hosts</span></span><br><span class="line">192.168.10.222 controller</span><br><span class="line">192.168.10.223 compute</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¡ç®—èŠ‚ç‚¹é…ç½®</span></span><br><span class="line">[root@compute ~]<span class="comment"># cat /etc/hosts</span></span><br><span class="line">192.168.10.222 controller</span><br><span class="line">192.168.10.223 compute</span><br></pre></td></tr></table></figure><h3 id="3ã€å…³é—­é˜²ç«å¢™selinux">3ã€å…³é—­é˜²ç«å¢™selinux</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</span></span><br><span class="line">[root@controller ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@controller ~]<span class="comment"># setenforce 0</span></span><br><span class="line">setenforce: SELinux is disabled</span><br></pre></td></tr></table></figure><h3 id="4ã€é…ç½®æ¸…åyumæº">4ã€é…ç½®æ¸…åyumæº</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</span></span><br><span class="line">[root@controller ~]<span class="comment"># mkdir /etc/yum.repos.d.bak</span></span><br><span class="line">[root@controller ~]<span class="comment"># cp /etc/yum.repos.d/* /etc/yum.repos.d.bak</span></span><br><span class="line">[root@controller ~]<span class="comment"># rm -rf /etc/yum.repos.d/*</span></span><br><span class="line">[root@controller ~]<span class="comment"># cd /etc/yum.repos.d/ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½® CentOS-Base.repo</span></span><br><span class="line">[root@controller yum.repos.d]<span class="comment"># vim CentOS-Base.repo</span></span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#released updates</span></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Updates</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/updates/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Extras</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Plus</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® epel.repo</span></span><br><span class="line">[root@controller yum.repos.d]<span class="comment"># vim epel.repo</span></span><br><span class="line"></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span>/debug</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=1</span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=http://mirrors.tuna.tsinghua.edu.cn/epel/7/SRPMS</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">gpgcheck=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® CentOS-QEMU-EV.repo</span></span><br><span class="line">[root@controller yum.repos.d]<span class="comment"># vi /etc/yum.repos.d/CentOS-QEMU-EV.repo</span></span><br><span class="line"><span class="comment"># CentOS-QEMU-EV.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please see http://wiki.centos.org/SpecialInterestGroup/Virtualization for more</span></span><br><span class="line"><span class="comment"># information</span></span><br><span class="line"></span><br><span class="line">[centos-qemu-ev]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - QEMU EV</span><br><span class="line">baseurl=http://mirror.centos.org/<span class="variable">$contentdir</span>/<span class="variable">$releasever</span>/virt/<span class="variable">$basearch</span>/kvm-common/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-Virtualization</span><br><span class="line"></span><br><span class="line">[centos-qemu-ev-test]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - QEMU EV Testing</span><br><span class="line">baseurl=http://buildlogs.centos.org/centos/<span class="variable">$releasever</span>/virt/<span class="variable">$basearch</span>/kvm-common/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=0</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ·»åŠ RPM-GPG-KEY-EPEL-7</span></span><br><span class="line">[root@controller ~]<span class="comment"># curl https://mirrors.tuna.tsinghua.edu.cn/epel/RPM-GPG-KEY-EPEL-7 &gt; /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1662  100  1662    0     0    291      0  0:00:05  0:00:05 --:--:--   397</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç¼“å­˜</span></span><br><span class="line">[root@controller ~]<span class="comment"># yum clean all</span></span><br><span class="line">[root@controller ~]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure><h3 id="5ã€æ£€æŸ¥æ˜¯å¦æœ‰openstackåŒ…">5ã€æ£€æŸ¥æ˜¯å¦æœ‰openstackåŒ…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</span></span><br><span class="line"></span><br><span class="line">[root@controller ~]<span class="comment"># yum list | grep openstack                                 </span></span><br><span class="line">ansible-openstack-modules.noarch         0-20140902git79d751a.el7      epel     </span><br><span class="line">centos-release-openstack-queens.noarch   1-2.el7.centos                extras   </span><br><span class="line">centos-release-openstack-rocky.noarch    1-1.el7.centos                extras   </span><br><span class="line">centos-release-openstack-stein.noarch    1-1.el7.centos                extras   </span><br><span class="line">centos-release-openstack-train.noarch    1-1.el7.centos                extras </span><br></pre></td></tr></table></figure><h3 id="6ã€å®‰è£…OpenStack-Tç‰ˆ">6ã€å®‰è£…OpenStack Tç‰ˆ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</span></span><br><span class="line"></span><br><span class="line">[root@controller ~]# yum -y install centos-release-openstack-train.noarch</span><br></pre></td></tr></table></figure><h3 id="7ã€å®‰è£…OpenStackä¾èµ–åŒ…">7ã€å®‰è£…OpenStackä¾èµ–åŒ…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</span></span><br><span class="line"></span><br><span class="line">[root@controller ~]<span class="comment"># yum install -y python-openstackclient openstack-selinux</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨ï¼šCentOS8 ä½¿ç”¨ yum install -y python3-openstackclient å®‰è£…openstackclient</span></span><br></pre></td></tr></table></figure><h3 id="8ã€é…ç½®æ—¶é—´åŒæ­¥">8ã€é…ç½®æ—¶é—´åŒæ­¥</h3><h4 id="1-æ§åˆ¶èŠ‚ç‚¹é…ç½®">(1) æ§åˆ¶èŠ‚ç‚¹é…ç½®</h4><p><strong>a. å®‰è£…chrony</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]<span class="comment"># yum install chrony -y</span></span><br></pre></td></tr></table></figure><p><strong>b. ç¼–è¾‘&quot;/etc/chrony.conf&quot;æ–‡ä»¶ï¼Œé…ç½®serverï¼Œå…è®¸è®¿é—®å’Œæœ¬åœ°åŒæ­¥</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]<span class="comment"># vi /etc/chrony.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨é‡Šæ‰ä¸‹é¢å†…å®¹</span></span><br><span class="line"><span class="comment">#server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 3.centos.pool.ntp.org iburst</span></span><br><span class="line">server 192.168.10.222 iburst</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow NTP client access from local network.</span></span><br><span class="line">allow 192.168.0.0/16</span><br><span class="line"></span><br><span class="line"><span class="comment"># Serve time even if not synchronized to a time source.</span></span><br><span class="line"><span class="built_in">local</span> stratum 10</span><br></pre></td></tr></table></figure><p><strong>c. è®¾ç½®æ—¶é—´åŒæ­¥æœåŠ¡å¼€æœºè‡ªå¯åŠ¨ï¼Œå¹¶æ£€æŸ¥æœåŠ¡å½“å‰æ˜¯å¦ç›‘å¬123ç«¯å£</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl enable chronyd</span><br><span class="line">[root@controller ~]# systemctl restart chronyd</span><br><span class="line">[root@controller ~]# ss -ltunp | grep 123</span><br><span class="line">udp    UNCONN     0      0         *:123                   *:*                   users:((&quot;chronyd&quot;,pid=31485,fd=7))</span><br></pre></td></tr></table></figure><h4 id="2-è®¡ç®—èŠ‚ç‚¹é…ç½®">(2) è®¡ç®—èŠ‚ç‚¹é…ç½®</h4><p><strong>a. å®‰è£…chrony</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install chrony -y</span><br></pre></td></tr></table></figure><p><strong>b. ç¼–è¾‘&quot;/etc/chrony.conf&quot; æ–‡ä»¶å¹¶æ³¨é‡Šé™¤ â€œserverâ€ é”®ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹ã€‚ä¿®æ”¹å®ƒå¼•ç”¨æ§åˆ¶èŠ‚ç‚¹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# vi /etc/chrony.conf</span><br><span class="line">server controller iburst</span><br></pre></td></tr></table></figure><p><strong>c. å¯åŠ¨ NTP æœåŠ¡å¹¶å°†å…¶é…ç½®ä¸ºéšç³»ç»Ÿå¯åŠ¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# systemctl enable chronyd.service</span><br><span class="line">[root@compute ~]# systemctl restart chronyd.service</span><br></pre></td></tr></table></figure><h3 id="9ã€æ£€æŸ¥NTPæœåŠ¡">9ã€æ£€æŸ¥NTPæœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤è¿›è¡ŒNTPæœåŠ¡æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line">[root@compute ~]# chronyc sources</span><br><span class="line">210 Number of sources = 1</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^* controller                   11   6     7     1    +56ns[  +86us] +/-  872us</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€é«˜é˜¶é…ç½®">ä¸‰ã€é«˜é˜¶é…ç½®</h2><p><strong>æ³¨ï¼šåªéœ€è¦æ§åˆ¶èŠ‚ç‚¹è¿›è¡Œé…ç½®</strong></p><h3 id="1ã€æ•°æ®åº“">1ã€æ•°æ®åº“</h3><p>OpenStack æœåŠ¡ä½¿ç”¨ SQL æ•°æ®åº“æ¥å­˜å‚¨ä¿¡æ¯ã€‚ æ•°æ®åº“é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ æœ¬æŒ‡å—ä¸­çš„è¿‡ç¨‹æ ¹æ®å‘è¡Œç‰ˆä½¿ç”¨ MariaDB æˆ– MySQLã€‚ OpenStack æœåŠ¡è¿˜æ”¯æŒå…¶ä»– SQL æ•°æ®åº“ï¼ŒåŒ…æ‹¬ PostgreSQLã€‚</p><br/><h4 id="1-å®‰è£…æ•°æ®åº“">(1) å®‰è£…æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install mariadb mariadb-server python2-PyMySQL -y</span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®æ•°æ®åº“">(2) é…ç½®æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/my.cnf.d/openstack.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">bind-address = 192.168.10.222</span><br><span class="line">default-storage-engine = innodb</span><br><span class="line">innodb_file_per_table = on</span><br><span class="line">max_connections = 4096</span><br><span class="line">collation-server = utf8_general_ci</span><br><span class="line">character-set-server = utf8</span><br></pre></td></tr></table></figure><h4 id="3-å¯åŠ¨æ•°æ®åº“">(3) å¯åŠ¨æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl start mariadb</span><br><span class="line">[root@controller ~]# systemctl enable mariadb</span><br></pre></td></tr></table></figure><h4 id="4-é…ç½®å®‰å…¨åˆå§‹åŒ–">(4) é…ç½®å®‰å…¨åˆå§‹åŒ–</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mysql_secure_installation</span><br><span class="line">Enter current password for root (enter for none): å›è½¦</span><br><span class="line">Set root password? [Y/n] n</span><br><span class="line">Remove anonymous users? [Y/n] y</span><br><span class="line">Disallow root login remotely? [Y/n] y</span><br><span class="line">Remove test database and access to it? [Y/n] y</span><br><span class="line">Reload privilege tables now? [Y/n] y</span><br></pre></td></tr></table></figure><h4 id="5-éªŒè¯æ•°æ®åº“çŠ¶æ€">(5) éªŒè¯æ•°æ®åº“çŠ¶æ€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# netstat -lntup|grep 3306</span><br><span class="line">tcp        0      0 192.168.10.222:3306     0.0.0.0:*               LISTEN      32494/mysqld </span><br></pre></td></tr></table></figure><h3 id="2ã€æ¶ˆæ¯é˜Ÿåˆ—">2ã€æ¶ˆæ¯é˜Ÿåˆ—</h3><p>OpenStack ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥åè°ƒæœåŠ¡ä¹‹é—´çš„æ“ä½œå’ŒçŠ¶æ€ä¿¡æ¯ã€‚ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ OpenStack æ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼ŒåŒ…æ‹¬ RabbitMQã€Qpid å’Œ ZeroMQã€‚ ä½†æ˜¯ï¼Œå¤§å¤šæ•°æ‰“åŒ… OpenStack çš„å‘è¡Œç‰ˆéƒ½æ”¯æŒç‰¹å®šçš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ã€‚ æœ¬æ–‡æ¡£å®ç°äº† RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œå› ä¸ºå¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½æ”¯æŒå®ƒã€‚ å¦‚æœæ‚¨æ›´å–œæ¬¢å®ç°ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œè¯·æŸ¥é˜…ä¸ä¹‹ç›¸å…³çš„æ–‡æ¡£ã€‚</p><h4 id="1-å®‰è£…rabbitmq">(1) å®‰è£…rabbitmq</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install rabbitmq-server -y</span><br></pre></td></tr></table></figure><h4 id="2-å¯åŠ¨">(2) å¯åŠ¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl start rabbitmq-server.service </span><br><span class="line">[root@controller ~]# systemctl enable rabbitmq-server.service</span><br></pre></td></tr></table></figure><h4 id="3-æ£€æŸ¥æœåŠ¡çŠ¶æ€">(3) æ£€æŸ¥æœåŠ¡çŠ¶æ€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# netstat -lntup|grep 5672</span><br><span class="line">tcp        0      0 0.0.0.0:25672           0.0.0.0:*               LISTEN      17599/beam.smp</span><br><span class="line">tcp6       0      0 :::5672                 :::*                    LISTEN      17599/beam.smp</span><br></pre></td></tr></table></figure><h4 id="4-åˆ›å»ºç”¨æˆ·-å¹¶ä¸ºç”¨æˆ·é…ç½®æƒé™ï¼ˆæ‰€æœ‰æƒé™ï¼‰">(4) åˆ›å»ºç”¨æˆ· ,  å¹¶ä¸ºç”¨æˆ·é…ç½®æƒé™ï¼ˆæ‰€æœ‰æƒé™ï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºç”¨æˆ·ï¼Œç”¨æˆ·åä¸º openstack ï¼Œ å¯†ç ä¸º RABBIT_PASS</span></span><br><span class="line">[root@controller ~]# rabbitmqctl add_user openstack RABBIT_PASS</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸ºç”¨æˆ·é…ç½®æƒé™ï¼ˆæ‰€æœ‰æƒé™ï¼‰</span></span><br><span class="line">[root@controller ~]# rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br></pre></td></tr></table></figure><h3 id="3ã€Memcacheç¼“å­˜">3ã€Memcacheç¼“å­˜</h3><p>Memcachedæ˜¯ä¸€ä¸ªè‡ªç”±å¼€æºçš„ï¼Œé«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼å†…å­˜å¯¹è±¡ç¼“å­˜ç³»ç»Ÿã€‚</p><p>Memcachedæ˜¯ä¸€ç§åŸºäºå†…å­˜çš„key-valueå­˜å‚¨ï¼Œç”¨æ¥å­˜å‚¨å°å—çš„ä»»æ„æ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€å¯¹è±¡ï¼‰ã€‚è¿™äº›æ•°æ®å¯ä»¥æ˜¯æ•°æ®åº“è°ƒç”¨ã€APIè°ƒç”¨æˆ–è€…æ˜¯é¡µé¢æ¸²æŸ“çš„ç»“æœã€‚</p><p>Memcachedç®€æ´è€Œå¼ºå¤§ã€‚å®ƒçš„ç®€æ´è®¾è®¡ä¾¿äºå¿«é€Ÿå¼€å‘ï¼Œå‡è½»å¼€å‘éš¾åº¦ï¼Œè§£å†³äº†å¤§æ•°æ®é‡ç¼“å­˜çš„å¾ˆå¤šé—®é¢˜ã€‚å®ƒçš„APIå…¼å®¹å¤§éƒ¨åˆ†æµè¡Œçš„å¼€å‘è¯­è¨€ã€‚</p><p>ä¸€èˆ¬çš„ä½¿ç”¨ç›®çš„æ˜¯ï¼Œé€šè¿‡ç¼“å­˜æ•°æ®åº“æŸ¥è¯¢ç»“æœï¼Œå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°ï¼Œä»¥æé«˜åŠ¨æ€Webåº”ç”¨çš„é€Ÿåº¦ã€æé«˜å¯æ‰©å±•æ€§ã€‚è¿˜å¯ä»¥ç”¨ Memcached ç¼“å­˜æœåŠ¡çš„èº«ä»½æœåŠ¡è®¤è¯æœºåˆ¶ä½¿ç”¨çš„ä»¤ç‰Œã€‚</p><h4 id="1-å®‰è£…">(1) å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install memcached python-memcached -y</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹-etc-sysconfig-memcached-é…ç½®æ–‡ä»¶">(2) ä¿®æ”¹ /etc/sysconfig/memcached é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/sysconfig/memcached</span><br><span class="line">PORT=&quot;11211&quot;</span><br><span class="line">USER=&quot;memcached&quot;</span><br><span class="line">MAXCONN=&quot;1024&quot;</span><br><span class="line">CACHESIZE=&quot;64&quot;</span><br><span class="line">OPTIONS=&quot;-l 192.168.10.222,controller&quot;</span><br></pre></td></tr></table></figure><h4 id="3-å¯åŠ¨memcachedï¼Œå¹¶é…ç½®å¼€æœºè‡ªå¯åŠ¨">(3) å¯åŠ¨memcachedï¼Œå¹¶é…ç½®å¼€æœºè‡ªå¯åŠ¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl start memcached.service </span><br><span class="line">[root@controller ~]# systemctl enable memcached.service</span><br></pre></td></tr></table></figure><h4 id="4-éªŒè¯memcachedæœåŠ¡">(4) éªŒè¯memcachedæœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# netstat -lntup|grep 11211</span><br><span class="line">tcp        0      0 192.168.10.222:11211    0.0.0.0:*               LISTEN      23473/memcached  </span><br></pre></td></tr></table></figure><h3 id="4ã€Etcd">4ã€Etcd</h3><p>OpenStack æœåŠ¡å¯ä½¿ç”¨ Etcdï¼ˆåˆ†å¸ƒå¼å¯é çš„å¯†é’¥ä»·å€¼å­˜å‚¨ï¼‰è¿›è¡Œåˆ†å¸ƒå¼å¯†é’¥é”å®šã€å­˜å‚¨é…ç½®ã€è·Ÿè¸ªæœåŠ¡å®æ—¶æ€§å’Œå…¶ä»–åœºæ™¯ã€‚</p><h4 id="1-å®‰è£…-2">(1) å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install etcd -y</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹-etc-etcd-etcd-conf-é…ç½®æ–‡ä»¶">(2) ä¿®æ”¹ /etc/etcd/etcd.conf é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/etcd/etcd.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">[Member]</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ETCD_CORS=<span class="string">&quot;&quot;</span></span></span><br><span class="line">ETCD_DATA_DIR=&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="line">ETCD_LISTEN_PEER_URLS=&quot;http://192.168.10.222:2380&quot;</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;http://192.168.10.222:2379&quot;</span><br><span class="line">ETCD_NAME=&quot;controller&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">[Clustering]</span></span><br><span class="line">ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;http://192.168.10.222:2380&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;http://192.168.10.222:2379&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER=&quot;controller=http://192.168.10.222:2380&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster-01&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;</span><br></pre></td></tr></table></figure><h4 id="3-å¼€æœºè‡ªå¯åŠ¨å¹¶é‡å¯etcd">(3) å¼€æœºè‡ªå¯åŠ¨å¹¶é‡å¯etcd</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl enable etcd</span><br><span class="line">[root@controller ~]# systemctl restart etcd </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openstack éƒ¨ç½²ä¹‹ Openstack åŸºç¡€ï¼ˆä¸€ï¼‰</title>
      <link href="/posts/ea5d9ff4f5c1.html"/>
      <url>/posts/ea5d9ff4f5c1.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šæœ¬æ–‡è¿›è¡Œäº† Openstack åŸºç¡€ä»‹ç»ã€‚</strong></p><hr><h2 id="ä¸€ã€OpenstackåŸºç¡€">ä¸€ã€OpenstackåŸºç¡€</h2><p><img src="https://s.cn.bing.net/th?id=OIP-C.HD5Wjdx8cr8p8NgY6uDdugHaFj&amp;w=200&amp;h=216&amp;c=7&amp;qlt=90&amp;bgcl=ececec&amp;o=6&amp;pid=PersonalBing" alt="img"></p><p>â€‹OpenStackæ˜¯ä¸€ä¸ªç”±NASAï¼ˆç¾å›½å›½å®¶èˆªç©ºèˆªå¤©å±€ï¼‰å’ŒRackspaceåˆä½œç ”å‘å¹¶å‘èµ·çš„ï¼Œä»¥Apacheè®¸å¯è¯æˆæƒçš„è‡ªç”±è½¯ä»¶å’Œå¼€æ”¾æºä»£ç é¡¹ç›®ã€‚</p><p>â€‹OpenStackæ˜¯ä¸€ä¸ªå¼€æºçš„äº‘è®¡ç®—ç®¡ç†å¹³å°é¡¹ç›®ï¼Œç”±å‡ ä¸ªä¸»è¦çš„ç»„ä»¶ç»„åˆèµ·æ¥å®Œæˆå…·ä½“å·¥ä½œã€‚OpenStackæ”¯æŒå‡ ä¹æ‰€æœ‰ç±»å‹çš„äº‘ç¯å¢ƒï¼Œé¡¹ç›®ç›®æ ‡æ˜¯æä¾›å®æ–½ç®€å•ã€å¯å¤§è§„æ¨¡æ‰©å±•ã€ä¸°å¯Œã€æ ‡å‡†ç»Ÿä¸€çš„äº‘è®¡ç®—ç®¡ç†å¹³å°ã€‚OpenStacké€šè¿‡å„ç§äº’è¡¥çš„æœåŠ¡æä¾›äº†åŸºç¡€è®¾æ–½å³æœåŠ¡ï¼ˆIaaSï¼‰çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯ä¸ªæœåŠ¡æä¾›APIä»¥è¿›è¡Œé›†æˆã€‚</p><p>â€‹openstackæ˜¯ä¸€ä¸ªäº‘å¹³å°ç®¡ç†çš„é¡¹ç›®ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªè½¯ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨openstackæ¥ç®¡ç†æˆ‘ä»¬ä¸€ä¸ªæ•°æ®ä¸­å¿ƒå¤§é‡èµ„æºæ± ã€‚å®ƒé‡Œé¢åŒ…å«äº†å¾ˆå¤šå­é¡¹ç›®ã€‚</p><h3 id="1-åŸºæœ¬æ¶æ„">1. åŸºæœ¬æ¶æ„</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/204451912.png" alt="Openstackç»„å»ºåŠŸèƒ½.png"></p><p>è¯´æ˜ï¼šè¿™é‡Œé¢æ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯å›´ç»•ç€VMè¿›è¡Œæä¾›æœåŠ¡çš„ï¼Œè™šæ‹Ÿæœºéœ€è¦ä»€ä¹ˆèµ„æºï¼Œæˆ‘ä»¬å°±æä¾›ä»€ä¹ˆèµ„æºã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†æœåŠ¡åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡çš„æä¾›è€…ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡çš„æ¶ˆè´¹è€…ã€‚æä¾›è€…æ˜¯æˆ‘å¯ä»¥æä¾›æŸä¸ªæœåŠ¡ï¼Œæ¶ˆè´¹è€…æ˜¯æˆ‘å¯ä»¥ç”¨åˆ°è¿™ä¸ªæœåŠ¡ã€‚</p><p>openstackå¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç®¡ç†å¹³å°ã€‚</p><h3 id="2-å¸¸è§æ ¸å¿ƒé¡¹ç›®">2. å¸¸è§æ ¸å¿ƒé¡¹ç›®</h3><table><thead><tr><th>æœåŠ¡åç§°</th><th style="text-align:center">é¡¹ç›®åç§°</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td>Dasgviard</td><td style="text-align:center">Horizon</td><td style="text-align:center">åŸºäºOpenstack APIæ¥å£ä½¿ç”¨diangoå¼€å‘çš„Webç®¡ç†</td></tr><tr><td>Compute</td><td style="text-align:center">Nova</td><td style="text-align:center">é€šè¿‡è™šæ‹ŸåŒ–æŠ€æœ¯æä¾›è®¡ç®—èµ„æºæ± </td></tr><tr><td>Networking</td><td style="text-align:center">Neutron</td><td style="text-align:center">å®ç°äº†è™šæ‹Ÿæœºçš„ç½‘ç»œèµ„æºç®¡ç†ã€‚</td></tr><tr><td></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td><strong>Storage (å­˜å‚¨)</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>Object Storage</td><td style="text-align:center">Swift</td><td style="text-align:center">å¯¹è±¡å­˜å‚¨ï¼Œé€‚ç”¨äºâ€œä¸€æ¬¡å†™å…¥ã€å¤šæ¬¡è¯»å–â€</td></tr><tr><td>Block Storage</td><td style="text-align:center">Cinder</td><td style="text-align:center">å—å­˜å‚¨ï¼Œæä¾›å­˜å‚¨èµ„æºæ± </td></tr><tr><td></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td><strong>Shared Services ï¼ˆå…±äº«æœåŠ¡ï¼‰</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>Identify Service</td><td style="text-align:center">Keystone</td><td style="text-align:center">è®¤è¯ç®¡ç†</td></tr><tr><td>Image Service</td><td style="text-align:center">Glance</td><td style="text-align:center">æä¾›è™šæ‹Ÿé•œåƒçš„æ³¨å†Œå’Œå­˜å‚¨ç®¡ç†</td></tr><tr><td>Telemetry</td><td style="text-align:center">Ceilometer</td><td style="text-align:center">æä¾›ç›‘æ§å’Œæ•°æ®é‡‡é›†ã€è®¡é‡æœåŠ¡</td></tr><tr><td></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td><strong>Higher-level Services (é«˜å±‚æœåŠ¡)</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>Orchestration</td><td style="text-align:center">Heat</td><td style="text-align:center">è‡ªåŠ¨åŒ–éƒ¨ç½²çš„ç»„ä»¶</td></tr><tr><td>Database Service</td><td style="text-align:center">Trove</td><td style="text-align:center">æä¾›æ•°æ®åº“åº”ç”¨æœåŠ¡</td></tr></tbody></table><h3 id="3-OpenStackä¼˜åŠ¿">3. OpenStackä¼˜åŠ¿</h3><ul><li><p>æ§åˆ¶æ€§ï¼šå®Œå…¨å¼€æºçš„å¹³å°ï¼Œæä¾›APIæ¥å£ï¼Œæ–¹ä¾¿ä¸ç¬¬ä¸‰æ–¹æŠ€æœ¯é›†æˆ</p></li><li><p>å…¼å®¹æ€§ï¼šOpenStackå…¼å®¹å…¶ä»–å…¬æœ‰äº‘ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œæ•°æ®è¿ç§»</p></li><li><p>å¯æ‰©å±•æ€§ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œå¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å±•ï¼Œå¢åŠ èŠ‚ç‚¹ã€æ·»åŠ èµ„æº</p></li><li><p>çµæ´»æ€§ï¼šæ ¹æ®è‡ªå·±çš„éœ€è¦å»ºç«‹ç›¸åº”åŸºç¡€è®¾æ–½ï¼Œå¢åŠ é›†ç¾¤è§„æ¨¡</p></li><li><p>è¡Œä¸šæ ‡å‡†ï¼šä¼—å¤šITé¢†å†›ä¼ä¸šå·²ç»åŠ å…¥åˆ°OpenStacké¡¹ç›®</p></li></ul><h3 id="4-OpenStackç»„ä»¶é€šä¿¡å…³ç³»">4. OpenStackç»„ä»¶é€šä¿¡å…³ç³»</h3><ul><li><p>åŸºäºAMQPåè®®çš„é€šä¿¡ï¼šç”¨äºæ¯ä¸ªé¡¹ç›®å†…éƒ¨å„ä¸ªç»„ä»¶ä¹‹é—´çš„é€šä¿¡</p></li><li><p>åŸºäºSQLçš„é€šä¿¡ï¼šç”¨äºå„ä¸ªé¡¹ç›®å†…éƒ¨çš„é€šä¿¡</p></li><li><p>åŸºäºHTTPåè®®è¿›è¡Œé€šä¿¡ï¼šé€šè¿‡å„é¡¹ç›®çš„APIå»ºç«‹çš„é€šä¿¡å…³ç³»ï¼ŒAPIéƒ½æ˜¯RESTful Web API</p></li><li><p>é€šè¿‡Native APIå®ç°é€šä¿¡ï¼šOpenStackå„ç»„ä»¶å’Œç¬¬ä¸‰æ–¹è½¯ç¡¬ä»¶ä¹‹é—´çš„é€šä¿¡</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> openstack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openstack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‘è®¡ç®—åŸºç¡€</title>
      <link href="/posts/fd5903c05f71.html"/>
      <url>/posts/fd5903c05f71.html</url>
      
        <content type="html"><![CDATA[<p>èƒŒæ™¯ï¼šé€šè¿‡æœ¬æ–‡å¯ä»¥äº†è§£äº‘è®¡ç®—åŸºç¡€æŠ€æœ¯ã€‚</p><hr><h2 id="ä¸€ã€è™šæ‹ŸåŒ–">ä¸€ã€è™šæ‹ŸåŒ–</h2><img src="https://www.whbblog.cn/usr/uploads/2021/08/4002873853.png" style="zoom: 50%;" /><p>è™šæ‹ŸåŒ–æ˜¯ä¸€ç§å…·ä½“æŠ€æœ¯ï¼ŒæŒ‡æ˜¯ä¸€ç§èµ„æºç®¡ç†æŠ€æœ¯ï¼Œæ˜¯å°†è®¡ç®—æœºçš„å„ç§å®ä½“èµ„æºï¼Œå¦‚CPUã€ç½‘ç»œã€å†…å­˜åŠå­˜å‚¨ç­‰äºˆä»¥æŠ½è±¡ã€è½¬æ¢åå‘ˆç°å‡ºæ¥ï¼Œæ‰“ç ´å®ä½“ç»“æ„ä»¶çš„ä¸å¯åˆ†å‰²éšœç¢ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ¯”åŸæ¥çš„ç»„æ€æ›´å¥½çš„æ–¹å¼æ¥åº”ç”¨è¿™äº›èµ„æºã€‚</p><h3 id="1-CPU-ç‰¹æƒçº§">(1) CPU ç‰¹æƒçº§</h3><img src="https://www.whbblog.cn/usr/uploads/2021/08/1868717692.png" style="zoom: 50%;" /><p>â€‹ç‰¹æƒçº§æ˜¾ç„¶æ˜¯éå¸¸æœ‰æ•ˆçš„ç®¡ç†å’Œæ§åˆ¶ç¨‹åºæ‰§è¡Œçš„æ‰‹æ®µï¼Œå› æ­¤åœ¨ç¡¬ä»¶ä¸Šå¯¹ç‰¹æƒçº§åšäº†å¾ˆå¤šæ”¯æŒï¼Œå°±Intel x86æ¶æ„çš„CPUæ¥è¯´ä¸€å…±æœ‰0~3å››ä¸ªç‰¹æƒçº§ï¼Œ0çº§æœ€é«˜ï¼Œ3çº§æœ€ä½ï¼Œç¡¬ä»¶ä¸Šåœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤æ—¶éƒ½ä¼šå¯¹æŒ‡ä»¤æ‰€å…·æœ‰çš„ç‰¹æƒçº§åšç›¸åº”çš„æ£€æŸ¥ã€‚ç¡¬ä»¶å·²ç»æä¾›äº†ä¸€å¥—ç‰¹æƒçº§ä½¿ç”¨çš„ç›¸å…³æœºåˆ¶ï¼Œè½¯ä»¶è‡ªç„¶å°±æ˜¯å¥½å¥½åˆ©ç”¨çš„é—®é¢˜ï¼Œè¿™å±äºæ“ä½œç³»ç»Ÿè¦åšçš„äº‹æƒ…ï¼Œå¯¹äº Unix/Linuxæ¥è¯´ï¼Œåªä½¿ç”¨äº†0çº§ç‰¹æƒçº§å’Œ3çº§ç‰¹æƒçº§ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨Unix/Linuxç³»ç»Ÿä¸­ï¼Œä¸€æ¡å·¥ä½œåœ¨0çº§ç‰¹æƒçº§çš„æŒ‡ä»¤å…·æœ‰äº†CPUèƒ½æä¾›çš„æœ€é«˜æƒåŠ›ï¼Œè€Œä¸€æ¡å·¥ä½œåœ¨3çº§ç‰¹æƒçº§çš„æŒ‡ä»¤å…·æœ‰CPUæä¾›çš„æœ€ä½æˆ–è€…è¯´æœ€åŸºæœ¬æƒåŠ›ã€‚</p><h3 id="2-å†…æ ¸æ€å’Œç”¨æˆ·æ€">(2) å†…æ ¸æ€å’Œç”¨æˆ·æ€</h3><img src="https://www.whbblog.cn/usr/uploads/2021/08/1574077990.png" style="zoom: 50%;" /><ul><li>ring 0 è¢«å«åšå†…æ ¸æ€ï¼Œå®Œå…¨åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­è¿è¡Œ</li><li>ring 3 è¢«å«åšç”¨æˆ·æ€ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­è¿è¡Œ</li></ul><img src="https://www.whbblog.cn/usr/uploads/2021/08/1586381030.png" style="zoom: 75%;" /><p>â€‹ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨å°† Linux æ•´ä¸ªä½“ç³»åˆ†ä¸ºç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œä¸ºäº†ä½¿åº”ç”¨ç¨‹åºè®¿é—®åˆ°å†…æ ¸çš„èµ„æºï¼Œå¦‚ CPUã€å†…å­˜ã€I/Oï¼Œå†…æ ¸å¿…é¡»æä¾›ä¸€ç»„é€šç”¨çš„è®¿é—®æ¥å£ï¼Œè¿™äº›æ¥å£å°±å«ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>â€‹åº“å‡½æ•°å°±æ˜¯å±è”½è¿™äº›å¤æ‚çš„åº•å±‚å®ç°ç»†èŠ‚ï¼Œå‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œä»è€Œæ›´åŠ å…³æ³¨ä¸Šå±‚çš„é€»è¾‘å®ç°ï¼Œå®ƒå¯¹ç³»ç»Ÿè°ƒç”¨è¿›è¡Œå°è£…ï¼Œæä¾›ç®€å•çš„åŸºæœ¬æ¥å£ç»™ç¨‹åºå‘˜ã€‚</p><p>â€‹Shell é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¤–å£³çš„æ„æ€ï¼Œå°±å¥½åƒæŠŠå†…æ ¸åŒ…è£¹èµ·æ¥çš„å¤–å£³ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„åº”ç”¨ç¨‹åºï¼Œä¿—ç§°å‘½ä»¤è¡Œã€‚Shell ä¹Ÿæ˜¯å¯ç¼–ç¨‹çš„ï¼Œå®ƒæœ‰æ ‡å‡†çš„ Shell è¯­æ³•ï¼Œç¬¦åˆå…¶è¯­æ³•çš„æ–‡æœ¬å« Shell è„šæœ¬ï¼Œå¾ˆå¤šäººéƒ½ä¼šç”¨ Shell è„šæœ¬å®ç°ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥æé«˜å·¥ä½œæ•ˆç‡ã€‚</p><p>â€‹æœ€åæ¥è¯´è¯´ï¼Œä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´ç”¨æˆ·æ€åˆ°å†…æ ¸æ€åˆ‡æ¢</p><ul><li><p>ç³»ç»Ÿè°ƒç”¨ï¼šç”¨æˆ·æ€è¿›ç¨‹ä¸»åŠ¨åˆ‡æ¢åˆ°å†…æ ¸æ€çš„æ–¹å¼ï¼Œç”¨æˆ·æ€è¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘æ“ä½œç³»ç»Ÿç”³è¯·èµ„æºå®Œæˆå·¥ä½œï¼Œä¾‹å¦‚ forkï¼ˆï¼‰å°±æ˜¯ä¸€ä¸ªåˆ›å»ºæ–°è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼Œç³»ç»Ÿè°ƒç”¨çš„æœºåˆ¶æ ¸å¿ƒä½¿ç”¨äº†æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç‰¹åˆ«å¼€æ”¾çš„ä¸€ä¸ªä¸­æ–­æ¥å®ç°ï¼Œå¦‚ Linux çš„ int 80h ä¸­æ–­ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºè½¯ä¸­æ–­ã€‚</p></li><li><p>å¼‚å¸¸ï¼šå½“ CPU åœ¨æ‰§è¡Œç”¨æˆ·æ€çš„è¿›ç¨‹æ—¶ï¼Œå‘ç”Ÿäº†ä¸€äº›æ²¡æœ‰é¢„çŸ¥çš„å¼‚å¸¸ï¼Œè¿™æ—¶å½“å‰è¿è¡Œè¿›ç¨‹ä¼šåˆ‡æ¢åˆ°å¤„ç†æ­¤å¼‚å¸¸çš„å†…æ ¸ç›¸å…³è¿›ç¨‹ä¸­ï¼Œä¹Ÿå°±æ˜¯åˆ‡æ¢åˆ°äº†å†…æ ¸æ€ï¼Œå¦‚ç¼ºé¡µå¼‚å¸¸ã€‚</p></li><li><p>å¤–å›´è®¾å¤‡ä¸­æ–­ï¼šå½“ CPU åœ¨æ‰§è¡Œç”¨æˆ·æ€çš„è¿›ç¨‹æ—¶ï¼Œå¤–å›´è®¾å¤‡å®Œæˆç”¨æˆ·è¯·æ±‚çš„æ“ä½œåï¼Œä¼šå‘ CPU å‘å‡ºç›¸åº”çš„ä¸­æ–­ä¿¡å·ï¼Œè¿™æ—¶ CPU ä¼šæš‚åœæ‰§è¡Œä¸‹ä¸€æ¡å³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œè½¬åˆ°ä¸ä¸­æ–­ä¿¡å·å¯¹åº”çš„å¤„ç†ç¨‹åºå»æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åˆ‡æ¢åˆ°äº†å†…æ ¸æ€ã€‚å¦‚ç¡¬ç›˜è¯»å†™æ“ä½œå®Œæˆï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°ç¡¬ç›˜è¯»å†™çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­æ‰§è¡Œåè¾¹çš„æ“ä½œç­‰ã€‚</p></li></ul><h3 id="3-Hypervisor-VMM">(3) Hypervisor(VMM)</h3><p><strong>è™šæ‹ŸåŒ–ç®¡ç†ç¨‹åº</strong></p><p>â€‹ä¸€ç§è¿è¡Œåœ¨åŸºç¡€ç‰©ç†æœåŠ¡å™¨å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸­é—´è½¯ä»¶å±‚ï¼ˆå¯ä»¥æ˜¯è½¯ä»¶ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯å›ºä»¶ç¨‹åºï¼‰ï¼Œå®ƒå…è®¸å¤šä¸ªæ“ä½œç³»ç»Ÿå’Œåº”ç”¨å…±äº«ä¸€å¥—åŸºç¡€ç‰©ç†ç¡¬ä»¶ï¼Œå› æ­¤ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯è™šæ‹Ÿç¯å¢ƒä¸­çš„â€œå…ƒâ€æ“ä½œç³»ç»Ÿï¼›å®ƒå¯ä»¥åè°ƒè®¿é—®æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰ç‰©ç†è®¾å¤‡å’Œè™šæ‹Ÿæœºï¼Œå½“æœåŠ¡å™¨å¯åŠ¨å¹¶æ‰§è¡ŒHypervisoræ—¶å®ƒä¼šç»™æ¯ä¸€å°è™šæ‹Ÿæœºåˆ†é…é€‚é‡çš„å†…å­˜ã€CPUã€ç½‘ç»œå’Œç£ç›˜ï¼Œå¹¶åŠ è½½æ‰€æœ‰è™šæ‹Ÿæœºçš„å®¢æˆ·æ“ä½œç³»ç»Ÿï¼Œå®ƒèƒ½å¤Ÿä½¿å¾—è¿™äº›è™šæ‹Ÿæœºå¯é«˜æ•ˆåœ°å»åˆ†äº«ç‰©ç†æœåŠ¡å™¨çš„ç¡¬ä»¶èµ„æºã€‚ä¹Ÿå«è™šæ‹Ÿæœºç›‘è§†å™¨VMMï¼ˆVirtual Machine Monitorï¼‰ï¼›<br>Hypervisoræ˜¯æ‰€æœ‰è™šæ‹ŸåŒ–æŠ€æœ¯çš„æ ¸å¿ƒï¼Œéä¸­æ–­åœ°æ”¯æŒå¤šå·¥ä½œè´Ÿè½½è¿ç§»çš„èƒ½åŠ›æ˜¯Hypervisorçš„åŸºæœ¬åŠŸèƒ½ï¼›<br>Hypervisor ç¿»è¯‘è¿‡æ¥å°±æ˜¯è¶…çº§ç›‘ç£è€…ï¼Œè¢«å¼•ç”³ä¸ºè¶…çº§ç®¡ç†ç¨‹åºã€è¶…å¤šåŠŸèƒ½ç®¡ç†å™¨ã€è™šæ‹Ÿæœºç®¡ç†å™¨ã€VMMï¼›</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4272142950.png" style="zoom:67%;" /><h3 id="4-Hypervisorç±»å‹">(4) Hypervisorç±»å‹</h3><p><strong>TYPE 1 å…¨è™šæ‹ŸåŒ–</strong></p><p>â€‹å®¢æˆ·æ“ä½œç³»ç»Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Ring 0 è€Œæ— éœ€ä¿®æ”¹ï¼Œå°±å¯ä»¥è¿è¡Œåœ¨è¿™æ ·çš„VMMä¸­ã€‚åœ¨å…¨è™šæ‹ŸåŒ–çš„è™šæ‹Ÿå¹³å°ä¸­ï¼ŒGuestOSå¹¶ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸€å°è™šæ‹Ÿæœºï¼Œå®ƒä¼šè®¤ä¸ºè‡ªå·±å°±æ˜¯è¿è¡Œåœ¨è®¡ç®—æœºç‰©ç†ç¡¬ä»¶è®¾å¤‡ä¸Šçš„HostOSã€‚å› ä¸ºå…¨è™šæ‹ŸåŒ–çš„VMMä¼šå°†ä¸€ä¸ªOSæ‰€èƒ½å¤Ÿæ“ä½œçš„CPUã€å†…å­˜ã€å¤–è®¾ç­‰ç‰©ç†è®¾å¤‡é€»è¾‘æŠ½è±¡æˆä¸ºè™šæ‹ŸCPUã€è™šæ‹Ÿå†…å­˜ã€è™šæ‹Ÿå¤–è®¾ç­‰è™šæ‹Ÿè®¾å¤‡åï¼Œå†äº¤ç”±GuestOSæ¥æ“ä½œä½¿ç”¨ã€‚è¿™æ ·çš„GuestOSä¼šå°†åº•å±‚ç¡¬ä»¶å¹³å°è§†ä¸ºè‡ªå·±æ‰€æœ‰çš„ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œè¿™äº›éƒ½æ˜¯VMMä¸ºGuestOSåˆ¶é€ äº†è¿™ç§å‡è±¡ã€‚</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4117541819.png" style="zoom: 60%;" /><p>a. è½¯ä»¶è¾…åŠ©å…¨è™šæ‹ŸåŒ–</p><p>â€‹åœ¨Intelç­‰CPUå‚å•†è¿˜æ²¡æœ‰å‘å¸ƒx86 CPUè™šæ‹ŸåŒ–æŠ€æœ¯ä¹‹å‰ï¼Œå®Œå…¨è™šæ‹ŸåŒ–éƒ½æ˜¯é€šè¿‡è½¯ä»¶è¾…åŠ©çš„æ–¹å¼æ¥å®ç°çš„ã€‚è€Œè½¯ä»¶è¾…åŠ©çš„å…¨è™šæ‹ŸåŒ–ä¸»è¦æ˜¯åº”ç”¨äº†ä¸¤ç§æœºåˆ¶ï¼šç‰¹æƒè§£é™¤å’Œé™·å…¥æ¨¡æ‹Ÿ(äºŒè¿›åˆ¶ç¿»è¯‘)ã€‚</p><p>â€‹è½¯ä»¶è¾…åŠ©è™šæ‹ŸåŒ–èƒ½å¤ŸæˆåŠŸçš„å°†æ‰€æœ‰åœ¨GuestOSä¸­æ‰§è¡Œçš„ç³»ç»Ÿå†…æ ¸ç‰¹æƒæŒ‡ä»¤è¿›è¡Œæ•è·ã€ç¿»è¯‘ï¼Œä½¿ä¹‹æˆä¸ºåªèƒ½å¯¹GuestOSç”Ÿæ•ˆçš„è™šæ‹Ÿç‰¹æƒæŒ‡ä»¤ã€‚ä½†æ˜¯é€€ä¸€æ­¥æ¥è¯´ï¼Œä¹‹æ‰€ä»¥éœ€è¦è¿™ä¹ˆåšçš„å‰ææ˜¯å› ä¸ºCPUå¹¶ä¸èƒ½å‡†ç¡®çš„å»åˆ¤æ–­ä¸€ä¸ªç‰¹æƒæŒ‡ä»¤åˆ°åº•æ˜¯ç”±GuestOSå‘å‡ºçš„è¿˜æ˜¯ç”±HostOSå‘å‡ºçš„ï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•é’ˆå¯¹ä¸€ä¸ªæ­£ç¡®çš„OSå»å°†è¿™ä¸€ä¸ªç‰¹æƒæŒ‡ä»¤æ‰§è¡Œã€‚ç›´åˆ°åæ¥CPUå‚å•†ä»¬å‘å¸ƒäº†èƒ½å¤Ÿåˆ¤æ–­ç‰¹æƒæŒ‡ä»¤å½’å±çš„æ ‡å‡†x86 CPUä¹‹åï¼Œè¿æ¥äº†ç¡¬ä»¶è¾…åŠ©å…¨è™šæ‹ŸåŒ–ã€‚</p><p>b. ç¡¬ä»¶è¾…åŠ©å…¨è™šæ‹ŸåŒ–</p><p>å‰ææ¡ä»¶ï¼šCPU æ”¯æŒ Intel VT å’Œ AMD-væŠ€æœ¯</p><p>â€‹ç¡¬ä»¶è¾…åŠ©å…¨è™šæ‹ŸåŒ–ä¸»è¦ä½¿ç”¨äº†æ”¯æŒè™šæ‹ŸåŒ–åŠŸèƒ½çš„CPUè¿›è¡Œæ”¯æ’‘ï¼ŒCPUå¯ä»¥æ˜ç¡®çš„åˆ†è¾¨å‡ºæ¥è‡ªGuestOSçš„ç‰¹æƒæŒ‡ä»¤ï¼Œå¹¶é’ˆå¯¹GuestOSè¿›è¡Œç‰¹æƒæ“ä½œï¼Œè€Œä¸ä¼šå½±å“åˆ°HostOSã€‚</p><p><strong>TYPE 2 åŠè™šæ‹ŸåŒ–</strong></p><p>â€‹å¯¹å®¢æˆ·æ“ä½œç³»ç»Ÿ(VM)çš„å†…æ ¸è¿›è¡Œä¿®æ”¹ï¼Œå°†è¿è¡Œåœ¨Ring 0ä¸Šçš„æŒ‡ä»¤è½¬ä¸ºè°ƒç”¨hypervisorï¼ŒåŠè™šæ‹ŸåŒ–æŠ€æœ¯é€šè¿‡åœ¨GuestOSçš„æºä»£ç çº§åˆ«ä¸Šä¿®æ”¹ç‰¹æƒæŒ‡ä»¤æ¥å®ç°è™šæ‹ŸåŒ–ã€‚ä¿®æ”¹å†…æ ¸åçš„GuestOSä¹ŸçŸ¥é“è‡ªå·±å°±æ˜¯ä¸€å°è™šæ‹Ÿæœºã€‚æ‰€ä»¥èƒ½å¤Ÿå¾ˆå¥½çš„å¯¹æ ¸å¿ƒæ€æŒ‡ä»¤å’Œæ•æ„ŸæŒ‡ä»¤è¿›è¡Œè¯†åˆ«å’Œå¤„ç†ï¼Œä½†ç¼ºç‚¹åœ¨äºå¯¹ä¸å¼€æºçš„çš„é•œåƒæ–‡ä»¶æ— æ³•ä¿®æ”¹å†…æ ¸æ–‡ä»¶ï¼Œæ‰€ä»¥æ— æ³•å¯¹ä¸å¼€æºçš„æ“ä½œç³»ç»Ÿè¿›è¡Œè™šæ‹ŸåŒ–ã€‚</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2173196665.png" style="zoom:100%;" /><h3 id="5-å®¹å™¨æŠ€æœ¯">(5) å®¹å™¨æŠ€æœ¯</h3><p>â€‹è¿˜æœ‰ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯å±äºæ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–çš„èŒƒç•´ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”±æ“ä½œç³»ç»Ÿæä¾›è™šæ‹ŸåŒ–çš„æ”¯æŒï¼Œæ“ä½œç³»ç»Ÿæä¾›æ¥å£ï¼Œèƒ½å¤Ÿè®©åº”ç”¨ç¨‹åºé—´å¯ä»¥äº’ä¸å¹²æ‰°çš„ç‹¬ç«‹è¿è¡Œï¼Œå¹¶ä¸”èƒ½å¤Ÿå¯¹å…¶åœ¨è¿è¡Œä¸­æ‰€ä½¿ç”¨çš„èµ„æºè¿›è¡Œç®¡ç†ã€‚ç”±äºåº”ç”¨ç¨‹åºçš„è¿è¡Œè¢«éš”ç¦»åœ¨äº†ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒä¹‹ä¸­ï¼Œè¿™ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒå°±åƒä¸€ä¸ªå®¹å™¨ï¼ŒåŒ…å«ä½åº”ç”¨ç¨‹åºã€‚å®ç°æ–¹å¼åŸºäº Linux å†…æ ¸ä¸­çš„ namespace ã€ chroot ã€ cgroup æ¥å®ç°ã€‚</p><p>â€‹å®¹å™¨æŠ€æœ¯å’Œä¸»æœºè™šæ‹ŸåŒ–æŠ€æœ¯æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3601886735.png" style="zoom: 50%;" /><h3 id="6-QEMU">(6) QEMU</h3><p>â€‹QEMUï¼šæ˜¯ä¸€å¥—ç”±Fabrice Bellardç¼–å†™çš„æ¨¡æ‹Ÿå¤„ç†å™¨çš„è‡ªç”±è½¯ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯ä»¥å•ç‹¬è¿è¡Œçš„è½¯ä»¶ï¼Œå¯ä»¥ç‹¬ç«‹æ¨¡æ‹Ÿå‡ºæ•´å°è®¡ç®—æœºï¼ŒåŒ…æ‹¬CPUï¼Œå†…å­˜ï¼ŒIOè®¾å¤‡ï¼Œé€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„â€œé‡ç¼–è¯‘å™¨â€å¯¹ç‰¹å®šçš„å¤„ç†å™¨çš„äºŒè¿›åˆ¶ä»£ç è¿›è¡Œç¿»è¯‘ï¼Œä»è€Œå…·æœ‰äº†è·¨å¹³å°çš„é€šç”¨æ€§ï¼Œä½†ç”±äºå…¶æ‰€æœ‰æŒ‡ä»¤éƒ½éœ€è¦ç»è¿‡QEMUæ¥ç¿»è¯‘å› è€Œæ€§èƒ½ä¼šæ¯”è¾ƒå·®ï¼ˆå­˜è½¯ä»¶æ¨¡æ‹Ÿï¼‰ã€‚QEMUæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šç³»ç»Ÿæ¨¡å¼ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºæ•´ä¸ªç”µè„‘ç³»ç»Ÿï¼Œå¦ä¸€ç§æ˜¯ç”¨æˆ·æ¨¡å¼ï¼Œå¯ä»¥è¿è¡Œä¸åŒä¸å½“å‰ç¡¬ä»¶å¹³å°çš„å…¶ä»–å¹³å°ä¸Šçš„ç¨‹åºï¼ˆæ¯”å¦‚åœ¨x86å¹³å°ä¸Šè¿è¡Œè·‘åœ¨ARMå¹³å°ä¸Šçš„ç¨‹åºï¼‰ã€‚</p><h3 id="7-KVM">(7) KVM</h3><p>â€‹Kernel-Based Virtual Machine åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœºï¼Œæ˜¯Linuxå†…æ ¸çš„ä¸€ä¸ªå¯åŠ è½½æ¨¡å—ï¼Œé€šè¿‡è°ƒç”¨Linuxæœ¬èº«å†…æ ¸åŠŸèƒ½ï¼Œå®ç°å¯¹CPUçš„åº•å±‚è™šæ‹ŸåŒ–å’Œå†…å­˜çš„è™šæ‹ŸåŒ–ï¼Œä½¿Linuxå†…æ ¸æˆä¸ºè™šæ‹ŸåŒ–å±‚ï¼Œéœ€è¦x86æ¶æ„çš„ï¼Œæ”¯æŒè™šæ‹ŸåŒ–åŠŸèƒ½çš„ç¡¬ä»¶æ”¯æŒï¼ˆæ¯”å¦‚Intel-VTï¼ŒAMD-Vï¼‰ï¼Œæ˜¯ä¸€ç§å…¨è™šæ‹ŸåŒ–æ¶æ„ã€‚KVMåœ¨2007å¹´2æœˆè¢«å¯¼å…¥Linux 2.6.20å†…æ ¸ä¸­ã€‚ä»å­˜åœ¨å½¢å¼æ¥çœ‹ï¼Œå®ƒåŒ…æ‹¬ä¸¤ä¸ªå†…æ ¸æ¨¡å—ï¼škvm.ko å’Œ kvm_intel.koï¼ˆæˆ–kvm_amd.koï¼‰ï¼Œæœ¬è´¨ä¸Šï¼ŒKVMæ˜¯ç®¡ç†è™šæ‹Ÿç¡¬ä»¶è®¾å¤‡çš„é©±åŠ¨ï¼Œè¯¥é©±åŠ¨ä½¿ç”¨å­—ç¬¦è®¾å¤‡/dev/kvmï¼ˆç”±KVMæœ¬èº«åˆ›å»ºï¼‰ä½œä¸ºç®¡ç†æ¥å£ï¼Œä¸»è¦è´Ÿè´£vCPUçš„åˆ›å»ºï¼Œè™šæ‹Ÿå†…å­˜çš„åˆ†é…ï¼ŒvCPUå¯„å­˜å™¨çš„è¯»å†™ä»¥åŠvCPUçš„è¿è¡Œã€‚</p><p>â€‹KVMæ˜¯linuxå†…æ ¸çš„æ¨¡å—ï¼Œå®ƒéœ€è¦CPUçš„æ”¯æŒï¼Œé‡‡ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯Intel-VTï¼ŒAMD-Vï¼Œå†…å­˜çš„ç›¸å…³å¦‚Intelçš„EPTå’ŒAMDçš„RVIæŠ€æœ¯ï¼ŒGuest OSçš„CPUæŒ‡ä»¤ä¸ç”¨å†ç»è¿‡Qemuè½¬è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¤§å¤§æé«˜äº†é€Ÿåº¦ï¼ŒKVMé€šè¿‡/dev/kvmæš´éœ²æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ioctlå‡½æ•°æ¥è®¿é—®è¿™ä¸ªæ¥å£ã€‚</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1803114627.png" style="zoom:50%;" /><h3 id="8-QEMU-KVM">(8) QEMU-KVM</h3><p>â€‹ä»å‰é¢å¯¹KVMå†…æ ¸æ¨¡å—çš„ä»‹ç»çŸ¥é“ï¼Œå®ƒåªè´Ÿè´£CPUå’Œå†…å­˜çš„è™šæ‹ŸåŒ–ï¼ŒåŠ è½½äº†å®ƒä»¥åï¼Œç”¨æˆ·å°±å¯ä»¥è¿›ä¸€æ­¥é€šè¿‡å·¥å…·åˆ›å»ºè™šæ‹Ÿæœºï¼ˆKVMæä¾›æ¥å£ï¼‰ï¼Œä½†ä»…æœ‰KVMè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥æ§åˆ¶å†…æ ¸å»åšäº‹æƒ…ï¼ˆKVMåªæä¾›æ¥å£ï¼Œæ€ä¹ˆåˆ›å»ºè™šæ‹Ÿæœºï¼Œåˆ†é…vCPUç­‰å¹¶ä¸åœ¨å®ƒä¸Šé¢è¿›è¡Œï¼‰ï¼Œè¿˜å¿…é¡»æœ‰ä¸ªè¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´çš„å·¥å…·æ‰è¡Œï¼ŒKVMçš„å¼€å‘è€…é€‰æ‹©äº†æ¯”è¾ƒæˆç†Ÿçš„å¼€æºè™šæ‹ŸåŒ–è½¯ä»¶QEMUæ¥ä½œä¸ºè¿™ä¸ªå·¥å…·ï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œæœ€åå½¢æˆäº†QEMU-KVMã€‚</p><p>â€‹åœ¨QEMU-KVMä¸­ï¼ŒKVMè¿è¡Œåœ¨å†…æ ¸ç©ºé—´ï¼ŒQEMUè¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´ï¼Œå®é™…æ¨¡æ‹Ÿåˆ›å»ºï¼Œç®¡ç†å„ç§è™šæ‹Ÿç¡¬ä»¶ï¼ŒQEMUå°†KVMæ•´åˆäº†è¿›æ¥ï¼Œé€šè¿‡/ioctl è°ƒç”¨ /dev/kvmï¼Œä»è€Œå°†CPUæŒ‡ä»¤çš„éƒ¨åˆ†äº¤ç»™å†…æ ¸æ¨¡å—æ¥åšï¼ŒKVMå®ç°äº†CPUå’Œå†…å­˜çš„è™šæ‹ŸåŒ–ï¼Œä½†kvmä¸èƒ½è™šæ‹Ÿå…¶ä»–ç¡¬ä»¶è®¾å¤‡ï¼Œå› æ­¤qemuè¿˜æœ‰æ¨¡æ‹ŸIOè®¾å¤‡ï¼ˆç£ç›˜ï¼Œç½‘å¡ï¼Œæ˜¾å¡ç­‰ï¼‰çš„ä½œç”¨ï¼ŒKVMåŠ ä¸ŠQEMUåå°±æ˜¯å®Œæ•´æ„ä¹‰ä¸Šçš„æœåŠ¡å™¨è™šæ‹ŸåŒ–ã€‚å½“ç„¶ï¼Œç”±äºqemuæ¨¡æ‹Ÿioè®¾å¤‡æ•ˆç‡ä¸é«˜çš„åŸå› ï¼Œç°åœ¨å¸¸å¸¸é‡‡ç”¨åŠè™šæ‹ŸåŒ–çš„virtioæ–¹å¼æ¥è™šæ‹ŸIOè®¾å¤‡ã€‚</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1528302303.jpg" style="zoom:67%;" /><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒQEMU-KVMå…·æœ‰ä¸¤å¤§ä½œç”¨ï¼š<br>1.æä¾›å¯¹cpuï¼Œå†…å­˜ï¼ˆKVMè´Ÿè´£ï¼‰ï¼ŒIOè®¾å¤‡ï¼ˆQEMUè´Ÿè´£ï¼‰çš„è™šæ‹Ÿ<br>2.å¯¹å„ç§è™šæ‹Ÿè®¾å¤‡çš„åˆ›å»ºï¼Œè°ƒç”¨è¿›è¡Œç®¡ç†ï¼ˆQEMUè´Ÿè´£ï¼‰</p><h3 id="9-Libvirt">(9) Libvirt</h3><p>â€‹ä¸€ä¸ªé’ˆå¯¹å„ç§è™šæ‹ŸåŒ–å¹³å°çš„è™šæ‹Ÿæœºç®¡ç†çš„APIåº“ï¼Œä¸€äº›å¸¸ç”¨çš„è™šæ‹Ÿæœºç®¡ç†å·¥å…·å¦‚virshï¼ˆç±»ä¼¼vimç¼–è¾‘å™¨ï¼‰ï¼Œvirt-installï¼Œvirt-managerç­‰å’Œäº‘è®¡ç®—æ¡†æ¶å¹³å°ï¼ˆå¦‚OpenStackï¼ŒOpenNebulaï¼ŒEucalyptusç­‰ï¼‰éƒ½åœ¨åº•å±‚ä½¿ç”¨libvirtæä¾›çš„åº”ç”¨ç¨‹åºæ¥å£ã€‚libvirtä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šAPIåº“ï¼Œä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ libvirtd å’Œä¸€ä¸ªé»˜è®¤å‘½ä»¤è¡Œç®¡ç†å·¥å…· virshã€‚</p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3039054616.png" style="zoom:50%;" /><h2 id="äºŒã€äº‘è®¡ç®—">äºŒã€äº‘è®¡ç®—</h2><img src="https://www.whbblog.cn/usr/uploads/2021/08/3446349981.png" style="zoom:50%;" /><p>â€‹â€œäº‘â€å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç½‘ç»œï¼Œç‹­ä¹‰ä¸Šè®²ï¼Œäº‘è®¡ç®—å°±æ˜¯ä¸€ç§æä¾›èµ„æºçš„ç½‘ç»œï¼Œä½¿ç”¨è€…å¯ä»¥éšæ—¶è·å–â€œäº‘â€ä¸Šçš„èµ„æºï¼ŒæŒ‰éœ€æ±‚é‡ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥çœ‹æˆæ˜¯æ— é™æ‰©å±•çš„ï¼Œåªè¦æŒ‰ä½¿ç”¨é‡ä»˜è´¹å°±å¯ä»¥ã€‚</p><p>â€‹äº‘è®¡ç®—æ˜¯ä¸€ç§æŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„æœåŠ¡æ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ç§èƒ½å¤Ÿæä¾›å¯ç”¨çš„ã€ä¾¿æ·çš„ã€æŒ‰éœ€æ±‚çš„ç½‘ç»œè®¿é—®æ¨¡å¼ï¼Œè®¡ç®—å…±äº«æ± èƒ½å¤Ÿå¿«é€Ÿçš„ä¸ºç”¨æˆ·æä¾›ç½‘ç»œã€æœåŠ¡å™¨ã€å­˜å‚¨ã€åº”ç”¨è½¯ä»¶åŠå…¶ä»–æœåŠ¡ï¼Œå¹¶ä¸”åªéœ€è¦èŠ±è´¹å¾ˆå°‘çš„ç®¡ç†æ—¶é—´ã€‚</p><h3 id="1-äº‘è®¡ç®—ç±»å‹">1. äº‘è®¡ç®—ç±»å‹</h3><img src= "https://www.whbblog.cn/usr/uploads/2021/08/2039028005.png" style="zoom:50%;" /><div class="tip info"><p><span class='p center small'>å°æ•…äº‹</span></p><ol><li>å¼ ä¸‰è‡ªå·±åœ¨å®¶åšé¥­åƒï¼Œè¿™æ˜¯<strong>ç§æœ‰äº‘</strong>ï¼Œå¨æˆ¿å°±æ˜¯è‡ªå»ºæœºæˆ¿ã€‚</li><li>æå››å¤©å¤©åœ¨é¥­åº—åƒï¼Œè¿™æ˜¯<strong>å…¬æœ‰äº‘</strong>ï¼Œé¥­åº—å°±æ˜¯äº‘æ•°æ®ä¸­å¿ƒã€‚</li><li>ç„¶åç‹äº”æ¯”è¾ƒç‰›å‰ï¼Œåœ¨é¥­åº—æœ‰ä¸ªå›ºå®šåŒ…é—´ï¼Œä¸å¯¹å¤–å¼€æ”¾ï¼Œè¿™æ˜¯<strong>æ‰˜ç®¡å‹ç§æœ‰äº‘</strong>ï¼ˆæœ‰çš„å‚å•†å°†å…¶å®šä¹‰ä¸ºä¸“æœ‰äº‘ï¼‰ã€‚åŒ…é—´å°±å¥½æ¯”äº‘æ•°æ®ä¸­å¿ƒçš„æ‰˜ç®¡æœåŠ¡å™¨ã€‚</li><li>æŸä¸€å¤©å¼ ä¸‰å®¶æ¥äº†åæ¥ä¸ªå®¢äººï¼Œè¿™æ˜¯ä¸šåŠ¡çªå¢ï¼Œå®¶é‡Œæ²¡æ³•åä¸‹é‚£ä¹ˆå¤šäººï¼Œè¦å»é¥­åº—ï¼Œè¿™æ˜¯<strong>ç§æœ‰äº‘è½¬å…¬æœ‰äº‘</strong>ã€‚</li><li>ç„¶åå¼ ä¸‰çˆ¸å¦ˆä¸ºäº†çœç‚¹é’±å†³å®šç•™åœ¨å®¶é‡Œåƒï¼Œå¼ ä¸‰å¸¦ç€å®¢äººå»é¥­åº—åƒï¼Œè¿™å°±æ˜¯<strong>æ··åˆäº‘</strong>ã€‚</li></ol></div><h4 id="ï¼ˆ1ï¼‰ç§æœ‰äº‘ï¼ˆPrivate-Cloudï¼‰">ï¼ˆ1ï¼‰ç§æœ‰äº‘ï¼ˆPrivate Cloudï¼‰</h4><p>â€‹ç§æœ‰äº‘å¯å¹¿ä¹‰åœ°å®šä¹‰ä¸ºä¸“ä¸ºå•ä¸ªæœ€ç»ˆç”¨æˆ·æˆ–ç¾¤ç»„è€Œåˆ›å»ºï¼Œè€Œä¸”é€šå¸¸åœ¨è¯¥ç”¨æˆ·æˆ–ç¾¤ç»„çš„é˜²ç«å¢™å†…è¿è¡Œçš„äº‘ç¯å¢ƒã€‚å¦‚æœåº•å±‚ IT åŸºç¡€æ¶æ„å½’æŸä¸ªæ‹¥æœ‰å®Œå…¨ç‹¬ç«‹è®¿é—®æƒé™çš„å®¢æˆ·ä¸“æœ‰ï¼Œé‚£è¿™ç§äº‘å°±æ˜¯ç§æœ‰äº‘ã€‚</p><p>â€‹ä½†æ˜¯ï¼Œå¦‚ä»Šçš„ç§æœ‰äº‘ä¸å†å¿…é¡»ä»å†…éƒ¨ IT åŸºç¡€æ¶æ„æ¥æ­å»ºã€‚ç°åœ¨ï¼Œè®¸å¤šä¼ä¸šå·²å¼€å§‹åœ¨ç§Ÿèµçš„ã€ä¾›åº”å•†æ‰€æœ‰çš„å¤–éƒ¨æ•°æ®ä¸­å¿ƒå†…æ„å»ºç§æœ‰äº‘ï¼Œæ‰€ä»¥ä½ç½®å’Œæ‰€æœ‰æƒéƒ½æ—©å·²ä¸æ˜¯ç•Œå®šæ ‡å‡†ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿè®©ç§æœ‰äº‘å½¢æˆäº†è®¸å¤šå­åˆ†ç±»ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>æ‰˜ç®¡ç§æœ‰äº‘</li></ul><p>å®¢æˆ·å¯ä»¥åˆ›å»ºå¹¶ä½¿ç”¨ç”±ç¬¬ä¸‰æ–¹ä¾›åº”å•†éƒ¨ç½²ã€é…ç½®å’Œç®¡ç†çš„ç§æœ‰äº‘ã€‚é€‚åˆ IT å›¢é˜Ÿäººæ‰‹ä¸è¶³æˆ–æŠ€èƒ½æ¬ ç¼ºçš„ä¼ä¸šï¼Œèƒ½ä¸ºç”¨æˆ·æä¾›æ›´ä¸ºå‡ºè‰²çš„ç§æœ‰äº‘æœåŠ¡å’ŒåŸºç¡€æ¶æ„ã€‚</p><ul><li>ä¸“ç”¨äº‘</li></ul><p>å®ƒå°±åƒæ˜¯äº‘ä¸­çš„äº‘ã€‚æ‚¨å¯ä»¥åœ¨å…¬å…±äº‘æˆ–ç§æœ‰äº‘ä¸Šéƒ¨ç½²ä¸“ç”¨äº‘ã€‚ä¾‹å¦‚ï¼Œä¼šè®¡éƒ¨é—¨å¯ä»¥åœ¨ä¼ä¸šçš„ç§æœ‰äº‘ä¸­éƒ¨ç½²è‡ªå·±çš„ä¸“ç”¨äº‘ã€‚</p><h4 id="ï¼ˆ2ï¼‰å…¬æœ‰äº‘ï¼ˆPublic-Cloudï¼‰">ï¼ˆ2ï¼‰å…¬æœ‰äº‘ï¼ˆPublic Cloudï¼‰</h4><p>â€‹å…¬æœ‰äº‘é€šå¸¸ç”±éæœ€ç»ˆç”¨æˆ·æ‰€æœ‰çš„ IT åŸºç¡€æ¶æ„æ„å»ºè€Œæˆã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è§„æ¨¡æœ€å¤§çš„å…¬å…±äº‘æä¾›å•†ï¼šé˜¿é‡Œäº‘ã€Amazon Web Servicesï¼ˆAWSï¼‰ã€Google äº‘ã€IBM Cloud åŠ Microsoft Azureã€‚</p><p>â€‹ä»¥å‰çš„å…¬å…±äº‘åŸºæœ¬éƒ½åœ¨ç»„ç»‡å¤–éƒ¨è¿è¡Œï¼Œä½†å¦‚ä»Šçš„å…¬å…±äº‘æä¾›å•†å·²é€æ¸å¼€å§‹åœ¨å®¢æˆ·çš„å†…éƒ¨æ•°æ®ä¸­å¿ƒæä¾›äº‘æœåŠ¡ã€‚æ‰€ä»¥ç”¨ä½ç½®å’Œæ‰€æœ‰æƒæ¥åŒºåˆ†å·²ç»ä¸å†é€‚ç”¨ã€‚</p><p>åªè¦ç¯å¢ƒè¿›è¡Œäº†åˆ†åŒºï¼Œå¹¶é‡æ–°åˆ†é…ç»™å¤šä¸ªç§Ÿæˆ·ï¼Œé‚£è¿™ç§äº‘å°±æ˜¯å…¬å…±äº‘ã€‚è®¡è´¹ç»“æ„ä¸å†æ˜¯å…¬å…±äº‘çš„å¿…è¦ç‰¹å¾ï¼Œå› ä¸ºæœ‰äº›äº‘æä¾›å•†ï¼ˆæ¯”å¦‚ Massachusettes Open Cloudï¼‰å…è®¸ç§Ÿæˆ·å…è´¹ä½¿ç”¨å…¶äº‘æœåŠ¡ã€‚å…¬å…±äº‘æä¾›å•†æ‰€ä½¿ç”¨çš„è£¸æœº IT åŸºç¡€æ¶æ„ä¹Ÿå¯ä»¥æŠ½è±¡å¹¶ä½œä¸º IaaS å‡ºå”®ï¼Œæˆ–å¼€å‘æˆä¸€ç§ä½œä¸º PaaS å‡ºå”®çš„å¹³å°ã€‚</p><h4 id="ï¼ˆ3ï¼‰æ··åˆäº‘ï¼ˆHybrid-Cloudï¼‰">ï¼ˆ3ï¼‰æ··åˆäº‘ï¼ˆHybrid Cloudï¼‰</h4><p>æ··åˆäº‘æ˜¯ä»å±€åŸŸç½‘ï¼ˆLANï¼‰ã€å¹¿åŸŸç½‘ï¼ˆWANï¼‰ã€è™šæ‹Ÿä¸“ç”¨ç½‘ï¼ˆVPNï¼‰å’Œ/æˆ– API è¿æ¥çš„å¤šä¸ªç¯å¢ƒåˆ›å»ºè€Œæˆçš„ IT ç¯å¢ƒï¼Œä½†çœ‹èµ·æ¥åªæ˜¯å•ä¸€çš„ä¸€ä¸ªç¯å¢ƒã€‚</p><p>æ··åˆäº‘çš„ç‰¹æ€§è¾ƒä¸ºå¤æ‚ï¼Œä¸åŒçš„äººå¯¹å®ƒçš„è¦æ±‚å’Œç†è§£éƒ½å„ä¸ç›¸åŒã€‚ä¾‹å¦‚ï¼Œæ··åˆäº‘å¯èƒ½éœ€è¦åŒ…å«ï¼š</p><ul><li>è‡³å°‘ 1 ä¸ªç§æœ‰äº‘ä¸è‡³å°‘ 1 ä¸ªå…¬å…±äº‘</li><li>2 ä¸ªæˆ–å¤šä¸ªç›¸äº’è¿æ¥çš„ç§æœ‰äº‘</li><li>2 ä¸ªæˆ–å¤šä¸ªå…¬å…±äº‘</li><li>è¿æ¥è‡³å°‘ä¸€ä¸ªå…¬å…±äº‘æˆ–ç§æœ‰äº‘çš„è£¸æœºæˆ–è™šæ‹Ÿç¯å¢ƒ</li></ul><p>â€‹    ä¸è¿‡ï¼Œå¦‚æœåº”ç”¨å¯ä»¥è½»æ¾åœ°ç§»å…¥æˆ–ç§»å‡ºå¤šä¸ªç‹¬ç«‹ä½†ç›¸äº’è¿æ¥çš„ç¯å¢ƒï¼Œæ¯ä¸ª IT ç³»ç»Ÿå°±ç›¸å½“äºæˆäº†ä¸€ä¸ªæ··åˆäº‘ã€‚è¿™äº›ç¯å¢ƒä¸­è‡³å°‘æœ‰ä¸€éƒ¨åˆ†å¿…é¡»æ¥è‡ªå¯æŒ‰éœ€æ‰©å±•çš„æ•´åˆ IT èµ„æºï¼Œè€Œæ‚¨éœ€è¦ä½¿ç”¨é›†æˆåŒ–ç®¡ç†å’Œç¼–æ’å¹³å°ï¼ŒæŠŠæ‰€æœ‰è¿™äº›ç¯å¢ƒè§†ä¸ºå•ä¸ªç¯å¢ƒè¿›è¡Œç®¡ç†ã€‚</p><h4 id="ï¼ˆ4ï¼‰å¤šäº‘-ï¼ˆMulticloudï¼‰">ï¼ˆ4ï¼‰å¤šäº‘ ï¼ˆMulticloudï¼‰</h4><p>â€‹å¤šäº‘æ˜¯ä¸€ç§äº‘æ¶æ„ï¼Œç”±å¤šä¸ªäº‘ä¾›åº”å•†æä¾›çš„å¤šä¸ªäº‘æœåŠ¡ç»„åˆè€Œæˆï¼Œæ—¢å¯ä»¥æ˜¯å…¬å…±äº‘ï¼Œä¹Ÿå¯ä»¥æ˜¯ç§æœ‰äº‘ã€‚æ‰€æœ‰æ··åˆäº‘éƒ½æ˜¯å¤šäº‘ï¼Œä½†å¹¶éæ‰€æœ‰å¤šäº‘éƒ½æ˜¯æ··åˆäº‘ã€‚å½“é€šè¿‡æŸç§å½¢å¼çš„é›†æˆæˆ–ç¼–æ’å°†å¤šä¸ªäº‘è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œå¤šäº‘å°±å˜æˆäº†æ··åˆäº‘ã€‚</p><p>â€‹å¤šäº‘ç¯å¢ƒå¯èƒ½æ˜¯æœ‰æ„ä¸ºä¹‹ï¼ˆæ›´å¥½åœ°æ§åˆ¶æ•æ„Ÿæ•°æ®ï¼Œæˆ–ä½œä¸ºå†—ä½™å­˜å‚¨ç©ºé—´ä»¥æé«˜ç¾éš¾æ¢å¤èƒ½åŠ›ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å¶ç„¶å½¢æˆçš„ï¼ˆé€šå¸¸æ˜¯å½±å­ IT çš„ç»“æœï¼‰ã€‚æ— è®ºå“ªç§ï¼Œéƒ½è¡¨æ˜æœ‰è¶Šæ¥è¶Šå¤šçš„ä¼ä¸šé€‰æ‹©äº†å¤šäº‘ï¼Œä»¥æœŸé€šè¿‡æ‰©å±•æ›´å¤šç¯å¢ƒæ¥æ”¹è¿›å®‰å…¨ä¸æ€§èƒ½ã€‚</p><h3 id="2-äº‘è®¡ç®—ä¸šåŠ¡æ¨¡å¼">2. äº‘è®¡ç®—ä¸šåŠ¡æ¨¡å¼</h3><img src= "https://www.whbblog.cn/usr/uploads/2021/08/1946150039.jpg" style="zoom:75%;" /><h4 id="ï¼ˆ1ï¼‰Iaas">ï¼ˆ1ï¼‰Iaas</h4><p>Iaasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œç­‰å…¶ä»–çš„èµ„æºæœåŠ¡ï¼Œç”¨æˆ·ä¸éœ€è¦æ§åˆ¶å­˜å‚¨ä¸ç½‘ç»œç­‰åŸºç¡€è®¾æ–½ã€‚</p><h4 id="ï¼ˆ2ï¼‰Paas">ï¼ˆ2ï¼‰Paas</h4><p>Paasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—ä¸­çš„å¼€å‘å’Œåˆ†å‘åº”ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æˆ·èƒ½å¤Ÿéƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ§åˆ¶ç›¸å…³çš„æ‰˜ç®¡ç¯å¢ƒï¼Œæ¯”å¦‚äº‘æœåŠ¡å™¨åŠæ“ä½œç³»ç»Ÿï¼Œä½†ç”¨æˆ·ä¸éœ€è¦æ¥è§¦åˆ°äº‘è®¡ç®—ä¸­çš„åŸºç¡€è®¾æ–½ã€‚</p><h4 id="ï¼ˆ3ï¼‰Saas">ï¼ˆ3ï¼‰Saas</h4><p>Saasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—åŸºç¡€è®¾æ–½ä¸Šçš„åº”ç”¨ç¨‹åºï¼Œç”¨æˆ·åªéœ€è¦åœ¨å®¢æˆ·ç«¯ç•Œé¢è®¿é—®å³å¯ä½¿ç”¨åˆ°æ‰€éœ€èµ„æºï¼Œè€Œæ¥è§¦ä¸åˆ°äº‘è®¡ç®—çš„åŸºç¡€è®¾æ–½ã€‚</p><img src= "https://www.whbblog.cn/usr/uploads/2021/08/568955200.jpg" style="zoom:67%;" /><h2 id="ä¸‰ã€å‚è€ƒæ–‡ç« ">ä¸‰ã€å‚è€ƒæ–‡ç« </h2><p><strong>æ„Ÿè°¢ä»¥ä¸‹å„ä½å¤§ä½¬çš„å¸®åŠ©ï¼ï¼ï¼</strong></p><p><a href="https://www.yisu.com/news/id_274.html">äº‘æœåŠ¡å™¨å’Œè™šæ‹ŸåŒ–æœåŠ¡å™¨ï¼Œå“ªä¸ªé€‚åˆä½ </a></p><p><a href="https://www.redhat.com/zh/topics/cloud-computing/public-cloud-vs-private-cloud-and-hybrid-cloud">äº‘è®¡ç®—æœåŠ¡ç±»å‹æœ‰å“ªäº›</a></p><p><a href="https://www.linuxprobe.com/chapter-22.html">ç¬¬22ç«  ä½¿ç”¨openstackéƒ¨ç½²äº‘è®¡ç®—æœåŠ¡ç¯å¢ƒã€‚</a></p><p><a href="https://xie.infoq.cn/article/25df22c38dc0e925879ce4e9b">ä»æ ¹ä¸Šç†è§£ç”¨æˆ·æ€ä¸å†…æ ¸æ€</a></p><p><a href="https://blog.csdn.net/dongfei2033/article/details/82756634">å…¨/åŠè™šæ‹ŸåŒ–ã€ç¡¬ä»¶/è½¯ä»¶è¾…åŠ©çš„å…¨è™šæ‹ŸåŒ–ä¹‹é—´çš„åŒºåˆ«ä¸è”ç³»</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>APM æœ¬åœ°è®¤è¯å®ç°åˆ†ç»„</title>
      <link href="/posts/c809b70e55d6.html"/>
      <url>/posts/c809b70e55d6.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç”¨æˆ·ä½¿ç”¨APMæœ¬åœ°è®¤è¯ï¼Œæ ¹æ®æœ¬åœ°ç”¨æˆ·åˆ†ç»„ï¼Œåˆ†é…ä¸åŒçš„èµ„æºã€‚</strong></p><p><strong>æ¨¡æ‹Ÿç¯å¢ƒï¼šåœ¨APMæœ¬åœ°åˆ›å»ºä¸¤ä¸ªç”¨æˆ·user1å’Œuser2ï¼Œä½¿å…¶åˆ†åˆ«å¤„äºä¸¤ä¸ªä¸åŒçš„ç»„group1å’Œgroup2ä¸­ï¼Œuser1å¯ä»¥æ­£å¸¸è¿æ¥åˆ°å†…ç½‘ç¯å¢ƒï¼Œuser2æ‹’ç»è¯¥ç”¨æˆ·æ¥å…¥ã€‚</strong></p><hr><h3 id="1-åˆ›å»ºConnectivity-Profile">1. åˆ›å»ºConnectivity Profile</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Connectivity : Profiles ä¸­æ–°å»ºConnectivity Profileï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3161727230.png" alt="image-20210809143259985.png"></p><h3 id="2-é…ç½®-IPV4-Lease-Pools">2. é…ç½® IPV4 Lease Pools</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : IPV4 Lease Pools è·¯å¾„é…ç½® VPN å†…éƒ¨åˆ†é…çš„åœ°å€æ®µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2267857578.png" alt="image-20210813104029822.png"></p><h3 id="3-é…ç½®-Network-Access-Policy">3. é…ç½® Network Access Policy</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : Network Access Lists ä¸­åˆ›å»º Network Access Policy ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2276222976.png" alt="image-20210813104211843.png"></p><blockquote><p>åˆ›å»ºå®Œæˆåè¿›å…¥åˆ›å»ºå¥½çš„ Network Access Policy  network_access ä¸­ï¼Œåœ¨Network Settings ä¸­é€‰æ‹© IPV4 Lease Pool ä¸ºç¬¬ä¸€æ­¥åˆ›å»ºå¥½çš„ vpn_ipã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1115590682.png" alt="image-20210813104419721.png"></p><blockquote><p>åœ¨ DNS/Hosts ä¸­é…ç½® IPV4 Primary Name Server ä¸º DNS æœåŠ¡å™¨åœ°å€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1000757873.png" alt="image-20210813104557391.png"></p><h3 id="4-é…ç½®-Webtop">4. é…ç½® Webtop</h3><blockquote><p>åœ¨ Access â€ºâ€º Webtops : Webtop Lists ä¸­æ–°å»º webtop ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4081370400.png" alt="image-20210813104741634.png"></p><h3 id="5-åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹">5. åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹</h3><blockquote><p>åœ¨ Accessâ€ºâ€º Authentication : Local User DB : Instances ä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/856362759.png" alt="image-20210811141457525.png"></p><h3 id="6-é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯">6. é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯</h3><blockquote><p>åœ¨ Access â€ºâ€º Authentication : Local User DB : Users ä¸­åˆ›å»ºæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯ã€‚æ­¤å¤„åˆ›å»ºä¸¤ä¸ªç”¨æˆ·ï¼Œå¹¶åˆ†é…ä¸åŒçš„ç»„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2703525576.png" alt="image-20210816110508940.png"></p><h3 id="7-é…ç½®-VPN-Policy">7.é…ç½® VPN Policy</h3><h4 id="1-åˆ›å»º-VPN-Policy">(1) åˆ›å»º VPN Policy</h4><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ åˆ›å»º VPN Policy ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/207125637.png" alt="image-20210815012846354.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4074775353.png" alt="image-20210813110200338.png"></p><h4 id="2-ç¼–è¾‘-VPN-Policy">(2) ç¼–è¾‘ VPN Policy</h4><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ é€‰ä¸­ä¸Šä¸€æ­¥åˆ›å»ºçš„ VPN Policy è¿›å…¥ï¼Œ é€‰æ‹© Access Policy ï¼Œç‚¹å‡» Edit Access Policy for Profile â€œNetwork_Access_VPEâ€ å¼€å§‹ç¼–è¾‘ç­–ç•¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3431566503.png" alt="image-20210815013132344.png"></p><blockquote><p>è¿›å…¥åVPEå¦‚ä¸‹æ‰€ç¤ºï¼Œç‚¹å‡» + å¼€å§‹è¿›è¡Œé…ç½®ã€‚<br><img src="https://www.whbblog.cn/usr/uploads/2021/08/2792660617.png" alt="image-20210815013206952.png"></p></blockquote><h5 id="a-åˆ›å»ºLogon-Page">a. åˆ›å»ºLogon Page</h5><blockquote><p>åœ¨ Start æ­¥éª¤åé…ç½®ç™»å½•é¡µï¼Œé€‰æ‹© åœ¨æœ€ä¸Šé¢å¯¼èˆªæ é€‰æ‹© Logon ç‚¹å‡»ä¸‹é¢Logon Pageï¼Œå†ç‚¹å‡»Add Itemã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/277380224.png" alt="image-20210809113730975.png"></p><h5 id="b-é…ç½®-Logon-Page">b. é…ç½® Logon Page</h5><blockquote><p>é…ç½® Logon Page ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1626866127.png" alt="image-20210809114034571.png"></p><blockquote><p>é…ç½®å®ŒVPEå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/897316607.png" alt="image-20210815013604325.png"></p><h5 id="c-é…ç½®æœ¬åœ°è®¤è¯">c. é…ç½®æœ¬åœ°è®¤è¯</h5><blockquote><p>åœ¨ Authentication ä¸­é€‰æ‹© LocalDB Auth ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3665841798.png" alt="image-20210815013633862.png"></p><blockquote><p>LocalDB Instance é€‰æ‹©æˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„LOCAL_DBã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3028373335.png" alt="image-20210815013706349.png"></p><blockquote><p>é…ç½®å®ŒVPEå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4240563026.png" alt="image-20210815013827368.png"></p><h5 id="d-åˆ›å»ºLocal-Database">d. åˆ›å»ºLocal Database</h5><blockquote><p>åœ¨ General Purpose ä¸­é€‰æ‹© Local Database ç”¨ä½œç»„å‚æ•°ä¼ é€’ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1664801982.png" alt="image-20210816114930152.png"></p><blockquote><p>é…ç½®ç»„å‚æ•°ä¼ é€’</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4156709753.png" alt="image-20210816114901445.png"></p><h5 id="e-è·å–ç”¨æˆ·ç»„ä¿¡æ¯">e. è·å–ç”¨æˆ·ç»„ä¿¡æ¯</h5><blockquote><p>æ ¹æ®ç”¨æˆ·æ‰€å±ç»„ä¿¡æ¯ï¼Œåˆ†é…ä¸é€šç­–ç•¥ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2388103532.png" alt="image-20210816115642656.png"></p><blockquote><p>é…ç½®ç”¨æˆ·æ‰€å±ç»„åˆ†æ”¯</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3621025549.png" alt="image-20210816120021718.png"></p><blockquote><p>é…ç½®å®ŒVPEæ‹“æ‰‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3438324364.png" alt="image-20210816120043721.png"></p><h5 id="f-èµ„æºåˆ†é…">f. èµ„æºåˆ†é…</h5><blockquote><p>å¦‚æœé€šè¿‡äº†æœ¬åœ°è®¤è¯å’ŒADåŸŸåŒé‡è®¤è¯ï¼Œåˆ™ä¸ºå…¶ç™»é™†ç”¨æˆ·åˆ†é…èµ„æºï¼Œé€‰æ‹© Assignment ä¸‹é¢çš„ Advanced Resource Assign ç‚¹å‡»Add Itemã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4179650849.png" alt="image-20210815020727770.png"></p><blockquote><p>åˆ†é… Network_access å’Œ mywebtop èµ„æºã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3084190730.png" alt="image-20210815020808808.png"></p><h5 id="g-å®ŒæˆVPEé…ç½®">g. å®ŒæˆVPEé…ç½®</h5><blockquote><p>é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply Access Ploicyåº”ç”¨ç­–ç•¥ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3061049287.png" alt="image-20210816120240875.png"></p><h3 id="8-åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚">8. åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2113432454.png" alt="image-20210806144008058.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/2482478702.png" alt="image-20210806144038146.png"></p><h3 id="9-åˆ›å»º443ç«¯å£vsï¼Œå…³è”-APM-profileã€‚">9. åˆ›å»º443ç«¯å£vsï¼Œå…³è” APM profileã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2187860806.png" alt="image-20210813111647936.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1761161131.png" alt="image-20210813111718711.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1080858717.png" alt="image-20210816120353475.png"></p><h3 id="10-æµ‹è¯•">10.æµ‹è¯•</h3><h4 id="1-ä½¿ç”¨user1è¿›è¡Œç™»é™†æµ‹è¯•">(1) ä½¿ç”¨user1è¿›è¡Œç™»é™†æµ‹è¯•</h4><blockquote><p>è®¿é—® <a href="http://192.168.10.92">http://192.168.10.92</a> è¿›è¡Œç™»é™†æµ‹è¯•ã€‚è¾“å…¥user1ç”¨æˆ·åå’Œå¯†ç ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3522833443.png" alt="image-20210816120629937.png"></p><blockquote><p>ç™»é™†åå…è®¸æ‰“å¼€F5æ’ä»¶ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2149476027.png" alt="image-20210815195059057.png"></p><blockquote><p>ç”±äºè¯ä¹¦æ˜¯è‡ªç­¾å‘çš„ï¼Œæ‰€ä»¥ä¼šå¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œåœ¨è¿™é‡Œç‚¹å‡»æ˜¯ï¼Œå¦‚æœä¸æƒ³å¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œå¯ä»¥å»ç›¸å…³æœºæ„ç”³è¯·SSLè¯ä¹¦ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1633547416.png" alt="image-20210815195124720.png"></p><blockquote><p>ç”±äºè¯ä¹¦æ˜¯è‡ªç­¾å‘çš„ï¼Œæ‰€ä»¥ä¼šå¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œåœ¨è¿™é‡Œç‚¹å‡»æ˜¯ï¼Œå¦‚æœä¸æƒ³å¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œå¯ä»¥å»ç›¸å…³æœºæ„ç”³è¯·SSLè¯ä¹¦ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/781628723.png" alt="image-20210815195153951.png"></p><blockquote><p>å¦‚ä¸‹æ‰€ç¤ºï¼šæˆ‘ä»¬å°±è¿æ¥åˆ°äº†å†…ç½‘ç¯å¢ƒä¸­ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3828426408.png" alt="image-20210815195217468.png"></p><p>####ï¼ˆ2ï¼‰ä½¿ç”¨user2ç™»é™†è¿›è¡Œæµ‹è¯•</p><blockquote><p>è®¿é—® <a href="http://192.168.10.92">http://192.168.10.92</a> è¿›è¡Œç™»é™†æµ‹è¯•ã€‚è¾“å…¥user2ç”¨æˆ·åå’Œå¯†ç ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/820436798.png" alt="image-20210816124811641.png"></p><blockquote><p>æ ¹æ®ä¸‹å›¾æµ‹è¯•ç»“æœï¼Œæ‹’ç»è¯¥ç”¨æˆ·ç™»é™†ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4025958171.png" alt="image-20210816124837698.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> APM </tag>
            
            <tag> BIGIP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>APM åŒå› ç´ éªŒè¯å®æˆ˜</title>
      <link href="/posts/32e7b0786afe.html"/>
      <url>/posts/32e7b0786afe.html</url>
      
        <content type="html"><![CDATA[<p><strong>åŒå› ç´ è®¤è¯ï¼šåˆè¢«ç§°ä¸ºä¸¤æ­¥è®¤è¯æˆ–è€…åŒå› å­è®¤è¯ï¼ˆ2FAï¼‰ï¼Œæ˜¯ä¸€ç§å®‰å…¨éªŒè¯è¿‡ç¨‹ã€‚å°±æ˜¯ä½¿ç”¨2ç§è®¤è¯æ–¹å¼ç»„åˆåˆ°ä¸€èµ·æ‰èƒ½å‘æŒ¥ä½œç”¨çš„èº«ä»½è®¤è¯ç³»ç»Ÿã€‚</strong></p><p><strong>èƒŒæ™¯ï¼šç”¨æˆ·ä½¿ç”¨APMæœ¬åœ°è®¤è¯å’ŒADåŸŸç”¨æˆ·è®¤è¯ç»“åˆåœ¨ä¸€èµ·éªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚</strong></p><hr><h3 id="1-åˆ›å»ºConnectivity-Profile">1. åˆ›å»ºConnectivity Profile</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Connectivity : Profiles ä¸­æ–°å»ºConnectivity Profileï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3161727230.png" alt="image-20210809143259985.png"></p><h3 id="2-é…ç½®-IPV4-Lease-Pools">2. é…ç½® IPV4 Lease Pools</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : IPV4 Lease Pools è·¯å¾„é…ç½® VPN å†…éƒ¨åˆ†é…çš„åœ°å€æ®µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2267857578.png" alt="image-20210813104029822.png"></p><h3 id="3-é…ç½®-Network-Access-Policy">3. é…ç½® Network Access Policy</h3><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : Network Access Lists ä¸­åˆ›å»º Network Access Policy ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2276222976.png" alt="image-20210813104211843.png"></p><blockquote><p>åˆ›å»ºå®Œæˆåè¿›å…¥åˆ›å»ºå¥½çš„ Network Access Policy  network_access ä¸­ï¼Œåœ¨Network Settings ä¸­é€‰æ‹© IPV4 Lease Pool ä¸ºç¬¬ä¸€æ­¥åˆ›å»ºå¥½çš„ vpn_ipã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1115590682.png" alt="image-20210813104419721.png"></p><blockquote><p>åœ¨ DNS/Hosts ä¸­é…ç½® IPV4 Primary Name Server ä¸º DNS æœåŠ¡å™¨åœ°å€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1000757873.png" alt="image-20210813104557391.png"></p><h3 id="4-é…ç½®-Webtop">4. é…ç½® Webtop</h3><blockquote><p>åœ¨ Access â€ºâ€º Webtops : Webtop Lists ä¸­æ–°å»º webtop ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4081370400.png" alt="image-20210813104741634.png"></p><h3 id="5-åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹">5. åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹</h3><blockquote><p>åœ¨ Access â€ºâ€º Authentication : Local User DB : Instances ä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/856362759.png" alt="image-20210811141457525.png"></p><h3 id="6-é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯">6. é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯</h3><blockquote><p>åœ¨ Access â€ºâ€º Authentication : Local User DB : Users ä¸­åˆ›å»ºæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3882420392.png" alt="image-20210814120251169.png"></p><h3 id="7-åœ¨-AD-åŸŸä¸Šé…ç½®-AD-åŸŸè®¤è¯ç”¨æˆ·">7. åœ¨ AD åŸŸä¸Šé…ç½® AD åŸŸè®¤è¯ç”¨æˆ·</h3><blockquote><p>åœ¨ AD åŸŸä¸Šé…ç½®ç”¨æˆ·ï¼Œå¹¶å¡«å†™å¯†ç ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/152119703.png" alt="image-20210814121711034.png"></p><h3 id="8-é…ç½®-ADåŸŸæœåŠ¡å™¨">8. é…ç½® ADåŸŸæœåŠ¡å™¨</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1498997334.png" alt="image-20210815012155545.png"></p><h3 id="9-é…ç½®-VPN-Policy">9. é…ç½® VPN Policy</h3><h4 id="1-åˆ›å»º-VPN-Policy">(1) åˆ›å»º VPN Policy</h4><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ åˆ›å»º VPN Policy ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/69793120.png" alt="image-20210815012846354.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4074775353.png" alt="image-20210813110200338.png"></p><h4 id="2-ç¼–è¾‘-VPN-Policy">(2) ç¼–è¾‘ VPN Policy</h4><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ é€‰ä¸­ä¸Šä¸€æ­¥åˆ›å»ºçš„ VPN Policy è¿›å…¥ï¼Œ é€‰æ‹© Access Policy ï¼Œç‚¹å‡» Edit Access Policy for Profile â€œNetwork_Access_VPEâ€ å¼€å§‹ç¼–è¾‘ç­–ç•¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3893604945.png" alt="image-20210815013132344.png"></p><blockquote><p>è¿›å…¥åVPEå¦‚ä¸‹æ‰€ç¤ºï¼Œç‚¹å‡» + å¼€å§‹è¿›è¡Œé…ç½®ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/699457309.png" alt="image-20210815013206952.png"></p><h5 id="a-åˆ›å»ºLogon-Page">a. åˆ›å»ºLogon Page</h5><blockquote><p>åœ¨ Start æ­¥éª¤åé…ç½®ç™»å½•é¡µï¼Œé€‰æ‹© åœ¨æœ€ä¸Šé¢å¯¼èˆªæ é€‰æ‹© Logon ç‚¹å‡»ä¸‹é¢Logon Pageï¼Œå†ç‚¹å‡»Add Itemã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3379342607.png" alt="image-20210811143458880.png"></p><h5 id="b-é…ç½®-Logon-Page">b. é…ç½® Logon Page</h5><blockquote><p>é…ç½® Logon Page ï¼Œé…ç½®LocalDBè®¤è¯å¯†ç å’ŒADè®¤è¯å¯†ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3972011666.png" alt="image-20210815013418774.png"></p><blockquote><p>é…ç½®å®ŒVPEå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4144377095.png" alt="image-20210815013604325.png"></p><h5 id="c-é…ç½®æœ¬åœ°è®¤è¯">c. é…ç½®æœ¬åœ°è®¤è¯</h5><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3665841798.png" alt="image-20210815013633862.png"></p><blockquote><p>LocalDB Instance é€‰æ‹©æˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„LOCAL_DBã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3028373335.png" alt="image-20210815013706349.png"></p><blockquote><p>é…ç½®å®ŒVPEå¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4086238931.png" alt="image-20210815013827368.png"></p><h5 id="d-é…ç½®ä¼ é€’å˜é‡">d. é…ç½®ä¼ é€’å˜é‡</h5><blockquote><p>æŠŠADåŸŸç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ä¼ é€’ç»™ADè¿›è¡ŒéªŒè¯ã€‚åœ¨Assignmentä¸‹é€‰æ‹©Variable Assignï¼Œç‚¹å‡»Add Itemã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3771218148.png" alt="image-20210815013921263.png"></p><blockquote><p>é…ç½®ä¼ é€’ç”¨æˆ·å</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/618980156.png" alt="image-20210815020133892.png"></p><blockquote><p>åŒç†ï¼Œé…ç½®ä¼ é€’å¯†ç ï¼Œæ³¨æ„ä¼ é€’çš„å¯†ç æ˜¯ADåŸŸç”¨æˆ·çš„å¯†ç ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬Logonç•Œé¢ä¸­é…ç½®çš„passwardã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/244547148.png" alt="image-20210815020331953.png"></p><h5 id="e-é…ç½®ADåŸŸè®¤è¯">e. é…ç½®ADåŸŸè®¤è¯</h5><blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤º: é€‰æ‹© Authentication ä¸‹é¢çš„ AD Auth ç‚¹å‡» Add Itemã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2318705151.png" alt="image-20210815020617690.png"></p><blockquote><p>åœ¨Serveré€‰æ‹©æˆ‘ä»¬ä¹‹å‰é…ç½®çš„AD_AUTHã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/243071600.png" alt="image-20210815020651410.png"></p><h5 id="f-èµ„æºåˆ†é…">f. èµ„æºåˆ†é…</h5><blockquote><p>å¦‚æœé€šè¿‡äº†æœ¬åœ°è®¤è¯å’ŒADåŸŸåŒé‡è®¤è¯ï¼Œåˆ™ä¸ºå…¶ç™»é™†ç”¨æˆ·åˆ†é…èµ„æºï¼Œé€‰æ‹© Assignment ä¸‹é¢çš„ Advanced Resource Assign ç‚¹å‡»Add Itemã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4179650849.png" alt="image-20210815020727770.png"></p><blockquote><p>åˆ†é… Network_access å’Œ mywebtop èµ„æºã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3084190730.png" alt="image-20210815020808808.png"></p><h5 id="g-å®ŒæˆVPEé…ç½®">g. å®ŒæˆVPEé…ç½®</h5><blockquote><p>é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply Access Ploicyåº”ç”¨ç­–ç•¥ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2888400332.png" alt="image-20210815020853554.png"></p><h3 id="10-åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚">10. åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2113432454.png" alt="image-20210806144008058.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2482478702.png" alt="image-20210806144038146.png"></p><h3 id="11-åˆ›å»º443ç«¯å£vsï¼Œå…³è”-APM-profileã€‚">11. åˆ›å»º443ç«¯å£vsï¼Œå…³è” APM profileã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2187860806.png" alt="image-20210813111647936.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1761161131.png" alt="image-20210813111718711.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3379131444.png" alt="image-20210815200643391.png"></p><h3 id="12-æµ‹è¯•">12. æµ‹è¯•</h3><blockquote><p>è®¿é—® <a href="http://192.168.10.92">http://192.168.10.92</a> è¿›è¡Œç™»é™†æµ‹è¯•ã€‚è¾“å…¥ç”¨æˆ·åï¼Œæœ¬åœ°è®¤è¯å¯†ç å’ŒADåŸŸè®¤è¯å¯†ç ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4238930193.png" alt="image-20210815194847777.png"></p><blockquote><p>ç™»é™†åå…è®¸æ‰“å¼€F5æ’ä»¶ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2149476027.png" alt="image-20210815195059057.png"></p><blockquote><p>ç”±äºè¯ä¹¦æ˜¯è‡ªç­¾å‘çš„ï¼Œæ‰€ä»¥ä¼šå¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œåœ¨è¿™é‡Œç‚¹å‡»æ˜¯ï¼Œå¦‚æœä¸æƒ³å¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œå¯ä»¥å»ç›¸å…³æœºæ„ç”³è¯·SSLè¯ä¹¦ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1633547416.png" alt="image-20210815195124720.png"></p><blockquote><p>ç”±äºè¯ä¹¦æ˜¯è‡ªç­¾å‘çš„ï¼Œæ‰€ä»¥ä¼šå¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œåœ¨è¿™é‡Œç‚¹å‡»æ˜¯ï¼Œå¦‚æœä¸æƒ³å¼¹å‡ºå®‰å…¨è­¦æŠ¥ï¼Œå¯ä»¥å»ç›¸å…³æœºæ„ç”³è¯·SSLè¯ä¹¦ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/781628723.png" alt="image-20210815195153951.png"></p><blockquote><p>å¦‚ä¸‹æ‰€ç¤ºï¼šæˆ‘ä»¬å°±è¿æ¥åˆ°äº†å†…ç½‘ç¯å¢ƒä¸­ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3828426408.png" alt="image-20210815195217468.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> APM </tag>
            
            <tag> BIGIP </tag>
            
            <tag> åŒå› ç´ è®¤è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 APM Network Access é…ç½®</title>
      <link href="/posts/fbf432725089.html"/>
      <url>/posts/fbf432725089.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šBIG-IPè®¿é—®ç­–ç•¥ç®¡ç†å™¨ Network Access åŠŸèƒ½ä½¿ç”¨æ ‡å‡† Web æµè§ˆå™¨æˆ– BIG-IP è¾¹ç¼˜å®¢æˆ·ç«¯æä¾›å¯¹ä¼ä¸šåº”ç”¨ç¨‹åºå’Œæ•°æ®çš„å®‰å…¨è®¿é—®ã€‚ä½¿ç”¨ Network Access ï¼Œå‘˜å·¥ã€åˆä½œä¼™ä¼´å’Œå®¢æˆ·éƒ½å¯ä»¥ä»ä»»ä½•åœ°ç‚¹å®‰å…¨åœ°è®¿é—®å…¬å¸èµ„æºã€‚</strong></p><hr><p><strong>å‰ææ¡ä»¶ï¼šBIGIPä¸Šæä¾›äº†LTMå’ŒAPMæ¨¡å—</strong></p><p><strong>é…ç½®æ­¥éª¤æ€»ç»“ï¼š</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) Connectivity Profiles</span><br><span class="line"><span class="number">2</span>) IPV4 Lease Pools</span><br><span class="line"><span class="number">3</span>) Network <span class="keyword">Access</span> </span><br><span class="line"><span class="number">4</span>) Webtop</span><br><span class="line"><span class="number">5</span>) <span class="keyword">Local</span> <span class="keyword">User</span> DB Instances</span><br><span class="line"><span class="number">6</span>) <span class="keyword">Local</span> <span class="keyword">User</span> DB Users</span><br><span class="line"><span class="number">7</span>) <span class="keyword">Access</span> Profiles (Per-<span class="keyword">Session</span> Policies)</span><br><span class="line"><span class="number">8</span>) <span class="number">80</span> port Virtual <span class="keyword">Server</span></span><br><span class="line"><span class="number">9</span>) <span class="number">443</span> port Virtual <span class="keyword">Server</span></span><br><span class="line"><span class="number">10</span>) test</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºConnectivity Profile</li></ol><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Connectivity : Profiles ä¸­æ–°å»ºConnectivity Profileï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1627580866.png" alt="image-20210809143259985.png"></p><ol start="2"><li>é…ç½® IPV4 Lease Pools</li></ol><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : IPV4 Lease Pools è·¯å¾„é…ç½® VPN å†…éƒ¨åˆ†é…çš„åœ°å€æ®µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3812972313.png" alt="image-20210813104029822.png"></p><ol start="3"><li>é…ç½® Network Access Policy</li></ol><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Network Access (VPN) : Network Access Lists ä¸­åˆ›å»º Network Access Policy ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3527285150.png" alt="image-20210813104211843.png"></p><p>åˆ›å»ºå®Œæˆåè¿›å…¥åˆ›å»ºå¥½çš„ Network Access Policy  network_access ä¸­ï¼Œåœ¨Network Settings ä¸­é€‰æ‹© IPV4 Lease Pool ä¸ºç¬¬ä¸€æ­¥åˆ›å»ºå¥½çš„ vpn_ipã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2549624818.png" alt="image-20210813104419721.png"></p><p>åœ¨ DNS/Hosts ä¸­é…ç½® IPV4 Primary Name Server ä¸º DNS æœåŠ¡å™¨åœ°å€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3599206356.png" alt="image-20210813104557391.png"></p><p>4.é…ç½® Webtop</p><p>â€‹åœ¨ Access â€ºâ€º Webtops : Webtop Lists ä¸­æ–°å»º webtop ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1774679573.png" alt="image-20210813104741634.png"></p><p>5.åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹</p><p>â€‹åœ¨ Accessâ€ºâ€º Authentication : Local User DB : Instances ä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3833177021.png" alt="image-20210811141457525.png"></p><p>6.é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯</p><p>â€‹åœ¨ Access â€ºâ€º Authentication : Local User DB : Users ä¸­åˆ›å»ºæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/925532145.png" alt="image-20210811141558038.png"></p><p>7.é…ç½® VPN Policy</p><p>(1) åˆ›å»º VPN Policy</p><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ åˆ›å»º VPN Policy ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1807942344.png" alt="image-20210813110106603.png"><img src="https://www.whbblog.cn/usr/uploads/2021/08/3131403165.png" alt="image-20210813110200338.png"></p><p>(2) ç¼–è¾‘ VPN Policy</p><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­ é€‰ä¸­ä¸Šä¸€æ­¥åˆ›å»ºçš„ VPN Policy è¿›å…¥ï¼Œ é€‰æ‹© Access Policy ï¼Œç‚¹å‡» Edit Access Policy for Profile â€œNetwork_Access_VPEâ€ å¼€å§‹ç¼–è¾‘ç­–ç•¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3858973965.png" alt="image-20210813110558158.png"></p><p>è¿›å…¥åVPEå¦‚ä¸‹æ‰€ç¤ºï¼Œç‚¹å‡» + å¼€å§‹è¿›è¡Œé…ç½®ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2314568345.png" alt="image-20210813110649139.png"></p><p>a. åˆ›å»ºLogon Page</p><p>åœ¨ Start æ­¥éª¤åé…ç½®ç™»å½•é¡µï¼Œé€‰æ‹© åœ¨æœ€ä¸Šé¢å¯¼èˆªæ é€‰æ‹© Logon ç‚¹å‡»ä¸‹é¢Logon Pageï¼Œå†ç‚¹å‡»Add Itemã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3447041573.png" alt="image-20210811143458880.png"></p><p>b. é…ç½® Logon Page</p><p>ä¿æŒé»˜è®¤å³å¯ï¼Œç‚¹å‡»saveã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2000043908.png" alt="image-20210811143628209.png"></p><p>é…ç½®å®Œæˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1785399500.png" alt="image-20210813110808582.png"></p><p>c. é…ç½®æœ¬åœ°è®¤è¯(LocalDB Auth)</p><p>â€‹åœ¨ Authentication ä¸­é€‰æ‹© LocalDB Auth ï¼Œç‚¹å‡» Add Item è¿›è¡Œæ·»åŠ é¡¹ç›®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2612059358.png" alt="image-20210811143729957.png"></p><p>â€‹é€‰æ‹©LocalDB Instanceä¸ºæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„Local_DB Instanceã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3098892458.png" alt="image-20210811144035611.png"></p><p>é…ç½®å®Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/527926198.png" alt="image-20210813110958246.png"></p><p>d.èµ„æºåˆ†é…</p><p>â€‹é€‰æ‹© Assignment ä¸‹é¢çš„ Advanced Resource Assign ï¼Œç‚¹å‡» Add Itemã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2727361560.png" alt="image-20210811150027371.png"></p><p>â€‹åˆ†é…æˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„ Network Access èµ„æºå’Œ Webtop èµ„æºã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2977716822.png" alt="image-20210813111204862.png"></p><p>e.å®ŒæˆVPEé…ç½®</p><p>â€‹é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply Access Ploicyåº”ç”¨ç­–ç•¥ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4074059281.png" alt="image-20210813111428117.png"></p><p>8.åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/827255446.png" alt="image-20210806144008058.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/2262013860.png" alt="image-20210806144038146.png"></p><p>9.åˆ›å»º443ç«¯å£vsï¼Œå…³è” APM profileã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1509376604.png" alt="image-20210813111647936.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/1301824365.png" alt="image-20210813111718711.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/3869473888.png" alt="image-20210813111747761.png"></p><p>10.æµ‹è¯•</p><p>â€‹è®¿é—®http://192.168.10.92è¿›è¡Œç™»é™†æµ‹è¯•ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1653544235.png" alt="image-20210813112720079.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4113135367.png" alt="image-20210813112414733.png"></p><p>æŸ¥çœ‹IPåœ°å€åˆ†é…</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1874417509.png" alt="image-20210813112643787.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> APM </tag>
            
            <tag> BIGIP </tag>
            
            <tag> Network_Access </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 Portal Accessæ¨¡å¼VPNé…ç½®</title>
      <link href="/posts/d1f558520a01.html"/>
      <url>/posts/d1f558520a01.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šæ ¹æ®ç”¨æˆ·èº«ä»½ä¿¡æ¯åšæœ¬åœ°è®¤è¯ï¼Œç”¨æˆ·å¯è®¿é—®ç‰¹å®šçš„Portalé¡µé¢ã€‚</strong></p><hr><p><strong>Portal Access å’Œ Network AccessåŒºåˆ«</strong></p><p>â€‹Portal Accesså…è®¸æœ€ç»ˆç”¨æˆ·ä½¿ç”¨ç½‘ç»œå¤–éƒ¨çš„ Web æµè§ˆå™¨è®¿é—®å†…éƒ¨ Web åº”ç”¨ç¨‹åºã€‚é€šè¿‡Portal Accessï¼ŒBIG-IP APM å¯ä¸åç«¯æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œå¹¶é‡å†™åº”ç”¨ç¨‹åºç½‘é¡µä¸­çš„é“¾æ¥ï¼Œä»¥ä¾¿å°†å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¿›ä¸€æ­¥è¯·æ±‚ç›´æ¥å¼•å¯¼å›è®¿é—®ç­–ç•¥ç®¡ç†å™¨æœåŠ¡å™¨ã€‚é€šè¿‡é—¨æˆ·è®¿é—®ï¼Œå®¢æˆ·ç«¯è®¡ç®—æœºé™¤äº† Web æµè§ˆå™¨ä¹‹å¤–ï¼Œæ— éœ€ä»»ä½•ä¸“é—¨çš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚</p><p>â€‹Portal Access ä¸åŒäº Network Access ï¼ŒNetwork Access æä¾›ä»å®¢æˆ·ç«¯åˆ°å†…éƒ¨ç½‘ç»œçš„ç›´æ¥è®¿é—®ã€‚Network Access ä¸ä¼šæ“çºµæˆ–åˆ†æå®¢æˆ·ç«¯å’Œå†…éƒ¨ç½‘ç»œä¹‹é—´ä¼ é€’çš„å†…å®¹ã€‚Portal Access é…ç½®æ—¢å¯å¯¹ç”¨æˆ·å¯ä»¥é€šè¿‡ APM è®¿é—®çš„åº”ç”¨ç¨‹åºè¿›è¡Œç²¾ç»†æ§åˆ¶ï¼Œåˆå¯å¯¹åº”ç”¨ç¨‹åºæ•°æ®è¿›è¡Œå†…å®¹æ£€æŸ¥ã€‚é—¨æˆ·è®¿é—®çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®‰å…¨æ€§ã€‚å³ä½¿å·¥ä½œç«™å¯èƒ½ä¸ç¬¦åˆå®Œå…¨ç½‘ç»œè®¿é—®çš„å®‰å…¨è¦æ±‚ï¼Œæ­¤ç±»å·¥ä½œç«™ä¹Ÿå¯ä»¥é€šè¿‡è®¿é—®ç­–ç•¥ä¼ é€’ç»™æŸäº›æ‰€éœ€çš„ Web åº”ç”¨ç¨‹åºï¼Œè€Œä¸å…è®¸å®Œå…¨ Network Accessã€‚åœ¨ Portal Access ç­–ç•¥ä¸­ï¼Œå®¢æˆ·ç«¯è®¡ç®—æœºæœ¬èº«ä»ä¸ä¸ç«¯ç‚¹åº”ç”¨ç¨‹åºç›´æ¥é€šä¿¡ã€‚è¿™æ„å‘³ç€æ‰€æœ‰é€šä¿¡éƒ½å—åˆ°éå¸¸é«˜çº§åˆ«çš„æ£€æŸ¥ï¼Œå¹¶ä¸”æºè‡ªå®¢æˆ·ç«¯è®¡ç®—æœºçš„ä»»ä½•æ”»å‡»éƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºæ”»å‡»æ— æ³•é€šè¿‡é—¨æˆ·è®¿é—®å¼•æ“é‡å†™çš„é“¾æ¥å¯¼èˆªã€‚</p><p><strong>å‰ææ¡ä»¶ï¼šBIG-IPä¸Šå…·æœ‰APMæ¨¡å—å’ŒLTMæ¨¡å—.</strong></p><p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p><h2 id="1-åˆ›å»ºConnectivity-Profile">1. åˆ›å»ºConnectivity Profile</h2><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Connectivity : Profiles ä¸­æ–°å»ºConnectivity Profileï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3579535766.png" alt="image-20210809143259985.png"></p><h2 id="2-åˆ›å»ºPortal-Access-Rewrite-Profile">2. åˆ›å»ºPortal Access Rewrite Profile</h2><blockquote><p>åœ¨ Access â€ºâ€º Connectivity / VPN : Portal Access : Rewrite ä¸­æ–°å»ºRewrite Profile ç”¨ä½œé‡å†™URIï¼Œèµ·åˆ°ä¿æŠ¤uriçš„ä½œç”¨ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2855378838.png" alt="image-20210809143607974.png"></p><h2 id="3-åˆ›å»º-Portal-Access">3. åˆ›å»º Portal Access</h2><blockquote><p>é…ç½®åªå…è®¸è®¿é—®ç‰¹å®šç«™ç‚¹ <a href="http://192.168.10.223">http://192.168.10.223</a> ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4020345075.png" alt="image-20210811140914501.png"></p><h2 id="4-åˆ›å»ºwebtop">4.åˆ›å»ºwebtop</h2><blockquote><p>é…ç½®ç™»é™†åæ˜¾ç¤ºwebä¿¡æ¯ï¼Œæ­¤å¤„é…ç½®ä¸ºPortal Access ç±»å‹ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2824150272.png" alt="image-20210811141051942.png"></p><h2 id="5-åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹">5.åˆ›å»ºæœ¬åœ°è®¤è¯å®ä¾‹</h2><blockquote><p>åœ¨ Accessâ€ºâ€º Authentication : Local User DB : Instances ä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3576134207.png" alt="image-20210811141457525.png"></p><h2 id="6-é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯">6. é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯</h2><blockquote><p>åœ¨ Access â€ºâ€º Authentication : Local User DB : Users ä¸­åˆ›å»ºæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2451373635.png" alt="image-20210811141558038.png"></p><h2 id="7-åˆ›å»ºVPE">7. åˆ›å»ºVPE</h2><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­åˆ›å»ºAPMç­–ç•¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1933916331.png" alt="image-20210811142024142.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2038914222.png" alt="image-20210811142053553.png"></p><h2 id="8-é…ç½®VPE">8. é…ç½®VPE</h2><blockquote><p>ç­–ç•¥åˆ›å»ºå¥½åç‚¹å‡» Edit è¿›è¡ŒVPEé…ç½®ï¼Œåˆå§‹ç­–ç•¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1311043392.png" alt="image-20210811142426399.png"></p><h3 id="a-é…ç½®Logon-Pageï¼Œä¿æŒé»˜è®¤å³å¯ã€‚">a.é…ç½®Logon Pageï¼Œä¿æŒé»˜è®¤å³å¯ã€‚</h3><blockquote><p>ç‚¹å‡» + æ–°å»º logon Pageï¼Œåœ¨ Logon ä¸­é€‰æ‹© Logon Page ï¼Œç‚¹å‡» Add Item æ·»åŠ é¡¹ç›®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3435484951.png" alt="image-20210811143458880.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1835280789.png" alt="image-20210811143628209.png"></p><h3 id="b-é…ç½®æœ¬åœ°è®¤è¯-LocalDB-Auth">b.é…ç½®æœ¬åœ°è®¤è¯(LocalDB Auth)</h3><blockquote><p>åœ¨ Authentication ä¸­é€‰æ‹© LocalDB Auth ï¼Œç‚¹å‡» Add Item è¿›è¡Œæ·»åŠ é¡¹ç›®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2293309138.png" alt="image-20210811143729957.png"></p><blockquote><p>é€‰æ‹©LocalDB Instanceä¸ºæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„Local_DB Instanceã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3242219617.png" alt="image-20210811144035611.png"></p><h3 id="c-èµ„æºåˆ†é…">c.èµ„æºåˆ†é…</h3><blockquote><p>é€‰æ‹© Assignment ä¸‹é¢çš„ Advanced Resource Assign ï¼Œç‚¹å‡» Add Itemã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1548537996.png" alt="image-20210811150027371.png"></p><blockquote><p>åˆ†é…æˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„ Portal Access èµ„æºå’Œ Webtop èµ„æºã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3698400557.png" alt="image-20210811152806210.png"></p><h3 id="d-é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply-Access-Ploicyåº”ç”¨ç­–ç•¥ã€‚">d.é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply Access Ploicyåº”ç”¨ç­–ç•¥ã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2705849328.png" alt="image-20210811150301735.png"></p><h2 id="9-åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚">9. åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/456760254.png" alt="image-20210806144008058.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/1754364592.png" alt="image-20210806144038146.png"></p><h2 id="10-åˆ›å»º443ç«¯å£vsï¼Œå…³è”-APM-profileã€‚">10. åˆ›å»º443ç«¯å£vsï¼Œå…³è” APM profileã€‚</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3683779572.png" alt="image-20210811172611658.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/1837390912.png" alt="image-20210811172637895.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/2749497325.png" alt="image-20210811172830487.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/08/1549975465.png" alt="image-20210811172915765.png"></p><h2 id="11-æµ‹è¯•">11. æµ‹è¯•</h2><blockquote><p>è®¿é—® <a href="http://192.168.10.92">http://192.168.10.92</a> è¿›è¡Œç™»é™†æµ‹è¯•ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4186771389.png" alt="image-20210811155119962.png"></p><blockquote><p>è¿›å…¥åuriè¢«é‡å†™ï¼Œåªèƒ½è®¿é—®ç‰¹å®šç«™ç‚¹åˆ™æµ‹è¯•æˆåŠŸã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2996881377.png" alt="image-20210811155041435.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> APM </tag>
            
            <tag> BIGIP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>APM+LTMå®ç°å¯¹è®¿é—®vsçš„ç”¨æˆ·è¿›è¡Œè®¤è¯</title>
      <link href="/posts/7876fd4c89c0.html"/>
      <url>/posts/7876fd4c89c0.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šå½“ç”¨æˆ·è®¿é—®è™šæ‹ŸæœåŠ¡æ—¶å¯¹ç”¨æˆ·èº«ä»½åšæœ¬åœ°èº«ä»½è®¤è¯ï¼Œè®¤è¯é€šè¿‡åæ‰å¯è®¿é—®åç«¯æœåŠ¡èµ„æºã€‚</strong></p><hr><p><strong>å‰ææ¡ä»¶ï¼šBIG-IPä¸Šå…·æœ‰APMæ¨¡å—å’ŒLTMæ¨¡å—</strong></p><p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><h3 id="1-é…ç½®APM-æœ¬åœ°è®¤è¯æ•°æ®åº“å®ä¾‹">1. é…ç½®APM æœ¬åœ°è®¤è¯æ•°æ®åº“å®ä¾‹</h3><blockquote><p>åœ¨ Accessâ€ºâ€º Authentication : Local User DB : Instances ä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2774026141.png" alt="image-20210809103628181.png"></p><h3 id="2-é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯">2. é…ç½®APMæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯</h3><blockquote><p>åœ¨ Access â€ºâ€º Authentication : Local User DB : Users ä¸­åˆ›å»ºæœ¬åœ°è®¤è¯ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1314334800.png" alt="image-20210809103829501.png"></p><h3 id="3-åˆ›å»ºPolicy">3. åˆ›å»ºPolicy</h3><blockquote><p>åœ¨ Access â€ºâ€º Profiles / Policies : Access Profiles (Per-Session Policies) ä¸­åˆ›å»ºAPMç­–ç•¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2268025051.png" alt="image-20210809105509572.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/324744176.png" alt="image-20210809105531685.png"></p><h3 id="4-é…ç½®VPE">4. é…ç½®VPE</h3><blockquote><p>ç­–ç•¥åˆ›å»ºå¥½åç‚¹å‡» Edit è¿›è¡ŒVPEé…ç½®ã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/434621724.png" alt="image-20210809105650736.png"></p><h3 id="5-é…ç½®Logon-Pageï¼Œä¿æŒé»˜è®¤å³å¯ã€‚">5. é…ç½®Logon Pageï¼Œä¿æŒé»˜è®¤å³å¯ã€‚</h3><blockquote><p>åœ¨ Logon ä¸­é€‰æ‹© Logon Page ï¼Œç‚¹å‡» Add Item æ·»åŠ é¡¹ç›®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1714553402.png" alt="image-20210809113730975.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1354278439.png" alt="image-20210809114034571.png"></p><h3 id="6-é…ç½®æœ¬åœ°è®¤è¯-LocalDB-Auth">6. é…ç½®æœ¬åœ°è®¤è¯(LocalDB Auth)</h3><blockquote><p>åœ¨ Authentication ä¸­é€‰æ‹© LocalDB Auth ï¼Œç‚¹å‡» Add Item è¿›è¡Œæ·»åŠ é¡¹ç›®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3389783260.png" alt="image-20210809114251380.png"></p><blockquote><p>é€‰æ‹©LocalDB Instanceä¸ºæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå¥½çš„Local_DB Instanceã€‚</p></blockquote><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2507100966.png" alt="image-20210809114431464.png"></p><h3 id="7-é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply-Access-Ploicyåº”ç”¨ç­–ç•¥ã€‚">7. é…ç½®é€šè¿‡è®¤è¯åè§„åˆ™ä¸ºAllowï¼Œå¹¶ç‚¹å‡»å·¦ä¸Šè§’Apply Access Ploicyåº”ç”¨ç­–ç•¥ã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1875465499.png" alt="image-20210809114608533.png"></p><h3 id="8-åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚">8. åˆ›å»º80ç«¯å£VSï¼ˆå¯é€‰ï¼‰ï¼Œä½¿å…¶é‡å®šå‘åˆ°443ç«¯å£VSã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/3977884176.png" alt="image-20210806144008058.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2635902324.png" alt="image-20210806144038146.png"></p><h3 id="9-åˆ›å»ºpool">9. åˆ›å»ºpool</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1441425377.png" alt="image-20210806145351090.png"></p><h3 id="10-åˆ›å»º443ç«¯å£vsï¼Œå…³è”-APM-profileã€‚">10. åˆ›å»º443ç«¯å£vsï¼Œå…³è” APM profileã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1592179908.png" alt="image-20210809122054203.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4072885897.png" alt="image-20210806145841690.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/2827906102.png" alt="image-20210806145855776.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/4077901532.png" alt="image-20210809122009298.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/717968412.png" alt="image-20210806145927108.png"></p><h3 id="11-æµ‹è¯•ï¼Œç™»é™†-http-192-168-10-92-ä¼šé‡å®šå‘åˆ°-https-192-168-10-92-ï¼Œè¾“å…¥æœ¬åœ°æ•°æ®åº“ä¸­é…ç½®å¥½çš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒéªŒè¯æˆåŠŸåå³å¯è®¿é—®åˆ°åç«¯æœåŠ¡å™¨ã€‚">11. æµ‹è¯•ï¼Œç™»é™† <a href="http://192.168.10.92">http://192.168.10.92</a> ,ä¼šé‡å®šå‘åˆ° <a href="https://192.168.10.92">https://192.168.10.92</a> ï¼Œè¾“å…¥æœ¬åœ°æ•°æ®åº“ä¸­é…ç½®å¥½çš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒéªŒè¯æˆåŠŸåå³å¯è®¿é—®åˆ°åç«¯æœåŠ¡å™¨ã€‚</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/890359067.png" alt="image-20210809122407084.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/08/1197646786.png" alt="image-20210809122417653.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> APM </tag>
            
            <tag> Auth </tag>
            
            <tag> BIGIP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNSåŸºç¡€ä»¥åŠBindè¯¦è§£</title>
      <link href="/posts/412f68ba6832.html"/>
      <url>/posts/412f68ba6832.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šäº†è§£åŸºæœ¬DNSåŸç†ï¼Œæ‰‹åŠ¨æ­å»ºDNSæœåŠ¡å™¨ã€‚</strong></p><hr><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/3637832841.png" alt="dnsæ€ç»´.png"></p><h2 id="ä¸€ã€DNSåŸºç¡€ä»‹ç»">ä¸€ã€DNSåŸºç¡€ä»‹ç»</h2><h3 id="1-èƒŒæ™¯">1. èƒŒæ™¯</h3><p>â€‹DNS ( Domain Name Service) ä½œä¸ºä¸€ä¸ªéå¸¸è®©äººè€³ç†Ÿèƒ½è¯¦çš„æ¦‚å¿µï¼Œå¯ä»¥æŠŠå¤æ‚éš¾è®°çš„IPåœ°å€è½¬åŒ–æˆä¸ºä¸€ä¸ªå®¹æ˜“è¢«è®°ä½åŸŸåä¾›äººä»¬å»è°ƒç”¨ï¼Œè¿™æ ·äººä»¬åªéœ€è¦è®°ä½æ¯ä¸€ä¸ªç½‘ç«™çš„åŸŸåè€Œä¸éœ€è¦è®°ä½éå¸¸å¤æ‚çš„IPåœ°å€ã€‚</p><h3 id="1-2-FQDN">1.2 FQDN</h3><p>â€‹FQDN(Fully Qualified Domain Name) å®Œå…¨åˆæ ¼åŸŸå/å…¨ç¨‹åŸŸåï¼Œå³åŸŸåå¯ä»¥é€šè¿‡DNSè¿›è¡Œè§£æï¼Œå…¶å…¬å¼ FQDN = HostName + Domainã€‚</p><p>â€‹è¿™é—¨æŠ€æœ¯è§£å†³äº†ä¸€ä¸ªå¤šä¸ªä¸»æœºçš„é—®é¢˜ï¼Œä¸€ä¸ªç½‘ç«™æˆ–è€…æœåŠ¡å™¨é›†ç¾¤ä¸€èˆ¬éƒ½æ˜¯æœ‰å¤šä¸ªä¸»æœºä¸€èµ·åä½œçš„ï¼Œæ¯”å¦‚è¯´åŒ…æ‹¬æ­£å‘ä»£ç†æœåŠ¡å™¨ã€åå‘ä»£ç†æœåŠ¡å™¨ã€WebæœåŠ¡å™¨ã€EmailæœåŠ¡å™¨ã€OAæœåŠ¡å™¨ã€FTPæœåŠ¡å™¨ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™å°±æ¶‰åŠæ˜¯ä¸æ˜¯éœ€ä¸éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¸»æœºç”³è¯·ä¸€ä¸ªåŸŸåã€‚ æœ‰äº†è¿™ä¸ªæŠ€æœ¯ä¹‹åæ¯ä¸€ä¸ªä¸»æœºéƒ½å¯ä»¥è‡ªå·±ç”³è¯·ä¸€ä¸ª <code>Hostname</code> æ¥åŒºåˆ«äºå…¶ä»–çš„ä¸»æœºï¼Œè¿™ä¸ªæ—¶å€™å°±åªéœ€è¦ä¸€ä¸ªåŸŸåå°±å¯ä»¥åšåˆ°ç®¡ç†æ‰€æœ‰çš„ä¸»æœºã€‚</p><p>â€‹æ¯”å¦‚æˆ‘ç”³è¯·äº†ä¸€ä¸ªåŸŸå: <code>doheras.com</code></p><p>â€‹ç°åœ¨æˆ‘æœ‰ä¸¤ä¸ªæœåŠ¡å™¨éœ€è¦ç”¨åˆ°è¿™ä¸ªåŸŸåï¼Œä¸€ä¸ª FTPæœåŠ¡å™¨ï¼Œä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡å™¨éƒ½éœ€è¦ç”¨åˆ° <code>doheras.com</code>è¿™ä¸ªåŸŸåï¼Œæ ¹æ®å…¬å¼ï¼Œæˆ‘ä»¬çŸ¥é“å¯ä»¥é‡‡ç”¨ <code>hostname</code> çš„æ–¹å¼æ¥è®¿é—®ä¸åŒçš„ä¸»æœºï¼š</p><p>â€‹Web æœåŠ¡å™¨: <code>web.doheras.com</code></p><p>â€‹FTP æœåŠ¡å™¨: <code>ftp.doheras.com</code></p><p>â€‹å› æ­¤ï¼Œ FQDN æœåŠ¡å¯ä»¥ç®€åŒ–åœ¨æœåŠ¡å’Œåº”ç”¨ä¸­çš„é…ç½®æµç¨‹ï¼Œæé«˜é…ç½®æ–‡ä»¶çš„å¯ç»´æŠ¤æ€§ã€‚</p><p>â€‹åœ¨é…ç½®DNSçš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæœåŠ¡ç«¯çš„å·¥ä½œåœ¨UDPåè®®ç«¯å£53ä¸Šï¼ŒDNSéœ€è¦FQDNæä¾›æ­£å‘è§£æ ï¼ˆFQDN --&gt; IPï¼‰ä»¥åŠåå‘è§£æ (IP --&gt; FQDN) çš„æœåŠ¡ã€‚</p><h3 id="1-3-DNS-åŸŸ">1.3 DNS åŸŸ</h3><h4 id="1-3-1-åŸŸåç»“æ„">1.3.1 åŸŸåç»“æ„</h4><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/1839069916.png" alt="dnsåŸŸåç»“æ„.png"></p><p><strong>ï¼ˆ1ï¼‰æ ¹åŸŸ</strong></p><p>â€‹æ ¹ï¼ˆrootï¼‰åŸŸå°±æ˜¯â€œ.â€å®ƒæ˜¯ç”±Inetnetåå­—æ³¨å†Œæˆæƒæœºæ„ç®¡ç†ï¼Œè¯¥æœºæ„æŠŠåŸŸåç©ºé—´å„éƒ¨åˆ†çš„ç®¡ç†è´£ä»»åˆ†é…è¿æ¥åˆ°Internetçš„å„ä¸ªç»„ç»‡ ã€‚</p><p><strong>ï¼ˆ2ï¼‰é¡¶çº§åŸŸ</strong></p><p>â€‹åˆç§°ä¸€çº§åŸŸï¼Œå…¶ä¸­é¡¶çº§åŸŸååˆ†ä¸ºï¼šå›½å®¶é¡¶çº§åŸŸåã€é€šç”¨é¡¶çº§åŸŸåã€åå‘åŸŸåã€‚</p><table><thead><tr><th>é¡¶çº§åŸŸ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å›½å®¶é¡¶çº§åŸŸå</td><td>ä¸­å›½:cnï¼Œ ç¾å›½:usï¼Œè‹±å›½ukâ€¦</td></tr><tr><td>é€šç”¨é¡¶çº§åŸŸå</td><td>comå…¬å¸ä¼ä¸šï¼Œeduæ•™è‚²æœºæ„ï¼Œgovæ”¿åºœéƒ¨é—¨ï¼Œintå›½é™…ç»„ç»‡ï¼Œmilå†›äº‹éƒ¨é—¨ ï¼Œnetç½‘ç»œï¼Œorgéç›ˆåˆ©ç»„ç»‡â€¦</td></tr><tr><td>åå‘åŸŸå</td><td>arpaï¼Œç”¨äºPTRæŸ¥è¯¢ï¼ˆIPåœ°å€è½¬æ¢ä¸ºåŸŸåï¼‰</td></tr></tbody></table><p><strong>ï¼ˆ3ï¼‰äºŒçº§åŸŸ</strong></p><p>â€‹äºŒçº§åŸŸæ³¨å†Œåˆ°ä¸ªäººã€ç»„ç»‡æˆ–å…¬å¸çš„åç§°ã€‚è¿™äº›åç§°åŸºäºç›¸åº”çš„é¡¶çº§åŸŸï¼ŒäºŒçº§åŸŸä¸‹å¯ä»¥åŒ…æ‹¬ä¸»æœºå’Œå­åŸŸã€‚</p><p><strong>ï¼ˆ4ï¼‰å­åŸŸ</strong></p><p>â€‹å­åŸŸï¼šå·²æ³¨å†Œçš„äºŒçº§åŸŸåæ´¾ç”Ÿçš„åŸŸåï¼Œä¸€èˆ¬å°±æ˜¯ç½‘ç«™åï¼Œ<a href="http://xn--www-uc0ep96b.test.com">ä¾‹å¦‚www.test.com</a>ã€‚</p><p><strong>ï¼ˆ5ï¼‰ä¸»æœºåŸŸ</strong></p><p>â€‹ä¸»æœºååœ¨åŸŸåç©ºé—´ç»“æ„çš„æœ€åº•å±‚ï¼Œä¸»æœºåå’Œå‰é¢è®²çš„åŸŸåç»“åˆæ„æˆFQDNï¼ˆå®Œå…¨åˆæ ¼çš„åŸŸåï¼‰ï¼Œä¸»æœºåæ˜¯FQDNçš„æœ€å·¦ç«¯ã€‚</p><h4 id="1-3-2-åŸŸåæœåŠ¡å™¨">1.3.2 åŸŸåæœåŠ¡å™¨</h4><p>â€‹åŸŸåæ˜¯åˆ†å±‚ç»“æ„ï¼ŒåŸŸåæœåŠ¡å™¨ä¹Ÿæ˜¯å¯¹åº”çš„å±‚çº§ç»“æ„ã€‚æœ‰äº†åŸŸåç»“æ„ï¼Œè¿˜éœ€è¦éåŠå…¨ä¸–ç•Œçš„åŸŸåæœåŠ¡å™¨å»è§£æåŸŸåï¼ŒåŸŸåæœåŠ¡å™¨å®é™…ä¸Šå°±æ˜¯è£…æœ‰åŸŸåç³»ç»Ÿçš„ä¸»æœºã€‚</p><table><thead><tr><th>åˆ†ç±»</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>æ ¹åŸŸåæœåŠ¡å™¨</td><td>æœ€é«˜å±‚æ¬¡çš„åŸŸåæœåŠ¡å™¨ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨è§£æä¸äº†çš„åŸŸåå°±ä¼šå‘å…¶æ±‚åŠ©ï¼Œä»æ ¹åŸŸåæœåŠ¡å™¨è¿›è¡ŒåŸŸåè§£æã€‚</td></tr><tr><td>é¡¶çº§åŸŸåæœåŠ¡å™¨</td><td>è´Ÿè´£ç®¡ç†åœ¨è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨ä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåã€‚</td></tr><tr><td>æƒé™åŸŸåæœåŠ¡å™¨</td><td>è´Ÿè´£ä¸€ä¸ªåŒºçš„åŸŸåè§£æå·¥ä½œã€‚</td></tr><tr><td>æœ¬åœ°åŸŸåæœåŠ¡å™¨</td><td>å½“ä¸€ä¸ªä¸»æœºå‘å‡ºDNSæŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªæŸ¥è¯¢è¯·æ±‚é¦–å…ˆå‘ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚</td></tr></tbody></table><p>æ³¨ï¼šä¸€ä¸ªåŸŸåæœåŠ¡å™¨æ‰€è´Ÿè´£çš„èŒƒå›´ï¼Œæˆ–è€…è¯´æœ‰ç®¡ç†æƒé™çš„èŒƒå›´ï¼Œå°±ç§°ä¸ºåŒºï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li><p>æ¯ä¸ªå±‚çš„åŸŸåä¸Šéƒ½æœ‰è‡ªå·±çš„åŸŸåæœåŠ¡å™¨ï¼Œæœ€é¡¶å±‚çš„æ˜¯æ ¹åŸŸåæœåŠ¡å™¨ã€‚</p></li><li><p>æ¯ä¸€çº§åŸŸåæœåŠ¡å™¨éƒ½çŸ¥é“ä¸‹çº§åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ã€‚</p></li><li><p>ä¸ºäº†å®¹ç¾, æ¯ä¸€çº§è‡³å°‘è®¾ç½®ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„åŸŸåæœåŠ¡å™¨ã€‚</p></li></ul><h4 id="1-3-3-åŸŸåè§„åˆ™">1.3.3 åŸŸåè§„åˆ™</h4><ul><li>åŸŸåæ˜¯å¤§å°å†™æ— å…³çš„ã€‚</li><li>å„ç»„æˆéƒ¨åˆ†çš„åå­—æœ€å¤šæœ‰63ä¸ªå­—ç¬¦é•¿ï¼Œæ•´ä¸ªè·¯å¾„ä¸è¶…è¿‡255ä¸ªå­—ç¬¦ã€‚</li><li>æ²¡æœ‰è§„åˆ™é™åˆ¶åŒæ—¶åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªé¡¶çº§åŸŸåä¸‹çš„æ³¨å†Œï¼ˆä¾‹å¦‚ï¼š<a href="http://sony.com">sony.com</a> æˆ– <a href="http://sony.nl">sony.nl</a>ï¼‰ã€‚</li><li>æ¯ä¸ªåŸŸè‡ªå·±æ§åˆ¶å®ƒä¸‹é¢çš„åŸŸï¼ˆå­åŸŸï¼‰çš„åˆ’åˆ†ï¼ˆä¾‹å¦‚ï¼šæ—¥æœ¬çš„ <a href="http://ac.jp">ac.jp</a> å’Œ <a href="http://co.jp">co.jp</a> åˆ†åˆ«å¯¹åº”äº edu å’Œ comï¼Œè€Œè·å…°å´ä¸è¿™æ ·åŒºåˆ†ï¼Œå®ƒæŠŠæ‰€æœ‰çš„éƒ½æ”¾åœ¨nlä¹‹ä¸‹ï¼‰ã€‚</li><li>è¦åˆ›å»ºä¸€ä¸ªæ–°çš„åŸŸï¼Œåˆ›å»ºè€…å¿…é¡»å¾—åˆ°è¯¥æ–°åŸŸçš„ä¸Šçº§åŸŸçš„è®¸å¯ï¼Œä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œè¯¥æ–°åŸŸå°±å¯åˆ›å»ºå­åŸŸï¼Œæ— éœ€å¾å¾—ä¸Šçº§åŸŸçš„åŒæ„ã€‚</li><li>åŸŸåéµå¾ªçš„æ˜¯ç»„ç»‡çš„è¾¹ç•Œè€Œä¸æ˜¯ç‰©ç†ç½‘ç»œçš„è¾¹ç•Œã€‚</li></ul><h2 id="äºŒã€DNSè§£æ">äºŒã€DNSè§£æ</h2><h3 id="2-1-DNSè§£æé¡ºåº">2.1 DNSè§£æé¡ºåº</h3><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/3061842059.png" alt="è§£æé¡ºåº.png"></p><h3 id="2-2-é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢">2.2 é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢</h3><p>ï¼ˆ1ï¼‰é€’å½’æŸ¥è¯¢ï¼šæœ¬æœºå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘å‡ºä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼Œå°±é™å¾…æœ€ç»ˆçš„ç»“æœã€‚å¦‚æœæœ¬åœ°åŸŸåæœåŠ¡å™¨æ— æ³•è§£æï¼Œè‡ªå·±ä¼šä»¥DNSå®¢æˆ·æœºçš„èº«ä»½å‘å…¶å®ƒåŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œç›´åˆ°å¾—åˆ°æœ€ç»ˆçš„IPåœ°å€å‘Šè¯‰æœ¬æœº<br>ï¼ˆ2ï¼‰è¿­ä»£æŸ¥è¯¢ï¼šæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œæ ¹åŸŸåæœåŠ¡å™¨å‘Šè¯‰å®ƒä¸‹ä¸€æ­¥åˆ°å“ªé‡Œå»æŸ¥è¯¢ï¼Œç„¶åå®ƒå†å»æŸ¥ï¼Œæ¯æ¬¡å®ƒéƒ½æ˜¯ä»¥å®¢æˆ·æœºçš„èº«ä»½å»å„ä¸ªæœåŠ¡å™¨æŸ¥è¯¢ã€‚</p><p>â€‹é€šä¿—åœ°è¯´ï¼Œé€’å½’å°±æ˜¯æŠŠä¸€ä»¶äº‹æƒ…äº¤ç»™åˆ«äººï¼Œå¦‚æœäº‹æƒ…æ²¡æœ‰åŠå®Œï¼Œå“ªæ€•å·²ç»åŠäº†å¾ˆå¤šï¼Œéƒ½ä¸è¦æŠŠç»“æœå‘Šè¯‰æˆ‘ï¼Œæˆ‘è¦çš„æ˜¯ä½ çš„æœ€ç»ˆç»“æœï¼Œè€Œä¸æ˜¯ä¸­é—´ç»“æœï¼›å¦‚æœä½ æ²¡åŠå®Œï¼Œè¯·ä½ æ‰¾åˆ«äººåŠå®Œã€‚<br>â€‹è¿­ä»£åˆ™æ˜¯æˆ‘äº¤ç»™ä½ ä¸€ä»¶äº‹ï¼Œä½ èƒ½åŠå¤šå°‘å°±å‘Šè¯‰æˆ‘ä½ åŠäº†å¤šå°‘ï¼Œç„¶åå‰©ä¸‹çš„äº‹æƒ…å°±ç”±æˆ‘æ¥åŠã€‚</p><h2 id="ä¸‰ã€bind9">ä¸‰ã€bind9</h2><h3 id="3-1-åŸºæœ¬ç¯å¢ƒä¸å®‰è£…">3.1 åŸºæœ¬ç¯å¢ƒä¸å®‰è£…</h3><p>ç¯å¢ƒï¼š</p><ul><li>192.168.10.222 <a href="http://dns1.host.com">dns1.host.com</a>ä¸»dnsæœåŠ¡å™¨</li></ul><p>è½¯ä»¶ç‰ˆæœ¬ï¼š</p><ul><li><p>CentOS 7</p></li><li><p>Bind 9</p></li></ul><h3 id="ä½¿ç”¨yumå®‰è£…BIND9">ä½¿ç”¨yumå®‰è£…BIND9</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bind</span><br><span class="line">==========================================================================================</span><br><span class="line">Package  Arch        Version                     Repository    Size</span><br><span class="line">==========================================================================================</span><br><span class="line">bind     x86_64      32:9.11.4-26.P2.el7_9.5     updates       2.3 M</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-bind9-åŸºç¡€">3.2 bind9 åŸºç¡€</h3><h4 id="3-2-1-bind9-ä¸»é…ç½®æ–‡ä»¶">3.2.1 bind9 ä¸»é…ç½®æ–‡ä»¶</h4><p>â€‹é»˜è®¤ä½ç½®ä¸º /etc/named.confï¼Œä¸»é…ç½®æ–‡ä»¶æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">options&#123;</span><br><span class="line">     //å…¨å±€é€‰é¡¹</span><br><span class="line">&#125;</span><br><span class="line">zoneã€€&quot;zone name&quot; &#123;</span><br><span class="line">   //å®šäºåŒºåŸŸ</span><br><span class="line">&#125;</span><br><span class="line">logging&#123;</span><br><span class="line">    //æ—¥å¿—æ–‡ä»¶</span><br><span class="line">&#125;</span><br><span class="line">includeï¼šåŠ è½½åˆ«çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>ä¸»é…ç½®æ–‡ä»¶è¯¦è§£å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">named.confä¸»é…ç½®æ–‡ä»¶å‚æ•°è¯¦è§£</span></span><br><span class="line"> </span><br><span class="line">//å…¨å±€é…ç½®æ®µ</span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; 192.168.10.222; &#125;; #è®¾ç½®é€šä¿¡çš„ç½‘æ®µï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨æœ¬æœºIPï¼Œå¹¶é127.0.0.1</span><br><span class="line">        listen-on-v6 port 53 &#123; ::1; &#125;; #ç›‘å¬bindç«¯å£</span><br><span class="line">        directory       &quot;/var/named&quot;;  #æŒ‡å®šåŒºåŸŸæ–‡ä»¶å­˜æ”¾è·¯å¾„</span><br><span class="line">        dump-file       &quot;/var/named/data/cache_dump.db&quot;; #è®¾ç½®å½“æ‰§è¡Œrndc dumpdbå‘½ä»¤åå¯¼å‡ºæ–‡ä»¶å­˜æ”¾è·¯å¾„</span><br><span class="line">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class="line">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;; #æœåŠ¡å™¨è¾“å‡ºçš„å†…å­˜ä½¿ç”¨ç»Ÿè®¡æ–‡ä»¶å</span><br><span class="line">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class="line">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class="line">        allow-query     &#123; any; &#125;;  #å…è®¸æŸ¥è¯¢æ¥æº(è¿™é‡Œå»ºè®®ä¿®æ”¹ä¸ºIPåœ°å€ï¼Œlocalhostä»£è¡¨åªå…è®¸æœ¬æœºæŸ¥è¯¢) anyä»£è¡¨æ‰€æœ‰ç½‘æ®µ</span><br><span class="line">        allow-transfer &#123; none; &#125; #å…è®¸æŸ¥è¯¢çš„ç½‘æ®µ</span><br><span class="line">        recursion yes; #æ˜¯å¦å¼€å¯é€’å½’æŸ¥è¯¢</span><br><span class="line">        dnssec-enable yes; #æ˜¯å¦æ”¯æŒDNSSECå¼€å…³</span><br><span class="line">        dnssec-validation yes; #æ˜¯å¦å¼€å¯dnssecç¡®è®¤å¼€å…³</span><br><span class="line">        bindkeys-file &quot;/etc/named.root.key&quot;;</span><br><span class="line">        managed-keys-directory &quot;/var/named/dynamic&quot;;</span><br><span class="line">        pid-file &quot;/run/named/named.pid&quot;;</span><br><span class="line">        session-keyfile &quot;/run/named/session.key&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//æ—¥å¿—é…ç½®æ®µ</span><br><span class="line">logging &#123;</span><br><span class="line">        channel default_debug &#123;         </span><br><span class="line">                file &quot;data/named.run&quot;;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">æœ¬æ®µå‚æ•°è§£é‡Šï¼Œå°†æ—¥å¿—å†™å…¥å·¥ä½œç›®å½•ä¸‹çš„named.runæ–‡ä»¶ã€‚æ³¨æ„ï¼šå¦‚æœæœåŠ¡å™¨ç”¨-få‚æ•°å¯åŠ¨ï¼Œåˆ™named.runä¼šè¢«stderræ‰€ä»£æ›¿ï¼Œseverity æŒ‰ç…§æœåŠ¡å™¨å½“å‰Debugçº§åˆ«è®°å½•æ—¥å¿—</span></span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="built_in">bind</span>æ—¥å¿—å¯ä»¥å†™åˆ°å¾ˆå¤šåœ°æ–¹ï¼Œå…·ä½“å†™å…¥æ–¹å¼å¯ä»¥å‚è€ƒhttps://blog.csdn.net/zhu_tianwei/article/details/45103455</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">//åŒºåŸŸé…ç½®æ®µ</span><br><span class="line">zone &quot;.&quot; IN &#123;             #.ä»£è¡¨æ ¹åŸŸ</span><br><span class="line">        type hint;       #ä»£è¡¨æ ¹æœåŠ¡å™¨ï¼Œé™¤hintè¿˜æœ‰master ä»£è¡¨ä¸»åŸŸåæœåŠ¡å™¨ï¼Œslaveä»£è¡¨è¾…åŠ©åŸŸåæœåŠ¡å™¨ï¼Œforward ä»£è¡¨è½¬å‘æœåŠ¡å™¨</span><br><span class="line">        file &quot;named.ca&quot;;  #åŸŸä¿¡æ¯æºæ•°æ®åº“ä¿¡æ¯æ–‡ä»¶å</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">include &quot;/etc/named.rfc1912.zones&quot;;   #åŒºåŸŸç®¡ç†æ–‡ä»¶(åŒ…å«èµ„æºè®°å½•ã€å®å®šä¹‰å’Œæ³¨é‡Š)</span><br><span class="line">                                      #é€šå¸¸å®šä¹‰åœ¨/var/namedç›®å½•ä¸‹ä¸”ä»¥.zoneç»“å°¾</span><br><span class="line">include &quot;/etc/named.root.key&quot;;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-bind9-å¸¸ç”¨åŸºæœ¬å‘½ä»¤">3.2.2 bind9 å¸¸ç”¨åŸºæœ¬å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥é…ç½®æ–‡ä»¶</span></span><br><span class="line">named-checkconf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯åŠ¨bind9</span></span><br><span class="line">systemctl start named</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥bind9æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status named</span><br></pre></td></tr></table></figure><h4 id="3-2-3-bind9-åŒºåŸŸé…ç½®æ–‡ä»¶">3.2.3 bind9 åŒºåŸŸé…ç½®æ–‡ä»¶</h4><p>â€‹åŒºåŸŸé…ç½®æ–‡ä»¶é»˜è®¤ä¸º /etc/named.rfc1912.zones ,ä¹Ÿå¯ä»¥æ”¾ç½®åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶ä¸­ï¼Œåœ¨/etc/named.confé‡Œincludeè¿›æ¥ã€‚æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;.&quot; IN &#123;</span><br><span class="line">        type master|slave|hint;  //è‡ªå®šä¹‰åŒºåŸŸç±»å‹</span><br><span class="line">        file path/to/zonefile;//ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„</span><br><span class="line">        allow-update &#123; ip | acl &#125;ï¼›//æ˜¯å¦å…è®¸åŠ¨æ€æ›´æ–°</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">master:è¡¨ç¤ºå®šä¹‰çš„æ˜¯ä¸»åŸŸåæœåŠ¡å™¨</span><br><span class="line">slave :è¡¨ç¤ºå®šä¹‰çš„æ˜¯è¾…åŠ©åŸŸåæœåŠ¡å™¨</span><br><span class="line">hint:è¡¨ç¤ºæ˜¯äº’è”ç½‘ä¸­æ ¹åŸŸåæœåŠ¡å™¨</span><br></pre></td></tr></table></figure><p>**allow-update aclåˆ†ä¸ºä»¥ä¸‹äº”ç§</p><ul><li>anyï¼šä»»ä½•ä¸»æœº</li><li>noneï¼šæ²¡æœ‰ä¸»æœº</li><li>localhostï¼šæœ¬æœº</li><li>localnetï¼šæœ¬åœ°å­ç½‘æ‰€æœ‰IP</li></ul><ul><li><p>è‡ªå®šä¹‰acl</p><p>å…¶ä¸­è‡ªå®šä¹‰aclå¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ç®€å•acl ä¸€ç§æ˜¯å¤æ‚aclï¼ˆå¯åµŒå¥—ç®€å•aclï¼‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p></li></ul><p>ç®€å•acl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acl &quot;someips&quot; &#123;                               //å®šä¹‰ä¸€ä¸ªåä¸ºsomeipsçš„ACL  </span><br><span class="line">  10.0.0.1; 192.168.23.1; 192.168.23.15;      //åŒ…å«3ä¸ªå•ä¸ªIP  </span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><p>å¤æ‚acl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">acl &quot;complex&quot; &#123;             //å®šä¹‰ä¸€ä¸ªåä¸ºcomplexçš„ACL  </span><br><span class="line">  &quot;someips&quot;;                //å¯ä»¥åµŒå¥—åŒ…å«å…¶ä»–ACL  </span><br><span class="line">  10.0.15.0/24;             //åŒ…å«10.0.15.0å­ç½‘ä¸­çš„æ‰€æœ‰IP  </span><br><span class="line">  !10.0.16.1/24;            //é10.0.16.1å­ç½‘çš„IP  </span><br><span class="line">  &#123;10.0.17.1;10.0.18.2;&#125;;   //åŒ…å«äº†ä¸€ä¸ªIPç»„  </span><br><span class="line">  localhostï¼›               //æœ¬åœ°ç½‘ç»œæ¥å£IPï¼ˆå«å®é™…æ¥å£IPå’Œ127.0.0.1ï¼‰  </span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><p>aclä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allow-update &#123; &quot;someips&quot;; &#125;;</span><br><span class="line">allow-transfer &#123; &quot;complex&quot;; &#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ªhost.comçš„ä¸»æœºåŸŸï¼ŒåŒºåŸŸçš„é…ç½®èŒƒä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type  master;</span><br><span class="line">        file  &quot;host.com.zone&quot;;</span><br><span class="line">        allow-update &#123; 192.168.10.222;192.168.10.223; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="3-2-4-åŒºåŸŸæ•°æ®åº“æ–‡ä»¶">3.2.4 åŒºåŸŸæ•°æ®åº“æ–‡ä»¶</h4><ul><li><p>åŒºåŸŸæ•°æ®åº“æ–‡ä»¶æœ‰ä¸”ä»…æœ‰èµ„æºè®°å½•ã€å®å®šä¹‰å’Œæ³¨é‡Šã€‚</p></li><li><p>é€šå¸¸å®šä¹‰åœ¨/var/namedç›®å½•ä¸‹ä¸”ä»¥.zoneç»“å°¾ï¼Œå±ä¸»rootï¼Œå±ç»„namedï¼Œæƒé™640ã€‚</p></li></ul><h5 id="3-2-4-1-èµ„æºè®°å½•-Resource-Records">3.2.4.1 èµ„æºè®°å½•(Resource Records)</h5><ul><li>æ¯ä¸ªåŸŸï¼Œæ— è®ºæ˜¯å•ä¸»æœºåŸŸè¿˜æ˜¯é¡¶çº§åŸŸï¼Œéƒ½å¯ä»¥æœ‰ä¸€ç»„è·Ÿå®ƒç›¸å…³è”çš„èµ„æºè®°å½•</li><li>å½“ä¸€ä¸ªè§£æå™¨æŠŠåŸŸåä¼ é€’ç»™DNSæ—¶ï¼ŒDNSæ‰€è¿”å›çš„æ˜¯ä¸è¯¥åŸŸåç›¸å…³è”çš„èµ„æºè®°å½•</li><li>DNSçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å°†åŸŸåæ˜ å°„åˆ°èµ„æºè®°å½•ä¸Š</li></ul><p>èµ„æºè®°å½•æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name [ttl(ç¼“å­˜æ—¶é—´)] IN èµ„æºè®°å½•ç±»å‹ï¼ˆRRtypeï¼‰  Value</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªèµ„æºè®°å½•åŒ…æ‹¬5ä¸ªéƒ¨åˆ†ï¼š</p><table><thead><tr><th>èµ„æºè®°å½•</th><th>æè¿°</th></tr></thead><tbody><tr><td>åŸŸå</td><td>Domain Name</td></tr><tr><td>ç”Ÿå­˜å‘¨æœŸ</td><td>Time to Live</td></tr><tr><td>ç±»åˆ«</td><td>Class</td></tr><tr><td>ç±»å‹</td><td>Type</td></tr><tr><td>å€¼</td><td>Value</td></tr></tbody></table><p>â‘ åŸŸåï¼šæŒ‡å‡ºè¿™æ¡è®°å½•é€‚ç”¨äºå“ªä¸ªåŸŸ</p><p>é€šå¸¸ï¼Œæ¯ä¸ªåŸŸæœ‰å¤šæ¡è®°å½•ï¼Œè€Œæ•°æ®åº“åˆ™ä¿å­˜äº†å¤šä¸ªåŸŸçš„ä¿¡æ¯<br>åŸŸåå­—æ®µæ˜¯åŒ¹é…æŸ¥è¯¢æ¡ä»¶çš„ä¸»è¦å…³é”®å­—<br>è®°å½•åœ¨æ•°æ®åº“ä¸­çš„é¡ºåºæ˜¯æ— å…³ç´§è¦çš„</p><p>â‘¡ç”Ÿå­˜æ—¶é—´ï¼šæŒ‡ç¤ºè¯¥æ¡è®°å½•çš„ç¨³å®šç¨‹åº¦</p><p>æç¨³å®šçš„ä¿¡æ¯ä¼šè¢«åˆ†é…ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œå¦‚ 86400 ï¼ˆä¸€å¤©æ—¶é—´çš„ç§’æ•°ï¼‰<br>éå¸¸ä¸ç¨³å®šçš„ä¿¡æ¯ä¼šè¢«åˆ†é…ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼Œå¦‚60ï¼ˆ1åˆ†é’Ÿï¼‰</p><p>â‘¢ç±»åˆ«ï¼šå¯¹äºäº’è”ç½‘ä¿¡æ¯ï¼Œå®ƒæ€»æ˜¯ IN</p><p>â‘£ç±»å‹ï¼šæŒ‡å‡ºäº†è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„è®°å½•</p><table><thead><tr><th style="text-align:left">èµ„æºè®°å½•ç±»å‹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">SOA</td><td style="text-align:left">æˆæƒèµ„æºè®°å½• SOA çš„å¼€å§‹å¯åŠ¨æ¯ä¸ªåŒºåŸŸæ–‡ä»¶ï¼Œå¹¶æŒ‡ç¤ºåç§°æœåŠ¡å™¨æ˜¯ç‰¹å®šåŒºåŸŸçš„æœ€ä½³ä¿¡æ¯æ¥æºã€‚SOA è®°å½•è¡¨æ˜åç§°æœåŠ¡å™¨å¯¹åŒºåŸŸå…·æœ‰æƒå¨æ€§ã€‚æ¯ä¸ªåŒºåŸŸå¿…é¡»æ°å¥½æœ‰ä¸€ä¸ª SOA è®°å½•ã€‚ä¸å…¶ä»–èµ„æºè®°å½•ä¸åŒï¼Œåªæœ‰åœ¨åˆ›å»ºæ–°çš„ä¸»åŒºåŸŸæ–‡ä»¶æ—¶æ‰åˆ›å»º SOA è®°å½•ã€‚</td></tr><tr><td style="text-align:left">A</td><td style="text-align:left">åœ°å€è®°å½•æˆ– A è®°å½•åˆ—å‡ºç»™å®šä¸»æœºåçš„ IP åœ°å€ã€‚name å­—æ®µæ˜¯ä¸»æœºåï¼Œaddress æ˜¯ç½‘ç»œæ¥å£åœ°å€ã€‚æœºå™¨çš„æ¯ä¸ª IP åœ°å€åº”è¯¥æœ‰ä¸€ä¸ª A è®°å½•ã€‚</td></tr><tr><td style="text-align:left">AAAA</td><td style="text-align:left">IPv6 åœ°å€è®°å½•æˆ– AAAA è®°å½•åˆ—å‡ºç»™å®šä¸»æœºåçš„ 128 ä½ IPv6 åœ°å€ã€‚</td></tr><tr><td style="text-align:left">CNAME</td><td style="text-align:left">è§„èŒƒåç§°èµ„æºè®°å½• CNAME æŒ‡å®šå®˜æ–¹æˆ–è§„èŒƒä¸»æœºåçš„åˆ«åæˆ–æ˜µç§°ã€‚è¯¥è®°å½•å¿…é¡»æ˜¯å”¯ä¸€ä¸åˆ«åç›¸å…³è”çš„è®°å½•ã€‚ä¸ºç»™å®šåœ°å€æä¾›ä¸€æ¡ A è®°å½•å¹¶ä½¿ç”¨ CNAME è®°å½•ä¸ºè¯¥åœ°å€å®šä¹‰åˆ«åä¸»æœºåé€šå¸¸æ›´å®¹æ˜“ã€‚</td></tr><tr><td style="text-align:left">DNAME</td><td style="text-align:left">åå‘åç§°å§”æ‰˜èµ„æºè®°å½• DNAME æŒ‡å®š IPv6 åœ°å€çš„åå‘æŸ¥æ‰¾ã€‚è¿™äº›è®°å½•å°†ä¸€ä¸ªåŸŸåçš„åç¼€æ›¿æ¢ä¸ºå¦ä¸€ä¸ªã€‚DNAME è®°å½•æŒ‡ç¤º DNSï¼ˆBIG-IP Â® DNSï¼Œä»¥å‰ç§°ä¸º GTMï¼‰ï¼ˆæˆ–ä»»ä½• DNS æœåŠ¡å™¨ï¼‰æ„å»ºä¸€ä¸ªåˆ«åï¼Œç”¨å­˜å‚¨åœ¨ DNAME è®°å½•ä¸­çš„æ•°æ®æ›¿æ¢è¯·æ±‚çš„ IP åœ°å€çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td style="text-align:left">HINFO</td><td style="text-align:left">ä¸»æœºä¿¡æ¯èµ„æºè®°å½• HINFO åŒ…å«ä¸ BIG-IP DNSï¼ˆä»¥å‰ç§°ä¸º GTMï¼‰ï¼ˆæˆ–å…¶ä»– DNSï¼‰ç›¸å…³çš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚</td></tr><tr><td style="text-align:left">MX</td><td style="text-align:left">é‚®ä»¶äº¤æ¢èµ„æºè®°å½• MX å®šä¹‰äº†ç»™å®šåŸŸçš„é‚®ä»¶ç³»ç»Ÿã€‚</td></tr><tr><td style="text-align:left">NAPTR</td><td style="text-align:left">åç§°æƒé™æŒ‡é’ˆè®°å½• NAPTR æœ‰åŠ©äºç»Ÿä¸€èµ„æºåç§° (URN) çš„æ ‡å‡†åŒ–ã€‚NAPTR è®°å½•åœ¨ä¸€ç»„ URNã€URL å’Œæ™®é€šåŸŸåä¹‹é—´æ˜ å°„ï¼Œå¹¶å‘å®¢æˆ·ç«¯å»ºè®®å¯ç”¨äºä¸æ˜ å°„èµ„æºé€šä¿¡çš„åè®®ã€‚</td></tr><tr><td style="text-align:left">NS</td><td style="text-align:left">åç§°æœåŠ¡å™¨èµ„æºè®°å½• NS å®šä¹‰ç»™å®šåŸŸçš„åç§°æœåŠ¡å™¨ï¼Œåˆ›å»ºä¸€ä¸ªå§”æ‰˜ç‚¹å’Œä¸€ä¸ªå­åŒºåŸŸã€‚ç¬¬ä¸€ä¸ªåç§°å­—æ®µæŒ‡å®šç”±åç§°æœåŠ¡å™¨åç§°å­—æ®µä¸­æŒ‡å®šçš„åç§°æœåŠ¡å™¨æä¾›æœåŠ¡çš„åŒºåŸŸã€‚æ¯ä¸ªåŒºåŸŸè‡³å°‘éœ€è¦ä¸€ä¸ªåç§°æœåŠ¡å™¨ã€‚</td></tr><tr><td style="text-align:left">PTR</td><td style="text-align:left">åç§°æŒ‡é’ˆèµ„æºè®°å½• PTR å°†ä¸»æœºåä¸ç»™å®šçš„ IP åœ°å€ç›¸å…³è”ã€‚è¿™äº›è®°å½•ç”¨äºåå‘åç§°æŸ¥æ‰¾ã€‚</td></tr><tr><td style="text-align:left">SRV</td><td style="text-align:left">æœåŠ¡èµ„æºè®°å½• SRV æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œé€šè¿‡å®ƒå¯ä»¥å°†ç»™å®šæœåŠ¡çš„åˆ«åé‡å®šå‘åˆ°å¦ä¸€ä¸ªåŸŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœè™šæ„å…¬å¸ Site Request æœ‰ä¸€ä¸ªæ‰˜ç®¡åœ¨ <a href="http://archive.siterequest.com">archive.siterequest.com</a> ä¸Šçš„ FTP å­˜æ¡£ï¼ŒIT éƒ¨é—¨å¯ä»¥åˆ›å»º SRV è®°å½•ï¼Œé€šè¿‡è¯¥è®°å½•å°†åˆ«å <a href="http://ftp.siterequest.com">ftp.siterequest.com</a> é‡å®šå‘åˆ° <a href="http://archive.siterequest.com">archive.siterequest.com</a>ã€‚</td></tr><tr><td style="text-align:left">TXT</td><td style="text-align:left">æ–‡æœ¬èµ„æºè®°å½• TXT å…è®¸æ‚¨æä¾›ä»»ä½•ä¿¡æ¯å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚æœåŠ¡å™¨çš„ä½ç½®æˆ–æ‚¨å¸Œæœ›æä¾›çš„ä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚</td></tr></tbody></table><p>å¸¸ç”¨èµ„æºè®°å½•ï¼š</p><p><strong>(1) SOAè®°å½•</strong></p><p>SOA: èµ·å§‹æˆæƒï¼Œåªèƒ½æœ‰ä¸€æ¡</p><ul><li>name:åªèƒ½æ˜¯åŒºåŸŸåç§°ï¼Œé€šå¸¸å¯ä»¥ç®€å†™ä¸º@ï¼Œä¾‹å¦‚ï¼š<a href="http://od.com">od.com</a>.</li><li>value:æœ‰nä¸ªæ•°å€¼ï¼Œæœ€ä¸»è¦çš„æ˜¯ä¸»DNSæœåŠ¡å™¨çš„FQDNï¼Œç‚¹ä¸å¯çœç•¥</li></ul><p>æ³¨æ„ï¼šSOAå¿…é¡»æ˜¯åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ç¬¬ä¸€æ¡è®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ 600 IN SOA  dns.host.com. ç®¡ç†å‘˜é‚®ç®±ï¼ˆdnsadmin.host.com.ï¼‰ï¼ˆ</span><br><span class="line">     åºåˆ—å·(serial number)  ;æ³¨é‡Šå†…å®¹ï¼Œåè¿›åˆ¶æ•°æ®ï¼Œä¸èƒ½è¶…è¿‡10ä½ï¼Œé€šå¸¸ä½¿ç”¨æ—¥æœŸæ—¶é—´æˆ³ï¼Œä¾‹å¦‚2018121601</span><br><span class="line">     åˆ·æ–°æ—¶é—´(refresh time) ;å³æ¯éš”å¤šä¹…åˆ°ä¸»æœåŠ¡å™¨æ£€æŸ¥ä¸€æ¬¡</span><br><span class="line">     é‡è¯•æ—¶é—´(retry time) ;åº”è¯¥å°äºrefresh time</span><br><span class="line">     è¿‡æœŸæ—¶é—´(expire time);å½“è¾…åŠ©DNSæœåŠ¡å™¨æ— æ³•è”ç³»ä¸Šä¸»DNSæœåŠ¡å™¨æ—¶ï¼Œè¾…åŠ©DNSæœåŠ¡å™¨å¯ä»¥åœ¨å¤šé•¿æ—¶é—´å†…è®¤ä¸ºå…¶ç¼“å­˜æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¾›ç”¨æˆ·æŸ¥è¯¢ã€‚</span><br><span class="line">     netgative answer ttl  ;éæƒå¨åº”ç­”çš„ttlï¼Œç¼“å­˜DNSæœåŠ¡å™¨å¯ä»¥ç¼“å­˜è®°å½•å¤šé•¿æ—¶é—´</span><br><span class="line"> ï¼‰</span><br></pre></td></tr></table></figure><p><strong>(2) NSè®°å½•</strong></p><p>NSï¼šå¯ä»¥æœ‰å¤šæ¡ï¼Œæ¯ä¸€ä¸ªNSè®°å½•ï¼Œå¿…é¡»å¯¹åº”ä¸€ä¸ªAè®°å½•</p><ul><li>name:åŒºåŸŸåç§°ï¼Œé€šå¸¸å¯ä»¥ç®€å†™ä¸º@</li><li>value:DNSæœåŠ¡å™¨çš„FQDN(å¯ä»¥ä½¿ç”¨ç›¸å¯¹åç§°)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@ 600 IN NS ns1</span><br></pre></td></tr></table></figure><p><strong>(3) Aè®°å½•</strong></p><p>Aï¼šåªèƒ½å®šä¹‰åœ¨æ­£å‘åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ä¸­ï¼ˆipv4-&gt;FQDNï¼‰</p><ul><li>name:FQDNï¼ˆå¯ä»¥ä½¿ç”¨ç›¸å¯¹åç§°)</li><li>value:IP</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">www  600(å•ä½s) IN A 10.4.7.11</span><br><span class="line">www  600(å•ä½s) IN A 10.4.7.12</span><br></pre></td></tr></table></figure><p>æ³¨ : å¯ä»¥åšè½®è¯¢</p><p><strong>(4) MXè®°å½•</strong></p><p>MX:é‚®ä»¶äº¤æ¢è®°å½•ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆç”¨çš„ä¸å¤šï¼‰</p><ul><li>name:åŒºåŸŸåç§°ï¼Œç”¨äºæ ‡è¯†smtpæœåŠ¡å™¨</li><li>value:åŒ…å«ä¼˜å…ˆçº§å’ŒFQDN</li><li>ä¼˜å…ˆçº§:0-99ï¼Œæ•°å­—è¶Šå°ï¼Œçº§åˆ«è¶Šé«˜ï¼Œ</li></ul><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="number"> 600 </span>IN MX<span class="number"> 10 </span>mail</span><br><span class="line">@<span class="number"> 600 </span>IN MX<span class="number"> 20 </span>smtp</span><br></pre></td></tr></table></figure><p><strong>(5) CNAMEè®°å½•</strong></p><p>CNAMEï¼šcanonical nameï¼Œåˆ«åï¼ˆFQDN-&gt;FQDNï¼‰</p><ul><li>name ï¼šFQDN</li><li>value :  FQDN</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eshop IN CNAME www</span><br></pre></td></tr></table></figure><p>â‘¤å€¼ï¼šç±»å‹æ‰€å¯¹åº”çš„å€¼ï¼Œå®ƒå¯ä»¥æ˜¯ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªASCIIçš„å­—ç¬¦ä¸²</p><h5 id="3-2-4-2-å®å®šä¹‰ï¼ˆä»¥-å¼€å¤´çš„éƒ¨åˆ†ï¼‰">3.2.4.2 å®å®šä¹‰ï¼ˆä»¥$å¼€å¤´çš„éƒ¨åˆ†ï¼‰</h5><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">TTL 60</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ORIGIN .</span></span><br></pre></td></tr></table></figure><h5 id="3-2-4-3-æ³¨é‡Šï¼ˆä»¥-å¼€å¤´çš„éƒ¨åˆ†ï¼‰">3.2.4.3 æ³¨é‡Šï¼ˆä»¥ ; å¼€å¤´çš„éƒ¨åˆ†ï¼‰</h5><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">; 1 minute</span><br><span class="line">; serial</span><br></pre></td></tr></table></figure><h3 id="3-3-æ­£è§£åŸŸ">3.3 æ­£è§£åŸŸ</h3><h4 id="3-3-1-é…ç½®æ­£è§£åŸŸ">3.3.1 é…ç½®æ­£è§£åŸŸ</h4><p><strong>ï¼ˆ1ï¼‰åœ¨/etc/named.rfc1912.zonesæ–‡ä»¶å†…æœ€ä¸‹ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type  master;</span><br><span class="line">        file  &quot;host.com.zone&quot;;</span><br><span class="line">        allow-update &#123; 192.168.10.222;192.168.10.223; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰åœ¨/var/namedä¸‹åˆ›å»ºhost.com.zoneæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600; 10 minutes</span></span><br><span class="line">@       IN SOAdns.host.com. test.qq.com. (</span><br><span class="line">2021070701 ; serial</span><br><span class="line">10800      ; refresh (3 hours)</span><br><span class="line">900        ; retry (15 minutes)</span><br><span class="line">604800     ; expire (1 week)</span><br><span class="line">86400      ; minimum (1 day)</span><br><span class="line">)</span><br><span class="line">NS   dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN host.com.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60; 1 minute</span></span><br><span class="line">dns1                 A    192.168.10.222</span><br><span class="line">dns                  A    192.168.10.223</span><br></pre></td></tr></table></figure><p>ä¸‰ç§é…ç½®æ–¹å¼ï¼š</p><ul><li>ç”¨å®å®šä¹‰$ORIGIN . <a href="http://xn--host-494ft58rnc9b.com">ä¸‹é¢ç”¨host.com</a></li><li>ä¸ç”¨å®å®šä¹‰ï¼Œä¸‹é¢ç”¨@</li><li>ä¸ç”¨å®å®šä¹‰ï¼Œ<a href="http://xn--host-494ft58rnc9b.com">ä¸‹é¢ç”¨host.com</a>.</li></ul><p><strong>ï¼ˆ3ï¼‰ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶/etc/named.conf</strong></p><p>ä¿®æ”¹optioné€‰é¡¹ä»¥ä¸‹ä¸¤ä¸ªå­—æ®µï¼š</p><ul><li>listen-on port 53 { 192.168.10.222; };   # é»˜è®¤ä¸º 127.0.0.1 ï¼›</li><li>allow-query { any; };  # é»˜è®¤ä¸ºlocalhost</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; 192.168.10.222; &#125;;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦ç”Ÿæ•ˆ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥è‡ªå®šä¹‰åŒºåŸŸé…ç½®</span></span><br><span class="line">named-checkzone host.com. /etc/named/host.com.zone</span><br><span class="line">zone host.com/IN: loaded serial 2021070701</span><br><span class="line">OK</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥ä¸»é…ç½®æ–‡ä»¶</span></span><br><span class="line">named-checkconf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é‡å¯namedè¿›ç¨‹</span></span><br><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰éªŒè¯è§£æç»“æœ</strong></p><p>åœ¨å¦ä¸€å°è®¾å¤‡é…ç½®dnsåœ°å€ä¸º192.168.10.222ï¼ŒéªŒè¯æ˜¯å¦æŒ‰ç…§è§„å®šé…ç½®è¿›è¡Œè§£æã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 ~]# nslookup</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">server</span></span><br><span class="line">Default server: 192.168.10.222</span><br><span class="line">Address: 192.168.10.222#53</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">dns1.host.com</span></span><br><span class="line">Server:         192.168.10.222</span><br><span class="line">Address:        192.168.10.222#53</span><br><span class="line"></span><br><span class="line">Name:   dns1.host.com</span><br><span class="line">Address: 192.168.10.222</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">dns.host.com</span></span><br><span class="line">Server:         192.168.10.222</span><br><span class="line">Address:        192.168.10.222#53</span><br><span class="line"></span><br><span class="line">Name:   dns.host.com</span><br><span class="line">Address: 192.168.10.223</span><br></pre></td></tr></table></figure><h4 id="3-3-2-ç®¡ç†æ­£è§£åŸŸ">3.3.2 ç®¡ç†æ­£è§£åŸŸ</h4><h5 id="3-3-2-1-å¢åŠ èµ„æºè®°å½•">3.3.2.1 å¢åŠ èµ„æºè®°å½•</h5><p>åœ¨ /var/named/host.com.zone ä¸‹æ–°å¢ä¸€æ¡Aè®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /var/named/host.com.zone</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600        ;10 minutes</span></span><br><span class="line">@                       IN SOA  dns.host.com. test.qq.com. (</span><br><span class="line">                                2021070701 ; serial</span><br><span class="line">                                10800      ; refresh (3 hours)</span><br><span class="line">                                900        ; retry (15 minutes)</span><br><span class="line">                                604800     ; expire (1 week)</span><br><span class="line">                                86400      ; minimum (1 day)</span><br><span class="line">                                )</span><br><span class="line">                        NS   dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN host.com.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60 ; 1 minute</span></span><br><span class="line">dns1                    A    192.168.10.222</span><br><span class="line">dns                     A    192.168.10.223</span><br><span class="line">test                    A    192.168.10.55</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 ~]# nslookup</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">server</span></span><br><span class="line">Default server: 192.168.10.222</span><br><span class="line">Address: 192.168.10.222#53</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">test.host.com</span></span><br><span class="line">Server:         192.168.10.222</span><br><span class="line">Address:        192.168.10.222#53</span><br><span class="line"></span><br><span class="line">Name:   test.host.com</span><br><span class="line">Address: 192.168.10.55</span><br></pre></td></tr></table></figure><p>åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ æ­¤å¤„çœç•¥ï¼Œç›´æ¥ä¿®æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶å¹¶é‡å¯namedè¿›ç¨‹å³å¯ã€‚</p><h3 id="3-4-åè§£åŸŸ">3.4 åè§£åŸŸ</h3><h4 id="3-4-1-é…ç½®åè§£åŸŸ">3.4.1 é…ç½®åè§£åŸŸ</h4><p><strong>ï¼ˆ1ï¼‰åœ¨ /etc/named.rfc1912.zonesæ–‡ä»¶å†…æœ€ä¸‹ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;10.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;10.168.192.in-addr.arpa.zone&quot;;</span><br><span class="line">        allow-update &#123; 192.168.10.222;192.168.10.223; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰åœ¨/var/namedä¸‹åˆ›å»ºhost.com.zoneæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# vi /var/named/10.168.192.in-addr.arpa.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600 ;10min</span></span><br><span class="line">@       IN      SOA     dns.host.com    17614902580@163.com (</span><br><span class="line">                        2021071101      ;serial number</span><br><span class="line">                        10600           ;refresh 3 hours</span><br><span class="line">                        900             ;retry 15 minites</span><br><span class="line">                        604800          ;expire 1 week</span><br><span class="line">                        86400           ;minimum 1 day</span><br><span class="line">                        )</span><br><span class="line">                ns      dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN 10.168.192.in-addr.arpa.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60</span></span><br><span class="line">222     PTR     dns1.host.com.</span><br><span class="line">223     PTR     dns2.host.com.</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦ç”Ÿæ•ˆ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥è‡ªå®šä¹‰åŒºåŸŸé…ç½®</span></span><br><span class="line">[root@node1 ~]# named-checkzone 10.168.192.in-addr.arpa.zone /var/named/10.168.192.in-addr.arpa.zone </span><br><span class="line">/var/named/10.168.192.in-addr.arpa.zone:12: ignoring out-of-zone data (222.10.168.192.in-addr.arpa)</span><br><span class="line">/var/named/10.168.192.in-addr.arpa.zone:13: ignoring out-of-zone data (223.10.168.192.in-addr.arpa)</span><br><span class="line">zone 10.168.192.in-addr.arpa.zone/IN: loaded serial 2021071101</span><br><span class="line">OK</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ£€æŸ¥ä¸»é…ç½®æ–‡ä»¶ï¼Œæ— è¾“å‡ºå³æ­£å¸¸ã€‚</span></span><br><span class="line">named-checkconf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é‡å¯namedè¿›ç¨‹</span></span><br><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰éªŒè¯è§£æç»“æœ</strong></p><p>åœ¨å¦ä¸€å°è®¾å¤‡é…ç½®éªŒè¯æ˜¯å¦æŒ‰ç…§è§„å®šé…ç½®è¿›è¡Œè§£æã€‚ä»¥ä¸‹ä¸‰ç§æ–¹å¼éƒ½å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ç§ï¼š</span><br><span class="line">root@node1 ~]# dig -x 192.168.10.222 @192.168.10.222 +short</span><br><span class="line">dns1.host.com.</span><br><span class="line">[root@node1 ~]# dig -x 192.168.10.223 @192.168.10.222 +short </span><br><span class="line">dns2.host.com.</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒç§ï¼š</span><br><span class="line">[root@node1 ~]# dig -t PTR 222.10.168.192.in-addr.arpa. @192.168.10.222 +short    </span><br><span class="line">dns1.host.com.</span><br><span class="line">[root@node1 ~]# dig -t PTR 223.10.168.192.in-addr.arpa. @192.168.10.222 +short </span><br><span class="line">dns2.host.com.</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸‰ç§ï¼š</span><br><span class="line">[root@node1 ~]# nslookup -qt=ptr 192.168.10.222 </span><br><span class="line">*** Invalid option: qt=ptr</span><br><span class="line">222.10.168.192.in-addr.arpa     name = dns1.host.com.</span><br></pre></td></tr></table></figure><h4 id="3-4-2-ç®¡ç†åè§£åŸŸ">3.4.2 ç®¡ç†åè§£åŸŸ</h4><h5 id="3-4-2-1-å¢åŠ èµ„æºè®°å½•">3.4.2.1 å¢åŠ èµ„æºè®°å½•</h5><p>åœ¨ 10.168.192.in-addr.arpa.zoneä¸‹æ–°å¢ä¸€æ¡PTRè®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# cat /var/named/10.168.192.in-addr.arpa.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600 ;10min</span></span><br><span class="line">@       IN      SOA     dns.host.com    17614902580@163.com (</span><br><span class="line">                        2021071101      ;serial number</span><br><span class="line">                        10600           ;refresh 3 hours</span><br><span class="line">                        900             ;retry 15 minites</span><br><span class="line">                        604800          ;expire 1 week</span><br><span class="line">                        86400           ;minimum 1 day</span><br><span class="line">                        )</span><br><span class="line">                ns      dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN 10.168.192.in-addr.arpa.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60</span></span><br><span class="line">222     PTR     dns1.host.com.</span><br><span class="line">223     PTR     dns2.host.com.</span><br><span class="line">224     PTR     dns3.host.com.</span><br><span class="line">[root@node1 ~]# systemctl restart named</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# dig -t PTR 224.10.168.192.in-addr.arpa. @192.168.10.222 +short </span><br><span class="line">dns3.host.com.</span><br><span class="line">[root@node1 ~]# dig -x 192.168.10.224 @192.168.10.222 +short                   </span><br><span class="line">dns3.host.com.</span><br></pre></td></tr></table></figure><p>åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ æ­¤å¤„çœç•¥ï¼Œç›´æ¥ä¿®æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶å¹¶é‡å¯namedè¿›ç¨‹å³å¯ã€‚</p><h3 id="3-5-DNS-å¸¸ç”¨å·¥å…·">3.5 DNS å¸¸ç”¨å·¥å…·</h3><p>å®‰è£…DNSå¸¸ç”¨å·¥å…·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind-utils -y</span><br></pre></td></tr></table></figure><h4 id="3-5-1-nslookup">3.5.1 nslookup</h4><p>nslookupæ˜¯ä¸€ä¸ªæŸ¥è¯¢InternetåŸŸåæœåŠ¡å™¨çš„ç¨‹åºã€‚Nslookupæœ‰ä¸¤ç§æ¨¡å¼ï¼šäº¤äº’å¼å’Œéäº¤äº’å¼ã€‚</p><p><strong>ï¼ˆ1ï¼‰äº¤äº’æ¨¡å¼</strong></p><p>äº¤äº’æ¨¡å¼å…è®¸ç”¨æˆ·æŸ¥è¯¢åç§°æœåŠ¡å™¨ä»¥è·å–æœ‰å…³å„ç§ä¸»æœºå’ŒæœåŠ¡å™¨çš„ä¿¡æ¯åŸŸæˆ–æ‰“å°åŸŸä¸­çš„ä¸»æœºåˆ—è¡¨ã€‚<br>å‘½ä»¤åŸºæœ¬æ ¼å¼:ç›´æ¥ä½¿ç”¨nslookupå‘½ä»¤ ä¸”ä¸å¸¦ä»»ä½•å‚æ•°,å³è¿›å…¥nslookupçš„äº¤äº’å¼æŸ¥è¯¢ç•Œé¢ã€‚<br>å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹:</p><ul><li><p>Name:æ˜¾ç¤ºåŸŸåä¸ºNAMEçš„åŸŸçš„ç›¸å…³ä¿¡æ¯ã€‚</p></li><li><p>Sever NAME:è®¾ç½®æŸ¥è¯¢é»˜è®¤æœåŠ¡å™¨ä¸ºNAMEæ‰€æŒ‡å®šçš„æœåŠ¡å™¨ã€‚</p></li><li><p>Exit:é€€å‡ºnslookupã€‚</p></li></ul><p>Set option :è®¾ç½®nslookupçš„é€‰é¡¹ï¼Œé€‰é¡¹å¦‚ä¸‹:</p><ul><li><p>Domain=name :è®¾ç½®é»˜è®¤åŸŸåä¸ºnameã€‚</p></li><li><p>Root = name :è®¾ç½®æ ¹æœåŠ¡å™¨çš„NAMEã€‚</p></li><li><p>Retry = X :è®¾ç½®é‡è¯•æ¬¡æ•°ä¸ºXã€‚</p></li><li><p>Timeout = X :è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ºXã€‚</p></li><li><p>Type = X :è®¾ç½®æŸ¥è¯¢ç±»å‹ã€‚</p></li><li><p>Querytype = X :ä¸typeå‘½ä»¤-æ ·ã€‚</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# nslookup -qt=CNAME www.163.com</span><br><span class="line">*** Invalid option: qt=CNAME</span><br><span class="line">Server:         114.114.114.114</span><br><span class="line">Address:        114.114.114.114#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.163.com     canonical name = www.163.com.163jiasu.com.</span><br><span class="line">www.163.com.163jiasu.com        canonical name = www.163.com.bsgslb.cn.</span><br><span class="line">www.163.com.bsgslb.cn   canonical name = z163ipv6.v.bsgslb.cn.</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.173</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.176</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.171</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.162</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.169</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.166</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.175</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.164</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.170</span><br><span class="line">Name:   z163ipv6.v.bsgslb.cn</span><br><span class="line">Address: 124.205.198.174</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œtypeå¯ä»¥æ˜¯ä»¥ä¸‹è¿™äº›ç±»å‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>A</td><td>IPv4åœ°å€è®°å½•ï¼ˆç›´æ¥æŸ¥è¯¢é»˜è®¤ç±»å‹ï¼‰</td></tr><tr><td>AAAA</td><td>IPv6åœ°å€è®°å½•</td></tr><tr><td>AFSDB</td><td>Andrewæ–‡ä»¶ç³»ç»Ÿæ•°æ®åº“æœåŠ¡å™¨è®°å½•</td></tr><tr><td>ATMA</td><td>ATMåœ°å€è®°å½•</td></tr><tr><td>CNAME</td><td>åˆ«åè®°å½•</td></tr><tr><td>HINFO</td><td>ç¡¬ä»¶é…ç½®è®°å½•ï¼ŒåŒ…æ‹¬CPUã€æ“ä½œç³»ç»Ÿä¿¡æ¯</td></tr><tr><td>ISDN</td><td>åŸŸåå¯¹åº”çš„ISDNå·ç </td></tr><tr><td>MB</td><td>å­˜æ”¾æŒ‡å®šé‚®ç®±çš„æœåŠ¡å™¨</td></tr><tr><td>MG</td><td>é‚®ä»¶ç»„è®°å½•</td></tr><tr><td>MINFO</td><td>é‚®ä»¶ç»„å’Œé‚®ç®±çš„ä¿¡æ¯è®°å½•</td></tr><tr><td>MR</td><td>æ”¹åçš„é‚®ç®±è®°å½•</td></tr><tr><td>MX</td><td>é‚®ä»¶æœåŠ¡å™¨è®°å½•</td></tr><tr><td>NS</td><td>åå­—æœåŠ¡å™¨è®°å½•</td></tr><tr><td>PTR</td><td>åå‘è®°å½•</td></tr><tr><td>RP</td><td>è´Ÿè´£äººè®°å½•</td></tr><tr><td>RT</td><td>è·¯ç”±ç©¿é€è®°å½•</td></tr><tr><td>SRV</td><td>TCPæœåŠ¡å™¨ä¿¡æ¯è®°å½•</td></tr><tr><td>TXT</td><td>åŸŸåå¯¹åº”çš„æ–‡æœ¬ä¿¡æ¯</td></tr><tr><td>X25</td><td>åŸŸåå¯¹åº”çš„X.25åœ°å€è®°å½•</td></tr></tbody></table><p><strong>ï¼ˆ2ï¼‰éäº¤äº’æ¨¡å¼</strong></p><p>éäº¤äº’æ¨¡å¼ä»…ç”¨äºæ‰“å°åç§°å’Œè¯·æ±‚çš„ä¸»æœºæˆ–åŸŸçš„ä¿¡æ¯ã€‚</p><p>å‘½ä»¤æ ¼å¼ï¼šnslookup [ - option] [{ name | [-server]}]</p><ul><li><p>option å‚æ•°ï¼Œå…·ä½“å¦‚ä¸‹:</p><p>â€‹-timeout=X:æŒ‡æ˜ç³»ç»ŸæŸ¥è¯¢çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚â€™-timeout = 10â€™è¡¨ç¤ºè¶…æ—¶æ—¶é—´æ˜¯10ç§’</p><p>â€‹-retry = X :æŒ‡æ˜ç³»ç»ŸæŸ¥è¯¢å¤±è´¥æ—¶é‡è¯•çš„æ¬¡æ•°ã€‚</p><p>â€‹-querytype = X :æŒ‡æ˜æŸ¥è¯¢çš„èµ„æºè®°å½•ç±»å‹ï¼ŒXå¯ä»¥æ˜¯Aã€PTRã€ MXã€NSç­‰ã€‚</p></li><li><p>Name :è¦æŸ¥è¯¢çš„ç›®æ ‡å¤«åŸŸåæˆ–IPåœ°å€ã€‚</p></li><li><p>server :ä½¿ç”¨æŒ‡å®šçš„DNSæœåŠ¡å™¨è§£æï¼Œè€Œéé»˜è®¤çš„DNSæœåŠ¡å™¨</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# nslookup www.baidu.com</span><br><span class="line">Server:         114.114.114.114</span><br><span class="line">Address:        114.114.114.114#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.baidu.com   canonical name = www.a.shifen.com.</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 182.61.200.6</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 182.61.200.7</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰è¿”å›ä¿¡æ¯è¯´æ˜</strong></p><ul><li><p>æœåŠ¡å™¨ï¼šæœ¬æœºDNSæœåŠ¡å™¨ä¿¡æ¯ã€‚</p></li><li><p>éæƒå¨åº”ç­”ï¼šNon-authoritative answerï¼Œé™¤éå®é™…å­˜å‚¨DNS Serverä¸­è·å¾—åŸŸåè§£æå›ç­”çš„ï¼Œéƒ½ç§°ä¸ºéæƒå¨åº”ç­”ã€‚ä¹Ÿå°±æ˜¯ä»ç¼“å­˜ä¸­è·å–åŸŸåè§£æç»“æœã€‚</p></li><li><p>addressï¼šç›®æ ‡åŸŸåå¯¹åº”ç‰©ç†IPå¯æœ‰å¤šä¸ªã€‚</p></li><li><p>aliaseï¼šç›®æ ‡åŸŸåã€‚</p></li></ul><h4 id="3-5-2-host">3.5.2 host</h4><p><strong>hostå‘½ä»¤æ˜¯å¸¸ç”¨çš„åˆ†æåŸŸåæŸ¥è¯¢å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æµ‹è¯•åŸŸåç³»ç»Ÿå·¥ä½œæ˜¯å¦æ­£å¸¸ã€‚</strong></p><p><strong>è¯­æ³•æ ¼å¼ ï¼š host (é€‰é¡¹) (å‚æ•°)</strong></p><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>-a</td><td>æ˜¾ç¤ºè¯¦ç»†çš„DNSä¿¡æ¯ï¼›</td></tr><tr><td>-c</td><td>æŒ‡å®šæŸ¥è¯¢ç±»å‹ï¼Œé»˜è®¤å€¼ä¸ºâ€œINâ€œï¼›</td></tr><tr><td>-C</td><td>æŸ¥è¯¢æŒ‡å®šä¸»æœºçš„å®Œæ•´çš„SOAè®°å½•ï¼›</td></tr><tr><td>-r</td><td>åœ¨æŸ¥è¯¢åŸŸåæ—¶ï¼Œä¸ä½¿ç”¨é€’å½’çš„æŸ¥è¯¢æ–¹å¼ï¼›</td></tr><tr><td>-t</td><td>æŒ‡å®šæŸ¥è¯¢çš„åŸŸåä¿¡æ¯ç±»å‹ï¼›</td></tr><tr><td>-v</td><td>æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼›</td></tr><tr><td>-w</td><td>å¦‚æœåŸŸåæœåŠ¡å™¨æ²¡æœ‰ç»™å‡ºåº”ç­”ä¿¡æ¯ï¼Œåˆ™æ€»æ˜¯ç­‰å¾…ï¼Œç›´åˆ°åŸŸåæœåŠ¡å™¨ç»™å‡ºåº”ç­”ï¼›</td></tr><tr><td>-W</td><td>æŒ‡å®šåŸŸåæŸ¥è¯¢çš„æœ€é•¿æ—¶é—´ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…åŸŸåæœåŠ¡å™¨æ²¡æœ‰ç»™å‡ºåº”ç­”ä¿¡æ¯ï¼Œåˆ™é€€å‡ºæŒ‡ä»¤ï¼›</td></tr><tr><td>-4</td><td>ä½¿ç”¨IPv4ï¼›</td></tr><tr><td>-6</td><td>ä½¿ç”¨IPv6ï¼›</td></tr></tbody></table><h4 id="3-5-3-dig">3.5.3 dig</h4><p><strong>Digæ˜¯ä¸€ä¸ªåœ¨ç±»Unixå‘½ä»¤è¡Œæ¨¡å¼ä¸‹æŸ¥è¯¢DNSåŒ…æ‹¬NSè®°å½•ï¼ŒAè®°å½•ï¼ŒMXè®°å½•ç­‰ç›¸å…³ä¿¡æ¯çš„å·¥å…·ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è¯­æ³•æ ¼å¼ï¼š</span></span><br><span class="line">dig [@global-server] [domain] [q-type] [q-class] &#123;q-opt&#125;</span><br><span class="line">            &#123;global-d-opt&#125; host [@local-server] &#123;local-d-opt&#125;</span><br><span class="line">            [ host [@local-server] &#123;local-d-opt&#125; [...]]</span><br><span class="line">            </span><br><span class="line">Where:  domain    is in the Domain Name System</span><br><span class="line">        q-class  is one of (in,hs,ch,...) [default: in]</span><br><span class="line">        q-type   is one of (a,any,mx,ns,soa,hinfo,axfr,txt,...) [default:a]</span><br><span class="line">                 (Use ixfr=version for type ixfr)</span><br><span class="line">        q-opt    is one of:</span><br><span class="line">                 -4                  (use IPv4 query transport only)</span><br><span class="line">                 -6                  (use IPv6 query transport only)</span><br><span class="line">                 -b address[#port]   (bind to source address/port)</span><br><span class="line">                 -c class            (specify query class)</span><br><span class="line">                 -f filename         (batch mode)</span><br><span class="line">                 -i                  (use IP6.INT for IPv6 reverse lookups)</span><br><span class="line">                 -k keyfile          (specify tsig key file)</span><br><span class="line">                 -m                  (enable memory usage debugging)</span><br><span class="line">                 -p port             (specify port number)</span><br><span class="line">                 -q name             (specify query name)</span><br><span class="line">                 -t type             (specify query type)</span><br><span class="line">                 -u                  (display times in usec instead of msec)</span><br><span class="line">                 -x dot-notation     (shortcut for reverse lookups)</span><br><span class="line">                 -y [hmac:]name:key  (specify named base64 tsig key)</span><br><span class="line">        d-opt    is of the form +keyword[=value], where keyword is:</span><br><span class="line">                 +[no]aaflag         (Set AA flag in query (+[no]aaflag))</span><br><span class="line">                 +[no]aaonly         (Set AA flag in query (+[no]aaflag))</span><br><span class="line">                 +[no]additional     (Control display of additional section)</span><br><span class="line">                 +[no]adflag         (Set AD flag in query (default on))</span><br><span class="line">                 +[no]all            (Set or clear all display flags)</span><br><span class="line">                 +[no]answer         (Control display of answer section)</span><br><span class="line">                 +[no]authority      (Control display of authority section)</span><br><span class="line">                 +[no]badcookie      (Retry BADCOOKIE responses)</span><br><span class="line">                 +[no]besteffort     (Try to parse even illegal messages)</span><br><span class="line">                 +bufsize=###        (Set EDNS0 Max UDP packet size)</span><br><span class="line">                 +[no]cdflag         (Set checking disabled flag in query)</span><br><span class="line">                 +[no]class          (Control display of class in records)</span><br><span class="line">                 +[no]cmd            (Control display of command line)</span><br><span class="line">                 +[no]comments       (Control display of comment lines)</span><br><span class="line">                 +[no]cookie         (Add a COOKIE option to the request)</span><br><span class="line">                 +[no]crypto         (Control display of cryptographic fields in records)</span><br><span class="line">                 +[no]defname        (Use search list (+[no]search))</span><br><span class="line">                 +[no]dnssec         (Request DNSSEC records)</span><br><span class="line">                 +domain=###         (Set default domainname)</span><br><span class="line">                 +[no]dscp[=###]     (Set the DSCP value to ### [0..63])</span><br><span class="line">                 +[no]edns[=###]     (Set EDNS version) [0]</span><br><span class="line">                 +ednsflags=###      (Set EDNS flag bits)</span><br><span class="line">                 +[no]ednsnegotiation (Set EDNS version negotiation)</span><br><span class="line">                 +ednsopt=###[:value] (Send specified EDNS option)</span><br><span class="line">                 +noednsopt          (Clear list of +ednsopt options)</span><br><span class="line">                 +[no]expire         (Request time to expire)</span><br><span class="line">                 +[no]fail           (Don&#x27;t try next server on SERVFAIL)</span><br><span class="line">                 +[no]header-only    (Send query without a question section)</span><br><span class="line">                 +[no]identify       (ID responders in short answers)</span><br><span class="line">                 +[no]idnin          (Parse IDN names)</span><br><span class="line">                 +[no]idnout         (Convert IDN response)</span><br><span class="line">                 +[no]ignore         (Don&#x27;t revert to TCP for TC responses.)</span><br><span class="line">                 +[no]keepopen       (Keep the TCP socket open between queries)</span><br><span class="line">                 +[no]mapped         (Allow mapped IPv4 over IPv6)</span><br><span class="line">                 +[no]multiline      (Print records in an expanded format)</span><br><span class="line">                 +ndots=###          (Set search NDOTS value)</span><br><span class="line">                 +[no]nsid           (Request Name Server ID)</span><br><span class="line">                 +[no]nssearch       (Search all authoritative nameservers)</span><br><span class="line">                 +[no]onesoa         (AXFR prints only one soa record)</span><br><span class="line">                 +[no]opcode=###     (Set the opcode of the request)</span><br><span class="line">                 +[no]qr             (Print question before sending)</span><br><span class="line">                 +[no]question       (Control display of question section)</span><br><span class="line">                 +[no]rdflag         (Recursive mode (+[no]recurse))</span><br><span class="line">                 +[no]recurse        (Recursive mode (+[no]rdflag))</span><br><span class="line">                 +retry=###          (Set number of UDP retries) [2]</span><br><span class="line">                 +[no]rrcomments     (Control display of per-record comments)</span><br><span class="line">                 +[no]search         (Set whether to use searchlist)</span><br><span class="line">                 +[no]short          (Display nothing except short</span><br><span class="line">                                      form of answer)</span><br><span class="line">                 +[no]showsearch     (Search with intermediate results)</span><br><span class="line">                 +[no]sigchase       (Chase DNSSEC signatures)</span><br><span class="line">                 +[no]split=##       (Split hex/base64 fields into chunks)</span><br><span class="line">                 +[no]stats          (Control display of statistics)</span><br><span class="line">                 +subnet=addr        (Set edns-client-subnet option)</span><br><span class="line">                 +[no]tcp            (TCP mode (+[no]vc))</span><br><span class="line">                 +timeout=###        (Set query timeout) [5]</span><br><span class="line">                 +[no]topdown        (Do +sigchase in top-down mode)</span><br><span class="line">                 +[no]trace          (Trace delegation down from root [+dnssec])</span><br><span class="line">                 +trusted-key=####   (Trusted Key to use with +sigchase)</span><br><span class="line">                 +tries=###          (Set number of UDP attempts) [3]</span><br><span class="line">                 +[no]ttlid          (Control display of ttls in records)</span><br><span class="line">                 +[no]ttlunits       (Display TTLs in human-readable units)</span><br><span class="line">                 +[no]unknownformat  (Print RDATA in RFC 3597 &quot;unknown&quot; format)</span><br><span class="line">                 +[no]vc             (TCP mode (+[no]tcp))</span><br><span class="line">                 +[no]zflag          (Set Z flag in query)</span><br><span class="line">        global d-opts and servers (before host name) affect all queries.</span><br><span class="line">        local d-opts and servers (after host name) affect only that lookup.</span><br><span class="line">        -h                           (print help and exit)</span><br><span class="line">        -v                           (print version and exit)</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# dig -t a dns.host.com @192.168.10.222 +short </span><br><span class="line">192.168.10.223</span><br><span class="line">[root@node1 ~]# dig -t a dns.host.com @192.168.10.222 </span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.5 &lt;&lt;&gt;&gt; -t a dns.host.com @192.168.10.222</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2013</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;dns.host.com.                  IN      A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">dns.host.com.           60      IN      A       192.168.10.223</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">host.com.               600     IN      NS      dns.host.com.</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 192.168.10.222#53(192.168.10.222)</span><br><span class="line">;; WHEN: Tue Jul 13 10:53:19 CST 2021</span><br><span class="line">;; MSG SIZE  rcvd: 71</span><br></pre></td></tr></table></figure><h4 id="3-5-4-nsupdate">3.5.4 nsupdate</h4><p>â€‹nsupdateæ˜¯ä¸€ä¸ªåŠ¨æ€DNSæ›´æ–°å·¥å…·ï¼Œå¯ä»¥å‘DNSæœåŠ¡å™¨æäº¤æ›´æ–°è®°å½•çš„è¯·æ±‚ï¼Œå®ƒå¯ä»¥ä»åŒºæ–‡ä»¶ä¸­æ·»åŠ æˆ–åˆ é™¤èµ„æºè®°å½•ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è¿›è¡Œç¼–è¾‘åŒºæ–‡ä»¶ã€‚</p><p>â€‹ä½¿ç”¨nsupdate ä¸ä¼šæ›´æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ï¼Œè€Œæ˜¯äº§ç”Ÿäº†ä¸€ä¸ªjnlçš„æ•°æ®æ–‡ä»¶ï¼Œä¸èƒ½ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œåªèƒ½ä½¿ç”¨å®Œå…¨åŒºåŸŸæ•°æ®ä¼ é€æŸ¥çœ‹ã€‚</p><p>æ³¨ï¼šjnlæ–‡ä»¶ï¼ˆjournalæ–‡ä»¶ï¼‰æ˜¯BIND9åŠ¨æ€æ›´æ–°çš„æ—¶å€™è®°å½•æ›´æ–°å†…å®¹æ‰€ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ã€‚</p><ul><li>ä¼˜ç‚¹<ul><li>å‘½ä»¤ç®€å•ï¼Œä¾¿äºè®°å¿†</li><li>ä¸ç”¨æ‰‹åŠ¨å˜æ›´SOAçš„serialåºåˆ—å·ï¼Œè‡ªåŠ¨æ»šåŠ¨</li><li>ä¸éœ€è¦é‡å¯/é‡è½½BIND9æœåŠ¡/é…ç½®ï¼Œç”Ÿæ•ˆå¿«</li><li>å¯ä»¥é€šè¿‡é…ç½®aclå®ç°è¿œç¨‹ç®¡ç†</li></ul></li><li>ç¼ºç‚¹<ul><li>jnlæ–‡ä»¶æ— æ³•ä½¿ç”¨æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€</li><li>åªèƒ½ä¾èµ–å®Œå…¨åŒºåŸŸä¼ é€æŸ¥çœ‹æ‰€æœ‰åŒºåŸŸçš„è®°å½•</li><li>æ›´æ–°æ“ä½œå¤æ‚ï¼Œå…ˆåˆ å†å¢</li><li>è¿œç¨‹ç®¡ç†æœ‰å®‰å…¨éšæ‚£ï¼Œéœ€è¦åŠ å¼ºå®¡è®¡</li><li>åŠ¨æ€åŸŸåœ¨rndcç®¡ç†ä¸Šå¤šä¸€æ­¥</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‘é€è¯·æ±‚åˆ°servernameæœåŠ¡å™¨çš„portç«¯å£.å¦‚æœä¸æŒ‡å®šservername,nsupdateå°†æŠŠè¯·æ±‚å‘é€ç»™å½“å‰å»çš„ä¸»DNSæœåŠ¡å™¨.</span></span><br><span class="line">server servername [ port ]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ä¸€æ¡èµ„æºè®°å½•</span></span><br><span class="line">update add domain-name ttl [ class ] type dataâ€¦</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤domain-nameçš„èµ„æºè®°å½•.å¦‚æœæŒ‡å®šäº†<span class="built_in">type</span>å’Œdata,ä»…åˆ é™¤åŒ¹é…çš„è®°å½•ã€‚</span></span><br><span class="line">update delete domain-name [ ttl ] [ class ] [ type [ data... ] ]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†è¦æ±‚ä¿¡æ¯å’Œæ›´æ–°è¯·æ±‚å‘é€åˆ°DNSæœåŠ¡å™¨.ç­‰åŒäºè¾“å…¥ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">send</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€€å‡ºnsupdateå·¥å…·</span></span><br><span class="line">quit</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šåœ¨host.comåŸŸæ·»åŠ Aè®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‰ææ¡ä»¶ï¼šå…è®¸è®¾å¤‡åŠ¨æ€ä¿®æ”¹é…ç½®ï¼Œå°†ä»¥ä¸‹å‚æ•°ä¿®æ”¹ä¸ºanyæˆ–è€…æŒ‡å®šipã€‚</span></span><br><span class="line">allow-update &#123; any; &#125;;</span><br><span class="line"></span><br><span class="line">æ·»åŠ è®°å½•</span><br><span class="line"></span><br><span class="line">[root@dns1 ~]# nsupdate</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">server 192.168.10.222</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">update add aaa.host.com 600 IN A 192.168.10.224</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">send</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">quit</span> </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æµ‹è¯•ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 ~]# dig -t AXFR host.com @192.168.10.222</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.5 &lt;&lt;&gt;&gt; -t AXFR host.com @192.168.10.222</span><br><span class="line">;; global options: +cmd</span><br><span class="line">host.com.               600     IN      SOA     dns.host.com. test.qq.com. 2021070706 10800 900 604800 86400</span><br><span class="line">host.com.               600     IN      NS      dns.host.com.</span><br><span class="line">aaa.host.com.           600     IN      A       192.168.10.224</span><br><span class="line">dns.host.com.           60      IN      A       192.168.10.222</span><br><span class="line">dns1.host.com.          60      IN      A       192.168.10.222</span><br><span class="line">dns2.host.com.          60      IN      A       192.168.10.223</span><br><span class="line">test.host.com.          60      IN      A       192.168.10.55</span><br><span class="line">host.com.               600     IN      SOA     dns.host.com. test.qq.com. 2021070706 10800 900 604800 86400</span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 192.168.10.222#53(192.168.10.222)</span><br><span class="line">;; WHEN: Fri Jul 16 10:09:54 CST 2021</span><br><span class="line">;; XFR size: 8 records (messages 1, bytes 234)</span><br></pre></td></tr></table></figure><h3 id="3-6-DNS-ä¸»è¾…åŒæ­¥">3.6 DNS ä¸»è¾…åŒæ­¥</h3><h4 id="3-6-1ä¸»è¾…åŒæ­¥é…ç½®">3.6.1ä¸»è¾…åŒæ­¥é…ç½®</h4><p><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong></p><ul><li><p>192.168.10.222 <a href="http://dns1.host.com">dns1.host.com</a>ä¸»dnsæœåŠ¡å™¨</p></li><li><p>192.168.10.223 <a href="http://dns2.host.com">dns2.host.com</a>    è¾…dnsæœåŠ¡å™¨</p></li></ul><p><strong>è½¯ä»¶ç‰ˆæœ¬ï¼š</strong></p><ul><li><p>CentOS 7</p></li><li><p>Bind 9</p></li></ul><p><strong>é…ç½®è¦ç‚¹ï¼š</strong></p><ul><li>è¾…åŠ©DNSçš„Bindç‰ˆæœ¬å¿…é¡»å°äºä¸»DNSçš„è½¯ä»¶ç‰ˆæœ¬ã€‚</li><li>ä¸»DNS named.confé‡Œé…ç½®allow-transferå’Œalso-notifyé€‰é¡¹</li><li>è¾…åŠ©DNSä¸»é…ç½®æ–‡ä»¶ä¸­optionæ®µï¼Œmasterfile-format textï¼›</li><li>è¾…åŠ©DNSçš„é…ç½®æ–‡ä»¶é‡Œ type:slave</li><li>å¯åŠ¨è¾…åŠ©DNSæ—¶ï¼Œæ£€æŸ¥å®Œå…¨åŒºåŸŸä¼ é€ï¼šdig -t axfr @ 192.168.10.222</li><li>è¾…åŠ©DNSä¸å¯ä¿®æ”¹ä¸»DNSé…ç½®ã€‚</li></ul><h5 id="3-6-1-1-é…ç½®ä¸»DNS">3.6.1.1 é…ç½®ä¸»DNS</h5><p>ï¼ˆ1ï¼‰é…ç½®ä¸»é…ç½®æ–‡ä»¶</p><p>â€‹æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</p><ul><li>allow-transfer { 192.168.10.223; };  # å…è®¸æœ¬åŒºåŸŸä¼ è¾“è‡³ç‰¹å®šçš„ä»DNSæœåŠ¡å™¨ã€‚</li><li>also-notify { 192.168.10.223; };       # ä¸»åŠ¨é€šçŸ¥ä»åŸŸåæœåŠ¡å™¨ï¼ˆè¾…åŠ©DNSï¼‰è¿›è¡Œæ›´æ–°ï¼Œåœ¨ä¸»åŸŸåæœåŠ¡å™¨è¿›è¡Œæ›´æ–°åï¼Œè€Œä¸éœ€è¦åœ¨ç­‰è§„å®šçš„æ—¶é—´åæ‰é€šçŸ¥ä»åŸŸåæœåŠ¡å™¨è¿›è¡Œæ›´æ–°ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸»è¦ä¿®æ”¹ä»¥ä¸‹å­—æ®µ</span></span><br><span class="line">[root@dns1 ~]# cat /etc/named.conf </span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; 192.168.10.222; &#125;;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line">allow-transfer &#123; 192.168.10.223; &#125;;</span><br><span class="line">        also-notify &#123; 192.168.10.223; &#125;;       </span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰é…ç½®åŒºåŸŸæ•°æ®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åœ¨æœ«å°¾æ·»åŠ æ­£è§£åŸŸå’Œåè§£åŸŸ</span></span><br><span class="line">[root@dns1 ~]# vi /etc/named.rfc1912.zones </span><br><span class="line">vi /etc/named.rfc1912.zones</span><br><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type  master;</span><br><span class="line">        file  &quot;host.com.zone&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">zone &quot;10.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;10.168.192.in-addr.arpa.zone&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰é…ç½®åŒºåŸŸæ•°æ®åº“æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cd /var/named/</span><br><span class="line"></span><br><span class="line">[root@dns1 named]# cat host.com.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600        ;10 minutes</span></span><br><span class="line">@                       IN SOA  dns.host.com. test.qq.com. (</span><br><span class="line">                                2021070705 ; serial</span><br><span class="line">                                10800      ; refresh (3 hours)</span><br><span class="line">                                900        ; retry (15 minutes)</span><br><span class="line">                                604800     ; expire (1 week)</span><br><span class="line">                                86400      ; minimum (1 day)</span><br><span class="line">                                )</span><br><span class="line">                        NS   dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN host.com.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60 ; 1 minute</span></span><br><span class="line">dns1                    A    192.168.10.222</span><br><span class="line">dns2                    A    192.168.10.223</span><br><span class="line">test                    A    192.168.10.55</span><br><span class="line">dns                     A    192.168.10.222</span><br><span class="line"></span><br><span class="line">[root@dns1 named]# cat 10.168.192.in-addr.arpa.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600 ;10min</span></span><br><span class="line">@       IN      SOA     dns.host.com    17614902580@163.com (</span><br><span class="line">                        2021071101      ;serial number</span><br><span class="line">                        10600           ;refresh 3 hours</span><br><span class="line">                        900             ;retry 15 minites</span><br><span class="line">                        604800          ;expire 1 week</span><br><span class="line">                        86400           ;minimum 1 day</span><br><span class="line">                        )</span><br><span class="line">                ns      dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN 10.168.192.in-addr.arpa.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60</span></span><br><span class="line">222     PTR     dns1.host.com.</span><br><span class="line">223     PTR     dns2.host.com.</span><br><span class="line">224     PTR     dns3.host.com.</span><br></pre></td></tr></table></figure><h5 id="3-6-1-2-é…ç½®è¾…åŠ©DNS">3.6.1.2 é…ç½®è¾…åŠ©DNS</h5><p>ï¼ˆ1ï¼‰ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶ /etc/named.confï¼Œä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªä½ç½®ï¼š</p><ul><li>listen-on port 53 { 192.168.10.223; };</li><li>allow-query     { any; };</li><li>masterfile-format text;</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸»è¦ä¿®æ”¹ä»¥ä¸‹å­—æ®µ</span></span><br><span class="line">[root@dns2 ~]<span class="comment"># cat /etc/named.conf</span></span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; 192.168.10.223; &#125;;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line">        masterfile-format text;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰è¾…åŠ©dnsæ£€æŸ¥ä¸»dnså®Œå…¨åŒºåŸŸæ•°æ®ä¼ é€ï¼Œè§£æåˆ—è¡¨å¦‚ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 slaves]#  dig -t AXFR host.com @192.168.10.222</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.5 &lt;&lt;&gt;&gt; -t AXFR host.com @192.168.10.222</span><br><span class="line">;; global options: +cmd</span><br><span class="line">host.com.               600     IN      SOA     dns.host.com. test.qq.com. 2021070705 10800 900 604800 86400</span><br><span class="line">host.com.               600     IN      NS      dns.host.com.</span><br><span class="line">dns.host.com.           60      IN      A       192.168.10.222</span><br><span class="line">dns1.host.com.          60      IN      A       192.168.10.222</span><br><span class="line">dns2.host.com.          60      IN      A       192.168.10.223</span><br><span class="line">test.host.com.          60      IN      A       192.168.10.55</span><br><span class="line">host.com.               600     IN      SOA     dns.host.com. test.qq.com. 2021070705 10800 900 604800 86400</span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 192.168.10.222#53(192.168.10.222)</span><br><span class="line">;; WHEN: Thu Jul 15 16:13:37 CST 2021</span><br><span class="line">;; XFR size: 7 records (messages 1, bytes 214)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰é…ç½®è¾…åŠ©dnsåŒºåŸŸé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ­£è§£åŸŸå’Œåè§£åŸŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åœ¨æœ«å°¾ä¸»è¦æ·»åŠ ä»¥ä¸‹å­—æ®µã€‚</span></span><br><span class="line">[root@dns2 slaves]# cat /etc/named.rfc1912.zones</span><br><span class="line"></span><br><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type slave ;</span><br><span class="line">        masters &#123;192.168.10.222 ;&#125; ;</span><br><span class="line">        file &quot;slaves/host.com.zone&quot; ;</span><br><span class="line">&#125;;</span><br><span class="line">zone &quot;10.168.192.in-addr.arpa&quot; IN &#123;</span><br><span class="line">        type slave;</span><br><span class="line">        masters &#123;192.168.10.222 ;&#125; ;</span><br><span class="line">        file &quot;slaves/10.168.192.in-addr.arpa.zone&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰é‡å¯ä¸»è¾…DNSæœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 ~]# systemctl restart named</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰æŸ¥çœ‹æ˜¯å¦æœ‰åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ä¼ è¾“åˆ°è¾…åŠ©DNS slavesæ–‡ä»¶å¤¹ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dns2 ~]# ls /var/named/slaves/</span><br><span class="line">10.168.192.in-addr.arpa.zone  host.com.zone</span><br></pre></td></tr></table></figure><p>ï¼ˆ6ï¼‰åœ¨ä¸»DNSæµ‹è¯•è¾…DNSæ˜¯å¦å¯ä»¥è§£æã€‚å¦‚æœå¯ä»¥è§£æåˆ™è¯´æ˜ä¸»è¾…é…åŒæ­¥å®Œæˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# dig dns.host.com @192.168.10.223 +short</span><br><span class="line">192.168.10.222</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šæˆ‘ä»¬åªæœ‰åœ¨/etc/named.rfc1912.zoneä¸­æ·»åŠ äº†éœ€è¦åŒæ­¥çš„åŸŸåï¼Œè¾…åŠ©dnsæ‰ä¼šè¿›è¡ŒåŒæ­¥ã€‚ä¸æ·»åŠ çš„åŸŸådnsæ˜¯ä¸ä¼šè¿›è¡ŒåŒæ­¥</strong></p><h3 id="3-7-ç»´æŠ¤é™æ€åŸŸå’ŒåŠ¨æ€åŸŸ">3.7 ç»´æŠ¤é™æ€åŸŸå’ŒåŠ¨æ€åŸŸ</h3><h4 id="3-7-1-é™æ€åŸŸç»´æŠ¤">3.7.1 é™æ€åŸŸç»´æŠ¤</h4><p>å‰ææ¡ä»¶ï¼šåœ¨åŒºåŸŸé…ç½®æ–‡ä»¶ä¸­ æ·»åŠ  allow-update { none; };   è¡¨ç¤ºä¸å…è®¸åŠ¨æ€æ›´æ–°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /etc/named.rfc1912.zones </span><br><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type  master;</span><br><span class="line">        file  &quot;host.com.zone&quot;;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡é…ç½®æ›´æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨å‰æ»šserial numberï¼Œé€šçŸ¥è¾…DNSæ›´æ–°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /var/named/host.com.zone</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600        ;10 minutes</span></span><br><span class="line">@                       IN SOA  dns.host.com. test.qq.com. (</span><br><span class="line">                                2021070705 ; serial number  éœ€è¦æ‰‹åŠ¨+1</span><br><span class="line">                                10800      ; refresh (3 hours)</span><br><span class="line">                                900        ; retry (15 minutes)</span><br><span class="line">                                604800     ; expire (1 week)</span><br><span class="line">                                86400      ; minimum (1 day)</span><br><span class="line">                                )</span><br><span class="line">                        NS   dns.host.com.</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN host.com.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60 ; 1 minute</span></span><br><span class="line">dns1                    A    192.168.10.222</span><br><span class="line">dns2                    A    192.168.10.223</span><br><span class="line">test                    A    192.168.10.55</span><br><span class="line">dns                     A    192.168.10.222</span><br></pre></td></tr></table></figure><h4 id="3-7-2-åŠ¨æ€åŸŸç»´æŠ¤">3.7.2 åŠ¨æ€åŸŸç»´æŠ¤</h4><p>å‰ææ¡ä»¶ï¼šåœ¨åŒºåŸŸé…ç½®æ–‡ä»¶ä¸­ æ·»åŠ  allow-update { acl; };   è¡¨ç¤ºæ ¹æ®aclæŒ‡å®šç­–ç•¥è¿›è¡ŒåŠ¨æ€æ›´æ–°ã€‚å¯å¡«å†™ipåœ°å€ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /etc/named.rfc1912.zones </span><br><span class="line">zone &quot;host.com&quot; IN &#123;</span><br><span class="line">        type  master;</span><br><span class="line">        file  &quot;host.com.zone&quot;;</span><br><span class="line">        allow-update &#123; 192.168.10.222; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡é…ç½®æ›´æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨å‰æ»šserial numberï¼Œè‡ªåŠ¨é€šçŸ¥è¾…DNSæ›´æ–°ã€‚ä½¿ç”¨nsupdateç­‰å·¥å…·è¿›è¡ŒåŠ¨æ€é…ç½®ã€‚</p><h3 id="3-8-rndc-è¿œç¨‹ç®¡ç†DNS">3.8 rndc è¿œç¨‹ç®¡ç†DNS</h3><p>â€‹ä¸€èˆ¬è€Œè¨€ï¼ŒDNSæœåŠ¡å™¨æ˜¯ç¹å¿™çš„ ï¼Œä¸€å°å…¬ç½‘DNSä¼šç»´æŠ¤æˆåƒä¸Šä¸‡ä¸ªzoneï¼ŒnamedæœåŠ¡ä¸ä¼šè½»æ˜“è¢«é‡å¯ï¼Œç™»é™†dnsæœåŠ¡å™¨è¿›è¡Œç»´æŠ¤ä¹Ÿä¼šæœ‰æå¤§çš„é£é™©ã€‚æ‰€ä»¥éœ€è¦å¯¹namedè¿›è¡Œè¿œç¨‹ç®¡ç†ã€‚</p><p>é…ç½®rndcå·¥å…·æ­¥éª¤<br>ï¼ˆ1ï¼‰ç”Ÿæˆç§˜é’¥é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# rndc-confgen -r /dev/urandom</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Start of rndc.conf</span></span><br><span class="line">key &quot;rndc-key&quot; &#123;</span><br><span class="line">        algorithm hmac-md5;</span><br><span class="line">        secret &quot;jZT2IXIGCfk3+mcWgsAkCw==&quot;; #å®¢æˆ·ç«¯ç§˜é’¥</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">options &#123;</span><br><span class="line">        default-key &quot;rndc-key&quot;; #ç§˜é’¥å</span><br><span class="line">        default-server 127.0.0.1;#è¢«ç®¡ç†æœåŠ¡å™¨çš„ç›®æ ‡IPåœ°å€</span><br><span class="line">        default-port 953;#è¿æ¥dnsæœåŠ¡å™¨çš„ç›®æ ‡ç«¯å£</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">End of rndc.conf</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">--------------ä¸Šé¢é’¥åŒ™æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ç®¡ç†ç«¯/etc/rndc.conf  é‡Œ</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">--------------ä¸‹é¢ä¸ºé”æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨è¢«ç®¡ç†ç«¯/etc/named.conf é‡Œ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Use with the following <span class="keyword">in</span> named.conf, adjusting the allow list as needed:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">key <span class="string">&quot;rndc-key&quot;</span> &#123;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      algorithm hmac-md5;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      secret <span class="string">&quot;jZT2IXIGCfk3+mcWgsAkCw==&quot;</span>;<span class="comment">#æœåŠ¡å™¨ç§˜é’¥</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&#125;;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># controls &#123;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      inet 127.0.0.1 port 953 <span class="comment">#æœåŠ¡å™¨ç›‘å¬çš„ipå’Œç«¯å£</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">              allow &#123; 127.0.0.1; &#125; keys &#123; <span class="string">&quot;rndc-key&quot;</span>; &#125;;<span class="comment">#å…è®¸å“ªäº›ipè¿æ¥ç®¡ç†æœ¬æœº</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&#125;;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">End of named.conf</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å°†æ³¨é‡Šéƒ¨åˆ†ç”Ÿæˆçš„æ–‡ä»¶é…ç½®ï¼Œè¿½åŠ å­˜æ”¾åœ¨è¢«ç®¡ç†ç«¯/etc/named.confä¸­ã€‚å¹¶ä¿®æ”¹allowåœ°å€ä¸ºæœ¬åœ°æˆ–è€…è¿œç¨‹ç®¡ç†dnsçš„åœ°å€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /etc/named.conf</span><br><span class="line">key &quot;rndc-key&quot; &#123;</span><br><span class="line">      algorithm hmac-md5;</span><br><span class="line">      secret &quot;jZT2IXIGCfk3+mcWgsAkCw==&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">controls &#123;</span><br><span class="line">      inet 192.168.10.222 port 953</span><br><span class="line">              allow &#123; 192.168.10.222;192.168.10.218; &#125; keys &#123; &quot;rndc-key&quot;; &#125;;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰é…ç½®æœ¬åœ°rndcç®¡ç†dnsï¼ˆå¯é€‰ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# cat /etc/rndc.conf </span><br><span class="line">key &quot;rndc-key&quot; &#123;</span><br><span class="line">        algorithm hmac-md5;</span><br><span class="line">        secret &quot;jZT2IXIGCfk3+mcWgsAkCw==&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">options &#123;</span><br><span class="line">        default-key &quot;rndc-key&quot;;</span><br><span class="line">        default-server 192.168.10.222;</span><br><span class="line">        default-port 953;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰é…ç½®è¿œç¨‹rndcç®¡ç†dns</p><p>a. å®‰è£…rndcå·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind     ##bindåŒ…åŒ…å«rndcå·¥å…·ã€‚</span><br></pre></td></tr></table></figure><p>b. é…ç½®è¿œç¨‹rndcç®¡ç†DNS</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/rndc.conf</span><br><span class="line">key &quot;rndc-key&quot; &#123;</span><br><span class="line">        algorithm hmac-md5;</span><br><span class="line">        secret &quot;jZT2IXIGCfk3+mcWgsAkCw==&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">options &#123;</span><br><span class="line">        default-key &quot;rndc-key&quot;;</span><br><span class="line">        default-server 192.168.10.222;</span><br><span class="line">        default-port 953;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æµ‹è¯•rndcè¿œç¨‹ç®¡ç†</p><p>a. æ£€æŸ¥rndcè¿œç¨‹ç®¡ç†çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rndc status</span><br><span class="line">version: BIND 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.5 (Extended Support Version) &lt;id:7107deb&gt;</span><br><span class="line">running on dns1.host.com: Linux x86_64 5.5.7-1.el7.elrepo.x86_64 #1 SMP Fri Feb 28 12:21:58 EST 2020</span><br><span class="line">boot time: Sun, 18 Jul 2021 08:04:22 GMT</span><br><span class="line">last configured: Sun, 18 Jul 2021 08:04:22 GMT</span><br><span class="line">configuration file: /etc/named.conf</span><br><span class="line">CPUs found: 4</span><br><span class="line">worker threads: 4</span><br><span class="line">UDP listeners per interface: 3</span><br><span class="line">number of zones: 106 (97 automatic)</span><br><span class="line">debug level: 0</span><br><span class="line">xfers running: 0</span><br><span class="line">xfers deferred: 0</span><br><span class="line">soa queries in progress: 0</span><br><span class="line">query logging is OFF</span><br><span class="line">recursive clients: 0/900/1000</span><br><span class="line">tcp clients: 1/150</span><br><span class="line">server is up and running</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure><h4 id="3-8-1-rndc-è¿œç¨‹ç®¡ç†é™æ€åŸŸ">3.8.1 rndc è¿œç¨‹ç®¡ç†é™æ€åŸŸ</h4><p>åœ¨é™æ€åŸŸä¿®æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°åŠ è½½åŒºåŸŸæ•°æ®åº“é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rndc reload whbblog.cn</span><br><span class="line">zone reload up-to-date</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure><h4 id="3-8-2-rndc-è¿œç¨‹ç®¡ç†åŠ¨æ€æ€åŸŸ">3.8.2 rndc è¿œç¨‹ç®¡ç†åŠ¨æ€æ€åŸŸ</h4><p>åœ¨åŠ¨æ€åŸŸä¿®æ”¹åŒºåŸŸæ•°æ®åº“æ–‡ä»¶åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å†»ç»“åŒºåŸŸæ•°æ®åº“æ–‡ä»¶é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rndc  freeze host.com</span><br><span class="line">rndc: &#x27;freeze&#x27; failed: permission denied</span><br><span class="line">Flushing the zone updates to disk failed.</span><br></pre></td></tr></table></figure><p>åŠ è½½å¤±è´¥ æ£€æŸ¥æƒé™é—®é¢˜ï¼Œå‘ç°æ‰€å±ä¸»å’Œæ‰€å±ç»„éƒ½æ˜¯rootï¼Œåº”è¯¥ä¿®æ”¹æƒé™ä¸ºnamedã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# ll /var/named</span><br><span class="line">total 1084</span><br><span class="line">-rw-r--r-- 1 root  root   328 Jul 11 17:53 10.168.192.in-addr.arpa.zone</span><br><span class="line">drwxrwx--- 2 named named   75 Jul 18 03:16 data</span><br><span class="line">drwxrwx--- 2 named named   60 Jul 18 16:04 dynamic</span><br><span class="line">-rw-r--r-- 1 root  root   425 Jul 15 15:42 host.com.zone</span><br><span class="line">-rw-r--r-- 1 named named  698 Jul 16 10:02 host.com.zone.jnl</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 ~]# chown named.named /var/named/host.com.zone</span><br><span class="line">[root@dns1 ~]# chmod 660 /var/named/host.com.zone</span><br></pre></td></tr></table></figure><p>é‡æ–°å†»ç»“åŒºåŸŸæ•°æ®åº“æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rndc  freeze host.com</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½åŒºåŸŸé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rndc thaw host.com  </span><br><span class="line">The zone reload and thaw was successful.</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure><h4 id="3-8-3-rndc-å¸¸ç”¨å‘½ä»¤å’Œé€‰é¡¹">3.8.3 rndc å¸¸ç”¨å‘½ä»¤å’Œé€‰é¡¹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">é€‰é¡¹</span><br><span class="line">-b source-address   ç»‘å®šrndcå®¢æˆ·ç«¯ä½¿ç”¨çš„æºåœ°å€ï¼Œå› ä¸ºä¸€ä¸ªç½‘å¡å¯æœ‰å¤šä¸ªåœ°å€ã€‚</span><br><span class="line">-c config-file  æŒ‡å®šè¿æ¥æ—¶ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„/etc/rndc.confã€‚</span><br><span class="line">-s server     æŒ‡å®šè¦è¿æ¥çš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚</span><br><span class="line">-p port æŒ‡å®šè¦è¿æ¥çš„æœåŠ¡å™¨çš„ç«¯å£ã€‚</span><br><span class="line">-k key-file æŒ‡å®šè¿æ¥æ—¶ä½¿ç”¨çš„å¯†é’¥æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„/etc/rndc.keyã€‚</span><br><span class="line">-y key-id   æŒ‡å®šè¦ä½¿ç”¨çš„å¯†é’¥æ ‡è¯†ï¼Œå¿…é¡»ä¸æœåŠ¡å™¨ä¸€è‡´ã€‚</span><br><span class="line">-v  è¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤åŠŸèƒ½</span><br><span class="line">reload                                    #é‡æ–°åŠ è½½named.confå’Œæ–°çš„åŸŸï¼Œä½†ä¸ä¼šé‡æ–°åŠ è½½å·²å­˜çš„åŸŸæ–‡ä»¶ã€‚</span><br><span class="line">reload zone_name                  #é‡æ–°åŠ è½½æŒ‡å®šåŒºåŸŸ        </span><br><span class="line">        [root@server-11 ~]# rndc  -s 192.168.10.11 reload   base07.com</span><br><span class="line">reconfig                                 #é‡è¯»é…ç½®æ–‡ä»¶å¹¶åŠ è½½æ–°å¢çš„åŒºåŸŸ</span><br><span class="line">querylog                                 #å…³é—­æˆ–å¼€å¯æŸ¥è¯¢æ—¥å¿—ï¼Œ æŸ¥è¯¢æ—¥å¿—ä¼šè¾“å‡ºåˆ°  /var/log/message ,   ç¹å¿™æ—¶ï¼Œå¯èƒ½ä¼šç¬é—´å¢å¤§ message </span><br><span class="line"></span><br><span class="line">dumpdb                                  #å°†é«˜é€Ÿç¼“å­˜è½¬å‚¨åˆ°è½¬å‚¨æ–‡ä»¶ (named_dump.db)</span><br><span class="line">freeze                                      #æš‚åœæ›´æ–°æ‰€æœ‰åŠ¨æ€zone</span><br><span class="line">freeze zone [class [view]]      #æš‚åœæ›´æ–°ä¸€ä¸ªåŠ¨æ€zone</span><br><span class="line">flush   [view]                        #åˆ·æ–°æœåŠ¡å™¨çš„æ‰€æœ‰é«˜é€Ÿç¼“å­˜</span><br><span class="line">flushname name                   #ä¸ºæŸä¸€è§†å›¾åˆ·æ–°æœåŠ¡å™¨çš„é«˜é€Ÿç¼“å­˜</span><br><span class="line">stats                                    #å°†æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯å†™å…¥ç»Ÿè®¡æ–‡ä»¶ä¸­    /var/named/data/named_stats.txt</span><br><span class="line">status                                 #æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€ã€‚</span><br><span class="line">stop                                    #å°†æš‚æŒ‚æ›´æ–°ä¿å­˜åˆ°ä¸»æ–‡ä»¶å¹¶åœæ­¢æœåŠ¡å™¨</span><br><span class="line">halt                                     #åœæ­¢æœåŠ¡å™¨ï¼Œä½†ä¸ä¿å­˜æš‚æŒ‚æ›´æ–°</span><br><span class="line">trace                                   #æ‰“å¼€debug, debugæœ‰çº§åˆ«çš„æ¦‚å¿µï¼Œæ¯æ‰§è¡Œä¸€æ¬¡æå‡ä¸€æ¬¡çº§åˆ«</span><br><span class="line">trace LEVEL                         #æŒ‡å®š debug çš„çº§åˆ«, trace 0 è¡¨ç¤ºå…³é—­debug</span><br><span class="line">notrace                                 #å°†è°ƒè¯•çº§åˆ«è®¾ç½®ä¸º 0</span><br><span class="line">restart                                 #é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼ˆå°šæœªå®ç°ï¼‰</span><br><span class="line">addzone zone  [class [view]]   &#123; zone-options &#125;        #å¢åŠ ä¸€ä¸ªzone</span><br><span class="line">delzone  zone  [class [view]]                                   #åˆ é™¤ä¸€ä¸ªzone</span><br></pre></td></tr></table></figure><h3 id="3-9-viewè§†å›¾åŠŸèƒ½">3.9 viewè§†å›¾åŠŸèƒ½</h3><p>â€‹viewè¯­å¥å®šä¹‰äº†è§†å›¾åŠŸèƒ½ã€‚è§†å›¾æ˜¯BIND9æä¾›çš„å¼ºå¤§çš„æ–°åŠŸèƒ½ï¼Œå…è®¸DNSæœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„ä¸åŒï¼Œæœ‰åŒºåˆ«åœ°å›ç­”DNSæŸ¥è¯¢ï¼Œæ¯ä¸ªè§†å›¾å®šä¹‰äº†ä¸€ä¸ªè¢«ç‰¹å®šå®¢æˆ·ç«¯å­é›†è§åˆ°çš„DNSåç§°ç©ºé—´ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨ä¸€å°ä¸»æœºä¸Šè¿è¡Œå¤šä¸ªå½¢å¼ä¸Šç‹¬ç«‹çš„DNSæœåŠ¡å™¨æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>é…ç½®åœ¨/etc/named.comfè¯­æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">view view_name [class] &#123;</span><br><span class="line">    match-clients &#123; address_match_list &#125; ;</span><br><span class="line">    match-destinations &#123; address_match_list &#125; ;</span><br><span class="line">    match-recursive-only &#123; yes_or_no &#125; ;</span><br><span class="line">    [ view_option; ...]</span><br><span class="line">    [ zone-statistics yes_or_no ; ]</span><br><span class="line">    [ zone_statement; ...]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="3-9-1-viewé…ç½®èŒƒä¾‹">3.9.1 viewé…ç½®èŒƒä¾‹</h4><p><strong>1.æŒ‰ç…§ä¸åŒä¸šåŠ¡ç¯å¢ƒè§£æã€‚</strong></p><p>èƒŒæ™¯ç¯å¢ƒä»‹ç»ï¼š</p><p>ä¸šåŠ¡å®¢æˆ·ç«¯ç¯å¢ƒipï¼š192.168.10.222</p><p>æµ‹è¯•å®¢æˆ·ç«¯ç¯å¢ƒipï¼š192.168.10.223</p><p>å½“ä¸šåŠ¡å®¢æˆ·ç«¯è®¿é—® <a href="http://www.whbblog.cn">www.whbblog.cn</a> è¿”å›aè®°å½•192.168.10.2</p><p>å½“æµ‹è¯•å®¢æˆ·ç«¯è®¿é—® <a href="http://www.whbblog.cn">www.whbblog.cn</a> è¿”å›aè®°å½•192.168.10.3</p><p>a. é…ç½®/etc/named.confæ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">acl &quot;env-test&quot; &#123;</span><br><span class="line">    192.168.10.223;</span><br><span class="line">&#125;;</span><br><span class="line">acl &quot;env-prd&quot; &#123;</span><br><span class="line">    192.168.10.222;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">view &quot;env-test&quot; &#123;</span><br><span class="line">    match-clients &#123; &quot;env-test&quot;; &#125;;</span><br><span class="line">    recursion yes;</span><br><span class="line">    zone &quot;whbblog.cn&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;env-test.whbblog.cn.zone&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">view &quot;env-prd&quot; &#123;</span><br><span class="line">    match-clients &#123; &quot;env-prd&quot;; &#125;;</span><br><span class="line">    recursion yes;</span><br><span class="line">    zone &quot;whbblog.cn&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;env-prd.whbblog.cn.zone&quot;;</span><br><span class="line">    &#125;; </span><br><span class="line">&#125;;</span><br><span class="line">view &quot;default&quot; &#123;</span><br><span class="line">    match-clients &#123; any; &#125;;</span><br><span class="line">    recursion yes;</span><br><span class="line">    zone &quot;.&quot; IN &#123;</span><br><span class="line">type hint;</span><br><span class="line">file &quot;named.ca&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    include &quot;/etc/named.rfc1912.zones&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>b. é…ç½® env-prd.whbblog.cn.zone</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 named]# cat env-prd.whbblog.cn.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN .</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600</span></span><br><span class="line">whbblog.cn      IN      SOA     dns.whbblog.cn  test.qq.com (</span><br><span class="line">                                2021061601  ; serial number</span><br><span class="line">                                10800       ; refresh 3hours</span><br><span class="line">                                900         ; retry 15min </span><br><span class="line">                                604800      ; expire 1week</span><br><span class="line">                                86400       ; Non authoritative  1day</span><br><span class="line">                                )</span><br><span class="line">                        NS      ns1.whbblog.cn</span><br><span class="line">                        NS      ns2.whbblog.cn</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN whbblog.cn.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60</span></span><br><span class="line">www     A       192.168.10.2</span><br><span class="line">ns1     A       192.168.10.222</span><br><span class="line">ns2     A       192.168.10.223</span><br></pre></td></tr></table></figure><p>c. é…ç½® env-test.whbblog.cn.zone</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@dns1 named]# cat env-test.whbblog.cn.zone </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN .</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 600</span></span><br><span class="line">whbblog.cn      IN      SOA     dns.whbblog.cn  test.qq.com (</span><br><span class="line">                                2021061601  ; serial number</span><br><span class="line">                                10800       ; refresh 3hours</span><br><span class="line">                                900         ; retry 15min </span><br><span class="line">                                604800      ; expire 1week</span><br><span class="line">                                86400       ; Non authoritative  1day</span><br><span class="line">                                )</span><br><span class="line">                        NS      ns1.whbblog.cn</span><br><span class="line">                        NS      ns2.whbblog.cn</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ORIGIN whbblog.cn.</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 60</span></span><br><span class="line">www     A       192.168.10.3</span><br><span class="line">ns1     A       192.168.10.222</span><br><span class="line">ns2     A       192.168.10.223</span><br></pre></td></tr></table></figure><p>d. æµ‹è¯•ç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¸šåŠ¡æµ‹ip192.168.10.222æµ‹è¯•ï¼š</span><br><span class="line">[root@dns1 named]# dig -t a www.whbblog.cn @192.168.10.222 +short</span><br><span class="line">192.168.10.2</span><br><span class="line"></span><br><span class="line">åœ¨æµ‹è¯•æµ‹ip192.168.10.223æµ‹è¯•ï¼š</span><br><span class="line">[root@dns2 ~]# dig -t a www.whbblog.cn @192.168.10.222 +short</span><br><span class="line">192.168.10.3</span><br></pre></td></tr></table></figure><p><strong>2.æ™ºèƒ½DNSè§£æï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚åŸç†ä¸€æ ·ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//ç”µä¿¡IPè®¿é—®æ§åˆ¶åˆ—è¡¨</span><br><span class="line">acl &quot;telecomip&quot;&#123; telecom_IP; ... &#125;;</span><br><span class="line">//è”é€šIPè®¿é—®æ§åˆ¶åˆ—è¡¨</span><br><span class="line">acl &quot;netcomip&quot;&#123; netcom_IP; ... &#125;;</span><br><span class="line">view &quot;telecom&quot; &#123;</span><br><span class="line">    match-clients &#123; &quot;telecomip&quot;; &#125;;</span><br><span class="line">    zone &quot;ZONE_NAME&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;ZONE_NAME.telecom.zone&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">view &quot;netcom&quot; &#123;</span><br><span class="line">    match-clients &#123; &quot;netcomip&quot;; &#125;;</span><br><span class="line">    zone &quot;ZONE_NAME&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;ZONE_NAME.netcom.zone&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">view &quot;default&quot; &#123;</span><br><span class="line">    match-clients &#123; any; &#125;;</span><br><span class="line">    zone &quot;ZONE_NAME&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;ZONE_NAME.zone&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="4-å‚è€ƒé“¾æ¥">4. å‚è€ƒé“¾æ¥</h2><p><strong>çœŸè¯šæ„Ÿè°¢ä»¥ä¸‹å„ä½å¤§ä½¬ï¼ï¼ï¼</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/Jaihk662/article/details/80510377</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://www.cnblogs.com/doherasyang/p/14464999.html#11-dns</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/baidu_37964071/article/details/80500825</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/jaihk662/article/details/80509206</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.51cto.com/lihushan/157213</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttp://www.linuxidc.com/Linux/2017-05/143405.htm</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.stanley.wang/</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/8efb3bbc180a</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/qq_27870421/article/details/94125678</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://i4t.com/4982.html</span><br><span class="line"></span><br><span class="line">å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/qq_38228830/article/details/82314584</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> tcpip </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
            <tag> Bind </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 å‹å¥½ç•Œé¢iRuleå®ç°</title>
      <link href="/posts/bb4c615bd6dc.html"/>
      <url>/posts/bb4c615bd6dc.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šå®¢æˆ·è¦æ±‚éœ€è¦åœ¨åœæœºæ›´æ–°æˆ–è€…ç³»ç»Ÿå‡ºæ•…éšœæ—¶è¿›è¡Œé¡µé¢æç¤ºã€ç³»ç»Ÿç»´æŠ¤ä¸­ã€‘  F5åˆ¤æ–­ç³»ç»Ÿå„èŠ‚ç‚¹æ˜¯å¦å­˜æ´»  å¦‚æœå…¨éƒ¨ä¸å­˜æ´»å°±è·³åˆ°æŒ‡å®šæç¤ºé¡µé¢  å¦‚æœè‡³å°‘ä¸€å°å­˜æ´»å°±ä¸ç”¨è·³è½¬åˆ°æç¤ºé¡µé¢ï¼Œæ­£å¸¸è¿›è¡Œè´Ÿè½½ã€‚</strong></p><hr><p><strong>1.æŸ¥çœ‹htmlé¡µé¢å¼•ç”¨çš„å›¾ç‰‡åœ°å€ã€‚åé¢è¦ç”¨åˆ°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/test.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.ä¸Šä¼ å›¾ç‰‡è‡³F5</strong></p><p>å¯¼èˆªåˆ° System â€ºâ€º File Management : iFile List ç‚¹å‡» create ä¸Šä¼ <br><img src="https://www.whbblog.cn/usr/uploads/2021/07/3676165257.png" alt="sorry2.png"></p><p><strong>3.ä¸Šä¼ ç½‘é¡µè‡³F5</strong></p><p>å¯¼èˆªåˆ° System â€ºâ€º File Management : iFile List ç‚¹å‡» create ä¸Šä¼ </p><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/787434308.png" alt="sorry3.png"></p><p><strong>4.åˆ›å»ºå›¾ç‰‡iFile</strong></p><p>â€‹å¯¼èˆªåˆ° Local Traffic â€ºâ€º iRules : iFile List ï¼Œç‚¹å‡» createï¼Œæ³¨æ„Nameå­—æ®µä¸è¦ä½¿ç”¨&quot;.&quot; ï¼Œå°½é‡ä½¿ç”¨å­—ç¬¦ä¸²ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/2792651992.png" alt="sorry4.png"></p><p><strong>5.åˆ›å»º html iFile</strong></p><p>â€‹å¯¼èˆªåˆ° Local Traffic â€ºâ€º iRules : iFile List ï¼Œç‚¹å‡» createï¼Œæ³¨æ„Nameå­—æ®µä¸è¦ä½¿ç”¨&quot;.&quot; ï¼Œå°½é‡ä½¿ç”¨å­—ç¬¦ä¸²ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/2833251308.png" alt="sorry5.png"></p><p><strong>6.åˆ›å»ºiRule</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123; [ active_members <span class="built_in">test</span> ]==0 &#125; &#123;  <span class="comment"># test æ˜¯ poolåç§°</span></span><br><span class="line">         switch -glob [string tolower [HTTP::uri]] &#123;</span><br><span class="line">        <span class="string">&quot;/test.jpg&quot;</span> &#123;  <span class="comment"># /test.jpg æ˜¯ç¬¬ä¸€æ­¥å¼•ç”¨çš„å›¾ç‰‡èµ„æº</span></span><br><span class="line">            HTTP::respond 200 content  [ifile get sorrypagejpg ]  <span class="comment"># è¾“å‡ºå›¾ç‰‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        default &#123;</span><br><span class="line">            HTTP::respond 200 content  [ifile get sorrypagehtml ] <span class="string">&quot;Content-Type&quot;</span> <span class="string">&quot;text/html&quot;</span> <span class="string">&quot;Cache-Control&quot;</span> <span class="string">&quot;no-cache,must-revalidate&quot;</span>        <span class="comment"># è¾“å‡ºç»´æŠ¤ç•Œé¢</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7.è™šæ‹ŸæœåŠ¡è°ƒç”¨ iRule å¹¶å…³é—­pool memberè¿›è¡Œæµ‹è¯•ã€‚</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/147690476.png" alt="sorry7.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> irule </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5å¸¸ç”¨iRule</title>
      <link href="/posts/95071bed9128.html"/>
      <url>/posts/95071bed9128.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç§¯ç´¯å¸¸è§irule</strong></p><hr><h2 id="1-å‹å¥½ç•Œé¢">1. å‹å¥½ç•Œé¢</h2><p><strong>èƒŒæ™¯ï¼šå®¢æˆ·è¦æ±‚éœ€è¦åœ¨åœæœºæ›´æ–°æˆ–è€…ç³»ç»Ÿå‡ºæ•…éšœæ—¶è¿›è¡Œé¡µé¢æç¤ºã€ç³»ç»Ÿç»´æŠ¤ä¸­ã€‘  F5åˆ¤æ–­ç³»ç»Ÿå„èŠ‚ç‚¹æ˜¯å¦å­˜æ´»  å¦‚æœå…¨éƒ¨ä¸å­˜æ´»å°±è·³åˆ°æŒ‡å®šæç¤ºé¡µé¢  å¦‚æœè‡³å°‘ä¸€å°å°±ä¸ç”¨è·³è½¬åˆ°æç¤ºé¡µé¢ï¼Œæ­£å¸¸è¿›è¡Œè´Ÿè½½ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123; [ active_members test_pool ]==0 &#125; &#123;</span><br><span class="line">        HTTP::respond 200 content &#123;</span><br><span class="line">            &lt;html&gt;</span><br><span class="line">            &lt;<span class="built_in">head</span>&gt;</span><br><span class="line">                &lt;title&gt;ç»´æŠ¤ç•Œé¢&lt;/title&gt;</span><br><span class="line">            &lt;/head&gt;</span><br><span class="line">            &lt;body&gt;</span><br><span class="line">                ç•Œé¢ç»´æŠ¤ä¸­ï¼ï¼ï¼</span><br><span class="line">            &lt;/body&gt;</span><br><span class="line">            &lt;/html&gt;</span><br><span class="line">        &#125;     </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-åŸºäºæºåœ°å€è´Ÿè½½å‡è¡¡">2. åŸºäºæºåœ°å€è´Ÿè½½å‡è¡¡</h2><p><strong>èƒŒæ™¯ï¼šå¹¶é…ç½®è´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºåŸºäºæºåœ°å€è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°†192.168.11.0/24çš„IPåœ°å€è®¿é—®åˆ†é…ç»™æœåŠ¡å™¨Aï¼Œå°†192.168.12.0/24çš„IPåœ°å€è®¿é—®åˆ†é…ç»™æœåŠ¡å™¨Bã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [IP::addr [IP::client_addr] equals 192.168.11.0/24] &#125;&#123;</span><br><span class="line">     pool pool_A member 211.136.2.11 80</span><br><span class="line">  &#125; elseif &#123; [IP::addr [IP::client_addr] equals 192.168.12.0/24] &#125; &#123;</span><br><span class="line">     pool pool_A member 211.136.2.12 80</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">when LB_FAILED &#123;</span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;src_shibai&quot;</span></span><br><span class="line">LB::reselect pool pool_A</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-åŸºäºURIè´Ÿè½½å‡è¡¡">3. åŸºäºURIè´Ÿè½½å‡è¡¡</h2><p><strong>ç¤ºä¾‹ä¸€ï¼šé…ç½®è´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºåŸºäºhttp uriè¯·æ±‚å†…å®¹çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°†è¯·æ±‚URLä¸­å«æœ‰â€œtest1â€çš„å‘é€ç»™æœåŠ¡å™¨Aï¼Œå°†è¯·æ±‚URLä¸­å«æœ‰â€œtest2â€çš„å‘é€ç»™æœåŠ¡å™¨Bã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"> <span class="built_in">set</span> url [HTTP::uri]</span><br><span class="line"><span class="keyword">if</span> &#123; ([string match  &#123;*test1*&#125; <span class="variable">$url</span>]) &amp; ([active_members pool_A]==1)&#125; &#123;</span><br><span class="line">     pool pool_A  </span><br><span class="line">     <span class="built_in">log</span> local0.info <span class="string">&quot;[HTTP::uri] -- pool_A&quot;</span></span><br><span class="line">  &#125; elseif &#123; ([string match  &#123;*test2*&#125; <span class="variable">$url</span>]) &amp; ([active_members pool_B]==1)&#125; &#123;</span><br><span class="line">     pool pool_B </span><br><span class="line">     <span class="built_in">log</span> local0.info <span class="string">&quot;[HTTP::uri] -- POOL_B&quot;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pool pool_default </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹äºŒï¼šé…ç½®è´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºåŸºäºhttp uriè¯·æ±‚å†…å®¹çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå¦‚æœURIä¸­ä»¥â€œtest1â€å¼€å§‹å¼€å§‹ï¼Œåˆ™æŠŠæµé‡å‘é€ç»™pool_Aï¼Œå¦‚æœä»¥å…¶ä»–å­—æ®µå¼€å¤´ï¼Œåˆ™æ‹’ç»æ¥å—æµé‡ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [HTTP::uri] starts_with <span class="string">&quot;/test&quot;</span> &#125; &#123;</span><br><span class="line">pool pool_A</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">reject</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-åŸºäºå®¢æˆ·ç«¯æµè§ˆå™¨è´Ÿè½½å‡è¡¡">4. åŸºäºå®¢æˆ·ç«¯æµè§ˆå™¨è´Ÿè½½å‡è¡¡</h2><p><strong>èƒŒæ™¯ï¼šé…ç½®è´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºåŸºäºHTTP Headerä¿¡æ¯çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ŒæŒ‰ç…§HTTPè¯·æ±‚çš„Headerä¸­User-Agentç±»å‹ï¼ˆåŒ…å«ç»ˆç«¯æˆ–æµè§ˆå™¨ç­‰ä¿¡æ¯ï¼‰è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå°†åŒ¹é…User-Agentç±»å‹ä¸ºChromeçš„å‘é€ç»™æœåŠ¡å™¨ç»„Aï¼Œå°†åŒ¹é…User-Agentç±»å‹Firefoxå‘é€ç»™æœåŠ¡å™¨ç»„Bï¼Œå…¶å®ƒHTTPè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ç»„Cã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">  <span class="keyword">if</span> &#123; [HTTP::header User-Agent] contains <span class="string">&quot;Chrome&quot;</span>  &#125; &#123;</span><br><span class="line">    pool pool_A &#125;</span><br><span class="line">elseif &#123; [HTTP::header User-Agent] contains <span class="string">&quot;Firefox&quot;</span>    &#125; &#123;</span><br><span class="line">    pool pool_B &#125;</span><br><span class="line"><span class="keyword">else</span> &#123; pool pool_C &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-httpå¤´éƒ¨æ’å…¥å­—æ®µ">5. httpå¤´éƒ¨æ’å…¥å­—æ®µ</h2><p><strong>èƒŒæ™¯ï¼šéœ€è¦åœ¨httpå¤´éƒ¨æ’å…¥å­—æ®µã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">HTTP::header insert <span class="string">&quot;CLIENT_ORG_IP&quot;</span> [IP::client_addr]</span><br><span class="line"><span class="keyword">if</span> &#123; [HTTP::header CLIENT_ORG_IP] contains [IP::client_addr]  &#125; &#123;</span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;ok&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">HTTP::header insert <span class="string">&quot;CLIENT_ORG_PORT&quot;</span> [TCP::client_port]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-æµé‡é€šè¿‡F5è®¿é—®æµç¨‹">6. æµé‡é€šè¿‡F5è®¿é—®æµç¨‹</h2><p><strong>èƒŒæ™¯:é€šè¿‡IruleæŸ¥çœ‹æµé‡åœ°å€ä¿¡æ¯</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when SERVER_CONNECTED &#123;</span><br><span class="line"><span class="built_in">log</span> local0.info <span class="string">&quot;</span></span><br><span class="line"><span class="string">client connection from [IP::client_addr]:[TCP::client_port]</span></span><br><span class="line"><span class="string">access to [clientside &#123;IP::local_addr&#125;]:[clientside &#123;TCP::local_port&#125;]</span></span><br><span class="line"><span class="string">Snat to [IP::local_addr]:[TCP::local_port]</span></span><br><span class="line"><span class="string">TO server [IP::server_addr]:[TCP::server_port]&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-DNSè§£æ">7. DNSè§£æ</h2><p><strong>èƒŒæ™¯ï¼šåœ¨æœ¬åœ°GTMè¿›è¡ŒAè®°å½•åŸŸåè§£æï¼Œå½“å®¢æˆ·ç«¯æ¥æœ¬åœ°è®¿é—®AAAAè®°å½•ä¿¡æ¯æ—¶ï¼Œåˆ™å»å¦å¤–çš„GTMè¿›è¡ŒAAAAåœ°å€è§£æã€‚å†æŠŠè§£æç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">when DNS_REQUEST &#123;</span><br><span class="line">switch [string toupper [DNS::question <span class="built_in">type</span>]] &#123;</span><br><span class="line"><span class="string">&quot;AAAA&quot;</span> &#123;</span><br><span class="line">        pool v6_dns</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="string">&quot;MX&quot;</span> &#123;</span><br><span class="line">        pool v6_dns</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="string">&quot;TXT&quot;</span> &#123;</span><br><span class="line">        pool v6_dns</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">when DNS_RESPONSE &#123;</span><br><span class="line"><span class="keyword">if</span> &#123;([DNS::header rcode] equals <span class="string">&quot;NXDOMAIN&quot;</span>) or ([DNS::header rcode] equals <span class="string">&quot;REFUSED&quot;</span>) &#125;&#123;</span><br><span class="line">DNS::header rcode NOERROR</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-åŸºäºåŸŸåçš„å‡ºå‘é€‰è·¯è§„åˆ™">8. åŸºäºåŸŸåçš„å‡ºå‘é€‰è·¯è§„åˆ™</h2><p><strong>1. å½“æ¥æ”¶DNSæµé‡æ—¶ï¼Œé…ç½®å‡ºå‘dnsè¯·æ±‚ã€‚å¦‚æœè¯·æ±‚åŸŸåä»¥date_groupä¸­é…ç½®çš„åŸŸåç»“å°¾ï¼Œåˆ™å»pool_dns_testå»è¿›è¡ŒåŸŸåè§£æï¼Œå¦åˆ™å»pool_dns_defaultä¸­è¿›è¡ŒåŸŸåè§£æã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">when DNS_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123;[class match [DNS::question name] ends_with data_group] &#125;  &#123;</span><br><span class="line"><span class="comment">#log local0. &quot;client =[IP::client_addr] NXDOMAIN111 question name: [DNS::question name]&quot;</span></span><br><span class="line">pool pool_dns_test</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">pool pool_dns_default</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2. å½“æ”¶åˆ°DNSå“åº”æ—¶ï¼Œå¦‚æœè¯·æ±‚çš„åŸŸååœ¨domain_testä¸­,å°±æŠŠAè®°å½•æˆ–è€…AAAAè®°å½•ä»¥åŠå¯¹åº”çš„åŸŸåå­˜å‚¨åœ¨test_tableè¡¨ä¸­ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">when DNS_RESPONSE &#123;   </span><br><span class="line"><span class="keyword">if</span>  &#123; ([DNS::question <span class="built_in">type</span>] eq <span class="string">&quot;A&quot;</span>) or ([DNS::question <span class="built_in">type</span>] eq <span class="string">&quot;AAAA&quot;</span>)  &#125;  &#123;</span><br><span class="line"><span class="keyword">if</span> &#123;[class match [DNS::question name] contains domain_test] &#125;  &#123;</span><br><span class="line"><span class="built_in">set</span> rrs [DNS::answer] </span><br><span class="line">    foreach rr <span class="variable">$rrs</span> &#123;</span><br><span class="line">table <span class="built_in">set</span> -subtable <span class="string">&quot;test_teble&quot;</span> [DNS::rdata <span class="variable">$rr</span>] [DNS::question name]         </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3. é…ç½®å‡ºå‘é€‰è·¯ï¼Œå¦‚æœå‡ºå‘è®¿é—®çš„IPåœ¨test_tebleè¡¨ä¸­ï¼Œåˆ™å‡ºå‘æµé‡èµ°pool_testï¼Œå¦åˆ™å‡ºå‘æµé‡èµ°Default_poolã€‚æ³¨æ„ï¼šè®¾å¤‡é…ç½®åœ¨å‡ºå£ä½ç½®ï¼Œè¿˜éœ€è¦æŠŠåœ°å€è½¬æ¢ä¸ºå…¬ç½‘åœ°å€ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [table lookup -subtable <span class="string">&quot;test_teble&quot;</span> [IP::local_addr] ]  != <span class="string">&quot;&quot;</span> &#125;  &#123;</span><br><span class="line">pool pool_test</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">pool Default_pool</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">when LB_SELECTED &#123;</span><br><span class="line"><span class="keyword">if</span>  &#123;  [IP::addr [LB::server addr]  equals 1.1.1.1]&#125; &#123;</span><br><span class="line">snatpool snat_test</span><br><span class="line">&#125;<span class="keyword">else</span> &#123; </span><br><span class="line">snat automap</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-æ¸…ç©ºhttp-uri">9. æ¸…ç©ºhttp uri</h2><p><strong>èƒŒæ™¯ï¼šæ¸…é™¤http uriã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    HTTP::uri <span class="string">&quot;/&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-ä¸€ä¸ªvsè¿è¡Œhttpå’Œhttps">10. ä¸€ä¸ªvsè¿è¡Œhttpå’Œhttps</h2><p><strong>èƒŒæ™¯ï¼šå®¢æˆ·éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªvsï¼Œæ¥æ”¶å¹¶å¤„ç†httpså’Œhttpä¸šåŠ¡è¯·æ±‚ã€‚</strong><br><strong>å®ç°æ–¹å¼ï¼šé…ç½®httpsè™šæ‹ŸæœåŠ¡å¹¶é…ç½®è¯ä¹¦ï¼Œé…ç½®iruleï¼Œhttpsç”¨æˆ·ä½¿ç”¨ç‰¹å®šç½‘æ®µæ­£å¸¸è´Ÿè½½è½¬å‘ï¼Œhttpç”¨æˆ·å…³é—­ssl profileå¹¶è´Ÿè½½è½¬å‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [IP::addr [IP::client_addr] equals 192.168.10.0/24 ] &#125; &#123;</span><br><span class="line">    pool test_side_2</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">SSL::<span class="built_in">disable</span> clientside</span><br><span class="line">pool test_side_1</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="11-å¤šæ¡ç­–ç•¥ä½¿ç”¨switchå‘½ä¸­è§„åˆ™æ¡ˆä¾‹">11. å¤šæ¡ç­–ç•¥ä½¿ç”¨switchå‘½ä¸­è§„åˆ™æ¡ˆä¾‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line">    switch [string toupper [IP::client_addr]] &#123;</span><br><span class="line">        <span class="string">&quot;10.252.149.11&quot;</span> &#123;</span><br><span class="line">            snatpool sp_10.252.255.11</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="string">&quot;10.252.149.12&quot;</span> &#123;</span><br><span class="line">            snatpool sp_10.252.255.12</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="string">&quot;default&quot;</span> &#123;</span><br><span class="line">            drop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="12-irule-é˜²æ­¢x-forwarded-for-æ”»å‡»">12. irule é˜²æ­¢x-forwarded-for æ”»å‡»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="built_in">set</span> xff 0</span><br><span class="line">    foreach x [HTTP::header names] &#123;</span><br><span class="line">        <span class="keyword">if</span> &#123; [string tolower <span class="variable">$x</span>] equals <span class="string">&quot;x-forwarded-for&quot;</span> &#125; &#123;</span><br><span class="line">            <span class="built_in">set</span> xff 1</span><br><span class="line">            HTTP::header remove <span class="variable">$x</span></span><br><span class="line">            HTTP::header insert X-FORWARDED-FOR [IP::client_addr]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">if</span> &#123; <span class="variable">$xff</span> == 0 &#125; &#123;</span><br><span class="line">        HTTP::header insert X-FORWARDED-FOR [IP::client_addr]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="13-httpsä¸šåŠ¡æŒ‡å®šæºåœ°å€è¿ç§»">13. httpsä¸šåŠ¡æŒ‡å®šæºåœ°å€è¿ç§»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123; [IP::addr [IP::client_addr] equals 111.20.119.234/32 ] &#125;&#123;</span><br><span class="line">        pool pool_159_443</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        SSL::<span class="built_in">disable</span> serverside</span><br><span class="line">        pool g_KHDQ3_VSMobileJieru_01</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="14-http-uri-æ›¿æ¢">14. http uri æ›¿æ¢</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">For Example:</span><br><span class="line"></span><br><span class="line">Original HTTP Request</span><br><span class="line">https://www.yourdomain.test/public/page/login.html</span><br><span class="line"></span><br><span class="line">New HTTP Request</span><br><span class="line">https://www.yourdomain.test/private/page/login.html</span><br></pre></td></tr></table></figure><p>æ–¹å¼ä¸€ï¼š Using String Map  : å­—ç¬¦ä¸²æ˜ å°„ä¼šå°† URI ä¸­æ‰¾åˆ°çš„é”®å­—ç¬¦ä¸²çš„æ¯ä¸ªå®ä¾‹æ›¿æ¢ä¸ºæ–°å€¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123;[HTTP::uri] starts_with <span class="string">&quot;/public/&quot;</span>&#125; &#123;</span><br><span class="line">HTTP::uri [string map &#123;<span class="string">&quot;/public/&quot;</span> <span class="string">&quot;/private/&quot;</span>&#125;[HTTP::uri]]</span><br><span class="line">pool pool_web</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šUsing RegSub : ï¼ˆä¸å¸¦ -all é€‰é¡¹ï¼‰å°†ä»…å°† URI ä¸­æ‰¾åˆ°çš„å¯†é’¥å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå®ä¾‹æ›¿æ¢ä¸ºæ–°å€¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123;[HTTP::uri] starts_with <span class="string">&quot;/public/&quot;</span>&#125; &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [regsub -nocase /public/ [HTTP::uri] /private/ new_uri] &gt; 0 &#125; &#123;</span><br><span class="line">HTTP::uri <span class="variable">$new_uri</span></span><br><span class="line">&#125;</span><br><span class="line">pool pool_web</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="15ã€å…è®¸æŒ‡å®šHostè®¿é—®vs">15ã€å…è®¸æŒ‡å®šHostè®¿é—®vs</h2><p>æ–¹å¼ä¸€ï¼šæŒ‡å®š IP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">      <span class="keyword">if</span> &#123; [HTTP::host] !=  <span class="string">&quot;192.168.10.96&quot;</span> &#125; &#123;</span><br><span class="line">        reject</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šæŒ‡å®šåŸŸå</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123;not ([string tolower [HTTP::host]] starts_with <span class="string">&quot;link.it.10086.cn&quot;</span>)&#125;&#123;</span><br><span class="line">       reject</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨data group</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123;not [class match [HTTP::host] equals host_reject ]&#125;&#123;</span><br><span class="line">       reject</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹å¼å››ï¼šä½¿ç”¨data groupå’Œæ­£åˆ™åŒ¹é…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">if</span> &#123;[string tolower [HTTP::host]] ends_with host_reject &#125; &#123;</span><br><span class="line">      pool test_side_1</span><br><span class="line">    &#125; </span><br><span class="line">    elseif &#123;[string tolower [HTTP::host]] matches_regex &#123;^ec\.it\.10086\.cn$&#125;&#125; &#123;</span><br><span class="line">      pool test_side_1</span><br><span class="line">    &#125;</span><br><span class="line">    elseif &#123;[class match [HTTP::host] equals host_reject1 ]&#125; &#123;</span><br><span class="line">      pool test_side_1</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      reject</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="16ã€æ ¹æ®ednså®¢æˆ·ç«¯åœ°å€çš„æœ€åä¸€æ®µå¥‡å¶æ€§é€‰æ‹©pool">16ã€æ ¹æ®ednså®¢æˆ·ç«¯åœ°å€çš„æœ€åä¸€æ®µå¥‡å¶æ€§é€‰æ‹©pool</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">when DNS_REQUEST &#123;</span><br><span class="line">  <span class="keyword">if</span> &#123; [DNS::edns0 exists] &#125; &#123;</span><br><span class="line">    <span class="built_in">set</span> endip [string tolower [getfield [DNS::edns0 subnet address] <span class="string">&quot;.&quot;</span> 4]]</span><br><span class="line">    <span class="keyword">if</span> &#123; [<span class="built_in">expr</span> <span class="variable">$endip</span> % 2] == 0&#125;&#123;</span><br><span class="line">    pool a.com</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">    pool b.com</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> irule </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 iRule åŸºç¡€</title>
      <link href="/posts/c7c5bfcaaef4.html"/>
      <url>/posts/c7c5bfcaaef4.html</url>
      
        <content type="html"><![CDATA[<p><strong>iRuleåŸºç¡€çŸ¥è¯†ç§¯ç´¯</strong></p><hr><h2 id="1-ä»€ä¹ˆæ˜¯iRuleï¼Ÿ">1. ä»€ä¹ˆæ˜¯iRuleï¼Ÿ</h2><p>â€‹ç”¨æœ€ç®€å•çš„æœ¯è¯­æ¥è¯´ï¼ŒiRule æ˜¯é’ˆå¯¹é€šè¿‡ F5 è®¾å¤‡çš„ç½‘ç»œæµé‡æ‰§è¡Œçš„è„šæœ¬ã€‚</p><p>â€‹iRules ä½¿æ‚¨èƒ½å¤Ÿç¼–å†™ç®€å•çš„ã€å…·æœ‰ç½‘ç»œæ„ŸçŸ¥èƒ½åŠ›çš„ä»£ç æ®µï¼Œè¿™äº›ä»£ç æ®µå°†ä»¥å„ç§æ–¹å¼å½±å“æ‚¨çš„ç½‘ç»œæµé‡ã€‚iRules èƒŒåçš„ç†å¿µæ˜¯ä½¿ BIG-IP å‡ ä¹æ— é™çµæ´»ã€‚iRules æ˜¯ä¸€ç§ç½‘ç»œæ„ŸçŸ¥å‹å®šåˆ¶è¯­è¨€ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒåœ¨ç½‘ç»œå±‚éƒ¨ç½²ä¸­æ·»åŠ ä¸šåŠ¡å’Œåº”ç”¨ç¨‹åºé€»è¾‘ã€‚æ‚¨å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ä¸€ä¸ªåŸºæœ¬çš„ iRule ç¤ºä¾‹ï¼Œè¿™å°±æ˜¯ iRule çš„æ ·å­ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—çš„åç»­éƒ¨åˆ†ä¸­æ›´æ·±å…¥åœ°æ¢ç´¢ iRule çš„ä¸åŒéƒ¨åˆ†ã€‚å¦‚æœæ‚¨å¯¹ä»£ç è¿˜ä¸å®Œå…¨æ»¡æ„ï¼Œè¯·ä¸è¦è®©è¿™å“åˆ°æ‚¨ï¼Œéšç€ç³»åˆ—çš„ç»§ç»­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ„å»º iRules æ‰€éœ€çš„æ¯ä¸ªéƒ¨åˆ†ã€‚ç°åœ¨çš„æƒ³æ³•æ˜¯å¼€å§‹è®© iRules çœ‹èµ·æ¥å’Œæ„Ÿè§‰æ›´ç†Ÿæ‚‰ã€‚æˆ‘ä»¬å°†åœ¨åç»­éƒ¨åˆ†ä¸­æ›´æ·±å…¥åœ°æ¢ç´¢ iRule çš„ä¸åŒéƒ¨åˆ†ã€‚</p><h2 id="2-åŸºç¡€çŸ¥è¯†">2. åŸºç¡€çŸ¥è¯†</h2><ul><li>command ï¼ˆå‘½ä»¤ï¼‰</li><li>Variables ï¼ˆå˜é‡ï¼‰</li><li>Conditionals ï¼ˆæ¡ä»¶å¥ï¼‰</li><li>Operators ï¼ˆè¿ç®—ç¬¦ï¼Œåˆ†ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆComparison Operatorsï¼‰å’Œé€»è¾‘è¿ç®—ç¬¦ï¼ˆLogical Operatorsï¼‰ï¼‰</li></ul><h2 id="3-å˜é‡">3. å˜é‡</h2><p>â€‹å˜é‡ï¼Œç®€å•æ¥è¯´å°±æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€æ®µæ•°æ®ã€‚è¿™é€šå¸¸æ˜¯å‡ºäºåœ¨æŸä¸ªæ—¶å€™å†æ¬¡ä½¿ç”¨è¯¥æ•°æ®çš„æ¦‚å¿µï¼Œç„¶ååœ¨è„šæœ¬ä¸­è°ƒç”¨å®ƒä»¥ä½¿ç”¨å®ƒã€‚æ¯ç§è„šæœ¬è¯­è¨€éƒ½æœ‰æŸç§å½¢å¼çš„å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å®ƒä»¬ï¼Œæ‚¨å°†æ„å»ºé™æ€è„šæœ¬æ¥æ‰§è¡Œä¸€æ¬¡æ€§çš„è¿­ä»£ä»»åŠ¡ã€‚å˜é‡æ˜¯å…è®¸åŠ¨æ€ç¼–ç¨‹è€ƒè™‘å¤šä¸ªæ¡ä»¶å’Œç”¨ä¾‹çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚æ— è®ºæ˜¯å­˜å‚¨æ¥è‡ªæ•°å­¦è¿ç®—çš„æ•°æ®ä»¥ä¸æ‰€éœ€ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œæˆ–è€…æ£€æŸ¥æ˜¯å¦å·²ç»æ»¡è¶³ç»™å®šçš„æ¡ä»¶ï¼Œå˜é‡æ˜¯ç¼–ç¨‹ä¸­å‡ ä¹æ‰€æœ‰äº‹ç‰©çš„æ ¸å¿ƒï¼Œåœ¨ç°ä»£ç¼–ç ä¸­ï¼Œæˆ‘ä»¬ç¦»ä¸å¼€å®ƒã€‚æƒ³æ³•å¾ˆç®€å•ï¼Œå–ä¸€æ®µæ•°æ®ï¼Œæ— è®ºæ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²æˆ–â€¦â€¦ä»»ä½•ä¸œè¥¿ï¼Œå¹¶ä»¥å”¯ä¸€çš„åç§°å°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ç„¶åï¼Œç¨åï¼Œæ‚¨å¯ä»¥é€šè¿‡ç®€å•åœ°å¼•ç”¨æ‚¨åˆ›å»ºçš„åç§°æ¥è¡¨ç¤ºè¯¥æ•°æ®çš„å€¼ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥éšæ„ä¿®æ”¹æˆ–åˆ é™¤å˜é‡ã€‚</p><p>â€‹å¯¹äºä»»ä½•å˜é‡ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼šè®¾ç½®å’Œæ£€ç´¢ã€‚è¦åœ¨ Tcl ä¸­è®¾ç½®å˜é‡ï¼Œæ‚¨åªéœ€ä½¿ç”¨ set å‘½ä»¤å¹¶æŒ‡å®šæ‰€éœ€çš„å€¼ã€‚è¿™å¯ä»¥æ˜¯é™æ€æˆ–åŠ¨æ€å€¼ï¼Œä¾‹å¦‚æ•´æ•°æˆ–å‘½ä»¤çš„ç»“æœã€‚ç„¶åå°†æ‰€éœ€å€¼å­˜å‚¨åœ¨å†…å­˜ä¸­å¹¶ä¸æä¾›çš„å˜é‡åç§°ç›¸å…³è”ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Basic variable creation in Tcl</span></span><br><span class="line"><span class="built_in">set</span> <span class="built_in">integer</span> 5</span><br><span class="line"><span class="built_in">set</span> hostname [HTTP::host]</span><br></pre></td></tr></table></figure><p>è¦æ£€ç´¢ä¸ç»™å®šå˜é‡å…³è”çš„å€¼ï¼Œæ‚¨åªéœ€ç›´æ¥å¼•ç”¨è¯¥å˜é‡å³å¯è·å¾—ç»“æœå€¼ã€‚ä¾‹å¦‚ï¼Œâ€œ$integerâ€å’Œâ€œ$hostnameâ€å°†å¼•ç”¨ä¸Šè¿°ç¤ºä¾‹ä¸­çš„å€¼ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Basic variable reference to retrieve and use the value stored in memory</span></span><br><span class="line"><span class="keyword">if</span> &#123;<span class="variable">$integer</span> &gt; 0) &#123;</span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;Host: <span class="variable">$hostname</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>iRules ä¸­æœ‰ä¸¤ç§ä¸»è¦ç±»å‹çš„å˜é‡ï¼Œå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ã€‚</p><p><strong>å±€éƒ¨å˜é‡</strong></p><p>â€‹é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æ‰€æœ‰å˜é‡å‡ä½œä¸º iRule ä¸­çš„å±€éƒ¨å˜é‡åˆ›å»ºã€‚å±€éƒ¨å˜é‡æ„å‘³ç€å®ƒè¢«åˆ†é…äº†ä¸åˆ›å»ºå®ƒçš„ iRule ç›¸åŒçš„èŒƒå›´ã€‚æ‰€æœ‰ iRule æœ¬è´¨ä¸Šéƒ½æ˜¯åŸºäºä¼šè¯çš„ï¼Œå› æ­¤æ‰€æœ‰å±€éƒ¨å˜é‡ä¹Ÿæ˜¯åŸºäºä¼šè¯çš„ã€‚è¿™æ„å‘³ç€ä¼šè¯è§„å®šäº†ç»™å®š iRule çš„å±€éƒ¨å˜é‡å’Œæ•°æ®çš„å†…å­˜ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ connection1 è¿›å…¥å¹¶æ‰§è¡Œ iRuleï¼Œåˆ›å»º 5 ä¸ªå˜é‡ï¼Œè¿™äº›å˜é‡å°†ä»…å­˜åœ¨ç›´åˆ° connection1 å…³é—­å¹¶ä¸”ä¼šè¯åœ¨ BIG-IP ä¸Šç»ˆæ­¢ã€‚å±Šæ—¶ï¼Œåˆ†é…ç»™è¯¥æµçš„å†…å­˜å°†è¢«é‡Šæ”¾ï¼Œå¹¶ä¸”åœ¨å¤„ç†è¯¥ç‰¹å®šä¼šè¯çš„ iRule æ—¶åˆ›å»ºçš„å˜é‡å°†ä¸å†å¯è®¿é—®ã€‚å±€éƒ¨å˜é‡æˆæœ¬ä½ï¼Œæ˜“äºä½¿ç”¨ï¼Œæ‚¨æ°¸è¿œä¸å¿…æ‹…å¿ƒä½¿ç”¨å®ƒä»¬è¿›è¡Œå†…å­˜ç®¡ç†ï¼Œå› ä¸ºå®ƒä»¬ä¼šåœ¨ä¼šè¯ç»ˆæ­¢æ—¶è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>â€‹å±€éƒ¨å˜é‡å°†å  iRules ä¸­å˜é‡ä½¿ç”¨çš„ç»å¤§éƒ¨åˆ†ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œå®ƒä»¬é«˜æ•ˆã€æ˜“äºä½¿ç”¨ä¸”éå¸¸æœ‰ç”¨ã€‚è¿™äº›å¯ä»¥ç›´æ¥è®¾ç½®ï¼Œä½†ä¹Ÿé€šå¸¸æ˜¯æä¾›è¾“å‡ºçš„å‘½ä»¤çš„ç»“æœã€‚è¿˜æœ‰å¤šç§æ–¹æ³•å¯ä»¥åœ¨ iRules ä¸­å¼•ç”¨å˜é‡ã€‚å½“ä½¿ç”¨ç›´æ¥å½±å“å˜é‡çš„å‘½ä»¤æ—¶ï¼Œé€šå¸¸ç”¨â€œ$â€ç›´æ¥å¼•ç”¨å˜é‡åç§°ï¼Œå…¶ä»–æ—¶å€™å¤§æ‹¬å·å…è®¸æ‚¨æ›´æ¸…æ¥šåœ°å®šä¹‰å˜é‡åç§°çš„å¼€å¤´å’Œç»“å°¾ã€‚ä¸€äº›ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Standard variable reference</span></span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;My host is <span class="variable">$host</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Set variable to the output of a particular command using brackets []</span></span><br><span class="line"><span class="built_in">set</span> int [<span class="built_in">expr</span> &#123;5 + 8&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">#Directly manipulating a variable&#x27;s value means no &quot;$&quot;, most times</span></span><br><span class="line">incr int</span><br><span class="line"></span><br><span class="line"><span class="comment">#Bracing can allow you to deliniate between variable name and adjacent characters</span></span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;Today&#x27;s date is the <span class="variable">$&#123;int&#125;</span>th&quot;</span></span><br></pre></td></tr></table></figure><p><strong>å…¨å±€å˜é‡</strong></p><p>â€‹å…¨å±€å˜é‡ç”¨äºè¡¨ç¤ºå­˜åœ¨äºæœ¬åœ°å†…å­˜ç©ºé—´ä¹‹å¤–çš„å˜é‡ã€‚åœ¨ iRules çš„æƒ…å†µä¸‹ï¼Œå­˜åœ¨è¶…å‡ºå•ä¸ªä¼šè¯çº¦æŸçš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘æƒ³å­˜å‚¨æˆ‘çš„æ—¥å¿—æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œå¹¶è®©å®ƒå§‹ç»ˆå¯ç”¨åˆ°é€šè¿‡ BIG-IP æ¥çš„æ¯ä¸ªä¼šè¯ï¼Œè€Œä¸å¿…æ¯æ¬¡ iRule è§¦å‘æ—¶éƒ½é‡æ–°è®¾ç½®è¯¥å˜é‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿé‚£å°†æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚Tcl æœ‰ä¸€ä¸ªæœºåˆ¶æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”å®ƒç›¸å¯¹å®¹æ˜“ä½¿ç”¨ã€‚</p><p>â€‹Tcl ä¸­çš„å…¨å±€å˜é‡å¤„ç†éœ€è¦ä¸€ä¸ªå…±äº«å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬åœ¨ iRules ä¸­åŒ…å«äº†ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œç§°ä¸ºâ€œé™æ€â€å‘½åç©ºé—´ã€‚æ‚¨å¯ä»¥åœ¨ä¸ç ´å CMP çš„æƒ…å†µä¸‹æœ‰æ•ˆåœ°åœ¨é™æ€å‘½åç©ºé—´ä¸­è®¾ç½®é™æ€å…¨å±€å˜é‡æ•°æ®ï¼Œä»è€Œä¸ä¼šé™ä½æ€§èƒ½ã€‚ä¸ºæ­¤ï¼Œåªéœ€è®¾ç½®æ‚¨çš„ static::varname å˜é‡ï¼Œå¯èƒ½åœ¨ RULE_INIT ä¸­ï¼Œå› ä¸ºè¯¥ç‰¹æ®Šäº‹ä»¶ä»…åœ¨åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”é™æ€å˜é‡åœ¨èŒƒå›´å†…æ˜¯å…¨å±€çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¿æŒè®¾ç½®ç›´åˆ°é‡æ–°åŠ è½½é…ç½®ã€‚ä¸€æ—¦è®¾ç½®äº†è¿™äº›å˜é‡ï¼Œæ‚¨å°±å¯ä»¥åƒè°ƒç”¨ä»»ä½• iRule ä¸­çš„ä»»ä½•å…¶ä»–å˜é‡ä¸€æ ·è°ƒç”¨å®ƒä»¬ï¼Œä»–ä»¬å°†æ°¸è¿œå¯ç”¨ã€‚å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Set a static variable value, which will exist until config reload, living outside of the scope of any one particular iRule</span></span><br><span class="line"><span class="built_in">set</span> static::logserver <span class="string">&quot;10.10.1.145&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Reference that static variable just as you would any other variable from within any iRule</span></span><br><span class="line"><span class="built_in">log</span> <span class="variable">$static</span>::logserver <span class="string">&quot;This is a remote log message&quot;</span></span><br></pre></td></tr></table></figure><h2 id="4-æ§åˆ¶ç»“æ„">4. æ§åˆ¶ç»“æ„</h2><p>â€‹æ§åˆ¶ç»“æ„æ˜¯ä¸€ç§é€»è¾‘è¯­å¥ï¼Œå…è®¸æ‚¨è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶æ ¹æ®æ¯”è¾ƒç»“æœæ‰§è¡ŒæŸäº›æ“ä½œã€‚å¦‚æœæ‚¨ä½¿ç”¨è¿‡ä»»ä½•å½¢å¼çš„è„šæœ¬ç¼–å†™è¿‡å®ƒä»¬ï¼Œè¯·ä½¿ç”¨ ifã€elseã€switch ç­‰ã€‚è¿™æ˜¯æ£€æŸ¥å€¼æ˜¯å¦ç­‰äºé›¶ï¼Œç„¶åä»…åœ¨ä¸ºçœŸæ—¶æ‰æ‰§è¡Œä»£ç å—ã€‚</p><p>â€‹å°±åƒæ²¡æœ‰äº‹ä»¶ä¸€æ ·ï¼Œæ ¹æ®ç½‘ç»œæµçš„æƒ…å†µï¼Œæ‚¨å°†æ— æ³•åœ¨é€‚å½“çš„æ—¶é—´æ‰§è¡Œä»£ç ï¼›å¦‚æœæ²¡æœ‰æ§åˆ¶ç»“æ„ï¼Œæ‚¨å°†æ— æ³•åœ¨æŸäº›æƒ…å†µä¸‹æ‰§è¡Œä»£ç çš„é€»è¾‘åˆ†ç¦»ï¼Œè¿™æ˜¾ç„¶å¯¹æ„å»ºåŠŸèƒ½è„šæœ¬è‡³å…³é‡è¦ã€‚</p><p>â€‹åœ¨ iRules ä¸­ï¼Œä½ å°†ä½¿ç”¨çš„ä¸»è¦æ§åˆ¶ç»“æ„æ˜¯â€œifâ€ã€â€œelseâ€ã€â€œelseifâ€ã€â€œswitchâ€å’Œâ€œclassâ€ã€‚</p><p><strong>a. if è¯­å¥</strong></p><p>â€‹ifè¯­å¥ ï¼šåªæœ‰å½“è¯­å¥åŒ…å«çš„ç»“æœä¸ºçœŸæ—¶æ‰æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123;[info exists <span class="variable">$auth</span>]&#125; &#123;</span><br><span class="line">pool auth_pool</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>b. else è¯­å¥</strong></p><p>â€‹å°±elseè¯­å¥å…¶æœ¬èº«è€Œè¨€ï¼Œå®ƒå¹¶ä¸æ˜¯çœŸæ­£çš„æ§åˆ¶ç»“æ„ï¼Œè€Œæ˜¯ if è¯­å¥çš„å¯é€‰è¡¥å……ã€‚å¦‚æœæ²¡å‘½ä¸­ifè¯­å¥ï¼Œåˆ™ä¼šè¿è¡Œelseè¯­å¥ ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123;[info exists <span class="variable">$auth</span>]&#125; &#123;</span><br><span class="line">pool auth_pool</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">pool other_pool</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>c. elseif è¯­å¥</strong></p><p>â€‹å¦‚æœæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œå¤šé‡æ¯”è¾ƒå¹¶æ ¹æ®å“ªä¸ªç»“æœè¢«è¯æ˜æ˜¯æ­£ç¡®çš„è€Œé‡‡å–ä¸åŒçš„è¡ŒåŠ¨å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¤šé€‰é€»è¾‘è¯­å¥ï¼Œå¯èƒ½æ˜¯æœ€å¸¸è§çš„æ–¹å¼æ˜¯ä½¿ç”¨ elseif è¯­å¥ï¼Œå®ƒä¹Ÿä¸ if ç»“æ„ç›¸å…³è”ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123;[info exists <span class="variable">$auth</span>]&#125; &#123;</span><br><span class="line">pool auth_pool</span><br><span class="line">&#125; elseif &#123;[info exists <span class="variable">$secondary</span>]&#125; &#123;</span><br><span class="line">pool secondary_pool</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">default_pool</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>d. switch è¯­å¥</strong></p><p>â€‹switch è¯­å¥å¯ç”¨äºæ›¿æ¢ ifã€if/elseã€if/elseif é“¾ç­‰ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨ã€ç´§å‡‘çš„è¯­å¥ã€‚switch è¯­å¥çš„ä¸€ä¸ªé‡è¦è­¦å‘Šæ˜¯ï¼Œè™½ç„¶å®ƒæ”¯æŒå¤šä¸ªåŒ¹é…é€‰é¡¹ï¼Œä½†å®ƒæ˜¯é’ˆå¯¹å•ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²çš„ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">switch [HTTP::uri] &#123; </span><br><span class="line">â€œ/app1â€ &#123; </span><br><span class="line">pool http_pool1 </span><br><span class="line">&#125; </span><br><span class="line">â€œ/app2â€ &#123; </span><br><span class="line">pool http_pool2 </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ä½¿ç”¨ switch è¯­å¥æ‰§è¡Œçš„ç‰¹åˆ«æœ‰ç”¨çš„æŠ€å·§ã€‚å¦‚æœæ‚¨çš„é€»è¾‘è¯­å¥çœ‹èµ·æ¥åƒâ€œå¦‚æœ URI æ˜¯ /app1ã€/app2 æˆ– /app3ï¼Œåˆ™å‘é€åˆ° http_poolâ€ã€‚æ»¡è¶³è¯¥è¦æ±‚çš„ switch è¯­å¥å°†éå¸¸ç®€å•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">switch [HTTP::uri] &#123;</span><br><span class="line">â€œ/app1â€ â€“</span><br><span class="line">â€œ/app2â€ â€“</span><br><span class="line">â€œ/app3â€ &#123;</span><br><span class="line">pool http_pool</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œé€šè¿‡ switch è¯­å¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<a href="https://www.tcl.tk/man/tcl8.5/tutorial/Tcl16a.html">glob æ ·å¼çš„æ¨¡å¼åŒ¹é…</a>ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">switch -glob [HTTP::uri] &#123;</span><br><span class="line">  <span class="string">&quot;*\\?*ghtml*&quot;</span> &#123;</span><br><span class="line">    <span class="comment">#do work here</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#123;*\?*ghtml*&#125; &#123;</span><br><span class="line">    <span class="comment">#do work here</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šé…ç¬¦ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*  :  åŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦ã€‚</span><br><span class="line">?  :  åŒ¹é…ä»»ä½•å­—ç¬¦çš„ä¸€æ¬¡å‡ºç°ã€‚</span><br><span class="line">\X  :  åæ–œæ åœ¨é€šé…ç¬¦ä¸­è½¬ä¹‰ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œå°±åƒå®ƒåœ¨ Tcl æ›¿æ¢ä¸­æ‰€åšçš„é‚£æ ·ã€‚ä½¿ç”¨åæ–œæ å¯ä»¥è®©æ‚¨ä½¿ç”¨ glob æ¥åŒ¹é…*æˆ–? ã€‚</span><br><span class="line">[...]  :  åŒ¹é…æ‹¬å·å†…ä»»ä½•å­—ç¬¦çš„ä¸€æ¬¡å‡ºç°ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨æ‹¬å·ä¹‹é—´çš„èŒƒå›´æ¥åŒ¹é…ä¸€ç³»åˆ—å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ[az] å°†åŒ¹é…ä»»ä½•å°å†™å­—æ¯ã€‚</span><br></pre></td></tr></table></figure><p><strong>e. class è¯­å¥</strong></p><p>â€‹åœ¨å¤„ç†iRulesçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨iRulesæ‰§è¡Œæ—¶æŸ¥è¯¢ä¸€ä¸ªé™æ€æ•°æ®çš„åˆ—è¡¨ã€‚æ‚¨æ˜¯å¦éœ€è¦ä¸€äº›ç‰¹å®šçš„å®¢æˆ·ç«¯IPåˆ—è¡¨æ£€æŸ¥æ‰€æœ‰çš„ä¼ å…¥è¿æ¥è¯·æ±‚ï¼Ÿæˆ–è®¸æ‚¨æƒ³åŸºäºå¯¹è¯·æ±‚çš„URIçš„ä¸åŒéƒ¨åˆ†çš„å†…å®¹åˆ†é…åˆ°ä¸åŒçš„Poolä¸­å»ï¼Ÿä¸ºäº†æ‰§è¡Œè¯¸å¦‚æ­¤ç±»çš„æ£€æŸ¥/åŠ¨ä½œï¼Œä½ å°±éœ€è¦å®šä¹‰ä¸€ä¸ªç”¨æ¥è¿›è¡Œæœç´¢çš„æ•°æ®åˆ—è¡¨ï¼Œè€Œè¿™ä¸ªåˆ—è¡¨éœ€è¦åœ¨ä¸åŒçš„è¿æ¥ä¹‹é—´éƒ½å¯ä»¥æŒç»­å­˜åœ¨ï¼Œè¿™å°±æ˜¯è®¾è®¡Classçš„çœŸæ­£æ„ä¹‰æ‰€åœ¨äº†ã€‚</p><p>â€‹åœ¨F5ç³»ç»Ÿä¸­æ¶‰åŠåˆ°çš„â€œclassâ€å’Œâ€œData Groupâ€æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ    ç­”ï¼šâ€œData Groupsâ€æ˜¯é€šè¿‡å›¾å½¢ç”¨æˆ·ç•Œé¢æ¥æ ‡è¯†ï¼Œâ€œclassï¼ˆesï¼‰â€åˆ™æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥æ ‡è¯†ã€‚å¯èƒ½æ‚¨ç°åœ¨æœ‰ç‚¹æ··ä¹±ï¼Œä½†æˆ‘å‘ä½ ä¿è¯ï¼Œä»–ä»¬çœŸçš„æ˜¯ç›¸åŒçš„æ„æ€ã€‚</p><p>â€‹åœ¨ä½¿ç”¨iRulesçš„æ—¶å€™ï¼Œä½ å¯ä»¥é€‰æ‹©å››ç§ä¸åŒçš„Classç±»å‹ï¼šstring ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ã€Addressï¼ˆIPåœ°å€ç±»å‹ï¼‰ã€Integerï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€External Fileï¼ˆå¤–éƒ¨æ–‡ä»¶ç±»å‹ï¼‰</p><p>è¯­æ³•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class match [&lt;options&gt;] &lt;item&gt; &lt;operator&gt; &lt;class&gt;</span><br><span class="line">class search [&lt;options&gt;] &lt;class&gt; &lt;operator&gt; &lt;item&gt;</span><br><span class="line">class lookup &lt;item&gt; &lt;class&gt;</span><br><span class="line">class element [&lt;options&gt;] &lt;index&gt; &lt;class&gt;</span><br><span class="line">class <span class="built_in">type</span> &lt;class&gt;</span><br><span class="line">class exists &lt;class&gt;</span><br><span class="line">class size &lt;class&gt;</span><br><span class="line">class names [-nocase] &lt;class&gt; [&lt;pattern&gt;]</span><br><span class="line">class get [-nocase] &lt;class&gt; [&lt;pattern&gt;]</span><br><span class="line">class startsearch &lt;class&gt;</span><br><span class="line">class nextelement [&lt;options&gt;] &lt;class&gt; &lt;search_id&gt;</span><br><span class="line">class anymore &lt;class&gt; &lt;search_id&gt;</span><br><span class="line">class donesearch &lt;class&gt; &lt;search_id&gt;</span><br></pre></td></tr></table></figure><p>æ›´å¤šclassè¯­å¥è¯¦ç»†ä¿¡æ¯ï¼š<a href="https://clouddocs.f5.com/api/irules/class.html">https://clouddocs.f5.com/api/irules/class.html</a></p><p><strong>f. æ§åˆ¶è¯­å¥ç»“æ„é€‰æ‹©</strong></p><ul><li><p>å¦‚æœæ˜¯æœ€å¸¸ç”¨çš„åŸå› ã€‚å¦‚æœè¦è¿›è¡Œ 1-3 æ¬¡æ¯”è¾ƒï¼Œif æˆ– if/else(if) å¯èƒ½æ˜¯æœ€åˆé€‚çš„ï¼Œä¹Ÿæœ€å®¹æ˜“ä½¿ç”¨å’Œç†è§£ã€‚</p></li><li><p>å¦‚æœæ‚¨è¦è¿›è¡Œ 3-10 æ¬¡æ¯”è¾ƒï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨ switch è¯­å¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä»¬å…·æœ‰æ›´é«˜çš„æ€§èƒ½ã€æ›´å®¹æ˜“é˜…è¯»å’Œæ›´ç®€å•çš„è°ƒè¯•ã€‚</p></li><li><p>è¿›è¡Œ 10-15 ä¸ªæ¡ç›®æ¯”è¾ƒï¼Œæ‚¨åº”è¯¥ä½¿ç”¨æ•°æ®ç»„å’Œ class å‘½ä»¤ã€‚</p></li></ul><h2 id="5-å¸¸è§è¿ç®—ç¬¦">5. å¸¸è§è¿ç®—ç¬¦</h2><table><thead><tr><th style="text-align:left">è¿ç®—ç¬¦</th><th style="text-align:left">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left">== ï¼› equal  ï¼› eq</td><td style="text-align:left">ç­‰äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">!=  ;  not equal  ;  ne</td><td style="text-align:left">ä¸ç­‰äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">&lt;  ;  lt</td><td style="text-align:left">å°äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">&gt;  ;  gt</td><td style="text-align:left">å¤§äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">&lt;=  ;  le</td><td style="text-align:left">å°äºç­‰äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">&gt;=  ;  ge</td><td style="text-align:left">å¤§äºç­‰äºï¼Œå¯¹æ‰€æœ‰æ“ä½œæ•°ç±»å‹éƒ½æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">!</td><td style="text-align:left">å¦å®š</td></tr><tr><td style="text-align:left">&amp;&amp;  ï¼›  and</td><td style="text-align:left">é€»è¾‘ä¸ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½éé›¶ï¼Œåˆ™äº§ç”Ÿ 1 ç»“æœï¼Œå¦åˆ™äº§ç”Ÿ 0ã€‚ä»…å¯¹å¸ƒå°”å’Œæ•°å­—ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹ï¼‰æ“ä½œæ•°æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">or</td><td style="text-align:left">é€»è¾‘æˆ–ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸ºé›¶ï¼Œåˆ™ç»“æœä¸º 0ï¼Œå¦åˆ™ä¸º 1ã€‚ä»…å¯¹å¸ƒå°”å’Œæ•°å­—ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹ï¼‰æ“ä½œæ•°æœ‰æ•ˆã€‚</td></tr><tr><td style="text-align:left">x?y:z</td><td style="text-align:left">If-then-elseï¼Œå¦‚åœ¨ C ä¸­ã€‚å¦‚æœ x è®¡ç®—ä¸ºéé›¶ï¼Œåˆ™ç»“æœæ˜¯ y çš„å€¼ã€‚å¦åˆ™ç»“æœæ˜¯ z çš„å€¼ã€‚x æ“ä½œæ•°å¿…é¡»å…·æœ‰å¸ƒå°”å€¼æˆ–æ•°å€¼ã€‚</td></tr><tr><td style="text-align:left">contains</td><td style="text-align:left">æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left">ends_with</td><td style="text-align:left">æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥å¦ä¸€ä¸ªå­—ç¬¦ä¸²ç»“å°¾</td></tr><tr><td style="text-align:left">starts_with</td><td style="text-align:left">æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥å¦ä¸€ä¸ªå­—ç¬¦ä¸²å¼€å§‹</td></tr><tr><td style="text-align:left">matches</td><td style="text-align:left">æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸å¦ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ã€‚</td></tr><tr><td style="text-align:left">matches_glob</td><td style="text-align:left">åœ¨æ¯”è¾ƒä¸­å®ç° glob æ ·å¼åŒ¹é…ã€‚</td></tr><tr><td style="text-align:left">matches_regex</td><td style="text-align:left">æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</td></tr><tr><td style="text-align:left">switch</td><td style="text-align:left">æ ¹æ®ç»™å®šçš„å€¼è¯„ä¼°å¤šä¸ªè„šæœ¬ä¹‹ä¸€ã€‚</td></tr></tbody></table><h2 id="6-åˆ†éš”ç¬¦">6. åˆ†éš”ç¬¦</h2><p><strong>a. ç©ºæ ¼</strong></p><p>â€‹åœ¨ tcl ä¸­ï¼ŒåŸºæœ¬ä¸Šä¸€åˆ‡éƒ½æ˜¯å‘½ä»¤ã€‚å‘½ä»¤æœ‰åç§°ã€é€‰é¡¹å’Œå‚æ•°ã€‚ç©ºæ ¼ï¼ˆç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ï¼‰ç”¨äºåˆ†éš”å‘½ä»¤åç§°åŠå…¶é€‰é¡¹å’Œå‚æ•°ï¼Œå®ƒä»¬åªæ˜¯å­—ç¬¦ä¸²ã€‚æ¢è¡Œç¬¦æˆ–åˆ†å·ç”¨äºç»ˆæ­¢å‘½ä»¤ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;iRule, Do you?&quot;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Command</th><th>log local0. â€œiRule. Do you?â€</th></tr></thead><tbody><tr><td>Command Name</td><td>log</td></tr><tr><td>Command Parameter</td><td>local0.</td></tr><tr><td>Command Parameter</td><td>â€œiRule. Do you?â€</td></tr></tbody></table><p>ç©ºæ ¼å­—ç¬¦è¿˜ç”¨äºåˆ†éš” tcl åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚</p><p><strong>b. åŒå¼•å· â€œâ€</strong></p><p>â€‹ä¸€å¯¹åŒå¼•å· &quot; &quot; ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦å’Œåˆ†å·ï¼Œéƒ½è¢«åˆ†ç»„å¹¶è§£é‡Šä¸ºä¸€ä¸ªè¿ç»­çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œæœ€å¸¸ç”¨çš„ iRules å‘½ä»¤ä¹‹ä¸€ HTTP::redirect å°†å®Œå…¨é™å®šçš„ URL ä½œä¸ºå‚æ•°ï¼Œåº”è¯¥ç”¨åŒå¼•å·å¼•èµ·æ¥ï¼š<code>HTTP::redirect &quot;http://host.domain.com/uri&quot;</code></p><p>â€‹è¡¨è¾¾å¼ä¸­ä½œä¸ºæ“ä½œæ•°çš„å­—ç¬¦ä¸²å¿…é¡»ç”¨åŒå¼•å·æˆ–å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œä»¥é¿å…è¢«è§£é‡Šä¸ºæ•°å­¦å‡½æ•°ã€‚</p><p><strong>c. æ–¹æ‹¬å· []</strong></p><p>â€‹åµŒå¥—å‘½ä»¤ç”±æ–¹æ‹¬å· [ ] åˆ†éš”ï¼Œæ‹¬å·ä¹‹é—´çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è§†ä¸ºä¸€ä¸ªå‘½ä»¤ï¼Œè§£é‡Šå™¨é€šè¿‡ä¸¢å¼ƒæ‹¬å·å¹¶ç”¨åµŒå¥—å‘½ä»¤çš„ç»“æœæ›¿æ¢å®ƒä»¬ä¹‹é—´çš„æ‰€æœ‰å†…å®¹æ¥é‡å†™å®ƒåµŒå¥—çš„å‘½ä»¤ã€‚ï¼ˆå¦‚æœæ‚¨ç¼–å†™è¿‡ä»»ä½• shell è„šæœ¬ï¼Œè¿™å¤§è‡´ç›¸å½“äºç”¨åå¼•å·åŒ…å›´å‘½ä»¤ï¼Œå°½ç®¡ tcl å…è®¸å¤šä¸ªåµŒå¥—ã€‚ï¼‰</p><p>â€‹åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±æ–¹æ‹¬å·åˆ†éš”çš„å‘½ä»¤åœ¨æœ€ç»ˆæ‰§è¡Œä¹‹å‰è¢«è¯„ä¼°å¹¶æ›¿æ¢åˆ° log å‘½ä»¤ä¸­ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;[IP::client_addr]:[TCP::client_addr] requested [HTTP::uri]&quot;</span></span><br></pre></td></tr></table></figure><p>â€‹å½“è§£é‡Šå™¨è¯•å›¾å°†æ–¹æ‹¬å·å†…çš„å­—ç¬¦ä¸²è§£é‡Šä¸ºå‘½ä»¤æ—¶ï¼Œæ–¹æ‹¬å·å†…åŒ…å«çš„å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆçš„ tcl æˆ– iRule å‘½ä»¤ï¼Œå°†äº§ç”Ÿâ€œæœªå®šä¹‰è¿‡ç¨‹â€é”™è¯¯ã€‚</p><p>*<em>d. åæ–œæ è½¬ä¹‰ *</em></p><p>â€‹åæ–œæ è½¬ä¹‰æ˜¯é€šè¿‡åœ¨å®ƒä»¬å‰é¢åŠ ä¸Šåæ–œæ æ¥è¡¨ç¤ºå…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼ˆ $ {} [] &quot; ç­‰ï¼‰ã€‚æ­¤ç¤ºä¾‹ç”Ÿæˆâ€œæœªå®šä¹‰è¿‡ç¨‹ï¼š0-9â€é”™è¯¯ï¼Œå› ä¸ºé‡Œé¢çš„å­—ç¬¦ä¸²â€œ0-9â€ [ ] è¢«è§£é‡Šä¸ºä¸€ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123; [HTTP::uri]matches_regex <span class="string">&quot;[0-9]&#123;2,3&#125;&quot;</span>&#125; &#123; </span><br><span class="line">TCL error: undefined procedure: 0-9 <span class="keyword">while</span> execution <span class="string">&quot;[0-9]</span></span><br></pre></td></tr></table></figure><p>æ­¤ç¤ºä¾‹æŒ‰é¢„æœŸå·¥ä½œï¼Œå› ä¸ºæ–¹æ‹¬å·å·²è¢«è½¬ä¹‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123; <span class="variable">$urimatches_regex</span> <span class="string">&quot;\[0-9\]&#123;2,3&#125;&quot;</span> &#125; &#123; </span><br><span class="line">  body </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¹Ÿæœ‰æ•ˆï¼Œå› ä¸ºå¤§æ‹¬å·å†…æ–¹æ‹¬å·çš„å†…å®¹ä¸æ˜¯ä½œä¸ºå‘½ä»¤è®¡ç®—çš„ï¼ˆè€Œä¸”å®ƒä¹Ÿæ›´å…·å¯è¯»æ€§ï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &#123; <span class="variable">$urimatches_regex</span> &#123;[0-9]&#123;2,3&#125;&#125;&#125;&#123; </span><br><span class="line">  body </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆä¸Šè¿° 2 ç§æ–¹æ³•åœ¨æ€§èƒ½æ–¹é¢å¤§è‡´ç›¸å½“ã€‚ï¼‰</p><p>â€‹åæ–œæ æ›¿æ¢çš„å¦ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯è¡Œç»§ç»­ï¼šåœ¨å¤šè¡Œä¸Šç»§ç»­é•¿å‘½ä»¤ã€‚å½“ä¸€è¡Œä»¥åæ–œæ ç»“å°¾æ—¶ï¼Œè§£é‡Šå™¨å°†å®ƒå’Œå®ƒåé¢çš„æ¢è¡Œç¬¦ä»¥åŠä¸‹ä¸€è¡Œå¼€å¤´çš„æ‰€æœ‰ç©ºæ ¼è½¬æ¢ä¸ºå•ä¸ªç©ºæ ¼å­—ç¬¦ï¼Œç„¶åå°†è¿æ¥çš„è¡Œä½œä¸ºå•ä¸ªå‘½ä»¤è¿›è¡Œè®¡ç®—ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;[IP::client_addr]:[TCP::client_addr] requested [HTTP::uri] at [clock \</span></span><br><span class="line"><span class="string">  seconds]. Request headers were [HTTP::header names].  Method was [HTTP::method]&quot;</span></span><br></pre></td></tr></table></figure><p><strong>e. å°æ‹¬å· ï¼ˆï¼‰</strong></p><p>â€‹iRules ä¸­æ‹¬å· ( ) çš„æœ€å¸¸è§ç”¨é€”æ˜¯æ‰§è¡Œå¦å®šæ¯”è¾ƒã€‚</p><p>æ­£ç¡®ç”¨æ³•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> x xxx</span><br><span class="line"><span class="keyword">if</span> &#123; !(<span class="variable">$x</span> == 3) &#125; &#123;</span><br><span class="line">  <span class="built_in">log</span> <span class="string">&quot;no match&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">log</span> <span class="string">&quot;match</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>é”™è¯¯ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> x xxx</span><br><span class="line"><span class="keyword">if</span> &#123; !<span class="variable">$x</span> == 3 &#125; &#123;</span><br><span class="line">  <span class="built_in">log</span> <span class="string">&quot;no match&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">log</span> <span class="string">&quot;match&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>f. å¤§æ‹¬å· {}</strong></p><p>â€‹å¤§æ‹¬å·æ˜¯ tcl å’Œ iRules ä¸­ä½¿ç”¨æœ€å¹¿æ³›ä¸”å¯èƒ½ç†è§£æœ€å°‘çš„åˆ†ç»„å½¢å¼ã€‚å®ƒä»¬å¯èƒ½ä¼šä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒä»¬ç”¨äºè®¸å¤šä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œä½†åŸºæœ¬ä¸Šå¤§æ‹¬å·å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ï¼Œæˆ–ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤çš„æ¢è¡Œåˆ†éš”åˆ—è¡¨ã€‚æˆ‘å°†å°è¯•ä¸¾ä¾‹è¯´æ˜åœ¨ iRules ä¸­å¤§æ‹¬å·å¸¸ç”¨çš„æ¯ç§ä¸åŒæ–¹å¼ã€‚</p><ul><li><p>å¸¦åˆ—è¡¨çš„å¤§æ‹¬å·</p><p>â€‹åˆ—è¡¨ä¸€èˆ¬æ˜¯ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ç©ºæ ¼åˆ†éš”çš„å•è¯ã€‚åˆ—è¡¨å’Œå¤§æ‹¬å·ä¸€æ ·ï¼Œå¯ä»¥åµŒå¥—ã€‚æ­¤ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªåŒ…å« 3 ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ä¸€ä¸ªåŒ…å« 2 ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼š</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123; &#123; &#123;ab&#125;</span><span class="language-xml"> </span><span class="template-variable">&#123;cd&#125;</span><span class="language-xml"> &#125; </span><span class="template-variable">&#123; &#123;ef&#125;</span><span class="language-xml"> </span><span class="template-variable">&#123;gh&#125;</span><span class="language-xml"> &#125; </span><span class="template-variable">&#123; &#123;ij&#125;</span><span class="language-xml"> </span><span class="template-variable">&#123;kl&#125;</span><span class="language-xml"> &#125; &#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>å¸¦å­å‘½ä»¤åˆ—è¡¨çš„å¤§æ‹¬å·</p><p>â€‹ä¸€äº›å‘½ä»¤ä½¿ç”¨å¤§æ‹¬å·æ¥åˆ†éš”å­å‘½ä»¤åˆ—è¡¨ã€‚â€œwhenâ€å‘½ä»¤å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼šåœ¨æ¯ä¸ª iRule ä¸­ï¼Œå¤§æ‹¬å·ç”¨äºåˆ†éš”æ‰€æœ‰ iRules äº‹ä»¶ï¼Œå°è£…æ„æˆæ¯ä¸ªè§¦å‘äº‹ä»¶é€»è¾‘çš„å‘½ä»¤åˆ—è¡¨ã€‚æ¯ä¸ªäº‹ä»¶å£°æ˜çš„ç¬¬ä¸€è¡Œå¿…é¡»ä»¥å·¦å¤§æ‹¬å·ç»“æŸï¼Œæœ€åä¸€è¡Œå¿…é¡»ä»¥å³å¤§æ‹¬å·ç»“æŸï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">  body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å¸¦å‚æ•°åˆ—è¡¨çš„å¤§æ‹¬å·</p><p>â€‹ä½¿ç”¨å¤§æ‹¬å·æ¥å®šä¹‰ä¸€ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œâ€œå­—ç¬¦ä¸²æ˜ å°„â€å‘½ä»¤éœ€è¦ä¸€ä¸ªåŒ…å«æ›¿æ¢æ“ä½œçš„å€¼å¯¹çš„å‚æ•°ã€‚å€¼å¯¹å‚æ•°æ˜¯ä½œä¸ºå•ä¸ªå‚æ•°ä¼ é€’çš„åˆ—è¡¨ã€‚</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string map &#123;a x b y c z&#125; aabbcc</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å¤§æ‹¬å·çš„ç‰¹æ®Šæƒ…å†µç¤ºä¾‹ï¼š</li></ul><p>é”™è¯¯ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> var1 111</span><br><span class="line"><span class="built_in">set</span> var2 222</span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;$var1xxx<span class="variable">$var2</span>&quot;</span></span><br><span class="line">TCL error: can<span class="string">&#x27;t read &quot;var1xxx&quot;: no such variable     while executing &quot;log local0. &quot;$var1xxx$var2&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>æ­£ç¡®ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> var1 111 </span><br><span class="line"><span class="built_in">set</span> var2 222 </span><br><span class="line"><span class="built_in">log</span> local0ã€‚â€œ<span class="variable">$&#123;var1&#125;</span>xxx<span class="variable">$var2</span>â€</span><br><span class="line"></span><br><span class="line">è¿”å›ï¼š</span><br><span class="line">111xxx222</span><br></pre></td></tr></table></figure><h2 id="7-æµé‡å¼•å¯¼">7. æµé‡å¼•å¯¼</h2><p><strong>a. å¼•å¯¼æµé‡è‡³pool</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [IP::addr [IP::client_addr] equals 10.10.10.10] &#125; &#123;</span><br><span class="line">pool my_pool</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [HTTP::uri] ends_with <span class="string">&quot;.gif&quot;</span> &#125; &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [LB::status pool my_Pool member 10.1.2.200 80] eq <span class="string">&quot;down&quot;</span> &#125; &#123;</span><br><span class="line"><span class="built_in">log</span> <span class="string">&quot;Server <span class="variable">$ip</span> <span class="variable">$port</span> down!&quot;</span></span><br><span class="line">pool fallback_Pool</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">pool my_Pool member 10.1.2.200 80</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>b. å¼•å¯¼æµé‡è‡³node</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [HTTP::uri] ends_with <span class="string">&quot;.gif&quot;</span> &#125; &#123;</span><br><span class="line">node 10.1.2.200 80</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>c. å¼•å¯¼æµé‡åˆ°virtual</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123; </span><br><span class="line"><span class="comment"># å‘é€è¯·æ±‚åˆ°æ–°çš„è™šæ‹ŸæœåŠ¡å™¨</span></span><br><span class="line">virtual my_post_processing_server </span><br><span class="line">&#125; </span><br><span class="line">when HTTP_REQUEST &#123; </span><br><span class="line"><span class="built_in">log</span> local0. â€œå½“å‰è™šæ‹ŸæœåŠ¡å™¨åç§°ï¼š[è™šæ‹Ÿåç§°]â€ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>d. é‡å®šå‘æµé‡ HTTP::redirect</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_RESPONSE &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [HTTP::uri] eq â€œ/app1?user=adminâ€&#125; &#123; </span><br><span class="line">HTTP::redirect <span class="string">&quot;http://www.example.com/admin&quot;</span> </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>e. æ‹’ç» reject</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [TCP::local_port] != 443 &#125; &#123;</span><br><span class="line">reject</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>f. ä¸¢å¼ƒ drop &amp; discard</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when SERVER_CONNECTED &#123;</span><br><span class="line"><span class="keyword">if</span> &#123; [IP::addr [IP::client_addr] equals 10.1.1.80] &#125; &#123;</span><br><span class="line">discard</span><br><span class="line"><span class="built_in">log</span> local0. <span class="string">&quot;connection discarded from [IP::client_addr]&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-äº‹ä»¶">8. äº‹ä»¶</h2><p>â€‹iRules æ˜¯ä¸€ç§äº‹ä»¶é©±åŠ¨è¯­è¨€ã€‚å½“æµé‡å‘½ä¸­äº‹ä»¶æ—¶ï¼Œä¼šåŸºäºäº‹ä»¶è°ƒç”¨äº‹ä»¶ä¸‹çš„ä»£ç æ®µã€‚</p><p><strong>a. äº‹ä»¶è§¦å‘é¡ºåºï¼š</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/2904791743.png" alt="irule.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> irule </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TCLè¯­è¨€åŸºç¡€</title>
      <link href="/posts/9033e4a2f2b7.html"/>
      <url>/posts/9033e4a2f2b7.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šTCLè¯­è¨€åŸºç¡€çŸ¥è¯†ç§¯ç´¯</strong></p><hr><h2 id="1-å…¥é—¨ä¹¦ç±æ¨è">1. å…¥é—¨ä¹¦ç±æ¨è</h2><ul><li><p>Tcl/TKå…¥é—¨ç»å…¸ï¼ˆç¬¬äºŒç‰ˆï¼‰</p></li><li><p>The power of Tcl 1</p></li></ul><h2 id="2-è¯­æ³•è§„åˆ™">2. è¯­æ³•è§„åˆ™</h2><p><strong>ï¼ˆ1ï¼‰å‘½ä»¤å¤„ç†</strong></p><p>â€‹a. è„šæœ¬ç”±ä¸€æ¡æˆ–å¤šæ¡å‘½ä»¤ç»„æˆ</p><p>â€‹b. å‘½ä»¤ç”±æ¢è¡Œç¬¦æˆ–è€…åˆ†å·éš”å¼€</p><p>â€‹c. æ¯æ¡å‘½ä»¤åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ï¼Œç”±ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦éš”å¼€ï¼Œç¬¬ä¸€ä¸ªå•è¯ä¸ºå‘½ä»¤åï¼Œå…¶ä»–å•è¯ä¸ºå‚æ•°ã€‚</p><p>â€‹d. ä½¿ç”¨#å·è¿›è¡Œæ³¨é‡Šã€‚</p><p><strong>ï¼ˆ2ï¼‰æ›¿æ¢</strong></p><ul><li><p>tclä¸­æ€»å…±åŒ…å«ä¸‰ç§å˜é‡æ›¿æ¢æ–¹å¼ï¼šå˜é‡æ›¿æ¢$ï¼Œå‘½ä»¤æ›¿æ¢[]å’Œåæ–œæ æ›¿æ¢\</p><p>a. å˜é‡æ›¿æ¢$ ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç»™å˜é‡aèµ‹å€¼ä¸º1ï¼Œå†æŠŠå˜é‡açš„å€¼èµ‹å€¼ç»™b</span></span><br><span class="line"><span class="built_in">set</span> a 1;</span><br><span class="line"><span class="built_in">set</span> b <span class="variable">$a</span>;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ›¿æ¢çš„å˜é‡åç”±$åé¢çš„æ‰€æœ‰å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œæ•…é‡åˆ°éå­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä¼šç»ˆæ­¢ã€‚</p><p>b. å‘½ä»¤æ›¿æ¢[] ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŠŠ1+2çš„ç»“æœèµ‹å€¼ç»™aï¼Œ[]ä¸­çš„å†…å®¹ä½œä¸ºå‘½ä»¤æ‰§è¡Œï¼Œä¸”è¿”å›æ‰§è¡Œçš„ç»“æœã€‚</span></span><br><span class="line"><span class="built_in">set</span> a [<span class="built_in">expr</span> 1+2]</span><br></pre></td></tr></table></figure><p>c. åæ–œæ æ›¿æ¢(è½¬ä¹‰)ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å°† $ èµ‹å€¼ç»™a</span></span><br><span class="line"><span class="built_in">set</span> a <span class="string">&quot;\$&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>ï¼ˆ3ï¼‰å¼•ç”¨</strong></p><ul><li><p>TCLè¯­è¨€æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œé˜»æ­¢è§£æå™¨å¯¹$å’Œåˆ†å·ç­‰ç‰¹æ®Šå­—ç¬¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè¿™äº›æ–¹æ³•ç§°ä¹‹ä¸ºå¼•ç”¨ã€‚å¸¸ç”¨çš„å¼•ç”¨åŒ…æ‹¬åæ–œæ ã€åŒå¼•å·å’Œå¤§æ‹¬å·ã€‚</p></li><li><p>åæ–œæ é˜»æ­¢äº† $ çš„æ›¿æ¢ï¼Œå°†$ è§£æä¸ºå­—ç¬¦$ã€‚</p></li><li><p>å¼ºå¼•ç”¨{}å’Œå¼±å¼•ç”¨&quot;&quot;</p><p>a. å¼ºå¼•ç”¨{}ï¼šå¤§æ‹¬å·å»æ‰å…¶ä¸­æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦çš„ç‰¹æ®Šè§£é‡Šã€‚å³å¤§æ‹¬å·ä¸­çš„å­—ç¬¦ä¸²å°†æŒ‰ç…§å­—é¢ä¸Šçš„æ„æ€ï¼Œå°†å­—ç¬¦èµ‹å€¼ç»™å˜é‡ã€‚å¯ä»¥åµŒå¥—ä½¿ç”¨ã€‚</p><p>b. å¼±å¼•ç”¨&quot;&quot;ï¼šåŒå¼•å·å»æ‰å•è¯å’Œå‘½ä»¤åˆ†éš”ç¬¦çš„ç‰¹æ®Šè§£é‡Šï¼Œåœ¨åŒå¼•å·å†…éƒ¨çš„[]ä¾ç„¶æœ‰æ•ˆã€‚ä¸å¯åµŒå¥—ä½¿ç”¨ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">set</span> price 5</span><br><span class="line">5</span><br><span class="line">&gt; <span class="built_in">set</span> aa <span class="string">&quot;egg price is \$<span class="variable">$price</span> &quot;</span></span><br><span class="line">egg price is <span class="variable">$5</span></span><br><span class="line">&gt; <span class="built_in">set</span> aa &#123;egg price is \<span class="variable">$price</span> &#125;</span><br><span class="line">egg price is \$<span class="variable">$price</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="3-ä¸‰ç§åŒ¹é…æ–¹å¼">3. ä¸‰ç§åŒ¹é…æ–¹å¼</h2><ul><li><p>Tclè¯­è¨€ä¸­å­˜åœ¨ä¸‰ç§åŒ¹é…æ–¹å¼ï¼šexact ã€ glob å’Œ æ­£åˆ™è¡¨è¾¾å¼</p><p>a. exact ï¼šä¸¥æ ¼åŒ¹é…ï¼ŒæŒ‡ä¸¤ä¸ªå­—ç¬¦ä¸²å¿…é¡»å®Œå…¨ç›¸åŒï¼Œä¸åŒ¹é…é€šé…ç¬¦ã€‚</p><p>b. glob ï¼šé€šé…ç¬¦åŒ¹é…</p><p>c. regexpï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p></li></ul><h2 id="4-å˜é‡">4. å˜é‡</h2><ul><li>æ— éœ€å£°æ˜å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨setè¿›è¡Œåˆ›å»ºï¼Œunsetç§»é™¤ã€‚å˜é‡åŒ…å«å˜é‡åå’Œå˜é‡å€¼ã€‚</li><li>ä½¿ç”¨ $ è¿›è¡Œè°ƒç”¨ã€‚</li><li>åŒºåˆ†å¤§å°å†™ã€‚</li><li>å˜é‡åå’Œå˜é‡å€¼éƒ½å¯ä»¥ç”±ä»»æ„å­—ç¬¦ç»„æˆï¼Œå»ºè®®ä½¿ç”¨å­—æ¯å¼€å¤´ï¼Œä½¿ç”¨å­—æ¯æ•°å­—ä¸‹åˆ’çº¿è¿›è¡Œå‘½åã€‚</li><li>å¸¸ç”¨çš„å˜é‡ç±»å‹ï¼šstring list array directionary collection</li><li>å˜é‡å­˜å‚¨ç±»å‹åˆ†ä¸ºå­—ç¬¦ä¸²è¡¨æ‰“å½¢å¼å’Œå†…éƒ¨è¡¨è¾¾å¼å½¢å¼ï¼ˆæ•´æ•°ï¼Œå®æ•°ï¼Œåç§°ï¼Œåˆ—è¡¨ä»¥åŠtclè„šæœ¬ï¼‰</li></ul><p>ï¼ˆ1ï¼‰stringå‘½ä»¤</p><p>å¦‚æœä½ æƒ³è¦æŠŠæŸä¸ªç®€å•å˜é‡å½“å­—ç¬¦ä¸²å¤„ç†/çœ‹å¾…ï¼Œå¯ä»¥ä½¿ç”¨stringå‘½ä»¤æä¾›çš„åŠŸèƒ½ï¼›</p><p>è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string opting arg? arg...?</span><br></pre></td></tr></table></figure><p>string å‘½ä»¤å…·æœ‰å¼ºå¤§çš„å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œå…¶ä¸­optionçš„é€‰é¡¹å¤šè¾¾20ä¸ªï¼Œä¸‹é¢æˆ‘ä»¬ä»‹ç»å¸¸ç”¨çš„éƒ¨åˆ†ã€‚</p><p><strong>a. matchï¼šåŒ¹é…</strong></p><p>â€‹æ”¯æŒé€šé…ç¬¦åŒ¹é…ã€‚å¸¸ç”¨å‚æ•° -nocaseä¸åŒºåˆ†å¤§å°å†™ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šstring match pattern string1</span></span><br><span class="line"><span class="comment">#å¦‚æœpattern åŒ¹é…string1 è¿”å›1ã€‚</span></span><br><span class="line"></span><br><span class="line">&gt; string match *i* fadfifdafda</span><br><span class="line">1</span><br><span class="line">string match  -nocase &#123;*[0-9]&#125; fadfifdafda</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p><strong>b. equalï¼šç­‰äº</strong></p><p>â€‹exactåŒ¹é…æ–¹å¼ï¼Œä¸æ”¯æŒé€šé…ç¬¦ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œç­‰äºæ¯”è¾ƒã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># string equal -nocase -length 5 string1 string2</span></span><br><span class="line"><span class="comment"># å¯¹string1å’Œstring2è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä»–ä»¬ä¸¥æ ¼ï¼ˆexactï¼‰ç›¸åŒ,è¿”å›1ï¼Œå¦åˆ™è¿”å›0 ï¼Œ-length æŒ‡å®šå­—ç¬¦ä¸²ä»å‰å¾€ååŒ¹é…é•¿åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line">&gt; string equal  -length 5 fffghk fffghj </span><br><span class="line">1</span><br><span class="line">&gt; string equal fffdddss fffdddss</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>c. compare ï¼šæ¯”è¾ƒ</strong></p><p>â€‹ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šstring compare string1 string2</span></span><br><span class="line"><span class="comment">#ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸¥æ ¼ç›¸åŒï¼Œåˆ™è¿”å›0ï¼›å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ˆäºç¬¬äºŒä¸ªå­—ç¬¦ä¸²è¿”å›-1ï¼Œå¦åˆ™è¿”å›1ã€‚</span></span><br><span class="line">&gt; string compare icss2019 icss2020</span><br><span class="line">-1</span><br><span class="line">&gt; string compare icss2020 icss2020</span><br><span class="line">0</span><br><span class="line">&gt; string compare icss2020 icss2019</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>d. lengthï¼šé•¿åº¦</strong></p><p>â€‹è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç©ºæ ¼æ¢è¡Œä¹Ÿç®—ä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•ï¼šstring length string</span></span><br><span class="line"></span><br><span class="line">&gt;string length fdfdf</span><br><span class="line">5</span><br><span class="line">&gt; string length <span class="string">&quot;fdfd f&quot;</span></span><br><span class="line">6</span><br><span class="line">&gt;string length <span class="string">&quot;fdfd f\n&quot;</span></span><br><span class="line">7</span><br></pre></td></tr></table></figure><p><strong>e. index : ç´¢å¼•</strong></p><p>è¿”å›å­—ç¬¦ä¸²ç´¢å¼•æ‰€å¯¹åº”çš„å€¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼š string index string1 charIndex</span></span><br><span class="line"><span class="comment">#è¿”å›string1 ä¸­charIndexæ‰€å¯¹åº”çš„å­—ç¬¦ã€‚charIndexå¯ä»¥æ˜¯ä»¥ä¸‹çš„å€¼ï¼š</span></span><br><span class="line"><span class="comment">#æ•´æ•°nï¼šç¬¬nä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">#endï¼šæœ€åä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">#end-æ•´æ•°nï¼šå€’æ•°ç¬¬nä¸ªå­—ç¬¦ã€‚</span></span><br><span class="line"><span class="comment">#æ³¨ï¼šå¦‚æœcharIndexå°äº0æˆ–è€…å¤§äºå­—ç¬¦ä¸²é•¿åº¦ï¼Œè¿”å›ç©ºã€‚</span></span><br><span class="line"></span><br><span class="line">&gt; string index strdsf 4</span><br><span class="line">s</span><br><span class="line">&gt; string index stridfg end-4</span><br><span class="line">r</span><br></pre></td></tr></table></figure><p><strong>f. rangeï¼šèŒƒå›´</strong></p><p>â€‹è¿”å›è§„å®šèŒƒå›´çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šstring range string1 first last</span></span><br><span class="line"><span class="comment">#è¿”å›å­—ç¬¦ä¸²string1 firståˆ°lastä¹‹é—´çš„å­—ç¬¦ä¸² ,å¦‚æœfirstæˆ–è€…lastå°äº0ï¼Œåˆ™æŒ‰ç…§0å¤„ç†</span></span><br><span class="line"></span><br><span class="line">&gt; string range indffcg 0 end-4</span><br><span class="line">ind</span><br><span class="line">&gt; string range indffcg -2 end-4</span><br><span class="line">ind</span><br></pre></td></tr></table></figure><p><strong>g. replace æ›¿æ¢</strong></p><p>â€‹å­—ç¬¦ä¸²æ›¿æ¢</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šstring replace string 1 first last newstring</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨newstring æ›¿æ¢firståˆ°lastä½ç½®çš„å­—ç¬¦ï¼Œå¦‚æœå‘¢æˆ‘stringä¸å­˜åœ¨ï¼Œåˆ™å°†firståˆ°lastä¹‹é—´çš„å­—ç¬¦ä¸²åˆ é™¤ï¼Œå¦‚æœfirstæ¯”lastå¤§ï¼Œåˆ™ä¸è¿›è¡Œæ›¿æ¢ã€‚</span></span><br><span class="line"></span><br><span class="line">&gt; string repalce abcdef end-3 end jjjj</span><br><span class="line">abjjjj</span><br><span class="line">&gt; string replace abcdef end-3 end </span><br><span class="line">ab</span><br><span class="line">&gt; string replace abcdef 3 2 cc</span><br><span class="line">abcdef</span><br></pre></td></tr></table></figure><p><strong>h. mapï¼šé¡ºä½ç½®æ¢</strong></p><p>å°†å­—ç¬¦ä¸²ä¸­çš„å…³é”®è¯ç½®æ¢ä¸ºå“åº”çš„å€¼ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šstring map &#123;aa AA&#125; string1</span></span><br><span class="line"><span class="comment">#å°†å­—ç¬¦ä¸²ä¸­aaç½®æ¢ä¸ºAA</span></span><br><span class="line"></span><br><span class="line">&gt; string map &#123;ab ddd&#125; abcdefg</span><br><span class="line">dddcdefg</span><br><span class="line">&gt; string map &#123;ab <span class="built_in">dd</span> g v&#125; abcdefg</span><br><span class="line">ddcdefv</span><br></pre></td></tr></table></figure><p><strong>i. repeat : é‡å¤</strong></p><p>â€‹é‡å¤å­—ç¬¦ä¸²næ¬¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼š string repeat string1 count</span></span><br><span class="line"><span class="comment">#å°†å­—ç¬¦ä¸²string1é‡å¤countæ¬¡</span></span><br><span class="line"></span><br><span class="line">&gt; string repeat * 15</span><br><span class="line">***************</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰listå‘½ä»¤</strong></p><p>list åˆ—è¡¨ï¼Œåˆ—è¡¨å…ƒç´ ä¸€ç©ºæ ¼åˆ†éš”ï¼Œåˆ›å»ºåˆ—è¡¨ä¸‰ç§æ–¹å¼ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line"><span class="built_in">set</span> list_a &#123;a b c&#125;</span><br><span class="line"><span class="built_in">set</span> list_a [list a b c]</span><br></pre></td></tr></table></figure><p>listå¸¸ç”¨å‘½ä»¤ä¸stringå‘½ä»¤ç›¸ä¼¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><strong>a. llength : é•¿åº¦ï¼Œè¿”å›listå…ƒç´ ä¸ªæ•°ã€‚</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;llength <span class="variable">$list_a</span></span><br><span class="line">3</span><br></pre></td></tr></table></figure><p><strong>b. indexï¼šç´¢å¼•ï¼Œè¿”å›ç´¢å¼•æ‰€å¯¹åº”çš„å…ƒç´ </strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;lindex <span class="variable">$list_a</span> 0</span><br><span class="line">a</span><br></pre></td></tr></table></figure><p><strong>c. lrange : ç´¢å¼•èŒƒå›´</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;lrange <span class="variable">$list_a</span> 0 1</span><br><span class="line">a b</span><br></pre></td></tr></table></figure><p><strong>d. linsert : åœ¨æŒ‡å®šä½ç½®æ’å…¥æ–°å…ƒç´ </strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;linsert <span class="variable">$list_a</span> 1 gg</span><br><span class="line">a gg b c</span><br></pre></td></tr></table></figure><p><strong>e. lreplace : åˆ—è¡¨å…ƒç´ æ›¿æ¢</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å°†list_aä½ç½®1åˆ°2çš„å…ƒç´ æ›¿æ¢ä¸ºff gg hhï¼š</span></span><br><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt; lreplace <span class="variable">$list_a</span> 1 2 ff gg hh</span><br><span class="line">a ff gg hh</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤list_a ä½ç½®1çš„å…ƒç´ </span></span><br><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt; lreplace <span class="variable">$list_a</span> 1 1 c</span><br><span class="line">a c</span><br></pre></td></tr></table></figure><p><strong>f. lset : å°†å˜é‡æŒ‡å®šä½ç½®çš„å…ƒç´ æ›¿æ¢ä¸ºæŒ‡å®šå€¼</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> a &#123;a b c d&#125;</span><br><span class="line">&gt;lset a 2 7</span><br><span class="line">a b 7 d</span><br></pre></td></tr></table></figure><p><strong>g. lconcat : å°†ä¸åŒçš„åˆ—è¡¨åˆå¹¶ä¸ºæ–°åˆ—è¡¨</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;<span class="built_in">set</span> list_b <span class="string">&quot;d e f&quot;</span></span><br><span class="line">&gt;concat <span class="variable">$list_a</span> <span class="variable">$list_b</span></span><br><span class="line">a b c d e f</span><br></pre></td></tr></table></figure><p><strong>h. lappend : åˆ—è¡¨æ·»åŠ æ–°å…ƒç´ </strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">set</span> list_a <span class="string">&quot;a b c&quot;</span></span><br><span class="line">&gt;lappend <span class="variable">$list_a</span> d</span><br><span class="line">a b c d</span><br></pre></td></tr></table></figure><h2 id="5-è¡¨è¾¾å¼">5. è¡¨è¾¾å¼</h2><ul><li><p>exprå‘½ä»¤ï¼šæ•°å­¦è¿ç®—</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">set</span>  a 1</span><br><span class="line">&gt; <span class="built_in">set</span> b 2</span><br><span class="line">&gt;<span class="built_in">expr</span> <span class="variable">$a</span>+<span class="variable">$b</span></span><br><span class="line">3</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-æµæ§åˆ¶">6. æµæ§åˆ¶</h2><p><strong>ï¼ˆ1ï¼‰ if</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment">#if expr1 body1 elseif expr2 body2 ... else expr3 body3</span></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"><span class="keyword">if</span>  &#123;<span class="variable">$x</span> &lt; 0&#125; &#123;</span><br><span class="line">...</span><br><span class="line">&#125; elseif &#123;<span class="variable">$x</span> == 0&#125; &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>{ ä¸€å®šè¦å†™åœ¨ä¸Šä¸€è¡Œï¼Œå¦åˆ™TCLè§£æå™¨å°±ä¼šè®¤ä¸ºifåœ¨æ¢è¡Œç¬¦å¤„å·²ç»ç»“æŸï¼Œä¸‹ä¸€è¡Œä¼šå½“æˆæ–°çš„å‘½ä»¤ï¼Œä»è€Œå¯¼è‡´è§£æå™¨æŠ¥é”™ã€‚</li><li>if å’Œ { ä¹‹é—´è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™TCLè§£æå™¨ä¼šæŠŠä»–ä»¬å½“ä½œä¸€ä¸ªæ•´ä½“å¯¼è‡´æŠ¥é”™ã€‚</li></ul><p><strong>ï¼ˆ2ï¼‰while</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment"># while expr body</span></span><br><span class="line"><span class="comment">#å½“exprè¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æ‰§è¡Œbodyä¸­çš„å‘½ä»¤ï¼Œå¦åˆ™åœæ­¢å¾ªç¯å¹¶è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹,è®¡ç®—0-100çš„æ€»å’Œï¼š</span></span><br><span class="line"><span class="built_in">set</span> i 0 </span><br><span class="line"><span class="built_in">set</span> <span class="built_in">sum</span> 0</span><br><span class="line"><span class="keyword">while</span> &#123; <span class="variable">$i</span> &lt;= 100 &#125; &#123;</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">sum</span> [ <span class="built_in">expr</span> <span class="variable">$i</span> + <span class="variable">$sum</span> ]</span><br><span class="line">incr i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰foreach</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment">#foreach varname list body</span></span><br><span class="line"><span class="comment">#varnameæ˜¯ä¸€ä¸ªå˜é‡ï¼Œlistæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œbodyæ˜¯å¾ªç¯ä½“ã€‚</span></span><br><span class="line"><span class="comment">#ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="built_in">set</span> list_a &#123;a b c&#125;</span><br><span class="line">foreach i <span class="variable">$list_a</span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰switch</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•æ ¼å¼ï¼šswitch options string pattern1 body1 ... pattern(n) body(n)</span></span><br><span class="line"><span class="comment">#å¯é€‰å‚æ•°optionsï¼Œè¡¨ç¤ºåŒ¹é…çš„æ–¹å¼ã€‚switchç›®å‰æ”¯æŒä¸‰ç§åŒ¹é…æ–¹å¼ï¼š-exactï¼ˆé»˜è®¤ï¼‰ä¸¥æ ¼åŒ¹é…æ–¹å¼ï¼Œ-globé€šé…ç¬¦æ–¹å¼ï¼Œ-regexpæ­£åˆ™è¡¨è¾¾å¼æ–¹å¼ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰ break/continue</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#break:ä¸­æ–­å¾ªç¯ã€‚</span></span><br><span class="line"><span class="comment">#continueï¼šç»ˆç«¯æœ¬æ¬¡å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="7-å‡½æ•°">7. å‡½æ•°</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/4020319852.png" alt="7.png"></p><h2 id="8-æ–‡ä»¶æ“ä½œ">8. æ–‡ä»¶æ“ä½œ</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/07/408195014.png" alt="8.png"></p><h2 id="9-å¸¸ç”¨å‘½ä»¤">9. å¸¸ç”¨å‘½ä»¤</h2><ul><li><p>exec ï¼š ç”¨äºæ‰§è¡Œshellå‘½ä»¤</p></li><li><p>redirectï¼š é‡å®šå‘</p></li><li><p>regexpï¼šæ­£åˆ™åŒ¹é…</p></li><li><p>cdï¼š è¿›å…¥ç›®å½•</p></li><li><p>pwdï¼šå½“å‰è·¯å¾„</p></li><li><p>setï¼šç½®æ¢</p></li><li><p>putsï¼šè¾“å‡º</p></li><li><p>echoï¼šè¾“å‡º</p></li><li><p>infoï¼šä¿¡æ¯å¤„ç†</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python csvè¡¨æ ¼é…ç½®F5 LTM</title>
      <link href="/posts/1f850e53cdff.html"/>
      <url>/posts/1f850e53cdff.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šç”¨æˆ·éœ€è¦é…ç½®å¤§é‡F5ä¸šåŠ¡ï¼Œä¸€ä¸ªä¸€ä¸ªé…ç½®èµ·æ¥æ¯”è¾ƒæ…¢ï¼Œç”¨æˆ·å¯ä»¥æŠŠé…ç½®æ¢³ç†ä¸ºä¸€ä¸ªè¡¨æ ¼ï¼Œæˆ‘ä»¬åˆ©ç”¨pythonè„šæœ¬æŠŠè¡¨æ ¼ä¿¡æ¯é…ç½®åˆ°F5ä¸Šã€‚</strong></p><h2 id="ä¸€ã€Python-è„šæœ¬å±•ç¤º">ä¸€ã€Python è„šæœ¬å±•ç¤º</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">from</span> f5.bigip <span class="keyword">import</span> ManagementRoot <span class="keyword">as</span> MR</span><br><span class="line"></span><br><span class="line">mgmt=MR(<span class="string">&#x27;192.168.10.84&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;create.csv&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> csvfile:</span><br><span class="line">    reader = csv.DictReader(csvfile)</span><br><span class="line">    <span class="keyword">for</span> vs <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="comment"># print(vs[&#x27;vs_destination&#x27;])</span></span><br><span class="line">        vs_=mgmt.tm.ltm.virtuals.virtual</span><br><span class="line">        <span class="keyword">if</span> vs[<span class="string">&#x27;pool_name&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span> :</span><br><span class="line">            vs_.create(name=vs[<span class="string">&#x27;vs_name&#x27;</span>], destination=vs[<span class="string">&#x27;vs_destination&#x27;</span>], ipProtocol=vs[<span class="string">&#x27;vs_ipProtocol&#x27;</span>],profiles=vs[<span class="string">&#x27;profiles&#x27;</span>], translateAddress=vs[<span class="string">&#x27;translateAddress&#x27;</span>],translatePort=vs[<span class="string">&#x27;translatePort&#x27;</span>], sourceAddressTranslation=&#123;<span class="string">&#x27;type&#x27;</span>: vs[<span class="string">&#x27;snat_type&#x27;</span>]&#125;)</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            pool_ = mgmt.tm.ltm.pools.pool</span><br><span class="line">            pool_.create(name=vs[<span class="string">&#x27;pool_name&#x27;</span>], loadBalancingMode=vs[<span class="string">&#x27;pool_lbmode&#x27;</span>], monitor=vs[<span class="string">&#x27;pool_monitor&#x27;</span>])</span><br><span class="line">            pool_a = mgmt.tm.ltm.pools.pool.load(name=vs[<span class="string">&#x27;pool_name&#x27;</span>], partition=<span class="string">&#x27;Common&#x27;</span>)</span><br><span class="line">            pool_list = vs[<span class="string">&#x27;pool_member&#x27;</span>]</span><br><span class="line">            new_vs = <span class="built_in">eval</span>(pool_list)</span><br><span class="line">            <span class="keyword">for</span> member <span class="keyword">in</span> new_vs:</span><br><span class="line">                pool_a.members_s.members.create(partition=<span class="string">&#x27;Common&#x27;</span>, name=member)</span><br><span class="line">            vs_.create(name=vs[<span class="string">&#x27;vs_name&#x27;</span>], destination=vs[<span class="string">&quot;vs_destination&quot;</span>], ipProtocol=vs[<span class="string">&#x27;vs_ipProtocol&#x27;</span>],profiles=vs[<span class="string">&#x27;profiles&#x27;</span>],translateAddress=vs[<span class="string">&#x27;translateAddress&#x27;</span>],translatePort=vs[<span class="string">&#x27;translatePort&#x27;</span>],sourceAddressTranslation=&#123;<span class="string">&#x27;type&#x27;</span>:vs[<span class="string">&#x27;snat_type&#x27;</span>]&#125;,pool=vs[<span class="string">&#x27;pool_name&#x27;</span>],persist=vs[<span class="string">&#x27;persistence&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;finish&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="äºŒã€æ‰§è¡Œè„šæœ¬">äºŒã€æ‰§è¡Œè„šæœ¬</h2><h3 id="1ã€ç¯å¢ƒéœ€æ±‚">1ã€ç¯å¢ƒéœ€æ±‚</h3><ul><li>pythonç¯å¢ƒ</li><li>f5-sdk æ’ä»¶</li></ul><h3 id="2ã€Python-æ’ä»¶å®‰è£…">2ã€Python æ’ä»¶å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install f5-sdk</span><br></pre></td></tr></table></figure><h3 id="3ã€è„šæœ¬ä¿®æ”¹">3ã€è„šæœ¬ä¿®æ”¹</h3><p><strong>ï¼ˆ1ï¼‰ç™»å½•ä¿¡æ¯ä¿®æ”¹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mgmt=MR(&#x27;192.168.10.84&#x27;, &#x27;admin&#x27;, &#x27;admin&#x27;)</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä»¥ä¸Šä¿¡æ¯ï¼Œåˆ†åˆ«å¯¹åº” <code>('IPåœ°å€','ç”¨æˆ·å',adminå¯†ç ')</code></p><p><strong>ï¼ˆ2ï¼‰Python è¿è¡Œè·¯å¾„ä¿®æ”¹</strong></p><ul><li>csvè¡¨æ ¼å’Œpythonè„šæœ¬åœ¨åŒä¸€ä¸ªç›®å½•</li><li>åˆ‡æ¢pythonæ‰§è¡Œè·¯å¾„ä¸ºPythonè„šæœ¬æ‰€åœ¨è·¯å¾„<ul><li>ç¤ºä¾‹ï¼šå¦‚æœcsvæ–‡ä»¶å’Œpythonéƒ½åœ¨æ¡Œé¢ï¼Œåˆ™éœ€è¦åˆ‡æ¢è¿è¡Œè·¯å¾„è‡³æ¡Œé¢</li><li><img src="https://cdn.whbblog.cn/img/image-20220607144627786.png" alt="image-20220607144627786" style="zoom: 80%;" /></li></ul></li><li>csvè¡¨æ ¼å‘½åä¸º<code>create.csv</code></li></ul><p><strong>ï¼ˆ3ï¼‰è¿è¡Œè„šæœ¬</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python è„šæœ¬åç§°.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¤ºä¾‹</span></span><br><span class="line">python test.py</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€è¡¨æ ¼å±•ç¤º">ä¸‰ã€è¡¨æ ¼å±•ç¤º</h2><p><img src="https://cdn.whbblog.cn/img/image-20220607142308974.png" alt="image-20220607142308974"></p><div class="btns rounded grid5">            <a class="button" href='https://cloud.niux.plus/#s/8MZ7lRKA' title='ä¸‹è½½è¡¨æ ¼'><i class='fas fa-download'></i>ä¸‹è½½è¡¨æ ¼</a>          </div> <h2 id="å››ã€csv-è¡¨æ ¼å­—æ®µä»‹ç»">å››ã€csv è¡¨æ ¼å­—æ®µä»‹ç»</h2><table><thead><tr><th>åç§°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>paration</td><td>åˆ†åŒºåç§°ï¼Œæš‚æ—¶åªæ”¯æŒComminåˆ†åŒº</td></tr><tr><td>vs_name</td><td>æ ¹æ®æƒ…å†µéšæ„å¡«å†™ï¼Œæ²¡è¦æ±‚ï¼Œè¯¥é¡¹ä¸ºå¿…å¡«é¡¹</td></tr><tr><td>vs_destination</td><td>å¡«å†™æ ¼å¼  ipï¼šport   ç¤ºä¾‹ï¼š 1.1.1.1:80  è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>vs_ipProtocol</td><td>vsåè®® ï¼Œå¯ä»¥å¡«å†™ tcpï¼Œudpï¼Œany  è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>profiles</td><td>å¯å¡«å†™ fastL4ï¼ˆå››å±‚ï¼‰ ï¼Œ tcpï¼ˆä¸ƒå±‚ï¼‰ï¼Œæ›´å¤šå¯æ ¹æ®å‘½ä»¤è¡ŒæŸ¥æ‰¾ã€‚ è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>translateAddress</td><td>åœ°å€è½¬æ¢ å¯å¡«å†™ enabled ï¼Œ disabled  è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>translatePort</td><td>ç«¯å£è½¬æ¢ å¯å¡«å†™ enabled ï¼Œ disabled  è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>pool_name</td><td>poolåç§°ï¼Œå¯æ ¹æ®æƒ…å†µå¡«å†™ï¼Œæ²¡è¦æ±‚ è¯¥é¡¹ä¸ºé€‰å¡«é¡¹ã€‚</td></tr><tr><td>pool_member</td><td>poolæˆå‘˜ å¯å¡«å†™ä¸€ä¸ªè‡³å¤šä¸ªï¼Œå½“å¡«å†™å¤šä¸ªæ—¶ï¼Œè¦å†™æˆåˆ—è¡¨æ ¼å¼ã€‚ ç¤ºä¾‹ï¼š [â€˜1.1.1.1:90â€™,â€˜1.1.1.1:80â€™]  è¯¥é¡¹ä¸ºé€‰å¡«é¡¹ã€‚</td></tr><tr><td>pool_monitor</td><td>poolå¥åº·æ£€æŸ¥ å¯å¡«å†™none,tcp,udp,gateway_icmpç­‰ã€‚æ›´å¤šå¥åº·æ£€æŸ¥æ–¹å¼æŒ‰ç…§å‘½ä»¤è¡Œé€‰é¡¹çš„miontorè¿›è¡Œå¡«å†™ã€‚ è¯¥é¡¹ä¸ºé€‰å¡«é¡¹ã€‚</td></tr><tr><td>pool_lbmode</td><td>poolæˆå‘˜è´Ÿè½½æ–¹å¼ï¼Œå¯å†™round-robinï¼Œleast-connections-memberç­‰ï¼Œæ›´å¤šè´Ÿè½½æ–¹å¼æŒ‰ç…§å‘½ä»¤è¡Œé€‰é¡¹çš„è´Ÿè½½å‚æ•°è¿›è¡Œå¡«å†™ã€‚ è¯¥é¡¹ä¸ºé€‰å¡«é¡¹ã€‚</td></tr><tr><td>snat_type</td><td>snatç±»å‹ï¼Œç›®å‰åªæ”¯æŒ none ï¼Œ automap ï¼Œæš‚ä¸æ”¯æŒsnatpoolã€‚è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr><tr><td>persistence</td><td>ä¼šè¯ä¿æŒï¼Œå¯ä»¥é€‰æ‹© source_addr , hash , none ç­‰ã€‚è¯¥é¡¹ä¸ºå¿…å¡«é¡¹ã€‚</td></tr></tbody></table><h2 id="äº”ã€æµ‹è¯•æ•ˆæœ">äº”ã€æµ‹è¯•æ•ˆæœ</h2><p><img src="https://cdn.whbblog.cn/img/image-20220607142148677.png" alt="image-20220607142148677"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> è‡ªåŠ¨åŒ–é…ç½® </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 shellè„šæœ¬è¾“å‡ºé…ç½®åˆ°csvè¡¨æ ¼</title>
      <link href="/posts/739a5bc7345f.html"/>
      <url>/posts/739a5bc7345f.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šé€šè¿‡shellè„šæœ¬è¾“å‡ºF5é…ç½®åˆ°csvè¡¨æ ¼</strong></p><hr><p><strong>1.åˆ›å»ºè„šæœ¬</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vi f5config.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> vs name, destination, pool, pool members</span><br><span class="line">VIRTUALS=$(tmsh -q -c <span class="string">&quot;cd / ; list /ltm virtual  recursive&quot;</span> | grep <span class="string">&quot;ltm virtual&quot;</span> | awk -F<span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print &quot;/&quot;$3&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> VS <span class="keyword">in</span> <span class="variable">$VIRTUALS</span>;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="variable">$VS</span>,</span><br><span class="line">  DEST=$(tmsh list ltm virtual <span class="variable">$VS</span> | grep destination | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f6)</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="variable">$DEST</span>,</span><br><span class="line">  POOL=$(tmsh list ltm virtual <span class="variable">$VS</span> | grep pool | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f6)</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="variable">$POOL</span>,</span><br><span class="line">  <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$POOL</span>&quot;</span> ];</span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">        MBRS=$(tmsh list ltm pool <span class="string">&quot;<span class="variable">$POOL</span>&quot;</span> | grep address | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f14)</span><br><span class="line">        <span class="built_in">echo</span> -n <span class="variable">$MBRS</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>2.èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 excel.sh</span><br></pre></td></tr></table></figure><p><strong>3.æ‰§è¡Œè„šæœ¬</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./excel.sh &gt;&gt; f5config.csv</span><br></pre></td></tr></table></figure><p><strong>4.æŠŠcsvè¡¨æ ¼ä¸‹è½½åˆ°æœ¬åœ°æ‰“å¼€å³å¯</strong></p><p><strong>5.å®˜æ–¹å‚è€ƒé“¾æ¥</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://support.f5.com/csp/article/K72255145?utm_source=f5support&amp;utm_medium=RSS</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 é…ç½®è‡ªåŠ¨å¤‡ä»½</title>
      <link href="/posts/15c9f60cf7fd.html"/>
      <url>/posts/15c9f60cf7fd.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šéœ€è¦å¯¹F5é…ç½®åšå®šæœŸå¤‡ä»½</strong></p><hr><p>**1ã€ä¸‹è½½é…ç½®å¤‡ä»½iAppæ¨¡æ¿ï¼Œä¸‹è½½å®Œæˆåè§£å‹ã€‚**ğŸ‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/f5devcentral/f5-automated-backup-iapp</span><br></pre></td></tr></table></figure><p>**2ã€è¿›å…¥iApps &gt;&gt; Templates é€‰æ‹©æœ€æ–°tclæ¨¡æ¿ä¸Šä¼ åˆ°F5 iAppsã€‚**ğŸ¬</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2206778830.png" alt="backup_1.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2361674119.png" alt="backup_2.png"></p><p><strong>3ã€é…ç½® Application Services ã€‚</strong> ğŸŸ</p><p>ï¼ˆ1ï¼‰å¯¼èˆªè‡³ iApps &gt;&gt; Application Services ï¼Œ ç‚¹å‡»createã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3523687509.png" alt="backup_3.png"></p><p>ï¼ˆ2ï¼‰é…ç½®å®šæœŸè‡ªåŠ¨é…ç½®æ¨¡æ¿</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/187909309.png" alt="backup_4.png"></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1729653365.png" alt="backup_5.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®ä»‹ç»ï¼š</span><br><span class="line"></span><br><span class="line">Nameï¼šè¾“å…¥Application Server çš„åç§°</span><br><span class="line"></span><br><span class="line">Templateï¼šè¾“å…¥æ‰€ä½¿ç”¨æ¨¡æ¿</span><br><span class="line"></span><br><span class="line">Select the type of backup :  é€‰æ‹©é…ç½®å¤‡ä»½ç±»å‹ï¼Œå¯ä»¥é€‰æ‹©UCS æˆ– SCFã€‚</span><br><span class="line"></span><br><span class="line">Use a  passphrase to encrypt the archivesï¼šä½¿ç”¨å¯†ç åŠ å¯†é…ç½®æ–‡ä»¶ï¼Œå¯é€‰Yeså’ŒNoã€‚</span><br><span class="line"></span><br><span class="line">Include the private keys in the archives? : é€‰æ‹©é…ç½®æ–‡ä»¶æ˜¯å¦åŒ…å«ç§é’¥Keyï¼Œå¯é€‰Yeså’ŒNoã€‚</span><br><span class="line"></span><br><span class="line">Frequency ï¼š è‡ªåŠ¨é…ç½®å‘¨æœŸï¼Œå¯é€‰æ¯åˆ†é’Ÿ/å°æ—¶/å¤©/å‘¨/æœˆ/è‡ªå®šä¹‰æ—¶é—´å¤‡ä»½ä¸€æ¬¡ã€‚</span><br><span class="line"></span><br><span class="line">Where X equalsï¼š é¢‘ç‡</span><br><span class="line"></span><br><span class="line">Where do the backup files need to be saved? : é€‰æ‹©é…ç½®æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œå¯é€‰ä¿ç•™åœ¨On the F5/SCP/SFTP/FTP/SMB/CIFSç­‰ã€‚</span><br><span class="line"></span><br><span class="line">Select the Filename Format ï¼š é€‰æ‹©å¤‡ä»½æ–‡ä»¶åæ ¼å¼ã€‚</span><br><span class="line"></span><br><span class="line">Automatic Pruning Mode: è‡ªåŠ¨ä¿®å‰ªæ¨¡å¼ï¼Œå¯é€‰Disabled/Only Prune iApp-Generated Archives/Prune All Archives ï¼Œå½“é…ç½®å¤‡ä»½æœ¬åœ°æ—¶ éœ€è¦æ‰“å¼€ï¼Œå¦åˆ™å·²å¤‡ä»½æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line">Unique Filename Suffixï¼š å¡«å†™å”¯ä¸€æ–‡ä»¶ååç¼€ï¼Œæ–°ç”Ÿæˆé…ç½®æ–‡ä»¶åä¸º é…ç½®æ–‡ä»¶å+ suffixã€‚</span><br><span class="line"></span><br><span class="line">Amount of files to keep at any given time: å¡«å†™ä¿å­˜åˆ°æœ¬åœ°é…ç½®æ–‡ä»¶æœ€å¤§æ•°é‡ã€‚</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä¿®æ”¹æ¨¡æ¿é…ç½®ï¼šå½“æ¨¡æ¿é…ç½®å®Œæˆåï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ¨¡æ¿ï¼Œéœ€è¦å¯¼èˆªåˆ° iApps &gt;&gt; Application Services : Applications &gt;&gt; template_name &gt;&gt; Reconfigure ä¸‹è¿›è¡Œé…ç½®æ›´æ”¹ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1603763046.png" alt="backup_6.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> backup </tag>
            
            <tag> auto </tag>
            
            <tag> iApp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typecho åšå®¢å¹³å°æ­å»º</title>
      <link href="/posts/9ca98fdd2b5c.html"/>
      <url>/posts/9ca98fdd2b5c.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šä¸æ–­æˆé•¿ï¼Œæƒ³æ­å»ºè‡ªå·±çš„åšå®¢ç³»ç»Ÿã€‚</strong></p><h2 id="ä¸€ã€å‰æœŸå‡†å¤‡">ä¸€ã€å‰æœŸå‡†å¤‡</h2><p><strong>1ã€è´­ä¹°æœåŠ¡å™¨</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cloud.tencent.com/act/campus?from=12631</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2366717806.png" alt="blog_1.png"></p><p><strong>2ã€è´­ä¹°åŸŸå</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cloud.tencent.com/act/domainsales?from=12643</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1869922330.png" alt="blog_2.png"></p><p><strong>3ã€è…¾è®¯äº‘ç½‘ç«™å¤‡æ¡ˆ</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3360476689.png" alt="blog_3.png"></p><h2 id="äºŒã€æœåŠ¡å™¨ç¯å¢ƒé…ç½®">äºŒã€æœåŠ¡å™¨ç¯å¢ƒé…ç½®</h2><p><strong>1ã€ç™»é™†è…¾è®¯äº‘æœåŠ¡å™¨æ§åˆ¶å°ï¼Œé‡ç½®å¯†ç ï¼Œå¹¶å¼€æ”¾é˜²ç«å¢™888ï¼Œ8888ï¼Œ3306ï¼Œ80ï¼Œ443ï¼Œ22ç­‰ç«¯å£ã€‚</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1931660186.png" alt="blog_4.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/06/3655829766.png" alt="blog_5.png"></p><p><strong>2ã€å®‰è£…Linuxå®å¡”é¢æ¿ï¼ˆ<a href="http://xn--bt-203cx14dsy9a70nyqd.cn">è¯¦ç»†ä¿¡æ¯è§bt.cn</a>ï¼‰</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span><br><span class="line">æ³¨ï¼šåœ¨å®‰è£…å®Œä¹‹åä¼šå‡ºç°ç™»é™†åœ°å€çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè®°å¾—ä¿å­˜</span><br></pre></td></tr></table></figure><p><strong>3ã€webç™»é™†å®å¡”é¢æ¿</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2915290879.png" alt="blog_6.png"></p><p><strong>4ã€ç™»é™†åå¼¹å‡ºå®‰è£…å¥—ä»¶ï¼ˆæˆ‘è¿™è¾¹é€‰æ‹©LNMPï¼‰</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1446264502.png" alt="blog_7.png"></p><p><strong>5ã€å®‰è£…php7.3</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2441345621.png" alt="blog_8.png"></p><p><strong>6ã€phpMyAdminè®¾å¤‡phpç‰ˆæœ¬ä¸º7.3</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1043661179.png" alt="blog_9.png"></p><p><strong>7ã€é…ç½®webç«™ç‚¹</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/64377435.png" alt="blog_10.png"></p><p><strong>8ã€ç½‘ç«™æµ‹è¯•</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1467078545.png" alt="blog_11.png"></p><p><strong>æ³¨ï¼šå¦‚æœç½‘ç«™å‡ºç°æŠ¥é”™ç­‰é¡µé¢ï¼Œè¯·æ£€æŸ¥nginxæœåŠ¡çŠ¶æ€ã€‚</strong></p><h2 id="ä¸‰ã€åšå®¢ç³»ç»Ÿæ­å»º">ä¸‰ã€åšå®¢ç³»ç»Ÿæ­å»º</h2><p><strong>1ã€ä¸‹è½½åšå®¢ç³»ç»Ÿ</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://typecho.org/download</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/681050804.png" alt="blog_12.png"></p><p><strong>2ã€ä¸Šä¼ åšå®¢ç³»ç»Ÿè‡³webç«™ç‚¹è·Ÿç›®å½•</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3951320503.png" alt="blog_13.png"></p><p><strong>3ã€è§£å‹åšå®¢ç³»ç»Ÿè‡³ç«™ç‚¹æ ¹è·¯å¾„</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1720481772.png" alt="blog_14.png"></p><p><strong>4ã€ç™»é™†ç½‘ç«™ï¼Œå¼€å§‹å®‰è£…åšå®¢ç³»ç»Ÿ</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/574778202.png" alt="blog_15.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/06/7759210.png" alt="blog_16.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/06/3739033261.png" alt="blog_17.png"><br><img src="https://www.whbblog.cn/usr/uploads/2021/06/2869742209.png" alt="blog_18.png"></p><p>æ³¨ï¼šæ•°æ®åº“å‰ç¼€ä¸ºæ˜¯æ•°æ®åº“è¡¨çš„å‰ç¼€ï¼Œä¿æŒé»˜è®¤typecho_å³å¯ã€‚</p><p><strong>5ã€ç™»é™†åšå®¢ç³»ç»Ÿæµ‹è¯•</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2360128781.png" alt="blog_19.png"></p><p><strong>6ã€æŸ¥çœ‹åå°ç®¡ç†ï¼ˆç™»é™†åœ°å€åé¢æ¥adminï¼‰</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3888070949.png" alt="blog_20.png"></p><p><strong>7ã€ä¸»é¢˜ç®¡ç†ï¼Œå¯ä»¥åº”ç”¨è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜</strong></p><p>ï¼ˆ1ï¼‰ä¸»é¢˜ä¸‹è½½ï¼Œåœ¨<code>https://typecho.me/</code>é€‰æ‹©å–œæ¬¢çš„ä¸»é¢˜ä¸‹è½½ä¸‹æ¥ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3163994466.png" alt="blog_21.png"></p><p>ï¼ˆ2ï¼‰å¯¼å…¥ç½‘ç«™æ ¹è·¯å¾„ä¸‹/usr/themes/ä¸‹å¹¶åº”ç”¨ä¸»é¢˜</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2456914821.png" alt="blog_22.png"></p><p>ï¼ˆ3ï¼‰è§£å‹ç¼©ä¸»é¢˜</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/4098976035.png" alt="blog_23.png"></p><p>ï¼ˆ4ï¼‰è¿›å…¥ç½‘ç«™åå°å¯ç”¨ä¸»é¢˜</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/259051541.png" alt="blog_24.png"></p><p>ï¼ˆ5ï¼‰ç™»é™†åšå®¢ï¼Œè‡³æ­¤ï¼Œåšå®¢ç³»ç»Ÿå°±æ­å»ºå®Œæˆäº†ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3194190136.png" alt="blog_25.png"></p><h2 id="å››ã€åšå®¢ç³»ç»ŸåŸŸåè§£æ">å››ã€åšå®¢ç³»ç»ŸåŸŸåè§£æ</h2><p>ç”±äºç½‘ç«™å¤‡æ¡ˆæ—¶é—´è¾ƒé•¿ï¼ŒåŸŸåå¤‡æ¡ˆå®Œæˆåï¼Œå¼€å§‹é…ç½®åšå®¢ç³»ç»ŸåŸŸåè§£æã€‚</p><p><strong>1ã€é…ç½®Aè®°å½•è§£æ</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/604348243.png" alt="blog_26.png"></p><p><strong>2ã€æ–°å»ºåŸŸåwebç«™ç‚¹</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3617873180.png" alt="blog_27.png"></p><p><strong>3ã€é…ç½®SSLè¯ä¹¦</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3401398248.png" alt="blog_28.png"></p><p><strong>4ã€æŠŠIPç«™ç‚¹è¿ç§»åˆ°åŸŸåç«™ç‚¹</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3699353424.png" alt="blog_29.png"></p><p><strong>5ã€é…ç½®é‡å®šå‘webç«™ç‚¹ï¼ˆ<a href="http://xn--test-z25fve398a.xn--comwww-rr3j87j97vjwsok0j.test.com">å¯ä»¥ä»test.comæ‰é‡å®šå‘åˆ°www.test.com</a>ï¼‰</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1119618826.png" alt="blog_30.png"></p><p><strong>6ã€é…ç½®é‡å®šå‘webç«™ç‚¹ssl</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2237213029.png" alt="blog_31.png"></p><p><strong>7ã€é…ç½®ç«™ç‚¹é‡å®šå‘</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1989670268.png" alt="blog_32.png"></p><p><strong>8ã€é€šè¿‡åŸŸåè®¿é—®webç«™ç‚¹</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/968247707.png" alt="blog_33.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚é¡¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typecho </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 æºåœ°å€è½¬æ¢æ¨¡å¼ åç«¯serveræŸ¥çœ‹clientåœ°å€çš„ä¸‰ç§æ–¹å¼</title>
      <link href="/posts/fef835898a43.html"/>
      <url>/posts/fef835898a43.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šè§£å†³SNATå¸¦æ¥çš„åœ°å€å®¡è®¡é—®é¢˜</strong></p><hr><h2 id="ä¸€-åŸºäºhttpåè®®çš„è§£å†³æ–¹æ¡ˆ">ä¸€. åŸºäºhttpåè®®çš„è§£å†³æ–¹æ¡ˆ</h2><p><strong>â€‹å®ç°æ–¹å¼ï¼šåœ¨httpå¤´éƒ¨æ’å…¥æºåœ°å€ã€‚</strong></p><p>åœ¨æ–°å»ºhttp profileå¹¶å¼€å¯Insert X-Forward-ForåŠŸèƒ½ï¼Œå…¶ä½™é€‰é¡¹ä¿æŒä¸å˜ã€‚å†åœ¨vsé‡Œè°ƒç”¨è¯¥http profileã€‚</p><p>æŠ“åŒ…å¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°åœ¨httpå¤´éƒ¨ X-Forward-Forå­—æ®µæ’å…¥äº†å®¢æˆ·ç«¯æºåœ°å€ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3752935162.png" alt="snat_1.png"></p><p>æ³¨æ„ï¼šè¦æ±‚ç»è¿‡F5çš„æµé‡æ˜¯æ˜æ–‡çš„ï¼Œå¯†æ–‡çš„éœ€è¦è§£å¯†ã€‚</p><h2 id="äºŒã€åŸºäºtcpåè®®è§£å†³æ–¹æ¡ˆ">äºŒã€åŸºäºtcpåè®®è§£å†³æ–¹æ¡ˆ</h2><p><strong>â€‹å®ç°æ–¹å¼ï¼Œåœ¨tcp option ä¸­æ’å…¥æºåœ°å€ã€‚</strong></p><p><strong>1ã€tcp optionç®€ä»‹</strong></p><ul><li>å¸¸è§option</li></ul><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3648112823.png" alt="snat_5.png"></p><ul><li>å­—æ®µæ ¼å¼</li></ul><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/876100243.png" alt="snat_2.png"></p><p>ï¼ˆ1ï¼‰EOLå’ŒNOP Optionï¼ˆKind 0ã€Kind 1ï¼‰åªå 1 Byteï¼Œæ²¡æœ‰Lengthå’ŒValueå­—æ®µï¼›</p><p>ï¼ˆ2ï¼‰NOPç”¨äº å°†TCP Headerçš„é•¿åº¦è¡¥é½è‡³32bitçš„å€æ•°ï¼ˆç”±äºHeader Lengthå­—æ®µä»¥32bitä¸ºå•ä½ï¼Œå› æ­¤TCP Headerçš„é•¿åº¦ä¸€å®šæ˜¯32bitçš„å€æ•°ï¼‰ï¼›</p><p>ï¼ˆ3ï¼‰SACK-Premitted Optionå 2 Byteï¼Œæ²¡æœ‰Valueå­—æ®µï¼›</p><p>ï¼ˆ4ï¼‰å…¶ä½™Optionéƒ½ä»¥1 Byteçš„â€œKindâ€å¼€å¤´ï¼ŒæŒ‡æ˜Optionçš„ç±»å‹ï¼›LengthæŒ‡æ˜Optionçš„æ€»é•¿åº¦ï¼ˆåŒ…æ‹¬Kindå’ŒLengthï¼‰</p><p>ï¼ˆ5ï¼‰å¯¹äºæ”¶åˆ°â€œä¸èƒ½ç†è§£â€çš„Optionï¼ŒTCPä¼šæ— è§†æ‰ï¼Œå¹¶ä¸å½±å“è¯¥TCP Segmentçš„å…¶å®ƒå†…å®¹ï¼›</p><p><strong>2ã€åœ¨F5ä¸Šè¿›è¡Œtcp optionæ’å…¥æ“ä½œ</strong></p><p>ï¼ˆ1ï¼‰å‘½ä»¤è¡Œåˆ›å»ºtcp profileï¼Œé€šè¿‡åœ¨tcpé€‰é¡¹28ä¸­åµŒå…¥ç‰ˆæœ¬å·ï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰å’ŒIPv4åœ°å€ï¼ˆå››ä¸ªå­—èŠ‚ï¼‰ä½œä¸ºè¦†ç›–è·¯å¾„åŠŸèƒ½çš„ä¸€éƒ¨åˆ†æ¥æ”¯æŒå®¢æˆ·ç«¯IPå¯è§æ€§ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ ¼å¼ï¼š</span><br><span class="line">create ltm profile tcp PROFILE_NAME tcp-options <span class="string">&quot;&#123;option &#125; &#123;option&#125;&quot;</span> </span><br><span class="line">   </span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">tmsh create ltm profile tcp tcp_opt tcp-options <span class="string">&quot;&#123;28 first&#125;&quot;</span></span><br><span class="line">   </span><br><span class="line">è§£é‡Š: </span><br><span class="line">ç¬¬ä¸€ä¸ª option å¡«å†™ 2 åˆ° 255ï¼ˆå«ï¼‰ä¹‹é—´çš„æ•°å­—ï¼Œè¡¨ç¤ºè¦æ”¶é›†çš„ TCP é€‰é¡¹ç±»å‹.</span><br><span class="line">ç¬¬äºŒä¸ª option å¡«å†™ first | last æŒ‡ç¤ºç³»ç»Ÿæ˜¯ä¿ç•™æŒ‡å®šé€‰é¡¹ç§ç±»çš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Œè¿˜æ˜¯æœ€åçš„å®ä¾‹ã€‚  </span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ›å»ºirule</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">when SERVER_CONNECTED &#123;</span><br><span class="line">scan [IP::client_addr] &#123;%d.%d.%d.%d&#125; a b c d</span><br><span class="line">TCP::option <span class="built_in">set</span> 28 [binary format cccc <span class="variable">$a</span> <span class="variable">$b</span> <span class="variable">$c</span> <span class="variable">$d</span>] all</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åœ¨vsä¸­è°ƒç”¨http profileå’Œiruleã€‚</p><p>ï¼ˆ4ï¼‰æŠ“åŒ…æµ‹è¯•å¦‚ä¸‹æ‰€ç¤ºï¼Œå½“å»ºç«‹å®Œæ¡æ‰‹ä¹‹åï¼Œsnatåœ°å€ä¸åå°å»ºç«‹è¿æ¥æ—¶ä¼šåœ¨tcp optionä¸­æºå¸¦å®¢æˆ·ç«¯IPåœ°å€ï¼ˆè¿™æ˜¯16è¿›åˆ¶çš„å­—ç¬¦ï¼Œè½¬æ¢ä¸º10è¿›åˆ¶ä¾¿æ˜¯å®¢æˆ·ç«¯çœŸå®åœ°å€ï¼‰ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2511737499.png" alt="snat_3.png"></p><h2 id="ä¸‰ã€é€šè¿‡syslogè¿›è¡Œæºåœ°å€å®¡è®¡çš„æ–¹æ¡ˆ">ä¸‰ã€é€šè¿‡syslogè¿›è¡Œæºåœ°å€å®¡è®¡çš„æ–¹æ¡ˆ</h2><p><strong>å®ç°æ–¹å¼ï¼šé€šè¿‡syslogå‘é€å®¢æˆ·ç«¯ä¿¡æ¯åˆ°syslogæœåŠ¡å™¨å®ç°å¯¹æºåœ°å€å®¡è®¡ï¼Œé€‚ç”¨äºTCPï¼ŒUDPã€‚</strong></p><p><strong>1ã€åˆ›å»ºæ—¥å¿—pool</strong></p><p>æ­¤å¤„æ­¥éª¤çœç•¥</p><p><strong>2ã€é…ç½®irule</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when CLIENT_ACCEPTED &#123;</span><br><span class="line">    set hsl [HSL::<span class="keyword">open</span> -proto UDP -pool POOL_log]</span><br><span class="line">&#125;</span><br><span class="line">when SERVER_CONNECTED &#123;</span><br><span class="line">    HSL::send $hsl <span class="string">&quot;client &#123; <span class="subst">[IP::client_addr]</span>:<span class="subst">[TCP::client_port]</span> -&gt; <span class="subst">[clientside &#123;IP::local_addr&#125;]</span>:<span class="subst">[clientside &#123;TCP::local_port&#125;]</span> &#125; server &#123;<span class="subst">[IP::local_addr]</span>:<span class="subst">[TCP::local_port]</span> -&gt; <span class="subst">[IP::server_addr]</span>:<span class="subst">[TCP::server_port]</span>&#125; \n&quot;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.æŠ“åŒ…æµ‹è¯•ï¼Œé€šè¿‡æŠ“åŒ…å¯ä»¥å‘ç°F5æŠŠå®¢æˆ·ç«¯ä¿¡æ¯å‘ç»™äº†syslogæœåŠ¡å™¨ã€‚</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/4248865180.png" alt="snat_4.png"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> irule </tag>
            
            <tag> snat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS ä¿®æ”¹rootå¯†ç </title>
      <link href="/posts/b49ccbd2cd68.html"/>
      <url>/posts/b49ccbd2cd68.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šCentOS rootå¯†ç å¿˜äº†ã€‚</strong></p><hr><p><strong>1ã€å¼€æœºå¯åŠ¨ï¼Œé€‰æ‹©å†…æ ¸ï¼ŒæŒ‰eé”®</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3873559399.png" alt="centoscha1.png"></p><p><strong>2ã€è¿›å…¥ä¸‹å›¾ç•Œé¢ï¼Œä¿®æ”¹roä¸ºrw init=/sysroot/bin/sh</strong></p><p>ä¿®æ”¹å‰ï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3707430199.png" alt="centoscha2.png"></p><p>ä¿®æ”¹åï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/721114773.png" alt="centoscha3.png"></p><p><strong>3. æŒ‰ctrl+x,ä¼šè¿›å…¥åˆ°ä¸€ä¸ªshellç•Œé¢ã€‚</strong></p><p>ï¼ˆ1ï¼‰åˆ‡æ¢æ ¹ï¼Œå°†/sysrootä½œä¸ºæ ¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chroot</span> /sysroot</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰è¾“å…¥passwd æ›´æ”¹rootå¯†ç ï¼Œè¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç åï¼Œå‡ºç°successfullyå­—æ ·è¯´æ˜æ›´æ”¹å¯†ç æˆåŠŸã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">passwd</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æœåŠ¡å™¨selinuxæ²¡æœ‰å…³çš„æœåŠ¡å™¨ï¼Œéœ€è¦æ‰§è¡Œ touch /.autorelabelï¼Œå¦åˆ™å¯†ç ä¸ç”Ÿæ•ˆï¼ˆselinuxå…³é—­çš„å°±è·³è¿‡è¿™ä¸€æ­¥ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /.autorelabel</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰é€€å‡ºå¹¶é‡å¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">exit</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p><strong>4ã€æµ‹è¯•æˆªå›¾å¦‚ä¸‹ï¼š</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/898161124.png" alt="centoscha4.png"></p><p>è‡³æ­¤å¯†ç ä¿®æ”¹å®Œæˆï¼Œé‡æ–°å¼€æœºéªŒè¯å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 VE æ‰©å®¹</title>
      <link href="/posts/dc0e6c620564.html"/>
      <url>/posts/dc0e6c620564.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šF5 VEæ ¹åˆ†åŒºæ²¡æœ‰å¯ç”¨ç©ºé—´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/510579645.png" alt="0.png"></p><p><strong>æ‰©å®¹æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p><p>1.æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç£ç›˜ä½¿ç”¨æƒ…å†µç»Ÿè®¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3130502639.jpg" alt="1.jpg"></p><p>2.æ·»åŠ ä¸€å—æ–°çš„ç¡¬ç›˜æ·»åŠ è‡³F5 VE</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/343854863.png" alt="2.png"></p><p>3.å¼€æœº fdisk -l æ‰¾åˆ°æ–°åŠ çš„ç¡¬ç›˜</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">fdisk -l</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2689128683.png" alt="3.png"></p><p>4.å°†æ–°çš„ç¡¬ç›˜åŠ å…¥ç‰©ç†å·</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvcreate <span class="regexp">/dev/</span>sdb</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/2979106409.jpg" alt="4.jpg"></p><p>5.æŸ¥çœ‹å·ç»„</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lvm</span></span><br><span class="line"><span class="attribute">pvs</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/701229555.png" alt="5.png"></p><p>6.å°†æ–°ç¡¬ç›˜åŠ å…¥å·ç»„</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgextend vg-db-vda <span class="regexp">/dev/</span>sdb</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/618358436.jpg" alt="6.jpg"></p><p>7.ä¸ºæ ¹åˆ†åŒºæ·»åŠ ç©ºé—´</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lvextend</span> -L +<span class="number">8</span>G /dev/mapper/vg--db--vda-set.<span class="number">1</span>.root</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/83047164.png" alt="7.png"></p><p>8.åº”ç”¨è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resize2fs <span class="regexp">/dev/</span>vg-db-vda/set.<span class="number">1</span>.root</span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3738789229.jpg" alt="8.jpg"></p><p>9.df -hT æŸ¥çœ‹æ ¹ç›®å½•æ‰©å®¹ç»“æœ</p><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/3582476960.jpg" alt="9.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> æ‰©å®¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>F5 ä½¿ç”¨Uç›˜åˆ¶ä½œEUD</title>
      <link href="/posts/7892cf38b479.html"/>
      <url>/posts/7892cf38b479.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šF5 è®¾å¤‡æŸåï¼Œéœ€è¦åšEUDã€‚</strong></p><h2 id="ä¸€ã€CentOS-åˆ¶ä½œ-EUD">ä¸€ã€CentOS åˆ¶ä½œ EUD</h2><p><strong>ç¯å¢ƒï¼šCentOS 8 ï¼ˆå¯è”ç½‘ï¼‰</strong></p><p>1ã€å®‰è£…ä¾èµ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install perl* cpan libxml2-devel zlib-devel</span><br><span class="line">cpan install XML::Simple</span><br><span class="line">cpan install XML::LibXML</span><br></pre></td></tr></table></figure><p>2ã€ç™»é™†å®˜ç½‘ä¸‹è½½æœ€æ–°ç³»ç»Ÿ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>downloads.f5.com<span class="regexp">/esd/</span>product.jsp?sw=Hardware-Specific&amp;pro=Platform</span><br></pre></td></tr></table></figure><p>3ã€åˆ›å»ºæ–‡ä»¶å¤¹ /var/eud</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/eud</span><br></pre></td></tr></table></figure><p>4ã€ä¸Šä¼ eudæ–‡ä»¶è‡³ /var/eud è·¯å¾„ä¸‹</p><p>5ã€åˆ›å»ºä¸´æ—¶æ“ä½œæ–‡ä»¶å¤¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/usb</span><br></pre></td></tr></table></figure><p>6ã€æŒ‚è½½eudæ–‡ä»¶è‡³ /var/usb</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -o ro,loop /var/eud/EUD_file.im /var/usb/</span><br><span class="line"><span class="comment">#EUD_file æ”¹ä¸ºçœŸå®EUDæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>7ã€æ’å…¥Uç›˜</p><p>8ã€è¿›å…¥/var/usbï¼Œæ‰§è¡Œmkdisk</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/usb</span><br><span class="line">./mkdisk </span><br><span class="line"><span class="comment">#å‰©ä¸‹çš„æŒ‰ç…§æç¤ºè¿›è¡Œå³å¯ï¼Œå‡ºç°Device created successfully.åˆ™EUDç›˜åˆ¶ä½œå®Œæˆã€‚</span></span><br></pre></td></tr></table></figure><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1490375910.png" alt="eud.png"></p><p>9ã€å¸è½½ imæ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /mnt/usb</span><br></pre></td></tr></table></figure><h2 id="äºŒã€BIGIP-VE-åˆ¶ä½œ-EUD">äºŒã€BIGIP VE åˆ¶ä½œ EUD</h2><p>1ã€ç™»é™†å®˜ç½‘ä¸‹è½½æœ€æ–°ç³»ç»Ÿ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>downloads.f5.com<span class="regexp">/esd/</span>product.jsp?sw=Hardware-Specific&amp;pro=Platform</span><br></pre></td></tr></table></figure><p>2ã€åˆ›å»ºæ–‡ä»¶å¤¹ /var/eud</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/eud</span><br></pre></td></tr></table></figure><p>3ã€ä¸Šä¼ eudæ–‡ä»¶è‡³ /var/eud è·¯å¾„ä¸‹</p><p>4ã€åˆ›å»ºä¸´æ—¶æ“ä½œæ–‡ä»¶å¤¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/usb</span><br></pre></td></tr></table></figure><p>5ã€æŒ‚è½½eudæ–‡ä»¶è‡³ /var/usb</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -o ro,loop /var/eud/EUD_file.im /var/usb/</span><br><span class="line"><span class="comment">#EUD_file æ”¹ä¸ºçœŸå®EUDæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>6ã€æ’å…¥Uç›˜</p><p>7ã€æŸ¥çœ‹è¦åˆ¶ä½œ EUD PID å¹³å°å‹å·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/usb</span><br><span class="line">./mkdisk --list_platforms</span><br><span class="line"></span><br><span class="line">...........................................................................</span><br><span class="line">7661 blocks</span><br><span class="line">Platform                                PID</span><br><span class="line">-------------------------------------------</span><br><span class="line">BIG-IP 350                              C107</span><br><span class="line">BIG-IP 800                              C114</span><br><span class="line">BIG-IP 1500                             C36</span><br><span class="line">BIG-IP 1600                             C102</span><br><span class="line">BIG-IP 2000                             C112</span><br><span class="line">Â·Â·Â·Â·Â·Â·</span><br><span class="line">BIG-IP i15600                           D116</span><br><span class="line">BIG-IP i15600-DN                        D116</span><br><span class="line">BIG-IP i15800                           D116</span><br><span class="line">BIG-IP i15800-DN                        D116</span><br></pre></td></tr></table></figure><p>8ã€è¿™é‡Œä»¥ BIG-IP i15600 ä¸ºä¾‹ï¼Œåˆ¶ä½œEUD</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#./mkdisk --pid åé¢è·Ÿä¸Šä¸€æ­¥æŸ¥è¯¢åˆ°çš„ PID</span></span><br><span class="line">./mkdisk --pid D116</span><br><span class="line"></span><br><span class="line">Searching repository <span class="keyword">for</span> an appropriate EUD <span class="keyword">for</span> the platform</span><br><span class="line">Please <span class="keyword">select</span> the device on <span class="built_in">which</span> you wish to create the bootable EUD</span><br><span class="line"></span><br><span class="line">Index  Product                        Size</span><br><span class="line"></span><br><span class="line">1      KingstonDataTraveler 3.0      59006 MB</span><br><span class="line">Please <span class="keyword">select</span> a device by index (1 - 1) ---&gt;1  <span class="comment">#é€‰æ‹©Uç›˜</span></span><br><span class="line">Chosen device /dev/sdc is KingstonDataTraveler 3.0</span><br><span class="line">WARNING: The next step will destroy all data on this device!</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span>? (y|n) [n] --&gt; y <span class="comment">#æ ¼å¼åŒ–ç£ç›˜</span></span><br><span class="line">info: Creating partition table on device /dev/sdc </span><br><span class="line">info: capture: status 0 returned by <span class="built_in">command</span>: sfdisk /dev/sdc &lt; /tmp/mkdisk.KoUwXs/usr/local/lib/tm_install/etc/sfdisk/part.cfg </span><br><span class="line">info: &gt;++++ result: </span><br><span class="line">info: Checking that no-one is using this disk right now ... </span><br><span class="line">info: OK </span><br><span class="line">info:  </span><br><span class="line">info: Disk /dev/sdc: 59006 cylinders, 64 heads, 32 sectors/track </span><br><span class="line">info: Old situation: </span><br><span class="line">Â·Â·Â·Â·Â·Â·</span><br><span class="line">info: Mounting /dev/sdc1 on /mnt/azRAbXBD_E </span><br><span class="line">info: Installing the master boot record on device /dev/sdc </span><br><span class="line">info: Installing the boot loader </span><br><span class="line">copying /var/tmp/Ft6bT9YQWH/shared/mfg/eud/EUD_SF-kernel.386 =&gt; /mnt/azRAbXBD_E</span><br><span class="line">copying /var/tmp/Ft6bT9YQWH/shared/mfg/eud/EUD_SF-kernel.386.md5 =&gt; /mnt/azRAbXBD_E</span><br><span class="line">copying /var/tmp/Ft6bT9YQWH/shared/mfg/eud/EUD_SF-initrd.386 =&gt; /mnt/azRAbXBD_E</span><br><span class="line">copying /var/tmp/Ft6bT9YQWH/shared/mfg/eud/EUD_SF-initrd.386.md5 =&gt; /mnt/azRAbXBD_E</span><br><span class="line">Flushing disk buffer (this may take a <span class="keyword">while</span>)... <span class="keyword">done</span></span><br><span class="line">Device created successfully. <span class="comment">#å®Œæˆ</span></span><br></pre></td></tr></table></figure><p>9ã€å¸è½½ imæ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /mnt/usb</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> EUD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python è·å– F5 é…ç½®æ–‡ä»¶</title>
      <link href="/posts/06fe46eadcc9.html"/>
      <url>/posts/06fe46eadcc9.html</url>
      
        <content type="html"><![CDATA[<p><strong>èƒŒæ™¯ï¼šé€šè¿‡Pythonè·å–F5 vsï¼Œpoolï¼Œsnatï¼Œiruleç­‰ä¿¡æ¯è¾“å‡ºåˆ°csvè¡¨æ ¼ã€‚</strong></p><hr><h2 id="ä¸€-ç»“æœå±•ç¤º">ä¸€. ç»“æœå±•ç¤º</h2><p><img src="https://www.whbblog.cn/usr/uploads/2021/06/1002999296.png" alt="f5config.png"></p><h2 id="äºŒ-è„šæœ¬å±•ç¤º">äºŒ. è„šæœ¬å±•ç¤º</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">from</span> optparse <span class="keyword">import</span> OptionParser</span><br><span class="line"><span class="keyword">from</span> f5.bigip <span class="keyword">import</span> ManagementRoot</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line">parser = OptionParser()</span><br><span class="line">parser.add_option(<span class="string">&quot;-a&quot;</span>, <span class="string">&quot;--address&quot;</span>, dest=<span class="string">&quot;address&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot; IP address of F5 bigip&quot;</span>)</span><br><span class="line">parser.add_option(<span class="string">&quot;-u&quot;</span>, <span class="string">&quot;--username&quot;</span>, dest=<span class="string">&quot;username&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;admin user name&quot;</span>)</span><br><span class="line">parser.add_option(<span class="string">&quot;-p&quot;</span>, <span class="string">&quot;--password&quot;</span>, dest=<span class="string">&quot;password&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;admin password&quot;</span>)</span><br><span class="line">options, args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">ip = options.address</span><br><span class="line">username = options.username</span><br><span class="line">password = options.password</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ip:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ipåœ°å€æœªè¾“å…¥,è¯·æŒ‰ç…§å¦‚ä¸‹çš„æ ¼å¼è¾“å…¥&#x27;</span>)</span><br><span class="line">        <span class="keyword">raise</span> Exception</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> username:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;usernameç”¨æˆ·åæœªè¾“å…¥,è¯·æŒ‰ç…§å¦‚ä¸‹çš„æ ¼å¼è¾“å…¥&#x27;</span>)</span><br><span class="line">        <span class="keyword">raise</span> Exception</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> password:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;passwordç”¨æˆ·å¯†ç æœªè¾“å…¥,è¯·æŒ‰ç…§å¦‚ä¸‹çš„æ ¼å¼è¾“å…¥&#x27;</span>)</span><br><span class="line">        <span class="keyword">raise</span> Exception</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥æ­£ç¡®å‘½ä»¤: python æ–‡ä»¶å -a ipåœ°å€ -u ç”¨æˆ·å(GUI) -p å¯†ç (GUI)&quot;</span>)</span><br><span class="line">    exit()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    mgmt = ManagementRoot(ip, username, password)</span><br><span class="line">    <span class="comment"># print(&quot; ip + username + pwd ---&gt; ok!&quot;)</span></span><br><span class="line">    vs_list = mgmt.tm.ltm.virtuals.get_collection()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¾“å…¥é”™è¯¯,è¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼,æ­£ç¡®è¾“å…¥&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥æ­£ç¡®å‘½ä»¤: python æ–‡ä»¶å -a ipåœ°å€ -u ç”¨æˆ·å -p å¯†ç &quot;</span>)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">writecsv3</span>(<span class="params">csvfilepath</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å®šä¹‰è¡¨å¤´</span></span><br><span class="line">    headers = [<span class="string">&#x27;åˆ†åŒºåç§°&#x27;</span>,<span class="string">&#x27;vsåç§°&#x27;</span>,<span class="string">&#x27;vså¯¹å¤–æœåŠ¡åœ°å€ä¸ç«¯å£&#x27;</span>,<span class="string">&#x27;æè¿°&#x27;</span>,<span class="string">&#x27;å…è®¸æºåœ°å€&#x27;</span>, <span class="string">&#x27;IPåè®®&#x27;</span>, <span class="string">&#x27;Poolåç§°&#x27;</span>, <span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>,<span class="string">&#x27;irule&#x27;</span>,<span class="string">&#x27;snatç±»å‹&#x27;</span>,<span class="string">&#x27;snatpool&#x27;</span>,<span class="string">&#x27;snatåœ°å€&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#åˆå§‹åŒ–è¡Œï¼Œè¡¨ç¤ºæŒ‰è¡Œè¾“å…¥æ•°æ®åˆ°è¡¨æ ¼ä¸­</span></span><br><span class="line">    rows = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">#åˆå§‹åŒ–åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªvså­—å…¸ä¿¡æ¯</span></span><br><span class="line">    dic_list = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">#éå†æ¯ä¸ªVS</span></span><br><span class="line">    <span class="keyword">for</span> vs <span class="keyword">in</span> vs_list:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å­—å…¸ï¼ŒæŠŠvséå†å‚æ•°å­˜å…¥å­—å…¸</span></span><br><span class="line">        dic = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#åˆ¤æ–­partitionï¼Œä¸åŒpartitionè·å–poolå’Œsnatä¿¡æ¯è¦æŒ‡å®šåˆ†åŒº</span></span><br><span class="line">        <span class="keyword">if</span> vs.partition == <span class="string">&#x27;Common&#x27;</span>:</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 1. è·å–vsåˆ†åŒºä¿¡æ¯</span></span><br><span class="line">            partition_name = vs.partition</span><br><span class="line">            dic[<span class="string">&#x27;åˆ†åŒºåç§°&#x27;</span>] = partition_name</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 2. è·å–vsåç§°ä¿¡æ¯</span></span><br><span class="line">            vs_name = vs.name</span><br><span class="line">            dic[<span class="string">&#x27;vsåç§°&#x27;</span>] = vs_name <span class="comment"># 1. vsåç§°</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 3. è·å–vså¯¹å¤–æœåŠ¡åœ°å€ä¸ç«¯å£</span></span><br><span class="line">            destination = vs.destination</span><br><span class="line">            ip_port = destination.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>] <span class="comment">#vsç›®çš„åœ°å€æ ¼å¼ä¸ºï¼š/Common/192.168.5.123:8080ï¼Œæˆ‘ä»¬å–æœ€åä¸€éƒ¨åˆ†ï¼Œç”¨splitåˆ†å‰²</span></span><br><span class="line">            dic[<span class="string">&#x27;vså¯¹å¤–æœåŠ¡åœ°å€ä¸ç«¯å£&#x27;</span>] = ip_port</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 4. è·å–vsæè¿°ä¿¡æ¯</span></span><br><span class="line">            description = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;description&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            dic[<span class="string">&#x27;æè¿°&#x27;</span>] = description</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 5. è·å–vså…è®¸æºåœ°å€ä¿¡æ¯</span></span><br><span class="line">            source = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;source&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            dic[<span class="string">&#x27;å…è®¸æºåœ°å€&#x27;</span>] = source</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 6. è·å–vsæ‰€ä½¿ç”¨IPåè®®</span></span><br><span class="line">            ip_protocol = vs.ipProtocol</span><br><span class="line">            dic[<span class="string">&#x27;IPåè®®&#x27;</span>] = ip_protocol</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 7. è·å–vsæ‰€ä½¿ç”¨poolä¿¡æ¯</span></span><br><span class="line">            pool= <span class="built_in">getattr</span>(vs, <span class="string">&#x27;pool&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># åˆ¤æ–­vsæ˜¯å¦å­˜åœ¨poolï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™vså¯¹åº”çš„poolå­—æ®µæ˜¯ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> pool <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;Poolåç§°&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">                dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># åˆ¤æ–­vsæ˜¯å¦å­˜åœ¨poolï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¿›ä¸€æ­¥è·å–vsä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment">#è·å–poolåç§°</span></span><br><span class="line">                pool_name = pool.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                dic[<span class="string">&#x27;Poolåç§°&#x27;</span>] = pool_name</span><br><span class="line"></span><br><span class="line">                <span class="comment">#åŠ è½½poolä¿¡æ¯</span></span><br><span class="line">                pool_ = mgmt.tm.ltm.pools.pool.load(name=pool_name)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#åˆå§‹åŒ–poolåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨poolæˆå‘˜</span></span><br><span class="line">                member_address_list = []</span><br><span class="line"></span><br><span class="line">                <span class="comment"># éå†æ¯ä¸ªpoolæˆå‘˜ï¼ŒåŠ å·¥å¤„ç†ä¸ºIP+Portå½¢å¼ï¼Œå­˜å‚¨åˆ°member_address_liståˆ—è¡¨ã€‚</span></span><br><span class="line">                <span class="keyword">for</span> mem <span class="keyword">in</span> pool_.members_s.get_collection():</span><br><span class="line">                    <span class="keyword">if</span> mem:</span><br><span class="line">                        member_address = mem.address</span><br><span class="line">                        member_all_name = mem.name</span><br><span class="line">                        member_port = member_all_name.rsplit(<span class="string">&#x27;:&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                        member_address_port = member_address + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(member_port)</span><br><span class="line">                        member_address_list.append(member_address_port)</span><br><span class="line">                dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = member_address_list</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 8. è·å–vsæ‰€ä½¿ç”¨iruleä¿¡æ¯</span></span><br><span class="line">            rule = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;rules&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#åˆå§‹åŒ–iruleåˆ—è¡¨</span></span><br><span class="line">            rule_list=[]</span><br><span class="line"></span><br><span class="line">            <span class="comment">#åˆ¤æ–­æ˜¯å¦ä½¿ç”¨iruleï¼Œæœªä½¿ç”¨åˆ™è¾“å‡ºâ€˜/â€™</span></span><br><span class="line">            <span class="keyword">if</span> rule <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;irule&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#åˆ¤æ–­æ˜¯å¦ä½¿ç”¨iruleï¼Œå¦‚æœä½¿ç”¨åˆ™æŠŠæ¯ä¸ªä½¿ç”¨çš„iruleå­˜å…¥rule_liståˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                <span class="keyword">for</span> rule_ <span class="keyword">in</span> rule :</span><br><span class="line">                    rules_ = rule_.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                    rule_list.append(rules_)</span><br><span class="line">                dic[<span class="string">&#x27;irule&#x27;</span>] = rule_list</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 9. è·å–vsæ‰€ä½¿ç”¨snatä¿¡æ¯</span></span><br><span class="line">            snat = vs.sourceAddressTranslation</span><br><span class="line"></span><br><span class="line">            <span class="comment">#æå–snatpoolä¿¡æ¯</span></span><br><span class="line">            snat_pool = snat.get(<span class="string">&#x27;pool&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#æå–snatç±»å‹</span></span><br><span class="line">            snat_type = snat[<span class="string">&#x27;type&#x27;</span>]</span><br><span class="line">            dic[<span class="string">&#x27;snatç±»å‹&#x27;</span>] = snat_type</span><br><span class="line"></span><br><span class="line">            <span class="comment">#åˆ¤æ–­æ˜¯å¦ä½¿ç”¨snatpool,æœªä½¿ç”¨åˆ™è¾“å‡ºâ€˜/â€™</span></span><br><span class="line">            <span class="keyword">if</span> snat_pool <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;snatpool&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">                dic[<span class="string">&#x27;snatåœ°å€&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#åˆ¤æ–­ä½¿ç”¨snatpoolçš„æƒ…å†µï¼Œè¿›ä¸€æ­¥è¾“å‡ºsnatpoolæˆå‘˜</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">                <span class="comment">#åˆ‡å‰²å¤„ç†snatpoolåç§°</span></span><br><span class="line">                snatpool_name = snat_pool.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                dic[<span class="string">&#x27;snatpool&#x27;</span>] = snatpool_name</span><br><span class="line"></span><br><span class="line">                <span class="comment">#åŠ è½½snatpoolä¿¡æ¯</span></span><br><span class="line">                snat_ = mgmt.tm.ltm.snatpools.snatpool.load(name=snatpool_name)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#åˆå§‹åŒ–snatpoolæˆå‘˜åˆ—è¡¨</span></span><br><span class="line">                snat_address_list = []</span><br><span class="line"></span><br><span class="line">                <span class="comment">#è·å–æˆå‘˜ä¿¡æ¯å¹¶æ·»åŠ åˆ°æˆå²©åˆ—è¡¨</span></span><br><span class="line">                snat_bl = <span class="built_in">getattr</span>(snat_, <span class="string">&#x27;members&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">                <span class="keyword">for</span> snat_mem <span class="keyword">in</span> snat_bl:</span><br><span class="line">                    snat_mem_all = snat_mem.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>]</span><br><span class="line">                    snat_address_list.append(snat_mem_all)</span><br><span class="line">                dic[<span class="string">&#x27;snatåœ°å€&#x27;</span>] = snat_address_list</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å…¶ä»–åˆ†åŒºä¿¡æ¯æå–ï¼ŒåŸç†å’Œcommonåˆ†åŒºå·®ä¸å¤šï¼Œåœ¨æå–poolæˆå‘˜ä¿¡æ¯å’Œsnatæˆå‘˜ä¿¡æ¯æ—¶ï¼Œè¦æŒ‡å®šåˆ†åŒºåç§°</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            partition_name = vs.partition</span><br><span class="line">            dic[<span class="string">&#x27;åˆ†åŒºåç§°&#x27;</span>] = partition_name</span><br><span class="line"></span><br><span class="line">            vs_name = vs.name</span><br><span class="line">            dic[<span class="string">&#x27;vsåç§°&#x27;</span>] = vs_name</span><br><span class="line"></span><br><span class="line">            destination = vs.destination</span><br><span class="line">            ip_port = destination.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">            dic[<span class="string">&#x27;vså¯¹å¤–æœåŠ¡åœ°å€ä¸ç«¯å£&#x27;</span>] = ip_port</span><br><span class="line"></span><br><span class="line">            description = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;description&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            dic[<span class="string">&#x27;æè¿°&#x27;</span>] = description</span><br><span class="line"></span><br><span class="line">            source = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;source&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            dic[<span class="string">&#x27;å…è®¸æºåœ°å€&#x27;</span>] = source</span><br><span class="line"></span><br><span class="line">            ip_protocol = vs.ipProtocol</span><br><span class="line">            dic[<span class="string">&#x27;IPåè®®&#x27;</span>] = ip_protocol</span><br><span class="line"></span><br><span class="line">            pool = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;pool&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            <span class="keyword">if</span> pool <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;Poolåç§°&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">                dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                pool_name = pool.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                dic[<span class="string">&#x27;Poolåç§°&#x27;</span>] = pool_name</span><br><span class="line">                subpath = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;subPath&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                member_address_list1 = []</span><br><span class="line">                <span class="keyword">if</span> subpath:</span><br><span class="line">                    pool_ = mgmt.tm.ltm.pools.pool.load(name=pool_name, partition=partition_name,subPath=subpath)</span><br><span class="line">                    <span class="keyword">for</span> mem <span class="keyword">in</span> pool_.members_s.get_collection():</span><br><span class="line">                        <span class="keyword">if</span> mem:</span><br><span class="line">                            member_address = mem.address</span><br><span class="line">                            member_all_name = mem.name</span><br><span class="line">                            member_port = member_all_name.rsplit(<span class="string">&#x27;:&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                            member_address_port = member_address + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(member_port)</span><br><span class="line">                            member_address_list1.append(member_address_port)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pool_ = mgmt.tm.ltm.pools.pool.load(name=pool_name, partition=partition_name)</span><br><span class="line">                    <span class="keyword">for</span> mem <span class="keyword">in</span> pool_.members_s.get_collection():</span><br><span class="line">                        <span class="keyword">if</span> mem:</span><br><span class="line">                            member_address = mem.address</span><br><span class="line">                            member_all_name = mem.name</span><br><span class="line">                            member_name = member_all_name.rsplit(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">                            member_port = member_all_name.rsplit(<span class="string">&#x27;:&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                            member_address_port = member_address + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(member_port)</span><br><span class="line">                            member_address_list1.append(member_address_port)</span><br><span class="line">                dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = member_address_list1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            rule = <span class="built_in">getattr</span>(vs, <span class="string">&#x27;rules&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">            rule_list = []</span><br><span class="line">            <span class="keyword">if</span> rule <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;irule&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">for</span> rule_ <span class="keyword">in</span> rule:</span><br><span class="line">                    <span class="comment"># print(type(rule_))</span></span><br><span class="line">                    rules_ = rule_.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                    rule_list.append(rules_)</span><br><span class="line">                dic[<span class="string">&#x27;irule&#x27;</span>] = rule_list</span><br><span class="line"></span><br><span class="line">            snat = vs.sourceAddressTranslation</span><br><span class="line">            snat_pool = snat.get(<span class="string">&#x27;pool&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            snat_type = snat[<span class="string">&#x27;type&#x27;</span>]</span><br><span class="line">            dic[<span class="string">&#x27;snatç±»å‹&#x27;</span>] = snat_type</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> snat_pool <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                dic[<span class="string">&#x27;snatpool&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">                dic[<span class="string">&#x27;snatåœ°å€&#x27;</span>] = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                snatpool_name = snat_pool.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">                dic[<span class="string">&#x27;snatpool&#x27;</span>] = snatpool_name</span><br><span class="line">                snat_address_list = []</span><br><span class="line">                snat_ = mgmt.tm.ltm.snatpools.snatpool.load(name=snatpool_name,</span><br><span class="line">                                                            partition=partition_name)</span><br><span class="line">                snat_bl = <span class="built_in">getattr</span>(snat_, <span class="string">&#x27;members&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">                <span class="keyword">for</span> snat_mem <span class="keyword">in</span> snat_bl:</span><br><span class="line">                    snat_mem_all = snat_mem.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>]</span><br><span class="line">                    snat_address_list.append(snat_mem_all)</span><br><span class="line">                dic[<span class="string">&#x27;snatåœ°å€&#x27;</span>] = snat_address_list</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æŠŠæ¯ä¸ªvså­—å…¸æ·»åŠ åˆ°ä¸€ä¸ªå®Œæ•´çš„åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">if</span> dic:</span><br><span class="line">            dic_list.append(dic)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#æœåŠ¡å™¨è¾“å‡ºå¦‚ä¸‹ [&#x27;172.17.6.80:80&#x27;, &#x27;192.168.6.64:443&#x27;]ï¼Œæˆ‘ä»¬æŠŠä»–ä»¬åˆ†å¼€ï¼Œè¡¨æ ¼æ¯è¡Œè¾“å‡ºä¸€ä¸ªpoolæˆå‘˜ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> dic <span class="keyword">in</span> dic_list:</span><br><span class="line"></span><br><span class="line">        server_ip = dic.get(<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> server_ip:</span><br><span class="line">            count = <span class="built_in">len</span>(server_ip)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">                space_dic = &#123;<span class="string">&#x27;åˆ†åŒºåç§°&#x27;</span>: <span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;vsåç§°&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;vså¯¹å¤–æœåŠ¡åœ°å€ä¸ç«¯å£&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;æè¿°&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;å…è®¸æºåœ°å€&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;IPåè®®&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;Poolåç§°&#x27;</span>: <span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;irule&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;snatç±»å‹&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;snatpool&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;snatåœ°å€&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                    dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = server_ip[i]  <span class="comment"># 80</span></span><br><span class="line">                    rows.append(dic)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    space_dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = server_ip[i]</span><br><span class="line">                    rows.append(space_dic)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dic[<span class="string">&#x27;æœåŠ¡å™¨å®é™…åœ°å€ä¸ç«¯å£&#x27;</span>] = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            rows.append(dic)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ‰“å¼€è¡¨æ ¼ï¼Œè¾“å…¥æ•°æ®ã€‚</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(csvfilepath, <span class="string">&#x27;w+&#x27;</span>,newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f_csv = csv.DictWriter(f, fieldnames=headers)</span><br><span class="line">        f_csv.writeheader()</span><br><span class="line">        <span class="comment"># f_csv1 = csv.DictWriter(f, headers)</span></span><br><span class="line">        f_csv.writerows(rows)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åœ¨linuxä¸‹,å†è¿è¡Œè¿™æ¡æŒ‡ä»¤,å› ä¸ºlinuxé»˜è®¤zh_CN.utf-8ç¼–ç ,è€Œwindowsæ˜¯gbkç¼–ç ,æ‰€ä»¥ä¼ è¾“ä¹‹åä¼šä¹±ç </span></span><br><span class="line">    sys_new = platform.system()</span><br><span class="line">    <span class="keyword">if</span> sys_new == <span class="string">&quot;Linux&quot;</span>:</span><br><span class="line">        os.system(<span class="string">&#x27;iconv -f UTF-8 -t GBK f5_write.csv -o f5_config.csv&#x27;</span>)</span><br><span class="line">        os.remove(<span class="string">&#x27;f5_write.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œä¸»å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line">        sys = platform.system()</span><br><span class="line">        <span class="keyword">if</span> sys == <span class="string">&quot;Windows&quot;</span>:</span><br><span class="line">            file_name = <span class="string">r&#x27;f5_config.csv&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> sys == <span class="string">&quot;Linux&quot;</span>:</span><br><span class="line">            file_name = <span class="string">r&#x27;f5_write.csv&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            file_name = <span class="string">r&#x27;f5_write.csv&#x27;</span></span><br><span class="line"></span><br><span class="line">        writecsv3(file_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸‰-æ‰§è¡Œæ–¹æ³•">ä¸‰. æ‰§è¡Œæ–¹æ³•</h2><h3 id="3-1-å®‰è£…-F5-sdk">3.1 å®‰è£… F5-sdk</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\whb&gt;pip install f5-sdk</span><br></pre></td></tr></table></figure><h3 id="3-2-æ‰§è¡Œ">3.2 æ‰§è¡Œ</h3> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•ï¼š</span></span><br><span class="line">python æ–‡ä»¶å -a ipåœ°å€ -u ç”¨æˆ·å(GUI) -p å¯†ç (GUI)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹ï¼š</span></span><br><span class="line">C:\Users\whb&gt;python f5csv1<span class="number">.0</span>.py -a <span class="number">192.168</span><span class="number">.10</span><span class="number">.122</span> -u admin -p admin</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨ï¼šæ‰§è¡Œåè¾“å‡ºè¡¨æ ¼ï¼Œä½ç½®åœ¨C:\Users\whb\f5_config.csv</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> F5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> F5 </tag>
            
            <tag> BIGIP </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 8 å®‰è£…æœ¬åœ°yumæº</title>
      <link href="/posts/76876c61eed6.html"/>
      <url>/posts/76876c61eed6.html</url>
      
        <content type="html"><![CDATA[<p>â€‹èƒŒæ™¯ï¼šåœ¨æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸‹å®‰è£…ä¸€äº›åŒ…ã€‚</p><hr><h2 id="ä¸€-æŒ‚è½½æœ¬åœ°isoé•œåƒ">ä¸€. æŒ‚è½½æœ¬åœ°isoé•œåƒ</h2><p>â€‹æŒ‚è½½æœ¬åœ°isoé•œåƒçš„ä¸¤ç§æ–¹å¼,ä¸€ç§æŠŠisoä¼ å…¥Uç›˜ï¼Œç›´æ¥æŒ‚è½½Uç›˜ã€‚å¦ä¸€ç§æŠŠisoæ”¾å…¥æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç›´æ¥æŒ‚è½½è¯¥isoã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»Uç›˜æŒ‚è½½æ–¹å¼ï¼Œæ–‡ä»¶ç³»ç»Ÿæ–¹å¼å’ŒUç›˜æŒ‚è½½æ–¹å¼ç±»ä¼¼ã€‚</p><ol><li><p>ç”±äºCentOS 8 æ ‡å‡†ç‰ˆ8G+,æ‰€ä»¥è‡³å°‘å‡†å¤‡16G+çš„Uç›˜ã€‚</p></li><li><p>æŠŠUç›˜æ ¼å¼åŒ–ä¸ºNTFSï¼Œå› ä¸ºæ–‡ä»¶å¤§äº4Gï¼Œæ— æ³•ä½¿ç”¨fat32ã€‚å¹¶æŠŠisoé•œåƒä¼ å…¥Uç›˜ä¸­ã€‚</p></li><li><p>ç”±äºCentos 8 é»˜è®¤ä¸æ”¯æŒntfsæ ¼å¼Uç›˜ï¼Œæ‰€ä»¥å†æ¬¡æˆ‘ä»¬å…ˆå®‰è£…ntfs-3gã€‚ï¼ˆéœ€è¦GCCï¼Œæ²¡æœ‰çš„è¯è‡ªå·±æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚ï¼‰</p></li></ol><ul><li><p>ä¸‹è½½ntfs-3g  é“¾æ¥å¦‚ä¸‹ ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https</span>://tuxera.com/opensource/ntfs-<span class="number">3</span>g_ntfsprogs-<span class="number">2017</span>.<span class="number">3</span>.<span class="number">23</span>.tgz</span><br></pre></td></tr></table></figure></li><li><p>æŠŠæºç åŒ…ä¸Šä¼ åˆ°CentOS 8 ä¸­ ï¼Œå¹¶å®‰è£…ntfs-3gæºç åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cp</span> ntfs-3g.tar.gz /opt/</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cd</span> /opt/</span></span><br><span class="line">   </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">tar zxvf ntfs-3g.tar.gz</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cd</span> ntfs-3g</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">make install</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæŒ‚è½½ç‚¹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="regexp">/mnt/u</span>sb</span><br></pre></td></tr></table></figure></li><li><p>æŠŠUç›˜æ’å…¥è®¾å¤‡ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹Uç›˜åˆ†åŒº</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">fdisk -l</span></span><br></pre></td></tr></table></figure></li><li><p>æŒ‚è½½Uç›˜åˆ°ç³»ç»Ÿ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntfs-<span class="number">3</span>g <span class="regexp">/dev/y</span>our_NTFS_partition <span class="regexp">/mount/u</span>sb</span><br><span class="line"><span class="comment">#your_NTFS_partition æ›¿æ¢ä¸ºfdisk -l æŸ¥çœ‹åˆ°çš„uç›˜æ‰€åœ¨åˆ†åŒº</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</p></li></ul><p><img src="https://www.whbblog.cn/usr/uploads/2021/05/2201888142.png" alt="fstab.png"></p>  <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/dev/</span>sdb1 <span class="regexp">/mnt/u</span>sb ntfs-<span class="number">3</span>g defaults <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="äºŒ-é…ç½®CentOS-8-é…ç½®æ–‡ä»¶">äºŒ. é…ç½®CentOS 8 é…ç½®æ–‡ä»¶</h2><ol><li><p>åˆ›å»ºå¤‡ä»½æ–‡ä»¶å¤¹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="regexp">/etc/yum</span>.repos.d.bak</span><br><span class="line">mv <span class="regexp">/etc/yum</span>.repos.d<span class="regexp">/* /</span>etc<span class="regexp">/yum.repos.d.bak/</span></span><br><span class="line">cp <span class="regexp">/etc/yum</span>.repos.d.bak<span class="regexp">/CentOS-Linux-Media.repo /</span>etc/yum.repos.d</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®CentOS-Linux-Media.repoæ–‡ä»¶</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/yum.repos.d/CentOS-Linux-Media.repo</span><br><span class="line">[media-baseos]</span><br><span class="line"><span class="attribute">name</span>=CentOS Linux <span class="variable">$releasever</span> - Media - BaseOS</span><br><span class="line"><span class="attribute">baseurl</span>=file:///mnt/usb/BaseOS</span><br><span class="line"><span class="attribute">gpgcheck</span>=0</span><br><span class="line"><span class="attribute">enabled</span>=1</span><br><span class="line"></span><br><span class="line">[media-appstream]</span><br><span class="line"><span class="attribute">name</span>=CentOS Linux <span class="variable">$releasever</span> - Media - AppStream</span><br><span class="line"><span class="attribute">baseurl</span>=file:///mnt/usb/AppStream</span><br><span class="line"><span class="attribute">gpgcheck</span>=0</span><br><span class="line"><span class="attribute">enabled</span>=1</span><br><span class="line">         </span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆç¼“å­˜</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos 8 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
